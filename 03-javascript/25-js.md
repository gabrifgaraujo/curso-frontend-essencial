# Módulo 3, Aula 25: Async/Await

`async/await` é uma sintaxe especial introduzida no ES2017, construída em cima de Promises, que permite escrever código assíncrono de uma maneira que se parece e se comporta como código síncrono. Isso torna o código muito mais fácil de ler e depurar.

## A Sintaxe

Para usar `async/await`, você precisa entender duas palavras-chave:

1.  **`async`**: Colocada antes de uma função, ela transforma a função em uma "função assíncrona". Uma função `async` **sempre retorna uma Promise**. Se a função retornar um valor, a Promise será resolvida com esse valor. Se a função lançar um erro, a Promise será rejeitada com esse erro.

2.  **`await`**: Só pode ser usada **dentro de uma função `async`**. Ela "pausa" a execução da função e espera que uma Promise seja resolvida. Quando a Promise é resolvida, o `await` retorna o valor resolvido, e a execução da função continua.

## Exemplo: Refatorando `fetch` com `async/await`

Vamos pegar nosso exemplo anterior com `fetch` e `.then()` e reescrevê-lo com `async/await`.

**Versão com `.then()`:**
```javascript
fetch('https://api.github.com/users/gabrifgaraujo')
  .then(response => response.json())
  .then(data => {
    console.log(data.name);
  })
  .catch(error => {
    console.error(error);
  });
```

**Versão com `async/await`:**
```javascript
// Definimos uma função assíncrona para poder usar 'await'
async function buscarDadosDoGithub() {
  console.log("Buscando dados...");
  
  try {
    // 'await' espera a Promise de fetch resolver e retorna o objeto Response
    const response = await fetch('https://api.github.com/users/gabrifgaraujo');
    
    // Verifica se a resposta foi bem-sucedida
    if (!response.ok) {
      throw new Error(`Erro HTTP! Status: ${response.status}`);
    }

    // 'await' espera a Promise de response.json() resolver e retorna os dados
    const data = await response.json();
    
    console.log(`Nome do usuário: ${data.name}`);
    console.log(`Repositórios públicos: ${data.public_repos}`);

  } catch (error) {
    // O bloco catch lida com erros de rede ou erros lançados dentro do try
    console.error("Ocorreu um erro ao buscar dados do GitHub:", error);
  } finally {
    console.log("Busca de dados finalizada.");
  }
}

buscarDadosDoGithub();
```

## Vantagens do `async/await`

*   **Legibilidade:** O código se parece mais com o síncrono, facilitando a leitura e o entendimento do fluxo.
*   **Tratamento de Erros:** O `try...catch` funciona de forma natural com `async/await`, permitindo um tratamento de erros centralizado para todas as operações assíncronas dentro da função.
*   **Depuração:** É mais fácil depurar código `async/await` usando ferramentas de desenvolvedor, pois o fluxo de execução é mais linear.

Lembre-se: `async/await` é apenas uma sintaxe mais agradável para trabalhar com Promises. Por baixo dos panos, ele ainda usa Promises.

