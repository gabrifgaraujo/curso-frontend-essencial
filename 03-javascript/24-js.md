# Módulo 3, Aula 24: Fetch API

A **Fetch API** é a interface moderna do JavaScript para fazer requisições de rede (HTTP), substituindo a antiga `XMLHttpRequest`. Ela é baseada em Promises, o que a torna poderosa e flexível para lidar com respostas assíncronas.

## Fazendo uma Requisição `GET`

A forma mais simples de usar o `fetch` é passar a URL do recurso que você quer buscar. Por padrão, ele faz uma requisição do tipo `GET`.

O `fetch()` retorna uma Promise que resolve para o objeto `Response`, representando a resposta da requisição.

```javascript
const url = 'https://jsonplaceholder.typicode.com/posts/1';

fetch(url)
  .then(response => {
    // O objeto 'response' contém informações sobre a resposta, como status, headers, etc.
    console.log('Status da resposta:', response.status); // Ex: 200

    // Para acessar o corpo da resposta, precisamos usar um método como .json(),
    // que também retorna uma Promise.
    if (!response.ok) {
      // response.ok é true se o status for 2xx (sucesso).
      throw new Error(`Erro na rede: ${response.status}`);
    }
    return response.json();
  })
  .then(data => {
    // Agora temos os dados do corpo da resposta.
    console.log('Título do post:', data.title);
  })
  .catch(error => {
    // Captura erros de rede ou erros lançados por nós (como o !response.ok).
    console.error('Houve um problema com a operação fetch:', error);
  });
```

## Fazendo uma Requisição `POST`

Para fazer outros tipos de requisição (como `POST`, `PUT`, `DELETE`), você precisa passar um segundo argumento para o `fetch`: um objeto de configuração.

```javascript
const postUrl = 'https://jsonplaceholder.typicode.com/posts';

const novoPost = {
  title: 'Meu Novo Post',
  body: 'Este é o conteúdo do meu post.',
  userId: 1,
};

const config = {
  method: 'POST', // Define o método HTTP
  headers: {
    // Informa ao servidor que estamos enviando dados no formato JSON
    'Content-Type': 'application/json',
  },
  // O corpo da requisição precisa ser uma string.
  // JSON.stringify() converte nosso objeto JavaScript em uma string JSON.
  body: JSON.stringify(novoPost),
};

fetch(postUrl, config)
  .then(response => response.json())
  .then(data => {
    console.log('Post criado com sucesso:');
    console.log(data); // O servidor geralmente retorna o objeto criado com um ID.
  })
  .catch(error => {
    console.error('Erro ao criar o post:', error);
  });
```

### Principais Opções de Configuração

*   `method`: O método HTTP (`'GET'`, `'POST'`, `'PUT'`, `'DELETE'`, etc.).
*   `headers`: Um objeto contendo os cabeçalhos da requisição.
*   `body`: O corpo da requisição. Deve ser uma string ou um objeto `FormData`, `Blob`, etc.
*   `mode`: Controla se requisições cross-origin são permitidas (`'cors'`, `'no-cors'`, `'same-origin'`). O padrão é `'cors'`.
*   `cache`: Define como a requisição interage com o cache do navegador.

A Fetch API é a ferramenta padrão para comunicação com APIs em aplicações web modernas.

