var Tde=Object.defineProperty;var wde=(t,e,n)=>e in t?Tde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>wde(t,typeof e!="symbol"?e+"":e,n);function Cde(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r2={exports:{}},Ab={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sB;function Ade(){if(sB)return Ab;sB=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,a){var s=null;if(a!==void 0&&(s=""+a),o.key!==void 0&&(s=""+o.key),"key"in o){a={};for(var i in o)i!=="key"&&(a[i]=o[i])}else a=o;return o=a.ref,{$$typeof:t,type:r,key:s,ref:o!==void 0?o:null,props:a}}return Ab.Fragment=e,Ab.jsx=n,Ab.jsxs=n,Ab}var iB;function _de(){return iB||(iB=1,r2.exports=Ade()),r2.exports}var g=_de(),o2={exports:{}},Vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lB;function kde(){if(lB)return Vt;lB=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),u=Symbol.for("react.activity"),m=Symbol.iterator;function h(G){return G===null||typeof G!="object"?null:(G=m&&G[m]||G["@@iterator"],typeof G=="function"?G:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function S(G,re,K){this.props=G,this.context=re,this.refs=x,this.updater=K||y}S.prototype.isReactComponent={},S.prototype.setState=function(G,re){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,re,"setState")},S.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function T(){}T.prototype=S.prototype;function C(G,re,K){this.props=G,this.context=re,this.refs=x,this.updater=K||y}var _=C.prototype=new T;_.constructor=C,v(_,S.prototype),_.isPureReactComponent=!0;var I=Array.isArray;function P(){}var M={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function F(G,re,K){var ve=K.ref;return{$$typeof:t,type:G,key:re,ref:ve!==void 0?ve:null,props:K}}function B(G,re){return F(G.type,re,G.props)}function V(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function z(G){var re={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(K){return re[K]})}var H=/\/+/g;function j(G,re){return typeof G=="object"&&G!==null&&G.key!=null?z(""+G.key):re.toString(36)}function q(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(P,P):(G.status="pending",G.then(function(re){G.status==="pending"&&(G.status="fulfilled",G.value=re)},function(re){G.status==="pending"&&(G.status="rejected",G.reason=re)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function U(G,re,K,ve,xe){var Oe=typeof G;(Oe==="undefined"||Oe==="boolean")&&(G=null);var Ne=!1;if(G===null)Ne=!0;else switch(Oe){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(G.$$typeof){case t:case e:Ne=!0;break;case d:return Ne=G._init,U(Ne(G._payload),re,K,ve,xe)}}if(Ne)return xe=xe(G),Ne=ve===""?"."+j(G,0):ve,I(xe)?(K="",Ne!=null&&(K=Ne.replace(H,"$&/")+"/"),U(xe,re,K,"",function(Qe){return Qe})):xe!=null&&(V(xe)&&(xe=B(xe,K+(xe.key==null||G&&G.key===xe.key?"":(""+xe.key).replace(H,"$&/")+"/")+Ne)),re.push(xe)),1;Ne=0;var Fe=ve===""?".":ve+":";if(I(G))for(var Ke=0;Ke<G.length;Ke++)ve=G[Ke],Oe=Fe+j(ve,Ke),Ne+=U(ve,re,K,Oe,xe);else if(Ke=h(G),typeof Ke=="function")for(G=Ke.call(G),Ke=0;!(ve=G.next()).done;)ve=ve.value,Oe=Fe+j(ve,Ke++),Ne+=U(ve,re,K,Oe,xe);else if(Oe==="object"){if(typeof G.then=="function")return U(q(G),re,K,ve,xe);throw re=String(G),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function Y(G,re,K){if(G==null)return G;var ve=[],xe=0;return U(G,ve,"","",function(Oe){return re.call(K,Oe,xe++)}),ve}function X(G){if(G._status===-1){var re=G._result;re=re(),re.then(function(K){(G._status===0||G._status===-1)&&(G._status=1,G._result=K)},function(K){(G._status===0||G._status===-1)&&(G._status=2,G._result=K)}),G._status===-1&&(G._status=0,G._result=re)}if(G._status===1)return G._result.default;throw G._result}var ee=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},$={map:Y,forEach:function(G,re,K){Y(G,function(){re.apply(this,arguments)},K)},count:function(G){var re=0;return Y(G,function(){re++}),re},toArray:function(G){return Y(G,function(re){return re})||[]},only:function(G){if(!V(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Vt.Activity=u,Vt.Children=$,Vt.Component=S,Vt.Fragment=n,Vt.Profiler=o,Vt.PureComponent=C,Vt.StrictMode=r,Vt.Suspense=l,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(G){return M.H.useMemoCache(G)}},Vt.cache=function(G){return function(){return G.apply(null,arguments)}},Vt.cacheSignal=function(){return null},Vt.cloneElement=function(G,re,K){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var ve=v({},G.props),xe=G.key;if(re!=null)for(Oe in re.key!==void 0&&(xe=""+re.key),re)!D.call(re,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&re.ref===void 0||(ve[Oe]=re[Oe]);var Oe=arguments.length-2;if(Oe===1)ve.children=K;else if(1<Oe){for(var Ne=Array(Oe),Fe=0;Fe<Oe;Fe++)Ne[Fe]=arguments[Fe+2];ve.children=Ne}return F(G.type,xe,ve)},Vt.createContext=function(G){return G={$$typeof:s,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},Vt.createElement=function(G,re,K){var ve,xe={},Oe=null;if(re!=null)for(ve in re.key!==void 0&&(Oe=""+re.key),re)D.call(re,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(xe[ve]=re[ve]);var Ne=arguments.length-2;if(Ne===1)xe.children=K;else if(1<Ne){for(var Fe=Array(Ne),Ke=0;Ke<Ne;Ke++)Fe[Ke]=arguments[Ke+2];xe.children=Fe}if(G&&G.defaultProps)for(ve in Ne=G.defaultProps,Ne)xe[ve]===void 0&&(xe[ve]=Ne[ve]);return F(G,Oe,xe)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(G){return{$$typeof:i,render:G}},Vt.isValidElement=V,Vt.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:X}},Vt.memo=function(G,re){return{$$typeof:c,type:G,compare:re===void 0?null:re}},Vt.startTransition=function(G){var re=M.T,K={};M.T=K;try{var ve=G(),xe=M.S;xe!==null&&xe(K,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(P,ee)}catch(Oe){ee(Oe)}finally{re!==null&&K.types!==null&&(re.types=K.types),M.T=re}},Vt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Vt.use=function(G){return M.H.use(G)},Vt.useActionState=function(G,re,K){return M.H.useActionState(G,re,K)},Vt.useCallback=function(G,re){return M.H.useCallback(G,re)},Vt.useContext=function(G){return M.H.useContext(G)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(G,re){return M.H.useDeferredValue(G,re)},Vt.useEffect=function(G,re){return M.H.useEffect(G,re)},Vt.useEffectEvent=function(G){return M.H.useEffectEvent(G)},Vt.useId=function(){return M.H.useId()},Vt.useImperativeHandle=function(G,re,K){return M.H.useImperativeHandle(G,re,K)},Vt.useInsertionEffect=function(G,re){return M.H.useInsertionEffect(G,re)},Vt.useLayoutEffect=function(G,re){return M.H.useLayoutEffect(G,re)},Vt.useMemo=function(G,re){return M.H.useMemo(G,re)},Vt.useOptimistic=function(G,re){return M.H.useOptimistic(G,re)},Vt.useReducer=function(G,re,K){return M.H.useReducer(G,re,K)},Vt.useRef=function(G){return M.H.useRef(G)},Vt.useState=function(G){return M.H.useState(G)},Vt.useSyncExternalStore=function(G,re,K){return M.H.useSyncExternalStore(G,re,K)},Vt.useTransition=function(){return M.H.useTransition()},Vt.version="19.2.0",Vt}var cB;function rD(){return cB||(cB=1,o2.exports=kde()),o2.exports}var w=rD();const bt=Wi(w),j$=Cde({__proto__:null,default:bt},[w]);var a2={exports:{}},_b={},s2={exports:{}},i2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uB;function Ide(){return uB||(uB=1,(function(t){function e(U,Y){var X=U.length;U.push(Y);e:for(;0<X;){var ee=X-1>>>1,$=U[ee];if(0<o($,Y))U[ee]=Y,U[X]=$,X=ee;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],X=U.pop();if(X!==Y){U[0]=X;e:for(var ee=0,$=U.length,G=$>>>1;ee<G;){var re=2*(ee+1)-1,K=U[re],ve=re+1,xe=U[ve];if(0>o(K,X))ve<$&&0>o(xe,K)?(U[ee]=xe,U[ve]=X,ee=ve):(U[ee]=K,U[re]=X,ee=re);else if(ve<$&&0>o(xe,X))U[ee]=xe,U[ve]=X,ee=ve;else break e}}return Y}function o(U,Y){var X=U.sortIndex-Y.sortIndex;return X!==0?X:U.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,i=s.now();t.unstable_now=function(){return s.now()-i}}var l=[],c=[],d=1,u=null,m=3,h=!1,y=!1,v=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function _(U){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=U)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function I(U){if(v=!1,_(U),!y)if(n(l)!==null)y=!0,P||(P=!0,z());else{var Y=n(c);Y!==null&&q(I,Y.startTime-U)}}var P=!1,M=-1,D=5,F=-1;function B(){return x?!0:!(t.unstable_now()-F<D)}function V(){if(x=!1,P){var U=t.unstable_now();F=U;var Y=!0;try{e:{y=!1,v&&(v=!1,T(M),M=-1),h=!0;var X=m;try{t:{for(_(U),u=n(l);u!==null&&!(u.expirationTime>U&&B());){var ee=u.callback;if(typeof ee=="function"){u.callback=null,m=u.priorityLevel;var $=ee(u.expirationTime<=U);if(U=t.unstable_now(),typeof $=="function"){u.callback=$,_(U),Y=!0;break t}u===n(l)&&r(l),_(U)}else r(l);u=n(l)}if(u!==null)Y=!0;else{var G=n(c);G!==null&&q(I,G.startTime-U),Y=!1}}break e}finally{u=null,m=X,h=!1}Y=void 0}}finally{Y?z():P=!1}}}var z;if(typeof C=="function")z=function(){C(V)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,j=H.port2;H.port1.onmessage=V,z=function(){j.postMessage(null)}}else z=function(){S(V,0)};function q(U,Y){M=S(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var X=m;m=Y;try{return U()}finally{m=X}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=m;m=U;try{return Y()}finally{m=X}},t.unstable_scheduleCallback=function(U,Y,X){var ee=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,U){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=X+$,U={id:d++,callback:Y,priorityLevel:U,startTime:X,expirationTime:$,sortIndex:-1},X>ee?(U.sortIndex=X,e(c,U),n(l)===null&&U===n(c)&&(v?(T(M),M=-1):v=!0,q(I,X-ee))):(U.sortIndex=$,e(l,U),y||h||(y=!0,P||(P=!0,z()))),U},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(U){var Y=m;return function(){var X=m;m=Y;try{return U.apply(this,arguments)}finally{m=X}}}})(i2)),i2}var dB;function Pde(){return dB||(dB=1,s2.exports=Ide()),s2.exports}var l2={exports:{}},Ua={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pB;function Ode(){if(pB)return Ua;pB=1;var t=rD();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(l,c,d){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:u==null?null:""+u,children:l,containerInfo:c,implementation:d}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function i(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ua.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ua.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,d)},Ua.flushSync=function(l){var c=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=c,r.p=d,r.d.f()}},Ua.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Ua.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ua.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,u=i(d,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,h=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:u,integrity:m,fetchPriority:h}):d==="script"&&r.d.X(l,{crossOrigin:u,integrity:m,fetchPriority:h,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ua.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=i(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Ua.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,u=i(d,c.crossOrigin);r.d.L(l,d,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ua.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=i(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Ua.requestFormReset=function(l){r.d.r(l)},Ua.unstable_batchedUpdates=function(l,c){return l(c)},Ua.useFormState=function(l,c,d){return s.H.useFormState(l,c,d)},Ua.useFormStatus=function(){return s.H.useHostTransitionStatus()},Ua.version="19.2.0",Ua}var fB;function B$(){if(fB)return l2.exports;fB=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),l2.exports=Ode(),l2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mB;function Mde(){if(mB)return _b;mB=1;var t=Pde(),e=rD(),n=B$();function r(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function a(p){var f=p,b=p;if(p.alternate)for(;f.return;)f=f.return;else{p=f;do f=p,(f.flags&4098)!==0&&(b=f.return),p=f.return;while(p)}return f.tag===3?b:null}function s(p){if(p.tag===13){var f=p.memoizedState;if(f===null&&(p=p.alternate,p!==null&&(f=p.memoizedState)),f!==null)return f.dehydrated}return null}function i(p){if(p.tag===31){var f=p.memoizedState;if(f===null&&(p=p.alternate,p!==null&&(f=p.memoizedState)),f!==null)return f.dehydrated}return null}function l(p){if(a(p)!==p)throw Error(r(188))}function c(p){var f=p.alternate;if(!f){if(f=a(p),f===null)throw Error(r(188));return f!==p?null:p}for(var b=p,E=f;;){var A=b.return;if(A===null)break;var k=A.alternate;if(k===null){if(E=A.return,E!==null){b=E;continue}break}if(A.child===k.child){for(k=A.child;k;){if(k===b)return l(A),p;if(k===E)return l(A),f;k=k.sibling}throw Error(r(188))}if(b.return!==E.return)b=A,E=k;else{for(var N=!1,W=A.child;W;){if(W===b){N=!0,b=A,E=k;break}if(W===E){N=!0,E=A,b=k;break}W=W.sibling}if(!N){for(W=k.child;W;){if(W===b){N=!0,b=k,E=A;break}if(W===E){N=!0,E=k,b=A;break}W=W.sibling}if(!N)throw Error(r(189))}}if(b.alternate!==E)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?p:f}function d(p){var f=p.tag;if(f===5||f===26||f===27||f===6)return p;for(p=p.child;p!==null;){if(f=d(p),f!==null)return f;p=p.sibling}return null}var u=Object.assign,m=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(p){return p===null||typeof p!="object"?null:(p=V&&p[V]||p["@@iterator"],typeof p=="function"?p:null)}var H=Symbol.for("react.client.reference");function j(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===H?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case v:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList";case F:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case y:return"Portal";case C:return p.displayName||"Context";case T:return(p._context.displayName||"Context")+".Consumer";case _:var f=p.render;return p=p.displayName,p||(p=f.displayName||f.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case M:return f=p.displayName||null,f!==null?f:j(p.type)||"Memo";case D:f=p._payload,p=p._init;try{return j(p(f))}catch{}}return null}var q=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ee=[],$=-1;function G(p){return{current:p}}function re(p){0>$||(p.current=ee[$],ee[$]=null,$--)}function K(p,f){$++,ee[$]=p.current,p.current=f}var ve=G(null),xe=G(null),Oe=G(null),Ne=G(null);function Fe(p,f){switch(K(Oe,f),K(xe,p),K(ve,null),f.nodeType){case 9:case 11:p=(p=f.documentElement)&&(p=p.namespaceURI)?I5(p):0;break;default:if(p=f.tagName,f=f.namespaceURI)f=I5(f),p=P5(f,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}re(ve),K(ve,p)}function Ke(){re(ve),re(xe),re(Oe)}function Qe(p){p.memoizedState!==null&&K(Ne,p);var f=ve.current,b=P5(f,p.type);f!==b&&(K(xe,p),K(ve,b))}function Wt(p){xe.current===p&&(re(ve),re(xe)),Ne.current===p&&(re(Ne),Eb._currentValue=X)}var hn,Yt;function Ut(p){if(hn===void 0)try{throw Error()}catch(b){var f=b.stack.trim().match(/\n( *(at )?)/);hn=f&&f[1]||"",Yt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hn+p+Yt}var an=!1;function wt(p,f){if(!p||an)return"";an=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(f){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(Ee){var ye=Ee}Reflect.construct(p,[],Me)}else{try{Me.call()}catch(Ee){ye=Ee}p.call(Me.prototype)}}else{try{throw Error()}catch(Ee){ye=Ee}(Me=p())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(Ee){if(Ee&&ye&&typeof Ee.stack=="string")return[Ee.stack,ye.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=E.DetermineComponentFrameRoot(),N=k[0],W=k[1];if(N&&W){var ae=N.split(`
`),be=W.split(`
`);for(A=E=0;E<ae.length&&!ae[E].includes("DetermineComponentFrameRoot");)E++;for(;A<be.length&&!be[A].includes("DetermineComponentFrameRoot");)A++;if(E===ae.length||A===be.length)for(E=ae.length-1,A=be.length-1;1<=E&&0<=A&&ae[E]!==be[A];)A--;for(;1<=E&&0<=A;E--,A--)if(ae[E]!==be[A]){if(E!==1||A!==1)do if(E--,A--,0>A||ae[E]!==be[A]){var _e=`
`+ae[E].replace(" at new "," at ");return p.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",p.displayName)),_e}while(1<=E&&0<=A);break}}}finally{an=!1,Error.prepareStackTrace=b}return(b=p?p.displayName||p.name:"")?Ut(b):""}function qn(p,f){switch(p.tag){case 26:case 27:case 5:return Ut(p.type);case 16:return Ut("Lazy");case 13:return p.child!==f&&f!==null?Ut("Suspense Fallback"):Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 15:return wt(p.type,!1);case 11:return wt(p.type.render,!1);case 1:return wt(p.type,!0);case 31:return Ut("Activity");default:return""}}function Gn(p){try{var f="",b=null;do f+=qn(p,b),b=p,p=p.return;while(p);return f}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var Wn=Object.prototype.hasOwnProperty,Yr=t.unstable_scheduleCallback,ko=t.unstable_cancelCallback,hi=t.unstable_shouldYield,gi=t.unstable_requestPaint,Kn=t.unstable_now,Io=t.unstable_getCurrentPriorityLevel,Te=t.unstable_ImmediatePriority,Ve=t.unstable_UserBlockingPriority,yt=t.unstable_NormalPriority,jt=t.unstable_LowPriority,fe=t.unstable_IdlePriority,He=t.log,gt=t.unstable_setDisableYieldValue,Bt=null,fn=null;function Pn(p){if(typeof He=="function"&&gt(p),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(Bt,p)}catch{}}var ln=Math.clz32?Math.clz32:ma,Or=Math.log,Hn=Math.LN2;function ma(p){return p>>>=0,p===0?32:31-(Or(p)/Hn|0)|0}var Ko=256,La=262144,Bs=4194304;function Po(p){var f=p&42;if(f!==0)return f;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return p&261888;case 262144:case 524288:case 1048576:case 2097152:return p&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function oe(p,f,b){var E=p.pendingLanes;if(E===0)return 0;var A=0,k=p.suspendedLanes,N=p.pingedLanes;p=p.warmLanes;var W=E&134217727;return W!==0?(E=W&~k,E!==0?A=Po(E):(N&=W,N!==0?A=Po(N):b||(b=W&~p,b!==0&&(A=Po(b))))):(W=E&~k,W!==0?A=Po(W):N!==0?A=Po(N):b||(b=E&~p,b!==0&&(A=Po(b)))),A===0?0:f!==0&&f!==A&&(f&k)===0&&(k=A&-A,b=f&-f,k>=b||k===32&&(b&4194048)!==0)?f:A}function Ce(p,f){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&f)===0}function Je(p,f){switch(p){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _t(){var p=Bs;return Bs<<=1,(Bs&62914560)===0&&(Bs=4194304),p}function On(p){for(var f=[],b=0;31>b;b++)f.push(p);return f}function $n(p,f){p.pendingLanes|=f,f!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function ut(p,f,b,E,A,k){var N=p.pendingLanes;p.pendingLanes=b,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=b,p.entangledLanes&=b,p.errorRecoveryDisabledLanes&=b,p.shellSuspendCounter=0;var W=p.entanglements,ae=p.expirationTimes,be=p.hiddenUpdates;for(b=N&~b;0<b;){var _e=31-ln(b),Me=1<<_e;W[_e]=0,ae[_e]=-1;var ye=be[_e];if(ye!==null)for(be[_e]=null,_e=0;_e<ye.length;_e++){var Ee=ye[_e];Ee!==null&&(Ee.lane&=-536870913)}b&=~Me}E!==0&&ot(p,E,0),k!==0&&A===0&&p.tag!==0&&(p.suspendedLanes|=k&~(N&~f))}function ot(p,f,b){p.pendingLanes|=f,p.suspendedLanes&=~f;var E=31-ln(f);p.entangledLanes|=f,p.entanglements[E]=p.entanglements[E]|1073741824|b&261930}function vt(p,f){var b=p.entangledLanes|=f;for(p=p.entanglements;b;){var E=31-ln(b),A=1<<E;A&f|p[E]&f&&(p[E]|=f),b&=~A}}function Sr(p,f){var b=f&-f;return b=(b&42)!==0?1:Yn(b),(b&(p.suspendedLanes|f))!==0?0:b}function Yn(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function ms(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function ja(){var p=Y.p;return p!==0?p:(p=window.event,p===void 0?32:Z5(p.type))}function pc(p,f){var b=Y.p;try{return Y.p=p,f()}finally{Y.p=b}}var Oo=Math.random().toString(36).slice(2),Er="__reactFiber$"+Oo,Mo="__reactProps$"+Oo,nl="__reactContainer$"+Oo,ha="__reactEvents$"+Oo,ad="__reactListeners$"+Oo,bi="__reactHandles$"+Oo,sd="__reactResources$"+Oo,Ul="__reactMarker$"+Oo;function Ba(p){delete p[Er],delete p[Mo],delete p[ha],delete p[ad],delete p[bi]}function Tr(p){var f=p[Er];if(f)return f;for(var b=p.parentNode;b;){if(f=b[nl]||b[Er]){if(b=f.alternate,f.child!==null||b!==null&&b.child!==null)for(p=j5(p);p!==null;){if(b=p[Er])return b;p=j5(p)}return f}p=b,b=p.parentNode}return null}function yi(p){if(p=p[Er]||p[nl]){var f=p.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return p}return null}function rl(p){var f=p.tag;if(f===5||f===26||f===27||f===6)return p.stateNode;throw Error(r(33))}function ol(p){var f=p[sd];return f||(f=p[sd]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Mr(p){p[Ul]=!0}var id=new Set,ga={};function vi(p,f){$e(p,f),$e(p+"Capture",f)}function $e(p,f){for(ga[p]=f,p=0;p<f.length;p++)id.add(f[p])}var ct=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xt={},Mn={};function wr(p){return Wn.call(Mn,p)?!0:Wn.call(Xt,p)?!1:ct.test(p)?Mn[p]=!0:(Xt[p]=!0,!1)}function co(p,f,b){if(wr(f))if(b===null)p.removeAttribute(f);else{switch(typeof b){case"undefined":case"function":case"symbol":p.removeAttribute(f);return;case"boolean":var E=f.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){p.removeAttribute(f);return}}p.setAttribute(f,""+b)}}function ba(p,f,b){if(b===null)p.removeAttribute(f);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(f);return}p.setAttribute(f,""+b)}}function ea(p,f,b,E){if(E===null)p.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(b);return}p.setAttributeNS(f,b,""+E)}}function Sn(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Xr(p){var f=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Wo(p,f,b){var E=Object.getOwnPropertyDescriptor(p.constructor.prototype,f);if(!p.hasOwnProperty(f)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var A=E.get,k=E.set;return Object.defineProperty(p,f,{configurable:!0,get:function(){return A.call(this)},set:function(N){b=""+N,k.call(this,N)}}),Object.defineProperty(p,f,{enumerable:E.enumerable}),{getValue:function(){return b},setValue:function(N){b=""+N},stopTracking:function(){p._valueTracker=null,delete p[f]}}}}function ql(p){if(!p._valueTracker){var f=Xr(p)?"checked":"value";p._valueTracker=Wo(p,f,""+p[f])}}function fc(p){if(!p)return!1;var f=p._valueTracker;if(!f)return!0;var b=f.getValue(),E="";return p&&(E=Xr(p)?p.checked?"true":"false":p.value),p=E,p!==b?(f.setValue(p),!0):!1}function mc(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var Hp=/[\n"\\]/g;function Rr(p){return p.replace(Hp,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function hc(p,f,b,E,A,k,N,W){p.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?p.type=N:p.removeAttribute("type"),f!=null?N==="number"?(f===0&&p.value===""||p.value!=f)&&(p.value=""+Sn(f)):p.value!==""+Sn(f)&&(p.value=""+Sn(f)):N!=="submit"&&N!=="reset"||p.removeAttribute("value"),f!=null?sl(p,N,Sn(f)):b!=null?sl(p,N,Sn(b)):E!=null&&p.removeAttribute("value"),A==null&&k!=null&&(p.defaultChecked=!!k),A!=null&&(p.checked=A&&typeof A!="function"&&typeof A!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?p.name=""+Sn(W):p.removeAttribute("name")}function al(p,f,b,E,A,k,N,W){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(p.type=k),f!=null||b!=null){if(!(k!=="submit"&&k!=="reset"||f!=null)){ql(p);return}b=b!=null?""+Sn(b):"",f=f!=null?""+Sn(f):b,W||f===p.value||(p.value=f),p.defaultValue=f}E=E??A,E=typeof E!="function"&&typeof E!="symbol"&&!!E,p.checked=W?p.checked:!!E,p.defaultChecked=!!E,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(p.name=N),ql(p)}function sl(p,f,b){f==="number"&&mc(p.ownerDocument)===p||p.defaultValue===""+b||(p.defaultValue=""+b)}function Jr(p,f,b,E){if(p=p.options,f){f={};for(var A=0;A<b.length;A++)f["$"+b[A]]=!0;for(b=0;b<p.length;b++)A=f.hasOwnProperty("$"+p[b].value),p[b].selected!==A&&(p[b].selected=A),A&&E&&(p[b].defaultSelected=!0)}else{for(b=""+Sn(b),f=null,A=0;A<p.length;A++){if(p[A].value===b){p[A].selected=!0,E&&(p[A].defaultSelected=!0);return}f!==null||p[A].disabled||(f=p[A])}f!==null&&(f.selected=!0)}}function au(p,f,b){if(f!=null&&(f=""+Sn(f),f!==p.value&&(p.value=f),b==null)){p.defaultValue!==f&&(p.defaultValue=f);return}p.defaultValue=b!=null?""+Sn(b):""}function xi(p,f,b,E){if(f==null){if(E!=null){if(b!=null)throw Error(r(92));if(q(E)){if(1<E.length)throw Error(r(93));E=E[0]}b=E}b==null&&(b=""),f=b}b=Sn(f),p.defaultValue=b,E=p.textContent,E===b&&E!==""&&E!==null&&(p.value=E),ql(p)}function St(p,f){if(f){var b=p.firstChild;if(b&&b===p.lastChild&&b.nodeType===3){b.nodeValue=f;return}}p.textContent=f}var su=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function br(p,f,b){var E=f.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?p.setProperty(f,""):f==="float"?p.cssFloat="":p[f]="":E?p.setProperty(f,b):typeof b!="number"||b===0||su.has(f)?f==="float"?p.cssFloat=b:p[f]=(""+b).trim():p[f]=b+"px"}function Jt(p,f,b){if(f!=null&&typeof f!="object")throw Error(r(62));if(p=p.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||f!=null&&f.hasOwnProperty(E)||(E.indexOf("--")===0?p.setProperty(E,""):E==="float"?p.cssFloat="":p[E]="");for(var A in f)E=f[A],f.hasOwnProperty(A)&&b[A]!==E&&br(p,A,E)}else for(var k in f)f.hasOwnProperty(k)&&br(p,k,f[k])}function il(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),te=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function me(p){return te.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}function pe(){}var Ae=null;function lt(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var et=null,$t=null;function Xn(p){var f=yi(p);if(f&&(p=f.stateNode)){var b=p[Mo]||null;e:switch(p=f.stateNode,f.type){case"input":if(hc(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),f=b.name,b.type==="radio"&&f!=null){for(b=p;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Rr(""+f)+'"][type="radio"]'),f=0;f<b.length;f++){var E=b[f];if(E!==p&&E.form===p.form){var A=E[Mo]||null;if(!A)throw Error(r(90));hc(E,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(f=0;f<b.length;f++)E=b[f],E.form===p.form&&fc(E)}break e;case"textarea":au(p,b.value,b.defaultValue);break e;case"select":f=b.value,f!=null&&Jr(p,!!b.multiple,f,!1)}}}var yr=!1;function uo(p,f,b){if(yr)return p(f,b);yr=!0;try{var E=p(f);return E}finally{if(yr=!1,(et!==null||$t!==null)&&(kx(),et&&(f=et,p=$t,$t=et=null,Xn(f),p)))for(f=0;f<p.length;f++)Xn(p[f])}}function po(p,f){var b=p.stateNode;if(b===null)return null;var E=b[Mo]||null;if(E===null)return null;b=E[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(p=p.type,E=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!E;break e;default:p=!1}if(p)return null;if(b&&typeof b!="function")throw Error(r(231,f,typeof b));return b}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qr=!1;if(Dr)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Qr=!1}var Lr=null,zs=null,Fa=null;function ll(){if(Fa)return Fa;var p,f=zs,b=f.length,E,A="value"in Lr?Lr.value:Lr.textContent,k=A.length;for(p=0;p<b&&f[p]===A[p];p++);var N=b-p;for(E=1;E<=N&&f[b-E]===A[k-E];E++);return Fa=A.slice(p,1<E?1-E:void 0)}function Q(p){var f=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&f===13&&(p=13)):p=f,p===10&&(p=13),32<=p||p===13?p:0}function le(){return!0}function Re(){return!1}function Ze(p){function f(b,E,A,k,N){this._reactName=b,this._targetInst=A,this.type=E,this.nativeEvent=k,this.target=N,this.currentTarget=null;for(var W in p)p.hasOwnProperty(W)&&(b=p[W],this[W]=b?b(k):k[W]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?le:Re,this.isPropagationStopped=Re,this}return u(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=le)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=le)},persist:function(){},isPersistent:le}),f}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ft=Ze(Rn),nr=u({},Rn,{view:0,detail:0}),Ro=Ze(nr),fo,ur,Yo,za=u({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lA,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Yo&&(Yo&&p.type==="mousemove"?(fo=p.screenX-Yo.screenX,ur=p.screenY-Yo.screenY):ur=fo=0,Yo=p),fo)},movementY:function(p){return"movementY"in p?p.movementY:ur}}),Xo=Ze(za),Us=u({},za,{dataTransfer:0}),qs=Ze(Us),gc=u({},nr,{relatedTarget:0}),Si=Ze(gc),iu=u({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Gv=Ze(iu),fm=u({},Rn,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),mm=Ze(fm),Ice=u({},Rn,{data:0}),Rj=Ze(Ice),Pce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rce(p){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(p):(p=Mce[p])?!!f[p]:!1}function lA(){return Rce}var Dce=u({},nr,{key:function(p){if(p.key){var f=Pce[p.key]||p.key;if(f!=="Unidentified")return f}return p.type==="keypress"?(p=Q(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Oce[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lA,charCode:function(p){return p.type==="keypress"?Q(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Q(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Nce=Ze(Dce),Lce=u({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dj=Ze(Lce),jce=u({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lA}),Bce=Ze(jce),Fce=u({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),zce=Ze(Fce),Uce=u({},za,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),qce=Ze(Uce),Hce=u({},Rn,{newState:0,oldState:0}),$ce=Ze(Hce),Vce=[9,13,27,32],cA=Dr&&"CompositionEvent"in window,Hg=null;Dr&&"documentMode"in document&&(Hg=document.documentMode);var Gce=Dr&&"TextEvent"in window&&!Hg,Nj=Dr&&(!cA||Hg&&8<Hg&&11>=Hg),Lj=" ",jj=!1;function Bj(p,f){switch(p){case"keyup":return Vce.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fj(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var hm=!1;function Kce(p,f){switch(p){case"compositionend":return Fj(f);case"keypress":return f.which!==32?null:(jj=!0,Lj);case"textInput":return p=f.data,p===Lj&&jj?null:p;default:return null}}function Wce(p,f){if(hm)return p==="compositionend"||!cA&&Bj(p,f)?(p=ll(),Fa=zs=Lr=null,hm=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Nj&&f.locale!=="ko"?null:f.data;default:return null}}var Yce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zj(p){var f=p&&p.nodeName&&p.nodeName.toLowerCase();return f==="input"?!!Yce[p.type]:f==="textarea"}function Uj(p,f,b,E){et?$t?$t.push(E):$t=[E]:et=E,f=Nx(f,"onChange"),0<f.length&&(b=new Ft("onChange","change",null,b,E),p.push({event:b,listeners:f}))}var $g=null,Vg=null;function Xce(p){T5(p,0)}function Kv(p){var f=rl(p);if(fc(f))return p}function qj(p,f){if(p==="change")return f}var Hj=!1;if(Dr){var uA;if(Dr){var dA="oninput"in document;if(!dA){var $j=document.createElement("div");$j.setAttribute("oninput","return;"),dA=typeof $j.oninput=="function"}uA=dA}else uA=!1;Hj=uA&&(!document.documentMode||9<document.documentMode)}function Vj(){$g&&($g.detachEvent("onpropertychange",Gj),Vg=$g=null)}function Gj(p){if(p.propertyName==="value"&&Kv(Vg)){var f=[];Uj(f,Vg,p,lt(p)),uo(Xce,f)}}function Jce(p,f,b){p==="focusin"?(Vj(),$g=f,Vg=b,$g.attachEvent("onpropertychange",Gj)):p==="focusout"&&Vj()}function Qce(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Kv(Vg)}function Zce(p,f){if(p==="click")return Kv(f)}function eue(p,f){if(p==="input"||p==="change")return Kv(f)}function tue(p,f){return p===f&&(p!==0||1/p===1/f)||p!==p&&f!==f}var Ei=typeof Object.is=="function"?Object.is:tue;function Gg(p,f){if(Ei(p,f))return!0;if(typeof p!="object"||p===null||typeof f!="object"||f===null)return!1;var b=Object.keys(p),E=Object.keys(f);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var A=b[E];if(!Wn.call(f,A)||!Ei(p[A],f[A]))return!1}return!0}function Kj(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Wj(p,f){var b=Kj(p);p=0;for(var E;b;){if(b.nodeType===3){if(E=p+b.textContent.length,p<=f&&E>=f)return{node:b,offset:f-p};p=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Kj(b)}}function Yj(p,f){return p&&f?p===f?!0:p&&p.nodeType===3?!1:f&&f.nodeType===3?Yj(p,f.parentNode):"contains"in p?p.contains(f):p.compareDocumentPosition?!!(p.compareDocumentPosition(f)&16):!1:!1}function Xj(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var f=mc(p.document);f instanceof p.HTMLIFrameElement;){try{var b=typeof f.contentWindow.location.href=="string"}catch{b=!1}if(b)p=f.contentWindow;else break;f=mc(p.document)}return f}function pA(p){var f=p&&p.nodeName&&p.nodeName.toLowerCase();return f&&(f==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||f==="textarea"||p.contentEditable==="true")}var nue=Dr&&"documentMode"in document&&11>=document.documentMode,gm=null,fA=null,Kg=null,mA=!1;function Jj(p,f,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;mA||gm==null||gm!==mc(E)||(E=gm,"selectionStart"in E&&pA(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Kg&&Gg(Kg,E)||(Kg=E,E=Nx(fA,"onSelect"),0<E.length&&(f=new Ft("onSelect","select",null,f,b),p.push({event:f,listeners:E}),f.target=gm)))}function $p(p,f){var b={};return b[p.toLowerCase()]=f.toLowerCase(),b["Webkit"+p]="webkit"+f,b["Moz"+p]="moz"+f,b}var bm={animationend:$p("Animation","AnimationEnd"),animationiteration:$p("Animation","AnimationIteration"),animationstart:$p("Animation","AnimationStart"),transitionrun:$p("Transition","TransitionRun"),transitionstart:$p("Transition","TransitionStart"),transitioncancel:$p("Transition","TransitionCancel"),transitionend:$p("Transition","TransitionEnd")},hA={},Qj={};Dr&&(Qj=document.createElement("div").style,"AnimationEvent"in window||(delete bm.animationend.animation,delete bm.animationiteration.animation,delete bm.animationstart.animation),"TransitionEvent"in window||delete bm.transitionend.transition);function Vp(p){if(hA[p])return hA[p];if(!bm[p])return p;var f=bm[p],b;for(b in f)if(f.hasOwnProperty(b)&&b in Qj)return hA[p]=f[b];return p}var Zj=Vp("animationend"),e4=Vp("animationiteration"),t4=Vp("animationstart"),rue=Vp("transitionrun"),oue=Vp("transitionstart"),aue=Vp("transitioncancel"),n4=Vp("transitionend"),r4=new Map,gA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gA.push("scrollEnd");function Hl(p,f){r4.set(p,f),vi(f,[p])}var Wv=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},cl=[],ym=0,bA=0;function Yv(){for(var p=ym,f=bA=ym=0;f<p;){var b=cl[f];cl[f++]=null;var E=cl[f];cl[f++]=null;var A=cl[f];cl[f++]=null;var k=cl[f];if(cl[f++]=null,E!==null&&A!==null){var N=E.pending;N===null?A.next=A:(A.next=N.next,N.next=A),E.pending=A}k!==0&&o4(b,A,k)}}function Xv(p,f,b,E){cl[ym++]=p,cl[ym++]=f,cl[ym++]=b,cl[ym++]=E,bA|=E,p.lanes|=E,p=p.alternate,p!==null&&(p.lanes|=E)}function yA(p,f,b,E){return Xv(p,f,b,E),Jv(p)}function Gp(p,f){return Xv(p,null,null,f),Jv(p)}function o4(p,f,b){p.lanes|=b;var E=p.alternate;E!==null&&(E.lanes|=b);for(var A=!1,k=p.return;k!==null;)k.childLanes|=b,E=k.alternate,E!==null&&(E.childLanes|=b),k.tag===22&&(p=k.stateNode,p===null||p._visibility&1||(A=!0)),p=k,k=k.return;return p.tag===3?(k=p.stateNode,A&&f!==null&&(A=31-ln(b),p=k.hiddenUpdates,E=p[A],E===null?p[A]=[f]:E.push(f),f.lane=b|536870912),k):null}function Jv(p){if(50<hb)throw hb=0,__=null,Error(r(185));for(var f=p.return;f!==null;)p=f,f=p.return;return p.tag===3?p.stateNode:null}var vm={};function sue(p,f,b,E){this.tag=p,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(p,f,b,E){return new sue(p,f,b,E)}function vA(p){return p=p.prototype,!(!p||!p.isReactComponent)}function lu(p,f){var b=p.alternate;return b===null?(b=Ti(p.tag,f,p.key,p.mode),b.elementType=p.elementType,b.type=p.type,b.stateNode=p.stateNode,b.alternate=p,p.alternate=b):(b.pendingProps=f,b.type=p.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=p.flags&65011712,b.childLanes=p.childLanes,b.lanes=p.lanes,b.child=p.child,b.memoizedProps=p.memoizedProps,b.memoizedState=p.memoizedState,b.updateQueue=p.updateQueue,f=p.dependencies,b.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},b.sibling=p.sibling,b.index=p.index,b.ref=p.ref,b.refCleanup=p.refCleanup,b}function a4(p,f){p.flags&=65011714;var b=p.alternate;return b===null?(p.childLanes=0,p.lanes=f,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=b.childLanes,p.lanes=b.lanes,p.child=b.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=b.memoizedProps,p.memoizedState=b.memoizedState,p.updateQueue=b.updateQueue,p.type=b.type,f=b.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),p}function Qv(p,f,b,E,A,k){var N=0;if(E=p,typeof p=="function")vA(p)&&(N=1);else if(typeof p=="string")N=dde(p,b,ve.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case F:return p=Ti(31,b,f,A),p.elementType=F,p.lanes=k,p;case v:return Kp(b.children,A,k,f);case x:N=8,A|=24;break;case S:return p=Ti(12,b,f,A|2),p.elementType=S,p.lanes=k,p;case I:return p=Ti(13,b,f,A),p.elementType=I,p.lanes=k,p;case P:return p=Ti(19,b,f,A),p.elementType=P,p.lanes=k,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case C:N=10;break e;case T:N=9;break e;case _:N=11;break e;case M:N=14;break e;case D:N=16,E=null;break e}N=29,b=Error(r(130,p===null?"null":typeof p,"")),E=null}return f=Ti(N,b,f,A),f.elementType=p,f.type=E,f.lanes=k,f}function Kp(p,f,b,E){return p=Ti(7,p,E,f),p.lanes=b,p}function xA(p,f,b){return p=Ti(6,p,null,f),p.lanes=b,p}function s4(p){var f=Ti(18,null,null,0);return f.stateNode=p,f}function SA(p,f,b){return f=Ti(4,p.children!==null?p.children:[],p.key,f),f.lanes=b,f.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},f}var i4=new WeakMap;function ul(p,f){if(typeof p=="object"&&p!==null){var b=i4.get(p);return b!==void 0?b:(f={value:p,source:f,stack:Gn(f)},i4.set(p,f),f)}return{value:p,source:f,stack:Gn(f)}}var xm=[],Sm=0,Zv=null,Wg=0,dl=[],pl=0,ld=null,bc=1,yc="";function cu(p,f){xm[Sm++]=Wg,xm[Sm++]=Zv,Zv=p,Wg=f}function l4(p,f,b){dl[pl++]=bc,dl[pl++]=yc,dl[pl++]=ld,ld=p;var E=bc;p=yc;var A=32-ln(E)-1;E&=~(1<<A),b+=1;var k=32-ln(f)+A;if(30<k){var N=A-A%5;k=(E&(1<<N)-1).toString(32),E>>=N,A-=N,bc=1<<32-ln(f)+A|b<<A|E,yc=k+p}else bc=1<<k|b<<A|E,yc=p}function EA(p){p.return!==null&&(cu(p,1),l4(p,1,0))}function TA(p){for(;p===Zv;)Zv=xm[--Sm],xm[Sm]=null,Wg=xm[--Sm],xm[Sm]=null;for(;p===ld;)ld=dl[--pl],dl[pl]=null,yc=dl[--pl],dl[pl]=null,bc=dl[--pl],dl[pl]=null}function c4(p,f){dl[pl++]=bc,dl[pl++]=yc,dl[pl++]=ld,bc=f.id,yc=f.overflow,ld=p}var ya=null,Cr=null,Cn=!1,cd=null,fl=!1,wA=Error(r(519));function ud(p){var f=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yg(ul(f,p)),wA}function u4(p){var f=p.stateNode,b=p.type,E=p.memoizedProps;switch(f[Er]=p,f[Mo]=E,b){case"dialog":bn("cancel",f),bn("close",f);break;case"iframe":case"object":case"embed":bn("load",f);break;case"video":case"audio":for(b=0;b<bb.length;b++)bn(bb[b],f);break;case"source":bn("error",f);break;case"img":case"image":case"link":bn("error",f),bn("load",f);break;case"details":bn("toggle",f);break;case"input":bn("invalid",f),al(f,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":bn("invalid",f);break;case"textarea":bn("invalid",f),xi(f,E.value,E.defaultValue,E.children)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||f.textContent===""+b||E.suppressHydrationWarning===!0||_5(f.textContent,b)?(E.popover!=null&&(bn("beforetoggle",f),bn("toggle",f)),E.onScroll!=null&&bn("scroll",f),E.onScrollEnd!=null&&bn("scrollend",f),E.onClick!=null&&(f.onclick=pe),f=!0):f=!1,f||ud(p,!0)}function d4(p){for(ya=p.return;ya;)switch(ya.tag){case 5:case 31:case 13:fl=!1;return;case 27:case 3:fl=!0;return;default:ya=ya.return}}function Em(p){if(p!==ya)return!1;if(!Cn)return d4(p),Cn=!0,!1;var f=p.tag,b;if((b=f!==3&&f!==27)&&((b=f===5)&&(b=p.type,b=!(b!=="form"&&b!=="button")||q_(p.type,p.memoizedProps)),b=!b),b&&Cr&&ud(p),d4(p),f===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Cr=L5(p)}else if(f===31){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Cr=L5(p)}else f===27?(f=Cr,wd(p.type)?(p=K_,K_=null,Cr=p):Cr=f):Cr=ya?hl(p.stateNode.nextSibling):null;return!0}function Wp(){Cr=ya=null,Cn=!1}function CA(){var p=cd;return p!==null&&(Gs===null?Gs=p:Gs.push.apply(Gs,p),cd=null),p}function Yg(p){cd===null?cd=[p]:cd.push(p)}var AA=G(null),Yp=null,uu=null;function dd(p,f,b){K(AA,f._currentValue),f._currentValue=b}function du(p){p._currentValue=AA.current,re(AA)}function _A(p,f,b){for(;p!==null;){var E=p.alternate;if((p.childLanes&f)!==f?(p.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),p===b)break;p=p.return}}function kA(p,f,b,E){var A=p.child;for(A!==null&&(A.return=p);A!==null;){var k=A.dependencies;if(k!==null){var N=A.child;k=k.firstContext;e:for(;k!==null;){var W=k;k=A;for(var ae=0;ae<f.length;ae++)if(W.context===f[ae]){k.lanes|=b,W=k.alternate,W!==null&&(W.lanes|=b),_A(k.return,b,p),E||(N=null);break e}k=W.next}}else if(A.tag===18){if(N=A.return,N===null)throw Error(r(341));N.lanes|=b,k=N.alternate,k!==null&&(k.lanes|=b),_A(N,b,p),N=null}else N=A.child;if(N!==null)N.return=A;else for(N=A;N!==null;){if(N===p){N=null;break}if(A=N.sibling,A!==null){A.return=N.return,N=A;break}N=N.return}A=N}}function Tm(p,f,b,E){p=null;for(var A=f,k=!1;A!==null;){if(!k){if((A.flags&524288)!==0)k=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var N=A.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var W=A.type;Ei(A.pendingProps.value,N.value)||(p!==null?p.push(W):p=[W])}}else if(A===Ne.current){if(N=A.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(p!==null?p.push(Eb):p=[Eb])}A=A.return}p!==null&&kA(f,p,b,E),f.flags|=262144}function ex(p){for(p=p.firstContext;p!==null;){if(!Ei(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function Xp(p){Yp=p,uu=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function va(p){return p4(Yp,p)}function tx(p,f){return Yp===null&&Xp(p),p4(p,f)}function p4(p,f){var b=f._currentValue;if(f={context:f,memoizedValue:b,next:null},uu===null){if(p===null)throw Error(r(308));uu=f,p.dependencies={lanes:0,firstContext:f},p.flags|=524288}else uu=uu.next=f;return b}var iue=typeof AbortController<"u"?AbortController:function(){var p=[],f=this.signal={aborted:!1,addEventListener:function(b,E){p.push(E)}};this.abort=function(){f.aborted=!0,p.forEach(function(b){return b()})}},lue=t.unstable_scheduleCallback,cue=t.unstable_NormalPriority,Do={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function IA(){return{controller:new iue,data:new Map,refCount:0}}function Xg(p){p.refCount--,p.refCount===0&&lue(cue,function(){p.controller.abort()})}var Jg=null,PA=0,wm=0,Cm=null;function uue(p,f){if(Jg===null){var b=Jg=[];PA=0,wm=R_(),Cm={status:"pending",value:void 0,then:function(E){b.push(E)}}}return PA++,f.then(f4,f4),f}function f4(){if(--PA===0&&Jg!==null){Cm!==null&&(Cm.status="fulfilled");var p=Jg;Jg=null,wm=0,Cm=null;for(var f=0;f<p.length;f++)(0,p[f])()}}function due(p,f){var b=[],E={status:"pending",value:null,reason:null,then:function(A){b.push(A)}};return p.then(function(){E.status="fulfilled",E.value=f;for(var A=0;A<b.length;A++)(0,b[A])(f)},function(A){for(E.status="rejected",E.reason=A,A=0;A<b.length;A++)(0,b[A])(void 0)}),E}var m4=U.S;U.S=function(p,f){J6=Kn(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&uue(p,f),m4!==null&&m4(p,f)};var Jp=G(null);function OA(){var p=Jp.current;return p!==null?p:dr.pooledCache}function nx(p,f){f===null?K(Jp,Jp.current):K(Jp,f.pool)}function h4(){var p=OA();return p===null?null:{parent:Do._currentValue,pool:p}}var Am=Error(r(460)),MA=Error(r(474)),rx=Error(r(542)),ox={then:function(){}};function g4(p){return p=p.status,p==="fulfilled"||p==="rejected"}function b4(p,f,b){switch(b=p[b],b===void 0?p.push(f):b!==f&&(f.then(pe,pe),f=b),f.status){case"fulfilled":return f.value;case"rejected":throw p=f.reason,v4(p),p;default:if(typeof f.status=="string")f.then(pe,pe);else{if(p=dr,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=f,p.status="pending",p.then(function(E){if(f.status==="pending"){var A=f;A.status="fulfilled",A.value=E}},function(E){if(f.status==="pending"){var A=f;A.status="rejected",A.reason=E}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw p=f.reason,v4(p),p}throw Zp=f,Am}}function Qp(p){try{var f=p._init;return f(p._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Zp=b,Am):b}}var Zp=null;function y4(){if(Zp===null)throw Error(r(459));var p=Zp;return Zp=null,p}function v4(p){if(p===Am||p===rx)throw Error(r(483))}var _m=null,Qg=0;function ax(p){var f=Qg;return Qg+=1,_m===null&&(_m=[]),b4(_m,p,f)}function Zg(p,f){f=f.props.ref,p.ref=f!==void 0?f:null}function sx(p,f){throw f.$$typeof===m?Error(r(525)):(p=Object.prototype.toString.call(f),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":p)))}function x4(p){function f(de,se){if(p){var ge=de.deletions;ge===null?(de.deletions=[se],de.flags|=16):ge.push(se)}}function b(de,se){if(!p)return null;for(;se!==null;)f(de,se),se=se.sibling;return null}function E(de){for(var se=new Map;de!==null;)de.key!==null?se.set(de.key,de):se.set(de.index,de),de=de.sibling;return se}function A(de,se){return de=lu(de,se),de.index=0,de.sibling=null,de}function k(de,se,ge){return de.index=ge,p?(ge=de.alternate,ge!==null?(ge=ge.index,ge<se?(de.flags|=67108866,se):ge):(de.flags|=67108866,se)):(de.flags|=1048576,se)}function N(de){return p&&de.alternate===null&&(de.flags|=67108866),de}function W(de,se,ge,Pe){return se===null||se.tag!==6?(se=xA(ge,de.mode,Pe),se.return=de,se):(se=A(se,ge),se.return=de,se)}function ae(de,se,ge,Pe){var Ct=ge.type;return Ct===v?_e(de,se,ge.props.children,Pe,ge.key):se!==null&&(se.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===D&&Qp(Ct)===se.type)?(se=A(se,ge.props),Zg(se,ge),se.return=de,se):(se=Qv(ge.type,ge.key,ge.props,null,de.mode,Pe),Zg(se,ge),se.return=de,se)}function be(de,se,ge,Pe){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=SA(ge,de.mode,Pe),se.return=de,se):(se=A(se,ge.children||[]),se.return=de,se)}function _e(de,se,ge,Pe,Ct){return se===null||se.tag!==7?(se=Kp(ge,de.mode,Pe,Ct),se.return=de,se):(se=A(se,ge),se.return=de,se)}function Me(de,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=xA(""+se,de.mode,ge),se.return=de,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case h:return ge=Qv(se.type,se.key,se.props,null,de.mode,ge),Zg(ge,se),ge.return=de,ge;case y:return se=SA(se,de.mode,ge),se.return=de,se;case D:return se=Qp(se),Me(de,se,ge)}if(q(se)||z(se))return se=Kp(se,de.mode,ge,null),se.return=de,se;if(typeof se.then=="function")return Me(de,ax(se),ge);if(se.$$typeof===C)return Me(de,tx(de,se),ge);sx(de,se)}return null}function ye(de,se,ge,Pe){var Ct=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Ct!==null?null:W(de,se,""+ge,Pe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case h:return ge.key===Ct?ae(de,se,ge,Pe):null;case y:return ge.key===Ct?be(de,se,ge,Pe):null;case D:return ge=Qp(ge),ye(de,se,ge,Pe)}if(q(ge)||z(ge))return Ct!==null?null:_e(de,se,ge,Pe,null);if(typeof ge.then=="function")return ye(de,se,ax(ge),Pe);if(ge.$$typeof===C)return ye(de,se,tx(de,ge),Pe);sx(de,ge)}return null}function Ee(de,se,ge,Pe,Ct){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return de=de.get(ge)||null,W(se,de,""+Pe,Ct);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case h:return de=de.get(Pe.key===null?ge:Pe.key)||null,ae(se,de,Pe,Ct);case y:return de=de.get(Pe.key===null?ge:Pe.key)||null,be(se,de,Pe,Ct);case D:return Pe=Qp(Pe),Ee(de,se,ge,Pe,Ct)}if(q(Pe)||z(Pe))return de=de.get(ge)||null,_e(se,de,Pe,Ct,null);if(typeof Pe.then=="function")return Ee(de,se,ge,ax(Pe),Ct);if(Pe.$$typeof===C)return Ee(de,se,ge,tx(se,Pe),Ct);sx(se,Pe)}return null}function mt(de,se,ge,Pe){for(var Ct=null,Bn=null,xt=se,rn=se=0,Tn=null;xt!==null&&rn<ge.length;rn++){xt.index>rn?(Tn=xt,xt=null):Tn=xt.sibling;var Fn=ye(de,xt,ge[rn],Pe);if(Fn===null){xt===null&&(xt=Tn);break}p&&xt&&Fn.alternate===null&&f(de,xt),se=k(Fn,se,rn),Bn===null?Ct=Fn:Bn.sibling=Fn,Bn=Fn,xt=Tn}if(rn===ge.length)return b(de,xt),Cn&&cu(de,rn),Ct;if(xt===null){for(;rn<ge.length;rn++)xt=Me(de,ge[rn],Pe),xt!==null&&(se=k(xt,se,rn),Bn===null?Ct=xt:Bn.sibling=xt,Bn=xt);return Cn&&cu(de,rn),Ct}for(xt=E(xt);rn<ge.length;rn++)Tn=Ee(xt,de,rn,ge[rn],Pe),Tn!==null&&(p&&Tn.alternate!==null&&xt.delete(Tn.key===null?rn:Tn.key),se=k(Tn,se,rn),Bn===null?Ct=Tn:Bn.sibling=Tn,Bn=Tn);return p&&xt.forEach(function(Id){return f(de,Id)}),Cn&&cu(de,rn),Ct}function Rt(de,se,ge,Pe){if(ge==null)throw Error(r(151));for(var Ct=null,Bn=null,xt=se,rn=se=0,Tn=null,Fn=ge.next();xt!==null&&!Fn.done;rn++,Fn=ge.next()){xt.index>rn?(Tn=xt,xt=null):Tn=xt.sibling;var Id=ye(de,xt,Fn.value,Pe);if(Id===null){xt===null&&(xt=Tn);break}p&&xt&&Id.alternate===null&&f(de,xt),se=k(Id,se,rn),Bn===null?Ct=Id:Bn.sibling=Id,Bn=Id,xt=Tn}if(Fn.done)return b(de,xt),Cn&&cu(de,rn),Ct;if(xt===null){for(;!Fn.done;rn++,Fn=ge.next())Fn=Me(de,Fn.value,Pe),Fn!==null&&(se=k(Fn,se,rn),Bn===null?Ct=Fn:Bn.sibling=Fn,Bn=Fn);return Cn&&cu(de,rn),Ct}for(xt=E(xt);!Fn.done;rn++,Fn=ge.next())Fn=Ee(xt,de,rn,Fn.value,Pe),Fn!==null&&(p&&Fn.alternate!==null&&xt.delete(Fn.key===null?rn:Fn.key),se=k(Fn,se,rn),Bn===null?Ct=Fn:Bn.sibling=Fn,Bn=Fn);return p&&xt.forEach(function(Ede){return f(de,Ede)}),Cn&&cu(de,rn),Ct}function ar(de,se,ge,Pe){if(typeof ge=="object"&&ge!==null&&ge.type===v&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case h:e:{for(var Ct=ge.key;se!==null;){if(se.key===Ct){if(Ct=ge.type,Ct===v){if(se.tag===7){b(de,se.sibling),Pe=A(se,ge.props.children),Pe.return=de,de=Pe;break e}}else if(se.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===D&&Qp(Ct)===se.type){b(de,se.sibling),Pe=A(se,ge.props),Zg(Pe,ge),Pe.return=de,de=Pe;break e}b(de,se);break}else f(de,se);se=se.sibling}ge.type===v?(Pe=Kp(ge.props.children,de.mode,Pe,ge.key),Pe.return=de,de=Pe):(Pe=Qv(ge.type,ge.key,ge.props,null,de.mode,Pe),Zg(Pe,ge),Pe.return=de,de=Pe)}return N(de);case y:e:{for(Ct=ge.key;se!==null;){if(se.key===Ct)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){b(de,se.sibling),Pe=A(se,ge.children||[]),Pe.return=de,de=Pe;break e}else{b(de,se);break}else f(de,se);se=se.sibling}Pe=SA(ge,de.mode,Pe),Pe.return=de,de=Pe}return N(de);case D:return ge=Qp(ge),ar(de,se,ge,Pe)}if(q(ge))return mt(de,se,ge,Pe);if(z(ge)){if(Ct=z(ge),typeof Ct!="function")throw Error(r(150));return ge=Ct.call(ge),Rt(de,se,ge,Pe)}if(typeof ge.then=="function")return ar(de,se,ax(ge),Pe);if(ge.$$typeof===C)return ar(de,se,tx(de,ge),Pe);sx(de,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(b(de,se.sibling),Pe=A(se,ge),Pe.return=de,de=Pe):(b(de,se),Pe=xA(ge,de.mode,Pe),Pe.return=de,de=Pe),N(de)):b(de,se)}return function(de,se,ge,Pe){try{Qg=0;var Ct=ar(de,se,ge,Pe);return _m=null,Ct}catch(xt){if(xt===Am||xt===rx)throw xt;var Bn=Ti(29,xt,null,de.mode);return Bn.lanes=Pe,Bn.return=de,Bn}finally{}}}var ef=x4(!0),S4=x4(!1),pd=!1;function RA(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function DA(p,f){p=p.updateQueue,f.updateQueue===p&&(f.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function fd(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function md(p,f,b){var E=p.updateQueue;if(E===null)return null;if(E=E.shared,(Vn&2)!==0){var A=E.pending;return A===null?f.next=f:(f.next=A.next,A.next=f),E.pending=f,f=Jv(p),o4(p,null,b),f}return Xv(p,E,f,b),Jv(p)}function eb(p,f,b){if(f=f.updateQueue,f!==null&&(f=f.shared,(b&4194048)!==0)){var E=f.lanes;E&=p.pendingLanes,b|=E,f.lanes=b,vt(p,b)}}function NA(p,f){var b=p.updateQueue,E=p.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var A=null,k=null;if(b=b.firstBaseUpdate,b!==null){do{var N={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};k===null?A=k=N:k=k.next=N,b=b.next}while(b!==null);k===null?A=k=f:k=k.next=f}else A=k=f;b={baseState:E.baseState,firstBaseUpdate:A,lastBaseUpdate:k,shared:E.shared,callbacks:E.callbacks},p.updateQueue=b;return}p=b.lastBaseUpdate,p===null?b.firstBaseUpdate=f:p.next=f,b.lastBaseUpdate=f}var LA=!1;function tb(){if(LA){var p=Cm;if(p!==null)throw p}}function nb(p,f,b,E){LA=!1;var A=p.updateQueue;pd=!1;var k=A.firstBaseUpdate,N=A.lastBaseUpdate,W=A.shared.pending;if(W!==null){A.shared.pending=null;var ae=W,be=ae.next;ae.next=null,N===null?k=be:N.next=be,N=ae;var _e=p.alternate;_e!==null&&(_e=_e.updateQueue,W=_e.lastBaseUpdate,W!==N&&(W===null?_e.firstBaseUpdate=be:W.next=be,_e.lastBaseUpdate=ae))}if(k!==null){var Me=A.baseState;N=0,_e=be=ae=null,W=k;do{var ye=W.lane&-536870913,Ee=ye!==W.lane;if(Ee?(En&ye)===ye:(E&ye)===ye){ye!==0&&ye===wm&&(LA=!0),_e!==null&&(_e=_e.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var mt=p,Rt=W;ye=f;var ar=b;switch(Rt.tag){case 1:if(mt=Rt.payload,typeof mt=="function"){Me=mt.call(ar,Me,ye);break e}Me=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Rt.payload,ye=typeof mt=="function"?mt.call(ar,Me,ye):mt,ye==null)break e;Me=u({},Me,ye);break e;case 2:pd=!0}}ye=W.callback,ye!==null&&(p.flags|=64,Ee&&(p.flags|=8192),Ee=A.callbacks,Ee===null?A.callbacks=[ye]:Ee.push(ye))}else Ee={lane:ye,tag:W.tag,payload:W.payload,callback:W.callback,next:null},_e===null?(be=_e=Ee,ae=Me):_e=_e.next=Ee,N|=ye;if(W=W.next,W===null){if(W=A.shared.pending,W===null)break;Ee=W,W=Ee.next,Ee.next=null,A.lastBaseUpdate=Ee,A.shared.pending=null}}while(!0);_e===null&&(ae=Me),A.baseState=ae,A.firstBaseUpdate=be,A.lastBaseUpdate=_e,k===null&&(A.shared.lanes=0),vd|=N,p.lanes=N,p.memoizedState=Me}}function E4(p,f){if(typeof p!="function")throw Error(r(191,p));p.call(f)}function T4(p,f){var b=p.callbacks;if(b!==null)for(p.callbacks=null,p=0;p<b.length;p++)E4(b[p],f)}var km=G(null),ix=G(0);function w4(p,f){p=xu,K(ix,p),K(km,f),xu=p|f.baseLanes}function jA(){K(ix,xu),K(km,km.current)}function BA(){xu=ix.current,re(km),re(ix)}var wi=G(null),ml=null;function hd(p){var f=p.alternate;K(mo,mo.current&1),K(wi,p),ml===null&&(f===null||km.current!==null||f.memoizedState!==null)&&(ml=p)}function FA(p){K(mo,mo.current),K(wi,p),ml===null&&(ml=p)}function C4(p){p.tag===22?(K(mo,mo.current),K(wi,p),ml===null&&(ml=p)):gd()}function gd(){K(mo,mo.current),K(wi,wi.current)}function Ci(p){re(wi),ml===p&&(ml=null),re(mo)}var mo=G(0);function lx(p){for(var f=p;f!==null;){if(f.tag===13){var b=f.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||V_(b)||G_(b)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break;for(;f.sibling===null;){if(f.return===null||f.return===p)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var pu=0,Qt=null,rr=null,No=null,cx=!1,Im=!1,tf=!1,ux=0,rb=0,Pm=null,pue=0;function Zr(){throw Error(r(321))}function zA(p,f){if(f===null)return!1;for(var b=0;b<f.length&&b<p.length;b++)if(!Ei(p[b],f[b]))return!1;return!0}function UA(p,f,b,E,A,k){return pu=k,Qt=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,U.H=p===null||p.memoizedState===null?l6:n_,tf=!1,k=b(E,A),tf=!1,Im&&(k=_4(f,b,E,A)),A4(p),k}function A4(p){U.H=sb;var f=rr!==null&&rr.next!==null;if(pu=0,No=rr=Qt=null,cx=!1,rb=0,Pm=null,f)throw Error(r(300));p===null||Lo||(p=p.dependencies,p!==null&&ex(p)&&(Lo=!0))}function _4(p,f,b,E){Qt=p;var A=0;do{if(Im&&(Pm=null),rb=0,Im=!1,25<=A)throw Error(r(301));if(A+=1,No=rr=null,p.updateQueue!=null){var k=p.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}U.H=c6,k=f(b,E)}while(Im);return k}function fue(){var p=U.H,f=p.useState()[0];return f=typeof f.then=="function"?ob(f):f,p=p.useState()[0],(rr!==null?rr.memoizedState:null)!==p&&(Qt.flags|=1024),f}function qA(){var p=ux!==0;return ux=0,p}function HA(p,f,b){f.updateQueue=p.updateQueue,f.flags&=-2053,p.lanes&=~b}function $A(p){if(cx){for(p=p.memoizedState;p!==null;){var f=p.queue;f!==null&&(f.pending=null),p=p.next}cx=!1}pu=0,No=rr=Qt=null,Im=!1,rb=ux=0,Pm=null}function hs(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return No===null?Qt.memoizedState=No=p:No=No.next=p,No}function ho(){if(rr===null){var p=Qt.alternate;p=p!==null?p.memoizedState:null}else p=rr.next;var f=No===null?Qt.memoizedState:No.next;if(f!==null)No=f,rr=p;else{if(p===null)throw Qt.alternate===null?Error(r(467)):Error(r(310));rr=p,p={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},No===null?Qt.memoizedState=No=p:No=No.next=p}return No}function dx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ob(p){var f=rb;return rb+=1,Pm===null&&(Pm=[]),p=b4(Pm,p,f),f=Qt,(No===null?f.memoizedState:No.next)===null&&(f=f.alternate,U.H=f===null||f.memoizedState===null?l6:n_),p}function px(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return ob(p);if(p.$$typeof===C)return va(p)}throw Error(r(438,String(p)))}function VA(p){var f=null,b=Qt.updateQueue;if(b!==null&&(f=b.memoCache),f==null){var E=Qt.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(f={data:E.data.map(function(A){return A.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),b===null&&(b=dx(),Qt.updateQueue=b),b.memoCache=f,b=f.data[f.index],b===void 0)for(b=f.data[f.index]=Array(p),E=0;E<p;E++)b[E]=B;return f.index++,b}function fu(p,f){return typeof f=="function"?f(p):f}function fx(p){var f=ho();return GA(f,rr,p)}function GA(p,f,b){var E=p.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=b;var A=p.baseQueue,k=E.pending;if(k!==null){if(A!==null){var N=A.next;A.next=k.next,k.next=N}f.baseQueue=A=k,E.pending=null}if(k=p.baseState,A===null)p.memoizedState=k;else{f=A.next;var W=N=null,ae=null,be=f,_e=!1;do{var Me=be.lane&-536870913;if(Me!==be.lane?(En&Me)===Me:(pu&Me)===Me){var ye=be.revertLane;if(ye===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),Me===wm&&(_e=!0);else if((pu&ye)===ye){be=be.next,ye===wm&&(_e=!0);continue}else Me={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ae===null?(W=ae=Me,N=k):ae=ae.next=Me,Qt.lanes|=ye,vd|=ye;Me=be.action,tf&&b(k,Me),k=be.hasEagerState?be.eagerState:b(k,Me)}else ye={lane:Me,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ae===null?(W=ae=ye,N=k):ae=ae.next=ye,Qt.lanes|=Me,vd|=Me;be=be.next}while(be!==null&&be!==f);if(ae===null?N=k:ae.next=W,!Ei(k,p.memoizedState)&&(Lo=!0,_e&&(b=Cm,b!==null)))throw b;p.memoizedState=k,p.baseState=N,p.baseQueue=ae,E.lastRenderedState=k}return A===null&&(E.lanes=0),[p.memoizedState,E.dispatch]}function KA(p){var f=ho(),b=f.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=p;var E=b.dispatch,A=b.pending,k=f.memoizedState;if(A!==null){b.pending=null;var N=A=A.next;do k=p(k,N.action),N=N.next;while(N!==A);Ei(k,f.memoizedState)||(Lo=!0),f.memoizedState=k,f.baseQueue===null&&(f.baseState=k),b.lastRenderedState=k}return[k,E]}function k4(p,f,b){var E=Qt,A=ho(),k=Cn;if(k){if(b===void 0)throw Error(r(407));b=b()}else b=f();var N=!Ei((rr||A).memoizedState,b);if(N&&(A.memoizedState=b,Lo=!0),A=A.queue,XA(O4.bind(null,E,A,p),[p]),A.getSnapshot!==f||N||No!==null&&No.memoizedState.tag&1){if(E.flags|=2048,Om(9,{destroy:void 0},P4.bind(null,E,A,b,f),null),dr===null)throw Error(r(349));k||(pu&127)!==0||I4(E,f,b)}return b}function I4(p,f,b){p.flags|=16384,p={getSnapshot:f,value:b},f=Qt.updateQueue,f===null?(f=dx(),Qt.updateQueue=f,f.stores=[p]):(b=f.stores,b===null?f.stores=[p]:b.push(p))}function P4(p,f,b,E){f.value=b,f.getSnapshot=E,M4(f)&&R4(p)}function O4(p,f,b){return b(function(){M4(f)&&R4(p)})}function M4(p){var f=p.getSnapshot;p=p.value;try{var b=f();return!Ei(p,b)}catch{return!0}}function R4(p){var f=Gp(p,2);f!==null&&Ks(f,p,2)}function WA(p){var f=hs();if(typeof p=="function"){var b=p;if(p=b(),tf){Pn(!0);try{b()}finally{Pn(!1)}}}return f.memoizedState=f.baseState=p,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:p},f}function D4(p,f,b,E){return p.baseState=b,GA(p,rr,typeof E=="function"?E:fu)}function mue(p,f,b,E,A){if(gx(p))throw Error(r(485));if(p=f.action,p!==null){var k={payload:A,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){k.listeners.push(N)}};U.T!==null?b(!0):k.isTransition=!1,E(k),b=f.pending,b===null?(k.next=f.pending=k,N4(f,k)):(k.next=b.next,f.pending=b.next=k)}}function N4(p,f){var b=f.action,E=f.payload,A=p.state;if(f.isTransition){var k=U.T,N={};U.T=N;try{var W=b(A,E),ae=U.S;ae!==null&&ae(N,W),L4(p,f,W)}catch(be){YA(p,f,be)}finally{k!==null&&N.types!==null&&(k.types=N.types),U.T=k}}else try{k=b(A,E),L4(p,f,k)}catch(be){YA(p,f,be)}}function L4(p,f,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){j4(p,f,E)},function(E){return YA(p,f,E)}):j4(p,f,b)}function j4(p,f,b){f.status="fulfilled",f.value=b,B4(f),p.state=b,f=p.pending,f!==null&&(b=f.next,b===f?p.pending=null:(b=b.next,f.next=b,N4(p,b)))}function YA(p,f,b){var E=p.pending;if(p.pending=null,E!==null){E=E.next;do f.status="rejected",f.reason=b,B4(f),f=f.next;while(f!==E)}p.action=null}function B4(p){p=p.listeners;for(var f=0;f<p.length;f++)(0,p[f])()}function F4(p,f){return f}function z4(p,f){if(Cn){var b=dr.formState;if(b!==null){e:{var E=Qt;if(Cn){if(Cr){t:{for(var A=Cr,k=fl;A.nodeType!==8;){if(!k){A=null;break t}if(A=hl(A.nextSibling),A===null){A=null;break t}}k=A.data,A=k==="F!"||k==="F"?A:null}if(A){Cr=hl(A.nextSibling),E=A.data==="F!";break e}}ud(E)}E=!1}E&&(f=b[0])}}return b=hs(),b.memoizedState=b.baseState=f,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F4,lastRenderedState:f},b.queue=E,b=a6.bind(null,Qt,E),E.dispatch=b,E=WA(!1),k=t_.bind(null,Qt,!1,E.queue),E=hs(),A={state:f,dispatch:null,action:p,pending:null},E.queue=A,b=mue.bind(null,Qt,A,k,b),A.dispatch=b,E.memoizedState=p,[f,b,!1]}function U4(p){var f=ho();return q4(f,rr,p)}function q4(p,f,b){if(f=GA(p,f,F4)[0],p=fx(fu)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var E=ob(f)}catch(N){throw N===Am?rx:N}else E=f;f=ho();var A=f.queue,k=A.dispatch;return b!==f.memoizedState&&(Qt.flags|=2048,Om(9,{destroy:void 0},hue.bind(null,A,b),null)),[E,k,p]}function hue(p,f){p.action=f}function H4(p){var f=ho(),b=rr;if(b!==null)return q4(f,b,p);ho(),f=f.memoizedState,b=ho();var E=b.queue.dispatch;return b.memoizedState=p,[f,E,!1]}function Om(p,f,b,E){return p={tag:p,create:b,deps:E,inst:f,next:null},f=Qt.updateQueue,f===null&&(f=dx(),Qt.updateQueue=f),b=f.lastEffect,b===null?f.lastEffect=p.next=p:(E=b.next,b.next=p,p.next=E,f.lastEffect=p),p}function $4(){return ho().memoizedState}function mx(p,f,b,E){var A=hs();Qt.flags|=p,A.memoizedState=Om(1|f,{destroy:void 0},b,E===void 0?null:E)}function hx(p,f,b,E){var A=ho();E=E===void 0?null:E;var k=A.memoizedState.inst;rr!==null&&E!==null&&zA(E,rr.memoizedState.deps)?A.memoizedState=Om(f,k,b,E):(Qt.flags|=p,A.memoizedState=Om(1|f,k,b,E))}function V4(p,f){mx(8390656,8,p,f)}function XA(p,f){hx(2048,8,p,f)}function gue(p){Qt.flags|=4;var f=Qt.updateQueue;if(f===null)f=dx(),Qt.updateQueue=f,f.events=[p];else{var b=f.events;b===null?f.events=[p]:b.push(p)}}function G4(p){var f=ho().memoizedState;return gue({ref:f,nextImpl:p}),function(){if((Vn&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}function K4(p,f){return hx(4,2,p,f)}function W4(p,f){return hx(4,4,p,f)}function Y4(p,f){if(typeof f=="function"){p=p();var b=f(p);return function(){typeof b=="function"?b():f(null)}}if(f!=null)return p=p(),f.current=p,function(){f.current=null}}function X4(p,f,b){b=b!=null?b.concat([p]):null,hx(4,4,Y4.bind(null,f,p),b)}function JA(){}function J4(p,f){var b=ho();f=f===void 0?null:f;var E=b.memoizedState;return f!==null&&zA(f,E[1])?E[0]:(b.memoizedState=[p,f],p)}function Q4(p,f){var b=ho();f=f===void 0?null:f;var E=b.memoizedState;if(f!==null&&zA(f,E[1]))return E[0];if(E=p(),tf){Pn(!0);try{p()}finally{Pn(!1)}}return b.memoizedState=[E,f],E}function QA(p,f,b){return b===void 0||(pu&1073741824)!==0&&(En&261930)===0?p.memoizedState=f:(p.memoizedState=b,p=Z6(),Qt.lanes|=p,vd|=p,b)}function Z4(p,f,b,E){return Ei(b,f)?b:km.current!==null?(p=QA(p,b,E),Ei(p,f)||(Lo=!0),p):(pu&42)===0||(pu&1073741824)!==0&&(En&261930)===0?(Lo=!0,p.memoizedState=b):(p=Z6(),Qt.lanes|=p,vd|=p,f)}function e6(p,f,b,E,A){var k=Y.p;Y.p=k!==0&&8>k?k:8;var N=U.T,W={};U.T=W,t_(p,!1,f,b);try{var ae=A(),be=U.S;if(be!==null&&be(W,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var _e=due(ae,E);ab(p,f,_e,ki(p))}else ab(p,f,E,ki(p))}catch(Me){ab(p,f,{then:function(){},status:"rejected",reason:Me},ki())}finally{Y.p=k,N!==null&&W.types!==null&&(N.types=W.types),U.T=N}}function bue(){}function ZA(p,f,b,E){if(p.tag!==5)throw Error(r(476));var A=t6(p).queue;e6(p,A,f,X,b===null?bue:function(){return n6(p),b(E)})}function t6(p){var f=p.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:X},next:null};var b={};return f.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:b},next:null},p.memoizedState=f,p=p.alternate,p!==null&&(p.memoizedState=f),f}function n6(p){var f=t6(p);f.next===null&&(f=p.alternate.memoizedState),ab(p,f.next.queue,{},ki())}function e_(){return va(Eb)}function r6(){return ho().memoizedState}function o6(){return ho().memoizedState}function yue(p){for(var f=p.return;f!==null;){switch(f.tag){case 24:case 3:var b=ki();p=fd(b);var E=md(f,p,b);E!==null&&(Ks(E,f,b),eb(E,f,b)),f={cache:IA()},p.payload=f;return}f=f.return}}function vue(p,f,b){var E=ki();b={lane:E,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},gx(p)?s6(f,b):(b=yA(p,f,b,E),b!==null&&(Ks(b,p,E),i6(b,f,E)))}function a6(p,f,b){var E=ki();ab(p,f,b,E)}function ab(p,f,b,E){var A={lane:E,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(gx(p))s6(f,A);else{var k=p.alternate;if(p.lanes===0&&(k===null||k.lanes===0)&&(k=f.lastRenderedReducer,k!==null))try{var N=f.lastRenderedState,W=k(N,b);if(A.hasEagerState=!0,A.eagerState=W,Ei(W,N))return Xv(p,f,A,0),dr===null&&Yv(),!1}catch{}finally{}if(b=yA(p,f,A,E),b!==null)return Ks(b,p,E),i6(b,f,E),!0}return!1}function t_(p,f,b,E){if(E={lane:2,revertLane:R_(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},gx(p)){if(f)throw Error(r(479))}else f=yA(p,b,E,2),f!==null&&Ks(f,p,2)}function gx(p){var f=p.alternate;return p===Qt||f!==null&&f===Qt}function s6(p,f){Im=cx=!0;var b=p.pending;b===null?f.next=f:(f.next=b.next,b.next=f),p.pending=f}function i6(p,f,b){if((b&4194048)!==0){var E=f.lanes;E&=p.pendingLanes,b|=E,f.lanes=b,vt(p,b)}}var sb={readContext:va,use:px,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useInsertionEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useSyncExternalStore:Zr,useId:Zr,useHostTransitionStatus:Zr,useFormState:Zr,useActionState:Zr,useOptimistic:Zr,useMemoCache:Zr,useCacheRefresh:Zr};sb.useEffectEvent=Zr;var l6={readContext:va,use:px,useCallback:function(p,f){return hs().memoizedState=[p,f===void 0?null:f],p},useContext:va,useEffect:V4,useImperativeHandle:function(p,f,b){b=b!=null?b.concat([p]):null,mx(4194308,4,Y4.bind(null,f,p),b)},useLayoutEffect:function(p,f){return mx(4194308,4,p,f)},useInsertionEffect:function(p,f){mx(4,2,p,f)},useMemo:function(p,f){var b=hs();f=f===void 0?null:f;var E=p();if(tf){Pn(!0);try{p()}finally{Pn(!1)}}return b.memoizedState=[E,f],E},useReducer:function(p,f,b){var E=hs();if(b!==void 0){var A=b(f);if(tf){Pn(!0);try{b(f)}finally{Pn(!1)}}}else A=f;return E.memoizedState=E.baseState=A,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:A},E.queue=p,p=p.dispatch=vue.bind(null,Qt,p),[E.memoizedState,p]},useRef:function(p){var f=hs();return p={current:p},f.memoizedState=p},useState:function(p){p=WA(p);var f=p.queue,b=a6.bind(null,Qt,f);return f.dispatch=b,[p.memoizedState,b]},useDebugValue:JA,useDeferredValue:function(p,f){var b=hs();return QA(b,p,f)},useTransition:function(){var p=WA(!1);return p=e6.bind(null,Qt,p.queue,!0,!1),hs().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,f,b){var E=Qt,A=hs();if(Cn){if(b===void 0)throw Error(r(407));b=b()}else{if(b=f(),dr===null)throw Error(r(349));(En&127)!==0||I4(E,f,b)}A.memoizedState=b;var k={value:b,getSnapshot:f};return A.queue=k,V4(O4.bind(null,E,k,p),[p]),E.flags|=2048,Om(9,{destroy:void 0},P4.bind(null,E,k,b,f),null),b},useId:function(){var p=hs(),f=dr.identifierPrefix;if(Cn){var b=yc,E=bc;b=(E&~(1<<32-ln(E)-1)).toString(32)+b,f="_"+f+"R_"+b,b=ux++,0<b&&(f+="H"+b.toString(32)),f+="_"}else b=pue++,f="_"+f+"r_"+b.toString(32)+"_";return p.memoizedState=f},useHostTransitionStatus:e_,useFormState:z4,useActionState:z4,useOptimistic:function(p){var f=hs();f.memoizedState=f.baseState=p;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=b,f=t_.bind(null,Qt,!0,b),b.dispatch=f,[p,f]},useMemoCache:VA,useCacheRefresh:function(){return hs().memoizedState=yue.bind(null,Qt)},useEffectEvent:function(p){var f=hs(),b={impl:p};return f.memoizedState=b,function(){if((Vn&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},n_={readContext:va,use:px,useCallback:J4,useContext:va,useEffect:XA,useImperativeHandle:X4,useInsertionEffect:K4,useLayoutEffect:W4,useMemo:Q4,useReducer:fx,useRef:$4,useState:function(){return fx(fu)},useDebugValue:JA,useDeferredValue:function(p,f){var b=ho();return Z4(b,rr.memoizedState,p,f)},useTransition:function(){var p=fx(fu)[0],f=ho().memoizedState;return[typeof p=="boolean"?p:ob(p),f]},useSyncExternalStore:k4,useId:r6,useHostTransitionStatus:e_,useFormState:U4,useActionState:U4,useOptimistic:function(p,f){var b=ho();return D4(b,rr,p,f)},useMemoCache:VA,useCacheRefresh:o6};n_.useEffectEvent=G4;var c6={readContext:va,use:px,useCallback:J4,useContext:va,useEffect:XA,useImperativeHandle:X4,useInsertionEffect:K4,useLayoutEffect:W4,useMemo:Q4,useReducer:KA,useRef:$4,useState:function(){return KA(fu)},useDebugValue:JA,useDeferredValue:function(p,f){var b=ho();return rr===null?QA(b,p,f):Z4(b,rr.memoizedState,p,f)},useTransition:function(){var p=KA(fu)[0],f=ho().memoizedState;return[typeof p=="boolean"?p:ob(p),f]},useSyncExternalStore:k4,useId:r6,useHostTransitionStatus:e_,useFormState:H4,useActionState:H4,useOptimistic:function(p,f){var b=ho();return rr!==null?D4(b,rr,p,f):(b.baseState=p,[p,b.queue.dispatch])},useMemoCache:VA,useCacheRefresh:o6};c6.useEffectEvent=G4;function r_(p,f,b,E){f=p.memoizedState,b=b(E,f),b=b==null?f:u({},f,b),p.memoizedState=b,p.lanes===0&&(p.updateQueue.baseState=b)}var o_={enqueueSetState:function(p,f,b){p=p._reactInternals;var E=ki(),A=fd(E);A.payload=f,b!=null&&(A.callback=b),f=md(p,A,E),f!==null&&(Ks(f,p,E),eb(f,p,E))},enqueueReplaceState:function(p,f,b){p=p._reactInternals;var E=ki(),A=fd(E);A.tag=1,A.payload=f,b!=null&&(A.callback=b),f=md(p,A,E),f!==null&&(Ks(f,p,E),eb(f,p,E))},enqueueForceUpdate:function(p,f){p=p._reactInternals;var b=ki(),E=fd(b);E.tag=2,f!=null&&(E.callback=f),f=md(p,E,b),f!==null&&(Ks(f,p,b),eb(f,p,b))}};function u6(p,f,b,E,A,k,N){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(E,k,N):f.prototype&&f.prototype.isPureReactComponent?!Gg(b,E)||!Gg(A,k):!0}function d6(p,f,b,E){p=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(b,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(b,E),f.state!==p&&o_.enqueueReplaceState(f,f.state,null)}function nf(p,f){var b=f;if("ref"in f){b={};for(var E in f)E!=="ref"&&(b[E]=f[E])}if(p=p.defaultProps){b===f&&(b=u({},b));for(var A in p)b[A]===void 0&&(b[A]=p[A])}return b}function p6(p){Wv(p)}function f6(p){console.error(p)}function m6(p){Wv(p)}function bx(p,f){try{var b=p.onUncaughtError;b(f.value,{componentStack:f.stack})}catch(E){setTimeout(function(){throw E})}}function h6(p,f,b){try{var E=p.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function a_(p,f,b){return b=fd(b),b.tag=3,b.payload={element:null},b.callback=function(){bx(p,f)},b}function g6(p){return p=fd(p),p.tag=3,p}function b6(p,f,b,E){var A=b.type.getDerivedStateFromError;if(typeof A=="function"){var k=E.value;p.payload=function(){return A(k)},p.callback=function(){h6(f,b,E)}}var N=b.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(p.callback=function(){h6(f,b,E),typeof A!="function"&&(xd===null?xd=new Set([this]):xd.add(this));var W=E.stack;this.componentDidCatch(E.value,{componentStack:W!==null?W:""})})}function xue(p,f,b,E,A){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(f=b.alternate,f!==null&&Tm(f,b,A,!0),b=wi.current,b!==null){switch(b.tag){case 31:case 13:return ml===null?Ix():b.alternate===null&&eo===0&&(eo=3),b.flags&=-257,b.flags|=65536,b.lanes=A,E===ox?b.flags|=16384:(f=b.updateQueue,f===null?b.updateQueue=new Set([E]):f.add(E),P_(p,E,A)),!1;case 22:return b.flags|=65536,E===ox?b.flags|=16384:(f=b.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=f):(b=f.retryQueue,b===null?f.retryQueue=new Set([E]):b.add(E)),P_(p,E,A)),!1}throw Error(r(435,b.tag))}return P_(p,E,A),Ix(),!1}if(Cn)return f=wi.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=A,E!==wA&&(p=Error(r(422),{cause:E}),Yg(ul(p,b)))):(E!==wA&&(f=Error(r(423),{cause:E}),Yg(ul(f,b))),p=p.current.alternate,p.flags|=65536,A&=-A,p.lanes|=A,E=ul(E,b),A=a_(p.stateNode,E,A),NA(p,A),eo!==4&&(eo=2)),!1;var k=Error(r(520),{cause:E});if(k=ul(k,b),mb===null?mb=[k]:mb.push(k),eo!==4&&(eo=2),f===null)return!0;E=ul(E,b),b=f;do{switch(b.tag){case 3:return b.flags|=65536,p=A&-A,b.lanes|=p,p=a_(b.stateNode,E,p),NA(b,p),!1;case 1:if(f=b.type,k=b.stateNode,(b.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(xd===null||!xd.has(k))))return b.flags|=65536,A&=-A,b.lanes|=A,A=g6(A),b6(A,p,b,E),NA(b,A),!1}b=b.return}while(b!==null);return!1}var s_=Error(r(461)),Lo=!1;function xa(p,f,b,E){f.child=p===null?S4(f,null,b,E):ef(f,p.child,b,E)}function y6(p,f,b,E,A){b=b.render;var k=f.ref;if("ref"in E){var N={};for(var W in E)W!=="ref"&&(N[W]=E[W])}else N=E;return Xp(f),E=UA(p,f,b,N,k,A),W=qA(),p!==null&&!Lo?(HA(p,f,A),mu(p,f,A)):(Cn&&W&&EA(f),f.flags|=1,xa(p,f,E,A),f.child)}function v6(p,f,b,E,A){if(p===null){var k=b.type;return typeof k=="function"&&!vA(k)&&k.defaultProps===void 0&&b.compare===null?(f.tag=15,f.type=k,x6(p,f,k,E,A)):(p=Qv(b.type,null,E,f,f.mode,A),p.ref=f.ref,p.return=f,f.child=p)}if(k=p.child,!m_(p,A)){var N=k.memoizedProps;if(b=b.compare,b=b!==null?b:Gg,b(N,E)&&p.ref===f.ref)return mu(p,f,A)}return f.flags|=1,p=lu(k,E),p.ref=f.ref,p.return=f,f.child=p}function x6(p,f,b,E,A){if(p!==null){var k=p.memoizedProps;if(Gg(k,E)&&p.ref===f.ref)if(Lo=!1,f.pendingProps=E=k,m_(p,A))(p.flags&131072)!==0&&(Lo=!0);else return f.lanes=p.lanes,mu(p,f,A)}return i_(p,f,b,E,A)}function S6(p,f,b,E){var A=E.children,k=p!==null?p.memoizedState:null;if(p===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((f.flags&128)!==0){if(k=k!==null?k.baseLanes|b:b,p!==null){for(E=f.child=p.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;E=A&~k}else E=0,f.child=null;return E6(p,f,k,b,E)}if((b&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},p!==null&&nx(f,k!==null?k.cachePool:null),k!==null?w4(f,k):jA(),C4(f);else return E=f.lanes=536870912,E6(p,f,k!==null?k.baseLanes|b:b,b,E)}else k!==null?(nx(f,k.cachePool),w4(f,k),gd(),f.memoizedState=null):(p!==null&&nx(f,null),jA(),gd());return xa(p,f,A,b),f.child}function ib(p,f){return p!==null&&p.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function E6(p,f,b,E,A){var k=OA();return k=k===null?null:{parent:Do._currentValue,pool:k},f.memoizedState={baseLanes:b,cachePool:k},p!==null&&nx(f,null),jA(),C4(f),p!==null&&Tm(p,f,E,!0),f.childLanes=A,null}function yx(p,f){return f=xx({mode:f.mode,children:f.children},p.mode),f.ref=p.ref,p.child=f,f.return=p,f}function T6(p,f,b){return ef(f,p.child,null,b),p=yx(f,f.pendingProps),p.flags|=2,Ci(f),f.memoizedState=null,p}function Sue(p,f,b){var E=f.pendingProps,A=(f.flags&128)!==0;if(f.flags&=-129,p===null){if(Cn){if(E.mode==="hidden")return p=yx(f,E),f.lanes=536870912,ib(null,p);if(FA(f),(p=Cr)?(p=N5(p,fl),p=p!==null&&p.data==="&"?p:null,p!==null&&(f.memoizedState={dehydrated:p,treeContext:ld!==null?{id:bc,overflow:yc}:null,retryLane:536870912,hydrationErrors:null},b=s4(p),b.return=f,f.child=b,ya=f,Cr=null)):p=null,p===null)throw ud(f);return f.lanes=536870912,null}return yx(f,E)}var k=p.memoizedState;if(k!==null){var N=k.dehydrated;if(FA(f),A)if(f.flags&256)f.flags&=-257,f=T6(p,f,b);else if(f.memoizedState!==null)f.child=p.child,f.flags|=128,f=null;else throw Error(r(558));else if(Lo||Tm(p,f,b,!1),A=(b&p.childLanes)!==0,Lo||A){if(E=dr,E!==null&&(N=Sr(E,b),N!==0&&N!==k.retryLane))throw k.retryLane=N,Gp(p,N),Ks(E,p,N),s_;Ix(),f=T6(p,f,b)}else p=k.treeContext,Cr=hl(N.nextSibling),ya=f,Cn=!0,cd=null,fl=!1,p!==null&&c4(f,p),f=yx(f,E),f.flags|=4096;return f}return p=lu(p.child,{mode:E.mode,children:E.children}),p.ref=f.ref,f.child=p,p.return=f,p}function vx(p,f){var b=f.ref;if(b===null)p!==null&&p.ref!==null&&(f.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(p===null||p.ref!==b)&&(f.flags|=4194816)}}function i_(p,f,b,E,A){return Xp(f),b=UA(p,f,b,E,void 0,A),E=qA(),p!==null&&!Lo?(HA(p,f,A),mu(p,f,A)):(Cn&&E&&EA(f),f.flags|=1,xa(p,f,b,A),f.child)}function w6(p,f,b,E,A,k){return Xp(f),f.updateQueue=null,b=_4(f,E,b,A),A4(p),E=qA(),p!==null&&!Lo?(HA(p,f,k),mu(p,f,k)):(Cn&&E&&EA(f),f.flags|=1,xa(p,f,b,k),f.child)}function C6(p,f,b,E,A){if(Xp(f),f.stateNode===null){var k=vm,N=b.contextType;typeof N=="object"&&N!==null&&(k=va(N)),k=new b(E,k),f.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=o_,f.stateNode=k,k._reactInternals=f,k=f.stateNode,k.props=E,k.state=f.memoizedState,k.refs={},RA(f),N=b.contextType,k.context=typeof N=="object"&&N!==null?va(N):vm,k.state=f.memoizedState,N=b.getDerivedStateFromProps,typeof N=="function"&&(r_(f,b,N,E),k.state=f.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(N=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),N!==k.state&&o_.enqueueReplaceState(k,k.state,null),nb(f,E,k,A),tb(),k.state=f.memoizedState),typeof k.componentDidMount=="function"&&(f.flags|=4194308),E=!0}else if(p===null){k=f.stateNode;var W=f.memoizedProps,ae=nf(b,W);k.props=ae;var be=k.context,_e=b.contextType;N=vm,typeof _e=="object"&&_e!==null&&(N=va(_e));var Me=b.getDerivedStateFromProps;_e=typeof Me=="function"||typeof k.getSnapshotBeforeUpdate=="function",W=f.pendingProps!==W,_e||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(W||be!==N)&&d6(f,k,E,N),pd=!1;var ye=f.memoizedState;k.state=ye,nb(f,E,k,A),tb(),be=f.memoizedState,W||ye!==be||pd?(typeof Me=="function"&&(r_(f,b,Me,E),be=f.memoizedState),(ae=pd||u6(f,b,ae,E,ye,be,N))?(_e||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(f.flags|=4194308)):(typeof k.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=be),k.props=E,k.state=be,k.context=N,E=ae):(typeof k.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{k=f.stateNode,DA(p,f),N=f.memoizedProps,_e=nf(b,N),k.props=_e,Me=f.pendingProps,ye=k.context,be=b.contextType,ae=vm,typeof be=="object"&&be!==null&&(ae=va(be)),W=b.getDerivedStateFromProps,(be=typeof W=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(N!==Me||ye!==ae)&&d6(f,k,E,ae),pd=!1,ye=f.memoizedState,k.state=ye,nb(f,E,k,A),tb();var Ee=f.memoizedState;N!==Me||ye!==Ee||pd||p!==null&&p.dependencies!==null&&ex(p.dependencies)?(typeof W=="function"&&(r_(f,b,W,E),Ee=f.memoizedState),(_e=pd||u6(f,b,_e,E,ye,Ee,ae)||p!==null&&p.dependencies!==null&&ex(p.dependencies))?(be||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(E,Ee,ae),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(E,Ee,ae)),typeof k.componentDidUpdate=="function"&&(f.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof k.componentDidUpdate!="function"||N===p.memoizedProps&&ye===p.memoizedState||(f.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||N===p.memoizedProps&&ye===p.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=Ee),k.props=E,k.state=Ee,k.context=ae,E=_e):(typeof k.componentDidUpdate!="function"||N===p.memoizedProps&&ye===p.memoizedState||(f.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||N===p.memoizedProps&&ye===p.memoizedState||(f.flags|=1024),E=!1)}return k=E,vx(p,f),E=(f.flags&128)!==0,k||E?(k=f.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:k.render(),f.flags|=1,p!==null&&E?(f.child=ef(f,p.child,null,A),f.child=ef(f,null,b,A)):xa(p,f,b,A),f.memoizedState=k.state,p=f.child):p=mu(p,f,A),p}function A6(p,f,b,E){return Wp(),f.flags|=256,xa(p,f,b,E),f.child}var l_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function c_(p){return{baseLanes:p,cachePool:h4()}}function u_(p,f,b){return p=p!==null?p.childLanes&~b:0,f&&(p|=_i),p}function _6(p,f,b){var E=f.pendingProps,A=!1,k=(f.flags&128)!==0,N;if((N=k)||(N=p!==null&&p.memoizedState===null?!1:(mo.current&2)!==0),N&&(A=!0,f.flags&=-129),N=(f.flags&32)!==0,f.flags&=-33,p===null){if(Cn){if(A?hd(f):gd(),(p=Cr)?(p=N5(p,fl),p=p!==null&&p.data!=="&"?p:null,p!==null&&(f.memoizedState={dehydrated:p,treeContext:ld!==null?{id:bc,overflow:yc}:null,retryLane:536870912,hydrationErrors:null},b=s4(p),b.return=f,f.child=b,ya=f,Cr=null)):p=null,p===null)throw ud(f);return G_(p)?f.lanes=32:f.lanes=536870912,null}var W=E.children;return E=E.fallback,A?(gd(),A=f.mode,W=xx({mode:"hidden",children:W},A),E=Kp(E,A,b,null),W.return=f,E.return=f,W.sibling=E,f.child=W,E=f.child,E.memoizedState=c_(b),E.childLanes=u_(p,N,b),f.memoizedState=l_,ib(null,E)):(hd(f),d_(f,W))}var ae=p.memoizedState;if(ae!==null&&(W=ae.dehydrated,W!==null)){if(k)f.flags&256?(hd(f),f.flags&=-257,f=p_(p,f,b)):f.memoizedState!==null?(gd(),f.child=p.child,f.flags|=128,f=null):(gd(),W=E.fallback,A=f.mode,E=xx({mode:"visible",children:E.children},A),W=Kp(W,A,b,null),W.flags|=2,E.return=f,W.return=f,E.sibling=W,f.child=E,ef(f,p.child,null,b),E=f.child,E.memoizedState=c_(b),E.childLanes=u_(p,N,b),f.memoizedState=l_,f=ib(null,E));else if(hd(f),G_(W)){if(N=W.nextSibling&&W.nextSibling.dataset,N)var be=N.dgst;N=be,E=Error(r(419)),E.stack="",E.digest=N,Yg({value:E,source:null,stack:null}),f=p_(p,f,b)}else if(Lo||Tm(p,f,b,!1),N=(b&p.childLanes)!==0,Lo||N){if(N=dr,N!==null&&(E=Sr(N,b),E!==0&&E!==ae.retryLane))throw ae.retryLane=E,Gp(p,E),Ks(N,p,E),s_;V_(W)||Ix(),f=p_(p,f,b)}else V_(W)?(f.flags|=192,f.child=p.child,f=null):(p=ae.treeContext,Cr=hl(W.nextSibling),ya=f,Cn=!0,cd=null,fl=!1,p!==null&&c4(f,p),f=d_(f,E.children),f.flags|=4096);return f}return A?(gd(),W=E.fallback,A=f.mode,ae=p.child,be=ae.sibling,E=lu(ae,{mode:"hidden",children:E.children}),E.subtreeFlags=ae.subtreeFlags&65011712,be!==null?W=lu(be,W):(W=Kp(W,A,b,null),W.flags|=2),W.return=f,E.return=f,E.sibling=W,f.child=E,ib(null,E),E=f.child,W=p.child.memoizedState,W===null?W=c_(b):(A=W.cachePool,A!==null?(ae=Do._currentValue,A=A.parent!==ae?{parent:ae,pool:ae}:A):A=h4(),W={baseLanes:W.baseLanes|b,cachePool:A}),E.memoizedState=W,E.childLanes=u_(p,N,b),f.memoizedState=l_,ib(p.child,E)):(hd(f),b=p.child,p=b.sibling,b=lu(b,{mode:"visible",children:E.children}),b.return=f,b.sibling=null,p!==null&&(N=f.deletions,N===null?(f.deletions=[p],f.flags|=16):N.push(p)),f.child=b,f.memoizedState=null,b)}function d_(p,f){return f=xx({mode:"visible",children:f},p.mode),f.return=p,p.child=f}function xx(p,f){return p=Ti(22,p,null,f),p.lanes=0,p}function p_(p,f,b){return ef(f,p.child,null,b),p=d_(f,f.pendingProps.children),p.flags|=2,f.memoizedState=null,p}function k6(p,f,b){p.lanes|=f;var E=p.alternate;E!==null&&(E.lanes|=f),_A(p.return,f,b)}function f_(p,f,b,E,A,k){var N=p.memoizedState;N===null?p.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:A,treeForkCount:k}:(N.isBackwards=f,N.rendering=null,N.renderingStartTime=0,N.last=E,N.tail=b,N.tailMode=A,N.treeForkCount=k)}function I6(p,f,b){var E=f.pendingProps,A=E.revealOrder,k=E.tail;E=E.children;var N=mo.current,W=(N&2)!==0;if(W?(N=N&1|2,f.flags|=128):N&=1,K(mo,N),xa(p,f,E,b),E=Cn?Wg:0,!W&&p!==null&&(p.flags&128)!==0)e:for(p=f.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&k6(p,b,f);else if(p.tag===19)k6(p,b,f);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}switch(A){case"forwards":for(b=f.child,A=null;b!==null;)p=b.alternate,p!==null&&lx(p)===null&&(A=b),b=b.sibling;b=A,b===null?(A=f.child,f.child=null):(A=b.sibling,b.sibling=null),f_(f,!1,A,b,k,E);break;case"backwards":case"unstable_legacy-backwards":for(b=null,A=f.child,f.child=null;A!==null;){if(p=A.alternate,p!==null&&lx(p)===null){f.child=A;break}p=A.sibling,A.sibling=b,b=A,A=p}f_(f,!0,b,null,k,E);break;case"together":f_(f,!1,null,null,void 0,E);break;default:f.memoizedState=null}return f.child}function mu(p,f,b){if(p!==null&&(f.dependencies=p.dependencies),vd|=f.lanes,(b&f.childLanes)===0)if(p!==null){if(Tm(p,f,b,!1),(b&f.childLanes)===0)return null}else return null;if(p!==null&&f.child!==p.child)throw Error(r(153));if(f.child!==null){for(p=f.child,b=lu(p,p.pendingProps),f.child=b,b.return=f;p.sibling!==null;)p=p.sibling,b=b.sibling=lu(p,p.pendingProps),b.return=f;b.sibling=null}return f.child}function m_(p,f){return(p.lanes&f)!==0?!0:(p=p.dependencies,!!(p!==null&&ex(p)))}function Eue(p,f,b){switch(f.tag){case 3:Fe(f,f.stateNode.containerInfo),dd(f,Do,p.memoizedState.cache),Wp();break;case 27:case 5:Qe(f);break;case 4:Fe(f,f.stateNode.containerInfo);break;case 10:dd(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,FA(f),null;break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(hd(f),f.flags|=128,null):(b&f.child.childLanes)!==0?_6(p,f,b):(hd(f),p=mu(p,f,b),p!==null?p.sibling:null);hd(f);break;case 19:var A=(p.flags&128)!==0;if(E=(b&f.childLanes)!==0,E||(Tm(p,f,b,!1),E=(b&f.childLanes)!==0),A){if(E)return I6(p,f,b);f.flags|=128}if(A=f.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),K(mo,mo.current),E)break;return null;case 22:return f.lanes=0,S6(p,f,b,f.pendingProps);case 24:dd(f,Do,p.memoizedState.cache)}return mu(p,f,b)}function P6(p,f,b){if(p!==null)if(p.memoizedProps!==f.pendingProps)Lo=!0;else{if(!m_(p,b)&&(f.flags&128)===0)return Lo=!1,Eue(p,f,b);Lo=(p.flags&131072)!==0}else Lo=!1,Cn&&(f.flags&1048576)!==0&&l4(f,Wg,f.index);switch(f.lanes=0,f.tag){case 16:e:{var E=f.pendingProps;if(p=Qp(f.elementType),f.type=p,typeof p=="function")vA(p)?(E=nf(p,E),f.tag=1,f=C6(null,f,p,E,b)):(f.tag=0,f=i_(null,f,p,E,b));else{if(p!=null){var A=p.$$typeof;if(A===_){f.tag=11,f=y6(null,f,p,E,b);break e}else if(A===M){f.tag=14,f=v6(null,f,p,E,b);break e}}throw f=j(p)||p,Error(r(306,f,""))}}return f;case 0:return i_(p,f,f.type,f.pendingProps,b);case 1:return E=f.type,A=nf(E,f.pendingProps),C6(p,f,E,A,b);case 3:e:{if(Fe(f,f.stateNode.containerInfo),p===null)throw Error(r(387));E=f.pendingProps;var k=f.memoizedState;A=k.element,DA(p,f),nb(f,E,null,b);var N=f.memoizedState;if(E=N.cache,dd(f,Do,E),E!==k.cache&&kA(f,[Do],b,!0),tb(),E=N.element,k.isDehydrated)if(k={element:E,isDehydrated:!1,cache:N.cache},f.updateQueue.baseState=k,f.memoizedState=k,f.flags&256){f=A6(p,f,E,b);break e}else if(E!==A){A=ul(Error(r(424)),f),Yg(A),f=A6(p,f,E,b);break e}else{switch(p=f.stateNode.containerInfo,p.nodeType){case 9:p=p.body;break;default:p=p.nodeName==="HTML"?p.ownerDocument.body:p}for(Cr=hl(p.firstChild),ya=f,Cn=!0,cd=null,fl=!0,b=S4(f,null,E,b),f.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Wp(),E===A){f=mu(p,f,b);break e}xa(p,f,E,b)}f=f.child}return f;case 26:return vx(p,f),p===null?(b=U5(f.type,null,f.pendingProps,null))?f.memoizedState=b:Cn||(b=f.type,p=f.pendingProps,E=Lx(Oe.current).createElement(b),E[Er]=f,E[Mo]=p,Sa(E,b,p),Mr(E),f.stateNode=E):f.memoizedState=U5(f.type,p.memoizedProps,f.pendingProps,p.memoizedState),null;case 27:return Qe(f),p===null&&Cn&&(E=f.stateNode=B5(f.type,f.pendingProps,Oe.current),ya=f,fl=!0,A=Cr,wd(f.type)?(K_=A,Cr=hl(E.firstChild)):Cr=A),xa(p,f,f.pendingProps.children,b),vx(p,f),p===null&&(f.flags|=4194304),f.child;case 5:return p===null&&Cn&&((A=E=Cr)&&(E=Que(E,f.type,f.pendingProps,fl),E!==null?(f.stateNode=E,ya=f,Cr=hl(E.firstChild),fl=!1,A=!0):A=!1),A||ud(f)),Qe(f),A=f.type,k=f.pendingProps,N=p!==null?p.memoizedProps:null,E=k.children,q_(A,k)?E=null:N!==null&&q_(A,N)&&(f.flags|=32),f.memoizedState!==null&&(A=UA(p,f,fue,null,null,b),Eb._currentValue=A),vx(p,f),xa(p,f,E,b),f.child;case 6:return p===null&&Cn&&((p=b=Cr)&&(b=Zue(b,f.pendingProps,fl),b!==null?(f.stateNode=b,ya=f,Cr=null,p=!0):p=!1),p||ud(f)),null;case 13:return _6(p,f,b);case 4:return Fe(f,f.stateNode.containerInfo),E=f.pendingProps,p===null?f.child=ef(f,null,E,b):xa(p,f,E,b),f.child;case 11:return y6(p,f,f.type,f.pendingProps,b);case 7:return xa(p,f,f.pendingProps,b),f.child;case 8:return xa(p,f,f.pendingProps.children,b),f.child;case 12:return xa(p,f,f.pendingProps.children,b),f.child;case 10:return E=f.pendingProps,dd(f,f.type,E.value),xa(p,f,E.children,b),f.child;case 9:return A=f.type._context,E=f.pendingProps.children,Xp(f),A=va(A),E=E(A),f.flags|=1,xa(p,f,E,b),f.child;case 14:return v6(p,f,f.type,f.pendingProps,b);case 15:return x6(p,f,f.type,f.pendingProps,b);case 19:return I6(p,f,b);case 31:return Sue(p,f,b);case 22:return S6(p,f,b,f.pendingProps);case 24:return Xp(f),E=va(Do),p===null?(A=OA(),A===null&&(A=dr,k=IA(),A.pooledCache=k,k.refCount++,k!==null&&(A.pooledCacheLanes|=b),A=k),f.memoizedState={parent:E,cache:A},RA(f),dd(f,Do,A)):((p.lanes&b)!==0&&(DA(p,f),nb(f,null,null,b),tb()),A=p.memoizedState,k=f.memoizedState,A.parent!==E?(A={parent:E,cache:E},f.memoizedState=A,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=A),dd(f,Do,E)):(E=k.cache,dd(f,Do,E),E!==A.cache&&kA(f,[Do],b,!0))),xa(p,f,f.pendingProps.children,b),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function hu(p){p.flags|=4}function h_(p,f,b,E,A){if((f=(p.mode&32)!==0)&&(f=!1),f){if(p.flags|=16777216,(A&335544128)===A)if(p.stateNode.complete)p.flags|=8192;else if(r5())p.flags|=8192;else throw Zp=ox,MA}else p.flags&=-16777217}function O6(p,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!G5(f))if(r5())p.flags|=8192;else throw Zp=ox,MA}function Sx(p,f){f!==null&&(p.flags|=4),p.flags&16384&&(f=p.tag!==22?_t():536870912,p.lanes|=f,Nm|=f)}function lb(p,f){if(!Cn)switch(p.tailMode){case"hidden":f=p.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?p.tail=null:b.sibling=null;break;case"collapsed":b=p.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?f||p.tail===null?p.tail=null:p.tail.sibling=null:E.sibling=null}}function Ar(p){var f=p.alternate!==null&&p.alternate.child===p.child,b=0,E=0;if(f)for(var A=p.child;A!==null;)b|=A.lanes|A.childLanes,E|=A.subtreeFlags&65011712,E|=A.flags&65011712,A.return=p,A=A.sibling;else for(A=p.child;A!==null;)b|=A.lanes|A.childLanes,E|=A.subtreeFlags,E|=A.flags,A.return=p,A=A.sibling;return p.subtreeFlags|=E,p.childLanes=b,f}function Tue(p,f,b){var E=f.pendingProps;switch(TA(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(f),null;case 1:return Ar(f),null;case 3:return b=f.stateNode,E=null,p!==null&&(E=p.memoizedState.cache),f.memoizedState.cache!==E&&(f.flags|=2048),du(Do),Ke(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(p===null||p.child===null)&&(Em(f)?hu(f):p===null||p.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,CA())),Ar(f),null;case 26:var A=f.type,k=f.memoizedState;return p===null?(hu(f),k!==null?(Ar(f),O6(f,k)):(Ar(f),h_(f,A,null,E,b))):k?k!==p.memoizedState?(hu(f),Ar(f),O6(f,k)):(Ar(f),f.flags&=-16777217):(p=p.memoizedProps,p!==E&&hu(f),Ar(f),h_(f,A,p,E,b)),null;case 27:if(Wt(f),b=Oe.current,A=f.type,p!==null&&f.stateNode!=null)p.memoizedProps!==E&&hu(f);else{if(!E){if(f.stateNode===null)throw Error(r(166));return Ar(f),null}p=ve.current,Em(f)?u4(f):(p=B5(A,E,b),f.stateNode=p,hu(f))}return Ar(f),null;case 5:if(Wt(f),A=f.type,p!==null&&f.stateNode!=null)p.memoizedProps!==E&&hu(f);else{if(!E){if(f.stateNode===null)throw Error(r(166));return Ar(f),null}if(k=ve.current,Em(f))u4(f);else{var N=Lx(Oe.current);switch(k){case 1:k=N.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:k=N.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":k=N.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":k=N.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":k=N.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof E.is=="string"?N.createElement("select",{is:E.is}):N.createElement("select"),E.multiple?k.multiple=!0:E.size&&(k.size=E.size);break;default:k=typeof E.is=="string"?N.createElement(A,{is:E.is}):N.createElement(A)}}k[Er]=f,k[Mo]=E;e:for(N=f.child;N!==null;){if(N.tag===5||N.tag===6)k.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===f)break e;for(;N.sibling===null;){if(N.return===null||N.return===f)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}f.stateNode=k;e:switch(Sa(k,A,E),A){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&hu(f)}}return Ar(f),h_(f,f.type,p===null?null:p.memoizedProps,f.pendingProps,b),null;case 6:if(p&&f.stateNode!=null)p.memoizedProps!==E&&hu(f);else{if(typeof E!="string"&&f.stateNode===null)throw Error(r(166));if(p=Oe.current,Em(f)){if(p=f.stateNode,b=f.memoizedProps,E=null,A=ya,A!==null)switch(A.tag){case 27:case 5:E=A.memoizedProps}p[Er]=f,p=!!(p.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||_5(p.nodeValue,b)),p||ud(f,!0)}else p=Lx(p).createTextNode(E),p[Er]=f,f.stateNode=p}return Ar(f),null;case 31:if(b=f.memoizedState,p===null||p.memoizedState!==null){if(E=Em(f),b!==null){if(p===null){if(!E)throw Error(r(318));if(p=f.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(557));p[Er]=f}else Wp(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ar(f),p=!1}else b=CA(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=b),p=!0;if(!p)return f.flags&256?(Ci(f),f):(Ci(f),null);if((f.flags&128)!==0)throw Error(r(558))}return Ar(f),null;case 13:if(E=f.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(A=Em(f),E!==null&&E.dehydrated!==null){if(p===null){if(!A)throw Error(r(318));if(A=f.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[Er]=f}else Wp(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ar(f),A=!1}else A=CA(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=A),A=!0;if(!A)return f.flags&256?(Ci(f),f):(Ci(f),null)}return Ci(f),(f.flags&128)!==0?(f.lanes=b,f):(b=E!==null,p=p!==null&&p.memoizedState!==null,b&&(E=f.child,A=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(A=E.alternate.memoizedState.cachePool.pool),k=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(k=E.memoizedState.cachePool.pool),k!==A&&(E.flags|=2048)),b!==p&&b&&(f.child.flags|=8192),Sx(f,f.updateQueue),Ar(f),null);case 4:return Ke(),p===null&&j_(f.stateNode.containerInfo),Ar(f),null;case 10:return du(f.type),Ar(f),null;case 19:if(re(mo),E=f.memoizedState,E===null)return Ar(f),null;if(A=(f.flags&128)!==0,k=E.rendering,k===null)if(A)lb(E,!1);else{if(eo!==0||p!==null&&(p.flags&128)!==0)for(p=f.child;p!==null;){if(k=lx(p),k!==null){for(f.flags|=128,lb(E,!1),p=k.updateQueue,f.updateQueue=p,Sx(f,p),f.subtreeFlags=0,p=b,b=f.child;b!==null;)a4(b,p),b=b.sibling;return K(mo,mo.current&1|2),Cn&&cu(f,E.treeForkCount),f.child}p=p.sibling}E.tail!==null&&Kn()>Ax&&(f.flags|=128,A=!0,lb(E,!1),f.lanes=4194304)}else{if(!A)if(p=lx(k),p!==null){if(f.flags|=128,A=!0,p=p.updateQueue,f.updateQueue=p,Sx(f,p),lb(E,!0),E.tail===null&&E.tailMode==="hidden"&&!k.alternate&&!Cn)return Ar(f),null}else 2*Kn()-E.renderingStartTime>Ax&&b!==536870912&&(f.flags|=128,A=!0,lb(E,!1),f.lanes=4194304);E.isBackwards?(k.sibling=f.child,f.child=k):(p=E.last,p!==null?p.sibling=k:f.child=k,E.last=k)}return E.tail!==null?(p=E.tail,E.rendering=p,E.tail=p.sibling,E.renderingStartTime=Kn(),p.sibling=null,b=mo.current,K(mo,A?b&1|2:b&1),Cn&&cu(f,E.treeForkCount),p):(Ar(f),null);case 22:case 23:return Ci(f),BA(),E=f.memoizedState!==null,p!==null?p.memoizedState!==null!==E&&(f.flags|=8192):E&&(f.flags|=8192),E?(b&536870912)!==0&&(f.flags&128)===0&&(Ar(f),f.subtreeFlags&6&&(f.flags|=8192)):Ar(f),b=f.updateQueue,b!==null&&Sx(f,b.retryQueue),b=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),E=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(E=f.memoizedState.cachePool.pool),E!==b&&(f.flags|=2048),p!==null&&re(Jp),null;case 24:return b=null,p!==null&&(b=p.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),du(Do),Ar(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function wue(p,f){switch(TA(f),f.tag){case 1:return p=f.flags,p&65536?(f.flags=p&-65537|128,f):null;case 3:return du(Do),Ke(),p=f.flags,(p&65536)!==0&&(p&128)===0?(f.flags=p&-65537|128,f):null;case 26:case 27:case 5:return Wt(f),null;case 31:if(f.memoizedState!==null){if(Ci(f),f.alternate===null)throw Error(r(340));Wp()}return p=f.flags,p&65536?(f.flags=p&-65537|128,f):null;case 13:if(Ci(f),p=f.memoizedState,p!==null&&p.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Wp()}return p=f.flags,p&65536?(f.flags=p&-65537|128,f):null;case 19:return re(mo),null;case 4:return Ke(),null;case 10:return du(f.type),null;case 22:case 23:return Ci(f),BA(),p!==null&&re(Jp),p=f.flags,p&65536?(f.flags=p&-65537|128,f):null;case 24:return du(Do),null;case 25:return null;default:return null}}function M6(p,f){switch(TA(f),f.tag){case 3:du(Do),Ke();break;case 26:case 27:case 5:Wt(f);break;case 4:Ke();break;case 31:f.memoizedState!==null&&Ci(f);break;case 13:Ci(f);break;case 19:re(mo);break;case 10:du(f.type);break;case 22:case 23:Ci(f),BA(),p!==null&&re(Jp);break;case 24:du(Do)}}function cb(p,f){try{var b=f.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var A=E.next;b=A;do{if((b.tag&p)===p){E=void 0;var k=b.create,N=b.inst;E=k(),N.destroy=E}b=b.next}while(b!==A)}}catch(W){Qn(f,f.return,W)}}function bd(p,f,b){try{var E=f.updateQueue,A=E!==null?E.lastEffect:null;if(A!==null){var k=A.next;E=k;do{if((E.tag&p)===p){var N=E.inst,W=N.destroy;if(W!==void 0){N.destroy=void 0,A=f;var ae=b,be=W;try{be()}catch(_e){Qn(A,ae,_e)}}}E=E.next}while(E!==k)}}catch(_e){Qn(f,f.return,_e)}}function R6(p){var f=p.updateQueue;if(f!==null){var b=p.stateNode;try{T4(f,b)}catch(E){Qn(p,p.return,E)}}}function D6(p,f,b){b.props=nf(p.type,p.memoizedProps),b.state=p.memoizedState;try{b.componentWillUnmount()}catch(E){Qn(p,f,E)}}function ub(p,f){try{var b=p.ref;if(b!==null){switch(p.tag){case 26:case 27:case 5:var E=p.stateNode;break;case 30:E=p.stateNode;break;default:E=p.stateNode}typeof b=="function"?p.refCleanup=b(E):b.current=E}}catch(A){Qn(p,f,A)}}function vc(p,f){var b=p.ref,E=p.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(A){Qn(p,f,A)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(A){Qn(p,f,A)}else b.current=null}function N6(p){var f=p.type,b=p.memoizedProps,E=p.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(A){Qn(p,p.return,A)}}function g_(p,f,b){try{var E=p.stateNode;Gue(E,p.type,b,f),E[Mo]=f}catch(A){Qn(p,p.return,A)}}function L6(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&wd(p.type)||p.tag===4}function b_(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||L6(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&wd(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function y_(p,f,b){var E=p.tag;if(E===5||E===6)p=p.stateNode,f?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(p,f):(f=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,f.appendChild(p),b=b._reactRootContainer,b!=null||f.onclick!==null||(f.onclick=pe));else if(E!==4&&(E===27&&wd(p.type)&&(b=p.stateNode,f=null),p=p.child,p!==null))for(y_(p,f,b),p=p.sibling;p!==null;)y_(p,f,b),p=p.sibling}function Ex(p,f,b){var E=p.tag;if(E===5||E===6)p=p.stateNode,f?b.insertBefore(p,f):b.appendChild(p);else if(E!==4&&(E===27&&wd(p.type)&&(b=p.stateNode),p=p.child,p!==null))for(Ex(p,f,b),p=p.sibling;p!==null;)Ex(p,f,b),p=p.sibling}function j6(p){var f=p.stateNode,b=p.memoizedProps;try{for(var E=p.type,A=f.attributes;A.length;)f.removeAttributeNode(A[0]);Sa(f,E,b),f[Er]=p,f[Mo]=b}catch(k){Qn(p,p.return,k)}}var gu=!1,jo=!1,v_=!1,B6=typeof WeakSet=="function"?WeakSet:Set,ta=null;function Cue(p,f){if(p=p.containerInfo,z_=Hx,p=Xj(p),pA(p)){if("selectionStart"in p)var b={start:p.selectionStart,end:p.selectionEnd};else e:{b=(b=p.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var A=E.anchorOffset,k=E.focusNode;E=E.focusOffset;try{b.nodeType,k.nodeType}catch{b=null;break e}var N=0,W=-1,ae=-1,be=0,_e=0,Me=p,ye=null;t:for(;;){for(var Ee;Me!==b||A!==0&&Me.nodeType!==3||(W=N+A),Me!==k||E!==0&&Me.nodeType!==3||(ae=N+E),Me.nodeType===3&&(N+=Me.nodeValue.length),(Ee=Me.firstChild)!==null;)ye=Me,Me=Ee;for(;;){if(Me===p)break t;if(ye===b&&++be===A&&(W=N),ye===k&&++_e===E&&(ae=N),(Ee=Me.nextSibling)!==null)break;Me=ye,ye=Me.parentNode}Me=Ee}b=W===-1||ae===-1?null:{start:W,end:ae}}else b=null}b=b||{start:0,end:0}}else b=null;for(U_={focusedElem:p,selectionRange:b},Hx=!1,ta=f;ta!==null;)if(f=ta,p=f.child,(f.subtreeFlags&1028)!==0&&p!==null)p.return=f,ta=p;else for(;ta!==null;){switch(f=ta,k=f.alternate,p=f.flags,f.tag){case 0:if((p&4)!==0&&(p=f.updateQueue,p=p!==null?p.events:null,p!==null))for(b=0;b<p.length;b++)A=p[b],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((p&1024)!==0&&k!==null){p=void 0,b=f,A=k.memoizedProps,k=k.memoizedState,E=b.stateNode;try{var mt=nf(b.type,A);p=E.getSnapshotBeforeUpdate(mt,k),E.__reactInternalSnapshotBeforeUpdate=p}catch(Rt){Qn(b,b.return,Rt)}}break;case 3:if((p&1024)!==0){if(p=f.stateNode.containerInfo,b=p.nodeType,b===9)$_(p);else if(b===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":$_(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=f.sibling,p!==null){p.return=f.return,ta=p;break}ta=f.return}}function F6(p,f,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:yu(p,b),E&4&&cb(5,b);break;case 1:if(yu(p,b),E&4)if(p=b.stateNode,f===null)try{p.componentDidMount()}catch(N){Qn(b,b.return,N)}else{var A=nf(b.type,f.memoizedProps);f=f.memoizedState;try{p.componentDidUpdate(A,f,p.__reactInternalSnapshotBeforeUpdate)}catch(N){Qn(b,b.return,N)}}E&64&&R6(b),E&512&&ub(b,b.return);break;case 3:if(yu(p,b),E&64&&(p=b.updateQueue,p!==null)){if(f=null,b.child!==null)switch(b.child.tag){case 27:case 5:f=b.child.stateNode;break;case 1:f=b.child.stateNode}try{T4(p,f)}catch(N){Qn(b,b.return,N)}}break;case 27:f===null&&E&4&&j6(b);case 26:case 5:yu(p,b),f===null&&E&4&&N6(b),E&512&&ub(b,b.return);break;case 12:yu(p,b);break;case 31:yu(p,b),E&4&&q6(p,b);break;case 13:yu(p,b),E&4&&H6(p,b),E&64&&(p=b.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(b=Due.bind(null,b),ede(p,b))));break;case 22:if(E=b.memoizedState!==null||gu,!E){f=f!==null&&f.memoizedState!==null||jo,A=gu;var k=jo;gu=E,(jo=f)&&!k?vu(p,b,(b.subtreeFlags&8772)!==0):yu(p,b),gu=A,jo=k}break;case 30:break;default:yu(p,b)}}function z6(p){var f=p.alternate;f!==null&&(p.alternate=null,z6(f)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(f=p.stateNode,f!==null&&Ba(f)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var jr=null,Hs=!1;function bu(p,f,b){for(b=b.child;b!==null;)U6(p,f,b),b=b.sibling}function U6(p,f,b){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Bt,b)}catch{}switch(b.tag){case 26:jo||vc(b,f),bu(p,f,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:jo||vc(b,f);var E=jr,A=Hs;wd(b.type)&&(jr=b.stateNode,Hs=!1),bu(p,f,b),vb(b.stateNode),jr=E,Hs=A;break;case 5:jo||vc(b,f);case 6:if(E=jr,A=Hs,jr=null,bu(p,f,b),jr=E,Hs=A,jr!==null)if(Hs)try{(jr.nodeType===9?jr.body:jr.nodeName==="HTML"?jr.ownerDocument.body:jr).removeChild(b.stateNode)}catch(k){Qn(b,f,k)}else try{jr.removeChild(b.stateNode)}catch(k){Qn(b,f,k)}break;case 18:jr!==null&&(Hs?(p=jr,R5(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,b.stateNode),Hm(p)):R5(jr,b.stateNode));break;case 4:E=jr,A=Hs,jr=b.stateNode.containerInfo,Hs=!0,bu(p,f,b),jr=E,Hs=A;break;case 0:case 11:case 14:case 15:bd(2,b,f),jo||bd(4,b,f),bu(p,f,b);break;case 1:jo||(vc(b,f),E=b.stateNode,typeof E.componentWillUnmount=="function"&&D6(b,f,E)),bu(p,f,b);break;case 21:bu(p,f,b);break;case 22:jo=(E=jo)||b.memoizedState!==null,bu(p,f,b),jo=E;break;default:bu(p,f,b)}}function q6(p,f){if(f.memoizedState===null&&(p=f.alternate,p!==null&&(p=p.memoizedState,p!==null))){p=p.dehydrated;try{Hm(p)}catch(b){Qn(f,f.return,b)}}}function H6(p,f){if(f.memoizedState===null&&(p=f.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{Hm(p)}catch(b){Qn(f,f.return,b)}}function Aue(p){switch(p.tag){case 31:case 13:case 19:var f=p.stateNode;return f===null&&(f=p.stateNode=new B6),f;case 22:return p=p.stateNode,f=p._retryCache,f===null&&(f=p._retryCache=new B6),f;default:throw Error(r(435,p.tag))}}function Tx(p,f){var b=Aue(p);f.forEach(function(E){if(!b.has(E)){b.add(E);var A=Nue.bind(null,p,E);E.then(A,A)}})}function $s(p,f){var b=f.deletions;if(b!==null)for(var E=0;E<b.length;E++){var A=b[E],k=p,N=f,W=N;e:for(;W!==null;){switch(W.tag){case 27:if(wd(W.type)){jr=W.stateNode,Hs=!1;break e}break;case 5:jr=W.stateNode,Hs=!1;break e;case 3:case 4:jr=W.stateNode.containerInfo,Hs=!0;break e}W=W.return}if(jr===null)throw Error(r(160));U6(k,N,A),jr=null,Hs=!1,k=A.alternate,k!==null&&(k.return=null),A.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)$6(f,p),f=f.sibling}var $l=null;function $6(p,f){var b=p.alternate,E=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:$s(f,p),Vs(p),E&4&&(bd(3,p,p.return),cb(3,p),bd(5,p,p.return));break;case 1:$s(f,p),Vs(p),E&512&&(jo||b===null||vc(b,b.return)),E&64&&gu&&(p=p.updateQueue,p!==null&&(E=p.callbacks,E!==null&&(b=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var A=$l;if($s(f,p),Vs(p),E&512&&(jo||b===null||vc(b,b.return)),E&4){var k=b!==null?b.memoizedState:null;if(E=p.memoizedState,b===null)if(E===null)if(p.stateNode===null){e:{E=p.type,b=p.memoizedProps,A=A.ownerDocument||A;t:switch(E){case"title":k=A.getElementsByTagName("title")[0],(!k||k[Ul]||k[Er]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=A.createElement(E),A.head.insertBefore(k,A.querySelector("head > title"))),Sa(k,E,b),k[Er]=p,Mr(k),E=k;break e;case"link":var N=$5("link","href",A).get(E+(b.href||""));if(N){for(var W=0;W<N.length;W++)if(k=N[W],k.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&k.getAttribute("rel")===(b.rel==null?null:b.rel)&&k.getAttribute("title")===(b.title==null?null:b.title)&&k.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){N.splice(W,1);break t}}k=A.createElement(E),Sa(k,E,b),A.head.appendChild(k);break;case"meta":if(N=$5("meta","content",A).get(E+(b.content||""))){for(W=0;W<N.length;W++)if(k=N[W],k.getAttribute("content")===(b.content==null?null:""+b.content)&&k.getAttribute("name")===(b.name==null?null:b.name)&&k.getAttribute("property")===(b.property==null?null:b.property)&&k.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&k.getAttribute("charset")===(b.charSet==null?null:b.charSet)){N.splice(W,1);break t}}k=A.createElement(E),Sa(k,E,b),A.head.appendChild(k);break;default:throw Error(r(468,E))}k[Er]=p,Mr(k),E=k}p.stateNode=E}else V5(A,p.type,p.stateNode);else p.stateNode=H5(A,E,p.memoizedProps);else k!==E?(k===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):k.count--,E===null?V5(A,p.type,p.stateNode):H5(A,E,p.memoizedProps)):E===null&&p.stateNode!==null&&g_(p,p.memoizedProps,b.memoizedProps)}break;case 27:$s(f,p),Vs(p),E&512&&(jo||b===null||vc(b,b.return)),b!==null&&E&4&&g_(p,p.memoizedProps,b.memoizedProps);break;case 5:if($s(f,p),Vs(p),E&512&&(jo||b===null||vc(b,b.return)),p.flags&32){A=p.stateNode;try{St(A,"")}catch(mt){Qn(p,p.return,mt)}}E&4&&p.stateNode!=null&&(A=p.memoizedProps,g_(p,A,b!==null?b.memoizedProps:A)),E&1024&&(v_=!0);break;case 6:if($s(f,p),Vs(p),E&4){if(p.stateNode===null)throw Error(r(162));E=p.memoizedProps,b=p.stateNode;try{b.nodeValue=E}catch(mt){Qn(p,p.return,mt)}}break;case 3:if(Fx=null,A=$l,$l=jx(f.containerInfo),$s(f,p),$l=A,Vs(p),E&4&&b!==null&&b.memoizedState.isDehydrated)try{Hm(f.containerInfo)}catch(mt){Qn(p,p.return,mt)}v_&&(v_=!1,V6(p));break;case 4:E=$l,$l=jx(p.stateNode.containerInfo),$s(f,p),Vs(p),$l=E;break;case 12:$s(f,p),Vs(p);break;case 31:$s(f,p),Vs(p),E&4&&(E=p.updateQueue,E!==null&&(p.updateQueue=null,Tx(p,E)));break;case 13:$s(f,p),Vs(p),p.child.flags&8192&&p.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Cx=Kn()),E&4&&(E=p.updateQueue,E!==null&&(p.updateQueue=null,Tx(p,E)));break;case 22:A=p.memoizedState!==null;var ae=b!==null&&b.memoizedState!==null,be=gu,_e=jo;if(gu=be||A,jo=_e||ae,$s(f,p),jo=_e,gu=be,Vs(p),E&8192)e:for(f=p.stateNode,f._visibility=A?f._visibility&-2:f._visibility|1,A&&(b===null||ae||gu||jo||rf(p)),b=null,f=p;;){if(f.tag===5||f.tag===26){if(b===null){ae=b=f;try{if(k=ae.stateNode,A)N=k.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{W=ae.stateNode;var Me=ae.memoizedProps.style,ye=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;W.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(mt){Qn(ae,ae.return,mt)}}}else if(f.tag===6){if(b===null){ae=f;try{ae.stateNode.nodeValue=A?"":ae.memoizedProps}catch(mt){Qn(ae,ae.return,mt)}}}else if(f.tag===18){if(b===null){ae=f;try{var Ee=ae.stateNode;A?D5(Ee,!0):D5(ae.stateNode,!1)}catch(mt){Qn(ae,ae.return,mt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===p)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;b===f&&(b=null),f=f.return}b===f&&(b=null),f.sibling.return=f.return,f=f.sibling}E&4&&(E=p.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,Tx(p,b))));break;case 19:$s(f,p),Vs(p),E&4&&(E=p.updateQueue,E!==null&&(p.updateQueue=null,Tx(p,E)));break;case 30:break;case 21:break;default:$s(f,p),Vs(p)}}function Vs(p){var f=p.flags;if(f&2){try{for(var b,E=p.return;E!==null;){if(L6(E)){b=E;break}E=E.return}if(b==null)throw Error(r(160));switch(b.tag){case 27:var A=b.stateNode,k=b_(p);Ex(p,k,A);break;case 5:var N=b.stateNode;b.flags&32&&(St(N,""),b.flags&=-33);var W=b_(p);Ex(p,W,N);break;case 3:case 4:var ae=b.stateNode.containerInfo,be=b_(p);y_(p,be,ae);break;default:throw Error(r(161))}}catch(_e){Qn(p,p.return,_e)}p.flags&=-3}f&4096&&(p.flags&=-4097)}function V6(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var f=p;V6(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),p=p.sibling}}function yu(p,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)F6(p,f.alternate,f),f=f.sibling}function rf(p){for(p=p.child;p!==null;){var f=p;switch(f.tag){case 0:case 11:case 14:case 15:bd(4,f,f.return),rf(f);break;case 1:vc(f,f.return);var b=f.stateNode;typeof b.componentWillUnmount=="function"&&D6(f,f.return,b),rf(f);break;case 27:vb(f.stateNode);case 26:case 5:vc(f,f.return),rf(f);break;case 22:f.memoizedState===null&&rf(f);break;case 30:rf(f);break;default:rf(f)}p=p.sibling}}function vu(p,f,b){for(b=b&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var E=f.alternate,A=p,k=f,N=k.flags;switch(k.tag){case 0:case 11:case 15:vu(A,k,b),cb(4,k);break;case 1:if(vu(A,k,b),E=k,A=E.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(be){Qn(E,E.return,be)}if(E=k,A=E.updateQueue,A!==null){var W=E.stateNode;try{var ae=A.shared.hiddenCallbacks;if(ae!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ae.length;A++)E4(ae[A],W)}catch(be){Qn(E,E.return,be)}}b&&N&64&&R6(k),ub(k,k.return);break;case 27:j6(k);case 26:case 5:vu(A,k,b),b&&E===null&&N&4&&N6(k),ub(k,k.return);break;case 12:vu(A,k,b);break;case 31:vu(A,k,b),b&&N&4&&q6(A,k);break;case 13:vu(A,k,b),b&&N&4&&H6(A,k);break;case 22:k.memoizedState===null&&vu(A,k,b),ub(k,k.return);break;case 30:break;default:vu(A,k,b)}f=f.sibling}}function x_(p,f){var b=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),p=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(p=f.memoizedState.cachePool.pool),p!==b&&(p!=null&&p.refCount++,b!=null&&Xg(b))}function S_(p,f){p=null,f.alternate!==null&&(p=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==p&&(f.refCount++,p!=null&&Xg(p))}function Vl(p,f,b,E){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)G6(p,f,b,E),f=f.sibling}function G6(p,f,b,E){var A=f.flags;switch(f.tag){case 0:case 11:case 15:Vl(p,f,b,E),A&2048&&cb(9,f);break;case 1:Vl(p,f,b,E);break;case 3:Vl(p,f,b,E),A&2048&&(p=null,f.alternate!==null&&(p=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==p&&(f.refCount++,p!=null&&Xg(p)));break;case 12:if(A&2048){Vl(p,f,b,E),p=f.stateNode;try{var k=f.memoizedProps,N=k.id,W=k.onPostCommit;typeof W=="function"&&W(N,f.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(ae){Qn(f,f.return,ae)}}else Vl(p,f,b,E);break;case 31:Vl(p,f,b,E);break;case 13:Vl(p,f,b,E);break;case 23:break;case 22:k=f.stateNode,N=f.alternate,f.memoizedState!==null?k._visibility&2?Vl(p,f,b,E):db(p,f):k._visibility&2?Vl(p,f,b,E):(k._visibility|=2,Mm(p,f,b,E,(f.subtreeFlags&10256)!==0||!1)),A&2048&&x_(N,f);break;case 24:Vl(p,f,b,E),A&2048&&S_(f.alternate,f);break;default:Vl(p,f,b,E)}}function Mm(p,f,b,E,A){for(A=A&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var k=p,N=f,W=b,ae=E,be=N.flags;switch(N.tag){case 0:case 11:case 15:Mm(k,N,W,ae,A),cb(8,N);break;case 23:break;case 22:var _e=N.stateNode;N.memoizedState!==null?_e._visibility&2?Mm(k,N,W,ae,A):db(k,N):(_e._visibility|=2,Mm(k,N,W,ae,A)),A&&be&2048&&x_(N.alternate,N);break;case 24:Mm(k,N,W,ae,A),A&&be&2048&&S_(N.alternate,N);break;default:Mm(k,N,W,ae,A)}f=f.sibling}}function db(p,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var b=p,E=f,A=E.flags;switch(E.tag){case 22:db(b,E),A&2048&&x_(E.alternate,E);break;case 24:db(b,E),A&2048&&S_(E.alternate,E);break;default:db(b,E)}f=f.sibling}}var pb=8192;function Rm(p,f,b){if(p.subtreeFlags&pb)for(p=p.child;p!==null;)K6(p,f,b),p=p.sibling}function K6(p,f,b){switch(p.tag){case 26:Rm(p,f,b),p.flags&pb&&p.memoizedState!==null&&pde(b,$l,p.memoizedState,p.memoizedProps);break;case 5:Rm(p,f,b);break;case 3:case 4:var E=$l;$l=jx(p.stateNode.containerInfo),Rm(p,f,b),$l=E;break;case 22:p.memoizedState===null&&(E=p.alternate,E!==null&&E.memoizedState!==null?(E=pb,pb=16777216,Rm(p,f,b),pb=E):Rm(p,f,b));break;default:Rm(p,f,b)}}function W6(p){var f=p.alternate;if(f!==null&&(p=f.child,p!==null)){f.child=null;do f=p.sibling,p.sibling=null,p=f;while(p!==null)}}function fb(p){var f=p.deletions;if((p.flags&16)!==0){if(f!==null)for(var b=0;b<f.length;b++){var E=f[b];ta=E,X6(E,p)}W6(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Y6(p),p=p.sibling}function Y6(p){switch(p.tag){case 0:case 11:case 15:fb(p),p.flags&2048&&bd(9,p,p.return);break;case 3:fb(p);break;case 12:fb(p);break;case 22:var f=p.stateNode;p.memoizedState!==null&&f._visibility&2&&(p.return===null||p.return.tag!==13)?(f._visibility&=-3,wx(p)):fb(p);break;default:fb(p)}}function wx(p){var f=p.deletions;if((p.flags&16)!==0){if(f!==null)for(var b=0;b<f.length;b++){var E=f[b];ta=E,X6(E,p)}W6(p)}for(p=p.child;p!==null;){switch(f=p,f.tag){case 0:case 11:case 15:bd(8,f,f.return),wx(f);break;case 22:b=f.stateNode,b._visibility&2&&(b._visibility&=-3,wx(f));break;default:wx(f)}p=p.sibling}}function X6(p,f){for(;ta!==null;){var b=ta;switch(b.tag){case 0:case 11:case 15:bd(8,b,f);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Xg(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,ta=E;else e:for(b=p;ta!==null;){E=ta;var A=E.sibling,k=E.return;if(z6(E),E===b){ta=null;break e}if(A!==null){A.return=k,ta=A;break e}ta=k}}}var _ue={getCacheForType:function(p){var f=va(Do),b=f.data.get(p);return b===void 0&&(b=p(),f.data.set(p,b)),b},cacheSignal:function(){return va(Do).controller.signal}},kue=typeof WeakMap=="function"?WeakMap:Map,Vn=0,dr=null,gn=null,En=0,Jn=0,Ai=null,yd=!1,Dm=!1,E_=!1,xu=0,eo=0,vd=0,of=0,T_=0,_i=0,Nm=0,mb=null,Gs=null,w_=!1,Cx=0,J6=0,Ax=1/0,_x=null,xd=null,Jo=0,Sd=null,Lm=null,Su=0,C_=0,A_=null,Q6=null,hb=0,__=null;function ki(){return(Vn&2)!==0&&En!==0?En&-En:U.T!==null?R_():ja()}function Z6(){if(_i===0)if((En&536870912)===0||Cn){var p=La;La<<=1,(La&3932160)===0&&(La=262144),_i=p}else _i=536870912;return p=wi.current,p!==null&&(p.flags|=32),_i}function Ks(p,f,b){(p===dr&&(Jn===2||Jn===9)||p.cancelPendingCommit!==null)&&(jm(p,0),Ed(p,En,_i,!1)),$n(p,b),((Vn&2)===0||p!==dr)&&(p===dr&&((Vn&2)===0&&(of|=b),eo===4&&Ed(p,En,_i,!1)),xc(p))}function e5(p,f,b){if((Vn&6)!==0)throw Error(r(327));var E=!b&&(f&127)===0&&(f&p.expiredLanes)===0||Ce(p,f),A=E?Oue(p,f):I_(p,f,!0),k=E;do{if(A===0){Dm&&!E&&Ed(p,f,0,!1);break}else{if(b=p.current.alternate,k&&!Iue(b)){A=I_(p,f,!1),k=!1;continue}if(A===2){if(k=f,p.errorRecoveryDisabledLanes&k)var N=0;else N=p.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){f=N;e:{var W=p;A=mb;var ae=W.current.memoizedState.isDehydrated;if(ae&&(jm(W,N).flags|=256),N=I_(W,N,!1),N!==2){if(E_&&!ae){W.errorRecoveryDisabledLanes|=k,of|=k,A=4;break e}k=Gs,Gs=A,k!==null&&(Gs===null?Gs=k:Gs.push.apply(Gs,k))}A=N}if(k=!1,A!==2)continue}}if(A===1){jm(p,0),Ed(p,f,0,!0);break}e:{switch(E=p,k=A,k){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Ed(E,f,_i,!yd);break e;case 2:Gs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(A=Cx+300-Kn(),10<A)){if(Ed(E,f,_i,!yd),oe(E,0,!0)!==0)break e;Su=f,E.timeoutHandle=O5(t5.bind(null,E,b,Gs,_x,w_,f,_i,of,Nm,yd,k,"Throttled",-0,0),A);break e}t5(E,b,Gs,_x,w_,f,_i,of,Nm,yd,k,null,-0,0)}}break}while(!0);xc(p)}function t5(p,f,b,E,A,k,N,W,ae,be,_e,Me,ye,Ee){if(p.timeoutHandle=-1,Me=f.subtreeFlags,Me&8192||(Me&16785408)===16785408){Me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pe},K6(f,k,Me);var mt=(k&62914560)===k?Cx-Kn():(k&4194048)===k?J6-Kn():0;if(mt=fde(Me,mt),mt!==null){Su=k,p.cancelPendingCommit=mt(c5.bind(null,p,f,k,b,E,A,N,W,ae,_e,Me,null,ye,Ee)),Ed(p,k,N,!be);return}}c5(p,f,k,b,E,A,N,W,ae)}function Iue(p){for(var f=p;;){var b=f.tag;if((b===0||b===11||b===15)&&f.flags&16384&&(b=f.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var A=b[E],k=A.getSnapshot;A=A.value;try{if(!Ei(k(),A))return!1}catch{return!1}}if(b=f.child,f.subtreeFlags&16384&&b!==null)b.return=f,f=b;else{if(f===p)break;for(;f.sibling===null;){if(f.return===null||f.return===p)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ed(p,f,b,E){f&=~T_,f&=~of,p.suspendedLanes|=f,p.pingedLanes&=~f,E&&(p.warmLanes|=f),E=p.expirationTimes;for(var A=f;0<A;){var k=31-ln(A),N=1<<k;E[k]=-1,A&=~N}b!==0&&ot(p,b,f)}function kx(){return(Vn&6)===0?(gb(0),!1):!0}function k_(){if(gn!==null){if(Jn===0)var p=gn.return;else p=gn,uu=Yp=null,$A(p),_m=null,Qg=0,p=gn;for(;p!==null;)M6(p.alternate,p),p=p.return;gn=null}}function jm(p,f){var b=p.timeoutHandle;b!==-1&&(p.timeoutHandle=-1,Yue(b)),b=p.cancelPendingCommit,b!==null&&(p.cancelPendingCommit=null,b()),Su=0,k_(),dr=p,gn=b=lu(p.current,null),En=f,Jn=0,Ai=null,yd=!1,Dm=Ce(p,f),E_=!1,Nm=_i=T_=of=vd=eo=0,Gs=mb=null,w_=!1,(f&8)!==0&&(f|=f&32);var E=p.entangledLanes;if(E!==0)for(p=p.entanglements,E&=f;0<E;){var A=31-ln(E),k=1<<A;f|=p[A],E&=~k}return xu=f,Yv(),b}function n5(p,f){Qt=null,U.H=sb,f===Am||f===rx?(f=y4(),Jn=3):f===MA?(f=y4(),Jn=4):Jn=f===s_?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ai=f,gn===null&&(eo=1,bx(p,ul(f,p.current)))}function r5(){var p=wi.current;return p===null?!0:(En&4194048)===En?ml===null:(En&62914560)===En||(En&536870912)!==0?p===ml:!1}function o5(){var p=U.H;return U.H=sb,p===null?sb:p}function a5(){var p=U.A;return U.A=_ue,p}function Ix(){eo=4,yd||(En&4194048)!==En&&wi.current!==null||(Dm=!0),(vd&134217727)===0&&(of&134217727)===0||dr===null||Ed(dr,En,_i,!1)}function I_(p,f,b){var E=Vn;Vn|=2;var A=o5(),k=a5();(dr!==p||En!==f)&&(_x=null,jm(p,f)),f=!1;var N=eo;e:do try{if(Jn!==0&&gn!==null){var W=gn,ae=Ai;switch(Jn){case 8:k_(),N=6;break e;case 3:case 2:case 9:case 6:wi.current===null&&(f=!0);var be=Jn;if(Jn=0,Ai=null,Bm(p,W,ae,be),b&&Dm){N=0;break e}break;default:be=Jn,Jn=0,Ai=null,Bm(p,W,ae,be)}}Pue(),N=eo;break}catch(_e){n5(p,_e)}while(!0);return f&&p.shellSuspendCounter++,uu=Yp=null,Vn=E,U.H=A,U.A=k,gn===null&&(dr=null,En=0,Yv()),N}function Pue(){for(;gn!==null;)s5(gn)}function Oue(p,f){var b=Vn;Vn|=2;var E=o5(),A=a5();dr!==p||En!==f?(_x=null,Ax=Kn()+500,jm(p,f)):Dm=Ce(p,f);e:do try{if(Jn!==0&&gn!==null){f=gn;var k=Ai;t:switch(Jn){case 1:Jn=0,Ai=null,Bm(p,f,k,1);break;case 2:case 9:if(g4(k)){Jn=0,Ai=null,i5(f);break}f=function(){Jn!==2&&Jn!==9||dr!==p||(Jn=7),xc(p)},k.then(f,f);break e;case 3:Jn=7;break e;case 4:Jn=5;break e;case 7:g4(k)?(Jn=0,Ai=null,i5(f)):(Jn=0,Ai=null,Bm(p,f,k,7));break;case 5:var N=null;switch(gn.tag){case 26:N=gn.memoizedState;case 5:case 27:var W=gn;if(N?G5(N):W.stateNode.complete){Jn=0,Ai=null;var ae=W.sibling;if(ae!==null)gn=ae;else{var be=W.return;be!==null?(gn=be,Px(be)):gn=null}break t}}Jn=0,Ai=null,Bm(p,f,k,5);break;case 6:Jn=0,Ai=null,Bm(p,f,k,6);break;case 8:k_(),eo=6;break e;default:throw Error(r(462))}}Mue();break}catch(_e){n5(p,_e)}while(!0);return uu=Yp=null,U.H=E,U.A=A,Vn=b,gn!==null?0:(dr=null,En=0,Yv(),eo)}function Mue(){for(;gn!==null&&!hi();)s5(gn)}function s5(p){var f=P6(p.alternate,p,xu);p.memoizedProps=p.pendingProps,f===null?Px(p):gn=f}function i5(p){var f=p,b=f.alternate;switch(f.tag){case 15:case 0:f=w6(b,f,f.pendingProps,f.type,void 0,En);break;case 11:f=w6(b,f,f.pendingProps,f.type.render,f.ref,En);break;case 5:$A(f);default:M6(b,f),f=gn=a4(f,xu),f=P6(b,f,xu)}p.memoizedProps=p.pendingProps,f===null?Px(p):gn=f}function Bm(p,f,b,E){uu=Yp=null,$A(f),_m=null,Qg=0;var A=f.return;try{if(xue(p,A,f,b,En)){eo=1,bx(p,ul(b,p.current)),gn=null;return}}catch(k){if(A!==null)throw gn=A,k;eo=1,bx(p,ul(b,p.current)),gn=null;return}f.flags&32768?(Cn||E===1?p=!0:Dm||(En&536870912)!==0?p=!1:(yd=p=!0,(E===2||E===9||E===3||E===6)&&(E=wi.current,E!==null&&E.tag===13&&(E.flags|=16384))),l5(f,p)):Px(f)}function Px(p){var f=p;do{if((f.flags&32768)!==0){l5(f,yd);return}p=f.return;var b=Tue(f.alternate,f,xu);if(b!==null){gn=b;return}if(f=f.sibling,f!==null){gn=f;return}gn=f=p}while(f!==null);eo===0&&(eo=5)}function l5(p,f){do{var b=wue(p.alternate,p);if(b!==null){b.flags&=32767,gn=b;return}if(b=p.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!f&&(p=p.sibling,p!==null)){gn=p;return}gn=p=b}while(p!==null);eo=6,gn=null}function c5(p,f,b,E,A,k,N,W,ae){p.cancelPendingCommit=null;do Ox();while(Jo!==0);if((Vn&6)!==0)throw Error(r(327));if(f!==null){if(f===p.current)throw Error(r(177));if(k=f.lanes|f.childLanes,k|=bA,ut(p,b,k,N,W,ae),p===dr&&(gn=dr=null,En=0),Lm=f,Sd=p,Su=b,C_=k,A_=A,Q6=E,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,Lue(yt,function(){return m5(),null})):(p.callbackNode=null,p.callbackPriority=0),E=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||E){E=U.T,U.T=null,A=Y.p,Y.p=2,N=Vn,Vn|=4;try{Cue(p,f,b)}finally{Vn=N,Y.p=A,U.T=E}}Jo=1,u5(),d5(),p5()}}function u5(){if(Jo===1){Jo=0;var p=Sd,f=Lm,b=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||b){b=U.T,U.T=null;var E=Y.p;Y.p=2;var A=Vn;Vn|=4;try{$6(f,p);var k=U_,N=Xj(p.containerInfo),W=k.focusedElem,ae=k.selectionRange;if(N!==W&&W&&W.ownerDocument&&Yj(W.ownerDocument.documentElement,W)){if(ae!==null&&pA(W)){var be=ae.start,_e=ae.end;if(_e===void 0&&(_e=be),"selectionStart"in W)W.selectionStart=be,W.selectionEnd=Math.min(_e,W.value.length);else{var Me=W.ownerDocument||document,ye=Me&&Me.defaultView||window;if(ye.getSelection){var Ee=ye.getSelection(),mt=W.textContent.length,Rt=Math.min(ae.start,mt),ar=ae.end===void 0?Rt:Math.min(ae.end,mt);!Ee.extend&&Rt>ar&&(N=ar,ar=Rt,Rt=N);var de=Wj(W,Rt),se=Wj(W,ar);if(de&&se&&(Ee.rangeCount!==1||Ee.anchorNode!==de.node||Ee.anchorOffset!==de.offset||Ee.focusNode!==se.node||Ee.focusOffset!==se.offset)){var ge=Me.createRange();ge.setStart(de.node,de.offset),Ee.removeAllRanges(),Rt>ar?(Ee.addRange(ge),Ee.extend(se.node,se.offset)):(ge.setEnd(se.node,se.offset),Ee.addRange(ge))}}}}for(Me=[],Ee=W;Ee=Ee.parentNode;)Ee.nodeType===1&&Me.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<Me.length;W++){var Pe=Me[W];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}Hx=!!z_,U_=z_=null}finally{Vn=A,Y.p=E,U.T=b}}p.current=f,Jo=2}}function d5(){if(Jo===2){Jo=0;var p=Sd,f=Lm,b=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||b){b=U.T,U.T=null;var E=Y.p;Y.p=2;var A=Vn;Vn|=4;try{F6(p,f.alternate,f)}finally{Vn=A,Y.p=E,U.T=b}}Jo=3}}function p5(){if(Jo===4||Jo===3){Jo=0,gi();var p=Sd,f=Lm,b=Su,E=Q6;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Jo=5:(Jo=0,Lm=Sd=null,f5(p,p.pendingLanes));var A=p.pendingLanes;if(A===0&&(xd=null),ms(b),f=f.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Bt,f,void 0,(f.current.flags&128)===128)}catch{}if(E!==null){f=U.T,A=Y.p,Y.p=2,U.T=null;try{for(var k=p.onRecoverableError,N=0;N<E.length;N++){var W=E[N];k(W.value,{componentStack:W.stack})}}finally{U.T=f,Y.p=A}}(Su&3)!==0&&Ox(),xc(p),A=p.pendingLanes,(b&261930)!==0&&(A&42)!==0?p===__?hb++:(hb=0,__=p):hb=0,gb(0)}}function f5(p,f){(p.pooledCacheLanes&=f)===0&&(f=p.pooledCache,f!=null&&(p.pooledCache=null,Xg(f)))}function Ox(){return u5(),d5(),p5(),m5()}function m5(){if(Jo!==5)return!1;var p=Sd,f=C_;C_=0;var b=ms(Su),E=U.T,A=Y.p;try{Y.p=32>b?32:b,U.T=null,b=A_,A_=null;var k=Sd,N=Su;if(Jo=0,Lm=Sd=null,Su=0,(Vn&6)!==0)throw Error(r(331));var W=Vn;if(Vn|=4,Y6(k.current),G6(k,k.current,N,b),Vn=W,gb(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Bt,k)}catch{}return!0}finally{Y.p=A,U.T=E,f5(p,f)}}function h5(p,f,b){f=ul(b,f),f=a_(p.stateNode,f,2),p=md(p,f,2),p!==null&&($n(p,2),xc(p))}function Qn(p,f,b){if(p.tag===3)h5(p,p,b);else for(;f!==null;){if(f.tag===3){h5(f,p,b);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(xd===null||!xd.has(E))){p=ul(b,p),b=g6(2),E=md(f,b,2),E!==null&&(b6(b,E,f,p),$n(E,2),xc(E));break}}f=f.return}}function P_(p,f,b){var E=p.pingCache;if(E===null){E=p.pingCache=new kue;var A=new Set;E.set(f,A)}else A=E.get(f),A===void 0&&(A=new Set,E.set(f,A));A.has(b)||(E_=!0,A.add(b),p=Rue.bind(null,p,f,b),f.then(p,p))}function Rue(p,f,b){var E=p.pingCache;E!==null&&E.delete(f),p.pingedLanes|=p.suspendedLanes&b,p.warmLanes&=~b,dr===p&&(En&b)===b&&(eo===4||eo===3&&(En&62914560)===En&&300>Kn()-Cx?(Vn&2)===0&&jm(p,0):T_|=b,Nm===En&&(Nm=0)),xc(p)}function g5(p,f){f===0&&(f=_t()),p=Gp(p,f),p!==null&&($n(p,f),xc(p))}function Due(p){var f=p.memoizedState,b=0;f!==null&&(b=f.retryLane),g5(p,b)}function Nue(p,f){var b=0;switch(p.tag){case 31:case 13:var E=p.stateNode,A=p.memoizedState;A!==null&&(b=A.retryLane);break;case 19:E=p.stateNode;break;case 22:E=p.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(f),g5(p,b)}function Lue(p,f){return Yr(p,f)}var Mx=null,Fm=null,O_=!1,Rx=!1,M_=!1,Td=0;function xc(p){p!==Fm&&p.next===null&&(Fm===null?Mx=Fm=p:Fm=Fm.next=p),Rx=!0,O_||(O_=!0,Bue())}function gb(p,f){if(!M_&&Rx){M_=!0;do for(var b=!1,E=Mx;E!==null;){if(p!==0){var A=E.pendingLanes;if(A===0)var k=0;else{var N=E.suspendedLanes,W=E.pingedLanes;k=(1<<31-ln(42|p)+1)-1,k&=A&~(N&~W),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(b=!0,x5(E,k))}else k=En,k=oe(E,E===dr?k:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(k&3)===0||Ce(E,k)||(b=!0,x5(E,k));E=E.next}while(b);M_=!1}}function jue(){b5()}function b5(){Rx=O_=!1;var p=0;Td!==0&&Wue()&&(p=Td);for(var f=Kn(),b=null,E=Mx;E!==null;){var A=E.next,k=y5(E,f);k===0?(E.next=null,b===null?Mx=A:b.next=A,A===null&&(Fm=b)):(b=E,(p!==0||(k&3)!==0)&&(Rx=!0)),E=A}Jo!==0&&Jo!==5||gb(p),Td!==0&&(Td=0)}function y5(p,f){for(var b=p.suspendedLanes,E=p.pingedLanes,A=p.expirationTimes,k=p.pendingLanes&-62914561;0<k;){var N=31-ln(k),W=1<<N,ae=A[N];ae===-1?((W&b)===0||(W&E)!==0)&&(A[N]=Je(W,f)):ae<=f&&(p.expiredLanes|=W),k&=~W}if(f=dr,b=En,b=oe(p,p===f?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),E=p.callbackNode,b===0||p===f&&(Jn===2||Jn===9)||p.cancelPendingCommit!==null)return E!==null&&E!==null&&ko(E),p.callbackNode=null,p.callbackPriority=0;if((b&3)===0||Ce(p,b)){if(f=b&-b,f===p.callbackPriority)return f;switch(E!==null&&ko(E),ms(b)){case 2:case 8:b=Ve;break;case 32:b=yt;break;case 268435456:b=fe;break;default:b=yt}return E=v5.bind(null,p),b=Yr(b,E),p.callbackPriority=f,p.callbackNode=b,f}return E!==null&&E!==null&&ko(E),p.callbackPriority=2,p.callbackNode=null,2}function v5(p,f){if(Jo!==0&&Jo!==5)return p.callbackNode=null,p.callbackPriority=0,null;var b=p.callbackNode;if(Ox()&&p.callbackNode!==b)return null;var E=En;return E=oe(p,p===dr?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),E===0?null:(e5(p,E,f),y5(p,Kn()),p.callbackNode!=null&&p.callbackNode===b?v5.bind(null,p):null)}function x5(p,f){if(Ox())return null;e5(p,f,!0)}function Bue(){Xue(function(){(Vn&6)!==0?Yr(Te,jue):b5()})}function R_(){if(Td===0){var p=wm;p===0&&(p=Ko,Ko<<=1,(Ko&261888)===0&&(Ko=256)),Td=p}return Td}function S5(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:me(""+p)}function E5(p,f){var b=f.ownerDocument.createElement("input");return b.name=f.name,b.value=f.value,p.id&&b.setAttribute("form",p.id),f.parentNode.insertBefore(b,f),p=new FormData(p),b.parentNode.removeChild(b),p}function Fue(p,f,b,E,A){if(f==="submit"&&b&&b.stateNode===A){var k=S5((A[Mo]||null).action),N=E.submitter;N&&(f=(f=N[Mo]||null)?S5(f.formAction):N.getAttribute("formAction"),f!==null&&(k=f,N=null));var W=new Ft("action","action",null,E,A);p.push({event:W,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Td!==0){var ae=N?E5(A,N):new FormData(A);ZA(b,{pending:!0,data:ae,method:A.method,action:k},null,ae)}}else typeof k=="function"&&(W.preventDefault(),ae=N?E5(A,N):new FormData(A),ZA(b,{pending:!0,data:ae,method:A.method,action:k},k,ae))},currentTarget:A}]})}}for(var D_=0;D_<gA.length;D_++){var N_=gA[D_],zue=N_.toLowerCase(),Uue=N_[0].toUpperCase()+N_.slice(1);Hl(zue,"on"+Uue)}Hl(Zj,"onAnimationEnd"),Hl(e4,"onAnimationIteration"),Hl(t4,"onAnimationStart"),Hl("dblclick","onDoubleClick"),Hl("focusin","onFocus"),Hl("focusout","onBlur"),Hl(rue,"onTransitionRun"),Hl(oue,"onTransitionStart"),Hl(aue,"onTransitionCancel"),Hl(n4,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),que=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bb));function T5(p,f){f=(f&4)!==0;for(var b=0;b<p.length;b++){var E=p[b],A=E.event;E=E.listeners;e:{var k=void 0;if(f)for(var N=E.length-1;0<=N;N--){var W=E[N],ae=W.instance,be=W.currentTarget;if(W=W.listener,ae!==k&&A.isPropagationStopped())break e;k=W,A.currentTarget=be;try{k(A)}catch(_e){Wv(_e)}A.currentTarget=null,k=ae}else for(N=0;N<E.length;N++){if(W=E[N],ae=W.instance,be=W.currentTarget,W=W.listener,ae!==k&&A.isPropagationStopped())break e;k=W,A.currentTarget=be;try{k(A)}catch(_e){Wv(_e)}A.currentTarget=null,k=ae}}}}function bn(p,f){var b=f[ha];b===void 0&&(b=f[ha]=new Set);var E=p+"__bubble";b.has(E)||(w5(f,p,2,!1),b.add(E))}function L_(p,f,b){var E=0;f&&(E|=4),w5(b,p,E,f)}var Dx="_reactListening"+Math.random().toString(36).slice(2);function j_(p){if(!p[Dx]){p[Dx]=!0,id.forEach(function(b){b!=="selectionchange"&&(que.has(b)||L_(b,!1,p),L_(b,!0,p))});var f=p.nodeType===9?p:p.ownerDocument;f===null||f[Dx]||(f[Dx]=!0,L_("selectionchange",!1,f))}}function w5(p,f,b,E){switch(Z5(f)){case 2:var A=gde;break;case 8:A=bde;break;default:A=Q_}b=A.bind(null,f,b,p),A=void 0,!Qr||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(A=!0),E?A!==void 0?p.addEventListener(f,b,{capture:!0,passive:A}):p.addEventListener(f,b,!0):A!==void 0?p.addEventListener(f,b,{passive:A}):p.addEventListener(f,b,!1)}function B_(p,f,b,E,A){var k=E;if((f&1)===0&&(f&2)===0&&E!==null)e:for(;;){if(E===null)return;var N=E.tag;if(N===3||N===4){var W=E.stateNode.containerInfo;if(W===A)break;if(N===4)for(N=E.return;N!==null;){var ae=N.tag;if((ae===3||ae===4)&&N.stateNode.containerInfo===A)return;N=N.return}for(;W!==null;){if(N=Tr(W),N===null)return;if(ae=N.tag,ae===5||ae===6||ae===26||ae===27){E=k=N;continue e}W=W.parentNode}}E=E.return}uo(function(){var be=k,_e=lt(b),Me=[];e:{var ye=r4.get(p);if(ye!==void 0){var Ee=Ft,mt=p;switch(p){case"keypress":if(Q(b)===0)break e;case"keydown":case"keyup":Ee=Nce;break;case"focusin":mt="focus",Ee=Si;break;case"focusout":mt="blur",Ee=Si;break;case"beforeblur":case"afterblur":Ee=Si;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=Xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=qs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=Bce;break;case Zj:case e4:case t4:Ee=Gv;break;case n4:Ee=zce;break;case"scroll":case"scrollend":Ee=Ro;break;case"wheel":Ee=qce;break;case"copy":case"cut":case"paste":Ee=mm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=Dj;break;case"toggle":case"beforetoggle":Ee=$ce}var Rt=(f&4)!==0,ar=!Rt&&(p==="scroll"||p==="scrollend"),de=Rt?ye!==null?ye+"Capture":null:ye;Rt=[];for(var se=be,ge;se!==null;){var Pe=se;if(ge=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||ge===null||de===null||(Pe=po(se,de),Pe!=null&&Rt.push(yb(se,Pe,ge))),ar)break;se=se.return}0<Rt.length&&(ye=new Ee(ye,mt,null,b,_e),Me.push({event:ye,listeners:Rt}))}}if((f&7)===0){e:{if(ye=p==="mouseover"||p==="pointerover",Ee=p==="mouseout"||p==="pointerout",ye&&b!==Ae&&(mt=b.relatedTarget||b.fromElement)&&(Tr(mt)||mt[nl]))break e;if((Ee||ye)&&(ye=_e.window===_e?_e:(ye=_e.ownerDocument)?ye.defaultView||ye.parentWindow:window,Ee?(mt=b.relatedTarget||b.toElement,Ee=be,mt=mt?Tr(mt):null,mt!==null&&(ar=a(mt),Rt=mt.tag,mt!==ar||Rt!==5&&Rt!==27&&Rt!==6)&&(mt=null)):(Ee=null,mt=be),Ee!==mt)){if(Rt=Xo,Pe="onMouseLeave",de="onMouseEnter",se="mouse",(p==="pointerout"||p==="pointerover")&&(Rt=Dj,Pe="onPointerLeave",de="onPointerEnter",se="pointer"),ar=Ee==null?ye:rl(Ee),ge=mt==null?ye:rl(mt),ye=new Rt(Pe,se+"leave",Ee,b,_e),ye.target=ar,ye.relatedTarget=ge,Pe=null,Tr(_e)===be&&(Rt=new Rt(de,se+"enter",mt,b,_e),Rt.target=ge,Rt.relatedTarget=ar,Pe=Rt),ar=Pe,Ee&&mt)t:{for(Rt=Hue,de=Ee,se=mt,ge=0,Pe=de;Pe;Pe=Rt(Pe))ge++;Pe=0;for(var Ct=se;Ct;Ct=Rt(Ct))Pe++;for(;0<ge-Pe;)de=Rt(de),ge--;for(;0<Pe-ge;)se=Rt(se),Pe--;for(;ge--;){if(de===se||se!==null&&de===se.alternate){Rt=de;break t}de=Rt(de),se=Rt(se)}Rt=null}else Rt=null;Ee!==null&&C5(Me,ye,Ee,Rt,!1),mt!==null&&ar!==null&&C5(Me,ar,mt,Rt,!0)}}e:{if(ye=be?rl(be):window,Ee=ye.nodeName&&ye.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&ye.type==="file")var Bn=qj;else if(zj(ye))if(Hj)Bn=eue;else{Bn=Qce;var xt=Jce}else Ee=ye.nodeName,!Ee||Ee.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?be&&il(be.elementType)&&(Bn=qj):Bn=Zce;if(Bn&&(Bn=Bn(p,be))){Uj(Me,Bn,b,_e);break e}xt&&xt(p,ye,be),p==="focusout"&&be&&ye.type==="number"&&be.memoizedProps.value!=null&&sl(ye,"number",ye.value)}switch(xt=be?rl(be):window,p){case"focusin":(zj(xt)||xt.contentEditable==="true")&&(gm=xt,fA=be,Kg=null);break;case"focusout":Kg=fA=gm=null;break;case"mousedown":mA=!0;break;case"contextmenu":case"mouseup":case"dragend":mA=!1,Jj(Me,b,_e);break;case"selectionchange":if(nue)break;case"keydown":case"keyup":Jj(Me,b,_e)}var rn;if(cA)e:{switch(p){case"compositionstart":var Tn="onCompositionStart";break e;case"compositionend":Tn="onCompositionEnd";break e;case"compositionupdate":Tn="onCompositionUpdate";break e}Tn=void 0}else hm?Bj(p,b)&&(Tn="onCompositionEnd"):p==="keydown"&&b.keyCode===229&&(Tn="onCompositionStart");Tn&&(Nj&&b.locale!=="ko"&&(hm||Tn!=="onCompositionStart"?Tn==="onCompositionEnd"&&hm&&(rn=ll()):(Lr=_e,zs="value"in Lr?Lr.value:Lr.textContent,hm=!0)),xt=Nx(be,Tn),0<xt.length&&(Tn=new Rj(Tn,p,null,b,_e),Me.push({event:Tn,listeners:xt}),rn?Tn.data=rn:(rn=Fj(b),rn!==null&&(Tn.data=rn)))),(rn=Gce?Kce(p,b):Wce(p,b))&&(Tn=Nx(be,"onBeforeInput"),0<Tn.length&&(xt=new Rj("onBeforeInput","beforeinput",null,b,_e),Me.push({event:xt,listeners:Tn}),xt.data=rn)),Fue(Me,p,be,b,_e)}T5(Me,f)})}function yb(p,f,b){return{instance:p,listener:f,currentTarget:b}}function Nx(p,f){for(var b=f+"Capture",E=[];p!==null;){var A=p,k=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||k===null||(A=po(p,b),A!=null&&E.unshift(yb(p,A,k)),A=po(p,f),A!=null&&E.push(yb(p,A,k))),p.tag===3)return E;p=p.return}return[]}function Hue(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function C5(p,f,b,E,A){for(var k=f._reactName,N=[];b!==null&&b!==E;){var W=b,ae=W.alternate,be=W.stateNode;if(W=W.tag,ae!==null&&ae===E)break;W!==5&&W!==26&&W!==27||be===null||(ae=be,A?(be=po(b,k),be!=null&&N.unshift(yb(b,be,ae))):A||(be=po(b,k),be!=null&&N.push(yb(b,be,ae)))),b=b.return}N.length!==0&&p.push({event:f,listeners:N})}var $ue=/\r\n?/g,Vue=/\u0000|\uFFFD/g;function A5(p){return(typeof p=="string"?p:""+p).replace($ue,`
`).replace(Vue,"")}function _5(p,f){return f=A5(f),A5(p)===f}function or(p,f,b,E,A,k){switch(b){case"children":typeof E=="string"?f==="body"||f==="textarea"&&E===""||St(p,E):(typeof E=="number"||typeof E=="bigint")&&f!=="body"&&St(p,""+E);break;case"className":ba(p,"class",E);break;case"tabIndex":ba(p,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ba(p,b,E);break;case"style":Jt(p,E,k);break;case"data":if(f!=="object"){ba(p,"data",E);break}case"src":case"href":if(E===""&&(f!=="a"||b!=="href")){p.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){p.removeAttribute(b);break}E=me(""+E),p.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){p.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(b==="formAction"?(f!=="input"&&or(p,f,"name",A.name,A,null),or(p,f,"formEncType",A.formEncType,A,null),or(p,f,"formMethod",A.formMethod,A,null),or(p,f,"formTarget",A.formTarget,A,null)):(or(p,f,"encType",A.encType,A,null),or(p,f,"method",A.method,A,null),or(p,f,"target",A.target,A,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){p.removeAttribute(b);break}E=me(""+E),p.setAttribute(b,E);break;case"onClick":E!=null&&(p.onclick=pe);break;case"onScroll":E!=null&&bn("scroll",p);break;case"onScrollEnd":E!=null&&bn("scrollend",p);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(b=E.__html,b!=null){if(A.children!=null)throw Error(r(60));p.innerHTML=b}}break;case"multiple":p.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":p.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){p.removeAttribute("xlink:href");break}b=me(""+E),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?p.setAttribute(b,""+E):p.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?p.setAttribute(b,""):p.removeAttribute(b);break;case"capture":case"download":E===!0?p.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?p.setAttribute(b,E):p.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?p.setAttribute(b,E):p.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?p.removeAttribute(b):p.setAttribute(b,E);break;case"popover":bn("beforetoggle",p),bn("toggle",p),co(p,"popover",E);break;case"xlinkActuate":ea(p,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":ea(p,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":ea(p,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":ea(p,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":ea(p,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":ea(p,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":ea(p,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":ea(p,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":ea(p,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":co(p,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Fs.get(b)||b,co(p,b,E))}}function F_(p,f,b,E,A,k){switch(b){case"style":Jt(p,E,k);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(b=E.__html,b!=null){if(A.children!=null)throw Error(r(60));p.innerHTML=b}}break;case"children":typeof E=="string"?St(p,E):(typeof E=="number"||typeof E=="bigint")&&St(p,""+E);break;case"onScroll":E!=null&&bn("scroll",p);break;case"onScrollEnd":E!=null&&bn("scrollend",p);break;case"onClick":E!=null&&(p.onclick=pe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ga.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(A=b.endsWith("Capture"),f=b.slice(2,A?b.length-7:void 0),k=p[Mo]||null,k=k!=null?k[b]:null,typeof k=="function"&&p.removeEventListener(f,k,A),typeof E=="function")){typeof k!="function"&&k!==null&&(b in p?p[b]=null:p.hasAttribute(b)&&p.removeAttribute(b)),p.addEventListener(f,E,A);break e}b in p?p[b]=E:E===!0?p.setAttribute(b,""):co(p,b,E)}}}function Sa(p,f,b){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bn("error",p),bn("load",p);var E=!1,A=!1,k;for(k in b)if(b.hasOwnProperty(k)){var N=b[k];if(N!=null)switch(k){case"src":E=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:or(p,f,k,N,b,null)}}A&&or(p,f,"srcSet",b.srcSet,b,null),E&&or(p,f,"src",b.src,b,null);return;case"input":bn("invalid",p);var W=k=N=A=null,ae=null,be=null;for(E in b)if(b.hasOwnProperty(E)){var _e=b[E];if(_e!=null)switch(E){case"name":A=_e;break;case"type":N=_e;break;case"checked":ae=_e;break;case"defaultChecked":be=_e;break;case"value":k=_e;break;case"defaultValue":W=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,f));break;default:or(p,f,E,_e,b,null)}}al(p,k,W,ae,be,N,A,!1);return;case"select":bn("invalid",p),E=N=k=null;for(A in b)if(b.hasOwnProperty(A)&&(W=b[A],W!=null))switch(A){case"value":k=W;break;case"defaultValue":N=W;break;case"multiple":E=W;default:or(p,f,A,W,b,null)}f=k,b=N,p.multiple=!!E,f!=null?Jr(p,!!E,f,!1):b!=null&&Jr(p,!!E,b,!0);return;case"textarea":bn("invalid",p),k=A=E=null;for(N in b)if(b.hasOwnProperty(N)&&(W=b[N],W!=null))switch(N){case"value":E=W;break;case"defaultValue":A=W;break;case"children":k=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(91));break;default:or(p,f,N,W,b,null)}xi(p,E,A,k);return;case"option":for(ae in b)if(b.hasOwnProperty(ae)&&(E=b[ae],E!=null))switch(ae){case"selected":p.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:or(p,f,ae,E,b,null)}return;case"dialog":bn("beforetoggle",p),bn("toggle",p),bn("cancel",p),bn("close",p);break;case"iframe":case"object":bn("load",p);break;case"video":case"audio":for(E=0;E<bb.length;E++)bn(bb[E],p);break;case"image":bn("error",p),bn("load",p);break;case"details":bn("toggle",p);break;case"embed":case"source":case"link":bn("error",p),bn("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in b)if(b.hasOwnProperty(be)&&(E=b[be],E!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:or(p,f,be,E,b,null)}return;default:if(il(f)){for(_e in b)b.hasOwnProperty(_e)&&(E=b[_e],E!==void 0&&F_(p,f,_e,E,b,void 0));return}}for(W in b)b.hasOwnProperty(W)&&(E=b[W],E!=null&&or(p,f,W,E,b,null))}function Gue(p,f,b,E){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,k=null,N=null,W=null,ae=null,be=null,_e=null;for(Ee in b){var Me=b[Ee];if(b.hasOwnProperty(Ee)&&Me!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":ae=Me;default:E.hasOwnProperty(Ee)||or(p,f,Ee,null,E,Me)}}for(var ye in E){var Ee=E[ye];if(Me=b[ye],E.hasOwnProperty(ye)&&(Ee!=null||Me!=null))switch(ye){case"type":k=Ee;break;case"name":A=Ee;break;case"checked":be=Ee;break;case"defaultChecked":_e=Ee;break;case"value":N=Ee;break;case"defaultValue":W=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,f));break;default:Ee!==Me&&or(p,f,ye,Ee,E,Me)}}hc(p,N,W,ae,be,_e,k,A);return;case"select":Ee=N=W=ye=null;for(k in b)if(ae=b[k],b.hasOwnProperty(k)&&ae!=null)switch(k){case"value":break;case"multiple":Ee=ae;default:E.hasOwnProperty(k)||or(p,f,k,null,E,ae)}for(A in E)if(k=E[A],ae=b[A],E.hasOwnProperty(A)&&(k!=null||ae!=null))switch(A){case"value":ye=k;break;case"defaultValue":W=k;break;case"multiple":N=k;default:k!==ae&&or(p,f,A,k,E,ae)}f=W,b=N,E=Ee,ye!=null?Jr(p,!!b,ye,!1):!!E!=!!b&&(f!=null?Jr(p,!!b,f,!0):Jr(p,!!b,b?[]:"",!1));return;case"textarea":Ee=ye=null;for(W in b)if(A=b[W],b.hasOwnProperty(W)&&A!=null&&!E.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:or(p,f,W,null,E,A)}for(N in E)if(A=E[N],k=b[N],E.hasOwnProperty(N)&&(A!=null||k!=null))switch(N){case"value":ye=A;break;case"defaultValue":Ee=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==k&&or(p,f,N,A,E,k)}au(p,ye,Ee);return;case"option":for(var mt in b)if(ye=b[mt],b.hasOwnProperty(mt)&&ye!=null&&!E.hasOwnProperty(mt))switch(mt){case"selected":p.selected=!1;break;default:or(p,f,mt,null,E,ye)}for(ae in E)if(ye=E[ae],Ee=b[ae],E.hasOwnProperty(ae)&&ye!==Ee&&(ye!=null||Ee!=null))switch(ae){case"selected":p.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:or(p,f,ae,ye,E,Ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in b)ye=b[Rt],b.hasOwnProperty(Rt)&&ye!=null&&!E.hasOwnProperty(Rt)&&or(p,f,Rt,null,E,ye);for(be in E)if(ye=E[be],Ee=b[be],E.hasOwnProperty(be)&&ye!==Ee&&(ye!=null||Ee!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,f));break;default:or(p,f,be,ye,E,Ee)}return;default:if(il(f)){for(var ar in b)ye=b[ar],b.hasOwnProperty(ar)&&ye!==void 0&&!E.hasOwnProperty(ar)&&F_(p,f,ar,void 0,E,ye);for(_e in E)ye=E[_e],Ee=b[_e],!E.hasOwnProperty(_e)||ye===Ee||ye===void 0&&Ee===void 0||F_(p,f,_e,ye,E,Ee);return}}for(var de in b)ye=b[de],b.hasOwnProperty(de)&&ye!=null&&!E.hasOwnProperty(de)&&or(p,f,de,null,E,ye);for(Me in E)ye=E[Me],Ee=b[Me],!E.hasOwnProperty(Me)||ye===Ee||ye==null&&Ee==null||or(p,f,Me,ye,E,Ee)}function k5(p){switch(p){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Kue(){if(typeof performance.getEntriesByType=="function"){for(var p=0,f=0,b=performance.getEntriesByType("resource"),E=0;E<b.length;E++){var A=b[E],k=A.transferSize,N=A.initiatorType,W=A.duration;if(k&&W&&k5(N)){for(N=0,W=A.responseEnd,E+=1;E<b.length;E++){var ae=b[E],be=ae.startTime;if(be>W)break;var _e=ae.transferSize,Me=ae.initiatorType;_e&&k5(Me)&&(ae=ae.responseEnd,N+=_e*(ae<W?1:(W-be)/(ae-be)))}if(--E,f+=8*(k+N)/(A.duration/1e3),p++,10<p)break}}if(0<p)return f/p/1e6}return navigator.connection&&(p=navigator.connection.downlink,typeof p=="number")?p:5}var z_=null,U_=null;function Lx(p){return p.nodeType===9?p:p.ownerDocument}function I5(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function P5(p,f){if(p===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&f==="foreignObject"?0:p}function q_(p,f){return p==="textarea"||p==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var H_=null;function Wue(){var p=window.event;return p&&p.type==="popstate"?p===H_?!1:(H_=p,!0):(H_=null,!1)}var O5=typeof setTimeout=="function"?setTimeout:void 0,Yue=typeof clearTimeout=="function"?clearTimeout:void 0,M5=typeof Promise=="function"?Promise:void 0,Xue=typeof queueMicrotask=="function"?queueMicrotask:typeof M5<"u"?function(p){return M5.resolve(null).then(p).catch(Jue)}:O5;function Jue(p){setTimeout(function(){throw p})}function wd(p){return p==="head"}function R5(p,f){var b=f,E=0;do{var A=b.nextSibling;if(p.removeChild(b),A&&A.nodeType===8)if(b=A.data,b==="/$"||b==="/&"){if(E===0){p.removeChild(A),Hm(f);return}E--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")E++;else if(b==="html")vb(p.ownerDocument.documentElement);else if(b==="head"){b=p.ownerDocument.head,vb(b);for(var k=b.firstChild;k;){var N=k.nextSibling,W=k.nodeName;k[Ul]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&k.rel.toLowerCase()==="stylesheet"||b.removeChild(k),k=N}}else b==="body"&&vb(p.ownerDocument.body);b=A}while(b);Hm(f)}function D5(p,f){var b=p;p=0;do{var E=b.nextSibling;if(b.nodeType===1?f?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(f?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),E&&E.nodeType===8)if(b=E.data,b==="/$"){if(p===0)break;p--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||p++;b=E}while(b)}function $_(p){var f=p.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var b=f;switch(f=f.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":$_(b),Ba(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}p.removeChild(b)}}function Que(p,f,b,E){for(;p.nodeType===1;){var A=b;if(p.nodeName.toLowerCase()!==f.toLowerCase()){if(!E&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(E){if(!p[Ul])switch(f){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(k=p.getAttribute("rel"),k==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(k!==A.rel||p.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||p.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||p.getAttribute("title")!==(A.title==null?null:A.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(k=p.getAttribute("src"),(k!==(A.src==null?null:A.src)||p.getAttribute("type")!==(A.type==null?null:A.type)||p.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&k&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(f==="input"&&p.type==="hidden"){var k=A.name==null?null:""+A.name;if(A.type==="hidden"&&p.getAttribute("name")===k)return p}else return p;if(p=hl(p.nextSibling),p===null)break}return null}function Zue(p,f,b){if(f==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!b||(p=hl(p.nextSibling),p===null))return null;return p}function N5(p,f){for(;p.nodeType!==8;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!f||(p=hl(p.nextSibling),p===null))return null;return p}function V_(p){return p.data==="$?"||p.data==="$~"}function G_(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState!=="loading"}function ede(p,f){var b=p.ownerDocument;if(p.data==="$~")p._reactRetry=f;else if(p.data!=="$?"||b.readyState!=="loading")f();else{var E=function(){f(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),p._reactRetry=E}}function hl(p){for(;p!=null;p=p.nextSibling){var f=p.nodeType;if(f===1||f===3)break;if(f===8){if(f=p.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return p}var K_=null;function L5(p){p=p.nextSibling;for(var f=0;p;){if(p.nodeType===8){var b=p.data;if(b==="/$"||b==="/&"){if(f===0)return hl(p.nextSibling);f--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||f++}p=p.nextSibling}return null}function j5(p){p=p.previousSibling;for(var f=0;p;){if(p.nodeType===8){var b=p.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(f===0)return p;f--}else b!=="/$"&&b!=="/&"||f++}p=p.previousSibling}return null}function B5(p,f,b){switch(f=Lx(b),p){case"html":if(p=f.documentElement,!p)throw Error(r(452));return p;case"head":if(p=f.head,!p)throw Error(r(453));return p;case"body":if(p=f.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}function vb(p){for(var f=p.attributes;f.length;)p.removeAttributeNode(f[0]);Ba(p)}var gl=new Map,F5=new Set;function jx(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var Eu=Y.d;Y.d={f:tde,r:nde,D:rde,C:ode,L:ade,m:sde,X:lde,S:ide,M:cde};function tde(){var p=Eu.f(),f=kx();return p||f}function nde(p){var f=yi(p);f!==null&&f.tag===5&&f.type==="form"?n6(f):Eu.r(p)}var zm=typeof document>"u"?null:document;function z5(p,f,b){var E=zm;if(E&&typeof f=="string"&&f){var A=Rr(f);A='link[rel="'+p+'"][href="'+A+'"]',typeof b=="string"&&(A+='[crossorigin="'+b+'"]'),F5.has(A)||(F5.add(A),p={rel:p,crossOrigin:b,href:f},E.querySelector(A)===null&&(f=E.createElement("link"),Sa(f,"link",p),Mr(f),E.head.appendChild(f)))}}function rde(p){Eu.D(p),z5("dns-prefetch",p,null)}function ode(p,f){Eu.C(p,f),z5("preconnect",p,f)}function ade(p,f,b){Eu.L(p,f,b);var E=zm;if(E&&p&&f){var A='link[rel="preload"][as="'+Rr(f)+'"]';f==="image"&&b&&b.imageSrcSet?(A+='[imagesrcset="'+Rr(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(A+='[imagesizes="'+Rr(b.imageSizes)+'"]')):A+='[href="'+Rr(p)+'"]';var k=A;switch(f){case"style":k=Um(p);break;case"script":k=qm(p)}gl.has(k)||(p=u({rel:"preload",href:f==="image"&&b&&b.imageSrcSet?void 0:p,as:f},b),gl.set(k,p),E.querySelector(A)!==null||f==="style"&&E.querySelector(xb(k))||f==="script"&&E.querySelector(Sb(k))||(f=E.createElement("link"),Sa(f,"link",p),Mr(f),E.head.appendChild(f)))}}function sde(p,f){Eu.m(p,f);var b=zm;if(b&&p){var E=f&&typeof f.as=="string"?f.as:"script",A='link[rel="modulepreload"][as="'+Rr(E)+'"][href="'+Rr(p)+'"]',k=A;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=qm(p)}if(!gl.has(k)&&(p=u({rel:"modulepreload",href:p},f),gl.set(k,p),b.querySelector(A)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Sb(k)))return}E=b.createElement("link"),Sa(E,"link",p),Mr(E),b.head.appendChild(E)}}}function ide(p,f,b){Eu.S(p,f,b);var E=zm;if(E&&p){var A=ol(E).hoistableStyles,k=Um(p);f=f||"default";var N=A.get(k);if(!N){var W={loading:0,preload:null};if(N=E.querySelector(xb(k)))W.loading=5;else{p=u({rel:"stylesheet",href:p,"data-precedence":f},b),(b=gl.get(k))&&W_(p,b);var ae=N=E.createElement("link");Mr(ae),Sa(ae,"link",p),ae._p=new Promise(function(be,_e){ae.onload=be,ae.onerror=_e}),ae.addEventListener("load",function(){W.loading|=1}),ae.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Bx(N,f,E)}N={type:"stylesheet",instance:N,count:1,state:W},A.set(k,N)}}}function lde(p,f){Eu.X(p,f);var b=zm;if(b&&p){var E=ol(b).hoistableScripts,A=qm(p),k=E.get(A);k||(k=b.querySelector(Sb(A)),k||(p=u({src:p,async:!0},f),(f=gl.get(A))&&Y_(p,f),k=b.createElement("script"),Mr(k),Sa(k,"link",p),b.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},E.set(A,k))}}function cde(p,f){Eu.M(p,f);var b=zm;if(b&&p){var E=ol(b).hoistableScripts,A=qm(p),k=E.get(A);k||(k=b.querySelector(Sb(A)),k||(p=u({src:p,async:!0,type:"module"},f),(f=gl.get(A))&&Y_(p,f),k=b.createElement("script"),Mr(k),Sa(k,"link",p),b.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},E.set(A,k))}}function U5(p,f,b,E){var A=(A=Oe.current)?jx(A):null;if(!A)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(f=Um(b.href),b=ol(A).hoistableStyles,E=b.get(f),E||(E={type:"style",instance:null,count:0,state:null},b.set(f,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){p=Um(b.href);var k=ol(A).hoistableStyles,N=k.get(p);if(N||(A=A.ownerDocument||A,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(p,N),(k=A.querySelector(xb(p)))&&!k._p&&(N.instance=k,N.state.loading=5),gl.has(p)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},gl.set(p,b),k||ude(A,p,b,N.state))),f&&E===null)throw Error(r(528,""));return N}if(f&&E!==null)throw Error(r(529,""));return null;case"script":return f=b.async,b=b.src,typeof b=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=qm(b),b=ol(A).hoistableScripts,E=b.get(f),E||(E={type:"script",instance:null,count:0,state:null},b.set(f,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function Um(p){return'href="'+Rr(p)+'"'}function xb(p){return'link[rel="stylesheet"]['+p+"]"}function q5(p){return u({},p,{"data-precedence":p.precedence,precedence:null})}function ude(p,f,b,E){p.querySelector('link[rel="preload"][as="style"]['+f+"]")?E.loading=1:(f=p.createElement("link"),E.preload=f,f.addEventListener("load",function(){return E.loading|=1}),f.addEventListener("error",function(){return E.loading|=2}),Sa(f,"link",b),Mr(f),p.head.appendChild(f))}function qm(p){return'[src="'+Rr(p)+'"]'}function Sb(p){return"script[async]"+p}function H5(p,f,b){if(f.count++,f.instance===null)switch(f.type){case"style":var E=p.querySelector('style[data-href~="'+Rr(b.href)+'"]');if(E)return f.instance=E,Mr(E),E;var A=u({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(p.ownerDocument||p).createElement("style"),Mr(E),Sa(E,"style",A),Bx(E,b.precedence,p),f.instance=E;case"stylesheet":A=Um(b.href);var k=p.querySelector(xb(A));if(k)return f.state.loading|=4,f.instance=k,Mr(k),k;E=q5(b),(A=gl.get(A))&&W_(E,A),k=(p.ownerDocument||p).createElement("link"),Mr(k);var N=k;return N._p=new Promise(function(W,ae){N.onload=W,N.onerror=ae}),Sa(k,"link",E),f.state.loading|=4,Bx(k,b.precedence,p),f.instance=k;case"script":return k=qm(b.src),(A=p.querySelector(Sb(k)))?(f.instance=A,Mr(A),A):(E=b,(A=gl.get(k))&&(E=u({},b),Y_(E,A)),p=p.ownerDocument||p,A=p.createElement("script"),Mr(A),Sa(A,"link",E),p.head.appendChild(A),f.instance=A);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(E=f.instance,f.state.loading|=4,Bx(E,b.precedence,p));return f.instance}function Bx(p,f,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=E.length?E[E.length-1]:null,k=A,N=0;N<E.length;N++){var W=E[N];if(W.dataset.precedence===f)k=W;else if(k!==A)break}k?k.parentNode.insertBefore(p,k.nextSibling):(f=b.nodeType===9?b.head:b,f.insertBefore(p,f.firstChild))}function W_(p,f){p.crossOrigin==null&&(p.crossOrigin=f.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=f.referrerPolicy),p.title==null&&(p.title=f.title)}function Y_(p,f){p.crossOrigin==null&&(p.crossOrigin=f.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=f.referrerPolicy),p.integrity==null&&(p.integrity=f.integrity)}var Fx=null;function $5(p,f,b){if(Fx===null){var E=new Map,A=Fx=new Map;A.set(b,E)}else A=Fx,E=A.get(b),E||(E=new Map,A.set(b,E));if(E.has(p))return E;for(E.set(p,null),b=b.getElementsByTagName(p),A=0;A<b.length;A++){var k=b[A];if(!(k[Ul]||k[Er]||p==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var N=k.getAttribute(f)||"";N=p+N;var W=E.get(N);W?W.push(k):E.set(N,[k])}}return E}function V5(p,f,b){p=p.ownerDocument||p,p.head.insertBefore(b,f==="title"?p.querySelector("head > title"):null)}function dde(p,f,b){if(b===1||f.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return p=f.disabled,typeof f.precedence=="string"&&p==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function G5(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}function pde(p,f,b,E){if(b.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var A=Um(E.href),k=f.querySelector(xb(A));if(k){f=k._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(p.count++,p=zx.bind(p),f.then(p,p)),b.state.loading|=4,b.instance=k,Mr(k);return}k=f.ownerDocument||f,E=q5(E),(A=gl.get(A))&&W_(E,A),k=k.createElement("link"),Mr(k);var N=k;N._p=new Promise(function(W,ae){N.onload=W,N.onerror=ae}),Sa(k,"link",E),b.instance=k}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(b,f),(f=b.state.preload)&&(b.state.loading&3)===0&&(p.count++,b=zx.bind(p),f.addEventListener("load",b),f.addEventListener("error",b))}}var X_=0;function fde(p,f){return p.stylesheets&&p.count===0&&qx(p,p.stylesheets),0<p.count||0<p.imgCount?function(b){var E=setTimeout(function(){if(p.stylesheets&&qx(p,p.stylesheets),p.unsuspend){var k=p.unsuspend;p.unsuspend=null,k()}},6e4+f);0<p.imgBytes&&X_===0&&(X_=62500*Kue());var A=setTimeout(function(){if(p.waitingForImages=!1,p.count===0&&(p.stylesheets&&qx(p,p.stylesheets),p.unsuspend)){var k=p.unsuspend;p.unsuspend=null,k()}},(p.imgBytes>X_?50:800)+f);return p.unsuspend=b,function(){p.unsuspend=null,clearTimeout(E),clearTimeout(A)}}:null}function zx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qx(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var Ux=null;function qx(p,f){p.stylesheets=null,p.unsuspend!==null&&(p.count++,Ux=new Map,f.forEach(mde,p),Ux=null,zx.call(p))}function mde(p,f){if(!(f.state.loading&4)){var b=Ux.get(p);if(b)var E=b.get(null);else{b=new Map,Ux.set(p,b);for(var A=p.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<A.length;k++){var N=A[k];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(b.set(N.dataset.precedence,N),E=N)}E&&b.set(null,E)}A=f.instance,N=A.getAttribute("data-precedence"),k=b.get(N)||E,k===E&&b.set(null,A),b.set(N,A),this.count++,E=zx.bind(this),A.addEventListener("load",E),A.addEventListener("error",E),k?k.parentNode.insertBefore(A,k.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(A,p.firstChild)),f.state.loading|=4}}var Eb={$$typeof:C,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function hde(p,f,b,E,A,k,N,W,ae){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=On(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=On(0),this.hiddenUpdates=On(null),this.identifierPrefix=E,this.onUncaughtError=A,this.onCaughtError=k,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function K5(p,f,b,E,A,k,N,W,ae,be,_e,Me){return p=new hde(p,f,b,N,ae,be,_e,Me,W),f=1,k===!0&&(f|=24),k=Ti(3,null,null,f),p.current=k,k.stateNode=p,f=IA(),f.refCount++,p.pooledCache=f,f.refCount++,k.memoizedState={element:E,isDehydrated:b,cache:f},RA(k),p}function W5(p){return p?(p=vm,p):vm}function Y5(p,f,b,E,A,k){A=W5(A),E.context===null?E.context=A:E.pendingContext=A,E=fd(f),E.payload={element:b},k=k===void 0?null:k,k!==null&&(E.callback=k),b=md(p,E,f),b!==null&&(Ks(b,p,f),eb(b,p,f))}function X5(p,f){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var b=p.retryLane;p.retryLane=b!==0&&b<f?b:f}}function J_(p,f){X5(p,f),(p=p.alternate)&&X5(p,f)}function J5(p){if(p.tag===13||p.tag===31){var f=Gp(p,67108864);f!==null&&Ks(f,p,67108864),J_(p,67108864)}}function Q5(p){if(p.tag===13||p.tag===31){var f=ki();f=Yn(f);var b=Gp(p,f);b!==null&&Ks(b,p,f),J_(p,f)}}var Hx=!0;function gde(p,f,b,E){var A=U.T;U.T=null;var k=Y.p;try{Y.p=2,Q_(p,f,b,E)}finally{Y.p=k,U.T=A}}function bde(p,f,b,E){var A=U.T;U.T=null;var k=Y.p;try{Y.p=8,Q_(p,f,b,E)}finally{Y.p=k,U.T=A}}function Q_(p,f,b,E){if(Hx){var A=Z_(E);if(A===null)B_(p,f,E,$x,b),eB(p,E);else if(vde(A,p,f,b,E))E.stopPropagation();else if(eB(p,E),f&4&&-1<yde.indexOf(p)){for(;A!==null;){var k=yi(A);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var N=Po(k.pendingLanes);if(N!==0){var W=k;for(W.pendingLanes|=2,W.entangledLanes|=2;N;){var ae=1<<31-ln(N);W.entanglements[1]|=ae,N&=~ae}xc(k),(Vn&6)===0&&(Ax=Kn()+500,gb(0))}}break;case 31:case 13:W=Gp(k,2),W!==null&&Ks(W,k,2),kx(),J_(k,2)}if(k=Z_(E),k===null&&B_(p,f,E,$x,b),k===A)break;A=k}A!==null&&E.stopPropagation()}else B_(p,f,E,null,b)}}function Z_(p){return p=lt(p),e2(p)}var $x=null;function e2(p){if($x=null,p=Tr(p),p!==null){var f=a(p);if(f===null)p=null;else{var b=f.tag;if(b===13){if(p=s(f),p!==null)return p;p=null}else if(b===31){if(p=i(f),p!==null)return p;p=null}else if(b===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;p=null}else f!==p&&(p=null)}}return $x=p,null}function Z5(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Io()){case Te:return 2;case Ve:return 8;case yt:case jt:return 32;case fe:return 268435456;default:return 32}default:return 32}}var t2=!1,Cd=null,Ad=null,_d=null,Tb=new Map,wb=new Map,kd=[],yde="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function eB(p,f){switch(p){case"focusin":case"focusout":Cd=null;break;case"dragenter":case"dragleave":Ad=null;break;case"mouseover":case"mouseout":_d=null;break;case"pointerover":case"pointerout":Tb.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":wb.delete(f.pointerId)}}function Cb(p,f,b,E,A,k){return p===null||p.nativeEvent!==k?(p={blockedOn:f,domEventName:b,eventSystemFlags:E,nativeEvent:k,targetContainers:[A]},f!==null&&(f=yi(f),f!==null&&J5(f)),p):(p.eventSystemFlags|=E,f=p.targetContainers,A!==null&&f.indexOf(A)===-1&&f.push(A),p)}function vde(p,f,b,E,A){switch(f){case"focusin":return Cd=Cb(Cd,p,f,b,E,A),!0;case"dragenter":return Ad=Cb(Ad,p,f,b,E,A),!0;case"mouseover":return _d=Cb(_d,p,f,b,E,A),!0;case"pointerover":var k=A.pointerId;return Tb.set(k,Cb(Tb.get(k)||null,p,f,b,E,A)),!0;case"gotpointercapture":return k=A.pointerId,wb.set(k,Cb(wb.get(k)||null,p,f,b,E,A)),!0}return!1}function tB(p){var f=Tr(p.target);if(f!==null){var b=a(f);if(b!==null){if(f=b.tag,f===13){if(f=s(b),f!==null){p.blockedOn=f,pc(p.priority,function(){Q5(b)});return}}else if(f===31){if(f=i(b),f!==null){p.blockedOn=f,pc(p.priority,function(){Q5(b)});return}}else if(f===3&&b.stateNode.current.memoizedState.isDehydrated){p.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Vx(p){if(p.blockedOn!==null)return!1;for(var f=p.targetContainers;0<f.length;){var b=Z_(p.nativeEvent);if(b===null){b=p.nativeEvent;var E=new b.constructor(b.type,b);Ae=E,b.target.dispatchEvent(E),Ae=null}else return f=yi(b),f!==null&&J5(f),p.blockedOn=b,!1;f.shift()}return!0}function nB(p,f,b){Vx(p)&&b.delete(f)}function xde(){t2=!1,Cd!==null&&Vx(Cd)&&(Cd=null),Ad!==null&&Vx(Ad)&&(Ad=null),_d!==null&&Vx(_d)&&(_d=null),Tb.forEach(nB),wb.forEach(nB)}function Gx(p,f){p.blockedOn===f&&(p.blockedOn=null,t2||(t2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,xde)))}var Kx=null;function rB(p){Kx!==p&&(Kx=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Kx===p&&(Kx=null);for(var f=0;f<p.length;f+=3){var b=p[f],E=p[f+1],A=p[f+2];if(typeof E!="function"){if(e2(E||b)===null)continue;break}var k=yi(b);k!==null&&(p.splice(f,3),f-=3,ZA(k,{pending:!0,data:A,method:b.method,action:E},E,A))}}))}function Hm(p){function f(ae){return Gx(ae,p)}Cd!==null&&Gx(Cd,p),Ad!==null&&Gx(Ad,p),_d!==null&&Gx(_d,p),Tb.forEach(f),wb.forEach(f);for(var b=0;b<kd.length;b++){var E=kd[b];E.blockedOn===p&&(E.blockedOn=null)}for(;0<kd.length&&(b=kd[0],b.blockedOn===null);)tB(b),b.blockedOn===null&&kd.shift();if(b=(p.ownerDocument||p).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var A=b[E],k=b[E+1],N=A[Mo]||null;if(typeof k=="function")N||rB(b);else if(N){var W=null;if(k&&k.hasAttribute("formAction")){if(A=k,N=k[Mo]||null)W=N.formAction;else if(e2(A)!==null)continue}else W=N.action;typeof W=="function"?b[E+1]=W:(b.splice(E,3),E-=3),rB(b)}}}function oB(){function p(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(N){return A=N})},focusReset:"manual",scroll:"manual"})}function f(){A!==null&&(A(),A=null),E||setTimeout(b,20)}function b(){if(!E&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,A=null;return navigation.addEventListener("navigate",p),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(b,100),function(){E=!0,navigation.removeEventListener("navigate",p),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),A!==null&&(A(),A=null)}}}function n2(p){this._internalRoot=p}Wx.prototype.render=n2.prototype.render=function(p){var f=this._internalRoot;if(f===null)throw Error(r(409));var b=f.current,E=ki();Y5(b,E,p,f,null,null)},Wx.prototype.unmount=n2.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var f=p.containerInfo;Y5(p.current,2,null,p,null,null),kx(),f[nl]=null}};function Wx(p){this._internalRoot=p}Wx.prototype.unstable_scheduleHydration=function(p){if(p){var f=ja();p={blockedOn:null,target:p,priority:f};for(var b=0;b<kd.length&&f!==0&&f<kd[b].priority;b++);kd.splice(b,0,p),b===0&&tB(p)}};var aB=e.version;if(aB!=="19.2.0")throw Error(r(527,aB,"19.2.0"));Y.findDOMNode=function(p){var f=p._reactInternals;if(f===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=c(f),p=p!==null?d(p):null,p=p===null?null:p.stateNode,p};var Sde={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yx.isDisabled&&Yx.supportsFiber)try{Bt=Yx.inject(Sde),fn=Yx}catch{}}return _b.createRoot=function(p,f){if(!o(p))throw Error(r(299));var b=!1,E="",A=p6,k=f6,N=m6;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(k=f.onCaughtError),f.onRecoverableError!==void 0&&(N=f.onRecoverableError)),f=K5(p,1,!1,null,null,b,E,null,A,k,N,oB),p[nl]=f.current,j_(p),new n2(f)},_b.hydrateRoot=function(p,f,b){if(!o(p))throw Error(r(299));var E=!1,A="",k=p6,N=f6,W=m6,ae=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(A=b.identifierPrefix),b.onUncaughtError!==void 0&&(k=b.onUncaughtError),b.onCaughtError!==void 0&&(N=b.onCaughtError),b.onRecoverableError!==void 0&&(W=b.onRecoverableError),b.formState!==void 0&&(ae=b.formState)),f=K5(p,1,!0,f,b??null,E,A,ae,k,N,W,oB),f.context=W5(null),b=f.current,E=ki(),E=Yn(E),A=fd(E),A.callback=null,md(b,A,E),b=E,f.current.lanes=b,$n(f,b),xc(f),p[nl]=f.current,j_(p),new Wx(f)},_b.version="19.2.0",_b}var hB;function Rde(){if(hB)return a2.exports;hB=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),a2.exports=Mde(),a2.exports}var F$=Rde();const Dde=Wi(F$);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gB="popstate";function Nde(t={}){function e(o,a){let{pathname:s="/",search:i="",hash:l=""}=Jf(o.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),LO("",{pathname:s,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let s=o.document.querySelector("base"),i="";if(s&&s.getAttribute("href")){let l=o.location.href,c=l.indexOf("#");i=c===-1?l:l.slice(0,c)}return i+"#"+(typeof a=="string"?a:r0(a))}function r(o,a){di(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return jde(e,n,r,t)}function qr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function di(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Lde(){return Math.random().toString(36).substring(2,10)}function bB(t,e){return{usr:t.state,key:t.key,idx:e}}function LO(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jf(e):e,state:n,key:e&&e.key||r||Lde()}}function r0({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function jde(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,s=o.history,i="POP",l=null,c=d();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function d(){return(s.state||{idx:null}).idx}function u(){i="POP";let x=d(),S=x==null?null:x-c;c=x,l&&l({action:i,location:v.location,delta:S})}function m(x,S){i="PUSH";let T=LO(v.location,x,S);n&&n(T,x),c=d()+1;let C=bB(T,c),_=v.createHref(T);try{s.pushState(C,"",_)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;o.location.assign(_)}a&&l&&l({action:i,location:v.location,delta:1})}function h(x,S){i="REPLACE";let T=LO(v.location,x,S);n&&n(T,x),c=d();let C=bB(T,c),_=v.createHref(T);s.replaceState(C,"",_),a&&l&&l({action:i,location:v.location,delta:0})}function y(x){return Bde(x)}let v={get action(){return i},get location(){return t(o,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(gB,u),l=x,()=>{o.removeEventListener(gB,u),l=null}},createHref(x){return e(o,x)},createURL:y,encodeLocation(x){let S=y(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:h,go(x){return s.go(x)}};return v}function Bde(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),qr(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:r0(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function z$(t,e,n="/"){return Fde(t,e,n,!1)}function Fde(t,e,n,r){let o=typeof e=="string"?Jf(e):e,a=Hu(o.pathname||"/",n);if(a==null)return null;let s=U$(t);zde(s);let i=null;for(let l=0;i==null&&l<s.length;++l){let c=Jde(a);i=Yde(s[l],c,r)}return i}function U$(t,e=[],n=[],r="",o=!1){let a=(s,i,l=o,c)=>{let d={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;qr(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let u=Fu([r,d.relativePath]),m=n.concat(d);s.children&&s.children.length>0&&(qr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),U$(s.children,e,m,u,l)),!(s.path==null&&!s.index)&&e.push({path:u,score:Kde(u,s.index),routesMeta:m})};return t.forEach((s,i)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,i);else for(let c of q$(s.path))a(s,i,!0,c)}),e}function q$(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let s=q$(r.join("/")),i=[];return i.push(...s.map(l=>l===""?a:[a,l].join("/"))),o&&i.push(...s),i.map(l=>t.startsWith("/")&&l===""?"/":l)}function zde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Wde(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Ude=/^:[\w-]+$/,qde=3,Hde=2,$de=1,Vde=10,Gde=-2,yB=t=>t==="*";function Kde(t,e){let n=t.split("/"),r=n.length;return n.some(yB)&&(r+=Gde),e&&(r+=Hde),n.filter(o=>!yB(o)).reduce((o,a)=>o+(Ude.test(a)?qde:a===""?$de:Vde),r)}function Wde(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function Yde(t,e,n=!1){let{routesMeta:r}=t,o={},a="/",s=[];for(let i=0;i<r.length;++i){let l=r[i],c=i===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",u=oE({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=oE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(o,u.params),s.push({params:o,pathname:Fu([a,u.pathname]),pathnameBase:npe(Fu([a,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(a=Fu([a,u.pathnameBase]))}return s}function oE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Xde(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],s=a.replace(/(.)\/+$/,"$1"),i=o.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:u},m)=>{if(d==="*"){let y=i[m]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const h=i[m];return u&&!h?c[d]=void 0:c[d]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:t}}function Xde(t,e=!1,n=!0){di(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,i,l)=>(r.push({paramName:i,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function Jde(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return di(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Hu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Qde=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zde=t=>Qde.test(t);function epe(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Jf(t):t,a;if(n)if(Zde(n))a=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),di(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${n}`)}n.startsWith("/")?a=vB(n.substring(1),"/"):a=vB(n,e)}else a=e;return{pathname:a,search:rpe(r),hash:ope(o)}}function vB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function c2(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tpe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function oD(t){let e=tpe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function aD(t,e,n,r=!1){let o;typeof t=="string"?o=Jf(t):(o={...t},qr(!o.pathname||!o.pathname.includes("?"),c2("?","pathname","search",o)),qr(!o.pathname||!o.pathname.includes("#"),c2("#","pathname","hash",o)),qr(!o.search||!o.search.includes("#"),c2("#","search","hash",o)));let a=t===""||o.pathname==="",s=a?"/":o.pathname,i;if(s==null)i=n;else{let u=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),u-=1;o.pathname=m.join("/")}i=u>=0?e[u]:"/"}let l=epe(o,i),c=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Fu=t=>t.join("/").replace(/\/\/+/g,"/"),npe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rpe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ope=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ape(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var H$=["POST","PUT","PATCH","DELETE"];new Set(H$);var spe=["GET",...H$];new Set(spe);var mg=w.createContext(null);mg.displayName="DataRouter";var QT=w.createContext(null);QT.displayName="DataRouterState";w.createContext(!1);var $$=w.createContext({isTransitioning:!1});$$.displayName="ViewTransition";var ipe=w.createContext(new Map);ipe.displayName="Fetchers";var lpe=w.createContext(null);lpe.displayName="Await";var ic=w.createContext(null);ic.displayName="Navigation";var H0=w.createContext(null);H0.displayName="Location";var Yc=w.createContext({outlet:null,matches:[],isDataRoute:!1});Yc.displayName="Route";var sD=w.createContext(null);sD.displayName="RouteError";function cpe(t,{relative:e}={}){qr(hg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=w.useContext(ic),{hash:o,pathname:a,search:s}=$0(t,{relative:e}),i=a;return n!=="/"&&(i=a==="/"?n:Fu([n,a])),r.createHref({pathname:i,search:s,hash:o})}function hg(){return w.useContext(H0)!=null}function Yi(){return qr(hg(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(H0).location}var V$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function G$(t){w.useContext(ic).static||w.useLayoutEffect(t)}function Ep(){let{isDataRoute:t}=w.useContext(Yc);return t?Epe():upe()}function upe(){qr(hg(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(mg),{basename:e,navigator:n}=w.useContext(ic),{matches:r}=w.useContext(Yc),{pathname:o}=Yi(),a=JSON.stringify(oD(r)),s=w.useRef(!1);return G$(()=>{s.current=!0}),w.useCallback((l,c={})=>{if(di(s.current,V$),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=aD(l,JSON.parse(a),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Fu([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,a,o,t])}w.createContext(null);function $0(t,{relative:e}={}){let{matches:n}=w.useContext(Yc),{pathname:r}=Yi(),o=JSON.stringify(oD(n));return w.useMemo(()=>aD(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function dpe(t,e){return K$(t,e)}function K$(t,e,n,r,o){var T;qr(hg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=w.useContext(ic),{matches:s}=w.useContext(Yc),i=s[s.length-1],l=i?i.params:{},c=i?i.pathname:"/",d=i?i.pathnameBase:"/",u=i&&i.route;{let C=u&&u.path||"";W$(c,!u||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=Yi(),h;if(e){let C=typeof e=="string"?Jf(e):e;qr(d==="/"||((T=C.pathname)==null?void 0:T.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${C.pathname}" was given in the \`location\` prop.`),h=C}else h=m;let y=h.pathname||"/",v=y;if(d!=="/"){let C=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let x=z$(t,{pathname:v});di(u||x!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),di(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=gpe(x&&x.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Fu([d,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Fu([d,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),s,n,r,o);return e&&S?w.createElement(H0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},S):S}function ppe(){let t=Spe(),e=ape(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:a},"ErrorBoundary")," or"," ",w.createElement("code",{style:a},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:o},n):null,s)}var fpe=w.createElement(ppe,null),mpe=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?w.createElement(Yc.Provider,{value:this.props.routeContext},w.createElement(sD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hpe({routeContext:t,match:e,children:n}){let r=w.useContext(mg);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Yc.Provider,{value:t},n)}function gpe(t,e=[],n=null,r=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n==null?void 0:n.errors;if(s!=null){let d=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);qr(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let i=!1,l=-1;if(n)for(let d=0;d<a.length;d++){let u=a[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=d),u.route.id){let{loaderData:m,errors:h}=n,y=u.route.loader&&!m.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||y){i=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let c=n&&r?(d,u)=>{var m,h;r(d,{location:n.location,params:((h=(m=n.matches)==null?void 0:m[0])==null?void 0:h.params)??{},errorInfo:u})}:void 0;return a.reduceRight((d,u,m)=>{let h,y=!1,v=null,x=null;n&&(h=s&&u.route.id?s[u.route.id]:void 0,v=u.route.errorElement||fpe,i&&(l<0&&m===0?(W$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,x=null):l===m&&(y=!0,x=u.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,m+1)),T=()=>{let C;return h?C=v:y?C=x:u.route.Component?C=w.createElement(u.route.Component,null):u.route.element?C=u.route.element:C=d,w.createElement(hpe,{match:u,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:C})};return n&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?w.createElement(mpe,{location:n.location,revalidation:n.revalidation,component:v,error:h,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:c}):T()},null)}function iD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bpe(t){let e=w.useContext(mg);return qr(e,iD(t)),e}function ype(t){let e=w.useContext(QT);return qr(e,iD(t)),e}function vpe(t){let e=w.useContext(Yc);return qr(e,iD(t)),e}function lD(t){let e=vpe(t),n=e.matches[e.matches.length-1];return qr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function xpe(){return lD("useRouteId")}function Spe(){var r;let t=w.useContext(sD),e=ype("useRouteError"),n=lD("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Epe(){let{router:t}=bpe("useNavigate"),e=lD("useNavigate"),n=w.useRef(!1);return G$(()=>{n.current=!0}),w.useCallback(async(o,a={})=>{di(n.current,V$),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var xB={};function W$(t,e,n){!e&&!xB[t]&&(xB[t]=!0,di(!1,n))}w.memo(Tpe);function Tpe({routes:t,future:e,state:n,unstable_onError:r}){return K$(t,void 0,n,r,e)}function wpe({to:t,replace:e,state:n,relative:r}){qr(hg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(ic);di(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=w.useContext(Yc),{pathname:s}=Yi(),i=Ep(),l=aD(t,oD(a),s,r==="path"),c=JSON.stringify(l);return w.useEffect(()=>{i(JSON.parse(c),{replace:e,state:n,relative:r})},[i,c,r,e,n]),null}function je(t){qr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Cpe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){qr(!hg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),i=w.useMemo(()=>({basename:s,navigator:o,static:a,future:{}}),[s,o,a]);typeof n=="string"&&(n=Jf(n));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:m="default"}=n,h=w.useMemo(()=>{let y=Hu(l,s);return y==null?null:{location:{pathname:y,search:c,hash:d,state:u,key:m},navigationType:r}},[s,l,c,d,u,m,r]);return di(h!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:w.createElement(ic.Provider,{value:i},w.createElement(H0.Provider,{children:e,value:h}))}function Ape({children:t,location:e}){return dpe(jO(t),e)}function jO(t,e=[]){let n=[];return w.Children.forEach(t,(r,o)=>{if(!w.isValidElement(r))return;let a=[...e,o];if(r.type===w.Fragment){n.push.apply(n,jO(r.props.children,a));return}qr(r.type===je,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=jO(r.props.children,a)),n.push(s)}),n}var d1="get",p1="application/x-www-form-urlencoded";function ZT(t){return t!=null&&typeof t.tagName=="string"}function _pe(t){return ZT(t)&&t.tagName.toLowerCase()==="button"}function kpe(t){return ZT(t)&&t.tagName.toLowerCase()==="form"}function Ipe(t){return ZT(t)&&t.tagName.toLowerCase()==="input"}function Ppe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ope(t,e){return t.button===0&&(!e||e==="_self")&&!Ppe(t)}function BO(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function Mpe(t,e){let n=BO(t);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(a=>{n.append(o,a)})}),n}var Xx=null;function Rpe(){if(Xx===null)try{new FormData(document.createElement("form"),0),Xx=!1}catch{Xx=!0}return Xx}var Dpe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function u2(t){return t!=null&&!Dpe.has(t)?(di(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${p1}"`),null):t}function Npe(t,e){let n,r,o,a,s;if(kpe(t)){let i=t.getAttribute("action");r=i?Hu(i,e):null,n=t.getAttribute("method")||d1,o=u2(t.getAttribute("enctype"))||p1,a=new FormData(t)}else if(_pe(t)||Ipe(t)&&(t.type==="submit"||t.type==="image")){let i=t.form;if(i==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||i.getAttribute("action");if(r=l?Hu(l,e):null,n=t.getAttribute("formmethod")||i.getAttribute("method")||d1,o=u2(t.getAttribute("formenctype"))||u2(i.getAttribute("enctype"))||p1,a=new FormData(i,t),!Rpe()){let{name:c,type:d,value:u}=t;if(d==="image"){let m=c?`${c}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else c&&a.append(c,u)}}else{if(ZT(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=d1,r=null,o=p1,s=t}return a&&o==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lpe(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Hu(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function jpe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bpe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Fpe(t,e,n){let r=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let s=await jpe(a,n);return s.links?s.links():[]}return[]}));return Hpe(r.flat(1).filter(Bpe).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function SB(t,e,n,r,o,a){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,i=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,c)=>s(l,c)||i(l,c)):a==="data"?e.filter((l,c)=>{var u;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(s(l,c)||i(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((u=n[0])==null?void 0:u.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function zpe(t,e,{includeHydrateFallback:n}={}){return Upe(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function Upe(t){return[...new Set(t)]}function qpe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Hpe(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let a=JSON.stringify(qpe(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function Y$(){let t=w.useContext(mg);return cD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $pe(){let t=w.useContext(QT);return cD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var uD=w.createContext(void 0);uD.displayName="FrameworkContext";function X$(){let t=w.useContext(uD);return cD(t,"You must render this element inside a <HydratedRouter> element"),t}function Vpe(t,e){let n=w.useContext(uD),[r,o]=w.useState(!1),[a,s]=w.useState(!1),{onFocus:i,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=e,m=w.useRef(null);w.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let v=S=>{S.forEach(T=>{s(T.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return m.current&&x.observe(m.current),()=>{x.disconnect()}}},[t]),w.useEffect(()=>{if(r){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[r]);let h=()=>{o(!0)},y=()=>{o(!1),s(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:kb(i,h),onBlur:kb(l,y),onMouseEnter:kb(c,h),onMouseLeave:kb(d,y),onTouchStart:kb(u,h)}]:[!1,m,{}]}function kb(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Gpe({page:t,...e}){let{router:n}=Y$(),r=w.useMemo(()=>z$(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?w.createElement(Wpe,{page:t,matches:r,...e}):null}function Kpe(t){let{manifest:e,routeModules:n}=X$(),[r,o]=w.useState([]);return w.useEffect(()=>{let a=!1;return Fpe(t,e,n).then(s=>{a||o(s)}),()=>{a=!0}},[t,e,n]),r}function Wpe({page:t,matches:e,...n}){let r=Yi(),{manifest:o,routeModules:a}=X$(),{basename:s}=Y$(),{loaderData:i,matches:l}=$pe(),c=w.useMemo(()=>SB(t,e,l,o,r,"data"),[t,e,l,o,r]),d=w.useMemo(()=>SB(t,e,l,o,r,"assets"),[t,e,l,o,r]),u=w.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,v=!1;if(e.forEach(S=>{var C;let T=o.routes[S.route.id];!T||!T.hasLoader||(!c.some(_=>_.route.id===S.route.id)&&S.route.id in i&&((C=a[S.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?v=!0:y.add(S.route.id))}),y.size===0)return[];let x=Lpe(t,s,"data");return v&&y.size>0&&x.searchParams.set("_routes",e.filter(S=>y.has(S.route.id)).map(S=>S.route.id).join(",")),[x.pathname+x.search]},[s,i,r,o,c,e,t,a]),m=w.useMemo(()=>zpe(d,o),[d,o]),h=Kpe(d);return w.createElement(w.Fragment,null,u.map(y=>w.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),m.map(y=>w.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),h.map(({key:y,link:v})=>w.createElement("link",{key:y,nonce:n.nonce,...v})))}function Ype(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var J$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{J$&&(window.__reactRouterVersion="7.9.6")}catch{}function Xpe({basename:t,children:e,window:n}){let r=w.useRef();r.current==null&&(r.current=Nde({window:n,v5Compat:!0}));let o=r.current,[a,s]=w.useState({action:o.action,location:o.location}),i=w.useCallback(l=>{w.startTransition(()=>s(l))},[s]);return w.useLayoutEffect(()=>o.listen(i),[o,i]),w.createElement(Cpe,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o})}var Q$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ri=w.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:a,replace:s,state:i,target:l,to:c,preventScrollReset:d,viewTransition:u,...m},h){let{basename:y}=w.useContext(ic),v=typeof c=="string"&&Q$.test(c),x,S=!1;if(typeof c=="string"&&v&&(x=c,J$))try{let F=new URL(window.location.href),B=c.startsWith("//")?new URL(F.protocol+c):new URL(c),V=Hu(B.pathname,y);B.origin===F.origin&&V!=null?c=V+B.search+B.hash:S=!0}catch{di(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=cpe(c,{relative:o}),[C,_,I]=Vpe(r,m),P=efe(c,{replace:s,state:i,target:l,preventScrollReset:d,relative:o,viewTransition:u});function M(F){e&&e(F),F.defaultPrevented||P(F)}let D=w.createElement("a",{...m,...I,href:x||T,onClick:S||a?e:M,ref:Ype(h,_),target:l,"data-discover":!v&&n==="render"?"true":void 0});return C&&!v?w.createElement(w.Fragment,null,D,w.createElement(Gpe,{page:T})):D});ri.displayName="Link";var Jpe=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:a,to:s,viewTransition:i,children:l,...c},d){let u=$0(s,{relative:c.relative}),m=Yi(),h=w.useContext(QT),{navigator:y,basename:v}=w.useContext(ic),x=h!=null&&sfe(u)&&i===!0,S=y.encodeLocation?y.encodeLocation(u).pathname:u.pathname,T=m.pathname,C=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,S=S.toLowerCase()),C&&v&&(C=Hu(C,v)||C);const _=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let I=T===S||!o&&T.startsWith(S)&&T.charAt(_)==="/",P=C!=null&&(C===S||!o&&C.startsWith(S)&&C.charAt(S.length)==="/"),M={isActive:I,isPending:P,isTransitioning:x},D=I?e:void 0,F;typeof r=="function"?F=r(M):F=[r,I?"active":null,P?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let B=typeof a=="function"?a(M):a;return w.createElement(ri,{...c,"aria-current":D,className:F,ref:d,style:B,to:s,viewTransition:i},typeof l=="function"?l(M):l)});Jpe.displayName="NavLink";var Qpe=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:a,method:s=d1,action:i,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:u,...m},h)=>{let y=ofe(),v=afe(i,{relative:c}),x=s.toLowerCase()==="get"?"get":"post",S=typeof i=="string"&&Q$.test(i),T=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let _=C.nativeEvent.submitter,I=(_==null?void 0:_.getAttribute("formmethod"))||s;y(_||C.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:o,state:a,relative:c,preventScrollReset:d,viewTransition:u})};return w.createElement("form",{ref:h,method:x,action:v,onSubmit:r?l:T,...m,"data-discover":!S&&t==="render"?"true":void 0})});Qpe.displayName="Form";function Zpe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z$(t){let e=w.useContext(mg);return qr(e,Zpe(t)),e}function efe(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:s}={}){let i=Ep(),l=Yi(),c=$0(t,{relative:a});return w.useCallback(d=>{if(Ope(d,e)){d.preventDefault();let u=n!==void 0?n:r0(l)===r0(c);i(t,{replace:u,state:r,preventScrollReset:o,relative:a,viewTransition:s})}},[l,i,c,n,r,e,t,o,a,s])}function tfe(t){di(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(BO(t)),n=w.useRef(!1),r=Yi(),o=w.useMemo(()=>Mpe(r.search,n.current?null:e.current),[r.search]),a=Ep(),s=w.useCallback((i,l)=>{const c=BO(typeof i=="function"?i(new URLSearchParams(o)):i);n.current=!0,a("?"+c,l)},[a,o]);return[o,s]}var nfe=0,rfe=()=>`__${String(++nfe)}__`;function ofe(){let{router:t}=Z$("useSubmit"),{basename:e}=w.useContext(ic),n=xpe();return w.useCallback(async(r,o={})=>{let{action:a,method:s,encType:i,formData:l,body:c}=Npe(r,e);if(o.navigate===!1){let d=o.fetcherKey||rfe();await t.fetch(d,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||s,formEncType:o.encType||i,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||s,formEncType:o.encType||i,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function afe(t,{relative:e}={}){let{basename:n}=w.useContext(ic),r=w.useContext(Yc);qr(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...$0(t||".",{relative:e})},s=Yi();if(t==null){a.search=s.search;let i=new URLSearchParams(a.search),l=i.getAll("index");if(l.some(d=>d==="")){i.delete("index"),l.filter(u=>u).forEach(u=>i.append("index",u));let d=i.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Fu([n,a.pathname])),r0(a)}function sfe(t,{relative:e}={}){let n=w.useContext($$);qr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Z$("useViewTransitionState"),o=$0(t,{relative:e});if(!n.isTransitioning)return!1;let a=Hu(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Hu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return oE(o.pathname,s)!=null||oE(o.pathname,a)!=null}var Qf=B$();const ife=Wi(Qf);class ty extends Error{}ty.prototype.name="InvalidTokenError";function lfe(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function cfe(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return lfe(e)}catch{return atob(e)}}function ufe(t,e){if(typeof t!="string")throw new ty("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new ty(`Invalid token specified: missing part #${n+1}`);let o;try{o=cfe(r)}catch(a){throw new ty(`Invalid token specified: invalid base64 for part #${n+1} (${a.message})`)}try{return JSON.parse(o)}catch(a){throw new ty(`Invalid token specified: invalid json for part #${n+1} (${a.message})`)}}const eV=w.createContext(void 0),dfe=({children:t})=>{const[e,n]=w.useState(null),[r,o]=w.useState(!0);w.useEffect(()=>{try{const i=localStorage.getItem("authToken");if(i)if(ufe(i).exp*1e3>Date.now()){const c=localStorage.getItem("user");c&&n(JSON.parse(c))}else s()}catch(i){console.error("Erro ao processar token:",i),s()}finally{o(!1)}},[]);const a=(i,l)=>{localStorage.setItem("authToken",i),localStorage.setItem("user",JSON.stringify(l)),n(l)},s=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),n(null)};return w.createElement(eV.Provider,{value:{user:e,login:a,logout:s,loading:r}},!r&&t)},V0=()=>{const t=w.useContext(eV);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};let pfe={data:""},ffe=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||pfe},mfe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hfe=/\/\*[^]*?\*\/|  +/g,EB=/\n+/g,Wd=(t,e)=>{let n="",r="",o="";for(let a in t){let s=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+s+";":r+=a[1]=="f"?Wd(s,a):a+"{"+Wd(s,a[1]=="k"?"":e)+"}":typeof s=="object"?r+=Wd(s,e?e.replace(/([^,])+/g,i=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,i):i?i+" "+l:l)):a):s!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Wd.p?Wd.p(a,s):a+":"+s+";")}return n+(e&&o?e+"{"+o+"}":o)+r},Tu={},tV=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+tV(t[n]);return e}return t},gfe=(t,e,n,r,o)=>{let a=tV(t),s=Tu[a]||(Tu[a]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(a));if(!Tu[s]){let l=a!==t?t:(c=>{let d,u,m=[{}];for(;d=mfe.exec(c.replace(hfe,""));)d[4]?m.shift():d[3]?(u=d[3].replace(EB," ").trim(),m.unshift(m[0][u]=m[0][u]||{})):m[0][d[1]]=d[2].replace(EB," ").trim();return m[0]})(t);Tu[s]=Wd(o?{["@keyframes "+s]:l}:l,n?"":"."+s)}let i=n&&Tu.g?Tu.g:null;return n&&(Tu.g=Tu[s]),((l,c,d,u)=>{u?c.data=c.data.replace(u,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Tu[s],e,r,i),s},bfe=(t,e,n)=>t.reduce((r,o,a)=>{let s=e[a];if(s&&s.call){let i=s(n),l=i&&i.props&&i.props.className||/^go/.test(i)&&i;s=l?"."+l:i&&typeof i=="object"?i.props?"":Wd(i,""):i===!1?"":i}return r+o+(s??"")},"");function ew(t){let e=this||{},n=t.call?t(e.p):t;return gfe(n.unshift?n.raw?bfe(n,[].slice.call(arguments,1),e.p):n.reduce((r,o)=>Object.assign(r,o&&o.call?o(e.p):o),{}):n,ffe(e.target),e.g,e.o,e.k)}let nV,FO,zO;ew.bind({g:1});let $u=ew.bind({k:1});function yfe(t,e,n,r){Wd.p=e,nV=t,FO=n,zO=r}function Tp(t,e){let n=this||{};return function(){let r=arguments;function o(a,s){let i=Object.assign({},a),l=i.className||o.className;n.p=Object.assign({theme:FO&&FO()},i),n.o=/ *go\d+/.test(l),i.className=ew.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=i.as||t,delete i.as),zO&&c[0]&&zO(i),nV(c,i)}return o}}var vfe=t=>typeof t=="function",aE=(t,e)=>vfe(t)?t(e):t,xfe=(()=>{let t=0;return()=>(++t).toString()})(),rV=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Sfe=20,dD="default",oV=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:r}=e;return oV(t,{type:t.toasts.find(s=>s.id===r.id)?1:0,toast:r});case 3:let{toastId:o}=e;return{...t,toasts:t.toasts.map(s=>s.id===o||o===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+a}))}}},f1=[],aV={toasts:[],pausedAt:void 0,settings:{toastLimit:Sfe}},Lc={},sV=(t,e=dD)=>{Lc[e]=oV(Lc[e]||aV,t),f1.forEach(([n,r])=>{n===e&&r(Lc[e])})},iV=t=>Object.keys(Lc).forEach(e=>sV(t,e)),Efe=t=>Object.keys(Lc).find(e=>Lc[e].toasts.some(n=>n.id===t)),tw=(t=dD)=>e=>{sV(e,t)},Tfe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wfe=(t={},e=dD)=>{let[n,r]=w.useState(Lc[e]||aV),o=w.useRef(Lc[e]);w.useEffect(()=>(o.current!==Lc[e]&&r(Lc[e]),f1.push([e,r]),()=>{let s=f1.findIndex(([i])=>i===e);s>-1&&f1.splice(s,1)}),[e]);let a=n.toasts.map(s=>{var i,l,c;return{...t,...t[s.type],...s,removeDelay:s.removeDelay||((i=t[s.type])==null?void 0:i.removeDelay)||(t==null?void 0:t.removeDelay),duration:s.duration||((l=t[s.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||Tfe[s.type],style:{...t.style,...(c=t[s.type])==null?void 0:c.style,...s.style}}});return{...n,toasts:a}},Cfe=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||xfe()}),G0=t=>(e,n)=>{let r=Cfe(e,t,n);return tw(r.toasterId||Efe(r.id))({type:2,toast:r}),r.id},Qo=(t,e)=>G0("blank")(t,e);Qo.error=G0("error");Qo.success=G0("success");Qo.loading=G0("loading");Qo.custom=G0("custom");Qo.dismiss=(t,e)=>{let n={type:3,toastId:t};e?tw(e)(n):iV(n)};Qo.dismissAll=t=>Qo.dismiss(void 0,t);Qo.remove=(t,e)=>{let n={type:4,toastId:t};e?tw(e)(n):iV(n)};Qo.removeAll=t=>Qo.remove(void 0,t);Qo.promise=(t,e,n)=>{let r=Qo.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let a=e.success?aE(e.success,o):void 0;return a?Qo.success(a,{id:r,...n,...n==null?void 0:n.success}):Qo.dismiss(r),o}).catch(o=>{let a=e.error?aE(e.error,o):void 0;a?Qo.error(a,{id:r,...n,...n==null?void 0:n.error}):Qo.dismiss(r)}),t};var Afe=1e3,_fe=(t,e="default")=>{let{toasts:n,pausedAt:r}=wfe(t,e),o=w.useRef(new Map).current,a=w.useCallback((u,m=Afe)=>{if(o.has(u))return;let h=setTimeout(()=>{o.delete(u),s({type:4,toastId:u})},m);o.set(u,h)},[]);w.useEffect(()=>{if(r)return;let u=Date.now(),m=n.map(h=>{if(h.duration===1/0)return;let y=(h.duration||0)+h.pauseDuration-(u-h.createdAt);if(y<0){h.visible&&Qo.dismiss(h.id);return}return setTimeout(()=>Qo.dismiss(h.id,e),y)});return()=>{m.forEach(h=>h&&clearTimeout(h))}},[n,r,e]);let s=w.useCallback(tw(e),[e]),i=w.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=w.useCallback((u,m)=>{s({type:1,toast:{id:u,height:m}})},[s]),c=w.useCallback(()=>{r&&s({type:6,time:Date.now()})},[r,s]),d=w.useCallback((u,m)=>{let{reverseOrder:h=!1,gutter:y=8,defaultPosition:v}=m||{},x=n.filter(C=>(C.position||v)===(u.position||v)&&C.height),S=x.findIndex(C=>C.id===u.id),T=x.filter((C,_)=>_<S&&C.visible).length;return x.filter(C=>C.visible).slice(...h?[T+1]:[0,T]).reduce((C,_)=>C+(_.height||0)+y,0)},[n]);return w.useEffect(()=>{n.forEach(u=>{if(u.dismissed)a(u.id,u.removeDelay);else{let m=o.get(u.id);m&&(clearTimeout(m),o.delete(u.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:l,startPause:i,endPause:c,calculateOffset:d}}},kfe=$u`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ife=$u`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pfe=$u`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ofe=Tp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kfe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ife} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Pfe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Mfe=$u`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rfe=Tp("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Mfe} 1s linear infinite;
`,Dfe=$u`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Nfe=$u`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Lfe=Tp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Dfe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Nfe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,jfe=Tp("div")`
  position: absolute;
`,Bfe=Tp("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ffe=$u`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zfe=Tp("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ffe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ufe=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?w.createElement(zfe,null,e):e:n==="blank"?null:w.createElement(Bfe,null,w.createElement(Rfe,{...r}),n!=="loading"&&w.createElement(jfe,null,n==="error"?w.createElement(Ofe,{...r}):w.createElement(Lfe,{...r})))},qfe=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Hfe=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,$fe="0%{opacity:0;} 100%{opacity:1;}",Vfe="0%{opacity:1;} 100%{opacity:0;}",Gfe=Tp("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Kfe=Tp("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Wfe=(t,e)=>{let n=t.includes("top")?1:-1,[r,o]=rV()?[$fe,Vfe]:[qfe(n),Hfe(n)];return{animation:e?`${$u(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${$u(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Yfe=w.memo(({toast:t,position:e,style:n,children:r})=>{let o=t.height?Wfe(t.position||e||"top-center",t.visible):{opacity:0},a=w.createElement(Ufe,{toast:t}),s=w.createElement(Kfe,{...t.ariaProps},aE(t.message,t));return w.createElement(Gfe,{className:t.className,style:{...o,...n,...t.style}},typeof r=="function"?r({icon:a,message:s}):w.createElement(w.Fragment,null,a,s))});yfe(w.createElement);var Xfe=({id:t,className:e,style:n,onHeightUpdate:r,children:o})=>{let a=w.useCallback(s=>{if(s){let i=()=>{let l=s.getBoundingClientRect().height;r(t,l)};i(),new MutationObserver(i).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return w.createElement("div",{ref:a,className:e,style:n},o)},Jfe=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},o=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:rV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...o}},Qfe=ew`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jx=16,Zfe=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:o,toasterId:a,containerStyle:s,containerClassName:i})=>{let{toasts:l,handlers:c}=_fe(n,a);return w.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:Jx,left:Jx,right:Jx,bottom:Jx,pointerEvents:"none",...s},className:i,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||e,m=c.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),h=Jfe(u,m);return w.createElement(Xfe,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?Qfe:"",style:h},d.type==="custom"?aE(d.message,d):o?o(d):w.createElement(Yfe,{toast:d,position:u}))}))},eme=Qo,lV={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TB=bt.createContext&&bt.createContext(lV),tme=["attr","size","title"];function nme(t,e){if(t==null)return{};var n=rme(t,e),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)r=a[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sE(){return sE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sE.apply(this,arguments)}function wB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function iE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wB(Object(n),!0).forEach(function(r){ome(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ome(t,e,n){return e=ame(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ame(t){var e=sme(t,"string");return typeof e=="symbol"?e:e+""}function sme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cV(t){return t&&t.map((e,n)=>bt.createElement(e.tag,iE({key:n},e.attr),cV(e.child)))}function Da(t){return e=>bt.createElement(ime,sE({attr:iE({},t.attr)},e),cV(t.child))}function ime(t){var e=n=>{var{attr:r,size:o,title:a}=t,s=nme(t,tme),i=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),bt.createElement("svg",sE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:iE(iE({color:t.color||n.color},n.style),t.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),a&&bt.createElement("title",null,a),t.children)};return TB!==void 0?bt.createElement(TB.Consumer,null,n=>e(n)):e(lV)}function uV(t){return Da({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"},child:[]}]})(t)}function lme(t){return Da({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(t)}function dV(t){return Da({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 32l34.9 395.8L191.5 480l157.6-52.2L384 32H0zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1l-4.4 47.7z"},child:[]}]})(t)}function pV(t){return Da({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM243.8 381.4c0 43.6-25.6 63.5-62.9 63.5-33.7 0-53.2-17.4-63.2-38.5l34.3-20.7c6.6 11.7 12.6 21.6 27.1 21.6 13.8 0 22.6-5.4 22.6-26.5V237.7h42.1v143.7zm99.6 63.5c-39.1 0-64.4-18.6-76.7-43l34.3-19.8c9 14.7 20.8 25.6 41.5 25.6 17.4 0 28.6-8.7 28.6-20.8 0-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5 0-31.6 24.1-55.6 61.6-55.6 26.8 0 46 9.3 59.8 33.7L368 290c-7.2-12.9-15-18-27.1-18-12.3 0-20.1 7.8-20.1 18 0 12.6 7.8 17.7 25.9 25.6l10.5 4.5c35.8 15.3 55.9 31 55.9 66.2 0 37.8-29.8 58.6-69.7 58.6z"},child:[]}]})(t)}function cme(t){return Da({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 508c-6.7 0-13.5-1.8-19.4-5.2l-61.7-36.5c-9.2-5.2-4.7-7-1.7-8 12.3-4.3 14.8-5.2 27.9-12.7 1.4-.8 3.2-.5 4.6.4l47.4 28.1c1.7 1 4.1 1 5.7 0l184.7-106.6c1.7-1 2.8-3 2.8-5V149.3c0-2.1-1.1-4-2.9-5.1L226.8 37.7c-1.7-1-4-1-5.7 0L36.6 144.3c-1.8 1-2.9 3-2.9 5.1v213.1c0 2 1.1 4 2.9 4.9l50.6 29.2c27.5 13.7 44.3-2.4 44.3-18.7V167.5c0-3 2.4-5.3 5.4-5.3h23.4c2.9 0 5.4 2.3 5.4 5.3V378c0 36.6-20 57.6-54.7 57.6-10.7 0-19.1 0-42.5-11.6l-48.4-27.9C8.1 389.2.7 376.3.7 362.4V149.3c0-13.8 7.4-26.8 19.4-33.7L204.6 9c11.7-6.6 27.2-6.6 38.8 0l184.7 106.7c12 6.9 19.4 19.8 19.4 33.7v213.1c0 13.8-7.4 26.7-19.4 33.7L243.4 502.8c-5.9 3.4-12.6 5.2-19.4 5.2zm149.1-210.1c0-39.9-27-50.5-83.7-58-57.4-7.6-63.2-11.5-63.2-24.9 0-11.1 4.9-25.9 47.4-25.9 37.9 0 51.9 8.2 57.7 33.8.5 2.4 2.7 4.2 5.2 4.2h24c1.5 0 2.9-.6 3.9-1.7s1.5-2.6 1.4-4.1c-3.7-44.1-33-64.6-92.2-64.6-52.7 0-84.1 22.2-84.1 59.5 0 40.4 31.3 51.6 81.8 56.6 60.5 5.9 65.2 14.8 65.2 26.7 0 20.6-16.6 29.4-55.5 29.4-48.9 0-59.6-12.3-63.2-36.6-.4-2.6-2.6-4.5-5.3-4.5h-23.9c-3 0-5.3 2.4-5.3 5.3 0 31.1 16.9 68.2 97.8 68.2 58.4-.1 92-23.2 92-63.4z"},child:[]}]})(t)}function ume(t){return Da({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M418.2 177.2c-5.4-1.8-10.8-3.5-16.2-5.1.9-3.7 1.7-7.4 2.5-11.1 12.3-59.6 4.2-107.5-23.1-123.3-26.3-15.1-69.2.6-112.6 38.4-4.3 3.7-8.5 7.6-12.5 11.5-2.7-2.6-5.5-5.2-8.3-7.7-45.5-40.4-91.1-57.4-118.4-41.5-26.2 15.2-34 60.3-23 116.7 1.1 5.6 2.3 11.1 3.7 16.7-6.4 1.8-12.7 3.8-18.6 5.9C38.3 196.2 0 225.4 0 255.6c0 31.2 40.8 62.5 96.3 81.5 4.5 1.5 9 3 13.6 4.3-1.5 6-2.8 11.9-4 18-10.5 55.5-2.3 99.5 23.9 114.6 27 15.6 72.4-.4 116.6-39.1 3.5-3.1 7-6.3 10.5-9.7 4.4 4.3 9 8.4 13.6 12.4 42.8 36.8 85.1 51.7 111.2 36.6 27-15.6 35.8-62.9 24.4-120.5-.9-4.4-1.9-8.9-3-13.5 3.2-.9 6.3-1.9 9.4-2.9 57.7-19.1 99.5-50 99.5-81.7 0-30.3-39.4-59.7-93.8-78.4zM282.9 92.3c37.2-32.4 71.9-45.1 87.7-36 16.9 9.7 23.4 48.9 12.8 100.4-.7 3.4-1.4 6.7-2.3 10-22.2-5-44.7-8.6-67.3-10.6-13-18.6-27.2-36.4-42.6-53.1 3.9-3.7 7.7-7.2 11.7-10.7zM167.2 307.5c5.1 8.7 10.3 17.4 15.8 25.9-15.6-1.7-31.1-4.2-46.4-7.5 4.4-14.4 9.9-29.3 16.3-44.5 4.6 8.8 9.3 17.5 14.3 26.1zm-30.3-120.3c14.4-3.2 29.7-5.8 45.6-7.8-5.3 8.3-10.5 16.8-15.4 25.4-4.9 8.5-9.7 17.2-14.2 26-6.3-14.9-11.6-29.5-16-43.6zm27.4 68.9c6.6-13.8 13.8-27.3 21.4-40.6s15.8-26.2 24.4-38.9c15-1.1 30.3-1.7 45.9-1.7s31 .6 45.9 1.7c8.5 12.6 16.6 25.5 24.3 38.7s14.9 26.7 21.7 40.4c-6.7 13.8-13.9 27.4-21.6 40.8-7.6 13.3-15.7 26.2-24.2 39-14.9 1.1-30.4 1.6-46.1 1.6s-30.9-.5-45.6-1.4c-8.7-12.7-16.9-25.7-24.6-39s-14.8-26.8-21.5-40.6zm180.6 51.2c5.1-8.8 9.9-17.7 14.6-26.7 6.4 14.5 12 29.2 16.9 44.3-15.5 3.5-31.2 6.2-47 8 5.4-8.4 10.5-17 15.5-25.6zm14.4-76.5c-4.7-8.8-9.5-17.6-14.5-26.2-4.9-8.5-10-16.9-15.3-25.2 16.1 2 31.5 4.7 45.9 8-4.6 14.8-10 29.2-16.1 43.4zM256.2 118.3c10.5 11.4 20.4 23.4 29.6 35.8-19.8-.9-39.7-.9-59.5 0 9.8-12.9 19.9-24.9 29.9-35.8zM140.2 57c16.8-9.8 54.1 4.2 93.4 39 2.5 2.2 5 4.6 7.6 7-15.5 16.7-29.8 34.5-42.9 53.1-22.6 2-45 5.5-67.2 10.4-1.3-5.1-2.4-10.3-3.5-15.5-9.4-48.4-3.2-84.9 12.6-94zm-24.5 263.6c-4.2-1.2-8.3-2.5-12.4-3.9-21.3-6.7-45.5-17.3-63-31.2-10.1-7-16.9-17.8-18.8-29.9 0-18.3 31.6-41.7 77.2-57.6 5.7-2 11.5-3.8 17.3-5.5 6.8 21.7 15 43 24.5 63.6-9.6 20.9-17.9 42.5-24.8 64.5zm116.6 98c-16.5 15.1-35.6 27.1-56.4 35.3-11.1 5.3-23.9 5.8-35.3 1.3-15.9-9.2-22.5-44.5-13.5-92 1.1-5.6 2.3-11.2 3.7-16.7 22.4 4.8 45 8.1 67.9 9.8 13.2 18.7 27.7 36.6 43.2 53.4-3.2 3.1-6.4 6.1-9.6 8.9zm24.5-24.3c-10.2-11-20.4-23.2-30.3-36.3 9.6.4 19.5.6 29.5.6 10.3 0 20.4-.2 30.4-.7-9.2 12.7-19.1 24.8-29.6 36.4zm130.7 30c-.9 12.2-6.9 23.6-16.5 31.3-15.9 9.2-49.8-2.8-86.4-34.2-4.2-3.6-8.4-7.5-12.7-11.5 15.3-16.9 29.4-34.8 42.2-53.6 22.9-1.9 45.7-5.4 68.2-10.5 1 4.1 1.9 8.2 2.7 12.2 4.9 21.6 5.7 44.1 2.5 66.3zm18.2-107.5c-2.8.9-5.6 1.8-8.5 2.6-7-21.8-15.6-43.1-25.5-63.8 9.6-20.4 17.7-41.4 24.5-62.9 5.2 1.5 10.2 3.1 15 4.7 46.6 16 79.3 39.8 79.3 58 0 19.6-34.9 44.9-84.8 61.4zm-149.7-15c25.3 0 45.8-20.5 45.8-45.8s-20.5-45.8-45.8-45.8c-25.3 0-45.8 20.5-45.8 45.8s20.5 45.8 45.8 45.8z"},child:[]}]})(t)}function dme(t){return Da({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function fV(t){return Da({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function pme(t){return Da({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function fme(t){return Da({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(t)}function mme(t){return Da({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"},child:[]}]})(t)}function hme(t){return Da({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(t)}function gme(t){return Da({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(t)}function bme(t){return Da({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function yme(t){return Da({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function d2(t){return Da({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(t)}const CB=({to:t,children:e,currentPath:n,onClick:r,mobile:o=!1})=>{const a=n===t;return g.jsxs(ri,{to:t,onClick:r,className:`relative px-1 py-2 font-medium transition-all duration-300 ${o?"text-3xl":"text-lg"} ${a?"text-sky-400":"text-gray-300 hover:text-white"}`,children:[e,a&&g.jsx("span",{className:"absolute left-0 bottom-0 w-full h-0.5 bg-gradient-to-r from-sky-400 to-blue-500 rounded-full"})]})},vme=()=>{const[t,e]=w.useState(!1),[n,r]=w.useState(!1),o=Yi(),a=w.useRef(null),{user:s,logout:i}=V0(),l=Ep();w.useEffect(()=>{const v=()=>r(window.scrollY>20);return window.addEventListener("scroll",v,{passive:!0}),()=>window.removeEventListener("scroll",v)},[]),w.useEffect(()=>{if(t){a.current=window.scrollY||document.documentElement.scrollTop||0;const v=window.innerWidth-document.documentElement.clientWidth;v>0&&(document.body.style.paddingRight=`${v}px`),document.body.style.position="fixed",document.body.style.top=`-${a.current}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden"}else{const v=a.current??0;document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",document.body.style.paddingRight="",window.scrollTo(0,v),a.current=null}return()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",document.body.style.paddingRight=""}},[t]),w.useEffect(()=>{e(!1)},[o.pathname]);const c=()=>e(v=>!v),d=()=>e(!1),u=()=>{d(),i(),l("/login")},h=o.pathname==="/"&&!n?"bg-transparent":"bg-gray-900/80 backdrop-blur-sm shadow-lg",y=()=>{window.scrollTo({top:0,behavior:"smooth"})};return g.jsx("header",{className:`fixed w-full top-0 z-50 transition-all duration-300 ${h} ${n?"py-3":"py-5"}`,children:g.jsx("div",{className:"container mx-auto px-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs(ri,{to:"/",onClick:y,className:"flex items-center gap-2 z-50",children:[g.jsxs("div",{className:"flex items-center gap-1 bg-gray-800 p-2 rounded-lg shadow-inner",children:[g.jsx(dV,{className:"text-orange-500",size:20}),g.jsx(uV,{className:"text-blue-500",size:20}),g.jsx(pV,{className:"text-yellow-400",size:20})]}),g.jsxs("span",{className:"text-xl font-bold text-white",children:["Frontend ",g.jsx("span",{className:"text-sky-400",children:"Essencial"})]})]}),g.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[[{path:"/",label:"Incio"},{path:"/summary",label:"Sumrio"},{path:"/ranking",label:"Ranking"},{path:"/sobre",label:"Sobre"}].map(v=>g.jsx(CB,{to:v.path,currentPath:o.pathname,children:v.label},v.path)),g.jsx("div",{className:"w-px h-6 bg-gray-600"})," ",s?g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("span",{className:"text-white",children:["Ol, ",g.jsx("strong",{className:"font-semibold",children:s.username})]}),g.jsx("button",{onClick:u,className:"bg-red-600/80 hover:bg-red-700 text-white font-bold py-2 px-3 rounded-md text-sm transition",children:"Sair"})]}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(ri,{to:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded-md text-sm transition",children:"Login"}),g.jsx(ri,{to:"/register",className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded-md text-sm transition",children:"Registrar"})]})]}),g.jsx("button",{className:"md:hidden text-white z-50",onClick:c,"aria-label":"Abrir menu",children:t?g.jsx(yme,{size:24}):g.jsx(pme,{size:24})}),t&&g.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 w-full flex flex-col items-center justify-center space-y-12",style:{height:"100dvh",background:"rgba(17,24,39,0.95)",zIndex:40},children:[g.jsx("nav",{className:"flex flex-col items-center space-y-10",children:[{path:"/",label:"Incio"},{path:"/summary",label:"Sumrio"},{path:"/ranking",label:"Ranking"},{path:"/sobre",label:"Sobre"}].map(v=>g.jsx(CB,{to:v.path,currentPath:o.pathname,onClick:d,mobile:!0,children:v.label},v.path))}),g.jsx("div",{className:"w-24 h-px bg-gray-600"})," ",g.jsx("div",{className:"flex flex-col items-center gap-6",children:s?g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"text-white text-xl",children:["Ol, ",g.jsx("strong",{className:"font-semibold",children:s.username})]}),g.jsx("button",{onClick:u,className:"bg-red-600/80 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-md text-lg transition",children:"Sair"})]}):g.jsxs(g.Fragment,{children:[g.jsx(ri,{to:"/login",onClick:d,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-md text-lg transition",children:"Login"}),g.jsx(ri,{to:"/register",onClick:d,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-md text-lg transition",children:"Registrar"})]})})]})]})})})},Ue=({children:t})=>{const{user:e,loading:n}=V0(),r=Yi();return n?null:e?g.jsx(g.Fragment,{children:t}):g.jsx(wpe,{to:"/login",state:{from:r},replace:!0})},xme=`# Sumrio Completo do Curso: Trade Front-End Essencial\r
\r
Este documento serve como o ndice principal para todo o contedo do curso de desenvolvimento Front-End, cobrindo HTML, CSS, JavaScript, TypeScript e React.\r
\r
---\r
\r
## Mdulo 1: Fundamentos do Desenvolvimento Web e HTML Essencial\r
\r
O ponto de partida para qualquer desenvolvedor web. Aprenda a estruturar pginas web de forma semntica e profissional.\r
\r
*   [**Aula 1:** Introduo ao Desenvolvimento Web](#/html/introducao)\r
*   [**Aula 2:** Seu Primeiro Documento HTML](#/html/primeiro-documento)\r
*   [**Aula 3:** Estruturando Contedo com HTML (Texto e Listas)](#/html/estruturando-conteudo)\r
*   [**Aula 4:** Links e Imagens](#/html/links-e-imagens)\r
*   [**Aula 5:** HTML Semntico - A Base de um Site Profissional](#/html/semantico)\r
*   [**Projeto Prtico:** Criar a Estrutura de uma Pgina de Blog](#/html/projeto-blog)\r
\r
---\r
\r
## Mdulo 2: Estilizando com CSS e Layouts Modernos com Flexbox\r
\r
D vida e estilo s suas pginas. Aprenda os fundamentos do CSS e domine o Flexbox, uma das ferramentas de layout mais requisitadas pelo mercado.\r
\r
*   [**Aula 1:** Introduo ao CSS](#/css/introducao)\r
*   [**Aula 2:** Seletores Bsicos e Combinadores](#/css/seletores)\r
*   [**Aula 3:** O Box Model](#/css/box-model)\r
*   [**Aula 4:** Cores e Unidades de Medida](#/css/cores-e-unidades)\r
*   [**Aula 5:** Trabalhando com Textos e Fontes](#/css/textos)\r
*   [**Aula 6:** Introduo ao Flexbox](#/css/intro-flexbox)\r
*   [**Aula 7:** Flexbox na Prtica (Propriedades do Container)](#/css/flexbox-container)\r
*   [**Aula 8:** Flexbox na Prtica (Propriedades dos Itens)](#/css/flexbox-items)\r
*   [**Projeto Prtico:** Estilizando a Pgina de Blog com CSS e Flexbox](#/css/projeto-blog)\r
\r
---\r
\r
## Mdulo 3: JavaScript - Fundamentos e Manipulao do DOM\r
\r
Adicione interatividade e dinamismo s suas aplicaes. Aprenda a lgica de programao com JavaScript e como manipular o HTML e CSS em tempo real.\r
\r
*   [**Aula 1:** Introduo ao JavaScript](#/js/introducao)\r
*   [**Aula 2:** Variveis, Constantes e Tipos de Dados](#/js/variaveis)\r
*   [**Aula 3:** Operadores Bsicos (Aritmticos, Comparao, Lgicos)](#/js/operadores)\r
*   [**Aula 4:** Strings e Seus Mtodos](#/js/strings)\r
*   [**Aula 5:** Arrays e Mtodos Essenciais](#/js/arrays)\r
*   [**Aula 6:** Funes (Declaraes, Expresses e Arrow Functions)](#/js/funcoes)\r
*   [**Aula 7:** Objetos Literais](#/js/objetos)\r
*   [**Aula 8:** Condicionais (if, else, switch)](#/js/condicionais)\r
*   [**Aula 9:** Loops (for, while, for...of)](#/js/loops)\r
*   [**Aula 10:** Introduo ao DOM (Document Object Model)](#/js/intro-dom)\r
*   [**Aula 11:** Selecionando Elementos do DOM](#/js/selecionando-elementos)\r
*   [**Aula 12:** Manipulando Estilos e Classes](#/js/manipulando-estilos)\r
*   [**Aula 13:** Eventos e Event Listeners](#/js/eventos)\r
*   [**Aula 14:** O Objeto de Evento (\`event.target\`, \`preventDefault\`)](#/js/eventos-pratica)\r
*   [**Aula 15:** Criando e Removendo Elementos do DOM](#/js/criando-removendo-elementos)\r
*   [**Aula 16:** Arrow Functions (Funes de Seta)](#/js/arrow-functions)\r
*   [**Aula 17:** Desestruturao (Destructuring)](#/js/desestruturacao)\r
*   [**Aula 18:** Operadores Rest e Spread](#/js/rest-spread)\r
*   [**Aula 19:** Mtodos de Array: \`map\`, \`filter\`, \`reduce\`](#/js/map-filter-reduce)\r
*   [**Aula 20:** Classes](#/js/classes)\r
*   [**Aula 21:** Hoisting (Iamento)](#/js/hoisting)\r
*   [**Aula 22:** Callbacks](#/js/callbacks)\r
*   [**Aula 23:** Promises (Promessas)](#/js/promises)\r
*   [**Aula 24:** Fetch API](#/js/fetch)\r
*   [**Aula 25:** Async/Await](#/js/async-await)\r
*   [**Aula 26:** Mdulos (ES Modules)](#/js/modulos)\r
*   [**Projeto Prtico:** Lista de Tarefas (To-Do List) Interativa](#/js/projeto-lista-tarefas)\r
\r
---\r
\r
## Mdulo 4: Arquitetura, Estruturas de Dados e Algoritmos\r
\r
Eleve seu conhecimento de "construtor de pginas" para "engenheiro de software", preparando-o para resolver problemas complexos e construir aplicaes escalveis.\r
\r
*   [**Aula 1:** Introduo  Complexidade de Algoritmos](#/algoritmos/introducao)\r
*   [**Aula 2:** Estruturas de Dados Lineares](#/algoritmos/estruturas-lineares)\r
*   [**Aula 3:** Estruturas de Dados No Lineares](#/algoritmos/estruturas-nao-lineares)\r
*   [**Aula 4:** Algoritmos de Busca e Ordenao](#/algoritmos/busca-e-ordenacao)\r
*   [**Aula 5:** Princpios de Arquitetura de Software](#/algoritmos/arquitetura)\r
*   [**Projeto Prtico:** Refatorando a Lista de Tarefas](#/algoritmos/projeto-algoritmos)\r
\r
---\r
\r
## Mdulo 5: TypeScript - Tipagem Segura e Produtividade\r
\r
Melhore sua produtividade e evite erros comuns com TypeScript, adicionando tipagem esttica ao JavaScript.\r
\r
*   [**Aula 1:** Introduo ao TypeScript](#/ts/introducao)\r
*   [**Aula 2:** Tipos Primitivos e Inferncia de Tipos](#/ts/tipos-basicos)\r
*   [**Aula 3:** Funes Tipadas e Arrow Functions](#/ts/funcoes)\r
*   [**Aula 4:** Objetos, Interfaces e Type Aliases](#/ts/interfaces)\r
*   [**Aula 5:** Generics - Cdigo Reutilizvel](#/ts/generics)\r
*   [**Aula 6:** Classes e Herana](#/ts/classes)\r
*   [**Aula 7:** Mdulos e Organizao de Cdigo](#/ts/modulos)\r
*   [**Projeto Prtico:** Refatorando a Lista de Tarefas com TypeScript](#/ts/projeto-pratico)\r
\r
---\r
\r
## Mdulo 6: React com TypeScript - Construindo Interfaces Modernas\r
\r
Aprenda a biblioteca de UI mais popular do mercado. Crie componentes reutilizveis, gerencie o estado da aplicao e construa SPAs (Single Page Applications) robustas com React e TypeScript.\r
\r
*   [**Aula 1:** Introduo ao React com TypeScript e Vite](#/react/introducao)\r
*   [**Aula 2:** Fundamentos do React (Componentes, Props, State)](#/react/fundamentos)\r
*   [**Aula 3:** Hooks Essenciais (useState, useEffect, useContext)](#/react/hooks)\r
*   [**Aula 4:** Roteamento com React Router](#/react/roteamento)\r
*   [**Aula 5:** Gerenciamento de Estado Avanado](#/react/gerenciamento-estado)\r
*   [**Aula 6:** Consumindo APIs com React Query/SWR](#/react/consumo-api)\r
*   [**Aula 7:** Estilizao de Componentes (Styled Components/Tailwind)](#/react/estilizacao)\r
*   [**Aula 8:** Testando Aplicaes React](#/react/testes)\r
*   [**Aula 9:** Desenvolvendo e Fazendo Build com Vite](#/react/build-vite)\r
*   [**Aula 10:** Projeto Prtico: TodoList com TypeScript](#/react/projeto-pratico)\r
*   [**Aula 11:** Dicas para Conseguir uma Vaga de Desenvolvedor React](#/react/dicas-vaga)\r
\r
---\r
\r
## Mdulo 7: Node.js - Backend para Frontend\r
Aprenda a construir servidores, APIs e conectar o frontend ao backend.\r
- [Aula 1: Introduo ao Node.js](#/node/introducao)  \r
- [Aula 2: Fundamentos do Node.js](#/node/fundamentos)  \r
- [Aula 3: Frameworks Populares (Express, Fastify, NestJS)](#/node/frameworks)  \r
- [Aula 4: Integrao com Banco de Dados](#/node/banco-de-dados)  \r
- [Aula 5: Boas Prticas e Arquitetura de Projetos](#/node/boas-praticas)  \r
- [Aula 6: Deploy de Aplicaes Node.js](#/node/deploy)\r
\r
---\r
`;function AB(t){const e=[],n=String(t||"");let r=n.indexOf(","),o=0,a=!1;for(;!a;){r===-1&&(r=n.length,a=!0);const s=n.slice(o,r).trim();(s||!a)&&e.push(s),o=r+1,r=n.indexOf(",",o)}return e}function mV(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Sme=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Eme=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Tme={};function _B(t,e){return(Tme.jsx?Eme:Sme).test(t)}const wme=/[ \t\n\f\r]/g;function Cme(t){return typeof t=="object"?t.type==="text"?kB(t.value):!1:kB(t)}function kB(t){return t.replace(wme,"")===""}let K0=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};K0.prototype.normal={};K0.prototype.property={};K0.prototype.space=void 0;function hV(t,e){const n={},r={};for(const o of t)Object.assign(n,o.property),Object.assign(r,o.normal);return new K0(n,r,e)}function o0(t){return t.toLowerCase()}let fi=class{constructor(e,n){this.attribute=n,this.property=e}};fi.prototype.attribute="";fi.prototype.booleanish=!1;fi.prototype.boolean=!1;fi.prototype.commaOrSpaceSeparated=!1;fi.prototype.commaSeparated=!1;fi.prototype.defined=!1;fi.prototype.mustUseProperty=!1;fi.prototype.number=!1;fi.prototype.overloadedBoolean=!1;fi.prototype.property="";fi.prototype.spaceSeparated=!1;fi.prototype.space=void 0;let Ame=0;const on=Zf(),zo=Zf(),UO=Zf(),Ye=Zf(),vr=Zf(),Ph=Zf(),Pi=Zf();function Zf(){return 2**++Ame}const qO=Object.freeze(Object.defineProperty({__proto__:null,boolean:on,booleanish:zo,commaOrSpaceSeparated:Pi,commaSeparated:Ph,number:Ye,overloadedBoolean:UO,spaceSeparated:vr},Symbol.toStringTag,{value:"Module"})),p2=Object.keys(qO);let pD=class extends fi{constructor(e,n,r,o){let a=-1;if(super(e,n),IB(this,"space",o),typeof r=="number")for(;++a<p2.length;){const s=p2[a];IB(this,p2[a],(r&qO[s])===qO[s])}}};pD.prototype.defined=!0;function IB(t,e,n){n&&(t[e]=n)}function gg(t){const e={},n={};for(const[r,o]of Object.entries(t.properties)){const a=new pD(r,t.transform(t.attributes||{},r),o,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[o0(r)]=r,n[o0(a.attribute)]=r}return new K0(e,n,t.space)}const gV=gg({properties:{ariaActiveDescendant:null,ariaAtomic:zo,ariaAutoComplete:null,ariaBusy:zo,ariaChecked:zo,ariaColCount:Ye,ariaColIndex:Ye,ariaColSpan:Ye,ariaControls:vr,ariaCurrent:null,ariaDescribedBy:vr,ariaDetails:null,ariaDisabled:zo,ariaDropEffect:vr,ariaErrorMessage:null,ariaExpanded:zo,ariaFlowTo:vr,ariaGrabbed:zo,ariaHasPopup:null,ariaHidden:zo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:vr,ariaLevel:Ye,ariaLive:null,ariaModal:zo,ariaMultiLine:zo,ariaMultiSelectable:zo,ariaOrientation:null,ariaOwns:vr,ariaPlaceholder:null,ariaPosInSet:Ye,ariaPressed:zo,ariaReadOnly:zo,ariaRelevant:null,ariaRequired:zo,ariaRoleDescription:vr,ariaRowCount:Ye,ariaRowIndex:Ye,ariaRowSpan:Ye,ariaSelected:zo,ariaSetSize:Ye,ariaSort:null,ariaValueMax:Ye,ariaValueMin:Ye,ariaValueNow:Ye,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function bV(t,e){return e in t?t[e]:e}function yV(t,e){return bV(t,e.toLowerCase())}const _me=gg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ph,acceptCharset:vr,accessKey:vr,action:null,allow:null,allowFullScreen:on,allowPaymentRequest:on,allowUserMedia:on,alt:null,as:null,async:on,autoCapitalize:null,autoComplete:vr,autoFocus:on,autoPlay:on,blocking:vr,capture:null,charSet:null,checked:on,cite:null,className:vr,cols:Ye,colSpan:null,content:null,contentEditable:zo,controls:on,controlsList:vr,coords:Ye|Ph,crossOrigin:null,data:null,dateTime:null,decoding:null,default:on,defer:on,dir:null,dirName:null,disabled:on,download:UO,draggable:zo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:on,formTarget:null,headers:vr,height:Ye,hidden:UO,high:Ye,href:null,hrefLang:null,htmlFor:vr,httpEquiv:vr,id:null,imageSizes:null,imageSrcSet:null,inert:on,inputMode:null,integrity:null,is:null,isMap:on,itemId:null,itemProp:vr,itemRef:vr,itemScope:on,itemType:vr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:on,low:Ye,manifest:null,max:null,maxLength:Ye,media:null,method:null,min:null,minLength:Ye,multiple:on,muted:on,name:null,nonce:null,noModule:on,noValidate:on,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:on,optimum:Ye,pattern:null,ping:vr,placeholder:null,playsInline:on,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:on,referrerPolicy:null,rel:vr,required:on,reversed:on,rows:Ye,rowSpan:Ye,sandbox:vr,scope:null,scoped:on,seamless:on,selected:on,shadowRootClonable:on,shadowRootDelegatesFocus:on,shadowRootMode:null,shape:null,size:Ye,sizes:null,slot:null,span:Ye,spellCheck:zo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ye,step:null,style:null,tabIndex:Ye,target:null,title:null,translate:null,type:null,typeMustMatch:on,useMap:null,value:zo,width:Ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:vr,axis:null,background:null,bgColor:null,border:Ye,borderColor:null,bottomMargin:Ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:on,declare:on,event:null,face:null,frame:null,frameBorder:null,hSpace:Ye,leftMargin:Ye,link:null,longDesc:null,lowSrc:null,marginHeight:Ye,marginWidth:Ye,noResize:on,noHref:on,noShade:on,noWrap:on,object:null,profile:null,prompt:null,rev:null,rightMargin:Ye,rules:null,scheme:null,scrolling:zo,standby:null,summary:null,text:null,topMargin:Ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:on,disableRemotePlayback:on,prefix:null,property:null,results:Ye,security:null,unselectable:null},space:"html",transform:yV}),kme=gg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Pi,accentHeight:Ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ye,amplitude:Ye,arabicForm:null,ascent:Ye,attributeName:null,attributeType:null,azimuth:Ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ye,by:null,calcMode:null,capHeight:Ye,className:vr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ye,diffuseConstant:Ye,direction:null,display:null,dur:null,divisor:Ye,dominantBaseline:null,download:on,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ye,enableBackground:null,end:null,event:null,exponent:Ye,externalResourcesRequired:null,fill:null,fillOpacity:Ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ph,g2:Ph,glyphName:Ph,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ye,horizOriginX:Ye,horizOriginY:Ye,id:null,ideographic:Ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ye,k:Ye,k1:Ye,k2:Ye,k3:Ye,k4:Ye,kernelMatrix:Pi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ye,overlineThickness:Ye,paintOrder:null,panose1:null,path:null,pathLength:Ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:vr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ye,pointsAtY:Ye,pointsAtZ:Ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Pi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Pi,rev:Pi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Pi,requiredFeatures:Pi,requiredFonts:Pi,requiredFormats:Pi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ye,specularExponent:Ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ye,strikethroughThickness:Ye,string:null,stroke:null,strokeDashArray:Pi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ye,strokeOpacity:Ye,strokeWidth:null,style:null,surfaceScale:Ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Pi,tabIndex:Ye,tableValues:null,target:null,targetX:Ye,targetY:Ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Pi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ye,underlineThickness:Ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ye,values:null,vAlphabetic:Ye,vMathematical:Ye,vectorEffect:null,vHanging:Ye,vIdeographic:Ye,version:null,vertAdvY:Ye,vertOriginX:Ye,vertOriginY:Ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:bV}),vV=gg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),xV=gg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:yV}),SV=gg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Ime={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Pme=/[A-Z]/g,PB=/-[a-z]/g,Ome=/^data[-\w.:]+$/i;function fD(t,e){const n=o0(e);let r=e,o=fi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Ome.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(PB,Rme);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!PB.test(a)){let s=a.replace(Pme,Mme);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}o=pD}return new o(r,e)}function Mme(t){return"-"+t.toLowerCase()}function Rme(t){return t.charAt(1).toUpperCase()}const nw=hV([gV,_me,vV,xV,SV],"html"),bg=hV([gV,kme,vV,xV,SV],"svg");function OB(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function EV(t){return t.join(" ").trim()}var $m={},f2,MB;function Dme(){if(MB)return f2;MB=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,i=/^\s+|\s+$/g,l=`
`,c="/",d="*",u="",m="comment",h="declaration";function y(x,S){if(typeof x!="string")throw new TypeError("First argument must be a string");if(!x)return[];S=S||{};var T=1,C=1;function _(j){var q=j.match(e);q&&(T+=q.length);var U=j.lastIndexOf(l);C=~U?j.length-U:C+j.length}function I(){var j={line:T,column:C};return function(q){return q.position=new P(j),F(),q}}function P(j){this.start=j,this.end={line:T,column:C},this.source=S.source}P.prototype.content=x;function M(j){var q=new Error(S.source+":"+T+":"+C+": "+j);if(q.reason=j,q.filename=S.source,q.line=T,q.column=C,q.source=x,!S.silent)throw q}function D(j){var q=j.exec(x);if(q){var U=q[0];return _(U),x=x.slice(U.length),q}}function F(){D(n)}function B(j){var q;for(j=j||[];q=V();)q!==!1&&j.push(q);return j}function V(){var j=I();if(!(c!=x.charAt(0)||d!=x.charAt(1))){for(var q=2;u!=x.charAt(q)&&(d!=x.charAt(q)||c!=x.charAt(q+1));)++q;if(q+=2,u===x.charAt(q-1))return M("End of comment missing");var U=x.slice(2,q-2);return C+=2,_(U),x=x.slice(q),C+=2,j({type:m,comment:U})}}function z(){var j=I(),q=D(r);if(q){if(V(),!D(o))return M("property missing ':'");var U=D(a),Y=j({type:h,property:v(q[0].replace(t,u)),value:U?v(U[0].replace(t,u)):u});return D(s),Y}}function H(){var j=[];B(j);for(var q;q=z();)q!==!1&&(j.push(q),B(j));return j}return F(),H()}function v(x){return x?x.replace(i,u):u}return f2=y,f2}var RB;function Nme(){if(RB)return $m;RB=1;var t=$m&&$m.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($m,"__esModule",{value:!0}),$m.default=n;const e=t(Dme());function n(r,o){let a=null;if(!r||typeof r!="string")return a;const s=(0,e.default)(r),i=typeof o=="function";return s.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:d}=l;i?o(c,d,l):d&&(a=a||{},a[c]=d)}),a}return $m}var Ib={},DB;function Lme(){if(DB)return Ib;DB=1,Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,a=function(c){return!c||n.test(c)||t.test(c)},s=function(c,d){return d.toUpperCase()},i=function(c,d){return"".concat(d,"-")},l=function(c,d){return d===void 0&&(d={}),a(c)?c:(c=c.toLowerCase(),d.reactCompat?c=c.replace(o,i):c=c.replace(r,i),c.replace(e,s))};return Ib.camelCase=l,Ib}var Pb,NB;function jme(){if(NB)return Pb;NB=1;var t=Pb&&Pb.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},e=t(Nme()),n=Lme();function r(o,a){var s={};return!o||typeof o!="string"||(0,e.default)(o,function(i,l){i&&l&&(s[(0,n.camelCase)(i,a)]=l)}),s}return r.default=r,Pb=r,Pb}var Bme=jme();const Fme=Wi(Bme),rw=TV("end"),Xc=TV("start");function TV(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function zme(t){const e=Xc(t),n=rw(t);if(e&&n)return{start:e,end:n}}function _y(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?LB(t.position):"start"in t||"end"in t?LB(t):"line"in t||"column"in t?HO(t):""}function HO(t){return jB(t&&t.line)+":"+jB(t&&t.column)}function LB(t){return HO(t&&t.start)+"-"+HO(t&&t.end)}function jB(t){return t&&typeof t=="number"?t:1}class ns extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let o="",a={},s=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?o=e:!a.cause&&e&&(s=!0,o=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const i=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=i?i.line:void 0,this.name=_y(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ns.prototype.file="";ns.prototype.name="";ns.prototype.reason="";ns.prototype.message="";ns.prototype.stack="";ns.prototype.column=void 0;ns.prototype.line=void 0;ns.prototype.ancestors=void 0;ns.prototype.cause=void 0;ns.prototype.fatal=void 0;ns.prototype.place=void 0;ns.prototype.ruleId=void 0;ns.prototype.source=void 0;const mD={}.hasOwnProperty,Ume=new Map,qme=/[A-Z]/g,Hme=new Set(["table","tbody","thead","tfoot","tr"]),$me=new Set(["td","th"]),wV="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Vme(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Zme(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Qme(n,e.jsx,e.jsxs)}const o={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?bg:nw,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=CV(o,t,void 0);return a&&typeof a!="string"?a:o.create(t,o.Fragment,{children:a||void 0},void 0)}function CV(t,e,n){if(e.type==="element")return Gme(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Kme(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Yme(t,e,n);if(e.type==="mdxjsEsm")return Wme(t,e);if(e.type==="root")return Xme(t,e,n);if(e.type==="text")return Jme(t,e)}function Gme(t,e,n){const r=t.schema;let o=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(o=bg,t.schema=o),t.ancestors.push(e);const a=_V(t,e.tagName,!1),s=ehe(t,e);let i=gD(t,e);return Hme.has(e.tagName)&&(i=i.filter(function(l){return typeof l=="string"?!Cme(l):!0})),AV(t,s,a,e),hD(s,i),t.ancestors.pop(),t.schema=r,t.create(e,a,s,n)}function Kme(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}a0(t,e.position)}function Wme(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);a0(t,e.position)}function Yme(t,e,n){const r=t.schema;let o=r;e.name==="svg"&&r.space==="html"&&(o=bg,t.schema=o),t.ancestors.push(e);const a=e.name===null?t.Fragment:_V(t,e.name,!0),s=the(t,e),i=gD(t,e);return AV(t,s,a,e),hD(s,i),t.ancestors.pop(),t.schema=r,t.create(e,a,s,n)}function Xme(t,e,n){const r={};return hD(r,gD(t,e)),t.create(e,t.Fragment,r,n)}function Jme(t,e){return e.value}function AV(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function hD(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Qme(t,e,n){return r;function r(o,a,s,i){const c=Array.isArray(s.children)?n:e;return i?c(a,s,i):c(a,s)}}function Zme(t,e){return n;function n(r,o,a,s){const i=Array.isArray(a.children),l=Xc(r);return e(o,a,s,i,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function ehe(t,e){const n={};let r,o;for(o in e.properties)if(o!=="children"&&mD.call(e.properties,o)){const a=nhe(t,o,e.properties[o]);if(a){const[s,i]=a;t.tableCellAlignToStyle&&s==="align"&&typeof i=="string"&&$me.has(e.tagName)?r=i:n[s]=i}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function the(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const s=a.expression;s.type;const i=s.properties[0];i.type,Object.assign(n,t.evaluater.evaluateExpression(i.argument))}else a0(t,e.position);else{const o=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const i=r.value.data.estree.body[0];i.type,a=t.evaluater.evaluateExpression(i.expression)}else a0(t,e.position);else a=r.value===null?!0:r.value;n[o]=a}return n}function gD(t,e){const n=[];let r=-1;const o=t.passKeys?new Map:Ume;for(;++r<e.children.length;){const a=e.children[r];let s;if(t.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const c=o.get(l)||0;s=l+"-"+c,o.set(l,c+1)}}const i=CV(t,a,s);i!==void 0&&n.push(i)}return n}function nhe(t,e,n){const r=fD(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?mV(n):EV(n)),r.property==="style"){let o=typeof n=="object"?n:rhe(t,String(n));return t.stylePropertyNameCase==="css"&&(o=ohe(o)),["style",o]}return[t.elementAttributeNameCase==="react"&&r.space?Ime[r.property]||r.property:r.attribute,n]}}function rhe(t,e){try{return Fme(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,o=new ns("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=t.filePath||void 0,o.url=wV+"#cannot-parse-style-attribute",o}}function _V(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const o=e.split(".");let a=-1,s;for(;++a<o.length;){const i=_B(o[a])?{type:"Identifier",name:o[a]}:{type:"Literal",value:o[a]};s=s?{type:"MemberExpression",object:s,property:i,computed:!!(a&&i.type==="Literal"),optional:!1}:i}r=s}else r=_B(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const o=r.value;return mD.call(t.components,o)?t.components[o]:o}if(t.evaluater)return t.evaluater.evaluateExpression(r);a0(t)}function a0(t,e){const n=new ns("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=wV+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ohe(t){const e={};let n;for(n in t)mD.call(t,n)&&(e[ahe(n)]=t[n]);return e}function ahe(t){let e=t.replace(qme,she);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function she(t){return"-"+t.toLowerCase()}const m2={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ihe={};function bD(t,e){const n=ihe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return kV(t,r,o)}function kV(t,e,n){if(lhe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return BB(t.children,e,n)}return Array.isArray(t)?BB(t,e,n):""}function BB(t,e,n){const r=[];let o=-1;for(;++o<t.length;)r[o]=kV(t[o],e,n);return r.join("")}function lhe(t){return!!(t&&typeof t=="object")}const FB=document.createElement("i");function yD(t){const e="&"+t+";";FB.innerHTML=e;const n=FB.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Fi(t,e,n,r){const o=t.length;let a=0,s;if(e<0?e=-e>o?0:o+e:e=e>o?o:e,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);a<r.length;)s=r.slice(a,a+1e4),s.unshift(e,0),t.splice(...s),a+=1e4,e+=1e4}function Tl(t,e){return t.length>0?(Fi(t,t.length,0,e),t):e}const zB={}.hasOwnProperty;function IV(t){const e={};let n=-1;for(;++n<t.length;)che(e,t[n]);return e}function che(t,e){let n;for(n in e){const o=(zB.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let s;if(a)for(s in a){zB.call(o,s)||(o[s]=[]);const i=a[s];uhe(o[s],Array.isArray(i)?i:i?[i]:[])}}}function uhe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Fi(t,0,0,r)}function PV(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ql(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Es=wp(/[A-Za-z]/),Ya=wp(/[\dA-Za-z]/),dhe=wp(/[#-'*+\--9=?A-Z^-~]/);function lE(t){return t!==null&&(t<32||t===127)}const $O=wp(/\d/),phe=wp(/[\dA-Fa-f]/),fhe=wp(/[!-/:-@[-`{-~]/);function Pt(t){return t!==null&&t<-2}function hr(t){return t!==null&&(t<0||t===32)}function vn(t){return t===-2||t===-1||t===32}const ow=wp(new RegExp("\\p{P}|\\p{S}","u")),Of=wp(/\s/);function wp(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function yg(t){const e=[];let n=-1,r=0,o=0;for(;++n<t.length;){const a=t.charCodeAt(n);let s="";if(a===37&&Ya(t.charCodeAt(n+1))&&Ya(t.charCodeAt(n+2)))o=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const i=t.charCodeAt(n+1);a<56320&&i>56319&&i<57344?(s=String.fromCharCode(a,i),o=1):s=""}else s=String.fromCharCode(a);s&&(e.push(t.slice(r,n),encodeURIComponent(s)),r=n+o+1,s=""),o&&(n+=o,o=0)}return e.join("")+t.slice(r)}function In(t,e,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(l){return vn(l)?(t.enter(n),i(l)):e(l)}function i(l){return vn(l)&&a++<o?(t.consume(l),i):(t.exit(n),e(l))}}const mhe={tokenize:hhe};function hhe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,o);let n;return e;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),In(t,e,"linePrefix")}function o(i){return t.enter("paragraph"),a(i)}function a(i){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,s(i)}function s(i){if(i===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(i);return}return Pt(i)?(t.consume(i),t.exit("chunkText"),a):(t.consume(i),s)}}const ghe={tokenize:bhe},UB={tokenize:yhe};function bhe(t){const e=this,n=[];let r=0,o,a,s;return i;function i(C){if(r<n.length){const _=n[r];return e.containerState=_[1],t.attempt(_[0].continuation,l,c)(C)}return c(C)}function l(C){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&T();const _=e.events.length;let I=_,P;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){P=e.events[I][1].end;break}S(r);let M=_;for(;M<e.events.length;)e.events[M][1].end={...P},M++;return Fi(e.events,I+1,0,e.events.slice(_)),e.events.length=M,c(C)}return i(C)}function c(C){if(r===n.length){if(!o)return m(C);if(o.currentConstruct&&o.currentConstruct.concrete)return y(C);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(UB,d,u)(C)}function d(C){return o&&T(),S(r),m(C)}function u(C){return e.parser.lazy[e.now().line]=r!==n.length,s=e.now().offset,y(C)}function m(C){return e.containerState={},t.attempt(UB,h,y)(C)}function h(C){return r++,n.push([e.currentConstruct,e.containerState]),m(C)}function y(C){if(C===null){o&&T(),S(0),t.consume(C);return}return o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:a}),v(C)}function v(C){if(C===null){x(t.exit("chunkFlow"),!0),S(0),t.consume(C);return}return Pt(C)?(t.consume(C),x(t.exit("chunkFlow")),r=0,e.interrupt=void 0,i):(t.consume(C),v)}function x(C,_){const I=e.sliceStream(C);if(_&&I.push(null),C.previous=a,a&&(a.next=C),a=C,o.defineSkip(C.start),o.write(I),e.parser.lazy[C.start.line]){let P=o.events.length;for(;P--;)if(o.events[P][1].start.offset<s&&(!o.events[P][1].end||o.events[P][1].end.offset>s))return;const M=e.events.length;let D=M,F,B;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){if(F){B=e.events[D][1].end;break}F=!0}for(S(r),P=M;P<e.events.length;)e.events[P][1].end={...B},P++;Fi(e.events,D+1,0,e.events.slice(M)),e.events.length=P}}function S(C){let _=n.length;for(;_-- >C;){const I=n[_];e.containerState=I[1],I[0].exit.call(e,t)}n.length=C}function T(){o.write([null]),a=void 0,o=void 0,e.containerState._closeFlow=void 0}}function yhe(t,e,n){return In(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function qh(t){if(t===null||hr(t)||Of(t))return 1;if(ow(t))return 2}function aw(t,e,n){const r=[];let o=-1;for(;++o<t.length;){const a=t[o].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const VO={name:"attention",resolveAll:vhe,tokenize:xhe};function vhe(t,e){let n=-1,r,o,a,s,i,l,c,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const u={...t[r][1].end},m={...t[n][1].start};qB(u,-l),qB(m,l),s={type:l>1?"strongSequence":"emphasisSequence",start:u,end:{...t[r][1].end}},i={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},a={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},o={type:l>1?"strong":"emphasis",start:{...s.start},end:{...i.end}},t[r][1].end={...s.start},t[n][1].start={...i.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Tl(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Tl(c,[["enter",o,e],["enter",s,e],["exit",s,e],["enter",a,e]]),c=Tl(c,aw(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Tl(c,[["exit",a,e],["enter",i,e],["exit",i,e],["exit",o,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,c=Tl(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,Fi(t,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function xhe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=qh(r);let a;return s;function s(l){return a=l,t.enter("attentionSequence"),i(l)}function i(l){if(l===a)return t.consume(l),i;const c=t.exit("attentionSequence"),d=qh(l),u=!d||d===2&&o||n.includes(l),m=!o||o===2&&d||n.includes(r);return c._open=!!(a===42?u:u&&(o||!m)),c._close=!!(a===42?m:m&&(d||!u)),e(l)}}function qB(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const She={name:"autolink",tokenize:Ehe};function Ehe(t,e,n){let r=0;return o;function o(h){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(h){return Es(h)?(t.consume(h),s):h===64?n(h):c(h)}function s(h){return h===43||h===45||h===46||Ya(h)?(r=1,i(h)):c(h)}function i(h){return h===58?(t.consume(h),r=0,l):(h===43||h===45||h===46||Ya(h))&&r++<32?(t.consume(h),i):(r=0,c(h))}function l(h){return h===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):h===null||h===32||h===60||lE(h)?n(h):(t.consume(h),l)}function c(h){return h===64?(t.consume(h),d):dhe(h)?(t.consume(h),c):n(h)}function d(h){return Ya(h)?u(h):n(h)}function u(h){return h===46?(t.consume(h),r=0,d):h===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):m(h)}function m(h){if((h===45||Ya(h))&&r++<63){const y=h===45?m:u;return t.consume(h),y}return n(h)}}const W0={partial:!0,tokenize:The};function The(t,e,n){return r;function r(a){return vn(a)?In(t,o,"linePrefix")(a):o(a)}function o(a){return a===null||Pt(a)?e(a):n(a)}}const OV={continuation:{tokenize:Che},exit:Ahe,name:"blockQuote",tokenize:whe};function whe(t,e,n){const r=this;return o;function o(s){if(s===62){const i=r.containerState;return i.open||(t.enter("blockQuote",{_container:!0}),i.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(s),t.exit("blockQuoteMarker"),a}return n(s)}function a(s){return vn(s)?(t.enter("blockQuotePrefixWhitespace"),t.consume(s),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(s))}}function Che(t,e,n){const r=this;return o;function o(s){return vn(s)?In(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return t.attempt(OV,e,n)(s)}}function Ahe(t){t.exit("blockQuote")}const MV={name:"characterEscape",tokenize:_he};function _he(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),o}function o(a){return fhe(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const RV={name:"characterReference",tokenize:khe};function khe(t,e,n){const r=this;let o=0,a,s;return i;function i(u){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(u),t.exit("characterReferenceMarker"),l}function l(u){return u===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(u),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),a=31,s=Ya,d(u))}function c(u){return u===88||u===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(u),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,s=phe,d):(t.enter("characterReferenceValue"),a=7,s=$O,d(u))}function d(u){if(u===59&&o){const m=t.exit("characterReferenceValue");return s===Ya&&!yD(r.sliceSerialize(m))?n(u):(t.enter("characterReferenceMarker"),t.consume(u),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return s(u)&&o++<a?(t.consume(u),d):n(u)}}const HB={partial:!0,tokenize:Phe},$B={concrete:!0,name:"codeFenced",tokenize:Ihe};function Ihe(t,e,n){const r=this,o={partial:!0,tokenize:I};let a=0,s=0,i;return l;function l(P){return c(P)}function c(P){const M=r.events[r.events.length-1];return a=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,i=P,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(P)}function d(P){return P===i?(s++,t.consume(P),d):s<3?n(P):(t.exit("codeFencedFenceSequence"),vn(P)?In(t,u,"whitespace")(P):u(P))}function u(P){return P===null||Pt(P)?(t.exit("codeFencedFence"),r.interrupt?e(P):t.check(HB,v,_)(P)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(P))}function m(P){return P===null||Pt(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),u(P)):vn(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),In(t,h,"whitespace")(P)):P===96&&P===i?n(P):(t.consume(P),m)}function h(P){return P===null||Pt(P)?u(P):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(P))}function y(P){return P===null||Pt(P)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),u(P)):P===96&&P===i?n(P):(t.consume(P),y)}function v(P){return t.attempt(o,_,x)(P)}function x(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),S}function S(P){return a>0&&vn(P)?In(t,T,"linePrefix",a+1)(P):T(P)}function T(P){return P===null||Pt(P)?t.check(HB,v,_)(P):(t.enter("codeFlowValue"),C(P))}function C(P){return P===null||Pt(P)?(t.exit("codeFlowValue"),T(P)):(t.consume(P),C)}function _(P){return t.exit("codeFenced"),e(P)}function I(P,M,D){let F=0;return B;function B(q){return P.enter("lineEnding"),P.consume(q),P.exit("lineEnding"),V}function V(q){return P.enter("codeFencedFence"),vn(q)?In(P,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):z(q)}function z(q){return q===i?(P.enter("codeFencedFenceSequence"),H(q)):D(q)}function H(q){return q===i?(F++,P.consume(q),H):F>=s?(P.exit("codeFencedFenceSequence"),vn(q)?In(P,j,"whitespace")(q):j(q)):D(q)}function j(q){return q===null||Pt(q)?(P.exit("codeFencedFence"),M(q)):D(q)}}}function Phe(t,e,n){const r=this;return o;function o(s){return s===null?n(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),a)}function a(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}const h2={name:"codeIndented",tokenize:Mhe},Ohe={partial:!0,tokenize:Rhe};function Mhe(t,e,n){const r=this;return o;function o(c){return t.enter("codeIndented"),In(t,a,"linePrefix",5)(c)}function a(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?s(c):n(c)}function s(c){return c===null?l(c):Pt(c)?t.attempt(Ohe,s,l)(c):(t.enter("codeFlowValue"),i(c))}function i(c){return c===null||Pt(c)?(t.exit("codeFlowValue"),s(c)):(t.consume(c),i)}function l(c){return t.exit("codeIndented"),e(c)}}function Rhe(t,e,n){const r=this;return o;function o(s){return r.parser.lazy[r.now().line]?n(s):Pt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),o):In(t,a,"linePrefix",5)(s)}function a(s){const i=r.events[r.events.length-1];return i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(s):Pt(s)?o(s):n(s)}}const Dhe={name:"codeText",previous:Lhe,resolve:Nhe,tokenize:jhe};function Nhe(t){let e=t.length-4,n=3,r,o;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)o===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(o=r):(r===e||t[r][1].type==="lineEnding")&&(t[o][1].type="codeTextData",r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),e-=r-o-2,r=o+2),o=void 0);return t}function Lhe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function jhe(t,e,n){let r=0,o,a;return s;function s(u){return t.enter("codeText"),t.enter("codeTextSequence"),i(u)}function i(u){return u===96?(t.consume(u),r++,i):(t.exit("codeTextSequence"),l(u))}function l(u){return u===null?n(u):u===32?(t.enter("space"),t.consume(u),t.exit("space"),l):u===96?(a=t.enter("codeTextSequence"),o=0,d(u)):Pt(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(u))}function c(u){return u===null||u===32||u===96||Pt(u)?(t.exit("codeTextData"),l(u)):(t.consume(u),c)}function d(u){return u===96?(t.consume(u),o++,d):o===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(u)):(a.type="codeTextData",c(u))}}class Bhe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const o=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return r&&Ob(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ob(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ob(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Ob(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ob(this.left,n.reverse())}}}function Ob(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function DV(t){const e={};let n=-1,r,o,a,s,i,l,c;const d=new Bhe(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Fhe(d,n)),n=e[n],c=!0);else if(r[1]._container){for(a=n,o=void 0;a--;)if(s=d.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(o&&(d.get(o)[1].type="lineEndingBlank"),s[1].type="lineEnding",o=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;o&&(r[1].end={...d.get(o)[1].start},i=d.slice(o,n),i.unshift(r),d.splice(o,n-o+1,i))}}return Fi(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function Fhe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let o=e-1;const a=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const i=s.events,l=[],c={};let d,u,m=-1,h=n,y=0,v=0;const x=[v];for(;h;){for(;t.get(++o)[1]!==h;);a.push(o),h._tokenizer||(d=r.sliceStream(h),h.next||d.push(null),u&&s.defineSkip(h.start),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(d),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),u=h,h=h.next}for(h=n;++m<i.length;)i[m][0]==="exit"&&i[m-1][0]==="enter"&&i[m][1].type===i[m-1][1].type&&i[m][1].start.line!==i[m][1].end.line&&(v=m+1,x.push(v),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(s.events=[],h?(h._tokenizer=void 0,h.previous=void 0):x.pop(),m=x.length;m--;){const S=i.slice(x[m],x[m+1]),T=a.pop();l.push([T,T+S.length-1]),t.splice(T,2,S)}for(l.reverse(),m=-1;++m<l.length;)c[y+l[m][0]]=y+l[m][1],y+=l[m][1]-l[m][0]-1;return c}const zhe={resolve:qhe,tokenize:Hhe},Uhe={partial:!0,tokenize:$he};function qhe(t){return DV(t),t}function Hhe(t,e){let n;return r;function r(i){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(i)}function o(i){return i===null?a(i):Pt(i)?t.check(Uhe,s,a)(i):(t.consume(i),o)}function a(i){return t.exit("chunkContent"),t.exit("content"),e(i)}function s(i){return t.consume(i),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function $he(t,e,n){const r=this;return o;function o(s){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),In(t,a,"linePrefix")}function a(s){if(s===null||Pt(s))return n(s);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(s):t.interrupt(r.parser.constructs.flow,n,e)(s)}}function NV(t,e,n,r,o,a,s,i,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return u;function u(S){return S===60?(t.enter(r),t.enter(o),t.enter(a),t.consume(S),t.exit(a),m):S===null||S===32||S===41||lE(S)?n(S):(t.enter(r),t.enter(s),t.enter(i),t.enter("chunkString",{contentType:"string"}),v(S))}function m(S){return S===62?(t.enter(a),t.consume(S),t.exit(a),t.exit(o),t.exit(r),e):(t.enter(i),t.enter("chunkString",{contentType:"string"}),h(S))}function h(S){return S===62?(t.exit("chunkString"),t.exit(i),m(S)):S===null||S===60||Pt(S)?n(S):(t.consume(S),S===92?y:h)}function y(S){return S===60||S===62||S===92?(t.consume(S),h):h(S)}function v(S){return!d&&(S===null||S===41||hr(S))?(t.exit("chunkString"),t.exit(i),t.exit(s),t.exit(r),e(S)):d<c&&S===40?(t.consume(S),d++,v):S===41?(t.consume(S),d--,v):S===null||S===32||S===40||lE(S)?n(S):(t.consume(S),S===92?x:v)}function x(S){return S===40||S===41||S===92?(t.consume(S),v):v(S)}}function LV(t,e,n,r,o,a){const s=this;let i=0,l;return c;function c(h){return t.enter(r),t.enter(o),t.consume(h),t.exit(o),t.enter(a),d}function d(h){return i>999||h===null||h===91||h===93&&!l||h===94&&!i&&"_hiddenFootnoteSupport"in s.parser.constructs?n(h):h===93?(t.exit(a),t.enter(o),t.consume(h),t.exit(o),t.exit(r),e):Pt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===null||h===91||h===93||Pt(h)||i++>999?(t.exit("chunkString"),d(h)):(t.consume(h),l||(l=!vn(h)),h===92?m:u)}function m(h){return h===91||h===92||h===93?(t.consume(h),i++,u):u(h)}}function jV(t,e,n,r,o,a){let s;return i;function i(m){return m===34||m===39||m===40?(t.enter(r),t.enter(o),t.consume(m),t.exit(o),s=m===40?41:m,l):n(m)}function l(m){return m===s?(t.enter(o),t.consume(m),t.exit(o),t.exit(r),e):(t.enter(a),c(m))}function c(m){return m===s?(t.exit(a),l(s)):m===null?n(m):Pt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),In(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===s||m===null||Pt(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?u:d)}function u(m){return m===s||m===92?(t.consume(m),d):d(m)}}function ky(t,e){let n;return r;function r(o){return Pt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),n=!0,r):vn(o)?In(t,r,n?"linePrefix":"lineSuffix")(o):e(o)}}const Vhe={name:"definition",tokenize:Khe},Ghe={partial:!0,tokenize:Whe};function Khe(t,e,n){const r=this;let o;return a;function a(h){return t.enter("definition"),s(h)}function s(h){return LV.call(r,t,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function i(h){return o=Ql(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(t.enter("definitionMarker"),t.consume(h),t.exit("definitionMarker"),l):n(h)}function l(h){return hr(h)?ky(t,c)(h):c(h)}function c(h){return NV(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function d(h){return t.attempt(Ghe,u,u)(h)}function u(h){return vn(h)?In(t,m,"whitespace")(h):m(h)}function m(h){return h===null||Pt(h)?(t.exit("definition"),r.parser.defined.push(o),e(h)):n(h)}}function Whe(t,e,n){return r;function r(i){return hr(i)?ky(t,o)(i):n(i)}function o(i){return jV(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(i)}function a(i){return vn(i)?In(t,s,"whitespace")(i):s(i)}function s(i){return i===null||Pt(i)?e(i):n(i)}}const Yhe={name:"hardBreakEscape",tokenize:Xhe};function Xhe(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),o}function o(a){return Pt(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const Jhe={name:"headingAtx",resolve:Qhe,tokenize:Zhe};function Qhe(t,e){let n=t.length-2,r=3,o,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(o={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Fi(t,r,n-r+1,[["enter",o,e],["enter",a,e],["exit",a,e],["exit",o,e]])),t}function Zhe(t,e,n){let r=0;return o;function o(d){return t.enter("atxHeading"),a(d)}function a(d){return t.enter("atxHeadingSequence"),s(d)}function s(d){return d===35&&r++<6?(t.consume(d),s):d===null||hr(d)?(t.exit("atxHeadingSequence"),i(d)):n(d)}function i(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||Pt(d)?(t.exit("atxHeading"),e(d)):vn(d)?In(t,i,"whitespace")(d):(t.enter("atxHeadingText"),c(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),i(d))}function c(d){return d===null||d===35||hr(d)?(t.exit("atxHeadingText"),i(d)):(t.consume(d),c)}}const ege=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],VB=["pre","script","style","textarea"],tge={concrete:!0,name:"htmlFlow",resolveTo:oge,tokenize:age},nge={partial:!0,tokenize:ige},rge={partial:!0,tokenize:sge};function oge(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function age(t,e,n){const r=this;let o,a,s,i,l;return c;function c(K){return d(K)}function d(K){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(K),u}function u(K){return K===33?(t.consume(K),m):K===47?(t.consume(K),a=!0,v):K===63?(t.consume(K),o=3,r.interrupt?e:$):Es(K)?(t.consume(K),s=String.fromCharCode(K),x):n(K)}function m(K){return K===45?(t.consume(K),o=2,h):K===91?(t.consume(K),o=5,i=0,y):Es(K)?(t.consume(K),o=4,r.interrupt?e:$):n(K)}function h(K){return K===45?(t.consume(K),r.interrupt?e:$):n(K)}function y(K){const ve="CDATA[";return K===ve.charCodeAt(i++)?(t.consume(K),i===ve.length?r.interrupt?e:z:y):n(K)}function v(K){return Es(K)?(t.consume(K),s=String.fromCharCode(K),x):n(K)}function x(K){if(K===null||K===47||K===62||hr(K)){const ve=K===47,xe=s.toLowerCase();return!ve&&!a&&VB.includes(xe)?(o=1,r.interrupt?e(K):z(K)):ege.includes(s.toLowerCase())?(o=6,ve?(t.consume(K),S):r.interrupt?e(K):z(K)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(K):a?T(K):C(K))}return K===45||Ya(K)?(t.consume(K),s+=String.fromCharCode(K),x):n(K)}function S(K){return K===62?(t.consume(K),r.interrupt?e:z):n(K)}function T(K){return vn(K)?(t.consume(K),T):B(K)}function C(K){return K===47?(t.consume(K),B):K===58||K===95||Es(K)?(t.consume(K),_):vn(K)?(t.consume(K),C):B(K)}function _(K){return K===45||K===46||K===58||K===95||Ya(K)?(t.consume(K),_):I(K)}function I(K){return K===61?(t.consume(K),P):vn(K)?(t.consume(K),I):C(K)}function P(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(t.consume(K),l=K,M):vn(K)?(t.consume(K),P):D(K)}function M(K){return K===l?(t.consume(K),l=null,F):K===null||Pt(K)?n(K):(t.consume(K),M)}function D(K){return K===null||K===34||K===39||K===47||K===60||K===61||K===62||K===96||hr(K)?I(K):(t.consume(K),D)}function F(K){return K===47||K===62||vn(K)?C(K):n(K)}function B(K){return K===62?(t.consume(K),V):n(K)}function V(K){return K===null||Pt(K)?z(K):vn(K)?(t.consume(K),V):n(K)}function z(K){return K===45&&o===2?(t.consume(K),U):K===60&&o===1?(t.consume(K),Y):K===62&&o===4?(t.consume(K),G):K===63&&o===3?(t.consume(K),$):K===93&&o===5?(t.consume(K),ee):Pt(K)&&(o===6||o===7)?(t.exit("htmlFlowData"),t.check(nge,re,H)(K)):K===null||Pt(K)?(t.exit("htmlFlowData"),H(K)):(t.consume(K),z)}function H(K){return t.check(rge,j,re)(K)}function j(K){return t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),q}function q(K){return K===null||Pt(K)?H(K):(t.enter("htmlFlowData"),z(K))}function U(K){return K===45?(t.consume(K),$):z(K)}function Y(K){return K===47?(t.consume(K),s="",X):z(K)}function X(K){if(K===62){const ve=s.toLowerCase();return VB.includes(ve)?(t.consume(K),G):z(K)}return Es(K)&&s.length<8?(t.consume(K),s+=String.fromCharCode(K),X):z(K)}function ee(K){return K===93?(t.consume(K),$):z(K)}function $(K){return K===62?(t.consume(K),G):K===45&&o===2?(t.consume(K),$):z(K)}function G(K){return K===null||Pt(K)?(t.exit("htmlFlowData"),re(K)):(t.consume(K),G)}function re(K){return t.exit("htmlFlow"),e(K)}}function sge(t,e,n){const r=this;return o;function o(s){return Pt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),a):n(s)}function a(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}function ige(t,e,n){return r;function r(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(W0,e,n)}}const lge={name:"htmlText",tokenize:cge};function cge(t,e,n){const r=this;let o,a,s;return i;function i($){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume($),l}function l($){return $===33?(t.consume($),c):$===47?(t.consume($),I):$===63?(t.consume($),C):Es($)?(t.consume($),D):n($)}function c($){return $===45?(t.consume($),d):$===91?(t.consume($),a=0,y):Es($)?(t.consume($),T):n($)}function d($){return $===45?(t.consume($),h):n($)}function u($){return $===null?n($):$===45?(t.consume($),m):Pt($)?(s=u,Y($)):(t.consume($),u)}function m($){return $===45?(t.consume($),h):u($)}function h($){return $===62?U($):$===45?m($):u($)}function y($){const G="CDATA[";return $===G.charCodeAt(a++)?(t.consume($),a===G.length?v:y):n($)}function v($){return $===null?n($):$===93?(t.consume($),x):Pt($)?(s=v,Y($)):(t.consume($),v)}function x($){return $===93?(t.consume($),S):v($)}function S($){return $===62?U($):$===93?(t.consume($),S):v($)}function T($){return $===null||$===62?U($):Pt($)?(s=T,Y($)):(t.consume($),T)}function C($){return $===null?n($):$===63?(t.consume($),_):Pt($)?(s=C,Y($)):(t.consume($),C)}function _($){return $===62?U($):C($)}function I($){return Es($)?(t.consume($),P):n($)}function P($){return $===45||Ya($)?(t.consume($),P):M($)}function M($){return Pt($)?(s=M,Y($)):vn($)?(t.consume($),M):U($)}function D($){return $===45||Ya($)?(t.consume($),D):$===47||$===62||hr($)?F($):n($)}function F($){return $===47?(t.consume($),U):$===58||$===95||Es($)?(t.consume($),B):Pt($)?(s=F,Y($)):vn($)?(t.consume($),F):U($)}function B($){return $===45||$===46||$===58||$===95||Ya($)?(t.consume($),B):V($)}function V($){return $===61?(t.consume($),z):Pt($)?(s=V,Y($)):vn($)?(t.consume($),V):F($)}function z($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(t.consume($),o=$,H):Pt($)?(s=z,Y($)):vn($)?(t.consume($),z):(t.consume($),j)}function H($){return $===o?(t.consume($),o=void 0,q):$===null?n($):Pt($)?(s=H,Y($)):(t.consume($),H)}function j($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||hr($)?F($):(t.consume($),j)}function q($){return $===47||$===62||hr($)?F($):n($)}function U($){return $===62?(t.consume($),t.exit("htmlTextData"),t.exit("htmlText"),e):n($)}function Y($){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),X}function X($){return vn($)?In(t,ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):ee($)}function ee($){return t.enter("htmlTextData"),s($)}}const vD={name:"labelEnd",resolveAll:fge,resolveTo:mge,tokenize:hge},uge={tokenize:gge},dge={tokenize:bge},pge={tokenize:yge};function fge(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const o=r.type==="labelImage"?4:2;r.type="data",e+=o}}return t.length!==n.length&&Fi(t,0,t.length,n),t}function mge(t,e){let n=t.length,r=0,o,a,s,i;for(;n--;)if(o=t[n][1],a){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;t[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(s){if(t[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(a=n,o.type!=="labelLink")){r=2;break}}else o.type==="labelEnd"&&(s=n);const l={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[a][1].start},end:{...t[s][1].end}},d={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[s-2][1].start}};return i=[["enter",l,e],["enter",c,e]],i=Tl(i,t.slice(a+1,a+r+3)),i=Tl(i,[["enter",d,e]]),i=Tl(i,aw(e.parser.constructs.insideSpan.null,t.slice(a+r+4,s-3),e)),i=Tl(i,[["exit",d,e],t[s-2],t[s-1],["exit",c,e]]),i=Tl(i,t.slice(s+1)),i=Tl(i,[["exit",l,e]]),Fi(t,a,t.length,i),t}function hge(t,e,n){const r=this;let o=r.events.length,a,s;for(;o--;)if((r.events[o][1].type==="labelImage"||r.events[o][1].type==="labelLink")&&!r.events[o][1]._balanced){a=r.events[o][1];break}return i;function i(m){return a?a._inactive?u(m):(s=r.parser.defined.includes(Ql(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(uge,d,s?d:u)(m):m===91?t.attempt(dge,d,s?c:u)(m):s?d(m):u(m)}function c(m){return t.attempt(pge,d,u)(m)}function d(m){return e(m)}function u(m){return a._balanced=!0,n(m)}}function gge(t,e,n){return r;function r(u){return t.enter("resource"),t.enter("resourceMarker"),t.consume(u),t.exit("resourceMarker"),o}function o(u){return hr(u)?ky(t,a)(u):a(u)}function a(u){return u===41?d(u):NV(t,s,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return hr(u)?ky(t,l)(u):d(u)}function i(u){return n(u)}function l(u){return u===34||u===39||u===40?jV(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):d(u)}function c(u){return hr(u)?ky(t,d)(u):d(u)}function d(u){return u===41?(t.enter("resourceMarker"),t.consume(u),t.exit("resourceMarker"),t.exit("resource"),e):n(u)}}function bge(t,e,n){const r=this;return o;function o(i){return LV.call(r,t,a,s,"reference","referenceMarker","referenceString")(i)}function a(i){return r.parser.defined.includes(Ql(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(i):n(i)}function s(i){return n(i)}}function yge(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),o}function o(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const vge={name:"labelStartImage",resolveAll:vD.resolveAll,tokenize:xge};function xge(t,e,n){const r=this;return o;function o(i){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(i),t.exit("labelImageMarker"),a}function a(i){return i===91?(t.enter("labelMarker"),t.consume(i),t.exit("labelMarker"),t.exit("labelImage"),s):n(i)}function s(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):e(i)}}const Sge={name:"labelStartLink",resolveAll:vD.resolveAll,tokenize:Ege};function Ege(t,e,n){const r=this;return o;function o(s){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const g2={name:"lineEnding",tokenize:Tge};function Tge(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),In(t,e,"linePrefix")}}const m1={name:"thematicBreak",tokenize:wge};function wge(t,e,n){let r=0,o;return a;function a(c){return t.enter("thematicBreak"),s(c)}function s(c){return o=c,i(c)}function i(c){return c===o?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Pt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===o?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),vn(c)?In(t,i,"whitespace")(c):i(c))}}const Ys={continuation:{tokenize:kge},exit:Pge,name:"list",tokenize:_ge},Cge={partial:!0,tokenize:Oge},Age={partial:!0,tokenize:Ige};function _ge(t,e,n){const r=this,o=r.events[r.events.length-1];let a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,s=0;return i;function i(h){const y=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:$O(h)){if(r.containerState.type||(r.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),h===42||h===45?t.check(m1,n,c)(h):c(h);if(!r.interrupt||h===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(h)}return n(h)}function l(h){return $O(h)&&++s<10?(t.consume(h),l):(!r.interrupt||s<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(t.exit("listItemValue"),c(h)):n(h)}function c(h){return t.enter("listItemMarker"),t.consume(h),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,t.check(W0,r.interrupt?n:d,t.attempt(Cge,m,u))}function d(h){return r.containerState.initialBlankLine=!0,a++,m(h)}function u(h){return vn(h)?(t.enter("listItemPrefixWhitespace"),t.consume(h),t.exit("listItemPrefixWhitespace"),m):n(h)}function m(h){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(h)}}function kge(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(W0,o,a);function o(i){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,In(t,e,"listItemIndent",r.containerState.size+1)(i)}function a(i){return r.containerState.furtherBlankLines||!vn(i)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(i)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Age,e,s)(i))}function s(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,In(t,t.attempt(Ys,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}function Ige(t,e,n){const r=this;return In(t,o,"listItemIndent",r.containerState.size+1);function o(a){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?e(a):n(a)}}function Pge(t){t.exit(this.containerState.type)}function Oge(t,e,n){const r=this;return In(t,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(a){const s=r.events[r.events.length-1];return!vn(a)&&s&&s[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const GB={name:"setextUnderline",resolveTo:Mge,tokenize:Rge};function Mge(t,e){let n=t.length,r,o,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(o=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const s={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[o][1].type="setextHeadingText",a?(t.splice(o,0,["enter",s,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=s,t.push(["exit",s,e]),t}function Rge(t,e,n){const r=this;let o;return a;function a(c){let d=r.events.length,u;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){u=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||u)?(t.enter("setextHeadingLine"),o=c,s(c)):n(c)}function s(c){return t.enter("setextHeadingLineSequence"),i(c)}function i(c){return c===o?(t.consume(c),i):(t.exit("setextHeadingLineSequence"),vn(c)?In(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Pt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const Dge={tokenize:Nge};function Nge(t){const e=this,n=t.attempt(W0,r,t.attempt(this.parser.constructs.flowInitial,o,In(t,t.attempt(this.parser.constructs.flow,o,t.attempt(zhe,o)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function o(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Lge={resolveAll:FV()},jge=BV("string"),Bge=BV("text");function BV(t){return{resolveAll:FV(t==="text"?Fge:void 0),tokenize:e};function e(n){const r=this,o=this.parser.constructs[t],a=n.attempt(o,s,i);return s;function s(d){return c(d)?a(d):i(d)}function i(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return c(d)?(n.exit("data"),a(d)):(n.consume(d),l)}function c(d){if(d===null)return!0;const u=o[d];let m=-1;if(u)for(;++m<u.length;){const h=u[m];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function FV(t){return e;function e(n,r){let o=-1,a;for(;++o<=n.length;)a===void 0?n[o]&&n[o][1].type==="data"&&(a=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==a+2&&(n[a][1].end=n[o-1][1].end,n.splice(a+2,o-a-2),o=a+2),a=void 0);return t?t(n,r):n}}function Fge(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],o=e.sliceStream(r);let a=o.length,s=-1,i=0,l;for(;a--;){const c=o[a];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)i++,s--;if(s)break;s=-1}else if(c===-2)l=!0,i++;else if(c!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(i=0),i){const c={type:n===t.length||l||i<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-i,offset:r.end.offset-i},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const zge={42:Ys,43:Ys,45:Ys,48:Ys,49:Ys,50:Ys,51:Ys,52:Ys,53:Ys,54:Ys,55:Ys,56:Ys,57:Ys,62:OV},Uge={91:Vhe},qge={[-2]:h2,[-1]:h2,32:h2},Hge={35:Jhe,42:m1,45:[GB,m1],60:tge,61:GB,95:m1,96:$B,126:$B},$ge={38:RV,92:MV},Vge={[-5]:g2,[-4]:g2,[-3]:g2,33:vge,38:RV,42:VO,60:[She,lge],91:Sge,92:[Yhe,MV],93:vD,95:VO,96:Dhe},Gge={null:[VO,Lge]},Kge={null:[42,95]},Wge={null:[]},Yge=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Kge,contentInitial:Uge,disable:Wge,document:zge,flow:Hge,flowInitial:qge,insideSpan:Gge,string:$ge,text:Vge},Symbol.toStringTag,{value:"Module"}));function Xge(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},a=[];let s=[],i=[];const l={attempt:M(I),check:M(P),consume:T,enter:C,exit:_,interrupt:M(P,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:t,previous:null,sliceSerialize:m,sliceStream:h,write:u};let d=e.tokenize.call(c,l);return e.resolveAll&&a.push(e),c;function u(V){return s=Tl(s,V),x(),s[s.length-1]!==null?[]:(D(e,0),c.events=aw(a,c.events,c),c.events)}function m(V,z){return Qge(h(V),z)}function h(V){return Jge(s,V)}function y(){const{_bufferIndex:V,_index:z,line:H,column:j,offset:q}=r;return{_bufferIndex:V,_index:z,line:H,column:j,offset:q}}function v(V){o[V.line]=V.column,B()}function x(){let V;for(;r._index<s.length;){const z=s[r._index];if(typeof z=="string")for(V=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===V&&r._bufferIndex<z.length;)S(z.charCodeAt(r._bufferIndex));else S(z)}}function S(V){d=d(V)}function T(V){Pt(V)?(r.line++,r.column=1,r.offset+=V===-3?2:1,B()):V!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=V}function C(V,z){const H=z||{};return H.type=V,H.start=y(),c.events.push(["enter",H,c]),i.push(H),H}function _(V){const z=i.pop();return z.end=y(),c.events.push(["exit",z,c]),z}function I(V,z){D(V,z.from)}function P(V,z){z.restore()}function M(V,z){return H;function H(j,q,U){let Y,X,ee,$;return Array.isArray(j)?re(j):"tokenize"in j?re([j]):G(j);function G(Oe){return Ne;function Ne(Fe){const Ke=Fe!==null&&Oe[Fe],Qe=Fe!==null&&Oe.null,Wt=[...Array.isArray(Ke)?Ke:Ke?[Ke]:[],...Array.isArray(Qe)?Qe:Qe?[Qe]:[]];return re(Wt)(Fe)}}function re(Oe){return Y=Oe,X=0,Oe.length===0?U:K(Oe[X])}function K(Oe){return Ne;function Ne(Fe){return $=F(),ee=Oe,Oe.partial||(c.currentConstruct=Oe),Oe.name&&c.parser.constructs.disable.null.includes(Oe.name)?xe():Oe.tokenize.call(z?Object.assign(Object.create(c),z):c,l,ve,xe)(Fe)}}function ve(Oe){return V(ee,$),q}function xe(Oe){return $.restore(),++X<Y.length?K(Y[X]):U}}}function D(V,z){V.resolveAll&&!a.includes(V)&&a.push(V),V.resolve&&Fi(c.events,z,c.events.length-z,V.resolve(c.events.slice(z),c)),V.resolveTo&&(c.events=V.resolveTo(c.events,c))}function F(){const V=y(),z=c.previous,H=c.currentConstruct,j=c.events.length,q=Array.from(i);return{from:j,restore:U};function U(){r=V,c.previous=z,c.currentConstruct=H,c.events.length=j,i=q,B()}}function B(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function Jge(t,e){const n=e.start._index,r=e.start._bufferIndex,o=e.end._index,a=e.end._bufferIndex;let s;if(n===o)s=[t[n].slice(r,a)];else{if(s=t.slice(n,o),r>-1){const i=s[0];typeof i=="string"?s[0]=i.slice(r):s.shift()}a>0&&s.push(t[o].slice(0,a))}return s}function Qge(t,e){let n=-1;const r=[];let o;for(;++n<t.length;){const a=t[n];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&o)continue;s=" ";break}default:s=String.fromCharCode(a)}o=a===-2,r.push(s)}return r.join("")}function Zge(t){const r={constructs:IV([Yge,...(t||{}).extensions||[]]),content:o(mhe),defined:[],document:o(ghe),flow:o(Dge),lazy:{},string:o(jge),text:o(Bge)};return r;function o(a){return s;function s(i){return Xge(r,a,i)}}}function ebe(t){for(;!DV(t););return t}const KB=/[\0\t\n\r]/g;function tbe(){let t=1,e="",n=!0,r;return o;function o(a,s,i){const l=[];let c,d,u,m,h;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),u=0,e="",n&&(a.charCodeAt(0)===65279&&u++,n=void 0);u<a.length;){if(KB.lastIndex=u,c=KB.exec(a),m=c&&c.index!==void 0?c.index:a.length,h=a.charCodeAt(m),!c){e=a.slice(u);break}if(h===10&&u===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),u<m&&(l.push(a.slice(u,m)),t+=m-u),h){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}u=m+1}return i&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const nbe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rbe(t){return t.replace(nbe,obe)}function obe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),a=o===120||o===88;return PV(n.slice(a?2:1),a?16:10)}return yD(n)||t}const zV={}.hasOwnProperty;function abe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),sbe(n)(ebe(Zge(n).document().write(tbe()(t,e,!0))))}function sbe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Wn),autolinkProtocol:F,autolinkEmail:F,atxHeading:a(an),blockQuote:a(Qe),characterEscape:F,characterReference:F,codeFenced:a(Wt),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(Wt,s),codeText:a(hn,s),codeTextData:F,data:F,codeFlowValue:F,definition:a(Yt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(Ut),hardBreakEscape:a(wt),hardBreakTrailing:a(wt),htmlFlow:a(qn,s),htmlFlowData:F,htmlText:a(qn,s),htmlTextData:F,image:a(Gn),label:s,link:a(Wn),listItem:a(ko),listItemValue:m,listOrdered:a(Yr,u),listUnordered:a(Yr),paragraph:a(hi),reference:K,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(an),strong:a(gi),thematicBreak:a(Io)},exit:{atxHeading:l(),atxHeadingSequence:I,autolink:l(),autolinkEmail:Ke,autolinkProtocol:Fe,blockQuote:l(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:xe,characterReferenceMarkerNumeric:xe,characterReferenceValue:Oe,characterReference:Ne,codeFenced:l(x),codeFencedFence:v,codeFencedFenceInfo:h,codeFencedFenceMeta:y,codeFlowValue:B,codeIndented:l(S),codeText:l(q),codeTextData:B,data:B,definition:l(),definitionDestinationString:_,definitionLabelString:T,definitionTitleString:C,emphasis:l(),hardBreakEscape:l(z),hardBreakTrailing:l(z),htmlFlow:l(H),htmlFlowData:B,htmlText:l(j),htmlTextData:B,image:l(Y),label:ee,labelText:X,lineEnding:V,link:l(U),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ve,resourceDestinationString:$,resourceTitleString:G,resource:re,setextHeading:l(D),setextHeadingLineSequence:M,setextHeadingText:P,strong:l(),thematicBreak:l()}};UV(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Te){let Ve={type:"root",children:[]};const yt={stack:[Ve],tokenStack:[],config:e,enter:i,exit:c,buffer:s,resume:d,data:n},jt=[];let fe=-1;for(;++fe<Te.length;)if(Te[fe][1].type==="listOrdered"||Te[fe][1].type==="listUnordered")if(Te[fe][0]==="enter")jt.push(fe);else{const He=jt.pop();fe=o(Te,He,fe)}for(fe=-1;++fe<Te.length;){const He=e[Te[fe][0]];zV.call(He,Te[fe][1].type)&&He[Te[fe][1].type].call(Object.assign({sliceSerialize:Te[fe][2].sliceSerialize},yt),Te[fe][1])}if(yt.tokenStack.length>0){const He=yt.tokenStack[yt.tokenStack.length-1];(He[1]||WB).call(yt,void 0,He[0])}for(Ve.position={start:Pd(Te.length>0?Te[0][1].start:{line:1,column:1,offset:0}),end:Pd(Te.length>0?Te[Te.length-2][1].end:{line:1,column:1,offset:0})},fe=-1;++fe<e.transforms.length;)Ve=e.transforms[fe](Ve)||Ve;return Ve}function o(Te,Ve,yt){let jt=Ve-1,fe=-1,He=!1,gt,Bt,fn,Pn;for(;++jt<=yt;){const ln=Te[jt];switch(ln[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ln[0]==="enter"?fe++:fe--,Pn=void 0;break}case"lineEndingBlank":{ln[0]==="enter"&&(gt&&!Pn&&!fe&&!fn&&(fn=jt),Pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Pn=void 0}if(!fe&&ln[0]==="enter"&&ln[1].type==="listItemPrefix"||fe===-1&&ln[0]==="exit"&&(ln[1].type==="listUnordered"||ln[1].type==="listOrdered")){if(gt){let Or=jt;for(Bt=void 0;Or--;){const Hn=Te[Or];if(Hn[1].type==="lineEnding"||Hn[1].type==="lineEndingBlank"){if(Hn[0]==="exit")continue;Bt&&(Te[Bt][1].type="lineEndingBlank",He=!0),Hn[1].type="lineEnding",Bt=Or}else if(!(Hn[1].type==="linePrefix"||Hn[1].type==="blockQuotePrefix"||Hn[1].type==="blockQuotePrefixWhitespace"||Hn[1].type==="blockQuoteMarker"||Hn[1].type==="listItemIndent"))break}fn&&(!Bt||fn<Bt)&&(gt._spread=!0),gt.end=Object.assign({},Bt?Te[Bt][1].start:ln[1].end),Te.splice(Bt||jt,0,["exit",gt,ln[2]]),jt++,yt++}if(ln[1].type==="listItemPrefix"){const Or={type:"listItem",_spread:!1,start:Object.assign({},ln[1].start),end:void 0};gt=Or,Te.splice(jt,0,["enter",Or,ln[2]]),jt++,yt++,fn=void 0,Pn=!0}}}return Te[Ve][1]._spread=He,yt}function a(Te,Ve){return yt;function yt(jt){i.call(this,Te(jt),jt),Ve&&Ve.call(this,jt)}}function s(){this.stack.push({type:"fragment",children:[]})}function i(Te,Ve,yt){this.stack[this.stack.length-1].children.push(Te),this.stack.push(Te),this.tokenStack.push([Ve,yt||void 0]),Te.position={start:Pd(Ve.start),end:void 0}}function l(Te){return Ve;function Ve(yt){Te&&Te.call(this,yt),c.call(this,yt)}}function c(Te,Ve){const yt=this.stack.pop(),jt=this.tokenStack.pop();if(jt)jt[0].type!==Te.type&&(Ve?Ve.call(this,Te,jt[0]):(jt[1]||WB).call(this,Te,jt[0]));else throw new Error("Cannot close `"+Te.type+"` ("+_y({start:Te.start,end:Te.end})+"): its not open");yt.position.end=Pd(Te.end)}function d(){return bD(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function m(Te){if(this.data.expectingFirstListItemValue){const Ve=this.stack[this.stack.length-2];Ve.start=Number.parseInt(this.sliceSerialize(Te),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.lang=Te}function y(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.meta=Te}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Te.replace(/(\r?\n|\r)$/g,"")}function T(Te){const Ve=this.resume(),yt=this.stack[this.stack.length-1];yt.label=Ve,yt.identifier=Ql(this.sliceSerialize(Te)).toLowerCase()}function C(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Te}function _(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Te}function I(Te){const Ve=this.stack[this.stack.length-1];if(!Ve.depth){const yt=this.sliceSerialize(Te).length;Ve.depth=yt}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function M(Te){const Ve=this.stack[this.stack.length-1];Ve.depth=this.sliceSerialize(Te).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function F(Te){const yt=this.stack[this.stack.length-1].children;let jt=yt[yt.length-1];(!jt||jt.type!=="text")&&(jt=Kn(),jt.position={start:Pd(Te.start),end:void 0},yt.push(jt)),this.stack.push(jt)}function B(Te){const Ve=this.stack.pop();Ve.value+=this.sliceSerialize(Te),Ve.position.end=Pd(Te.end)}function V(Te){const Ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const yt=Ve.children[Ve.children.length-1];yt.position.end=Pd(Te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ve.type)&&(F.call(this,Te),B.call(this,Te))}function z(){this.data.atHardBreak=!0}function H(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Te}function j(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Te}function q(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Te}function U(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=Ve,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function Y(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=Ve,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function X(Te){const Ve=this.sliceSerialize(Te),yt=this.stack[this.stack.length-2];yt.label=rbe(Ve),yt.identifier=Ql(Ve).toLowerCase()}function ee(){const Te=this.stack[this.stack.length-1],Ve=this.resume(),yt=this.stack[this.stack.length-1];if(this.data.inReference=!0,yt.type==="link"){const jt=Te.children;yt.children=jt}else yt.alt=Ve}function $(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Te}function G(){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Te}function re(){this.data.inReference=void 0}function K(){this.data.referenceType="collapsed"}function ve(Te){const Ve=this.resume(),yt=this.stack[this.stack.length-1];yt.label=Ve,yt.identifier=Ql(this.sliceSerialize(Te)).toLowerCase(),this.data.referenceType="full"}function xe(Te){this.data.characterReferenceType=Te.type}function Oe(Te){const Ve=this.sliceSerialize(Te),yt=this.data.characterReferenceType;let jt;yt?(jt=PV(Ve,yt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):jt=yD(Ve);const fe=this.stack[this.stack.length-1];fe.value+=jt}function Ne(Te){const Ve=this.stack.pop();Ve.position.end=Pd(Te.end)}function Fe(Te){B.call(this,Te);const Ve=this.stack[this.stack.length-1];Ve.url=this.sliceSerialize(Te)}function Ke(Te){B.call(this,Te);const Ve=this.stack[this.stack.length-1];Ve.url="mailto:"+this.sliceSerialize(Te)}function Qe(){return{type:"blockquote",children:[]}}function Wt(){return{type:"code",lang:null,meta:null,value:""}}function hn(){return{type:"inlineCode",value:""}}function Yt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ut(){return{type:"emphasis",children:[]}}function an(){return{type:"heading",depth:0,children:[]}}function wt(){return{type:"break"}}function qn(){return{type:"html",value:""}}function Gn(){return{type:"image",title:null,url:"",alt:null}}function Wn(){return{type:"link",title:null,url:"",children:[]}}function Yr(Te){return{type:"list",ordered:Te.type==="listOrdered",start:null,spread:Te._spread,children:[]}}function ko(Te){return{type:"listItem",spread:Te._spread,checked:null,children:[]}}function hi(){return{type:"paragraph",children:[]}}function gi(){return{type:"strong",children:[]}}function Kn(){return{type:"text",value:""}}function Io(){return{type:"thematicBreak"}}}function Pd(t){return{line:t.line,column:t.column,offset:t.offset}}function UV(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?UV(t,r):ibe(t,r)}}function ibe(t,e){let n;for(n in e)if(zV.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function WB(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+_y({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+_y({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+_y({start:e.start,end:e.end})+") is still open")}function lbe(t){const e=this;e.parser=n;function n(r){return abe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function cbe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function ube(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function dbe(t,e){const n=e.value?e.value+`
`:"",r={},o=e.lang?e.lang.split(/\s+/):[];o.length>0&&(r.className=["language-"+o[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function pbe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function fbe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mbe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),o=yg(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let s,i=t.footnoteCounts.get(r);i===void 0?(i=0,t.footnoteOrder.push(r),s=t.footnoteOrder.length):s=a+1,i+=1,t.footnoteCounts.set(r,i);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(i>1?"-"+i:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function hbe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gbe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function qV(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const o=t.all(e),a=o[0];a&&a.type==="text"?a.value="["+a.value:o.unshift({type:"text",value:"["});const s=o[o.length-1];return s&&s.type==="text"?s.value+=r:o.push({type:"text",value:r}),o}function bbe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return qV(t,e);const o={src:yg(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(o.title=r.title);const a={type:"element",tagName:"img",properties:o,children:[]};return t.patch(e,a),t.applyData(e,a)}function ybe(t,e){const n={src:yg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function vbe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function xbe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return qV(t,e);const o={href:yg(r.url||"")};r.title!==null&&r.title!==void 0&&(o.title=r.title);const a={type:"element",tagName:"a",properties:o,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function Sbe(t,e){const n={href:yg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Ebe(t,e,n){const r=t.all(e),o=n?Tbe(n):HV(e),a={},s=[];if(typeof e.checked=="boolean"){const d=r[0];let u;d&&d.type==="element"&&d.tagName==="p"?u=d:(u={type:"element",tagName:"p",properties:{},children:[]},r.unshift(u)),u.children.length>0&&u.children.unshift({type:"text",value:" "}),u.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let i=-1;for(;++i<r.length;){const d=r[i];(o||i!==0||d.type!=="element"||d.tagName!=="p")&&s.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!o?s.push(...d.children):s.push(d)}const l=r[r.length-1];l&&(o||l.type!=="element"||l.tagName!=="p")&&s.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:s};return t.patch(e,c),t.applyData(e,c)}function Tbe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=HV(n[r])}return e}function HV(t){const e=t.spread;return e??t.children.length>1}function wbe(t,e){const n={},r=t.all(e);let o=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++o<r.length;){const s=r[o];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function Cbe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Abe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function _be(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function kbe(t,e){const n=t.all(e),r=n.shift(),o=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],s),o.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},i=Xc(e.children[1]),l=rw(e.children[e.children.length-1]);i&&l&&(s.position={start:i,end:l}),o.push(s)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(o,!0)};return t.patch(e,a),t.applyData(e,a)}function Ibe(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,i=s?s.length:e.children.length;let l=-1;const c=[];for(;++l<i;){const u=e.children[l],m={},h=s?s[l]:void 0;h&&(m.align=h);let y={type:"element",tagName:a,properties:m,children:[]};u&&(y.children=t.all(u),t.patch(u,y),y=t.applyData(u,y)),c.push(y)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,d),t.applyData(e,d)}function Pbe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const YB=9,XB=32;function Obe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),o=0;const a=[];for(;r;)a.push(JB(e.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(e);return a.push(JB(e.slice(o),o>0,!1)),a.join("")}function JB(t,e,n){let r=0,o=t.length;if(e){let a=t.codePointAt(r);for(;a===YB||a===XB;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(o-1);for(;a===YB||a===XB;)o--,a=t.codePointAt(o-1)}return o>r?t.slice(r,o):""}function Mbe(t,e){const n={type:"text",value:Obe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Rbe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Dbe={blockquote:cbe,break:ube,code:dbe,delete:pbe,emphasis:fbe,footnoteReference:mbe,heading:hbe,html:gbe,imageReference:bbe,image:ybe,inlineCode:vbe,linkReference:xbe,link:Sbe,listItem:Ebe,list:wbe,paragraph:Cbe,root:Abe,strong:_be,table:kbe,tableCell:Pbe,tableRow:Ibe,text:Mbe,thematicBreak:Rbe,toml:Qx,yaml:Qx,definition:Qx,footnoteDefinition:Qx};function Qx(){}const $V=-1,sw=0,Iy=1,cE=2,xD=3,SD=4,ED=5,TD=6,VV=7,GV=8,QB=typeof self=="object"?self:globalThis,Nbe=(t,e)=>{const n=(o,a)=>(t.set(a,o),o),r=o=>{if(t.has(o))return t.get(o);const[a,s]=e[o];switch(a){case sw:case $V:return n(s,o);case Iy:{const i=n([],o);for(const l of s)i.push(r(l));return i}case cE:{const i=n({},o);for(const[l,c]of s)i[r(l)]=r(c);return i}case xD:return n(new Date(s),o);case SD:{const{source:i,flags:l}=s;return n(new RegExp(i,l),o)}case ED:{const i=n(new Map,o);for(const[l,c]of s)i.set(r(l),r(c));return i}case TD:{const i=n(new Set,o);for(const l of s)i.add(r(l));return i}case VV:{const{name:i,message:l}=s;return n(new QB[i](l),o)}case GV:return n(BigInt(s),o);case"BigInt":return n(Object(BigInt(s)),o);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:i}=new Uint8Array(s);return n(new DataView(i),s)}}return n(new QB[a](s),o)};return r},ZB=t=>Nbe(new Map,t)(0),Vm="",{toString:Lbe}={},{keys:jbe}=Object,Mb=t=>{const e=typeof t;if(e!=="object"||!t)return[sw,e];const n=Lbe.call(t).slice(8,-1);switch(n){case"Array":return[Iy,Vm];case"Object":return[cE,Vm];case"Date":return[xD,Vm];case"RegExp":return[SD,Vm];case"Map":return[ED,Vm];case"Set":return[TD,Vm];case"DataView":return[Iy,n]}return n.includes("Array")?[Iy,n]:n.includes("Error")?[VV,n]:[cE,n]},Zx=([t,e])=>t===sw&&(e==="function"||e==="symbol"),Bbe=(t,e,n,r)=>{const o=(s,i)=>{const l=r.push(s)-1;return n.set(i,l),l},a=s=>{if(n.has(s))return n.get(s);let[i,l]=Mb(s);switch(i){case sw:{let d=s;switch(l){case"bigint":i=GV,d=s.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return o([$V],s)}return o([i,d],s)}case Iy:{if(l){let m=s;return l==="DataView"?m=new Uint8Array(s.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(s)),o([l,[...m]],s)}const d=[],u=o([i,d],s);for(const m of s)d.push(a(m));return u}case cE:{if(l)switch(l){case"BigInt":return o([l,s.toString()],s);case"Boolean":case"Number":case"String":return o([l,s.valueOf()],s)}if(e&&"toJSON"in s)return a(s.toJSON());const d=[],u=o([i,d],s);for(const m of jbe(s))(t||!Zx(Mb(s[m])))&&d.push([a(m),a(s[m])]);return u}case xD:return o([i,s.toISOString()],s);case SD:{const{source:d,flags:u}=s;return o([i,{source:d,flags:u}],s)}case ED:{const d=[],u=o([i,d],s);for(const[m,h]of s)(t||!(Zx(Mb(m))||Zx(Mb(h))))&&d.push([a(m),a(h)]);return u}case TD:{const d=[],u=o([i,d],s);for(const m of s)(t||!Zx(Mb(m)))&&d.push(a(m));return u}}const{message:c}=s;return o([i,{name:l,message:c}],s)};return a},eF=(t,{json:e,lossy:n}={})=>{const r=[];return Bbe(!(e||n),!!e,new Map,r)(t),r},Hh=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?ZB(eF(t,e)):structuredClone(t):(t,e)=>ZB(eF(t,e));function Fbe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function zbe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Ube(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Fbe,r=t.options.footnoteBackLabel||zbe,o=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",s=t.options.footnoteLabelProperties||{className:["sr-only"]},i=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const d=t.all(c),u=String(c.identifier).toUpperCase(),m=yg(u.toLowerCase());let h=0;const y=[],v=t.footnoteCounts.get(u);for(;v!==void 0&&++h<=v;){y.length>0&&y.push({type:"text",value:" "});let T=typeof n=="string"?n:n(l,h);typeof T=="string"&&(T={type:"text",value:T}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const x=d[d.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const T=x.children[x.children.length-1];T&&T.type==="text"?T.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...y)}else d.push(...y);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(d,!0)};t.patch(c,S),i.push(S)}if(i.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Hh(s),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(i,!0)},{type:"text",value:`
`}]}}const Y0=(function(t){if(t==null)return Vbe;if(typeof t=="function")return iw(t);if(typeof t=="object")return Array.isArray(t)?qbe(t):Hbe(t);if(typeof t=="string")return $be(t);throw new Error("Expected function, string, or object as test")});function qbe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Y0(t[n]);return iw(r);function r(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function Hbe(t){const e=t;return iw(n);function n(r){const o=r;let a;for(a in t)if(o[a]!==e[a])return!1;return!0}}function $be(t){return iw(e);function e(n){return n&&n.type===t}}function iw(t){return e;function e(n,r,o){return!!(Gbe(n)&&t.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function Vbe(){return!0}function Gbe(t){return t!==null&&typeof t=="object"&&"type"in t}const KV=[],Kbe=!0,GO=!1,Wbe="skip";function WV(t,e,n,r){let o;typeof e=="function"&&typeof n!="function"?(r=n,n=e):o=e;const a=Y0(o),s=r?-1:1;i(t,void 0,[])();function i(l,c,d){const u=l&&typeof l=="object"?l:{};if(typeof u.type=="string"){const h=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return m;function m(){let h=KV,y,v,x;if((!e||a(l,c,d[d.length-1]||void 0))&&(h=Ybe(n(l,d)),h[0]===GO))return h;if("children"in l&&l.children){const S=l;if(S.children&&h[0]!==Wbe)for(v=(r?S.children.length:-1)+s,x=d.concat(S);v>-1&&v<S.children.length;){const T=S.children[v];if(y=i(T,v,x)(),y[0]===GO)return y;v=typeof y[1]=="number"?y[1]:v+s}}return h}}}function Ybe(t){return Array.isArray(t)?t:typeof t=="number"?[Kbe,t]:t==null?KV:[t]}function X0(t,e,n,r){let o,a,s;typeof e=="function"&&typeof n!="function"?(a=void 0,s=e,o=n):(a=e,s=n,o=r),WV(t,a,i,o);function i(l,c){const d=c[c.length-1],u=d?d.children.indexOf(l):void 0;return s(l,u,d)}}const KO={}.hasOwnProperty,Xbe={};function Jbe(t,e){const n=e||Xbe,r=new Map,o=new Map,a=new Map,s={...Dbe,...n.handlers},i={all:c,applyData:Zbe,definitionById:r,footnoteById:o,footnoteCounts:a,footnoteOrder:[],handlers:s,one:l,options:n,patch:Qbe,wrap:tye};return X0(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const u=d.type==="definition"?r:o,m=String(d.identifier).toUpperCase();u.has(m)||u.set(m,d)}}),i;function l(d,u){const m=d.type,h=i.handlers[m];if(KO.call(i.handlers,m)&&h)return h(i,d,u);if(i.options.passThrough&&i.options.passThrough.includes(m)){if("children"in d){const{children:v,...x}=d,S=Hh(x);return S.children=i.all(d),S}return Hh(d)}return(i.options.unknownHandler||eye)(i,d,u)}function c(d){const u=[];if("children"in d){const m=d.children;let h=-1;for(;++h<m.length;){const y=i.one(m[h],d);if(y){if(h&&m[h-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=tF(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=tF(v.value))}Array.isArray(y)?u.push(...y):u.push(y)}}}return u}}function Qbe(t,e){t.position&&(e.position=zme(t))}function Zbe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,o=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&a&&Object.assign(n.properties,Hh(a)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function eye(t,e){const n=e.data||{},r="value"in e&&!(KO.call(n,"hProperties")||KO.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function tye(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function tF(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function nF(t,e){const n=Jbe(t,e),r=n.one(t,void 0),o=Ube(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&a.children.push({type:"text",value:`
`},o),a}function nye(t,e){return t&&"run"in t?async function(n,r){const o=nF(n,{file:r,...e});await t.run(o,r)}:function(n,r){return nF(n,{file:r,...t||e})}}function rF(t){if(t)throw t}var b2,oF;function rye(){if(oF)return b2;oF=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},a=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var d=t.call(c,"constructor"),u=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!d&&!u)return!1;var m;for(m in c);return typeof m>"u"||t.call(c,m)},s=function(c,d){n&&d.name==="__proto__"?n(c,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):c[d.name]=d.newValue},i=function(c,d){if(d==="__proto__")if(t.call(c,d)){if(r)return r(c,d).value}else return;return c[d]};return b2=function l(){var c,d,u,m,h,y,v=arguments[0],x=1,S=arguments.length,T=!1;for(typeof v=="boolean"&&(T=v,v=arguments[1]||{},x=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});x<S;++x)if(c=arguments[x],c!=null)for(d in c)u=i(v,d),m=i(c,d),v!==m&&(T&&m&&(a(m)||(h=o(m)))?(h?(h=!1,y=u&&o(u)?u:[]):y=u&&a(u)?u:{},s(v,{name:d,newValue:l(T,y,m)})):typeof m<"u"&&s(v,{name:d,newValue:m}));return v},b2}var oye=rye();const y2=Wi(oye);function WO(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function aye(){const t=[],e={run:n,use:r};return e;function n(...o){let a=-1;const s=o.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);i(null,...o);function i(l,...c){const d=t[++a];let u=-1;if(l){s(l);return}for(;++u<o.length;)(c[u]===null||c[u]===void 0)&&(c[u]=o[u]);o=c,d?sye(d,i)(...c):s(null,...c)}}function r(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return t.push(o),e}}function sye(t,e){let n;return r;function r(...s){const i=t.length>s.length;let l;i&&s.push(o);try{l=t.apply(this,s)}catch(c){const d=c;if(i&&n)throw d;return o(d)}i||(l&&l.then&&typeof l.then=="function"?l.then(a,o):l instanceof Error?o(l):a(l))}function o(s,...i){n||(n=!0,e(s,...i))}function a(s){o(null,s)}}const _c={basename:iye,dirname:lye,extname:cye,join:uye,sep:"/"};function iye(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');J0(t);let n=0,r=-1,o=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;o--;)if(t.codePointAt(o)===47){if(a){n=o+1;break}}else r<0&&(a=!0,r=o+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let s=-1,i=e.length-1;for(;o--;)if(t.codePointAt(o)===47){if(a){n=o+1;break}}else s<0&&(a=!0,s=o+1),i>-1&&(t.codePointAt(o)===e.codePointAt(i--)?i<0&&(r=o):(i=-1,r=s));return n===r?r=s:r<0&&(r=t.length),t.slice(n,r)}function lye(t){if(J0(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function cye(t){J0(t);let e=t.length,n=-1,r=0,o=-1,a=0,s;for(;e--;){const i=t.codePointAt(e);if(i===47){if(s){r=e+1;break}continue}n<0&&(s=!0,n=e+1),i===46?o<0?o=e:a!==1&&(a=1):o>-1&&(a=-1)}return o<0||n<0||a===0||a===1&&o===n-1&&o===r+1?"":t.slice(o,n)}function uye(...t){let e=-1,n;for(;++e<t.length;)J0(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":dye(n)}function dye(t){J0(t);const e=t.codePointAt(0)===47;let n=pye(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function pye(t,e){let n="",r=0,o=-1,a=0,s=-1,i,l;for(;++s<=t.length;){if(s<t.length)i=t.codePointAt(s);else{if(i===47)break;i=47}if(i===47){if(!(o===s-1||a===1))if(o!==s-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),o=s,a=0;continue}}else if(n.length>0){n="",r=0,o=s,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(o+1,s):n=t.slice(o+1,s),r=s-o-1;o=s,a=0}else i===46&&a>-1?a++:a=-1}return n}function J0(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const fye={cwd:mye};function mye(){return"/"}function YO(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function hye(t){if(typeof t=="string")t=new URL(t);else if(!YO(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return gye(t)}function gye(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(e)}const v2=["history","path","basename","stem","extname","dirname"];class YV{constructor(e){let n;e?YO(e)?n={path:e}:typeof e=="string"||bye(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":fye.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<v2.length;){const a=v2[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let o;for(o in n)v2.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?_c.basename(this.path):void 0}set basename(e){S2(e,"basename"),x2(e,"basename"),this.path=_c.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?_c.dirname(this.path):void 0}set dirname(e){aF(this.basename,"dirname"),this.path=_c.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?_c.extname(this.path):void 0}set extname(e){if(x2(e,"extname"),aF(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_c.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){YO(e)&&(e=hye(e)),S2(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?_c.basename(this.path,this.extname):void 0}set stem(e){S2(e,"stem"),x2(e,"stem"),this.path=_c.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const o=this.message(e,n,r);throw o.fatal=!0,o}info(e,n,r){const o=this.message(e,n,r);return o.fatal=void 0,o}message(e,n,r){const o=new ns(e,n,r);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function x2(t,e){if(t&&t.includes(_c.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+_c.sep+"`")}function S2(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function aF(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function bye(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yye=(function(t){const r=this.constructor.prototype,o=r[t],a=function(){return o.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),vye={}.hasOwnProperty;class wD extends yye{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=aye()}copy(){const e=new wD;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(y2(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(w2("data",this.frozen),this.namespace[e]=n,this):vye.call(this.namespace,e)&&this.namespace[e]||void 0:e?(w2("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const o=n.call(e,...r);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=eS(e),r=this.parser||this.Parser;return E2("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),E2("process",this.parser||this.Parser),T2("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(a,s){const i=eS(e),l=r.parse(i);r.run(l,i,function(d,u,m){if(d||!u||!m)return c(d);const h=u,y=r.stringify(h,m);Eye(y)?m.value=y:m.result=y,c(d,m)});function c(d,u){d||!u?s(d):a?a(u):n(void 0,u)}}}processSync(e){let n=!1,r;return this.freeze(),E2("processSync",this.parser||this.Parser),T2("processSync",this.compiler||this.Compiler),this.process(e,o),iF("processSync","process",n),r;function o(a,s){n=!0,rF(a),r=s}}run(e,n,r){sF(e),this.freeze();const o=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(s,i){const l=eS(n);o.run(e,l,c);function c(d,u,m){const h=u||e;d?i(d):s?s(h):r(void 0,h,m)}}}runSync(e,n){let r=!1,o;return this.run(e,n,a),iF("runSync","run",r),o;function a(s,i){rF(s),o=i,r=!0}}stringify(e,n){this.freeze();const r=eS(n),o=this.compiler||this.Compiler;return T2("stringify",o),sF(e),o(e,r)}use(e,...n){const r=this.attachers,o=this.namespace;if(w2("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?i(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...u]=c;l(d,u)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(c.plugins),c.settings&&(o.settings=y2(!0,o.settings,c.settings))}function i(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const u=c[d];a(u)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let u=-1,m=-1;for(;++u<r.length;)if(r[u][0]===c){m=u;break}if(m===-1)r.push([c,...d]);else if(d.length>0){let[h,...y]=d;const v=r[m][1];WO(v)&&WO(h)&&(h=y2(!0,v,h)),r[m]=[c,h,...y]}}}}const xye=new wD().freeze();function E2(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function T2(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function w2(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function sF(t){if(!WO(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function iF(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function eS(t){return Sye(t)?t:new YV(t)}function Sye(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Eye(t){return typeof t=="string"||Tye(t)}function Tye(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const wye="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",lF=[],cF={allowDangerousHtml:!0},Cye=/^(https?|ircs?|mailto|xmpp)$/i,Aye=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _ye(t){const e=kye(t),n=Iye(t);return Pye(e.runSync(e.parse(n),n),t)}function kye(t){const e=t.rehypePlugins||lF,n=t.remarkPlugins||lF,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...cF}:cF;return xye().use(lbe).use(n).use(nye,r).use(e)}function Iye(t){const e=t.children||"",n=new YV;return typeof e=="string"&&(n.value=e),n}function Pye(t,e){const n=e.allowedElements,r=e.allowElement,o=e.components,a=e.disallowedElements,s=e.skipHtml,i=e.unwrapDisallowed,l=e.urlTransform||Oye;for(const d of Aye)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+wye+d.id,void 0);return X0(t,c),Vme(t,{Fragment:g.Fragment,components:o,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0});function c(d,u,m){if(d.type==="raw"&&m&&typeof u=="number")return s?m.children.splice(u,1):m.children[u]={type:"text",value:d.value},u;if(d.type==="element"){let h;for(h in m2)if(Object.hasOwn(m2,h)&&Object.hasOwn(d.properties,h)){const y=d.properties[h],v=m2[h];(v===null||v.includes(d.tagName))&&(d.properties[h]=l(String(y||""),h,d))}}if(d.type==="element"){let h=n?!n.includes(d.tagName):a?a.includes(d.tagName):!1;if(!h&&r&&typeof u=="number"&&(h=!r(d,u,m)),h&&m&&typeof u=="number")return i&&d.children?m.children.splice(u,1,...d.children):m.children.splice(u,1),u}}}function Oye(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),o=t.indexOf("/");return e===-1||o!==-1&&e>o||n!==-1&&e>n||r!==-1&&e>r||Cye.test(t.slice(0,e))?t:""}const uF=/[#.]/g;function Mye(t,e){const n=t||"",r={};let o=0,a,s;for(;o<n.length;){uF.lastIndex=o;const i=uF.exec(n),l=n.slice(o,i?i.index:n.length);l&&(a?a==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:s=l,o+=l.length),i&&(a=i[0],o++)}return{type:"element",tagName:s||e||"div",properties:r,children:[]}}function XV(t,e,n){const r=n?Lye(n):void 0;function o(a,s,...i){let l;if(a==null){l={type:"root",children:[]};const c=s;i.unshift(c)}else{l=Mye(a,e);const c=l.tagName.toLowerCase(),d=r?r.get(c):void 0;if(l.tagName=d||c,Rye(s))i.unshift(s);else for(const[u,m]of Object.entries(s))Dye(t,l.properties,u,m)}for(const c of i)XO(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return o}function Rye(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const o=e[r];if(o&&typeof o=="object"){if(!Array.isArray(o))return!0;const a=o;for(const s of a)if(typeof s!="number"&&typeof s!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Dye(t,e,n,r){const o=fD(t,n);let a;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;a=r}else typeof r=="boolean"?a=r:typeof r=="string"?o.spaceSeparated?a=OB(r):o.commaSeparated?a=AB(r):o.commaOrSpaceSeparated?a=OB(AB(r).join(" ")):a=dF(o,o.property,r):Array.isArray(r)?a=[...r]:a=o.property==="style"?Nye(r):String(r);if(Array.isArray(a)){const s=[];for(const i of a)s.push(dF(o,o.property,i));a=s}o.property==="className"&&Array.isArray(e.className)&&(a=e.className.concat(a)),e[o.property]=a}}function XO(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)XO(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?XO(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function dF(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||o0(n)===o0(e)))return!0}return n}function Nye(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function Lye(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const jye=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Bye=XV(nw,"div"),Fye=XV(bg,"g",jye);function zye(t){const e=String(t),n=[];return{toOffset:o,toPoint:r};function r(a){if(typeof a=="number"&&a>-1&&a<=e.length){let s=0;for(;;){let i=n[s];if(i===void 0){const l=pF(e,n[s-1]);i=l===-1?e.length+1:l+1,n[s]=i}if(i>a)return{line:s+1,column:a-(s>0?n[s-1]:0)+1,offset:a};s++}}}function o(a){if(a&&typeof a.line=="number"&&typeof a.column=="number"&&!Number.isNaN(a.line)&&!Number.isNaN(a.column)){for(;n.length<a.line;){const i=n[n.length-1],l=pF(e,i),c=l===-1?e.length+1:l+1;if(i===c)break;n.push(c)}const s=(a.line>1?n[a.line-2]:0)+a.column-1;if(s<n[a.line-1])return s}}}function pF(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const ff={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},JV={}.hasOwnProperty,Uye=Object.prototype;function qye(t,e){const n=e||{};return CD({file:n.file||void 0,location:!1,schema:n.space==="svg"?bg:nw,verbose:n.verbose||!1},t)}function CD(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},h1(t,r,n),n}case"#document":case"#document-fragment":{const r=e,o="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:QV(t,e.childNodes),data:{quirksMode:o}},t.file&&t.location){const a=String(t.file),s=zye(a),i=s.toPoint(0),l=s.toPoint(a.length);n.position={start:i,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},h1(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},h1(t,r,n),n}default:return n=Hye(t,e),n}}function QV(t,e){let n=-1;const r=[];for(;++n<e.length;){const o=CD(t,e[n]);r.push(o)}return r}function Hye(t,e){const n=t.schema;t.schema=e.namespaceURI===ff.svg?bg:nw;let r=-1;const o={};for(;++r<e.attrs.length;){const i=e.attrs[r],l=(i.prefix?i.prefix+":":"")+i.name;JV.call(Uye,l)||(o[l]=i.value)}const s=(t.schema.space==="svg"?Fye:Bye)(e.tagName,o,QV(t,e.childNodes));if(h1(t,e,s),s.tagName==="template"){const i=e,l=i.sourceCodeLocation,c=l&&l.startTag&&Sh(l.startTag),d=l&&l.endTag&&Sh(l.endTag),u=CD(t,i.content);c&&d&&t.file&&(u.position={start:c.end,end:d.start}),s.content=u}return t.schema=n,s}function h1(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=$ye(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function $ye(t,e,n){const r=Sh(n);if(e.type==="element"){const o=e.children[e.children.length-1];if(r&&!n.endTag&&o&&o.position&&o.position.end&&(r.end=Object.assign({},o.position.end)),t.verbose){const a={};let s;if(n.attrs)for(s in n.attrs)JV.call(n.attrs,s)&&(a[fD(t.schema,s).property]=Sh(n.attrs[s]));n.startTag;const i=Sh(n.startTag),l=n.endTag?Sh(n.endTag):void 0,c={opening:i};l&&(c.closing=l),c.properties=a,e.data={position:c}}}return r}function Sh(t){const e=fF({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=fF({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function fF(t){return t.line&&t.column?t:void 0}let Q0=class{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}};Q0.prototype.property={};Q0.prototype.normal={};Q0.prototype.space=null;function ZV(t,e){const n={},r={};let o=-1;for(;++o<t.length;)Object.assign(n,t[o].property),Object.assign(r,t[o].normal);return new Q0(n,r,e)}function JO(t){return t.toLowerCase()}class Dl{constructor(e,n){this.property=e,this.attribute=n}}Dl.prototype.space=null;Dl.prototype.boolean=!1;Dl.prototype.booleanish=!1;Dl.prototype.overloadedBoolean=!1;Dl.prototype.number=!1;Dl.prototype.commaSeparated=!1;Dl.prototype.spaceSeparated=!1;Dl.prototype.commaOrSpaceSeparated=!1;Dl.prototype.mustUseProperty=!1;Dl.prototype.defined=!1;let Vye=0;const Zt=em(),Uo=em(),eG=em(),Xe=em(),xr=em(),Oh=em(),Oi=em();function em(){return 2**++Vye}const QO=Object.freeze(Object.defineProperty({__proto__:null,boolean:Zt,booleanish:Uo,commaOrSpaceSeparated:Oi,commaSeparated:Oh,number:Xe,overloadedBoolean:eG,spaceSeparated:xr},Symbol.toStringTag,{value:"Module"})),C2=Object.keys(QO);class AD extends Dl{constructor(e,n,r,o){let a=-1;if(super(e,n),mF(this,"space",o),typeof r=="number")for(;++a<C2.length;){const s=C2[a];mF(this,C2[a],(r&QO[s])===QO[s])}}}AD.prototype.defined=!0;function mF(t,e,n){n&&(t[e]=n)}const Gye={}.hasOwnProperty;function vg(t){const e={},n={};let r;for(r in t.properties)if(Gye.call(t.properties,r)){const o=t.properties[r],a=new AD(r,t.transform(t.attributes||{},r),o,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[JO(r)]=r,n[JO(a.attribute)]=r}return new Q0(e,n,t.space)}const tG=vg({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),nG=vg({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function rG(t,e){return e in t?t[e]:e}function oG(t,e){return rG(t,e.toLowerCase())}const aG=vg({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:oG,properties:{xmlns:null,xmlnsXLink:null}}),sG=vg({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Uo,ariaAutoComplete:null,ariaBusy:Uo,ariaChecked:Uo,ariaColCount:Xe,ariaColIndex:Xe,ariaColSpan:Xe,ariaControls:xr,ariaCurrent:null,ariaDescribedBy:xr,ariaDetails:null,ariaDisabled:Uo,ariaDropEffect:xr,ariaErrorMessage:null,ariaExpanded:Uo,ariaFlowTo:xr,ariaGrabbed:Uo,ariaHasPopup:null,ariaHidden:Uo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:xr,ariaLevel:Xe,ariaLive:null,ariaModal:Uo,ariaMultiLine:Uo,ariaMultiSelectable:Uo,ariaOrientation:null,ariaOwns:xr,ariaPlaceholder:null,ariaPosInSet:Xe,ariaPressed:Uo,ariaReadOnly:Uo,ariaRelevant:null,ariaRequired:Uo,ariaRoleDescription:xr,ariaRowCount:Xe,ariaRowIndex:Xe,ariaRowSpan:Xe,ariaSelected:Uo,ariaSetSize:Xe,ariaSort:null,ariaValueMax:Xe,ariaValueMin:Xe,ariaValueNow:Xe,ariaValueText:null,role:null}}),Kye=vg({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:oG,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Oh,acceptCharset:xr,accessKey:xr,action:null,allow:null,allowFullScreen:Zt,allowPaymentRequest:Zt,allowUserMedia:Zt,alt:null,as:null,async:Zt,autoCapitalize:null,autoComplete:xr,autoFocus:Zt,autoPlay:Zt,blocking:xr,capture:null,charSet:null,checked:Zt,cite:null,className:xr,cols:Xe,colSpan:null,content:null,contentEditable:Uo,controls:Zt,controlsList:xr,coords:Xe|Oh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Zt,defer:Zt,dir:null,dirName:null,disabled:Zt,download:eG,draggable:Uo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Zt,formTarget:null,headers:xr,height:Xe,hidden:Zt,high:Xe,href:null,hrefLang:null,htmlFor:xr,httpEquiv:xr,id:null,imageSizes:null,imageSrcSet:null,inert:Zt,inputMode:null,integrity:null,is:null,isMap:Zt,itemId:null,itemProp:xr,itemRef:xr,itemScope:Zt,itemType:xr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Zt,low:Xe,manifest:null,max:null,maxLength:Xe,media:null,method:null,min:null,minLength:Xe,multiple:Zt,muted:Zt,name:null,nonce:null,noModule:Zt,noValidate:Zt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Zt,optimum:Xe,pattern:null,ping:xr,placeholder:null,playsInline:Zt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Zt,referrerPolicy:null,rel:xr,required:Zt,reversed:Zt,rows:Xe,rowSpan:Xe,sandbox:xr,scope:null,scoped:Zt,seamless:Zt,selected:Zt,shadowRootClonable:Zt,shadowRootDelegatesFocus:Zt,shadowRootMode:null,shape:null,size:Xe,sizes:null,slot:null,span:Xe,spellCheck:Uo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Xe,step:null,style:null,tabIndex:Xe,target:null,title:null,translate:null,type:null,typeMustMatch:Zt,useMap:null,value:Uo,width:Xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:xr,axis:null,background:null,bgColor:null,border:Xe,borderColor:null,bottomMargin:Xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Zt,declare:Zt,event:null,face:null,frame:null,frameBorder:null,hSpace:Xe,leftMargin:Xe,link:null,longDesc:null,lowSrc:null,marginHeight:Xe,marginWidth:Xe,noResize:Zt,noHref:Zt,noShade:Zt,noWrap:Zt,object:null,profile:null,prompt:null,rev:null,rightMargin:Xe,rules:null,scheme:null,scrolling:Uo,standby:null,summary:null,text:null,topMargin:Xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Zt,disableRemotePlayback:Zt,prefix:null,property:null,results:Xe,security:null,unselectable:null}}),Wye=vg({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:rG,properties:{about:Oi,accentHeight:Xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Xe,amplitude:Xe,arabicForm:null,ascent:Xe,attributeName:null,attributeType:null,azimuth:Xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Xe,by:null,calcMode:null,capHeight:Xe,className:xr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Xe,diffuseConstant:Xe,direction:null,display:null,dur:null,divisor:Xe,dominantBaseline:null,download:Zt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Xe,enableBackground:null,end:null,event:null,exponent:Xe,externalResourcesRequired:null,fill:null,fillOpacity:Xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Oh,g2:Oh,glyphName:Oh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Xe,horizOriginX:Xe,horizOriginY:Xe,id:null,ideographic:Xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Xe,k:Xe,k1:Xe,k2:Xe,k3:Xe,k4:Xe,kernelMatrix:Oi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Xe,overlineThickness:Xe,paintOrder:null,panose1:null,path:null,pathLength:Xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:xr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Xe,pointsAtY:Xe,pointsAtZ:Xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Oi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Oi,rev:Oi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Oi,requiredFeatures:Oi,requiredFonts:Oi,requiredFormats:Oi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Xe,specularExponent:Xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Xe,strikethroughThickness:Xe,string:null,stroke:null,strokeDashArray:Oi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Xe,strokeOpacity:Xe,strokeWidth:null,style:null,surfaceScale:Xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Oi,tabIndex:Xe,tableValues:null,target:null,targetX:Xe,targetY:Xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Oi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Xe,underlineThickness:Xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Xe,values:null,vAlphabetic:Xe,vMathematical:Xe,vectorEffect:null,vHanging:Xe,vIdeographic:Xe,version:null,vertAdvY:Xe,vertOriginX:Xe,vertOriginY:Xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Yye=/^data[-\w.:]+$/i,hF=/-[a-z]/g,Xye=/[A-Z]/g;function Jye(t,e){const n=JO(e);let r=e,o=Dl;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Yye.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(hF,Zye);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!hF.test(a)){let s=a.replace(Xye,Qye);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}o=AD}return new o(r,e)}function Qye(t){return"-"+t.toLowerCase()}function Zye(t){return t.charAt(1).toUpperCase()}const e0e=ZV([nG,tG,aG,sG,Kye],"html"),iG=ZV([nG,tG,aG,sG,Wye],"svg"),gF={}.hasOwnProperty;function lG(t,e){const n=e||{};function r(o,...a){let s=r.invalid;const i=r.handlers;if(o&&gF.call(o,t)){const l=String(o[t]);s=gF.call(i,l)?i[l]:r.unknown}if(s)return s.call(this,o,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const t0e={},n0e={}.hasOwnProperty,cG=lG("type",{handlers:{root:o0e,element:c0e,text:i0e,comment:l0e,doctype:s0e}});function r0e(t,e){const r=(e||t0e).space;return cG(t,r==="svg"?iG:e0e)}function o0e(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=_D(t.children,n,e),xg(t,n),n}function a0e(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=_D(t.children,n,e),xg(t,n),n}function s0e(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return xg(t,e),e}function i0e(t){const e={nodeName:"#text",value:t.value,parentNode:null};return xg(t,e),e}function l0e(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return xg(t,e),e}function c0e(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=iG);const o=[];let a;if(t.properties){for(a in t.properties)if(a!=="children"&&n0e.call(t.properties,a)){const l=u0e(r,a,t.properties[a]);l&&o.push(l)}}const s=r.space,i={nodeName:t.tagName,tagName:t.tagName,attrs:o,namespaceURI:ff[s],childNodes:[],parentNode:null};return i.childNodes=_D(t.children,i,r),xg(t,i),t.tagName==="template"&&t.content&&(i.content=a0e(t.content,r)),i}function u0e(t,e,n){const r=Jye(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?mV(n):EV(n));const o={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const a=o.name.indexOf(":");a<0?o.prefix="":(o.name=o.name.slice(a+1),o.prefix=r.attribute.slice(0,a)),o.namespace=ff[r.space]}return o}function _D(t,e,n){let r=-1;const o=[];if(t)for(;++r<t.length;){const a=cG(t[r],n);a.parentNode=e,o.push(a)}return o}function xg(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const d0e=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],p0e=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Br="";var J;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(J||(J={}));const Ws={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function uG(t){return t>=55296&&t<=57343}function f0e(t){return t>=56320&&t<=57343}function m0e(t,e){return(t-55296)*1024+9216+e}function dG(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function pG(t){return t>=64976&&t<=65007||p0e.has(t)}var we;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(we||(we={}));const h0e=65536;class g0e{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=h0e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:o,offset:a}=this,s=o+n,i=a+n;return{code:e,startLine:r,endLine:r,startCol:s,endCol:s,startOffset:i,endOffset:i}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(f0e(n))return this.pos++,this._addGap(),m0e(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,J.EOF;return this._err(we.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,J.EOF;const r=this.html.charCodeAt(n);return r===J.CARRIAGE_RETURN?J.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,J.EOF;let e=this.html.charCodeAt(this.pos);return e===J.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,J.LINE_FEED):e===J.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,uG(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===J.LINE_FEED||e===J.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){dG(e)?this._err(we.controlCharacterInInputStream):pG(e)&&this._err(we.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var mn;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(mn||(mn={}));function fG(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const b0e=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),y0e=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function v0e(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=y0e.get(t))!==null&&e!==void 0?e:t}var sa;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(sa||(sa={}));const x0e=32;var Qd;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Qd||(Qd={}));function ZO(t){return t>=sa.ZERO&&t<=sa.NINE}function S0e(t){return t>=sa.UPPER_A&&t<=sa.UPPER_F||t>=sa.LOWER_A&&t<=sa.LOWER_F}function E0e(t){return t>=sa.UPPER_A&&t<=sa.UPPER_Z||t>=sa.LOWER_A&&t<=sa.LOWER_Z||ZO(t)}function T0e(t){return t===sa.EQUALS||E0e(t)}var na;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(na||(na={}));var Lu;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Lu||(Lu={}));class w0e{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=na.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Lu.Strict}startEntity(e){this.decodeMode=e,this.state=na.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case na.EntityStart:return e.charCodeAt(n)===sa.NUM?(this.state=na.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=na.NamedEntity,this.stateNamedEntity(e,n));case na.NumericStart:return this.stateNumericStart(e,n);case na.NumericDecimal:return this.stateNumericDecimal(e,n);case na.NumericHex:return this.stateNumericHex(e,n);case na.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|x0e)===sa.LOWER_X?(this.state=na.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=na.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,o){if(n!==r){const a=r-n;this.result=this.result*Math.pow(o,a)+Number.parseInt(e.substr(n,a),o),this.consumed+=a}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const o=e.charCodeAt(n);if(ZO(o)||S0e(o))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(o,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const o=e.charCodeAt(n);if(ZO(o))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(o,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===sa.SEMI)this.consumed+=1;else if(this.decodeMode===Lu.Strict)return 0;return this.emitCodePoint(v0e(this.result),this.consumed),this.errors&&(e!==sa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let o=r[this.treeIndex],a=(o&Qd.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const s=e.charCodeAt(n);if(this.treeIndex=C0e(r,o,this.treeIndex+Math.max(1,a),s),this.treeIndex<0)return this.result===0||this.decodeMode===Lu.Attribute&&(a===0||T0e(s))?0:this.emitNotTerminatedNamedEntity();if(o=r[this.treeIndex],a=(o&Qd.VALUE_LENGTH)>>14,a!==0){if(s===sa.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==Lu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,o=(r[n]&Qd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,o,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:o}=this;return this.emitCodePoint(n===1?o[e]&~Qd.VALUE_LENGTH:o[e+1],r),n===3&&this.emitCodePoint(o[e+2],r),r}end(){var e;switch(this.state){case na.NamedEntity:return this.result!==0&&(this.decodeMode!==Lu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case na.NumericDecimal:return this.emitNumericEntity(0,2);case na.NumericHex:return this.emitNumericEntity(0,3);case na.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case na.EntityStart:return 0}}}function C0e(t,e,n,r){const o=(e&Qd.BRANCH_LENGTH)>>7,a=e&Qd.JUMP_TABLE;if(o===0)return a!==0&&r===a?n:-1;if(a){const l=r-a;return l<0||l>=o?-1:t[n+l]-1}let s=n,i=s+o-1;for(;s<=i;){const l=s+i>>>1,c=t[l];if(c<r)s=l+1;else if(c>r)i=l-1;else return t[l+o]}return-1}var ze;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(ze||(ze={}));var Ef;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Ef||(Ef={}));var wl;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(wl||(wl={}));var he;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(he||(he={}));var O;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(O||(O={}));const A0e=new Map([[he.A,O.A],[he.ADDRESS,O.ADDRESS],[he.ANNOTATION_XML,O.ANNOTATION_XML],[he.APPLET,O.APPLET],[he.AREA,O.AREA],[he.ARTICLE,O.ARTICLE],[he.ASIDE,O.ASIDE],[he.B,O.B],[he.BASE,O.BASE],[he.BASEFONT,O.BASEFONT],[he.BGSOUND,O.BGSOUND],[he.BIG,O.BIG],[he.BLOCKQUOTE,O.BLOCKQUOTE],[he.BODY,O.BODY],[he.BR,O.BR],[he.BUTTON,O.BUTTON],[he.CAPTION,O.CAPTION],[he.CENTER,O.CENTER],[he.CODE,O.CODE],[he.COL,O.COL],[he.COLGROUP,O.COLGROUP],[he.DD,O.DD],[he.DESC,O.DESC],[he.DETAILS,O.DETAILS],[he.DIALOG,O.DIALOG],[he.DIR,O.DIR],[he.DIV,O.DIV],[he.DL,O.DL],[he.DT,O.DT],[he.EM,O.EM],[he.EMBED,O.EMBED],[he.FIELDSET,O.FIELDSET],[he.FIGCAPTION,O.FIGCAPTION],[he.FIGURE,O.FIGURE],[he.FONT,O.FONT],[he.FOOTER,O.FOOTER],[he.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[he.FORM,O.FORM],[he.FRAME,O.FRAME],[he.FRAMESET,O.FRAMESET],[he.H1,O.H1],[he.H2,O.H2],[he.H3,O.H3],[he.H4,O.H4],[he.H5,O.H5],[he.H6,O.H6],[he.HEAD,O.HEAD],[he.HEADER,O.HEADER],[he.HGROUP,O.HGROUP],[he.HR,O.HR],[he.HTML,O.HTML],[he.I,O.I],[he.IMG,O.IMG],[he.IMAGE,O.IMAGE],[he.INPUT,O.INPUT],[he.IFRAME,O.IFRAME],[he.KEYGEN,O.KEYGEN],[he.LABEL,O.LABEL],[he.LI,O.LI],[he.LINK,O.LINK],[he.LISTING,O.LISTING],[he.MAIN,O.MAIN],[he.MALIGNMARK,O.MALIGNMARK],[he.MARQUEE,O.MARQUEE],[he.MATH,O.MATH],[he.MENU,O.MENU],[he.META,O.META],[he.MGLYPH,O.MGLYPH],[he.MI,O.MI],[he.MO,O.MO],[he.MN,O.MN],[he.MS,O.MS],[he.MTEXT,O.MTEXT],[he.NAV,O.NAV],[he.NOBR,O.NOBR],[he.NOFRAMES,O.NOFRAMES],[he.NOEMBED,O.NOEMBED],[he.NOSCRIPT,O.NOSCRIPT],[he.OBJECT,O.OBJECT],[he.OL,O.OL],[he.OPTGROUP,O.OPTGROUP],[he.OPTION,O.OPTION],[he.P,O.P],[he.PARAM,O.PARAM],[he.PLAINTEXT,O.PLAINTEXT],[he.PRE,O.PRE],[he.RB,O.RB],[he.RP,O.RP],[he.RT,O.RT],[he.RTC,O.RTC],[he.RUBY,O.RUBY],[he.S,O.S],[he.SCRIPT,O.SCRIPT],[he.SEARCH,O.SEARCH],[he.SECTION,O.SECTION],[he.SELECT,O.SELECT],[he.SOURCE,O.SOURCE],[he.SMALL,O.SMALL],[he.SPAN,O.SPAN],[he.STRIKE,O.STRIKE],[he.STRONG,O.STRONG],[he.STYLE,O.STYLE],[he.SUB,O.SUB],[he.SUMMARY,O.SUMMARY],[he.SUP,O.SUP],[he.TABLE,O.TABLE],[he.TBODY,O.TBODY],[he.TEMPLATE,O.TEMPLATE],[he.TEXTAREA,O.TEXTAREA],[he.TFOOT,O.TFOOT],[he.TD,O.TD],[he.TH,O.TH],[he.THEAD,O.THEAD],[he.TITLE,O.TITLE],[he.TR,O.TR],[he.TRACK,O.TRACK],[he.TT,O.TT],[he.U,O.U],[he.UL,O.UL],[he.SVG,O.SVG],[he.VAR,O.VAR],[he.WBR,O.WBR],[he.XMP,O.XMP]]);function Sg(t){var e;return(e=A0e.get(t))!==null&&e!==void 0?e:O.UNKNOWN}const Ge=O,_0e={[ze.HTML]:new Set([Ge.ADDRESS,Ge.APPLET,Ge.AREA,Ge.ARTICLE,Ge.ASIDE,Ge.BASE,Ge.BASEFONT,Ge.BGSOUND,Ge.BLOCKQUOTE,Ge.BODY,Ge.BR,Ge.BUTTON,Ge.CAPTION,Ge.CENTER,Ge.COL,Ge.COLGROUP,Ge.DD,Ge.DETAILS,Ge.DIR,Ge.DIV,Ge.DL,Ge.DT,Ge.EMBED,Ge.FIELDSET,Ge.FIGCAPTION,Ge.FIGURE,Ge.FOOTER,Ge.FORM,Ge.FRAME,Ge.FRAMESET,Ge.H1,Ge.H2,Ge.H3,Ge.H4,Ge.H5,Ge.H6,Ge.HEAD,Ge.HEADER,Ge.HGROUP,Ge.HR,Ge.HTML,Ge.IFRAME,Ge.IMG,Ge.INPUT,Ge.LI,Ge.LINK,Ge.LISTING,Ge.MAIN,Ge.MARQUEE,Ge.MENU,Ge.META,Ge.NAV,Ge.NOEMBED,Ge.NOFRAMES,Ge.NOSCRIPT,Ge.OBJECT,Ge.OL,Ge.P,Ge.PARAM,Ge.PLAINTEXT,Ge.PRE,Ge.SCRIPT,Ge.SECTION,Ge.SELECT,Ge.SOURCE,Ge.STYLE,Ge.SUMMARY,Ge.TABLE,Ge.TBODY,Ge.TD,Ge.TEMPLATE,Ge.TEXTAREA,Ge.TFOOT,Ge.TH,Ge.THEAD,Ge.TITLE,Ge.TR,Ge.TRACK,Ge.UL,Ge.WBR,Ge.XMP]),[ze.MATHML]:new Set([Ge.MI,Ge.MO,Ge.MN,Ge.MS,Ge.MTEXT,Ge.ANNOTATION_XML]),[ze.SVG]:new Set([Ge.TITLE,Ge.FOREIGN_OBJECT,Ge.DESC]),[ze.XLINK]:new Set,[ze.XML]:new Set,[ze.XMLNS]:new Set},eM=new Set([Ge.H1,Ge.H2,Ge.H3,Ge.H4,Ge.H5,Ge.H6]);he.STYLE,he.SCRIPT,he.XMP,he.IFRAME,he.NOEMBED,he.NOFRAMES,he.PLAINTEXT;var Z;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(Z||(Z={}));const go={DATA:Z.DATA,RCDATA:Z.RCDATA,RAWTEXT:Z.RAWTEXT,SCRIPT_DATA:Z.SCRIPT_DATA,PLAINTEXT:Z.PLAINTEXT,CDATA_SECTION:Z.CDATA_SECTION};function k0e(t){return t>=J.DIGIT_0&&t<=J.DIGIT_9}function ny(t){return t>=J.LATIN_CAPITAL_A&&t<=J.LATIN_CAPITAL_Z}function I0e(t){return t>=J.LATIN_SMALL_A&&t<=J.LATIN_SMALL_Z}function jd(t){return I0e(t)||ny(t)}function bF(t){return jd(t)||k0e(t)}function tS(t){return t+32}function mG(t){return t===J.SPACE||t===J.LINE_FEED||t===J.TABULATION||t===J.FORM_FEED}function yF(t){return mG(t)||t===J.SOLIDUS||t===J.GREATER_THAN_SIGN}function P0e(t){return t===J.NULL?we.nullCharacterReference:t>1114111?we.characterReferenceOutsideUnicodeRange:uG(t)?we.surrogateCharacterReference:pG(t)?we.noncharacterCharacterReference:dG(t)||t===J.CARRIAGE_RETURN?we.controlCharacterReference:null}class O0e{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Z.DATA,this.returnState=Z.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new g0e(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new w0e(b0e,(r,o)=>{this.preprocessor.pos=this.entityStartPos+o-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(we.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(we.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const o=P0e(r);o&&this._err(o,1)}}:void 0)}_err(e,n=0){var r,o;(o=(r=this.handler).onParseError)===null||o===void 0||o.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:mn.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:mn.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:mn.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:mn.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(fG(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const o=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);o[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(we.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Sg(e.tagName),e.type===mn.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(we.endTagWithAttributes),e.selfClosing&&this._err(we.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case mn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case mn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case mn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:mn.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=mG(e)?mn.WHITESPACE_CHARACTER:e===J.NULL?mn.NULL_CHARACTER:mn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(mn.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=Z.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Lu.Attribute:Lu.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case Z.DATA:{this._stateData(e);break}case Z.RCDATA:{this._stateRcdata(e);break}case Z.RAWTEXT:{this._stateRawtext(e);break}case Z.SCRIPT_DATA:{this._stateScriptData(e);break}case Z.PLAINTEXT:{this._statePlaintext(e);break}case Z.TAG_OPEN:{this._stateTagOpen(e);break}case Z.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case Z.TAG_NAME:{this._stateTagName(e);break}case Z.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case Z.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case Z.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case Z.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case Z.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case Z.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case Z.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case Z.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case Z.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case Z.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case Z.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case Z.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case Z.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case Z.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case Z.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case Z.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case Z.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case Z.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case Z.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case Z.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case Z.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case Z.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case Z.BOGUS_COMMENT:{this._stateBogusComment(e);break}case Z.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case Z.COMMENT_START:{this._stateCommentStart(e);break}case Z.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case Z.COMMENT:{this._stateComment(e);break}case Z.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case Z.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case Z.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case Z.COMMENT_END:{this._stateCommentEnd(e);break}case Z.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case Z.DOCTYPE:{this._stateDoctype(e);break}case Z.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case Z.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case Z.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case Z.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case Z.CDATA_SECTION:{this._stateCdataSection(e);break}case Z.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case Z.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case Z.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case Z.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case J.LESS_THAN_SIGN:{this.state=Z.TAG_OPEN;break}case J.AMPERSAND:{this._startCharacterReference();break}case J.NULL:{this._err(we.unexpectedNullCharacter),this._emitCodePoint(e);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case J.AMPERSAND:{this._startCharacterReference();break}case J.LESS_THAN_SIGN:{this.state=Z.RCDATA_LESS_THAN_SIGN;break}case J.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(Br);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case J.LESS_THAN_SIGN:{this.state=Z.RAWTEXT_LESS_THAN_SIGN;break}case J.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(Br);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case J.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_LESS_THAN_SIGN;break}case J.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(Br);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case J.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(Br);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(jd(e))this._createStartTagToken(),this.state=Z.TAG_NAME,this._stateTagName(e);else switch(e){case J.EXCLAMATION_MARK:{this.state=Z.MARKUP_DECLARATION_OPEN;break}case J.SOLIDUS:{this.state=Z.END_TAG_OPEN;break}case J.QUESTION_MARK:{this._err(we.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(e);break}case J.EOF:{this._err(we.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Z.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(jd(e))this._createEndTagToken(),this.state=Z.TAG_NAME,this._stateTagName(e);else switch(e){case J.GREATER_THAN_SIGN:{this._err(we.missingEndTagName),this.state=Z.DATA;break}case J.EOF:{this._err(we.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case J.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case J.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case J.NULL:{this._err(we.unexpectedNullCharacter),n.tagName+=Br;break}case J.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(ny(e)?tS(e):e)}}_stateRcdataLessThanSign(e){e===J.SOLIDUS?this.state=Z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){jd(e)?(this.state=Z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Z.BEFORE_ATTRIBUTE_NAME,!1;case J.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Z.SELF_CLOSING_START_TAG,!1;case J.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===J.SOLIDUS?this.state=Z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){jd(e)?(this.state=Z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case J.SOLIDUS:{this.state=Z.SCRIPT_DATA_END_TAG_OPEN;break}case J.EXCLAMATION_MARK:{this.state=Z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Z.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){jd(e)?(this.state=Z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===J.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===J.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case J.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(Br);break}case J.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case J.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.NULL:{this._err(we.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Br);break}case J.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case J.HYPHEN_MINUS:{this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case J.NULL:{this._err(we.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Br);break}case J.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===J.SOLIDUS?this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:jd(e)?(this._emitChars("<"),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){jd(e)?(this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Ws.SCRIPT,!1)&&yF(this.preprocessor.peek(Ws.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Ws.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case J.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(Br);break}case J.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case J.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.NULL:{this._err(we.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Br);break}case J.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case J.HYPHEN_MINUS:{this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case J.NULL:{this._err(we.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Br);break}case J.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===J.SOLIDUS?(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Ws.SCRIPT,!1)&&yF(this.preprocessor.peek(Ws.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Ws.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.SOLIDUS:case J.GREATER_THAN_SIGN:case J.EOF:{this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case J.EQUALS_SIGN:{this._err(we.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Z.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:case J.SOLIDUS:case J.GREATER_THAN_SIGN:case J.EOF:{this._leaveAttrName(),this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case J.EQUALS_SIGN:{this._leaveAttrName(),this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case J.QUOTATION_MARK:case J.APOSTROPHE:case J.LESS_THAN_SIGN:{this._err(we.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case J.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.name+=Br;break}default:this.currentAttr.name+=String.fromCodePoint(ny(e)?tS(e):e)}}_stateAfterAttributeName(e){switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case J.EQUALS_SIGN:{this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case J.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{this.state=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this.state=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(we.missingAttributeValue),this.state=Z.DATA,this.emitCurrentTagToken();break}default:this.state=Z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case J.QUOTATION_MARK:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case J.AMPERSAND:{this._startCharacterReference();break}case J.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=Br;break}case J.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case J.APOSTROPHE:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case J.AMPERSAND:{this._startCharacterReference();break}case J.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=Br;break}case J.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case J.AMPERSAND:{this._startCharacterReference();break}case J.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case J.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=Br;break}case J.QUOTATION_MARK:case J.APOSTROPHE:case J.LESS_THAN_SIGN:case J.EQUALS_SIGN:case J.GRAVE_ACCENT:{this._err(we.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case J.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case J.SOLIDUS:{this._leaveAttrValue(),this.state=Z.SELF_CLOSING_START_TAG;break}case J.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBetweenAttributes),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case J.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Z.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.unexpectedSolidusInTag),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case J.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case J.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case J.NULL:{this._err(we.unexpectedNullCharacter),n.data+=Br;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Ws.DASH_DASH,!0)?(this._createCommentToken(Ws.DASH_DASH.length+1),this.state=Z.COMMENT_START):this._consumeSequenceIfMatch(Ws.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ws.DOCTYPE.length+1),this.state=Z.DOCTYPE):this._consumeSequenceIfMatch(Ws.CDATA_START,!0)?this.inForeignNode?this.state=Z.CDATA_SECTION:(this._err(we.cdataInHtmlContent),this._createCommentToken(Ws.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(we.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case J.HYPHEN_MINUS:{this.state=Z.COMMENT_START_DASH;break}case J.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=Z.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Z.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case J.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case J.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case J.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case J.HYPHEN_MINUS:{this.state=Z.COMMENT_END_DASH;break}case J.LESS_THAN_SIGN:{n.data+="<",this.state=Z.COMMENT_LESS_THAN_SIGN;break}case J.NULL:{this._err(we.unexpectedNullCharacter),n.data+=Br;break}case J.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case J.EXCLAMATION_MARK:{n.data+="!",this.state=Z.COMMENT_LESS_THAN_SIGN_BANG;break}case J.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Z.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===J.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Z.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===J.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Z.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==J.GREATER_THAN_SIGN&&e!==J.EOF&&this._err(we.nestedComment),this.state=Z.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case J.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case J.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case J.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case J.EXCLAMATION_MARK:{this.state=Z.COMMENT_END_BANG;break}case J.HYPHEN_MINUS:{n.data+="-";break}case J.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Z.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case J.HYPHEN_MINUS:{n.data+="--!",this.state=Z.COMMENT_END_DASH;break}case J.GREATER_THAN_SIGN:{this._err(we.incorrectlyClosedComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case J.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Z.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case J.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBeforeDoctypeName),this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(ny(e))this._createDoctypeToken(String.fromCharCode(tS(e))),this.state=Z.DOCTYPE_NAME;else switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.NULL:{this._err(we.unexpectedNullCharacter),this._createDoctypeToken(Br),this.state=Z.DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this._err(we.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case J.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=Z.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=Z.AFTER_DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case J.NULL:{this._err(we.unexpectedNullCharacter),n.name+=Br;break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(ny(e)?tS(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ws.PUBLIC,!1)?this.state=Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ws.SYSTEM,!1)?this.state=Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(we.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case J.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=Br;break}case J.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case J.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=Br;break}case J.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case J.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case J.QUOTATION_MARK:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case J.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case J.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=Br;break}case J.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case J.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=Br;break}case J.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case J.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case J.NULL:{this._err(we.unexpectedNullCharacter);break}case J.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case J.RIGHT_SQUARE_BRACKET:{this.state=Z.CDATA_SECTION_BRACKET;break}case J.EOF:{this._err(we.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===J.RIGHT_SQUARE_BRACKET?this.state=Z.CDATA_SECTION_END:(this._emitChars("]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case J.GREATER_THAN_SIGN:{this.state=Z.DATA;break}case J.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&bF(this.preprocessor.peek(1))?Z.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){bF(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===J.SEMICOLON&&this._err(we.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const hG=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),vF=new Set([...hG,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),uE=new Set([O.APPLET,O.CAPTION,O.HTML,O.MARQUEE,O.OBJECT,O.TABLE,O.TD,O.TEMPLATE,O.TH]),M0e=new Set([...uE,O.OL,O.UL]),R0e=new Set([...uE,O.BUTTON]),xF=new Set([O.ANNOTATION_XML,O.MI,O.MN,O.MO,O.MS,O.MTEXT]),SF=new Set([O.DESC,O.FOREIGN_OBJECT,O.TITLE]),D0e=new Set([O.TR,O.TEMPLATE,O.HTML]),N0e=new Set([O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML]),L0e=new Set([O.TABLE,O.TEMPLATE,O.HTML]),j0e=new Set([O.TD,O.TH]);class B0e{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ze.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const o=this._indexOf(e)+1;this.items.splice(o,0,n),this.tagIDs.splice(o,0,r),this.stackTop++,o===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,o===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ze.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(eM,ze.HTML)}popUntilTableCellPopped(){this.popUntilPopped(j0e,ze.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(L0e,ze.HTML)}clearBackToTableBodyContext(){this.clearBackTo(N0e,ze.HTML)}clearBackToTableRowContext(){this.clearBackTo(D0e,ze.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const o=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case ze.HTML:{if(o===e)return!0;if(n.has(o))return!1;break}case ze.SVG:{if(SF.has(o))return!1;break}case ze.MATHML:{if(xF.has(o))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,uE)}hasInListItemScope(e){return this.hasInDynamicScope(e,M0e)}hasInButtonScope(e){return this.hasInDynamicScope(e,R0e)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case ze.HTML:{if(eM.has(n))return!0;if(uE.has(n))return!1;break}case ze.SVG:{if(SF.has(n))return!1;break}case ze.MATHML:{if(xF.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===ze.HTML)switch(this.tagIDs[n]){case e:return!0;case O.TABLE:case O.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===ze.HTML)switch(this.tagIDs[e]){case O.TBODY:case O.THEAD:case O.TFOOT:return!0;case O.TABLE:case O.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===ze.HTML)switch(this.tagIDs[n]){case e:return!0;case O.OPTION:case O.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&hG.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&vF.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&vF.has(this.currentTagId);)this.pop()}}const A2=3;var Mc;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Mc||(Mc={}));const EF={type:Mc.Marker};class F0e{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],o=n.length,a=this.treeAdapter.getTagName(e),s=this.treeAdapter.getNamespaceURI(e);for(let i=0;i<this.entries.length;i++){const l=this.entries[i];if(l.type===Mc.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===a&&this.treeAdapter.getNamespaceURI(c)===s){const d=this.treeAdapter.getAttrList(c);d.length===o&&r.push({idx:i,attrs:d})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<A2)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<A2)return;const o=new Map(n.map(s=>[s.name,s.value]));let a=0;for(let s=0;s<r.length;s++){const i=r[s];i.attrs.every(l=>o.get(l.name)===l.value)&&(a+=1,a>=A2&&this.entries.splice(i.idx,1))}}insertMarker(){this.entries.unshift(EF)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:Mc.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Mc.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(EF);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===Mc.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===Mc.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===Mc.Element&&n.element===e)}}const Bd={createDocument(){return{nodeName:"#document",mode:wl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const o=t.childNodes.find(a=>a.nodeName==="#documentType");if(o)o.name=e,o.publicId=n,o.systemId=r;else{const a={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Bd.appendChild(t,a)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Bd.isTextNode(n)){n.value+=e;return}}Bd.appendChild(t,Bd.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Bd.isTextNode(r)?r.value+=e:Bd.insertBefore(t,Bd.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},gG="html",z0e="about:legacy-compat",U0e="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",bG=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],q0e=[...bG,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],H0e=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),yG=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],$0e=[...yG,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function TF(t,e){return e.some(n=>t.startsWith(n))}function V0e(t){return t.name===gG&&t.publicId===null&&(t.systemId===null||t.systemId===z0e)}function G0e(t){if(t.name!==gG)return wl.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===U0e)return wl.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),H0e.has(n))return wl.QUIRKS;let r=e===null?q0e:bG;if(TF(n,r))return wl.QUIRKS;if(r=e===null?yG:$0e,TF(n,r))return wl.LIMITED_QUIRKS}return wl.NO_QUIRKS}const wF={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},K0e="definitionurl",W0e="definitionURL",Y0e=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),X0e=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ze.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ze.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ze.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ze.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ze.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ze.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ze.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:ze.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ze.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ze.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ze.XMLNS}]]),J0e=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Q0e=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function Z0e(t){const e=t.tagID;return e===O.FONT&&t.attrs.some(({name:r})=>r===Ef.COLOR||r===Ef.SIZE||r===Ef.FACE)||Q0e.has(e)}function vG(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===K0e){t.attrs[e].name=W0e;break}}function xG(t){for(let e=0;e<t.attrs.length;e++){const n=Y0e.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function kD(t){for(let e=0;e<t.attrs.length;e++){const n=X0e.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function eve(t){const e=J0e.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=Sg(t.tagName))}function tve(t,e){return e===ze.MATHML&&(t===O.MI||t===O.MO||t===O.MN||t===O.MS||t===O.MTEXT)}function nve(t,e,n){if(e===ze.MATHML&&t===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Ef.ENCODING){const o=n[r].value.toLowerCase();return o===wF.TEXT_HTML||o===wF.APPLICATION_XML}}return e===ze.SVG&&(t===O.FOREIGN_OBJECT||t===O.DESC||t===O.TITLE)}function rve(t,e,n,r){return(!r||r===ze.HTML)&&nve(t,e,n)||(!r||r===ze.MATHML)&&tve(t,e)}const ove="hidden",ave=8,sve=3;var ne;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ne||(ne={}));const ive={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},SG=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),CF={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Bd,onParseError:null};class AF{constructor(e,n,r=null,o=null){this.fragmentContext=r,this.scriptHandler=o,this.currentToken=null,this.stopped=!1,this.insertionMode=ne.INITIAL,this.originalInsertionMode=ne.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...CF,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new O0e(this.options,this),this.activeFormattingElements=new F0e(this.treeAdapter),this.fragmentContextID=r?Sg(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new B0e(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...CF,...n};e??(e=r.treeAdapter.createElement(he.TEMPLATE,ze.HTML,[]));const o=r.treeAdapter.createElement("documentmock",ze.HTML,[]),a=new this(r,o,e);return a.fragmentContextID===O.TEMPLATE&&a.tmplInsertionModeStack.unshift(ne.IN_TEMPLATE),a._initTokenizerForFragmentParsing(),a._insertFakeRootElement(),a._resetInsertionMode(),a._findFormInFragmentContext(),a}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var o;if(!this.onParseError)return;const a=(o=e.location)!==null&&o!==void 0?o:ive,s={code:n,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:r?a.startLine:a.endLine,endCol:r?a.startCol:a.endCol,endOffset:r?a.startOffset:a.endOffset};this.onParseError(s)}onItemPush(e,n,r){var o,a;(a=(o=this.treeAdapter).onItemPush)===null||a===void 0||a.call(o,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,o;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(o=(r=this.treeAdapter).onItemPop)===null||o===void 0||o.call(r,e,this.openElements.current),n){let a,s;this.openElements.stackTop===0&&this.fragmentContext?(a=this.fragmentContext,s=this.fragmentContextID):{current:a,currentTagId:s}=this.openElements,this._setContextModes(a,s)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===ze.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,ze.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ne.TEXT}switchToPlaintextParsing(){this.insertionMode=ne.TEXT,this.originalInsertionMode=ne.IN_BODY,this.tokenizer.state=go.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===he.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ze.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=go.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=go.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=go.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=go.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",o=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,o),e.location){const s=this.treeAdapter.getChildNodes(this.document).find(i=>this.treeAdapter.isDocumentTypeNode(i));s&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,ze.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,ze.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(he.HTML,ze.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,O.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const o=this.treeAdapter.getChildNodes(n),a=r?o.lastIndexOf(r):o.length,s=o[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:l,endCol:c,endOffset:d}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:l,endCol:c,endOffset:d})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,o=this.treeAdapter.getTagName(e),a=n.type===mn.END_TAG&&o===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,a)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===O.SVG&&this.treeAdapter.getTagName(n)===he.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ze.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===O.MGLYPH||e.tagID===O.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,ze.HTML)}_processToken(e){switch(e.type){case mn.CHARACTER:{this.onCharacter(e);break}case mn.NULL_CHARACTER:{this.onNullCharacter(e);break}case mn.COMMENT:{this.onComment(e);break}case mn.DOCTYPE:{this.onDoctype(e);break}case mn.START_TAG:{this._processStartTag(e);break}case mn.END_TAG:{this.onEndTag(e);break}case mn.EOF:{this.onEof(e);break}case mn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const o=this.treeAdapter.getNamespaceURI(n),a=this.treeAdapter.getAttrList(n);return rve(e,o,a,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(o=>o.type===Mc.Marker||this.openElements.contains(o.element)),r=n===-1?e-1:n-1;for(let o=r;o>=0;o--){const a=this.activeFormattingElements.entries[o];this._insertElement(a.token,this.treeAdapter.getNamespaceURI(a.element)),a.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ne.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case O.TR:{this.insertionMode=ne.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=ne.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=ne.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=ne.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=ne.IN_TABLE;return}case O.BODY:{this.insertionMode=ne.IN_BODY;return}case O.FRAMESET:{this.insertionMode=ne.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(e);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?ne.AFTER_HEAD:ne.BEFORE_HEAD;return}case O.TD:case O.TH:{if(e>0){this.insertionMode=ne.IN_CELL;return}break}case O.HEAD:{if(e>0){this.insertionMode=ne.IN_HEAD;return}break}}this.insertionMode=ne.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=ne.IN_SELECT_IN_TABLE;return}}this.insertionMode=ne.IN_SELECT}_isElementCausesFosterParenting(e){return SG.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ze.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return _0e[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){jxe(this,e);return}switch(this.insertionMode){case ne.INITIAL:{Rb(this,e);break}case ne.BEFORE_HTML:{Py(this,e);break}case ne.BEFORE_HEAD:{Oy(this,e);break}case ne.IN_HEAD:{My(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{Ry(this,e);break}case ne.AFTER_HEAD:{Dy(this,e);break}case ne.IN_BODY:case ne.IN_CAPTION:case ne.IN_CELL:case ne.IN_TEMPLATE:{TG(this,e);break}case ne.TEXT:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{_2(this,e);break}case ne.IN_TABLE_TEXT:{IG(this,e);break}case ne.IN_COLUMN_GROUP:{dE(this,e);break}case ne.AFTER_BODY:{pE(this,e);break}case ne.AFTER_AFTER_BODY:{g1(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Lxe(this,e);return}switch(this.insertionMode){case ne.INITIAL:{Rb(this,e);break}case ne.BEFORE_HTML:{Py(this,e);break}case ne.BEFORE_HEAD:{Oy(this,e);break}case ne.IN_HEAD:{My(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{Ry(this,e);break}case ne.AFTER_HEAD:{Dy(this,e);break}case ne.TEXT:{this._insertCharacters(e);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{_2(this,e);break}case ne.IN_COLUMN_GROUP:{dE(this,e);break}case ne.AFTER_BODY:{pE(this,e);break}case ne.AFTER_AFTER_BODY:{g1(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){tM(this,e);return}switch(this.insertionMode){case ne.INITIAL:case ne.BEFORE_HTML:case ne.BEFORE_HEAD:case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:case ne.IN_BODY:case ne.IN_TABLE:case ne.IN_CAPTION:case ne.IN_COLUMN_GROUP:case ne.IN_TABLE_BODY:case ne.IN_ROW:case ne.IN_CELL:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:case ne.IN_TEMPLATE:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:{tM(this,e);break}case ne.IN_TABLE_TEXT:{Db(this,e);break}case ne.AFTER_BODY:{mve(this,e);break}case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{hve(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case ne.INITIAL:{gve(this,e);break}case ne.BEFORE_HEAD:case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:{this._err(e,we.misplacedDoctype);break}case ne.IN_TABLE_TEXT:{Db(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,we.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?Bxe(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case ne.INITIAL:{Rb(this,e);break}case ne.BEFORE_HTML:{bve(this,e);break}case ne.BEFORE_HEAD:{vve(this,e);break}case ne.IN_HEAD:{lc(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{Eve(this,e);break}case ne.AFTER_HEAD:{wve(this,e);break}case ne.IN_BODY:{rs(this,e);break}case ne.IN_TABLE:{$h(this,e);break}case ne.IN_TABLE_TEXT:{Db(this,e);break}case ne.IN_CAPTION:{xxe(this,e);break}case ne.IN_COLUMN_GROUP:{OD(this,e);break}case ne.IN_TABLE_BODY:{uw(this,e);break}case ne.IN_ROW:{dw(this,e);break}case ne.IN_CELL:{Txe(this,e);break}case ne.IN_SELECT:{MG(this,e);break}case ne.IN_SELECT_IN_TABLE:{Cxe(this,e);break}case ne.IN_TEMPLATE:{_xe(this,e);break}case ne.AFTER_BODY:{Ixe(this,e);break}case ne.IN_FRAMESET:{Pxe(this,e);break}case ne.AFTER_FRAMESET:{Mxe(this,e);break}case ne.AFTER_AFTER_BODY:{Dxe(this,e);break}case ne.AFTER_AFTER_FRAMESET:{Nxe(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?Fxe(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case ne.INITIAL:{Rb(this,e);break}case ne.BEFORE_HTML:{yve(this,e);break}case ne.BEFORE_HEAD:{xve(this,e);break}case ne.IN_HEAD:{Sve(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{Tve(this,e);break}case ne.AFTER_HEAD:{Cve(this,e);break}case ne.IN_BODY:{cw(this,e);break}case ne.TEXT:{uxe(this,e);break}case ne.IN_TABLE:{s0(this,e);break}case ne.IN_TABLE_TEXT:{Db(this,e);break}case ne.IN_CAPTION:{Sxe(this,e);break}case ne.IN_COLUMN_GROUP:{Exe(this,e);break}case ne.IN_TABLE_BODY:{nM(this,e);break}case ne.IN_ROW:{OG(this,e);break}case ne.IN_CELL:{wxe(this,e);break}case ne.IN_SELECT:{RG(this,e);break}case ne.IN_SELECT_IN_TABLE:{Axe(this,e);break}case ne.IN_TEMPLATE:{kxe(this,e);break}case ne.AFTER_BODY:{NG(this,e);break}case ne.IN_FRAMESET:{Oxe(this,e);break}case ne.AFTER_FRAMESET:{Rxe(this,e);break}case ne.AFTER_AFTER_BODY:{g1(this,e);break}}}onEof(e){switch(this.insertionMode){case ne.INITIAL:{Rb(this,e);break}case ne.BEFORE_HTML:{Py(this,e);break}case ne.BEFORE_HEAD:{Oy(this,e);break}case ne.IN_HEAD:{My(this,e);break}case ne.IN_HEAD_NO_SCRIPT:{Ry(this,e);break}case ne.AFTER_HEAD:{Dy(this,e);break}case ne.IN_BODY:case ne.IN_TABLE:case ne.IN_CAPTION:case ne.IN_COLUMN_GROUP:case ne.IN_TABLE_BODY:case ne.IN_ROW:case ne.IN_CELL:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:{_G(this,e);break}case ne.TEXT:{dxe(this,e);break}case ne.IN_TABLE_TEXT:{Db(this,e);break}case ne.IN_TEMPLATE:{DG(this,e);break}case ne.AFTER_BODY:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{PD(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===J.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:case ne.TEXT:case ne.IN_COLUMN_GROUP:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:{this._insertCharacters(e);break}case ne.IN_BODY:case ne.IN_CAPTION:case ne.IN_CELL:case ne.IN_TEMPLATE:case ne.AFTER_BODY:case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{EG(this,e);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{_2(this,e);break}case ne.IN_TABLE_TEXT:{kG(this,e);break}}}}function lve(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):AG(t,e),n}function cve(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const o=t.openElements.items[r];if(o===e.element)break;t._isSpecialElement(o,t.openElements.tagIDs[r])&&(n=o)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function uve(t,e,n){let r=e,o=t.openElements.getCommonAncestor(e);for(let a=0,s=o;s!==n;a++,s=o){o=t.openElements.getCommonAncestor(s);const i=t.activeFormattingElements.getElementEntry(s),l=i&&a>=sve;!i||l?(l&&t.activeFormattingElements.removeEntry(i),t.openElements.remove(s)):(s=dve(t,i),r===e&&(t.activeFormattingElements.bookmark=i),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(s,r),r=s)}return r}function dve(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function pve(t,e,n){const r=t.treeAdapter.getTagName(e),o=Sg(r);if(t._isElementCausesFosterParenting(o))t._fosterParentElement(n);else{const a=t.treeAdapter.getNamespaceURI(e);o===O.TEMPLATE&&a===ze.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function fve(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:o}=n,a=t.treeAdapter.createElement(o.tagName,r,o.attrs);t._adoptNodes(e,a),t.treeAdapter.appendChild(e,a),t.activeFormattingElements.insertElementAfterBookmark(a,o),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,a,o.tagID)}function ID(t,e){for(let n=0;n<ave;n++){const r=lve(t,e);if(!r)break;const o=cve(t,r);if(!o)break;t.activeFormattingElements.bookmark=r;const a=uve(t,o,r.element),s=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(a),s&&pve(t,s,a),fve(t,o,r)}}function tM(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function mve(t,e){t._appendCommentNode(e,t.openElements.items[0])}function hve(t,e){t._appendCommentNode(e,t.document)}function PD(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],o=t.treeAdapter.getNodeSourceCodeLocation(r);if(o&&!o.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const a=t.openElements.items[1],s=t.treeAdapter.getNodeSourceCodeLocation(a);s&&!s.endTag&&t._setEndLocation(a,e)}}}}function gve(t,e){t._setDocumentType(e);const n=e.forceQuirks?wl.QUIRKS:G0e(e);V0e(e)||t._err(e,we.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=ne.BEFORE_HTML}function Rb(t,e){t._err(e,we.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,wl.QUIRKS),t.insertionMode=ne.BEFORE_HTML,t._processToken(e)}function bve(t,e){e.tagID===O.HTML?(t._insertElement(e,ze.HTML),t.insertionMode=ne.BEFORE_HEAD):Py(t,e)}function yve(t,e){const n=e.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&Py(t,e)}function Py(t,e){t._insertFakeRootElement(),t.insertionMode=ne.BEFORE_HEAD,t._processToken(e)}function vve(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.HEAD:{t._insertElement(e,ze.HTML),t.headElement=t.openElements.current,t.insertionMode=ne.IN_HEAD;break}default:Oy(t,e)}}function xve(t,e){const n=e.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?Oy(t,e):t._err(e,we.endTagWithoutMatchingOpenElement)}function Oy(t,e){t._insertFakeElement(he.HEAD,O.HEAD),t.headElement=t.openElements.current,t.insertionMode=ne.IN_HEAD,t._processToken(e)}function lc(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{t._appendElement(e,ze.HTML),e.ackSelfClosing=!0;break}case O.TITLE:{t._switchToTextParsing(e,go.RCDATA);break}case O.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,go.RAWTEXT):(t._insertElement(e,ze.HTML),t.insertionMode=ne.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{t._switchToTextParsing(e,go.RAWTEXT);break}case O.SCRIPT:{t._switchToTextParsing(e,go.SCRIPT_DATA);break}case O.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=ne.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(ne.IN_TEMPLATE);break}case O.HEAD:{t._err(e,we.misplacedStartTagForHeadElement);break}default:My(t,e)}}function Sve(t,e){switch(e.tagID){case O.HEAD:{t.openElements.pop(),t.insertionMode=ne.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{My(t,e);break}case O.TEMPLATE:{tm(t,e);break}default:t._err(e,we.endTagWithoutMatchingOpenElement)}}function tm(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==O.TEMPLATE&&t._err(e,we.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(O.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,we.endTagWithoutMatchingOpenElement)}function My(t,e){t.openElements.pop(),t.insertionMode=ne.AFTER_HEAD,t._processToken(e)}function Eve(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{lc(t,e);break}case O.NOSCRIPT:{t._err(e,we.nestedNoscriptInHead);break}default:Ry(t,e)}}function Tve(t,e){switch(e.tagID){case O.NOSCRIPT:{t.openElements.pop(),t.insertionMode=ne.IN_HEAD;break}case O.BR:{Ry(t,e);break}default:t._err(e,we.endTagWithoutMatchingOpenElement)}}function Ry(t,e){const n=e.type===mn.EOF?we.openElementsLeftAfterEof:we.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=ne.IN_HEAD,t._processToken(e)}function wve(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.BODY:{t._insertElement(e,ze.HTML),t.framesetOk=!1,t.insertionMode=ne.IN_BODY;break}case O.FRAMESET:{t._insertElement(e,ze.HTML),t.insertionMode=ne.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{t._err(e,we.abandonedHeadElementChild),t.openElements.push(t.headElement,O.HEAD),lc(t,e),t.openElements.remove(t.headElement);break}case O.HEAD:{t._err(e,we.misplacedStartTagForHeadElement);break}default:Dy(t,e)}}function Cve(t,e){switch(e.tagID){case O.BODY:case O.HTML:case O.BR:{Dy(t,e);break}case O.TEMPLATE:{tm(t,e);break}default:t._err(e,we.endTagWithoutMatchingOpenElement)}}function Dy(t,e){t._insertFakeElement(he.BODY,O.BODY),t.insertionMode=ne.IN_BODY,lw(t,e)}function lw(t,e){switch(e.type){case mn.CHARACTER:{TG(t,e);break}case mn.WHITESPACE_CHARACTER:{EG(t,e);break}case mn.COMMENT:{tM(t,e);break}case mn.START_TAG:{rs(t,e);break}case mn.END_TAG:{cw(t,e);break}case mn.EOF:{_G(t,e);break}}}function EG(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function TG(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function Ave(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function _ve(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function kve(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,ze.HTML),t.insertionMode=ne.IN_FRAMESET)}function Ive(t,e){t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t._insertElement(e,ze.HTML)}function Pve(t,e){t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&eM.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,ze.HTML)}function Ove(t,e){t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t._insertElement(e,ze.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function Mve(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t._insertElement(e,ze.HTML),n||(t.formElement=t.openElements.current))}function Rve(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const o=t.openElements.tagIDs[r];if(n===O.LI&&o===O.LI||(n===O.DD||n===O.DT)&&(o===O.DD||o===O.DT)){t.openElements.generateImpliedEndTagsWithExclusion(o),t.openElements.popUntilTagNamePopped(o);break}if(o!==O.ADDRESS&&o!==O.DIV&&o!==O.P&&t._isSpecialElement(t.openElements.items[r],o))break}t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t._insertElement(e,ze.HTML)}function Dve(t,e){t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t._insertElement(e,ze.HTML),t.tokenizer.state=go.PLAINTEXT}function Nve(t,e){t.openElements.hasInScope(O.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(O.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,ze.HTML),t.framesetOk=!1}function Lve(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(he.A);n&&(ID(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,ze.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function jve(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ze.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Bve(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(O.NOBR)&&(ID(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,ze.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Fve(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ze.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function zve(t,e){t.treeAdapter.getDocumentMode(t.document)!==wl.QUIRKS&&t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t._insertElement(e,ze.HTML),t.framesetOk=!1,t.insertionMode=ne.IN_TABLE}function wG(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,ze.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function CG(t){const e=fG(t,Ef.TYPE);return e!=null&&e.toLowerCase()===ove}function Uve(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,ze.HTML),CG(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function qve(t,e){t._appendElement(e,ze.HTML),e.ackSelfClosing=!0}function Hve(t,e){t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t._appendElement(e,ze.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function $ve(t,e){e.tagName=he.IMG,e.tagID=O.IMG,wG(t,e)}function Vve(t,e){t._insertElement(e,ze.HTML),t.skipNextNewLine=!0,t.tokenizer.state=go.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=ne.TEXT}function Gve(t,e){t.openElements.hasInButtonScope(O.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,go.RAWTEXT)}function Kve(t,e){t.framesetOk=!1,t._switchToTextParsing(e,go.RAWTEXT)}function _F(t,e){t._switchToTextParsing(e,go.RAWTEXT)}function Wve(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ze.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===ne.IN_TABLE||t.insertionMode===ne.IN_CAPTION||t.insertionMode===ne.IN_TABLE_BODY||t.insertionMode===ne.IN_ROW||t.insertionMode===ne.IN_CELL?ne.IN_SELECT_IN_TABLE:ne.IN_SELECT}function Yve(t,e){t.openElements.currentTagId===O.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,ze.HTML)}function Xve(t,e){t.openElements.hasInScope(O.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,ze.HTML)}function Jve(t,e){t.openElements.hasInScope(O.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(O.RTC),t._insertElement(e,ze.HTML)}function Qve(t,e){t._reconstructActiveFormattingElements(),vG(e),kD(e),e.selfClosing?t._appendElement(e,ze.MATHML):t._insertElement(e,ze.MATHML),e.ackSelfClosing=!0}function Zve(t,e){t._reconstructActiveFormattingElements(),xG(e),kD(e),e.selfClosing?t._appendElement(e,ze.SVG):t._insertElement(e,ze.SVG),e.ackSelfClosing=!0}function kF(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ze.HTML)}function rs(t,e){switch(e.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{jve(t,e);break}case O.A:{Lve(t,e);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{Pve(t,e);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SEARCH:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{Ive(t,e);break}case O.LI:case O.DD:case O.DT:{Rve(t,e);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{wG(t,e);break}case O.HR:{Hve(t,e);break}case O.RB:case O.RTC:{Xve(t,e);break}case O.RT:case O.RP:{Jve(t,e);break}case O.PRE:case O.LISTING:{Ove(t,e);break}case O.XMP:{Gve(t,e);break}case O.SVG:{Zve(t,e);break}case O.HTML:{Ave(t,e);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{lc(t,e);break}case O.BODY:{_ve(t,e);break}case O.FORM:{Mve(t,e);break}case O.NOBR:{Bve(t,e);break}case O.MATH:{Qve(t,e);break}case O.TABLE:{zve(t,e);break}case O.INPUT:{Uve(t,e);break}case O.PARAM:case O.TRACK:case O.SOURCE:{qve(t,e);break}case O.IMAGE:{$ve(t,e);break}case O.BUTTON:{Nve(t,e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{Fve(t,e);break}case O.IFRAME:{Kve(t,e);break}case O.SELECT:{Wve(t,e);break}case O.OPTION:case O.OPTGROUP:{Yve(t,e);break}case O.NOEMBED:case O.NOFRAMES:{_F(t,e);break}case O.FRAMESET:{kve(t,e);break}case O.TEXTAREA:{Vve(t,e);break}case O.NOSCRIPT:{t.options.scriptingEnabled?_F(t,e):kF(t,e);break}case O.PLAINTEXT:{Dve(t,e);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:kF(t,e)}}function exe(t,e){if(t.openElements.hasInScope(O.BODY)&&(t.insertionMode=ne.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function txe(t,e){t.openElements.hasInScope(O.BODY)&&(t.insertionMode=ne.AFTER_BODY,NG(t,e))}function nxe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function rxe(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(O.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(O.FORM):n&&t.openElements.remove(n))}function oxe(t){t.openElements.hasInButtonScope(O.P)||t._insertFakeElement(he.P,O.P),t._closePElement()}function axe(t){t.openElements.hasInListItemScope(O.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(O.LI),t.openElements.popUntilTagNamePopped(O.LI))}function sxe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function ixe(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function lxe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function cxe(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(he.BR,O.BR),t.openElements.pop(),t.framesetOk=!1}function AG(t,e){const n=e.tagName,r=e.tagID;for(let o=t.openElements.stackTop;o>0;o--){const a=t.openElements.items[o],s=t.openElements.tagIDs[o];if(r===s&&(r!==O.UNKNOWN||t.treeAdapter.getTagName(a)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=o&&t.openElements.shortenToLength(o);break}if(t._isSpecialElement(a,s))break}}function cw(t,e){switch(e.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{ID(t,e);break}case O.P:{oxe(t);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SEARCH:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{nxe(t,e);break}case O.LI:{axe(t);break}case O.DD:case O.DT:{sxe(t,e);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{ixe(t);break}case O.BR:{cxe(t);break}case O.BODY:{exe(t,e);break}case O.HTML:{txe(t,e);break}case O.FORM:{rxe(t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{lxe(t,e);break}case O.TEMPLATE:{tm(t,e);break}default:AG(t,e)}}function _G(t,e){t.tmplInsertionModeStack.length>0?DG(t,e):PD(t,e)}function uxe(t,e){var n;e.tagID===O.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function dxe(t,e){t._err(e,we.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function _2(t,e){if(t.openElements.currentTagId!==void 0&&SG.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=ne.IN_TABLE_TEXT,e.type){case mn.CHARACTER:{IG(t,e);break}case mn.WHITESPACE_CHARACTER:{kG(t,e);break}}else Z0(t,e)}function pxe(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,ze.HTML),t.insertionMode=ne.IN_CAPTION}function fxe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,ze.HTML),t.insertionMode=ne.IN_COLUMN_GROUP}function mxe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(he.COLGROUP,O.COLGROUP),t.insertionMode=ne.IN_COLUMN_GROUP,OD(t,e)}function hxe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,ze.HTML),t.insertionMode=ne.IN_TABLE_BODY}function gxe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(he.TBODY,O.TBODY),t.insertionMode=ne.IN_TABLE_BODY,uw(t,e)}function bxe(t,e){t.openElements.hasInTableScope(O.TABLE)&&(t.openElements.popUntilTagNamePopped(O.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function yxe(t,e){CG(e)?t._appendElement(e,ze.HTML):Z0(t,e),e.ackSelfClosing=!0}function vxe(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,ze.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function $h(t,e){switch(e.tagID){case O.TD:case O.TH:case O.TR:{gxe(t,e);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{lc(t,e);break}case O.COL:{mxe(t,e);break}case O.FORM:{vxe(t,e);break}case O.TABLE:{bxe(t,e);break}case O.TBODY:case O.TFOOT:case O.THEAD:{hxe(t,e);break}case O.INPUT:{yxe(t,e);break}case O.CAPTION:{pxe(t,e);break}case O.COLGROUP:{fxe(t,e);break}default:Z0(t,e)}}function s0(t,e){switch(e.tagID){case O.TABLE:{t.openElements.hasInTableScope(O.TABLE)&&(t.openElements.popUntilTagNamePopped(O.TABLE),t._resetInsertionMode());break}case O.TEMPLATE:{tm(t,e);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:Z0(t,e)}}function Z0(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,lw(t,e),t.fosterParentingEnabled=n}function kG(t,e){t.pendingCharacterTokens.push(e)}function IG(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function Db(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Z0(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const PG=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function xxe(t,e){const n=e.tagID;PG.has(n)?t.openElements.hasInTableScope(O.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(O.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ne.IN_TABLE,$h(t,e)):rs(t,e)}function Sxe(t,e){const n=e.tagID;switch(n){case O.CAPTION:case O.TABLE:{t.openElements.hasInTableScope(O.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(O.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ne.IN_TABLE,n===O.TABLE&&s0(t,e));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:cw(t,e)}}function OD(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.COL:{t._appendElement(e,ze.HTML),e.ackSelfClosing=!0;break}case O.TEMPLATE:{lc(t,e);break}default:dE(t,e)}}function Exe(t,e){switch(e.tagID){case O.COLGROUP:{t.openElements.currentTagId===O.COLGROUP&&(t.openElements.pop(),t.insertionMode=ne.IN_TABLE);break}case O.TEMPLATE:{tm(t,e);break}case O.COL:break;default:dE(t,e)}}function dE(t,e){t.openElements.currentTagId===O.COLGROUP&&(t.openElements.pop(),t.insertionMode=ne.IN_TABLE,t._processToken(e))}function uw(t,e){switch(e.tagID){case O.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,ze.HTML),t.insertionMode=ne.IN_ROW;break}case O.TH:case O.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(he.TR,O.TR),t.insertionMode=ne.IN_ROW,dw(t,e);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE,$h(t,e));break}default:$h(t,e)}}function nM(t,e){const n=e.tagID;switch(e.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE);break}case O.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE,s0(t,e));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:s0(t,e)}}function dw(t,e){switch(e.tagID){case O.TH:case O.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,ze.HTML),t.insertionMode=ne.IN_CELL,t.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{t.openElements.hasInTableScope(O.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE_BODY,uw(t,e));break}default:$h(t,e)}}function OG(t,e){switch(e.tagID){case O.TR:{t.openElements.hasInTableScope(O.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE_BODY);break}case O.TABLE:{t.openElements.hasInTableScope(O.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE_BODY,nM(t,e));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(O.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ne.IN_TABLE_BODY,nM(t,e));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:s0(t,e)}}function Txe(t,e){const n=e.tagID;PG.has(n)?(t.openElements.hasInTableScope(O.TD)||t.openElements.hasInTableScope(O.TH))&&(t._closeTableCell(),dw(t,e)):rs(t,e)}function wxe(t,e){const n=e.tagID;switch(n){case O.TD:case O.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ne.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),OG(t,e));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:cw(t,e)}}function MG(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.OPTION:{t.openElements.currentTagId===O.OPTION&&t.openElements.pop(),t._insertElement(e,ze.HTML);break}case O.OPTGROUP:{t.openElements.currentTagId===O.OPTION&&t.openElements.pop(),t.openElements.currentTagId===O.OPTGROUP&&t.openElements.pop(),t._insertElement(e,ze.HTML);break}case O.HR:{t.openElements.currentTagId===O.OPTION&&t.openElements.pop(),t.openElements.currentTagId===O.OPTGROUP&&t.openElements.pop(),t._appendElement(e,ze.HTML),e.ackSelfClosing=!0;break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{t.openElements.hasInSelectScope(O.SELECT)&&(t.openElements.popUntilTagNamePopped(O.SELECT),t._resetInsertionMode(),e.tagID!==O.SELECT&&t._processStartTag(e));break}case O.SCRIPT:case O.TEMPLATE:{lc(t,e);break}}}function RG(t,e){switch(e.tagID){case O.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===O.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===O.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===O.OPTGROUP&&t.openElements.pop();break}case O.OPTION:{t.openElements.currentTagId===O.OPTION&&t.openElements.pop();break}case O.SELECT:{t.openElements.hasInSelectScope(O.SELECT)&&(t.openElements.popUntilTagNamePopped(O.SELECT),t._resetInsertionMode());break}case O.TEMPLATE:{tm(t,e);break}}}function Cxe(t,e){const n=e.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(t.openElements.popUntilTagNamePopped(O.SELECT),t._resetInsertionMode(),t._processStartTag(e)):MG(t,e)}function Axe(t,e){const n=e.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(O.SELECT),t._resetInsertionMode(),t.onEndTag(e)):RG(t,e)}function _xe(t,e){switch(e.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{lc(t,e);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{t.tmplInsertionModeStack[0]=ne.IN_TABLE,t.insertionMode=ne.IN_TABLE,$h(t,e);break}case O.COL:{t.tmplInsertionModeStack[0]=ne.IN_COLUMN_GROUP,t.insertionMode=ne.IN_COLUMN_GROUP,OD(t,e);break}case O.TR:{t.tmplInsertionModeStack[0]=ne.IN_TABLE_BODY,t.insertionMode=ne.IN_TABLE_BODY,uw(t,e);break}case O.TD:case O.TH:{t.tmplInsertionModeStack[0]=ne.IN_ROW,t.insertionMode=ne.IN_ROW,dw(t,e);break}default:t.tmplInsertionModeStack[0]=ne.IN_BODY,t.insertionMode=ne.IN_BODY,rs(t,e)}}function kxe(t,e){e.tagID===O.TEMPLATE&&tm(t,e)}function DG(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(O.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):PD(t,e)}function Ixe(t,e){e.tagID===O.HTML?rs(t,e):pE(t,e)}function NG(t,e){var n;if(e.tagID===O.HTML){if(t.fragmentContext||(t.insertionMode=ne.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===O.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else pE(t,e)}function pE(t,e){t.insertionMode=ne.IN_BODY,lw(t,e)}function Pxe(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.FRAMESET:{t._insertElement(e,ze.HTML);break}case O.FRAME:{t._appendElement(e,ze.HTML),e.ackSelfClosing=!0;break}case O.NOFRAMES:{lc(t,e);break}}}function Oxe(t,e){e.tagID===O.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==O.FRAMESET&&(t.insertionMode=ne.AFTER_FRAMESET))}function Mxe(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.NOFRAMES:{lc(t,e);break}}}function Rxe(t,e){e.tagID===O.HTML&&(t.insertionMode=ne.AFTER_AFTER_FRAMESET)}function Dxe(t,e){e.tagID===O.HTML?rs(t,e):g1(t,e)}function g1(t,e){t.insertionMode=ne.IN_BODY,lw(t,e)}function Nxe(t,e){switch(e.tagID){case O.HTML:{rs(t,e);break}case O.NOFRAMES:{lc(t,e);break}}}function Lxe(t,e){e.chars=Br,t._insertCharacters(e)}function jxe(t,e){t._insertCharacters(e),t.framesetOk=!1}function LG(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==ze.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function Bxe(t,e){if(Z0e(e))LG(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===ze.MATHML?vG(e):r===ze.SVG&&(eve(e),xG(e)),kD(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function Fxe(t,e){if(e.tagID===O.P||e.tagID===O.BR){LG(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===ze.HTML){t._endTagOutsideForeignContent(e);break}const o=t.treeAdapter.getTagName(r);if(o.toLowerCase()===e.tagName){e.tagName=o,t.openElements.shortenToLength(n);break}}}he.AREA,he.BASE,he.BASEFONT,he.BGSOUND,he.BR,he.COL,he.EMBED,he.FRAME,he.HR,he.IMG,he.INPUT,he.KEYGEN,he.LINK,he.META,he.PARAM,he.SOURCE,he.TRACK,he.WBR;const zxe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,Uxe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),IF={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function jG(t,e){const n=Jxe(t),r=lG("type",{handlers:{root:qxe,element:Hxe,text:$xe,comment:FG,doctype:Vxe,raw:Kxe},unknown:Wxe}),o={parser:n?new AF(IF):AF.getFragmentParser(void 0,IF),handle(i){r(i,o)},stitches:!1,options:e||{}};r(t,o),Eg(o,Xc());const a=n?o.parser.document:o.parser.getFragment(),s=qye(a,{file:o.options.file});return o.stitches&&X0(s,"comment",function(i,l,c){const d=i;if(d.value.stitch&&c&&l!==void 0){const u=c.children;return u[l]=d.value.stitch,l}}),s.type==="root"&&s.children.length===1&&s.children[0].type===t.type?s.children[0]:s}function BG(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function qxe(t,e){BG(t.children,e)}function Hxe(t,e){Yxe(t,e),BG(t.children,e),Xxe(t,e)}function $xe(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:mn.CHARACTER,chars:t.value,location:ev(t)};Eg(e,Xc(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Vxe(t,e){const n={type:mn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:ev(t)};Eg(e,Xc(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Gxe(t,e){e.stitches=!0;const n=Qxe(t);if("children"in t&&"children"in n){const r=jG({type:"root",children:t.children},e.options);n.children=r.children}FG({type:"comment",value:{stitch:n}},e)}function FG(t,e){const n=t.value,r={type:mn.COMMENT,data:n,location:ev(t)};Eg(e,Xc(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function Kxe(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,zG(e,Xc(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(zxe,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function Wxe(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))Gxe(n,e);else{let r="";throw Uxe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Eg(t,e){zG(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=go.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function zG(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function Yxe(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===go.PLAINTEXT)return;Eg(e,Xc(t));const r=e.parser.openElements.current;let o="namespaceURI"in r?r.namespaceURI:ff.html;o===ff.html&&n==="svg"&&(o=ff.svg);const a=r0e({...t,children:[]},{space:o===ff.svg?"svg":"html"}),s={type:mn.START_TAG,tagName:n,tagID:Sg(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in a?a.attrs:[],location:ev(t)};e.parser.currentToken=s,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function Xxe(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&d0e.includes(n)||e.parser.tokenizer.state===go.PLAINTEXT)return;Eg(e,rw(t));const r={type:mn.END_TAG,tagName:n,tagID:Sg(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:ev(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===go.RCDATA||e.parser.tokenizer.state===go.RAWTEXT||e.parser.tokenizer.state===go.SCRIPT_DATA)&&(e.parser.tokenizer.state=go.DATA)}function Jxe(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function ev(t){const e=Xc(t)||{line:void 0,column:void 0,offset:void 0},n=rw(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Qxe(t){return"children"in t?Hh({...t,children:[]}):Hh(t)}function Zxe(t){return function(e,n){return jG(e,{...t,file:n})}}function PF(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,o=n.indexOf(e);for(;o!==-1;)r++,o=n.indexOf(e,o+e.length);return r}function eSe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function tSe(t,e,n){const o=Y0((n||{}).ignore||[]),a=nSe(e);let s=-1;for(;++s<a.length;)WV(t,"text",i);function i(c,d){let u=-1,m;for(;++u<d.length;){const h=d[u],y=m?m.children:void 0;if(o(h,y?y.indexOf(h):void 0,m))return;m=h}if(m)return l(c,d)}function l(c,d){const u=d[d.length-1],m=a[s][0],h=a[s][1];let y=0;const x=u.children.indexOf(c);let S=!1,T=[];m.lastIndex=0;let C=m.exec(c.value);for(;C;){const _=C.index,I={index:C.index,input:C.input,stack:[...d,c]};let P=h(...C,I);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?m.lastIndex=_+1:(y!==_&&T.push({type:"text",value:c.value.slice(y,_)}),Array.isArray(P)?T.push(...P):P&&T.push(P),y=_+C[0].length,S=!0),!m.global)break;C=m.exec(c.value)}return S?(y<c.value.length&&T.push({type:"text",value:c.value.slice(y)}),u.children.splice(x,1,...T)):T=[c],x+T.length}}function nSe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const o=n[r];e.push([rSe(o[0]),oSe(o[1])])}return e}function rSe(t){return typeof t=="string"?new RegExp(eSe(t),"g"):t}function oSe(t){return typeof t=="function"?t:function(){return t}}const k2="phrasing",I2=["autolink","link","image","label"];function aSe(){return{transforms:[pSe],enter:{literalAutolink:iSe,literalAutolinkEmail:P2,literalAutolinkHttp:P2,literalAutolinkWww:P2},exit:{literalAutolink:dSe,literalAutolinkEmail:uSe,literalAutolinkHttp:lSe,literalAutolinkWww:cSe}}}function sSe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:k2,notInConstruct:I2},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:k2,notInConstruct:I2},{character:":",before:"[ps]",after:"\\/",inConstruct:k2,notInConstruct:I2}]}}function iSe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function P2(t){this.config.enter.autolinkProtocol.call(this,t)}function lSe(t){this.config.exit.autolinkProtocol.call(this,t)}function cSe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function uSe(t){this.config.exit.autolinkEmail.call(this,t)}function dSe(t){this.exit(t)}function pSe(t){tSe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,fSe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),mSe]],{ignore:["link","linkReference"]})}function fSe(t,e,n,r,o){let a="";if(!UG(o)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!hSe(n)))return!1;const s=gSe(n+r);if(!s[0])return!1;const i={type:"link",title:null,url:a+e+s[0],children:[{type:"text",value:e+s[0]}]};return s[1]?[i,{type:"text",value:s[1]}]:i}function mSe(t,e,n,r){return!UG(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function hSe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function gSe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const o=PF(t,"(");let a=PF(t,")");for(;r!==-1&&o>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function UG(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Of(n)||ow(n))&&(!e||n!==47)}qG.peek=CSe;function bSe(){this.buffer()}function ySe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function vSe(){this.buffer()}function xSe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function SSe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ql(this.sliceSerialize(t)).toLowerCase(),n.label=e}function ESe(t){this.exit(t)}function TSe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ql(this.sliceSerialize(t)).toLowerCase(),n.label=e}function wSe(t){this.exit(t)}function CSe(){return"["}function qG(t,e,n,r){const o=n.createTracker(r);let a=o.move("[^");const s=n.enter("footnoteReference"),i=n.enter("reference");return a+=o.move(n.safe(n.associationId(t),{after:"]",before:a})),i(),s(),a+=o.move("]"),a}function ASe(){return{enter:{gfmFootnoteCallString:bSe,gfmFootnoteCall:ySe,gfmFootnoteDefinitionLabelString:vSe,gfmFootnoteDefinition:xSe},exit:{gfmFootnoteCallString:SSe,gfmFootnoteCall:ESe,gfmFootnoteDefinitionLabelString:TSe,gfmFootnoteDefinition:wSe}}}function _Se(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:qG},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,o,a,s){const i=a.createTracker(s);let l=i.move("[^");const c=a.enter("footnoteDefinition"),d=a.enter("label");return l+=i.move(a.safe(a.associationId(r),{before:l,after:"]"})),d(),l+=i.move("]:"),r.children&&r.children.length>0&&(i.shift(4),l+=i.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,i.current()),e?HG:kSe))),c(),l}}function kSe(t,e,n){return e===0?t:HG(t,e,n)}function HG(t,e,n){return(n?"":"    ")+t}const ISe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];$G.peek=DSe;function PSe(){return{canContainEols:["delete"],enter:{strikethrough:MSe},exit:{strikethrough:RSe}}}function OSe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:ISe}],handlers:{delete:$G}}}function MSe(t){this.enter({type:"delete",children:[]},t)}function RSe(t){this.exit(t)}function $G(t,e,n,r){const o=n.createTracker(r),a=n.enter("strikethrough");let s=o.move("~~");return s+=n.containerPhrasing(t,{...o.current(),before:s,after:"~"}),s+=o.move("~~"),a(),s}function DSe(){return"~"}function NSe(t){return t.length}function LSe(t,e){const n=e||{},r=(n.align||[]).concat(),o=n.stringLength||NSe,a=[],s=[],i=[],l=[];let c=0,d=-1;for(;++d<t.length;){const v=[],x=[];let S=-1;for(t[d].length>c&&(c=t[d].length);++S<t[d].length;){const T=jSe(t[d][S]);if(n.alignDelimiters!==!1){const C=o(T);x[S]=C,(l[S]===void 0||C>l[S])&&(l[S]=C)}v.push(T)}s[d]=v,i[d]=x}let u=-1;if(typeof r=="object"&&"length"in r)for(;++u<c;)a[u]=OF(r[u]);else{const v=OF(r);for(;++u<c;)a[u]=v}u=-1;const m=[],h=[];for(;++u<c;){const v=a[u];let x="",S="";v===99?(x=":",S=":"):v===108?x=":":v===114&&(S=":");let T=n.alignDelimiters===!1?1:Math.max(1,l[u]-x.length-S.length);const C=x+"-".repeat(T)+S;n.alignDelimiters!==!1&&(T=x.length+T+S.length,T>l[u]&&(l[u]=T),h[u]=T),m[u]=C}s.splice(1,0,m),i.splice(1,0,h),d=-1;const y=[];for(;++d<s.length;){const v=s[d],x=i[d];u=-1;const S=[];for(;++u<c;){const T=v[u]||"";let C="",_="";if(n.alignDelimiters!==!1){const I=l[u]-(x[u]||0),P=a[u];P===114?C=" ".repeat(I):P===99?I%2?(C=" ".repeat(I/2+.5),_=" ".repeat(I/2-.5)):(C=" ".repeat(I/2),_=C):_=" ".repeat(I)}n.delimiterStart!==!1&&!u&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||u)&&S.push(" "),n.alignDelimiters!==!1&&S.push(C),S.push(T),n.alignDelimiters!==!1&&S.push(_),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||u!==c-1)&&S.push("|")}y.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return y.join(`
`)}function jSe(t){return t==null?"":String(t)}function OF(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function BSe(t,e,n,r){const o=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const s=n.indentLines(n.containerFlow(t,a.current()),FSe);return o(),s}function FSe(t,e,n){return">"+(n?"":" ")+t}function zSe(t,e){return MF(t,e.inConstruct,!0)&&!MF(t,e.notInConstruct,!1)}function MF(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function RF(t,e,n,r){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&zSe(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function USe(t,e){const n=String(t);let r=n.indexOf(e),o=r,a=0,s=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===o?++a>s&&(s=a):a=1,o=r+e.length,r=n.indexOf(e,o);return s}function qSe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function HSe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function $Se(t,e,n,r){const o=HSe(n),a=t.value||"",s=o==="`"?"GraveAccent":"Tilde";if(qSe(t,n)){const u=n.enter("codeIndented"),m=n.indentLines(a,VSe);return u(),m}const i=n.createTracker(r),l=o.repeat(Math.max(USe(a,o)+1,3)),c=n.enter("codeFenced");let d=i.move(l);if(t.lang){const u=n.enter(`codeFencedLang${s}`);d+=i.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...i.current()})),u()}if(t.lang&&t.meta){const u=n.enter(`codeFencedMeta${s}`);d+=i.move(" "),d+=i.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...i.current()})),u()}return d+=i.move(`
`),a&&(d+=i.move(a+`
`)),d+=i.move(l),c(),d}function VSe(t,e,n){return(n?"":"    ")+t}function MD(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function GSe(t,e,n,r){const o=MD(n),a=o==='"'?"Quote":"Apostrophe",s=n.enter("definition");let i=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),i(),!t.url||/[\0- \u007F]/.test(t.url)?(i=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(i=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),i(),t.title&&(i=n.enter(`title${a}`),c+=l.move(" "+o),c+=l.move(n.safe(t.title,{before:c,after:o,...l.current()})),c+=l.move(o),i()),s(),c}function KSe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function i0(t){return"&#x"+t.toString(16).toUpperCase()+";"}function fE(t,e,n){const r=qh(t),o=qh(e);return r===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}VG.peek=WSe;function VG(t,e,n,r){const o=KSe(n),a=n.enter("emphasis"),s=n.createTracker(r),i=s.move(o);let l=s.move(n.containerPhrasing(t,{after:o,before:i,...s.current()}));const c=l.charCodeAt(0),d=fE(r.before.charCodeAt(r.before.length-1),c,o);d.inside&&(l=i0(c)+l.slice(1));const u=l.charCodeAt(l.length-1),m=fE(r.after.charCodeAt(0),u,o);m.inside&&(l=l.slice(0,-1)+i0(u));const h=s.move(o);return a(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},i+l+h}function WSe(t,e,n){return n.options.emphasis||"*"}function YSe(t,e){let n=!1;return X0(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,GO}),!!((!t.depth||t.depth<3)&&bD(t)&&(e.options.setext||n))}function XSe(t,e,n,r){const o=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(YSe(t,n)){const d=n.enter("headingSetext"),u=n.enter("phrasing"),m=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return u(),d(),m+`
`+(o===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const s="#".repeat(o),i=n.enter("headingAtx"),l=n.enter("phrasing");a.move(s+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(c)&&(c=i0(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,n.options.closeAtx&&(c+=" "+s),l(),i(),c}GG.peek=JSe;function GG(t){return t.value||""}function JSe(){return"<"}KG.peek=QSe;function KG(t,e,n,r){const o=MD(n),a=o==='"'?"Quote":"Apostrophe",s=n.enter("image");let i=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),i(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(i=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(i=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),i(),t.title&&(i=n.enter(`title${a}`),c+=l.move(" "+o),c+=l.move(n.safe(t.title,{before:c,after:o,...l.current()})),c+=l.move(o),i()),c+=l.move(")"),s(),c}function QSe(){return"!"}WG.peek=ZSe;function WG(t,e,n,r){const o=t.referenceType,a=n.enter("imageReference");let s=n.enter("label");const i=n.createTracker(r);let l=i.move("![");const c=n.safe(t.alt,{before:l,after:"]",...i.current()});l+=i.move(c+"]["),s();const d=n.stack;n.stack=[],s=n.enter("reference");const u=n.safe(n.associationId(t),{before:l,after:"]",...i.current()});return s(),n.stack=d,a(),o==="full"||!c||c!==u?l+=i.move(u+"]"):o==="shortcut"?l=l.slice(0,-1):l+=i.move("]"),l}function ZSe(){return"!"}YG.peek=e1e;function YG(t,e,n){let r=t.value||"",o="`",a=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const s=n.unsafe[a],i=n.compilePattern(s);let l;if(s.atBreak)for(;l=i.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return o+r+o}function e1e(){return"`"}function XG(t,e){const n=bD(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}JG.peek=t1e;function JG(t,e,n,r){const o=MD(n),a=o==='"'?"Quote":"Apostrophe",s=n.createTracker(r);let i,l;if(XG(t,n)){const d=n.stack;n.stack=[],i=n.enter("autolink");let u=s.move("<");return u+=s.move(n.containerPhrasing(t,{before:u,after:">",...s.current()})),u+=s.move(">"),i(),n.stack=d,u}i=n.enter("link"),l=n.enter("label");let c=s.move("[");return c+=s.move(n.containerPhrasing(t,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(t.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=n.enter("destinationRaw"),c+=s.move(n.safe(t.url,{before:c,after:t.title?" ":")",...s.current()}))),l(),t.title&&(l=n.enter(`title${a}`),c+=s.move(" "+o),c+=s.move(n.safe(t.title,{before:c,after:o,...s.current()})),c+=s.move(o),l()),c+=s.move(")"),i(),c}function t1e(t,e,n){return XG(t,n)?"<":"["}QG.peek=n1e;function QG(t,e,n,r){const o=t.referenceType,a=n.enter("linkReference");let s=n.enter("label");const i=n.createTracker(r);let l=i.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...i.current()});l+=i.move(c+"]["),s();const d=n.stack;n.stack=[],s=n.enter("reference");const u=n.safe(n.associationId(t),{before:l,after:"]",...i.current()});return s(),n.stack=d,a(),o==="full"||!c||c!==u?l+=i.move(u+"]"):o==="shortcut"?l=l.slice(0,-1):l+=i.move("]"),l}function n1e(){return"["}function RD(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function r1e(t){const e=RD(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function o1e(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function ZG(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function a1e(t,e,n,r){const o=n.enter("list"),a=n.bulletCurrent;let s=t.ordered?o1e(n):RD(n);const i=t.ordered?s==="."?")":".":r1e(n);let l=e&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((s==="*"||s==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),ZG(n)===s&&d){let u=-1;for(;++u<t.children.length;){const m=t.children[u];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(s=i),n.bulletCurrent=s;const c=n.containerFlow(t,r);return n.bulletLastUsed=s,n.bulletCurrent=a,o(),c}function s1e(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function i1e(t,e,n,r){const o=s1e(n);let a=n.bulletCurrent||RD(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let s=a.length+1;(o==="tab"||o==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(s=Math.ceil(s/4)*4);const i=n.createTracker(r);i.move(a+" ".repeat(s-a.length)),i.shift(s);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,i.current()),d);return l(),c;function d(u,m,h){return m?(h?"":" ".repeat(s))+u:(h?a:a+" ".repeat(s-a.length))+u}}function l1e(t,e,n,r){const o=n.enter("paragraph"),a=n.enter("phrasing"),s=n.containerPhrasing(t,r);return a(),o(),s}const c1e=Y0(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function u1e(t,e,n,r){return(t.children.some(function(s){return c1e(s)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function d1e(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}eK.peek=p1e;function eK(t,e,n,r){const o=d1e(n),a=n.enter("strong"),s=n.createTracker(r),i=s.move(o+o);let l=s.move(n.containerPhrasing(t,{after:o,before:i,...s.current()}));const c=l.charCodeAt(0),d=fE(r.before.charCodeAt(r.before.length-1),c,o);d.inside&&(l=i0(c)+l.slice(1));const u=l.charCodeAt(l.length-1),m=fE(r.after.charCodeAt(0),u,o);m.inside&&(l=l.slice(0,-1)+i0(u));const h=s.move(o+o);return a(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},i+l+h}function p1e(t,e,n){return n.options.strong||"*"}function f1e(t,e,n,r){return n.safe(t.value,r)}function m1e(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function h1e(t,e,n){const r=(ZG(n)+(n.options.ruleSpaces?" ":"")).repeat(m1e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const tK={blockquote:BSe,break:RF,code:$Se,definition:GSe,emphasis:VG,hardBreak:RF,heading:XSe,html:GG,image:KG,imageReference:WG,inlineCode:YG,link:JG,linkReference:QG,list:a1e,listItem:i1e,paragraph:l1e,root:u1e,strong:eK,text:f1e,thematicBreak:h1e};function g1e(){return{enter:{table:b1e,tableData:DF,tableHeader:DF,tableRow:v1e},exit:{codeText:x1e,table:y1e,tableData:O2,tableHeader:O2,tableRow:O2}}}function b1e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function y1e(t){this.exit(t),this.data.inTable=void 0}function v1e(t){this.enter({type:"tableRow",children:[]},t)}function O2(t){this.exit(t)}function DF(t){this.enter({type:"tableCell",children:[]},t)}function x1e(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,S1e));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function S1e(t,e){return e==="|"?e:t}function E1e(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,o=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:s,tableCell:l,tableRow:i}};function s(h,y,v,x){return c(d(h,v,x),h.align)}function i(h,y,v,x){const S=u(h,v,x),T=c([S]);return T.slice(0,T.indexOf(`
`))}function l(h,y,v,x){const S=v.enter("tableCell"),T=v.enter("phrasing"),C=v.containerPhrasing(h,{...x,before:a,after:a});return T(),S(),C}function c(h,y){return LSe(h,{align:y,alignDelimiters:r,padding:n,stringLength:o})}function d(h,y,v){const x=h.children;let S=-1;const T=[],C=y.enter("table");for(;++S<x.length;)T[S]=u(x[S],y,v);return C(),T}function u(h,y,v){const x=h.children;let S=-1;const T=[],C=y.enter("tableRow");for(;++S<x.length;)T[S]=l(x[S],h,y,v);return C(),T}function m(h,y,v){let x=tK.inlineCode(h,y,v);return v.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function T1e(){return{exit:{taskListCheckValueChecked:NF,taskListCheckValueUnchecked:NF,paragraph:C1e}}}function w1e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:A1e}}}function NF(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function C1e(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const o=e.children;let a=-1,s;for(;++a<o.length;){const i=o[a];if(i.type==="paragraph"){s=i;break}}s===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function A1e(t,e,n,r){const o=t.children[0],a=typeof t.checked=="boolean"&&o&&o.type==="paragraph",s="["+(t.checked?"x":" ")+"] ",i=n.createTracker(r);a&&i.move(s);let l=tK.listItem(t,e,n,{...r,...i.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(d){return d+s}}function _1e(){return[aSe(),ASe(),PSe(),g1e(),T1e()]}function k1e(t){return{extensions:[sSe(),_Se(t),OSe(),E1e(t),w1e()]}}const I1e={tokenize:N1e,partial:!0},nK={tokenize:L1e,partial:!0},rK={tokenize:j1e,partial:!0},oK={tokenize:B1e,partial:!0},P1e={tokenize:F1e,partial:!0},aK={name:"wwwAutolink",tokenize:R1e,previous:iK},sK={name:"protocolAutolink",tokenize:D1e,previous:lK},Xu={name:"emailAutolink",tokenize:M1e,previous:cK},Jc={};function O1e(){return{text:Jc}}let af=48;for(;af<123;)Jc[af]=Xu,af++,af===58?af=65:af===91&&(af=97);Jc[43]=Xu;Jc[45]=Xu;Jc[46]=Xu;Jc[95]=Xu;Jc[72]=[Xu,sK];Jc[104]=[Xu,sK];Jc[87]=[Xu,aK];Jc[119]=[Xu,aK];function M1e(t,e,n){const r=this;let o,a;return s;function s(u){return!rM(u)||!cK.call(r,r.previous)||DD(r.events)?n(u):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),i(u))}function i(u){return rM(u)?(t.consume(u),i):u===64?(t.consume(u),l):n(u)}function l(u){return u===46?t.check(P1e,d,c)(u):u===45||u===95||Ya(u)?(a=!0,t.consume(u),l):d(u)}function c(u){return t.consume(u),o=!0,l}function d(u){return a&&o&&Es(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(u)):n(u)}}function R1e(t,e,n){const r=this;return o;function o(s){return s!==87&&s!==119||!iK.call(r,r.previous)||DD(r.events)?n(s):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(I1e,t.attempt(nK,t.attempt(rK,a),n),n)(s))}function a(s){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(s)}}function D1e(t,e,n){const r=this;let o="",a=!1;return s;function s(u){return(u===72||u===104)&&lK.call(r,r.previous)&&!DD(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),o+=String.fromCodePoint(u),t.consume(u),i):n(u)}function i(u){if(Es(u)&&o.length<5)return o+=String.fromCodePoint(u),t.consume(u),i;if(u===58){const m=o.toLowerCase();if(m==="http"||m==="https")return t.consume(u),l}return n(u)}function l(u){return u===47?(t.consume(u),a?c:(a=!0,l)):n(u)}function c(u){return u===null||lE(u)||hr(u)||Of(u)||ow(u)?n(u):t.attempt(nK,t.attempt(rK,d),n)(u)}function d(u){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(u)}}function N1e(t,e,n){let r=0;return o;function o(s){return(s===87||s===119)&&r<3?(r++,t.consume(s),o):s===46&&r===3?(t.consume(s),a):n(s)}function a(s){return s===null?n(s):e(s)}}function L1e(t,e,n){let r,o,a;return s;function s(c){return c===46||c===95?t.check(oK,l,i)(c):c===null||hr(c)||Of(c)||c!==45&&ow(c)?l(c):(a=!0,t.consume(c),s)}function i(c){return c===95?r=!0:(o=r,r=void 0),t.consume(c),s}function l(c){return o||r||!a?n(c):e(c)}}function j1e(t,e){let n=0,r=0;return o;function o(s){return s===40?(n++,t.consume(s),o):s===41&&r<n?a(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?t.check(oK,e,a)(s):s===null||hr(s)||Of(s)?e(s):(t.consume(s),o)}function a(s){return s===41&&r++,t.consume(s),o}}function B1e(t,e,n){return r;function r(i){return i===33||i===34||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===63||i===95||i===126?(t.consume(i),r):i===38?(t.consume(i),a):i===93?(t.consume(i),o):i===60||i===null||hr(i)||Of(i)?e(i):n(i)}function o(i){return i===null||i===40||i===91||hr(i)||Of(i)?e(i):r(i)}function a(i){return Es(i)?s(i):n(i)}function s(i){return i===59?(t.consume(i),r):Es(i)?(t.consume(i),s):n(i)}}function F1e(t,e,n){return r;function r(a){return t.consume(a),o}function o(a){return Ya(a)?n(a):e(a)}}function iK(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||hr(t)}function lK(t){return!Es(t)}function cK(t){return!(t===47||rM(t))}function rM(t){return t===43||t===45||t===46||t===95||Ya(t)}function DD(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const z1e={tokenize:W1e,partial:!0};function U1e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:V1e,continuation:{tokenize:G1e},exit:K1e}},text:{91:{name:"gfmFootnoteCall",tokenize:$1e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:q1e,resolveTo:H1e}}}}function q1e(t,e,n){const r=this;let o=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;o--;){const l=r.events[o][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return i;function i(l){if(!s||!s._balanced)return n(l);const c=Ql(r.sliceSerialize({start:s.end,end:r.now()}));return c.codePointAt(0)!==94||!a.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function H1e(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},t[t.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},i=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",o,e],["exit",o,e],["enter",a,e],["enter",s,e],["exit",s,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...i),t}function $1e(t,e,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,s;return i;function i(u){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),l}function l(u){return u!==94?n(u):(t.enter("gfmFootnoteCallMarker"),t.consume(u),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(u){if(a>999||u===93&&!s||u===null||u===91||hr(u))return n(u);if(u===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return o.includes(Ql(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(u)}return hr(u)||(s=!0),a++,t.consume(u),u===92?d:c}function d(u){return u===91||u===92||u===93?(t.consume(u),a++,c):c(u)}}function V1e(t,e,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,s=0,i;return l;function l(y){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(y)}function d(y){if(s>999||y===93&&!i||y===null||y===91||hr(y))return n(y);if(y===93){t.exit("chunkString");const v=t.exit("gfmFootnoteDefinitionLabelString");return a=Ql(r.sliceSerialize(v)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return hr(y)||(i=!0),s++,t.consume(y),y===92?u:d}function u(y){return y===91||y===92||y===93?(t.consume(y),s++,d):d(y)}function m(y){return y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),o.includes(a)||o.push(a),In(t,h,"gfmFootnoteDefinitionWhitespace")):n(y)}function h(y){return e(y)}}function G1e(t,e,n){return t.check(W0,e,t.attempt(z1e,e,n))}function K1e(t){t.exit("gfmFootnoteDefinition")}function W1e(t,e,n){const r=this;return In(t,o,"gfmFootnoteDefinitionIndent",5);function o(a){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?e(a):n(a)}}function Y1e(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:o};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function o(s,i){let l=-1;for(;++l<s.length;)if(s[l][0]==="enter"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._close){let c=l;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[l][1].end.offset-s[l][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[l][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[l][1].end)},u={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[l][1].start)},m=[["enter",d,i],["enter",s[c][1],i],["exit",s[c][1],i],["enter",u,i]],h=i.parser.constructs.insideSpan.null;h&&Fi(m,m.length,0,aw(h,s.slice(c+1,l),i)),Fi(m,m.length,0,[["exit",u,i],["enter",s[l][1],i],["exit",s[l][1],i],["exit",d,i]]),Fi(s,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<s.length;)s[l][1].type==="strikethroughSequenceTemporary"&&(s[l][1].type="data");return s}function a(s,i,l){const c=this.previous,d=this.events;let u=0;return m;function m(y){return c===126&&d[d.length-1][1].type!=="characterEscape"?l(y):(s.enter("strikethroughSequenceTemporary"),h(y))}function h(y){const v=qh(c);if(y===126)return u>1?l(y):(s.consume(y),u++,h);if(u<2&&!n)return l(y);const x=s.exit("strikethroughSequenceTemporary"),S=qh(y);return x._open=!S||S===2&&!!v,x._close=!v||v===2&&!!S,i(y)}}}class X1e{constructor(){this.map=[]}add(e,n,r){J1e(this,e,n,r)}consume(e){if(this.map.sort(function(a,s){return a[0]-s[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let o=r.pop();for(;o;){for(const a of o)e.push(a);o=r.pop()}this.map.length=0}}function J1e(t,e,n,r){let o=0;if(!(n===0&&r.length===0)){for(;o<t.map.length;){if(t.map[o][0]===e){t.map[o][1]+=n,t.map[o][2].push(...r);return}o+=1}t.map.push([e,n,r])}}function Q1e(t,e){let n=!1;const r=[];for(;e<t.length;){const o=t[e];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Z1e(){return{flow:{null:{name:"table",tokenize:eEe,resolveAll:tEe}}}}function eEe(t,e,n){const r=this;let o=0,a=0,s;return i;function i(B){let V=r.events.length-1;for(;V>-1;){const j=r.events[V][1].type;if(j==="lineEnding"||j==="linePrefix")V--;else break}const z=V>-1?r.events[V][1].type:null,H=z==="tableHead"||z==="tableRow"?P:l;return H===P&&r.parser.lazy[r.now().line]?n(B):H(B)}function l(B){return t.enter("tableHead"),t.enter("tableRow"),c(B)}function c(B){return B===124||(s=!0,a+=1),d(B)}function d(B){return B===null?n(B):Pt(B)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),h):n(B):vn(B)?In(t,d,"whitespace")(B):(a+=1,s&&(s=!1,o+=1),B===124?(t.enter("tableCellDivider"),t.consume(B),t.exit("tableCellDivider"),s=!0,d):(t.enter("data"),u(B)))}function u(B){return B===null||B===124||hr(B)?(t.exit("data"),d(B)):(t.consume(B),B===92?m:u)}function m(B){return B===92||B===124?(t.consume(B),u):u(B)}function h(B){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(B):(t.enter("tableDelimiterRow"),s=!1,vn(B)?In(t,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):y(B))}function y(B){return B===45||B===58?x(B):B===124?(s=!0,t.enter("tableCellDivider"),t.consume(B),t.exit("tableCellDivider"),v):I(B)}function v(B){return vn(B)?In(t,x,"whitespace")(B):x(B)}function x(B){return B===58?(a+=1,s=!0,t.enter("tableDelimiterMarker"),t.consume(B),t.exit("tableDelimiterMarker"),S):B===45?(a+=1,S(B)):B===null||Pt(B)?_(B):I(B)}function S(B){return B===45?(t.enter("tableDelimiterFiller"),T(B)):I(B)}function T(B){return B===45?(t.consume(B),T):B===58?(s=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(B),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C(B))}function C(B){return vn(B)?In(t,_,"whitespace")(B):_(B)}function _(B){return B===124?y(B):B===null||Pt(B)?!s||o!==a?I(B):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(B)):I(B)}function I(B){return n(B)}function P(B){return t.enter("tableRow"),M(B)}function M(B){return B===124?(t.enter("tableCellDivider"),t.consume(B),t.exit("tableCellDivider"),M):B===null||Pt(B)?(t.exit("tableRow"),e(B)):vn(B)?In(t,M,"whitespace")(B):(t.enter("data"),D(B))}function D(B){return B===null||B===124||hr(B)?(t.exit("data"),M(B)):(t.consume(B),B===92?F:D)}function F(B){return B===92||B===124?(t.consume(B),D):D(B)}}function tEe(t,e){let n=-1,r=!0,o=0,a=[0,0,0,0],s=[0,0,0,0],i=!1,l=0,c,d,u;const m=new X1e;for(;++n<t.length;){const h=t[n],y=h[1];h[0]==="enter"?y.type==="tableHead"?(i=!1,l!==0&&(LF(m,e,l,c,d),d=void 0,l=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",c,e]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,u=void 0,a=[0,0,0,0],s=[0,n+1,0,0],i&&(i=!1,d={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",d,e]])),o=y.type==="tableDelimiterRow"?2:d?3:1):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(a[1]!==0&&(s[0]=s[1],u=nS(m,e,a,o,void 0,u),a=[0,0,0,0]),s[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(s[0]=s[1],u=nS(m,e,a,o,void 0,u)),a=s,s=[a[1],n,0,0])):y.type==="tableHead"?(i=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,a[1]!==0?(s[0]=s[1],u=nS(m,e,a,o,n,u)):s[1]!==0&&(u=nS(m,e,s,o,n,u)),o=0):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(s[3]=n)}for(l!==0&&LF(m,e,l,c,d),m.consume(e.events),n=-1;++n<e.events.length;){const h=e.events[n];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=Q1e(e.events,n))}return t}function nS(t,e,n,r,o,a){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",i="tableContent";n[0]!==0&&(a.end=Object.assign({},ph(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const l=ph(e.events,n[1]);if(a={type:s,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const c=ph(e.events,n[2]),d=ph(e.events,n[3]),u={type:i,start:Object.assign({},c),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",u,e]]),r!==2){const m=e.events[n[2]],h=e.events[n[3]];if(m[1].end=Object.assign({},h[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,v=n[3]-n[2]-1;t.add(y,v,[])}}t.add(n[3]+1,0,[["exit",u,e]])}return o!==void 0&&(a.end=Object.assign({},ph(e.events,o)),t.add(o,0,[["exit",a,e]]),a=void 0),a}function LF(t,e,n,r,o){const a=[],s=ph(e.events,n);o&&(o.end=Object.assign({},s),a.push(["exit",o,e])),r.end=Object.assign({},s),a.push(["exit",r,e]),t.add(n+1,0,a)}function ph(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const nEe={name:"tasklistCheck",tokenize:oEe};function rEe(){return{text:{91:nEe}}}function oEe(t,e,n){const r=this;return o;function o(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),a)}function a(l){return hr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),s):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),s):n(l)}function s(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),i):n(l)}function i(l){return Pt(l)?e(l):vn(l)?t.check({tokenize:aEe},e,n)(l):n(l)}}function aEe(t,e,n){return In(t,r,"whitespace");function r(o){return o===null?n(o):e(o)}}function sEe(t){return IV([O1e(),U1e(),Y1e(t),Z1e(),rEe()])}const iEe={};function lEe(t){const e=this,n=t||iEe,r=e.data(),o=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);o.push(sEe(n)),a.push(_1e()),s.push(k1e(n))}const jF=(function(t,e,n){const r=Y0(n);if(!t||!t.type||!t.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=t.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<t.children.length;)if(r(t.children[e],e,t))return t.children[e]}),nm=(function(t){if(t==null)return dEe;if(typeof t=="string")return uEe(t);if(typeof t=="object")return cEe(t);if(typeof t=="function")return ND(t);throw new Error("Expected function, string, or array as `test`")});function cEe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=nm(t[n]);return ND(r);function r(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function uEe(t){return ND(e);function e(n){return n.tagName===t}}function ND(t){return e;function e(n,r,o){return!!(pEe(n)&&t.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function dEe(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function pEe(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const BF=/\n/g,FF=/[\t ]+/g,oM=nm("br"),zF=nm(xEe),fEe=nm("p"),UF=nm("tr"),mEe=nm(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",vEe,SEe]),uK=nm(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function hEe(t,e){const n=e||{},r="children"in t?t.children:[],o=uK(t),a=fK(t,{whitespace:n.whitespace||"normal"}),s=[];(t.type==="text"||t.type==="comment")&&s.push(...pK(t,{breakBefore:!0,breakAfter:!0}));let i=-1;for(;++i<r.length;)s.push(...dK(r[i],t,{whitespace:a,breakBefore:i?void 0:o,breakAfter:i<r.length-1?oM(r[i+1]):o}));const l=[];let c;for(i=-1;++i<s.length;){const d=s[i];typeof d=="number"?c!==void 0&&d>c&&(c=d):d&&(c!==void 0&&c>-1&&l.push(`
`.repeat(c)||" "),c=-1,l.push(d))}return l.join("")}function dK(t,e,n){return t.type==="element"?gEe(t,e,n):t.type==="text"?n.whitespace==="normal"?pK(t,n):bEe(t):[]}function gEe(t,e,n){const r=fK(t,n),o=t.children||[];let a=-1,s=[];if(mEe(t))return s;let i,l;for(oM(t)||UF(t)&&jF(e,t,UF)?l=`
`:fEe(t)?(i=2,l=2):uK(t)&&(i=1,l=1);++a<o.length;)s=s.concat(dK(o[a],t,{whitespace:r,breakBefore:a?void 0:i,breakAfter:a<o.length-1?oM(o[a+1]):l}));return zF(t)&&jF(e,t,zF)&&s.push("	"),i&&s.unshift(i),l&&s.push(l),s}function pK(t,e){const n=String(t.value),r=[],o=[];let a=0;for(;a<=n.length;){BF.lastIndex=a;const l=BF.exec(n),c=l&&"index"in l?l.index:n.length;r.push(yEe(n.slice(a,c).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),a===0?e.breakBefore:!0,c===n.length?e.breakAfter:!0)),a=c+1}let s=-1,i;for(;++s<r.length;)r[s].charCodeAt(r[s].length-1)===8203||s<r.length-1&&r[s+1].charCodeAt(0)===8203?(o.push(r[s]),i=void 0):r[s]?(typeof i=="number"&&o.push(i),o.push(r[s]),i=0):(s===0||s===r.length-1)&&o.push(0);return o}function bEe(t){return[String(t.value)]}function yEe(t,e,n){const r=[];let o=0,a;for(;o<t.length;){FF.lastIndex=o;const s=FF.exec(t);a=s?s.index:t.length,!o&&!a&&s&&!e&&r.push(""),o!==a&&r.push(t.slice(o,a)),o=s?a+s[0].length:a}return o!==a&&!n&&r.push(""),r.join(" ")}function fK(t,e){if(t.type==="element"){const n=t.properties||{};switch(t.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function vEe(t){return!!(t.properties||{}).hidden}function xEe(t){return t.tagName==="td"||t.tagName==="th"}function SEe(t){return t.tagName==="dialog"&&!(t.properties||{}).open}function EEe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",s="(?!struct)("+r+"|"+e.optional(o)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",i={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},u={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:e.optional(o)+t.IDENT_RE,relevance:0},h=e.optional(o)+t.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],x=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],S=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],_={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:x},I={className:"function.dispatch",relevance:0,keywords:{_hint:S},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},P=[I,u,i,n,t.C_BLOCK_COMMENT_MODE,d,c],M={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:_,contains:P.concat([{begin:/\(/,end:/\)/,keywords:_,contains:P.concat(["self"]),relevance:0}]),relevance:0},D={className:"function",begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:_,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:_,relevance:0},{begin:h,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,d,i,{begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,d,i]}]},i,n,t.C_BLOCK_COMMENT_MODE,u]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:_,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(M,D,I,P,[u,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:_,contains:["self",i]},{begin:t.IDENT_RE+"::",keywords:_},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function TEe(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=EEe(t),r=n.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function wEe(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const o={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},a=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),s={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},i={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,o]};o.contains.push(i);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},d={match:/\\'/},u={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},m=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],h=t.SHEBANG({binary:`(${m.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],x=["true","false"],S={match:/(\/[a-z._-]+)+/},T=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],C=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],_=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],I=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:x,built_in:[...T,...C,"set","shopt",..._,...I]},contains:[h,t.SHEBANG(),y,u,a,s,S,i,l,c,d,n]}}function CEe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",s="("+r+"|"+e.optional(o)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",i={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},u={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:e.optional(o)+t.IDENT_RE,relevance:0},h=e.optional(o)+t.IDENT_RE+"\\s*\\(",x={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},S=[u,i,n,t.C_BLOCK_COMMENT_MODE,d,c],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:x,contains:S.concat([{begin:/\(/,end:/\)/,keywords:x,contains:S.concat(["self"]),relevance:0}]),relevance:0},C={begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:x,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:x,relevance:0},{begin:h,returnBegin:!0,contains:[t.inherit(m,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:x,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,d,i,{begin:/\(/,end:/\)/,keywords:x,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,d,i]}]},i,n,t.C_BLOCK_COMMENT_MODE,u]};return{name:"C",aliases:["h"],keywords:x,disableAutodetect:!0,illegal:"</",contains:[].concat(T,C,S,[u,{begin:t.IDENT_RE+"::",keywords:x},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:u,strings:c,keywords:x}}}function AEe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",s="(?!struct)("+r+"|"+e.optional(o)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",i={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},u={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:e.optional(o)+t.IDENT_RE,relevance:0},h=e.optional(o)+t.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],x=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],S=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],_={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:x},I={className:"function.dispatch",relevance:0,keywords:{_hint:S},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},P=[I,u,i,n,t.C_BLOCK_COMMENT_MODE,d,c],M={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:_,contains:P.concat([{begin:/\(/,end:/\)/,keywords:_,contains:P.concat(["self"]),relevance:0}]),relevance:0},D={className:"function",begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:_,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:_,relevance:0},{begin:h,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,d,i,{begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,d,i]}]},i,n,t.C_BLOCK_COMMENT_MODE,u]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:_,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(M,D,I,P,[u,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:_,contains:["self",i]},{begin:t.IDENT_RE+"::",keywords:_},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function _Ee(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],o=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],a=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],s={keyword:o.concat(a),built_in:e,literal:r},i=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},u=t.inherit(d,{illegal:/\n/}),m={className:"subst",begin:/\{/,end:/\}/,keywords:s},h=t.inherit(m,{illegal:/\n/}),y={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,h]},v={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},m]},x=t.inherit(v,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]});m.contains=[v,y,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.C_BLOCK_COMMENT_MODE],h.contains=[x,y,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const S={variants:[c,v,y,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},T={begin:"<",end:">",contains:[{beginKeywords:"in out"},i]},C=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",_={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:s,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},S,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},i,T,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[i,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[i,T,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+C+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:s,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,T],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,relevance:0,contains:[S,l,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},_]}}const kEe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),IEe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],PEe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],OEe=[...IEe,...PEe],MEe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),REe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),DEe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),NEe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function LEe(t){const e=t.regex,n=kEe(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",a=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",i=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+REe.join("|")+")"},{begin:":(:)?("+DEe.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+NEe.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...i,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...i,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:a},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:MEe.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...i,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+OEe.join("|")+")\\b"}]}}function jEe(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function BEe(t){const a={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:a,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:a,illegal:/["']/}]}]}}function FEe(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function zEe(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const o={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},a={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},i={begin:/\[/,end:/\]/,contains:[r,a,o,s,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,d=/'[^']*'/,u=e.either(l,c,d),m=e.concat(u,"(\\s*\\.\\s*",u,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:m,className:"attr",starts:{end:/$/,contains:[r,i,a,o,s,n]}}]}}var fh="[0-9](_*[0-9])*",rS=`\\.(${fh})`,oS="[0-9a-fA-F](_*[0-9a-fA-F])*",qF={className:"number",variants:[{begin:`(\\b(${fh})((${rS})|\\.)?|(${rS}))[eE][+-]?(${fh})[fFdD]?\\b`},{begin:`\\b(${fh})((${rS})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${rS})[fFdD]?\\b`},{begin:`\\b(${fh})[fFdD]\\b`},{begin:`\\b0[xX]((${oS})\\.?|(${oS})?\\.(${oS}))[pP][+-]?(${fh})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${oS})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function mK(t,e,n){return n===-1?"":t.replace(e,r=>mK(t,e,n-1))}function UEe(t){const e=t.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+mK("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},d={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[d,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,qF,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},qF,c]}}const HF="[A-Za-z$_][0-9A-Za-z$_]*",qEe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],HEe=["true","false","null","undefined","NaN","Infinity"],hK=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],gK=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],bK=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],$Ee=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],VEe=[].concat(bK,hK,gK);function GEe(t){const e=t.regex,n=(X,{after:ee})=>{const $="</"+X[0].slice(1);return X.input.indexOf($,ee)!==-1},r=HF,o={begin:"<>",end:"</>"},a=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(X,ee)=>{const $=X[0].length+X.index,G=X.input[$];if(G==="<"||G===","){ee.ignoreMatch();return}G===">"&&(n(X,{after:$})||ee.ignoreMatch());let re;const K=X.input.substring($);if(re=K.match(/^\s*=/)){ee.ignoreMatch();return}if((re=K.match(/^\s+extends\s+/))&&re.index===0){ee.ignoreMatch();return}}},i={$pattern:HF,keyword:qEe,literal:HEe,built_in:VEe,"variable.language":$Ee},l="[0-9](_?[0-9])*",c=`\\.(${l})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",u={className:"number",variants:[{begin:`(\\b(${d})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${d})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},x={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,m]},T={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},C=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,y,v,x,{match:/\$\d+/},u];m.contains=C.concat({begin:/\{/,end:/\}/,keywords:i,contains:["self"].concat(C)});const _=[].concat(T,m.contains),I=_.concat([{begin:/(\s*)\(/,end:/\)/,keywords:i,contains:["self"].concat(_)}]),P={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:I},M={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},D={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...hK,...gK]}},F={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},B={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[P],illegal:/%/},V={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function z(X){return e.concat("(?!",X.join("|"),")")}const H={match:e.concat(/\b/,z([...bK,"super","import"].map(X=>`${X}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},j={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},q={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},P]},U="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",Y={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(U)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[P]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:i,exports:{PARAMS_CONTAINS:I,CLASS_REFERENCE:D},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),F,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,y,v,x,T,{match:/\$\d+/},u,D,{scope:"attr",match:r+e.lookahead(":"),relevance:0},Y,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,t.REGEXP_MODE,{className:"function",begin:U,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:I}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:a},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},B,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[P,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},j,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[P]},H,V,M,q,{match:/\$[(.]/}]}}function KEe(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],o={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,o,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var mh="[0-9](_*[0-9])*",aS=`\\.(${mh})`,sS="[0-9a-fA-F](_*[0-9a-fA-F])*",WEe={className:"number",variants:[{begin:`(\\b(${mh})((${aS})|\\.)?|(${aS}))[eE][+-]?(${mh})[fFdD]?\\b`},{begin:`\\b(${mh})((${aS})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${aS})[fFdD]?\\b`},{begin:`\\b(${mh})[fFdD]\\b`},{begin:`\\b0[xX]((${sS})\\.?|(${sS})?\\.(${sS}))[pP][+-]?(${mh})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${sS})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function YEe(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},o={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},a={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},s={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[a,o]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,a,o]}]};o.contains.push(s);const i={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(s,{className:"string"}),"self"]}]},c=WEe,d=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),u={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},m=u;return m.variants[1].contains=[u],u.variants[1].contains=[m],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,d,n,r,i,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[u,t.C_LINE_COMMENT_MODE,d],relevance:0},t.C_LINE_COMMENT_MODE,d,i,l,s,t.C_NUMBER_MODE]},d]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},i,l]},s,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}const XEe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),JEe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],QEe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],ZEe=[...JEe,...QEe],eTe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),yK=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),vK=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),tTe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),nTe=yK.concat(vK).sort().reverse();function rTe(t){const e=XEe(t),n=nTe,r="and or not only",o="[\\w-]+",a="("+o+"|@\\{"+o+"\\})",s=[],i=[],l=function(C){return{className:"string",begin:"~?"+C+".*?"+C}},c=function(C,_,I){return{className:C,begin:_,relevance:I}},d={$pattern:/[a-z-]+/,keyword:r,attribute:eTe.join(" ")},u={begin:"\\(",end:"\\)",contains:i,keywords:d,relevance:0};i.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,u,c("variable","@@?"+o,10),c("variable","@\\{"+o+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:o+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const m=i.concat({begin:/\{/,end:/\}/,contains:s}),h={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(i)},y={begin:a+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+tTe.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:i}}]},v={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:d,returnEnd:!0,contains:i,relevance:0}},x={className:"variable",variants:[{begin:"@"+o+"\\s*:",relevance:15},{begin:"@"+o}],starts:{end:"[;}]",returnEnd:!0,contains:m}},S={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:a,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,h,c("keyword","all\\b"),c("variable","@\\{"+o+"\\}"),{begin:"\\b("+ZEe.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,c("selector-tag",a,0),c("selector-id","#"+a),c("selector-class","\\."+a,0),c("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+yK.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+vK.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:m},{begin:"!important"},e.FUNCTION_DISPATCH]},T={begin:o+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[S]};return s.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,v,x,T,y,S,h,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:s}}function oTe(t){const e="\\[=*\\[",n="\\]=*\\]",r={begin:e,end:n,contains:["self"]},o=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:o.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:o}].concat(o)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[r],relevance:5}])}}function aTe(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},o={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},a={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},s={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,r,o,a,s]}}function sTe(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},a={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},i=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,i,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},u=t.inherit(c,{contains:[]}),m=t.inherit(d,{contains:[]});c.contains.push(m),d.contains.push(u);let h=[n,l];return[c,d,u,m].forEach(S=>{S.contains=S.contains.concat(h)}),h=h.concat(c,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,a,c,d,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},o,r,l,s,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function iTe(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,i={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:i,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function lTe(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:n.join(" ")},a={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},s={begin:/->\{/,end:/\}/},i={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[i]},c={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[t.BACKSLASH_ESCAPE,a,l],u=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],m=(v,x,S="\\1")=>{const T=S==="\\1"?S:e.concat(S,x);return e.concat(e.concat("(?:",v,")"),x,/(?:\\.|[^\\\/])*?/,T,/(?:\\.|[^\\\/])*?/,S,r)},h=(v,x,S)=>e.concat(e.concat("(?:",v,")"),x,/(?:\\.|[^\\\/])*?/,S,r),y=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},c,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:m("s|tr|y",e.either(...u,{capture:!0}))},{begin:m("s|tr|y","\\(","\\)")},{begin:m("s|tr|y","\\[","\\]")},{begin:m("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:h("(?:m|qr)?",/\//,/\//)},{begin:h("m|qr",e.either(...u,{capture:!0}),/\1/)},{begin:h("m|qr",/\(/,/\)/)},{begin:h("m|qr",/\[/,/\]/)},{begin:h("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,i]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,i,c]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return a.contains=y,s.contains=y,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:y}}function cTe(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),o=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),a=e.concat(/[A-Z]+/,n),s={scope:"variable",match:"\\$+"+r},i={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=t.inherit(t.APOS_STRING_MODE,{illegal:null}),d=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(l)}),u={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(j,q)=>{q.data._beginMatch=j[1]||j[2]},"on:end":(j,q)=>{q.data._beginMatch!==j[1]&&q.ignoreMatch()}},m=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),h=`[ 	
]`,y={scope:"string",variants:[d,c,u,m]},v={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},x=["false","null","true"],S=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],T=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],_={keyword:S,literal:(j=>{const q=[];return j.forEach(U=>{q.push(U),U.toLowerCase()===U?q.push(U.toUpperCase()):q.push(U.toLowerCase())}),q})(x),built_in:T},I=j=>j.map(q=>q.replace(/\|\d+$/,"")),P={variants:[{match:[/new/,e.concat(h,"+"),e.concat("(?!",I(T).join("\\b|"),"\\b)"),o],scope:{1:"keyword",4:"title.class"}}]},M=e.concat(r,"\\b(?!\\()"),D={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),M],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[o,e.concat(/::/,e.lookahead(/(?!class\b)/)),M],scope:{1:"title.class",3:"variable.constant"}},{match:[o,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[o,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},F={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},B={relevance:0,begin:/\(/,end:/\)/,keywords:_,contains:[F,s,D,t.C_BLOCK_COMMENT_MODE,y,v,P]},V={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",I(S).join("\\b|"),"|",I(T).join("\\b|"),"\\b)"),r,e.concat(h,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[B]};B.contains.push(V);const z=[F,D,t.C_BLOCK_COMMENT_MODE,y,v,P],H={begin:e.concat(/#\[\s*\\?/,e.either(o,a)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:x,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:x,keyword:["new","array"]},contains:["self",...z]},...z,{scope:"meta",variants:[{match:o},{match:a}]}]};return{case_insensitive:!1,keywords:_,contains:[H,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},i,{scope:"variable.language",match:/\$this\b/},s,V,D,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},P,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:_,contains:["self",H,s,D,t.C_BLOCK_COMMENT_MODE,y,v]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},y,v]}}function uTe(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function dTe(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function pTe(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],i={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:i,illegal:/#/},d={begin:/\{\{/,relevance:0},u={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l,d,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l,d,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,d,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,d,c]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},m="[0-9](_?[0-9])*",h=`(\\b(${m}))?\\.(${m})|\\b(${m})\\.`,y=`\\b|${r.join("|")}`,v={className:"number",relevance:0,variants:[{begin:`(\\b(${m})|(${h}))[eE][+-]?(${m})[jJ]?(?=${y})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${y})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${y})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${y})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${y})`},{begin:`\\b(${m})[jJ](?=${y})`}]},x={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:i,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},S={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:["self",l,v,u,t.HASH_COMMENT_MODE]}]};return c.contains=[u,v,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:i,illegal:/(<\/|\?)|=>/,contains:[l,v,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},u,x,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[S]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[v,S,u]}]}}function fTe(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function mTe(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),o=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,a=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[o,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[a,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:o},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:a},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function hTe(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),o=e.concat(r,/(::\w+)*/),s={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},i={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[t.COMMENT("#","$",{contains:[i]}),t.COMMENT("^=begin","^=end",{contains:[i],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:s},u={className:"string",contains:[t.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,d]})]}]},m="[1-9](_?[0-9])*|0",h="[0-9](_?[0-9])*",y={className:"number",relevance:0,variants:[{begin:`\\b(${m})(\\.(${h}))?([eE][+-]?(${h})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},v={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:s}]},P=[u,{variants:[{match:[/class\s+/,o,/\s+<\s+/,o]},{match:[/\b(class|module)\s+/,o]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:s},{match:[/(include|extend)\s+/,o],scope:{2:"title.class"},keywords:s},{relevance:0,match:[o,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[v]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[u,{begin:n}],relevance:0},y,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:s},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);d.contains=P,v.contains=P;const B=[{begin:/^\s*=>/,starts:{end:"$",contains:P}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:s,contains:P}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:s,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(B).concat(c).concat(P)}}function gTe(t){const e=t.regex,n=/(r#)?/,r=e.concat(n,t.UNDERSCORE_IDENT_RE),o=e.concat(n,t.IDENT_RE),a={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,o,e.lookahead(/\s*\(/))},s="([ui](8|16|32|64|128|size)|f(32|64))?",i=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:d,keyword:i,literal:l,built_in:c},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+s},{begin:"\\b0o([0-7_]+)"+s},{begin:"\\b0x([A-Fa-f0-9_]+)"+s},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+s}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:d}},{className:"punctuation",begin:"->"},a]}}const bTe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),yTe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],vTe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],xTe=[...yTe,...vTe],STe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),ETe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),TTe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),wTe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function CTe(t){const e=bTe(t),n=TTe,r=ETe,o="@[a-z-]+",a="and or not only",i={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+xTe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},i,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+wTe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,i,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:STe.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},i,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function ATe(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function _Te(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},o={begin:/"/,end:/"/,contains:[{match:/""/}]},a=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],i=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],u=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],m=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],h=d,y=[...c,...l].filter(I=>!d.includes(I)),v={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},x={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},S={match:e.concat(/\b/,e.either(...h),/\s*\(/),relevance:0,keywords:{built_in:h}};function T(I){return e.concat(/\b/,e.either(...I.map(P=>P.replace(/\s+/,"\\s+"))),/\b/)}const C={scope:"keyword",match:T(m),relevance:0};function _(I,{exceptions:P,when:M}={}){const D=M;return P=P||[],I.map(F=>F.match(/\|\d+$/)||P.includes(F)?F:D(F)?`${F}|0`:F)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:_(y,{when:I=>I.length<3}),literal:a,type:i,built_in:u},contains:[{scope:"type",match:T(s)},C,S,v,r,o,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,x]}}function xK(t){return t?typeof t=="string"?t:t.source:null}function Nb(t){return sr("(?=",t,")")}function sr(...t){return t.map(n=>xK(n)).join("")}function kTe(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function gs(...t){return"("+(kTe(t).capture?"":"?:")+t.map(r=>xK(r)).join("|")+")"}const LD=t=>sr(/\b/,t,/\w$/.test(t)?/\b/:/\B/),ITe=["Protocol","Type"].map(LD),$F=["init","self"].map(LD),PTe=["Any","Self"],M2=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],VF=["false","nil","true"],OTe=["assignment","associativity","higherThan","left","lowerThan","none","right"],MTe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],GF=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],SK=gs(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),EK=gs(SK,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),R2=sr(SK,EK,"*"),TK=gs(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),mE=gs(TK,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Cc=sr(TK,mE,"*"),iS=sr(/[A-Z]/,mE,"*"),RTe=["attached","autoclosure",sr(/convention\(/,gs("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",sr(/objc\(/,Cc,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],DTe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function NTe(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[t.C_LINE_COMMENT_MODE,n],o={match:[/\./,gs(...ITe,...$F)],className:{2:"keyword"}},a={match:sr(/\./,gs(...M2)),relevance:0},s=M2.filter(wt=>typeof wt=="string").concat(["_|0"]),i=M2.filter(wt=>typeof wt!="string").concat(PTe).map(LD),l={variants:[{className:"keyword",match:gs(...i,...$F)}]},c={$pattern:gs(/\b\w+/,/#\w+/),keyword:s.concat(MTe),literal:VF},d=[o,a,l],u={match:sr(/\./,gs(...GF)),relevance:0},m={className:"built_in",match:sr(/\b/,gs(...GF),/(?=\()/)},h=[u,m],y={match:/->/,relevance:0},v={className:"operator",relevance:0,variants:[{match:R2},{match:`\\.(\\.|${EK})+`}]},x=[y,v],S="([0-9]_*)+",T="([0-9a-fA-F]_*)+",C={className:"number",relevance:0,variants:[{match:`\\b(${S})(\\.(${S}))?([eE][+-]?(${S}))?\\b`},{match:`\\b0x(${T})(\\.(${T}))?([pP][+-]?(${S}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},_=(wt="")=>({className:"subst",variants:[{match:sr(/\\/,wt,/[0\\tnr"']/)},{match:sr(/\\/,wt,/u\{[0-9a-fA-F]{1,8}\}/)}]}),I=(wt="")=>({className:"subst",match:sr(/\\/,wt,/[\t ]*(?:[\r\n]|\r\n)/)}),P=(wt="")=>({className:"subst",label:"interpol",begin:sr(/\\/,wt,/\(/),end:/\)/}),M=(wt="")=>({begin:sr(wt,/"""/),end:sr(/"""/,wt),contains:[_(wt),I(wt),P(wt)]}),D=(wt="")=>({begin:sr(wt,/"/),end:sr(/"/,wt),contains:[_(wt),P(wt)]}),F={className:"string",variants:[M(),M("#"),M("##"),M("###"),D(),D("#"),D("##"),D("###")]},B=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],V={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:B},z=wt=>{const qn=sr(wt,/\//),Gn=sr(/\//,wt);return{begin:qn,end:Gn,contains:[...B,{scope:"comment",begin:`#(?!.*${Gn})`,end:/$/}]}},H={scope:"regexp",variants:[z("###"),z("##"),z("#"),V]},j={match:sr(/`/,Cc,/`/)},q={className:"variable",match:/\$\d+/},U={className:"variable",match:`\\$${mE}+`},Y=[j,q,U],X={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:DTe,contains:[...x,C,F]}]}},ee={scope:"keyword",match:sr(/@/,gs(...RTe),Nb(gs(/\(/,/\s+/)))},$={scope:"meta",match:sr(/@/,Cc)},G=[X,ee,$],re={match:Nb(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:sr(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,mE,"+")},{className:"type",match:iS,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:sr(/\s+&\s+/,Nb(iS)),relevance:0}]},K={begin:/</,end:/>/,keywords:c,contains:[...r,...d,...G,y,re]};re.contains.push(K);const ve={match:sr(Cc,/\s*:/),keywords:"_|0",relevance:0},xe={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",ve,...r,H,...d,...h,...x,C,F,...Y,...G,re]},Oe={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,re]},Ne={begin:gs(Nb(sr(Cc,/\s*:/)),Nb(sr(Cc,/\s+/,Cc,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Cc}]},Fe={begin:/\(/,end:/\)/,keywords:c,contains:[Ne,...r,...d,...x,C,F,...G,re,xe],endsParent:!0,illegal:/["']/},Ke={match:[/(func|macro)/,/\s+/,gs(j.match,Cc,R2)],className:{1:"keyword",3:"title.function"},contains:[Oe,Fe,e],illegal:[/\[/,/%/]},Qe={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Oe,Fe,e],illegal:/\[|%/},Wt={match:[/operator/,/\s+/,R2],className:{1:"keyword",3:"title"}},hn={begin:[/precedencegroup/,/\s+/,iS],className:{1:"keyword",3:"title"},contains:[re],keywords:[...OTe,...VF],end:/}/},Yt={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},Ut={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},an={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Cc,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[Oe,...d,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:iS},...d],relevance:0}]};for(const wt of F.variants){const qn=wt.contains.find(Wn=>Wn.label==="interpol");qn.keywords=c;const Gn=[...d,...h,...x,C,F,...Y];qn.contains=[...Gn,{begin:/\(/,end:/\)/,contains:["self",...Gn]}]}return{name:"Swift",keywords:c,contains:[...r,Ke,Qe,Yt,Ut,an,Wt,hn,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},H,...d,...h,...x,C,F,...Y,...G,re,xe]}}const hE="[A-Za-z$_][0-9A-Za-z$_]*",wK=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],CK=["true","false","null","undefined","NaN","Infinity"],AK=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],_K=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],kK=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],IK=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],PK=[].concat(kK,AK,_K);function LTe(t){const e=t.regex,n=(X,{after:ee})=>{const $="</"+X[0].slice(1);return X.input.indexOf($,ee)!==-1},r=hE,o={begin:"<>",end:"</>"},a=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(X,ee)=>{const $=X[0].length+X.index,G=X.input[$];if(G==="<"||G===","){ee.ignoreMatch();return}G===">"&&(n(X,{after:$})||ee.ignoreMatch());let re;const K=X.input.substring($);if(re=K.match(/^\s*=/)){ee.ignoreMatch();return}if((re=K.match(/^\s+extends\s+/))&&re.index===0){ee.ignoreMatch();return}}},i={$pattern:hE,keyword:wK,literal:CK,built_in:PK,"variable.language":IK},l="[0-9](_?[0-9])*",c=`\\.(${l})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",u={className:"number",variants:[{begin:`(\\b(${d})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${d})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},x={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,m]},T={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},C=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,y,v,x,{match:/\$\d+/},u];m.contains=C.concat({begin:/\{/,end:/\}/,keywords:i,contains:["self"].concat(C)});const _=[].concat(T,m.contains),I=_.concat([{begin:/(\s*)\(/,end:/\)/,keywords:i,contains:["self"].concat(_)}]),P={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:I},M={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},D={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...AK,..._K]}},F={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},B={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[P],illegal:/%/},V={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function z(X){return e.concat("(?!",X.join("|"),")")}const H={match:e.concat(/\b/,z([...kK,"super","import"].map(X=>`${X}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},j={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},q={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},P]},U="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",Y={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(U)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[P]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:i,exports:{PARAMS_CONTAINS:I,CLASS_REFERENCE:D},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),F,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,y,v,x,T,{match:/\$\d+/},u,D,{scope:"attr",match:r+e.lookahead(":"),relevance:0},Y,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,t.REGEXP_MODE,{className:"function",begin:U,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:I}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:a},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},B,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[P,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},j,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[P]},H,V,M,q,{match:/\$[(.]/}]}}function jTe(t){const e=t.regex,n=LTe(t),r=hE,o=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],a={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:o},contains:[n.exports.CLASS_REFERENCE]},i={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],c={$pattern:hE,keyword:wK.concat(l),literal:CK,built_in:PK.concat(o),"variable.language":IK},d={className:"meta",begin:"@"+r},u=(v,x,S)=>{const T=v.contains.findIndex(C=>C.label===x);if(T===-1)throw new Error("can not find mode to replace");v.contains.splice(T,1,S)};Object.assign(n.keywords,c),n.exports.PARAMS_CONTAINS.push(d);const m=n.contains.find(v=>v.scope==="attr"),h=Object.assign({},m,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,m,h]),n.contains=n.contains.concat([d,a,s,h]),u(n,"shebang",t.SHEBANG()),u(n,"use_strict",i);const y=n.contains.find(v=>v.label==="func.def");return y.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function BTe(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},o=/\d{1,2}\/\d{1,2}\/\d{4}/,a=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,i=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:e.concat(/# */,e.either(a,o),/ *#/)},{begin:e.concat(/# */,i,/ *#/)},{begin:e.concat(/# */,s,/ *#/)},{begin:e.concat(/# */,e.either(a,o),/ +/,e.either(s,i),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},u=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),m=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,c,d,u,m,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[m]}]}}function FTe(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],o={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},a={className:"variable",begin:/\$[\w_]+/},s={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},i={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},c={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},a,s,o,t.QUOTE_STRING_MODE,l,c,i]}}function zTe(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},a={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(a,{begin:/\(/,end:/\)/}),i=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[a,l,i,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[a,s,l,i]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function UTe(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},a={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},s={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},i=t.inherit(s,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},h={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},y={begin:/\{/,end:/\}/,contains:[h],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[h],illegal:"\\n",relevance:0},x=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},m,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},y,v,a,s],S=[...x];return S.pop(),S.push(i),h.contains=S,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:x}}const qTe={arduino:TEe,bash:wEe,c:CEe,cpp:AEe,csharp:_Ee,css:LEe,diff:jEe,go:BEe,graphql:FEe,ini:zEe,java:UEe,javascript:GEe,json:KEe,kotlin:YEe,less:rTe,lua:oTe,makefile:aTe,markdown:sTe,objectivec:iTe,perl:lTe,php:cTe,"php-template":uTe,plaintext:dTe,python:pTe,"python-repl":fTe,r:mTe,ruby:hTe,rust:gTe,scss:CTe,shell:ATe,sql:_Te,swift:NTe,typescript:jTe,vbnet:BTe,wasm:FTe,xml:zTe,yaml:UTe};var D2,KF;function HTe(){if(KF)return D2;KF=1;function t(oe){return oe instanceof Map?oe.clear=oe.delete=oe.set=function(){throw new Error("map is read-only")}:oe instanceof Set&&(oe.add=oe.clear=oe.delete=function(){throw new Error("set is read-only")}),Object.freeze(oe),Object.getOwnPropertyNames(oe).forEach(Ce=>{const Je=oe[Ce],_t=typeof Je;(_t==="object"||_t==="function")&&!Object.isFrozen(Je)&&t(Je)}),oe}class e{constructor(Ce){Ce.data===void 0&&(Ce.data={}),this.data=Ce.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(oe){return oe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(oe,...Ce){const Je=Object.create(null);for(const _t in oe)Je[_t]=oe[_t];return Ce.forEach(function(_t){for(const On in _t)Je[On]=_t[On]}),Je}const o="</span>",a=oe=>!!oe.scope,s=(oe,{prefix:Ce})=>{if(oe.startsWith("language:"))return oe.replace("language:","language-");if(oe.includes(".")){const Je=oe.split(".");return[`${Ce}${Je.shift()}`,...Je.map((_t,On)=>`${_t}${"_".repeat(On+1)}`)].join(" ")}return`${Ce}${oe}`};class i{constructor(Ce,Je){this.buffer="",this.classPrefix=Je.classPrefix,Ce.walk(this)}addText(Ce){this.buffer+=n(Ce)}openNode(Ce){if(!a(Ce))return;const Je=s(Ce.scope,{prefix:this.classPrefix});this.span(Je)}closeNode(Ce){a(Ce)&&(this.buffer+=o)}value(){return this.buffer}span(Ce){this.buffer+=`<span class="${Ce}">`}}const l=(oe={})=>{const Ce={children:[]};return Object.assign(Ce,oe),Ce};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Ce){this.top.children.push(Ce)}openNode(Ce){const Je=l({scope:Ce});this.add(Je),this.stack.push(Je)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Ce){return this.constructor._walk(Ce,this.rootNode)}static _walk(Ce,Je){return typeof Je=="string"?Ce.addText(Je):Je.children&&(Ce.openNode(Je),Je.children.forEach(_t=>this._walk(Ce,_t)),Ce.closeNode(Je)),Ce}static _collapse(Ce){typeof Ce!="string"&&Ce.children&&(Ce.children.every(Je=>typeof Je=="string")?Ce.children=[Ce.children.join("")]:Ce.children.forEach(Je=>{c._collapse(Je)}))}}class d extends c{constructor(Ce){super(),this.options=Ce}addText(Ce){Ce!==""&&this.add(Ce)}startScope(Ce){this.openNode(Ce)}endScope(){this.closeNode()}__addSublanguage(Ce,Je){const _t=Ce.root;Je&&(_t.scope=`language:${Je}`),this.add(_t)}toHTML(){return new i(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function u(oe){return oe?typeof oe=="string"?oe:oe.source:null}function m(oe){return v("(?=",oe,")")}function h(oe){return v("(?:",oe,")*")}function y(oe){return v("(?:",oe,")?")}function v(...oe){return oe.map(Je=>u(Je)).join("")}function x(oe){const Ce=oe[oe.length-1];return typeof Ce=="object"&&Ce.constructor===Object?(oe.splice(oe.length-1,1),Ce):{}}function S(...oe){return"("+(x(oe).capture?"":"?:")+oe.map(_t=>u(_t)).join("|")+")"}function T(oe){return new RegExp(oe.toString()+"|").exec("").length-1}function C(oe,Ce){const Je=oe&&oe.exec(Ce);return Je&&Je.index===0}const _=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function I(oe,{joinWith:Ce}){let Je=0;return oe.map(_t=>{Je+=1;const On=Je;let $n=u(_t),ut="";for(;$n.length>0;){const ot=_.exec($n);if(!ot){ut+=$n;break}ut+=$n.substring(0,ot.index),$n=$n.substring(ot.index+ot[0].length),ot[0][0]==="\\"&&ot[1]?ut+="\\"+String(Number(ot[1])+On):(ut+=ot[0],ot[0]==="("&&Je++)}return ut}).map(_t=>`(${_t})`).join(Ce)}const P=/\b\B/,M="[a-zA-Z]\\w*",D="[a-zA-Z_]\\w*",F="\\b\\d+(\\.\\d+)?",B="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",V="\\b(0b[01]+)",z="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",H=(oe={})=>{const Ce=/^#![ ]*\//;return oe.binary&&(oe.begin=v(Ce,/.*\b/,oe.binary,/\b.*/)),r({scope:"meta",begin:Ce,end:/$/,relevance:0,"on:begin":(Je,_t)=>{Je.index!==0&&_t.ignoreMatch()}},oe)},j={begin:"\\\\[\\s\\S]",relevance:0},q={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[j]},U={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[j]},Y={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},X=function(oe,Ce,Je={}){const _t=r({scope:"comment",begin:oe,end:Ce,contains:[]},Je);_t.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const On=S("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return _t.contains.push({begin:v(/[ ]+/,"(",On,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),_t},ee=X("//","$"),$=X("/\\*","\\*/"),G=X("#","$"),re={scope:"number",begin:F,relevance:0},K={scope:"number",begin:B,relevance:0},ve={scope:"number",begin:V,relevance:0},xe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[j,{begin:/\[/,end:/\]/,relevance:0,contains:[j]}]},Oe={scope:"title",begin:M,relevance:0},Ne={scope:"title",begin:D,relevance:0},Fe={begin:"\\.\\s*"+D,relevance:0};var Qe=Object.freeze({__proto__:null,APOS_STRING_MODE:q,BACKSLASH_ESCAPE:j,BINARY_NUMBER_MODE:ve,BINARY_NUMBER_RE:V,COMMENT:X,C_BLOCK_COMMENT_MODE:$,C_LINE_COMMENT_MODE:ee,C_NUMBER_MODE:K,C_NUMBER_RE:B,END_SAME_AS_BEGIN:function(oe){return Object.assign(oe,{"on:begin":(Ce,Je)=>{Je.data._beginMatch=Ce[1]},"on:end":(Ce,Je)=>{Je.data._beginMatch!==Ce[1]&&Je.ignoreMatch()}})},HASH_COMMENT_MODE:G,IDENT_RE:M,MATCH_NOTHING_RE:P,METHOD_GUARD:Fe,NUMBER_MODE:re,NUMBER_RE:F,PHRASAL_WORDS_MODE:Y,QUOTE_STRING_MODE:U,REGEXP_MODE:xe,RE_STARTERS_RE:z,SHEBANG:H,TITLE_MODE:Oe,UNDERSCORE_IDENT_RE:D,UNDERSCORE_TITLE_MODE:Ne});function Wt(oe,Ce){oe.input[oe.index-1]==="."&&Ce.ignoreMatch()}function hn(oe,Ce){oe.className!==void 0&&(oe.scope=oe.className,delete oe.className)}function Yt(oe,Ce){Ce&&oe.beginKeywords&&(oe.begin="\\b("+oe.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",oe.__beforeBegin=Wt,oe.keywords=oe.keywords||oe.beginKeywords,delete oe.beginKeywords,oe.relevance===void 0&&(oe.relevance=0))}function Ut(oe,Ce){Array.isArray(oe.illegal)&&(oe.illegal=S(...oe.illegal))}function an(oe,Ce){if(oe.match){if(oe.begin||oe.end)throw new Error("begin & end are not supported with match");oe.begin=oe.match,delete oe.match}}function wt(oe,Ce){oe.relevance===void 0&&(oe.relevance=1)}const qn=(oe,Ce)=>{if(!oe.beforeMatch)return;if(oe.starts)throw new Error("beforeMatch cannot be used with starts");const Je=Object.assign({},oe);Object.keys(oe).forEach(_t=>{delete oe[_t]}),oe.keywords=Je.keywords,oe.begin=v(Je.beforeMatch,m(Je.begin)),oe.starts={relevance:0,contains:[Object.assign(Je,{endsParent:!0})]},oe.relevance=0,delete Je.beforeMatch},Gn=["of","and","for","in","not","or","if","then","parent","list","value"],Wn="keyword";function Yr(oe,Ce,Je=Wn){const _t=Object.create(null);return typeof oe=="string"?On(Je,oe.split(" ")):Array.isArray(oe)?On(Je,oe):Object.keys(oe).forEach(function($n){Object.assign(_t,Yr(oe[$n],Ce,$n))}),_t;function On($n,ut){Ce&&(ut=ut.map(ot=>ot.toLowerCase())),ut.forEach(function(ot){const vt=ot.split("|");_t[vt[0]]=[$n,ko(vt[0],vt[1])]})}}function ko(oe,Ce){return Ce?Number(Ce):hi(oe)?0:1}function hi(oe){return Gn.includes(oe.toLowerCase())}const gi={},Kn=oe=>{console.error(oe)},Io=(oe,...Ce)=>{console.log(`WARN: ${oe}`,...Ce)},Te=(oe,Ce)=>{gi[`${oe}/${Ce}`]||(console.log(`Deprecated as of ${oe}. ${Ce}`),gi[`${oe}/${Ce}`]=!0)},Ve=new Error;function yt(oe,Ce,{key:Je}){let _t=0;const On=oe[Je],$n={},ut={};for(let ot=1;ot<=Ce.length;ot++)ut[ot+_t]=On[ot],$n[ot+_t]=!0,_t+=T(Ce[ot-1]);oe[Je]=ut,oe[Je]._emit=$n,oe[Je]._multi=!0}function jt(oe){if(Array.isArray(oe.begin)){if(oe.skip||oe.excludeBegin||oe.returnBegin)throw Kn("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ve;if(typeof oe.beginScope!="object"||oe.beginScope===null)throw Kn("beginScope must be object"),Ve;yt(oe,oe.begin,{key:"beginScope"}),oe.begin=I(oe.begin,{joinWith:""})}}function fe(oe){if(Array.isArray(oe.end)){if(oe.skip||oe.excludeEnd||oe.returnEnd)throw Kn("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ve;if(typeof oe.endScope!="object"||oe.endScope===null)throw Kn("endScope must be object"),Ve;yt(oe,oe.end,{key:"endScope"}),oe.end=I(oe.end,{joinWith:""})}}function He(oe){oe.scope&&typeof oe.scope=="object"&&oe.scope!==null&&(oe.beginScope=oe.scope,delete oe.scope)}function gt(oe){He(oe),typeof oe.beginScope=="string"&&(oe.beginScope={_wrap:oe.beginScope}),typeof oe.endScope=="string"&&(oe.endScope={_wrap:oe.endScope}),jt(oe),fe(oe)}function Bt(oe){function Ce(ut,ot){return new RegExp(u(ut),"m"+(oe.case_insensitive?"i":"")+(oe.unicodeRegex?"u":"")+(ot?"g":""))}class Je{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(ot,vt){vt.position=this.position++,this.matchIndexes[this.matchAt]=vt,this.regexes.push([vt,ot]),this.matchAt+=T(ot)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const ot=this.regexes.map(vt=>vt[1]);this.matcherRe=Ce(I(ot,{joinWith:"|"}),!0),this.lastIndex=0}exec(ot){this.matcherRe.lastIndex=this.lastIndex;const vt=this.matcherRe.exec(ot);if(!vt)return null;const Sr=vt.findIndex((ms,ja)=>ja>0&&ms!==void 0),Yn=this.matchIndexes[Sr];return vt.splice(0,Sr),Object.assign(vt,Yn)}}class _t{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(ot){if(this.multiRegexes[ot])return this.multiRegexes[ot];const vt=new Je;return this.rules.slice(ot).forEach(([Sr,Yn])=>vt.addRule(Sr,Yn)),vt.compile(),this.multiRegexes[ot]=vt,vt}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(ot,vt){this.rules.push([ot,vt]),vt.type==="begin"&&this.count++}exec(ot){const vt=this.getMatcher(this.regexIndex);vt.lastIndex=this.lastIndex;let Sr=vt.exec(ot);if(this.resumingScanAtSamePosition()&&!(Sr&&Sr.index===this.lastIndex)){const Yn=this.getMatcher(0);Yn.lastIndex=this.lastIndex+1,Sr=Yn.exec(ot)}return Sr&&(this.regexIndex+=Sr.position+1,this.regexIndex===this.count&&this.considerAll()),Sr}}function On(ut){const ot=new _t;return ut.contains.forEach(vt=>ot.addRule(vt.begin,{rule:vt,type:"begin"})),ut.terminatorEnd&&ot.addRule(ut.terminatorEnd,{type:"end"}),ut.illegal&&ot.addRule(ut.illegal,{type:"illegal"}),ot}function $n(ut,ot){const vt=ut;if(ut.isCompiled)return vt;[hn,an,gt,qn].forEach(Yn=>Yn(ut,ot)),oe.compilerExtensions.forEach(Yn=>Yn(ut,ot)),ut.__beforeBegin=null,[Yt,Ut,wt].forEach(Yn=>Yn(ut,ot)),ut.isCompiled=!0;let Sr=null;return typeof ut.keywords=="object"&&ut.keywords.$pattern&&(ut.keywords=Object.assign({},ut.keywords),Sr=ut.keywords.$pattern,delete ut.keywords.$pattern),Sr=Sr||/\w+/,ut.keywords&&(ut.keywords=Yr(ut.keywords,oe.case_insensitive)),vt.keywordPatternRe=Ce(Sr,!0),ot&&(ut.begin||(ut.begin=/\B|\b/),vt.beginRe=Ce(vt.begin),!ut.end&&!ut.endsWithParent&&(ut.end=/\B|\b/),ut.end&&(vt.endRe=Ce(vt.end)),vt.terminatorEnd=u(vt.end)||"",ut.endsWithParent&&ot.terminatorEnd&&(vt.terminatorEnd+=(ut.end?"|":"")+ot.terminatorEnd)),ut.illegal&&(vt.illegalRe=Ce(ut.illegal)),ut.contains||(ut.contains=[]),ut.contains=[].concat(...ut.contains.map(function(Yn){return Pn(Yn==="self"?ut:Yn)})),ut.contains.forEach(function(Yn){$n(Yn,vt)}),ut.starts&&$n(ut.starts,ot),vt.matcher=On(vt),vt}if(oe.compilerExtensions||(oe.compilerExtensions=[]),oe.contains&&oe.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return oe.classNameAliases=r(oe.classNameAliases||{}),$n(oe)}function fn(oe){return oe?oe.endsWithParent||fn(oe.starts):!1}function Pn(oe){return oe.variants&&!oe.cachedVariants&&(oe.cachedVariants=oe.variants.map(function(Ce){return r(oe,{variants:null},Ce)})),oe.cachedVariants?oe.cachedVariants:fn(oe)?r(oe,{starts:oe.starts?r(oe.starts):null}):Object.isFrozen(oe)?r(oe):oe}var ln="11.11.1";class Or extends Error{constructor(Ce,Je){super(Ce),this.name="HTMLInjectionError",this.html=Je}}const Hn=n,ma=r,Ko=Symbol("nomatch"),La=7,Bs=function(oe){const Ce=Object.create(null),Je=Object.create(null),_t=[];let On=!0;const $n="Could not find the language '{}', did you forget to load/include a language module?",ut={disableAutodetect:!0,name:"Plain text",contains:[]};let ot={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:d};function vt($e){return ot.noHighlightRe.test($e)}function Sr($e){let ct=$e.className+" ";ct+=$e.parentNode?$e.parentNode.className:"";const Xt=ot.languageDetectRe.exec(ct);if(Xt){const Mn=Tr(Xt[1]);return Mn||(Io($n.replace("{}",Xt[1])),Io("Falling back to no-highlight mode for this block.",$e)),Mn?Xt[1]:"no-highlight"}return ct.split(/\s+/).find(Mn=>vt(Mn)||Tr(Mn))}function Yn($e,ct,Xt){let Mn="",wr="";typeof ct=="object"?(Mn=$e,Xt=ct.ignoreIllegals,wr=ct.language):(Te("10.7.0","highlight(lang, code, ...args) has been deprecated."),Te("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),wr=$e,Mn=ct),Xt===void 0&&(Xt=!0);const co={code:Mn,language:wr};ga("before:highlight",co);const ba=co.result?co.result:ms(co.language,co.code,Xt);return ba.code=co.code,ga("after:highlight",ba),ba}function ms($e,ct,Xt,Mn){const wr=Object.create(null);function co(pe,Ae){return pe.keywords[Ae]}function ba(){if(!St.keywords){br.addText(Jt);return}let pe=0;St.keywordPatternRe.lastIndex=0;let Ae=St.keywordPatternRe.exec(Jt),lt="";for(;Ae;){lt+=Jt.substring(pe,Ae.index);const et=Jr.case_insensitive?Ae[0].toLowerCase():Ae[0],$t=co(St,et);if($t){const[Xn,yr]=$t;if(br.addText(lt),lt="",wr[et]=(wr[et]||0)+1,wr[et]<=La&&(il+=yr),Xn.startsWith("_"))lt+=Ae[0];else{const uo=Jr.classNameAliases[Xn]||Xn;Xr(Ae[0],uo)}}else lt+=Ae[0];pe=St.keywordPatternRe.lastIndex,Ae=St.keywordPatternRe.exec(Jt)}lt+=Jt.substring(pe),br.addText(lt)}function ea(){if(Jt==="")return;let pe=null;if(typeof St.subLanguage=="string"){if(!Ce[St.subLanguage]){br.addText(Jt);return}pe=ms(St.subLanguage,Jt,!0,su[St.subLanguage]),su[St.subLanguage]=pe._top}else pe=pc(Jt,St.subLanguage.length?St.subLanguage:null);St.relevance>0&&(il+=pe.relevance),br.__addSublanguage(pe._emitter,pe.language)}function Sn(){St.subLanguage!=null?ea():ba(),Jt=""}function Xr(pe,Ae){pe!==""&&(br.startScope(Ae),br.addText(pe),br.endScope())}function Wo(pe,Ae){let lt=1;const et=Ae.length-1;for(;lt<=et;){if(!pe._emit[lt]){lt++;continue}const $t=Jr.classNameAliases[pe[lt]]||pe[lt],Xn=Ae[lt];$t?Xr(Xn,$t):(Jt=Xn,ba(),Jt=""),lt++}}function ql(pe,Ae){return pe.scope&&typeof pe.scope=="string"&&br.openNode(Jr.classNameAliases[pe.scope]||pe.scope),pe.beginScope&&(pe.beginScope._wrap?(Xr(Jt,Jr.classNameAliases[pe.beginScope._wrap]||pe.beginScope._wrap),Jt=""):pe.beginScope._multi&&(Wo(pe.beginScope,Ae),Jt="")),St=Object.create(pe,{parent:{value:St}}),St}function fc(pe,Ae,lt){let et=C(pe.endRe,lt);if(et){if(pe["on:end"]){const $t=new e(pe);pe["on:end"](Ae,$t),$t.isMatchIgnored&&(et=!1)}if(et){for(;pe.endsParent&&pe.parent;)pe=pe.parent;return pe}}if(pe.endsWithParent)return fc(pe.parent,Ae,lt)}function mc(pe){return St.matcher.regexIndex===0?(Jt+=pe[0],1):(me=!0,0)}function Hp(pe){const Ae=pe[0],lt=pe.rule,et=new e(lt),$t=[lt.__beforeBegin,lt["on:begin"]];for(const Xn of $t)if(Xn&&(Xn(pe,et),et.isMatchIgnored))return mc(Ae);return lt.skip?Jt+=Ae:(lt.excludeBegin&&(Jt+=Ae),Sn(),!lt.returnBegin&&!lt.excludeBegin&&(Jt=Ae)),ql(lt,pe),lt.returnBegin?0:Ae.length}function Rr(pe){const Ae=pe[0],lt=ct.substring(pe.index),et=fc(St,pe,lt);if(!et)return Ko;const $t=St;St.endScope&&St.endScope._wrap?(Sn(),Xr(Ae,St.endScope._wrap)):St.endScope&&St.endScope._multi?(Sn(),Wo(St.endScope,pe)):$t.skip?Jt+=Ae:($t.returnEnd||$t.excludeEnd||(Jt+=Ae),Sn(),$t.excludeEnd&&(Jt=Ae));do St.scope&&br.closeNode(),!St.skip&&!St.subLanguage&&(il+=St.relevance),St=St.parent;while(St!==et.parent);return et.starts&&ql(et.starts,pe),$t.returnEnd?0:Ae.length}function hc(){const pe=[];for(let Ae=St;Ae!==Jr;Ae=Ae.parent)Ae.scope&&pe.unshift(Ae.scope);pe.forEach(Ae=>br.openNode(Ae))}let al={};function sl(pe,Ae){const lt=Ae&&Ae[0];if(Jt+=pe,lt==null)return Sn(),0;if(al.type==="begin"&&Ae.type==="end"&&al.index===Ae.index&&lt===""){if(Jt+=ct.slice(Ae.index,Ae.index+1),!On){const et=new Error(`0 width match regex (${$e})`);throw et.languageName=$e,et.badRule=al.rule,et}return 1}if(al=Ae,Ae.type==="begin")return Hp(Ae);if(Ae.type==="illegal"&&!Xt){const et=new Error('Illegal lexeme "'+lt+'" for mode "'+(St.scope||"<unnamed>")+'"');throw et.mode=St,et}else if(Ae.type==="end"){const et=Rr(Ae);if(et!==Ko)return et}if(Ae.type==="illegal"&&lt==="")return Jt+=`
`,1;if(te>1e5&&te>Ae.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Jt+=lt,lt.length}const Jr=Tr($e);if(!Jr)throw Kn($n.replace("{}",$e)),new Error('Unknown language: "'+$e+'"');const au=Bt(Jr);let xi="",St=Mn||au;const su={},br=new ot.__emitter(ot);hc();let Jt="",il=0,Fs=0,te=0,me=!1;try{if(Jr.__emitTokens)Jr.__emitTokens(ct,br);else{for(St.matcher.considerAll();;){te++,me?me=!1:St.matcher.considerAll(),St.matcher.lastIndex=Fs;const pe=St.matcher.exec(ct);if(!pe)break;const Ae=ct.substring(Fs,pe.index),lt=sl(Ae,pe);Fs=pe.index+lt}sl(ct.substring(Fs))}return br.finalize(),xi=br.toHTML(),{language:$e,value:xi,relevance:il,illegal:!1,_emitter:br,_top:St}}catch(pe){if(pe.message&&pe.message.includes("Illegal"))return{language:$e,value:Hn(ct),illegal:!0,relevance:0,_illegalBy:{message:pe.message,index:Fs,context:ct.slice(Fs-100,Fs+100),mode:pe.mode,resultSoFar:xi},_emitter:br};if(On)return{language:$e,value:Hn(ct),illegal:!1,relevance:0,errorRaised:pe,_emitter:br,_top:St};throw pe}}function ja($e){const ct={value:Hn($e),illegal:!1,relevance:0,_top:ut,_emitter:new ot.__emitter(ot)};return ct._emitter.addText($e),ct}function pc($e,ct){ct=ct||ot.languages||Object.keys(Ce);const Xt=ja($e),Mn=ct.filter(Tr).filter(rl).map(Sn=>ms(Sn,$e,!1));Mn.unshift(Xt);const wr=Mn.sort((Sn,Xr)=>{if(Sn.relevance!==Xr.relevance)return Xr.relevance-Sn.relevance;if(Sn.language&&Xr.language){if(Tr(Sn.language).supersetOf===Xr.language)return 1;if(Tr(Xr.language).supersetOf===Sn.language)return-1}return 0}),[co,ba]=wr,ea=co;return ea.secondBest=ba,ea}function Oo($e,ct,Xt){const Mn=ct&&Je[ct]||Xt;$e.classList.add("hljs"),$e.classList.add(`language-${Mn}`)}function Er($e){let ct=null;const Xt=Sr($e);if(vt(Xt))return;if(ga("before:highlightElement",{el:$e,language:Xt}),$e.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",$e);return}if($e.children.length>0&&(ot.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn($e)),ot.throwUnescapedHTML))throw new Or("One of your code blocks includes unescaped HTML.",$e.innerHTML);ct=$e;const Mn=ct.textContent,wr=Xt?Yn(Mn,{language:Xt,ignoreIllegals:!0}):pc(Mn);$e.innerHTML=wr.value,$e.dataset.highlighted="yes",Oo($e,Xt,wr.language),$e.result={language:wr.language,re:wr.relevance,relevance:wr.relevance},wr.secondBest&&($e.secondBest={language:wr.secondBest.language,relevance:wr.secondBest.relevance}),ga("after:highlightElement",{el:$e,result:wr,text:Mn})}function Mo($e){ot=ma(ot,$e)}const nl=()=>{bi(),Te("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function ha(){bi(),Te("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let ad=!1;function bi(){function $e(){bi()}if(document.readyState==="loading"){ad||window.addEventListener("DOMContentLoaded",$e,!1),ad=!0;return}document.querySelectorAll(ot.cssSelector).forEach(Er)}function sd($e,ct){let Xt=null;try{Xt=ct(oe)}catch(Mn){if(Kn("Language definition for '{}' could not be registered.".replace("{}",$e)),On)Kn(Mn);else throw Mn;Xt=ut}Xt.name||(Xt.name=$e),Ce[$e]=Xt,Xt.rawDefinition=ct.bind(null,oe),Xt.aliases&&yi(Xt.aliases,{languageName:$e})}function Ul($e){delete Ce[$e];for(const ct of Object.keys(Je))Je[ct]===$e&&delete Je[ct]}function Ba(){return Object.keys(Ce)}function Tr($e){return $e=($e||"").toLowerCase(),Ce[$e]||Ce[Je[$e]]}function yi($e,{languageName:ct}){typeof $e=="string"&&($e=[$e]),$e.forEach(Xt=>{Je[Xt.toLowerCase()]=ct})}function rl($e){const ct=Tr($e);return ct&&!ct.disableAutodetect}function ol($e){$e["before:highlightBlock"]&&!$e["before:highlightElement"]&&($e["before:highlightElement"]=ct=>{$e["before:highlightBlock"](Object.assign({block:ct.el},ct))}),$e["after:highlightBlock"]&&!$e["after:highlightElement"]&&($e["after:highlightElement"]=ct=>{$e["after:highlightBlock"](Object.assign({block:ct.el},ct))})}function Mr($e){ol($e),_t.push($e)}function id($e){const ct=_t.indexOf($e);ct!==-1&&_t.splice(ct,1)}function ga($e,ct){const Xt=$e;_t.forEach(function(Mn){Mn[Xt]&&Mn[Xt](ct)})}function vi($e){return Te("10.7.0","highlightBlock will be removed entirely in v12.0"),Te("10.7.0","Please use highlightElement now."),Er($e)}Object.assign(oe,{highlight:Yn,highlightAuto:pc,highlightAll:bi,highlightElement:Er,highlightBlock:vi,configure:Mo,initHighlighting:nl,initHighlightingOnLoad:ha,registerLanguage:sd,unregisterLanguage:Ul,listLanguages:Ba,getLanguage:Tr,registerAliases:yi,autoDetection:rl,inherit:ma,addPlugin:Mr,removePlugin:id}),oe.debugMode=function(){On=!1},oe.safeMode=function(){On=!0},oe.versionString=ln,oe.regex={concat:v,lookahead:m,either:S,optional:y,anyNumberOfTimes:h};for(const $e in Qe)typeof Qe[$e]=="object"&&t(Qe[$e]);return Object.assign(oe,Qe),oe},Po=Bs({});return Po.newInstance=()=>Bs({}),D2=Po,Po.HighlightJS=Po,Po.default=Po,D2}var $Te=HTe();const VTe=Wi($Te),WF={},GTe="hljs-";function KTe(t){const e=VTe.newInstance();return t&&a(t),{highlight:n,highlightAuto:r,listLanguages:o,register:a,registerAlias:s,registered:i};function n(l,c,d){const u=d||WF,m=typeof u.prefix=="string"?u.prefix:GTe;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:WTe,classPrefix:m});const h=e.highlight(c,{ignoreIllegals:!0,language:l});if(h.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:h.errorRaised});const y=h._emitter.root,v=y.data;return v.language=h.language,v.relevance=h.relevance,y}function r(l,c){const u=(c||WF).subset||o();let m=-1,h=0,y;for(;++m<u.length;){const v=u[m];if(!e.getLanguage(v))continue;const x=n(v,l,c);x.data&&x.data.relevance!==void 0&&x.data.relevance>h&&(h=x.data.relevance,y=x)}return y||{type:"root",children:[],data:{language:void 0,relevance:h}}}function o(){return e.listLanguages()}function a(l,c){if(typeof l=="string")e.registerLanguage(l,c);else{let d;for(d in l)Object.hasOwn(l,d)&&e.registerLanguage(d,l[d])}}function s(l,c){if(typeof l=="string")e.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let d;for(d in l)if(Object.hasOwn(l,d)){const u=l[d];e.registerAliases(typeof u=="string"?u:[...u],{languageName:d})}}}function i(l){return!!e.getLanguage(l)}}class WTe{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],o=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:o}):r.children.push(...o)}openNode(e){const n=this,r=e.split(".").map(function(s,i){return i?s+"_".repeat(i):n.options.classPrefix+s}),o=this.stack[this.stack.length-1],a={type:"element",tagName:"span",properties:{className:r},children:[]};o.children.push(a),this.stack.push(a)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const YTe={};function XTe(t){const e=t||YTe,n=e.aliases,r=e.detect||!1,o=e.languages||qTe,a=e.plainText,s=e.prefix,i=e.subset;let l="hljs";const c=KTe(o);if(n&&c.registerAlias(n),s){const d=s.indexOf("-");l=d===-1?s:s.slice(0,d)}return function(d,u){X0(d,"element",function(m,h,y){if(m.tagName!=="code"||!y||y.type!=="element"||y.tagName!=="pre")return;const v=JTe(m);if(v===!1||!v&&!r||v&&a&&a.includes(v))return;Array.isArray(m.properties.className)||(m.properties.className=[]),m.properties.className.includes(l)||m.properties.className.unshift(l);const x=hEe(m,{whitespace:"pre"});let S;try{S=v?c.highlight(v,x,{prefix:s}):c.highlightAuto(x,{prefix:s,subset:i})}catch(T){const C=T;if(v&&/Unknown language/.test(C.message)){u.message("Cannot highlight as `"+v+"`, its not registered",{ancestors:[y,m],cause:C,place:m.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw C}!v&&S.data&&S.data.language&&m.properties.className.push("language-"+S.data.language),S.children.length>0&&(m.children=S.children)})}}function JTe(t){const e=t.properties.className;let n=-1;if(!Array.isArray(e))return;let r;for(;++n<e.length;){const o=String(e[n]);if(o==="no-highlight"||o==="nohighlight")return!1;!r&&o.slice(0,5)==="lang-"&&(r=o.slice(5)),!r&&o.slice(0,9)==="language-"&&(r=o.slice(9))}return r}const QTe=({content:t})=>g.jsx("div",{className:"markdown-content",children:g.jsx(_ye,{rehypePlugins:[Zxe,XTe],remarkPlugins:[lEe],children:t})}),lS=({to:t,text:e,type:n,onClick:r})=>{const o=l=>{window.scrollTo({top:0,behavior:"smooth"}),r&&r(l)},a=n==="go",s="flex items-center gap-3 px-6 py-3 rounded-lg font-semibold text-lg transition-all duration-300 shadow-md",i=a?"bg-sky-600 hover:bg-sky-500 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-200";return g.jsxs(ri,{to:t,onClick:o,className:`${s} ${i}`,children:[!a&&g.jsx(dme,{}),g.jsx("span",{children:e}),a&&g.jsx(fV,{})]})},N2="__TLDRAW_LIBRARY_VERSIONS__";function ZTe(){if(globalThis[N2])return globalThis[N2];const t={versions:[],didWarn:!1,scheduledNotice:null};return Object.defineProperty(globalThis,N2,{value:t,writable:!1,configurable:!1,enumerable:!1}),t}function Cp(t,e,n){if(!t||!e||!n)throw new Error("Missing name/version/module system in built version of tldraw library");const r=ZTe();if(r.versions.push({name:t,version:e,modules:n}),!r.scheduledNotice)try{r.scheduledNotice=setTimeout(()=>{r.scheduledNotice=null,YF(r)},100)}catch{YF(r)}}function YF(t){if(!t.versions.length||t.didWarn)return;const e=t.versions.sort((i,l)=>XF(i.version,l.version)),n=e[e.length-1].version,r=new Set,o=new Map;for(const i of e){if(o.has(i.name)){r.delete(i.name),L2(o,i.name,new Set).add(i.version);continue}i.version===n?r.add(i.name):(r.delete(i.name),L2(o,i.name,new Set).add(i.version))}if(o.size>0){const i=[`${wu("[tldraw]",["bold","bgRed","textWhite"])} ${wu("You have multiple versions of tldraw libraries installed. This can lead to bugs and unexpected behavior.",["textRed","bold"])}`,"",`The latest version you have installed is ${wu(`v${n}`,["bold","textBlue"])}. The following libraries are on the latest version:`,...Array.from(r,l=>`    ${wu(l,["bold"])}`),"","The following libraries are not on the latest version, or have multiple versions installed:",...Array.from(o,([l,c])=>{const d=Array.from(c).sort(XF).map(u=>wu(`v${u}`,u===n?["textGreen"]:["textRed"]));return`    ${wu(l,["bold"])} (${d.join(", ")})`})];console.log(i.join(`
`)),t.didWarn=!0;return}const a=new Map;for(const i of e)L2(a,i.name,{version:i.version,modules:[]}).modules.push(i.modules);const s=new Map;for(const[i,l]of a)l.modules.length>1&&s.set(i,l);if(s.size>0){const i=[`${wu("[tldraw]",["bold","bgRed","textWhite"])} ${wu("You have multiple instances of some tldraw libraries active. This can lead to bugs and unexpected behavior. ",["textRed","bold"])}`,"","This usually means that your bundler is misconfigured, and is importing the same library multiple times - usually once as an ES Module, and once as a CommonJS module.","","The following libraries have been imported multiple times:",...Array.from(s,([l,c])=>{const d=c.modules.map((u,m)=>u==="esm"?`      ${m+1}. ES Modules`:`      ${m+1}. CommonJS`).join(`
`);return`    ${wu(l,["bold"])} v${c.version}: 
${d}`}),"","You should configure your bundler to only import one version of each library."];console.log(i.join(`
`)),t.didWarn=!0;return}}function XF(t,e){const n=t.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/),r=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/);return!n||!r?t.localeCompare(e):n[1]!==r[1]?Number(n[1])-Number(r[1]):n[2]!==r[2]?Number(n[2])-Number(r[2]):n[3]!==r[3]?Number(n[3])-Number(r[3]):n[4]&&r[4]?n[4].localeCompare(r[4]):n[4]?1:r[4]?-1:0}const ewe={bold:"1",textBlue:"94",textRed:"31",textGreen:"32",bgRed:"41",textWhite:"97"};function wu(t,e=[]){return`\x1B[${e.map(n=>ewe[n]).join(";")}m${t}\x1B[m`}function L2(t,e,n){return t.has(e)?t.get(e):(t.set(e,n),n)}var ry={exports:{}};ry.exports;var JF;function twe(){return JF||(JF=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",o=1,a=2,s=9007199254740991,i="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",d="[object Boolean]",u="[object Date]",m="[object Error]",h="[object Function]",y="[object GeneratorFunction]",v="[object Map]",x="[object Number]",S="[object Null]",T="[object Object]",C="[object Promise]",_="[object Proxy]",I="[object RegExp]",P="[object Set]",M="[object String]",D="[object Symbol]",F="[object Undefined]",B="[object WeakMap]",V="[object ArrayBuffer]",z="[object DataView]",H="[object Float32Array]",j="[object Float64Array]",q="[object Int8Array]",U="[object Int16Array]",Y="[object Int32Array]",X="[object Uint8Array]",ee="[object Uint8ClampedArray]",$="[object Uint16Array]",G="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,xe={};xe[H]=xe[j]=xe[q]=xe[U]=xe[Y]=xe[X]=xe[ee]=xe[$]=xe[G]=!0,xe[i]=xe[l]=xe[V]=xe[d]=xe[z]=xe[u]=xe[m]=xe[h]=xe[v]=xe[x]=xe[T]=xe[I]=xe[P]=xe[M]=xe[B]=!1;var Oe=typeof la=="object"&&la&&la.Object===Object&&la,Ne=typeof self=="object"&&self&&self.Object===Object&&self,Fe=Oe||Ne||Function("return this")(),Ke=e&&!e.nodeType&&e,Qe=Ke&&!0&&t&&!t.nodeType&&t,Wt=Qe&&Qe.exports===Ke,hn=Wt&&Oe.process,Yt=(function(){try{return hn&&hn.binding&&hn.binding("util")}catch{}})(),Ut=Yt&&Yt.isTypedArray;function an(Q,le){for(var Re=-1,Ze=Q==null?0:Q.length,Rn=0,Ft=[];++Re<Ze;){var nr=Q[Re];le(nr,Re,Q)&&(Ft[Rn++]=nr)}return Ft}function wt(Q,le){for(var Re=-1,Ze=le.length,Rn=Q.length;++Re<Ze;)Q[Rn+Re]=le[Re];return Q}function qn(Q,le){for(var Re=-1,Ze=Q==null?0:Q.length;++Re<Ze;)if(le(Q[Re],Re,Q))return!0;return!1}function Gn(Q,le){for(var Re=-1,Ze=Array(Q);++Re<Q;)Ze[Re]=le(Re);return Ze}function Wn(Q){return function(le){return Q(le)}}function Yr(Q,le){return Q.has(le)}function ko(Q,le){return Q==null?void 0:Q[le]}function hi(Q){var le=-1,Re=Array(Q.size);return Q.forEach(function(Ze,Rn){Re[++le]=[Rn,Ze]}),Re}function gi(Q,le){return function(Re){return Q(le(Re))}}function Kn(Q){var le=-1,Re=Array(Q.size);return Q.forEach(function(Ze){Re[++le]=Ze}),Re}var Io=Array.prototype,Te=Function.prototype,Ve=Object.prototype,yt=Fe["__core-js_shared__"],jt=Te.toString,fe=Ve.hasOwnProperty,He=(function(){var Q=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return Q?"Symbol(src)_1."+Q:""})(),gt=Ve.toString,Bt=RegExp("^"+jt.call(fe).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fn=Wt?Fe.Buffer:void 0,Pn=Fe.Symbol,ln=Fe.Uint8Array,Or=Ve.propertyIsEnumerable,Hn=Io.splice,ma=Pn?Pn.toStringTag:void 0,Ko=Object.getOwnPropertySymbols,La=fn?fn.isBuffer:void 0,Bs=gi(Object.keys,Object),Po=St(Fe,"DataView"),oe=St(Fe,"Map"),Ce=St(Fe,"Promise"),Je=St(Fe,"Set"),_t=St(Fe,"WeakMap"),On=St(Object,"create"),$n=Ae(Po),ut=Ae(oe),ot=Ae(Ce),vt=Ae(Je),Sr=Ae(_t),Yn=Pn?Pn.prototype:void 0,ms=Yn?Yn.valueOf:void 0;function ja(Q){var le=-1,Re=Q==null?0:Q.length;for(this.clear();++le<Re;){var Ze=Q[le];this.set(Ze[0],Ze[1])}}function pc(){this.__data__=On?On(null):{},this.size=0}function Oo(Q){var le=this.has(Q)&&delete this.__data__[Q];return this.size-=le?1:0,le}function Er(Q){var le=this.__data__;if(On){var Re=le[Q];return Re===r?void 0:Re}return fe.call(le,Q)?le[Q]:void 0}function Mo(Q){var le=this.__data__;return On?le[Q]!==void 0:fe.call(le,Q)}function nl(Q,le){var Re=this.__data__;return this.size+=this.has(Q)?0:1,Re[Q]=On&&le===void 0?r:le,this}ja.prototype.clear=pc,ja.prototype.delete=Oo,ja.prototype.get=Er,ja.prototype.has=Mo,ja.prototype.set=nl;function ha(Q){var le=-1,Re=Q==null?0:Q.length;for(this.clear();++le<Re;){var Ze=Q[le];this.set(Ze[0],Ze[1])}}function ad(){this.__data__=[],this.size=0}function bi(Q){var le=this.__data__,Re=Sn(le,Q);if(Re<0)return!1;var Ze=le.length-1;return Re==Ze?le.pop():Hn.call(le,Re,1),--this.size,!0}function sd(Q){var le=this.__data__,Re=Sn(le,Q);return Re<0?void 0:le[Re][1]}function Ul(Q){return Sn(this.__data__,Q)>-1}function Ba(Q,le){var Re=this.__data__,Ze=Sn(Re,Q);return Ze<0?(++this.size,Re.push([Q,le])):Re[Ze][1]=le,this}ha.prototype.clear=ad,ha.prototype.delete=bi,ha.prototype.get=sd,ha.prototype.has=Ul,ha.prototype.set=Ba;function Tr(Q){var le=-1,Re=Q==null?0:Q.length;for(this.clear();++le<Re;){var Ze=Q[le];this.set(Ze[0],Ze[1])}}function yi(){this.size=0,this.__data__={hash:new ja,map:new(oe||ha),string:new ja}}function rl(Q){var le=xi(this,Q).delete(Q);return this.size-=le?1:0,le}function ol(Q){return xi(this,Q).get(Q)}function Mr(Q){return xi(this,Q).has(Q)}function id(Q,le){var Re=xi(this,Q),Ze=Re.size;return Re.set(Q,le),this.size+=Re.size==Ze?0:1,this}Tr.prototype.clear=yi,Tr.prototype.delete=rl,Tr.prototype.get=ol,Tr.prototype.has=Mr,Tr.prototype.set=id;function ga(Q){var le=-1,Re=Q==null?0:Q.length;for(this.__data__=new Tr;++le<Re;)this.add(Q[le])}function vi(Q){return this.__data__.set(Q,r),this}function $e(Q){return this.__data__.has(Q)}ga.prototype.add=ga.prototype.push=vi,ga.prototype.has=$e;function ct(Q){var le=this.__data__=new ha(Q);this.size=le.size}function Xt(){this.__data__=new ha,this.size=0}function Mn(Q){var le=this.__data__,Re=le.delete(Q);return this.size=le.size,Re}function wr(Q){return this.__data__.get(Q)}function co(Q){return this.__data__.has(Q)}function ba(Q,le){var Re=this.__data__;if(Re instanceof ha){var Ze=Re.__data__;if(!oe||Ze.length<n-1)return Ze.push([Q,le]),this.size=++Re.size,this;Re=this.__data__=new Tr(Ze)}return Re.set(Q,le),this.size=Re.size,this}ct.prototype.clear=Xt,ct.prototype.delete=Mn,ct.prototype.get=wr,ct.prototype.has=co,ct.prototype.set=ba;function ea(Q,le){var Re=$t(Q),Ze=!Re&&et(Q),Rn=!Re&&!Ze&&yr(Q),Ft=!Re&&!Ze&&!Rn&&Lr(Q),nr=Re||Ze||Rn||Ft,Ro=nr?Gn(Q.length,String):[],fo=Ro.length;for(var ur in Q)fe.call(Q,ur)&&!(nr&&(ur=="length"||Rn&&(ur=="offset"||ur=="parent")||Ft&&(ur=="buffer"||ur=="byteLength"||ur=="byteOffset")||il(ur,fo)))&&Ro.push(ur);return Ro}function Sn(Q,le){for(var Re=Q.length;Re--;)if(lt(Q[Re][0],le))return Re;return-1}function Xr(Q,le,Re){var Ze=le(Q);return $t(Q)?Ze:wt(Ze,Re(Q))}function Wo(Q){return Q==null?Q===void 0?F:S:ma&&ma in Object(Q)?su(Q):pe(Q)}function ql(Q){return Nr(Q)&&Wo(Q)==i}function fc(Q,le,Re,Ze,Rn){return Q===le?!0:Q==null||le==null||!Nr(Q)&&!Nr(le)?Q!==Q&&le!==le:mc(Q,le,Re,Ze,fc,Rn)}function mc(Q,le,Re,Ze,Rn,Ft){var nr=$t(Q),Ro=$t(le),fo=nr?l:Jt(Q),ur=Ro?l:Jt(le);fo=fo==i?T:fo,ur=ur==i?T:ur;var Yo=fo==T,za=ur==T,Xo=fo==ur;if(Xo&&yr(Q)){if(!yr(le))return!1;nr=!0,Yo=!1}if(Xo&&!Yo)return Ft||(Ft=new ct),nr||Lr(Q)?al(Q,le,Re,Ze,Rn,Ft):sl(Q,le,fo,Re,Ze,Rn,Ft);if(!(Re&o)){var Us=Yo&&fe.call(Q,"__wrapped__"),qs=za&&fe.call(le,"__wrapped__");if(Us||qs){var gc=Us?Q.value():Q,Si=qs?le.value():le;return Ft||(Ft=new ct),Rn(gc,Si,Re,Ze,Ft)}}return Xo?(Ft||(Ft=new ct),Jr(Q,le,Re,Ze,Rn,Ft)):!1}function Hp(Q){if(!Qr(Q)||te(Q))return!1;var le=po(Q)?Bt:K;return le.test(Ae(Q))}function Rr(Q){return Nr(Q)&&Dr(Q.length)&&!!xe[Wo(Q)]}function hc(Q){if(!me(Q))return Bs(Q);var le=[];for(var Re in Object(Q))fe.call(Q,Re)&&Re!="constructor"&&le.push(Re);return le}function al(Q,le,Re,Ze,Rn,Ft){var nr=Re&o,Ro=Q.length,fo=le.length;if(Ro!=fo&&!(nr&&fo>Ro))return!1;var ur=Ft.get(Q);if(ur&&Ft.get(le))return ur==le;var Yo=-1,za=!0,Xo=Re&a?new ga:void 0;for(Ft.set(Q,le),Ft.set(le,Q);++Yo<Ro;){var Us=Q[Yo],qs=le[Yo];if(Ze)var gc=nr?Ze(qs,Us,Yo,le,Q,Ft):Ze(Us,qs,Yo,Q,le,Ft);if(gc!==void 0){if(gc)continue;za=!1;break}if(Xo){if(!qn(le,function(Si,iu){if(!Yr(Xo,iu)&&(Us===Si||Rn(Us,Si,Re,Ze,Ft)))return Xo.push(iu)})){za=!1;break}}else if(!(Us===qs||Rn(Us,qs,Re,Ze,Ft))){za=!1;break}}return Ft.delete(Q),Ft.delete(le),za}function sl(Q,le,Re,Ze,Rn,Ft,nr){switch(Re){case z:if(Q.byteLength!=le.byteLength||Q.byteOffset!=le.byteOffset)return!1;Q=Q.buffer,le=le.buffer;case V:return!(Q.byteLength!=le.byteLength||!Ft(new ln(Q),new ln(le)));case d:case u:case x:return lt(+Q,+le);case m:return Q.name==le.name&&Q.message==le.message;case I:case M:return Q==le+"";case v:var Ro=hi;case P:var fo=Ze&o;if(Ro||(Ro=Kn),Q.size!=le.size&&!fo)return!1;var ur=nr.get(Q);if(ur)return ur==le;Ze|=a,nr.set(Q,le);var Yo=al(Ro(Q),Ro(le),Ze,Rn,Ft,nr);return nr.delete(Q),Yo;case D:if(ms)return ms.call(Q)==ms.call(le)}return!1}function Jr(Q,le,Re,Ze,Rn,Ft){var nr=Re&o,Ro=au(Q),fo=Ro.length,ur=au(le),Yo=ur.length;if(fo!=Yo&&!nr)return!1;for(var za=fo;za--;){var Xo=Ro[za];if(!(nr?Xo in le:fe.call(le,Xo)))return!1}var Us=Ft.get(Q);if(Us&&Ft.get(le))return Us==le;var qs=!0;Ft.set(Q,le),Ft.set(le,Q);for(var gc=nr;++za<fo;){Xo=Ro[za];var Si=Q[Xo],iu=le[Xo];if(Ze)var Gv=nr?Ze(iu,Si,Xo,le,Q,Ft):Ze(Si,iu,Xo,Q,le,Ft);if(!(Gv===void 0?Si===iu||Rn(Si,iu,Re,Ze,Ft):Gv)){qs=!1;break}gc||(gc=Xo=="constructor")}if(qs&&!gc){var fm=Q.constructor,mm=le.constructor;fm!=mm&&"constructor"in Q&&"constructor"in le&&!(typeof fm=="function"&&fm instanceof fm&&typeof mm=="function"&&mm instanceof mm)&&(qs=!1)}return Ft.delete(Q),Ft.delete(le),qs}function au(Q){return Xr(Q,zs,br)}function xi(Q,le){var Re=Q.__data__;return Fs(le)?Re[typeof le=="string"?"string":"hash"]:Re.map}function St(Q,le){var Re=ko(Q,le);return Hp(Re)?Re:void 0}function su(Q){var le=fe.call(Q,ma),Re=Q[ma];try{Q[ma]=void 0;var Ze=!0}catch{}var Rn=gt.call(Q);return Ze&&(le?Q[ma]=Re:delete Q[ma]),Rn}var br=Ko?function(Q){return Q==null?[]:(Q=Object(Q),an(Ko(Q),function(le){return Or.call(Q,le)}))}:Fa,Jt=Wo;(Po&&Jt(new Po(new ArrayBuffer(1)))!=z||oe&&Jt(new oe)!=v||Ce&&Jt(Ce.resolve())!=C||Je&&Jt(new Je)!=P||_t&&Jt(new _t)!=B)&&(Jt=function(Q){var le=Wo(Q),Re=le==T?Q.constructor:void 0,Ze=Re?Ae(Re):"";if(Ze)switch(Ze){case $n:return z;case ut:return v;case ot:return C;case vt:return P;case Sr:return B}return le});function il(Q,le){return le=le??s,!!le&&(typeof Q=="number"||ve.test(Q))&&Q>-1&&Q%1==0&&Q<le}function Fs(Q){var le=typeof Q;return le=="string"||le=="number"||le=="symbol"||le=="boolean"?Q!=="__proto__":Q===null}function te(Q){return!!He&&He in Q}function me(Q){var le=Q&&Q.constructor,Re=typeof le=="function"&&le.prototype||Ve;return Q===Re}function pe(Q){return gt.call(Q)}function Ae(Q){if(Q!=null){try{return jt.call(Q)}catch{}try{return Q+""}catch{}}return""}function lt(Q,le){return Q===le||Q!==Q&&le!==le}var et=ql((function(){return arguments})())?ql:function(Q){return Nr(Q)&&fe.call(Q,"callee")&&!Or.call(Q,"callee")},$t=Array.isArray;function Xn(Q){return Q!=null&&Dr(Q.length)&&!po(Q)}var yr=La||ll;function uo(Q,le){return fc(Q,le)}function po(Q){if(!Qr(Q))return!1;var le=Wo(Q);return le==h||le==y||le==c||le==_}function Dr(Q){return typeof Q=="number"&&Q>-1&&Q%1==0&&Q<=s}function Qr(Q){var le=typeof Q;return Q!=null&&(le=="object"||le=="function")}function Nr(Q){return Q!=null&&typeof Q=="object"}var Lr=Ut?Wn(Ut):Rr;function zs(Q){return Xn(Q)?ea(Q):hc(Q)}function Fa(){return[]}function ll(){return!1}t.exports=uo})(ry,ry.exports)),ry.exports}var nwe=twe();const Ap=Wi(nwe);var oy={exports:{}};oy.exports;var QF;function rwe(){return QF||(QF=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",o=1,a=2,s=9007199254740991,i="[object Arguments]",l="[object Array]",c="[object Boolean]",d="[object Date]",u="[object Error]",m="[object Function]",h="[object GeneratorFunction]",y="[object Map]",v="[object Number]",x="[object Object]",S="[object Promise]",T="[object RegExp]",C="[object Set]",_="[object String]",I="[object Symbol]",P="[object WeakMap]",M="[object ArrayBuffer]",D="[object DataView]",F="[object Float32Array]",B="[object Float64Array]",V="[object Int8Array]",z="[object Int16Array]",H="[object Int32Array]",j="[object Uint8Array]",q="[object Uint8ClampedArray]",U="[object Uint16Array]",Y="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,ee=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,G={};G[F]=G[B]=G[V]=G[z]=G[H]=G[j]=G[q]=G[U]=G[Y]=!0,G[i]=G[l]=G[M]=G[c]=G[D]=G[d]=G[u]=G[m]=G[y]=G[v]=G[x]=G[T]=G[C]=G[_]=G[P]=!1;var re=typeof la=="object"&&la&&la.Object===Object&&la,K=typeof self=="object"&&self&&self.Object===Object&&self,ve=re||K||Function("return this")(),xe=e&&!e.nodeType&&e,Oe=xe&&!0&&t&&!t.nodeType&&t,Ne=Oe&&Oe.exports===xe,Fe=Ne&&re.process,Ke=(function(){try{return Fe&&Fe.binding("util")}catch{}})(),Qe=Ke&&Ke.isTypedArray;function Wt(te,me){for(var pe=-1,Ae=te?te.length:0;++pe<Ae;)if(me(te[pe],pe,te))return!0;return!1}function hn(te,me){for(var pe=-1,Ae=Array(te);++pe<te;)Ae[pe]=me(pe);return Ae}function Yt(te){return function(me){return te(me)}}function Ut(te,me){return te==null?void 0:te[me]}function an(te){var me=!1;if(te!=null&&typeof te.toString!="function")try{me=!!(te+"")}catch{}return me}function wt(te){var me=-1,pe=Array(te.size);return te.forEach(function(Ae,lt){pe[++me]=[lt,Ae]}),pe}function qn(te,me){return function(pe){return te(me(pe))}}function Gn(te){var me=-1,pe=Array(te.size);return te.forEach(function(Ae){pe[++me]=Ae}),pe}var Wn=Array.prototype,Yr=Function.prototype,ko=Object.prototype,hi=ve["__core-js_shared__"],gi=(function(){var te=/[^.]+$/.exec(hi&&hi.keys&&hi.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""})(),Kn=Yr.toString,Io=ko.hasOwnProperty,Te=ko.toString,Ve=RegExp("^"+Kn.call(Io).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=ve.Symbol,jt=ve.Uint8Array,fe=ko.propertyIsEnumerable,He=Wn.splice,gt=qn(Object.keys,Object),Bt=Xr(ve,"DataView"),fn=Xr(ve,"Map"),Pn=Xr(ve,"Promise"),ln=Xr(ve,"Set"),Or=Xr(ve,"WeakMap"),Hn=Xr(Object,"create"),ma=Rr(Bt),Ko=Rr(fn),La=Rr(Pn),Bs=Rr(ln),Po=Rr(Or),oe=yt?yt.prototype:void 0,Ce=oe?oe.valueOf:void 0;function Je(te){var me=-1,pe=te?te.length:0;for(this.clear();++me<pe;){var Ae=te[me];this.set(Ae[0],Ae[1])}}function _t(){this.__data__=Hn?Hn(null):{}}function On(te){return this.has(te)&&delete this.__data__[te]}function $n(te){var me=this.__data__;if(Hn){var pe=me[te];return pe===r?void 0:pe}return Io.call(me,te)?me[te]:void 0}function ut(te){var me=this.__data__;return Hn?me[te]!==void 0:Io.call(me,te)}function ot(te,me){var pe=this.__data__;return pe[te]=Hn&&me===void 0?r:me,this}Je.prototype.clear=_t,Je.prototype.delete=On,Je.prototype.get=$n,Je.prototype.has=ut,Je.prototype.set=ot;function vt(te){var me=-1,pe=te?te.length:0;for(this.clear();++me<pe;){var Ae=te[me];this.set(Ae[0],Ae[1])}}function Sr(){this.__data__=[]}function Yn(te){var me=this.__data__,pe=ga(me,te);if(pe<0)return!1;var Ae=me.length-1;return pe==Ae?me.pop():He.call(me,pe,1),!0}function ms(te){var me=this.__data__,pe=ga(me,te);return pe<0?void 0:me[pe][1]}function ja(te){return ga(this.__data__,te)>-1}function pc(te,me){var pe=this.__data__,Ae=ga(pe,te);return Ae<0?pe.push([te,me]):pe[Ae][1]=me,this}vt.prototype.clear=Sr,vt.prototype.delete=Yn,vt.prototype.get=ms,vt.prototype.has=ja,vt.prototype.set=pc;function Oo(te){var me=-1,pe=te?te.length:0;for(this.clear();++me<pe;){var Ae=te[me];this.set(Ae[0],Ae[1])}}function Er(){this.__data__={hash:new Je,map:new(fn||vt),string:new Je}}function Mo(te){return Sn(this,te).delete(te)}function nl(te){return Sn(this,te).get(te)}function ha(te){return Sn(this,te).has(te)}function ad(te,me){return Sn(this,te).set(te,me),this}Oo.prototype.clear=Er,Oo.prototype.delete=Mo,Oo.prototype.get=nl,Oo.prototype.has=ha,Oo.prototype.set=ad;function bi(te){var me=-1,pe=te?te.length:0;for(this.__data__=new Oo;++me<pe;)this.add(te[me])}function sd(te){return this.__data__.set(te,r),this}function Ul(te){return this.__data__.has(te)}bi.prototype.add=bi.prototype.push=sd,bi.prototype.has=Ul;function Ba(te){this.__data__=new vt(te)}function Tr(){this.__data__=new vt}function yi(te){return this.__data__.delete(te)}function rl(te){return this.__data__.get(te)}function ol(te){return this.__data__.has(te)}function Mr(te,me){var pe=this.__data__;if(pe instanceof vt){var Ae=pe.__data__;if(!fn||Ae.length<n-1)return Ae.push([te,me]),this;pe=this.__data__=new Oo(Ae)}return pe.set(te,me),this}Ba.prototype.clear=Tr,Ba.prototype.delete=yi,Ba.prototype.get=rl,Ba.prototype.has=ol,Ba.prototype.set=Mr;function id(te,me){var pe=sl(te)||al(te)?hn(te.length,String):[],Ae=pe.length,lt=!!Ae;for(var et in te)Io.call(te,et)&&!(lt&&(et=="length"||ql(et,Ae)))&&pe.push(et);return pe}function ga(te,me){for(var pe=te.length;pe--;)if(hc(te[pe][0],me))return pe;return-1}function vi(te){return Te.call(te)}function $e(te,me,pe,Ae,lt){return te===me?!0:te==null||me==null||!br(te)&&!Jt(me)?te!==te&&me!==me:ct(te,me,$e,pe,Ae,lt)}function ct(te,me,pe,Ae,lt,et){var $t=sl(te),Xn=sl(me),yr=l,uo=l;$t||(yr=Wo(te),yr=yr==i?x:yr),Xn||(uo=Wo(me),uo=uo==i?x:uo);var po=yr==x&&!an(te),Dr=uo==x&&!an(me),Qr=yr==uo;if(Qr&&!po)return et||(et=new Ba),$t||il(te)?co(te,me,pe,Ae,lt,et):ba(te,me,yr,pe,Ae,lt,et);if(!(lt&a)){var Nr=po&&Io.call(te,"__wrapped__"),Lr=Dr&&Io.call(me,"__wrapped__");if(Nr||Lr){var zs=Nr?te.value():te,Fa=Lr?me.value():me;return et||(et=new Ba),pe(zs,Fa,Ae,lt,et)}}return Qr?(et||(et=new Ba),ea(te,me,pe,Ae,lt,et)):!1}function Xt(te){if(!br(te)||mc(te))return!1;var me=St(te)||an(te)?Ve:ee;return me.test(Rr(te))}function Mn(te){return Jt(te)&&su(te.length)&&!!G[Te.call(te)]}function wr(te){if(!Hp(te))return gt(te);var me=[];for(var pe in Object(te))Io.call(te,pe)&&pe!="constructor"&&me.push(pe);return me}function co(te,me,pe,Ae,lt,et){var $t=lt&a,Xn=te.length,yr=me.length;if(Xn!=yr&&!($t&&yr>Xn))return!1;var uo=et.get(te);if(uo&&et.get(me))return uo==me;var po=-1,Dr=!0,Qr=lt&o?new bi:void 0;for(et.set(te,me),et.set(me,te);++po<Xn;){var Nr=te[po],Lr=me[po];if(Ae)var zs=$t?Ae(Lr,Nr,po,me,te,et):Ae(Nr,Lr,po,te,me,et);if(zs!==void 0){if(zs)continue;Dr=!1;break}if(Qr){if(!Wt(me,function(Fa,ll){if(!Qr.has(ll)&&(Nr===Fa||pe(Nr,Fa,Ae,lt,et)))return Qr.add(ll)})){Dr=!1;break}}else if(!(Nr===Lr||pe(Nr,Lr,Ae,lt,et))){Dr=!1;break}}return et.delete(te),et.delete(me),Dr}function ba(te,me,pe,Ae,lt,et,$t){switch(pe){case D:if(te.byteLength!=me.byteLength||te.byteOffset!=me.byteOffset)return!1;te=te.buffer,me=me.buffer;case M:return!(te.byteLength!=me.byteLength||!Ae(new jt(te),new jt(me)));case c:case d:case v:return hc(+te,+me);case u:return te.name==me.name&&te.message==me.message;case T:case _:return te==me+"";case y:var Xn=wt;case C:var yr=et&a;if(Xn||(Xn=Gn),te.size!=me.size&&!yr)return!1;var uo=$t.get(te);if(uo)return uo==me;et|=o,$t.set(te,me);var po=co(Xn(te),Xn(me),Ae,lt,et,$t);return $t.delete(te),po;case I:if(Ce)return Ce.call(te)==Ce.call(me)}return!1}function ea(te,me,pe,Ae,lt,et){var $t=lt&a,Xn=Fs(te),yr=Xn.length,uo=Fs(me),po=uo.length;if(yr!=po&&!$t)return!1;for(var Dr=yr;Dr--;){var Qr=Xn[Dr];if(!($t?Qr in me:Io.call(me,Qr)))return!1}var Nr=et.get(te);if(Nr&&et.get(me))return Nr==me;var Lr=!0;et.set(te,me),et.set(me,te);for(var zs=$t;++Dr<yr;){Qr=Xn[Dr];var Fa=te[Qr],ll=me[Qr];if(Ae)var Q=$t?Ae(ll,Fa,Qr,me,te,et):Ae(Fa,ll,Qr,te,me,et);if(!(Q===void 0?Fa===ll||pe(Fa,ll,Ae,lt,et):Q)){Lr=!1;break}zs||(zs=Qr=="constructor")}if(Lr&&!zs){var le=te.constructor,Re=me.constructor;le!=Re&&"constructor"in te&&"constructor"in me&&!(typeof le=="function"&&le instanceof le&&typeof Re=="function"&&Re instanceof Re)&&(Lr=!1)}return et.delete(te),et.delete(me),Lr}function Sn(te,me){var pe=te.__data__;return fc(me)?pe[typeof me=="string"?"string":"hash"]:pe.map}function Xr(te,me){var pe=Ut(te,me);return Xt(pe)?pe:void 0}var Wo=vi;(Bt&&Wo(new Bt(new ArrayBuffer(1)))!=D||fn&&Wo(new fn)!=y||Pn&&Wo(Pn.resolve())!=S||ln&&Wo(new ln)!=C||Or&&Wo(new Or)!=P)&&(Wo=function(te){var me=Te.call(te),pe=me==x?te.constructor:void 0,Ae=pe?Rr(pe):void 0;if(Ae)switch(Ae){case ma:return D;case Ko:return y;case La:return S;case Bs:return C;case Po:return P}return me});function ql(te,me){return me=me??s,!!me&&(typeof te=="number"||$.test(te))&&te>-1&&te%1==0&&te<me}function fc(te){var me=typeof te;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?te!=="__proto__":te===null}function mc(te){return!!gi&&gi in te}function Hp(te){var me=te&&te.constructor,pe=typeof me=="function"&&me.prototype||ko;return te===pe}function Rr(te){if(te!=null){try{return Kn.call(te)}catch{}try{return te+""}catch{}}return""}function hc(te,me){return te===me||te!==te&&me!==me}function al(te){return au(te)&&Io.call(te,"callee")&&(!fe.call(te,"callee")||Te.call(te)==i)}var sl=Array.isArray;function Jr(te){return te!=null&&su(te.length)&&!St(te)}function au(te){return Jt(te)&&Jr(te)}function xi(te,me,pe){pe=typeof pe=="function"?pe:void 0;var Ae=pe?pe(te,me):void 0;return Ae===void 0?$e(te,me,pe):!!Ae}function St(te){var me=br(te)?Te.call(te):"";return me==m||me==h}function su(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=s}function br(te){var me=typeof te;return!!te&&(me=="object"||me=="function")}function Jt(te){return!!te&&typeof te=="object"}var il=Qe?Yt(Qe):Mn;function Fs(te){return Jr(te)?id(te):wr(te)}t.exports=xi})(oy,oy.exports)),oy.exports}var owe=rwe();const awe=Wi(owe);var j2,ZF;function swe(){if(ZF)return j2;ZF=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,i=parseInt,l=typeof la=="object"&&la&&la.Object===Object&&la,c=typeof self=="object"&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),u=Object.prototype,m=u.toString,h=Math.max,y=Math.min,v=function(){return d.Date.now()};function x(P,M,D){var F,B,V,z,H,j,q=0,U=!1,Y=!1,X=!0;if(typeof P!="function")throw new TypeError(t);M=I(M)||0,T(D)&&(U=!!D.leading,Y="maxWait"in D,V=Y?h(I(D.maxWait)||0,M):V,X="trailing"in D?!!D.trailing:X);function ee(Fe){var Ke=F,Qe=B;return F=B=void 0,q=Fe,z=P.apply(Qe,Ke),z}function $(Fe){return q=Fe,H=setTimeout(K,M),U?ee(Fe):z}function G(Fe){var Ke=Fe-j,Qe=Fe-q,Wt=M-Ke;return Y?y(Wt,V-Qe):Wt}function re(Fe){var Ke=Fe-j,Qe=Fe-q;return j===void 0||Ke>=M||Ke<0||Y&&Qe>=V}function K(){var Fe=v();if(re(Fe))return ve(Fe);H=setTimeout(K,G(Fe))}function ve(Fe){return H=void 0,X&&F?ee(Fe):(F=B=void 0,z)}function xe(){H!==void 0&&clearTimeout(H),q=0,F=j=B=H=void 0}function Oe(){return H===void 0?z:ve(v())}function Ne(){var Fe=v(),Ke=re(Fe);if(F=arguments,B=this,j=Fe,Ke){if(H===void 0)return $(j);if(Y)return H=setTimeout(K,M),ee(j)}return H===void 0&&(H=setTimeout(K,M)),z}return Ne.cancel=xe,Ne.flush=Oe,Ne}function S(P,M,D){var F=!0,B=!0;if(typeof P!="function")throw new TypeError(t);return T(D)&&(F="leading"in D?!!D.leading:F,B="trailing"in D?!!D.trailing:B),x(P,M,{leading:F,maxWait:M,trailing:B})}function T(P){var M=typeof P;return!!P&&(M=="object"||M=="function")}function C(P){return!!P&&typeof P=="object"}function _(P){return typeof P=="symbol"||C(P)&&m.call(P)==n}function I(P){if(typeof P=="number")return P;if(_(P))return e;if(T(P)){var M=typeof P.valueOf=="function"?P.valueOf():P;P=T(M)?M+"":M}if(typeof P!="string")return P===0?P:+P;P=P.replace(r,"");var D=a.test(P);return D||s.test(P)?i(P.slice(2),D?2:8):o.test(P)?e:+P}return j2=S,j2}var iwe=swe();const OK=Wi(iwe);var B2,ez;function lwe(){if(ez)return B2;ez=1;var t=200,e="__lodash_hash_undefined__",n=1/0,r="[object Function]",o="[object GeneratorFunction]",a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,i=typeof la=="object"&&la&&la.Object===Object&&la,l=typeof self=="object"&&self&&self.Object===Object&&self,c=i||l||Function("return this")();function d(fe,He){var gt=fe?fe.length:0;return!!gt&&m(fe,He,0)>-1}function u(fe,He,gt,Bt){for(var fn=fe.length,Pn=gt+-1;++Pn<fn;)if(He(fe[Pn],Pn,fe))return Pn;return-1}function m(fe,He,gt){if(He!==He)return u(fe,h,gt);for(var Bt=gt-1,fn=fe.length;++Bt<fn;)if(fe[Bt]===He)return Bt;return-1}function h(fe){return fe!==fe}function y(fe,He){return fe.has(He)}function v(fe,He){return fe==null?void 0:fe[He]}function x(fe){var He=!1;if(fe!=null&&typeof fe.toString!="function")try{He=!!(fe+"")}catch{}return He}function S(fe){var He=-1,gt=Array(fe.size);return fe.forEach(function(Bt){gt[++He]=Bt}),gt}var T=Array.prototype,C=Function.prototype,_=Object.prototype,I=c["__core-js_shared__"],P=(function(){var fe=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""})(),M=C.toString,D=_.hasOwnProperty,F=_.toString,B=RegExp("^"+M.call(D).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=T.splice,z=ko(c,"Map"),H=ko(c,"Set"),j=ko(Object,"create");function q(fe){var He=-1,gt=fe?fe.length:0;for(this.clear();++He<gt;){var Bt=fe[He];this.set(Bt[0],Bt[1])}}function U(){this.__data__=j?j(null):{}}function Y(fe){return this.has(fe)&&delete this.__data__[fe]}function X(fe){var He=this.__data__;if(j){var gt=He[fe];return gt===e?void 0:gt}return D.call(He,fe)?He[fe]:void 0}function ee(fe){var He=this.__data__;return j?He[fe]!==void 0:D.call(He,fe)}function $(fe,He){var gt=this.__data__;return gt[fe]=j&&He===void 0?e:He,this}q.prototype.clear=U,q.prototype.delete=Y,q.prototype.get=X,q.prototype.has=ee,q.prototype.set=$;function G(fe){var He=-1,gt=fe?fe.length:0;for(this.clear();++He<gt;){var Bt=fe[He];this.set(Bt[0],Bt[1])}}function re(){this.__data__=[]}function K(fe){var He=this.__data__,gt=wt(He,fe);if(gt<0)return!1;var Bt=He.length-1;return gt==Bt?He.pop():V.call(He,gt,1),!0}function ve(fe){var He=this.__data__,gt=wt(He,fe);return gt<0?void 0:He[gt][1]}function xe(fe){return wt(this.__data__,fe)>-1}function Oe(fe,He){var gt=this.__data__,Bt=wt(gt,fe);return Bt<0?gt.push([fe,He]):gt[Bt][1]=He,this}G.prototype.clear=re,G.prototype.delete=K,G.prototype.get=ve,G.prototype.has=xe,G.prototype.set=Oe;function Ne(fe){var He=-1,gt=fe?fe.length:0;for(this.clear();++He<gt;){var Bt=fe[He];this.set(Bt[0],Bt[1])}}function Fe(){this.__data__={hash:new q,map:new(z||G),string:new q}}function Ke(fe){return Yr(this,fe).delete(fe)}function Qe(fe){return Yr(this,fe).get(fe)}function Wt(fe){return Yr(this,fe).has(fe)}function hn(fe,He){return Yr(this,fe).set(fe,He),this}Ne.prototype.clear=Fe,Ne.prototype.delete=Ke,Ne.prototype.get=Qe,Ne.prototype.has=Wt,Ne.prototype.set=hn;function Yt(fe){var He=-1,gt=fe?fe.length:0;for(this.__data__=new Ne;++He<gt;)this.add(fe[He])}function Ut(fe){return this.__data__.set(fe,e),this}function an(fe){return this.__data__.has(fe)}Yt.prototype.add=Yt.prototype.push=Ut,Yt.prototype.has=an;function wt(fe,He){for(var gt=fe.length;gt--;)if(Te(fe[gt][0],He))return gt;return-1}function qn(fe){if(!yt(fe)||gi(fe))return!1;var He=Ve(fe)||x(fe)?B:s;return He.test(Kn(fe))}function Gn(fe,He,gt){var Bt=-1,fn=d,Pn=fe.length,ln=!0,Or=[],Hn=Or;if(Pn>=t){var ma=Wn(fe);if(ma)return S(ma);ln=!1,fn=y,Hn=new Yt}else Hn=Or;e:for(;++Bt<Pn;){var Ko=fe[Bt],La=Ko;if(Ko=Ko!==0?Ko:0,ln&&La===La){for(var Bs=Hn.length;Bs--;)if(Hn[Bs]===La)continue e;Or.push(Ko)}else fn(Hn,La,gt)||(Hn!==Or&&Hn.push(La),Or.push(Ko))}return Or}var Wn=H&&1/S(new H([,-0]))[1]==n?function(fe){return new H(fe)}:jt;function Yr(fe,He){var gt=fe.__data__;return hi(He)?gt[typeof He=="string"?"string":"hash"]:gt.map}function ko(fe,He){var gt=v(fe,He);return qn(gt)?gt:void 0}function hi(fe){var He=typeof fe;return He=="string"||He=="number"||He=="symbol"||He=="boolean"?fe!=="__proto__":fe===null}function gi(fe){return!!P&&P in fe}function Kn(fe){if(fe!=null){try{return M.call(fe)}catch{}try{return fe+""}catch{}}return""}function Io(fe){return fe&&fe.length?Gn(fe):[]}function Te(fe,He){return fe===He||fe!==fe&&He!==He}function Ve(fe){var He=yt(fe)?F.call(fe):"";return He==r||He==o}function yt(fe){var He=typeof fe;return!!fe&&(He=="object"||He=="function")}function jt(){}return B2=Io,B2}var cwe=lwe();const uwe=Wi(cwe);function jD(t,e){const n=[];e:for(const r of t){for(const o of n)if(e?e(r,o):r===o)continue e;n.push(r)}return n}function Dt(t){return t.filter(e=>e!=null)}function Ca(t){return t[t.length-1]}function MK(t,e){let n,r=1/0;for(const o of t){const a=e(o);a<r&&(n=o,r=a)}return n}function dwe(t,e){let n,r=-1/0;for(const o of t){const a=e(o);a>r&&(n=o,r=a)}return n}function gE(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0}function Ny(t,e,n){const r=new Set(e.map(a=>a[t])),o=[];for(const a of n)r.has(a[t])||o.push(a);for(const a of e)o.push(a);return o}function RK(t){const e=(...n)=>{try{return t(...n)}catch(r){throw r instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(r,e),r}};return e}const l0=()=>{},zc={ok(t){return{ok:!0,value:t}},err(t){return{ok:!1,error:t}}};function wn(t,e){const n=e&&t&&typeof t=="object"&&e in t?t[e]:t;throw new Error(`Unknown switch case ${n}`)}const dt=RK((t,e)=>{if(!t)throw new Error(e||"Assertion Error")}),ra=RK((t,e)=>{if(t==null)throw new Error(e??"value must be defined");return t});function BD(){let t,e;const n=new Promise((r,o)=>{t=r,e=o});return Object.assign(n,{resolve:t,reject:e})}function aM(t){return new Promise(e=>setTimeout(e,t))}/*!
 * MIT License: https://github.com/NoHomey/bind-decorator/blob/master/License
 * Copyright (c) 2016 Ivo Stratev
 */function oi(...t){if(t.length===2){const[e,n]=t;n.addInitializer(function(){dt(Reflect.isExtensible(this),"Cannot bind to a non-extensible class.");const o=e.bind(this),a=Reflect.defineProperty(this,n.name,{value:o,writable:!0,configurable:!0});dt(a,"Cannot bind a non-configurable class method.")})}else{const[e,n,r]=t;if(!r||typeof r.value!="function")throw new TypeError(`Only methods can be decorated with @bind. <${n}> is not a method!`);return{configurable:!0,get(){const o=r.value.bind(this);return Object.defineProperty(this,n,{value:o,configurable:!0,writable:!0}),o}}}}class as{constructor(){L(this,"items",new WeakMap)}get(e,n){return this.items.has(e)||this.items.set(e,n(e)),this.items.get(e)}}function pw(t,e){let n;const r=(...o)=>(n||(n={},n.promise=new Promise((a,s)=>{n.resolve=a,n.reject=s})),clearTimeout(n.timeout),n.latestArgs=o,n.timeout=setTimeout(()=>{const a=n;n=void 0;try{a.resolve(t(...a.latestArgs))}catch(s){a.reject(s)}},e),n.promise);return r.cancel=()=>{n&&clearTimeout(n.timeout)},r}const tz=new WeakMap;function FD(t,e){if(typeof t!="object"||t===null)return;let n=tz.get(t);n||(n={tags:{},extras:{}},tz.set(t,n)),e.tags&&(n.tags={...n.tags,...e.tags}),e.extras&&(n.extras={...n.extras,...e.extras})}async function Vu(t,e){return window.fetch(t,{referrerPolicy:"strict-origin-when-cross-origin",...e})}const c0=(t,e)=>{const n=new window.Image(t,e);return n.referrerPolicy="strict-origin-when-cross-origin",n};class Xa{static async urlToArrayBuffer(e){return await(await Vu(e)).arrayBuffer()}static async urlToBlob(e){return await(await Vu(e)).blob()}static async urlToDataUrl(e){if(e.startsWith("data:"))return e;const n=await Xa.urlToBlob(e);return await Xa.blobToDataUrl(n)}static async blobToDataUrl(e){return await new Promise((n,r)=>{if(e){const o=new FileReader;o.onload=()=>n(o.result),o.onerror=a=>r(a),o.onabort=a=>r(a),o.readAsDataURL(e)}})}static async blobToText(e){return await new Promise((n,r)=>{if(e){const o=new FileReader;o.onload=()=>n(o.result),o.onerror=a=>r(a),o.onabort=a=>r(a),o.readAsText(e)}})}static rewriteMimeType(e,n){return e.type===n?e:e instanceof File?new File([e],e.name,{type:n}):new Blob([e],{type:n})}}function DK(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e+""}function NK(t){const e=new DataView(t);let n=0;for(let r=0;r<e.byteLength;r++)n=(n<<5)-n+e.getUint8(r),n|=0;return n+""}/*!
 * MIT License: https://github.com/ai/nanoid/blob/main/LICENSE
 * Modified code originally from <https://github.com/ai/nanoid>
 * Copyright 2017 Andrey Sitnik <andrey@sitnik.ru>
 *
 * `nanoid` is currently only distributed as an ES module. Some tools (jest, playwright) don't
 * properly support ESM-only code yet, and tldraw itself is distributed as both an ES module and a
 * CommonJS module. By including nanoid here, we can make sure it works well in every environment
 * where tldraw is used. We can also remove some unused features like custom alphabets.
 */const nz=globalThis.crypto,pwe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",fwe=128;let cf,Eh;function mwe(t){!cf||cf.length<t?(cf=new Uint8Array(t*fwe),nz.getRandomValues(cf),Eh=0):Eh+t>cf.length&&(nz.getRandomValues(cf),Eh=0),Eh+=t}function hwe(t=21){mwe(t-=0);let e="";for(let n=Eh-t;n<Eh;n++)e+=pwe[cf[n]&63];return e}let gwe=hwe;function Ln(t){return gwe(t)}/*!
 * MIT License: https://github.com/vHeemstra/is-apng/blob/main/license
 * Copyright (c) Philip van Heemstra
 */function bwe(t){const e=new Uint8Array(t);if(!e||!(typeof Buffer<"u"&&Buffer.isBuffer(e)||e instanceof Uint8Array)||e.length<16||!(e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10))return!1;function r(a,s,i,l,c=1024){if(!s)return-1;s=new RegExp(s,"g");const d=s.source.length,u=new TextDecoder,m=a.length;if(typeof l>"u"&&(l=m),i>=m||l<=0||i>=l)return-1;a=a.subarray(i,l);let h=-1,y=0,v=0,x="";e:for(;y<a.length;){const S=y+c,T=a.subarray(y,S),C=u.decode(T,{stream:!0}),_=x+C;let I,P=-1;for(;(I=s.exec(_))!==null;){P=I.index-x.length,h=v+P;break e}y=S,v+=C.length;const M=P>-1?P+d:C.length-d;x=C.slice(M)}return h>=0&&(h+=i>=0?i:m+i),h}const o=r(e,"IDAT",12);return o>=12?r(e,"acTL",8,o)>=8:!1}const ywe=t=>new Uint8Array(t)[3]===44;/*!
 * MIT License
 * Modified code originally from <https://github.com/qzb/is-animated>
 * Copyright (c) 2016 Jzef Sokoowski <j.k.sokolowski@gmail.com>
 */function rz(t,e){let n=0;for(;t[e+n];)n+=t[e+n]+1;return n+1}function vwe(t){return new TextDecoder("ascii").decode(t.slice(0,3))==="GIF"}function xwe(t){const e=new Uint8Array(t);let n,r,o=0,a=0;if(!vwe(t))return!1;for(n=e[10]&128,r=e[10]&7,o+=6,o+=7,o+=n?3*Math.pow(2,r+1):0;a<2&&o<e.length;)switch(e[o]){case 44:a+=1,n=e[o+9]&128,r=e[o+9]&7,o+=10,o+=n?3*Math.pow(2,r+1):0,o+=rz(e,o+1)+1;break;case 33:o+=2,o+=rz(e,o);break;case 59:o=e.length;break;default:o=e.length;break}return a>1}/*!
 * MIT License: https://github.com/alexgorbatchev/crc/blob/master/LICENSE
 * Copyright: 2014 Alex Gorbatchev
 * Code: crc32, https://github.com/alexgorbatchev/crc/blob/master/src/calculators/crc32.ts
 */let sM=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(sM=new Int32Array(sM));const Swe=(t,e)=>{let n=-1;for(let r=0;r<t.length;r++)n=sM[(n^t[r])&255]^n>>>8;return n^-1},oz=4,az=4;class Dc{static isPng(e,n){return e.getUint8(n+0)===137&&e.getUint8(n+1)===80&&e.getUint8(n+2)===78&&e.getUint8(n+3)===71&&e.getUint8(n+4)===13&&e.getUint8(n+5)===10&&e.getUint8(n+6)===26&&e.getUint8(n+7)===10}static getChunkType(e,n){return[String.fromCharCode(e.getUint8(n)),String.fromCharCode(e.getUint8(n+1)),String.fromCharCode(e.getUint8(n+2)),String.fromCharCode(e.getUint8(n+3))].join("")}static readChunks(e,n=0){const r={};if(!Dc.isPng(e,n))throw new Error("Not a PNG");for(n+=8;n<=e.buffer.byteLength;){const o=n,a=e.getInt32(n);n+=4;const s=Dc.getChunkType(e,n);if(s==="IDAT"&&r[s]){n+=a+oz+az;continue}if(s==="IEND")break;r[s]={start:o,dataOffset:n+4,size:a},n+=a+oz+az}return r}static parsePhys(e,n){return{ppux:e.getUint32(n),ppuy:e.getUint32(n+4),unit:e.getUint8(n+8)}}static findChunk(e,n){return Dc.readChunks(e)[n]}static setPhysChunk(e,n=1,r){let o=46,a=0;const s=Dc.findChunk(e,"pHYs");s&&(o=s.start,a=s.size);const i=Dc.findChunk(e,"IDAT");i&&(o=i.start,a=0);const l=new ArrayBuffer(21),c=new DataView(l);c.setUint32(0,9),c.setUint8(4,112),c.setUint8(5,72),c.setUint8(6,89),c.setUint8(7,115);const d=2835.5;c.setInt32(8,d*n),c.setInt32(12,d*n),c.setInt8(16,1);const u=new Uint8Array(l.slice(4,17));c.setInt32(17,Swe(u));const m=e.buffer.slice(0,o),h=e.buffer.slice(o+a);return new Blob([m,l,h],r)}}/*!
 * MIT License: https://github.com/sindresorhus/is-webp/blob/main/license
 * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)
 */function Ewe(t){return!t||t.length<12?!1:t[8]===87&&t[9]===69&&t[10]===66&&t[11]===80}function Twe(t){const e=new Uint8Array(t);return!Ewe(e)||!e||e.length<21?!1:(e[20]>>1&1)===1}const LK=Object.freeze(["image/svg+xml"]),jK=Object.freeze(["image/jpeg","image/png","image/webp"]),BK=Object.freeze(["image/gif","image/apng","image/avif"]),Tg=Object.freeze([...jK,...LK,...BK]),fw=Object.freeze(["video/mp4","video/webm","video/quicktime"]),wwe=Object.freeze([...Tg,...fw]);wwe.join(",");class Li{static loadVideo(e){return new Promise((n,r)=>{const o=document.createElement("video");o.onloadeddata=()=>n(o),o.onerror=a=>{console.error(a),r(new Error("Could not load video"))},o.crossOrigin="anonymous",o.src=e})}static async getVideoFrameAsDataUrl(e,n=0){const r=BD();let o=!1;const a=()=>{if(!o)if(e.readyState>=e.HAVE_METADATA)o=!0,e.currentTime=n;else return;if(e.readyState>=e.HAVE_CURRENT_DATA){const i=document.createElement("canvas");i.width=e.videoWidth,i.height=e.videoHeight;const l=i.getContext("2d");if(!l)throw new Error("Could not get 2d context");l.drawImage(e,0,0),r.resolve(i.toDataURL())}},s=i=>{console.error(i),r.reject(new Error("Could not get video frame"))};e.addEventListener("loadedmetadata",a),e.addEventListener("loadeddata",a),e.addEventListener("canplay",a),e.addEventListener("seeked",a),e.addEventListener("error",s),e.addEventListener("stalled",s),a();try{return await r}finally{e.removeEventListener("loadedmetadata",a),e.removeEventListener("loadeddata",a),e.removeEventListener("canplay",a),e.removeEventListener("seeked",a),e.removeEventListener("error",s),e.removeEventListener("stalled",s)}}static getImageAndDimensions(e){return new Promise((n,r)=>{const o=c0();o.onload=()=>{let a;o.naturalWidth?a={w:o.naturalWidth,h:o.naturalHeight}:(document.body.appendChild(o),a={w:o.clientWidth,h:o.clientHeight},document.body.removeChild(o)),n({...a,image:o})},o.onerror=a=>{console.error(a),r(new Error("Could not load image"))},o.crossOrigin="anonymous",o.referrerPolicy="strict-origin-when-cross-origin",o.style.visibility="hidden",o.style.position="absolute",o.style.opacity="0",o.style.zIndex="-9999",o.src=e})}static async getVideoSize(e){return Li.usingObjectURL(e,async n=>{const r=await Li.loadVideo(n);return{w:r.videoWidth,h:r.videoHeight}})}static async getImageSize(e){const{w:n,h:r}=await Li.usingObjectURL(e,Li.getImageAndDimensions);try{if(e.type==="image/png"){const o=new DataView(await e.arrayBuffer());if(Dc.isPng(o,0)){const a=Dc.findChunk(o,"pHYs");if(a){const s=Dc.parsePhys(o,a.dataOffset);if(s.unit===1&&s.ppux===s.ppuy){const l=Math.max(s.ppux/2834.645669291339,1);return{w:Math.round(n/l),h:Math.round(r/l)}}}}}}catch(o){return console.error(o),{w:n,h:r}}return{w:n,h:r}}static async isAnimated(e){return e.type==="image/gif"?xwe(await e.arrayBuffer()):e.type==="image/avif"?ywe(await e.arrayBuffer()):e.type==="image/webp"?Twe(await e.arrayBuffer()):e.type==="image/apng"?bwe(await e.arrayBuffer()):!1}static isAnimatedImageType(e){return BK.includes(e||"")}static isStaticImageType(e){return jK.includes(e||"")}static isVectorImageType(e){return LK.includes(e||"")}static isImageType(e){return Tg.includes(e||"")}static async usingObjectURL(e,n){const r=URL.createObjectURL(e);try{return await n(r)}finally{URL.revokeObjectURL(r)}}}function qt(t,e,n){return t+(e-t)*n}function u0(t,e,n){return(n-t)/(e-t)}function rm(t=""){let e=0,n=0,r=0,o=0;function a(){const s=e^e<<11;return e=n,n=r,r=o,o^=(o>>>19^s^s>>>8)>>>0,o/4294967296*2}for(let s=0;s<t.length+64;s++)e^=t.charCodeAt(s)|0,a();return a}function nc(t,e,n,r=!1){const[o,a]=e,[s,i]=n,l=s+(t-o)/(a-o)*(i-s);return r?s<i?Math.max(Math.min(l,i),s):Math.max(Math.min(l,s),i):l}function ai(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vo(t,e){if(ai(t,e))return t[e]}function Ly(t){return Object.keys(t)}function oo(t){return Object.values(t)}function Ts(t){return Object.entries(t)}function FK(t){return Object.fromEntries(t)}function jy(t,e){const n={};let r=!1;for(const[o,a]of Ts(t))e(o,a)?n[o]=a:r=!0;return r?n:t}function _p(t,e){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e(r,t[r]));return n}function zK(t,e){if(t===e)return!0;const n=new Set(Object.keys(t)),r=new Set(Object.keys(e));if(n.size!==r.size)return!1;for(const o of n)if(!r.has(o)||!Object.is(t[o],e[o]))return!1;return!0}function Cwe(t,e){const n=[];for(const r in t)Object.is(t[r],e[r])||n.push(r);return n}function Awe(t,e,n=1e-6){return awe(t,e,(r,o)=>{if(typeof r=="number"&&typeof o=="number")return Math.abs(r-o)<n})}const ay={Good:"#40C057",Mid:"#FFC078",Poor:"#E03131"},_we=ay.Good;class UK{constructor(){L(this,"startTime",0);L(this,"name","");L(this,"frames",0);L(this,"started",!1);L(this,"frame",null);L(this,"recordFrame",()=>{this.frames++,this.started&&(this.frame=requestAnimationFrame(this.recordFrame))})}start(e){this.name=e,this.frames=0,this.started=!0,this.frame!==null&&cancelAnimationFrame(this.frame),this.frame=requestAnimationFrame(this.recordFrame),this.startTime=performance.now()}stop(){this.started=!1,this.frame!==null&&cancelAnimationFrame(this.frame);const e=(performance.now()-this.startTime)/1e3,n=e===0?0:Math.floor(this.frames/e),r=n>55?ay.Good:n>30?ay.Mid:ay.Poor,o=r===ay.Mid?"black":"white",a=this.name[0].toUpperCase()+this.name.slice(1);console.debug(`%cPerf%c ${a} %c${n}%c fps`,`color: white; background: ${_we};padding: 2px;border-radius: 3px;`,"font-weight: normal",`font-weight: bold; padding: 2px; background: ${r};color: ${o};`,"font-weight: normal")}isStarted(){return this.started}}const qK="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Th(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let s=0;for(;(t[s]||r)===e[s];)s++;if(s>0)return e.slice(0,s)+Th(t.slice(s),e.slice(s),n)}const o=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-o>1){const s=Math.round(.5*(o+a));return n[s]}else return e&&e.length>1?e.slice(0,1):n[o]+Th(t.slice(1),null,n)}function HK(t){if(t.length!==$K(t[0]))throw new Error("invalid integer part of order key: "+t)}function $K(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function sy(t){const e=$K(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function sz(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=sy(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function iz(t,e){HK(t);const[n,...r]=t.split("");let o=!0;for(let a=r.length-1;o&&a>=0;a--){const s=e.indexOf(r[a])+1;s===e.length?r[a]=e[0]:(r[a]=e[s],o=!1)}if(o){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function kwe(t,e){HK(t);const[n,...r]=t.split("");let o=!0;for(let a=r.length-1;o&&a>=0;a--){const s=e.indexOf(r[a])-1;s===-1?r[a]=e.slice(-1):(r[a]=e[s],o=!1)}if(o){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function $d(t,e,n=qK){if(t!=null&&sz(t,n),e!=null&&sz(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const l=sy(e),c=e.slice(l.length);if(l==="A"+n[0].repeat(26))return l+Th("",c,n);if(l<e)return l;const d=kwe(l,n);if(d==null)throw new Error("cannot decrement any more");return d}if(e==null){const l=sy(t),c=t.slice(l.length),d=iz(l,n);return d??l+Th(c,null,n)}const r=sy(t),o=t.slice(r.length),a=sy(e),s=e.slice(a.length);if(r===a)return r+Th(o,s,n);const i=iz(r,n);if(i==null)throw new Error("cannot increment any more");return i<e?i:r+Th(o,null,n)}function bE(t,e,n,r=qK){if(n===0)return[];if(n===1)return[$d(t,e,r)];if(e==null){let s=$d(t,e,r);const i=[s];for(let l=0;l<n-1;l++)s=$d(s,e,r),i.push(s);return i}if(t==null){let s=$d(t,e,r);const i=[s];for(let l=0;l<n-1;l++)s=$d(t,s,r),i.push(s);return i.reverse(),i}const o=Math.floor(n/2),a=$d(t,e,r);return[...bE(t,a,o,r),a,...bE(a,e,n-o-1,r)]}const Iwe=30,Pwe=()=>Math.random()<.5;function VK(t,e){if(!Number.isInteger(e))throw new Error(`"${t}" must be an integer, got '${e}'`);if(e<0)throw new Error(`"${t}" must be greater than or equal to 0, got '${e}'`)}function GK(t,e,n){const{digits:r,jitterBits:o=Iwe,getRandomBit:a=Pwe}=n??{};VK("jitterBits",o);let s=o,i=t,l=e,c=$d(t,e,r);for(;s>0;)(a()?1:0)===1?i=c:l=c,c=$d(i,l,r),s--;return c}function Owe(t,e,n,r){const{digits:o,jitterBits:a}=r??{};if(VK("n",n),n===0)return[];if(a===0)return bE(t,e,n,o);const s=bE(t,e,n+1,o),i=[];for(let l=0;l<n;l++){const c=s[l],d=s[l+1];i.push(GK(c,d,r))}return i}const wg=Owe,zD="a0";function Mwe(t){try{GK(t,null)}catch{throw new Error("invalid index: "+t)}}function Mf(t,e,n){return wg(t??null,e??null,n)}function F2(t,e){return wg(t??null,null,e)}function Vh(t,e){return wg(t??null,e??null,1)[0]}function _l(t=null){return wg(t,null,1)[0]}function Rwe(t=null){return wg(null,t,1)[0]}function d0(t,e="a1"){return[e,...wg(e,null,t)]}function oa(t,e){return t.index<e.index?-1:t.index>e.index?1:0}function Dwe(t,e){return t.id>e.id?1:-1}function UD(t){try{return localStorage.getItem(t)}catch{return null}}function qD(t,e){try{localStorage.setItem(t,e)}catch{}}function Nwe(){try{localStorage.clear()}catch{}}function KK(t){try{return sessionStorage.getItem(t)}catch{return null}}function HD(t,e){try{sessionStorage.setItem(t,e)}catch{}}function WK(t){try{sessionStorage.removeItem(t)}catch{}}function Lwe(){try{sessionStorage.clear()}catch{}}const wh=[],jwe=60,YK=Math.floor(1e3/jwe)*.9;let z2,cS,U2=-YK;const lz=()=>{const t=wh.splice(0,wh.length);for(const e of t)e()};function XK(t=!1){if(z2)return;const e=Date.now();if(e-U2<YK){z2=requestAnimationFrame(()=>{z2=void 0,XK(!0)});return}if(t){if(cS)return;U2=e,lz()}else{if(cS)return;cS=requestAnimationFrame(()=>{cS=void 0,U2=e,lz()})}}function $D(t){return wh.includes(t)||(wh.push(t),XK()),()=>{const e=wh.indexOf(t);e>-1&&wh.splice(e,1)}}class Bwe{constructor(){L(this,"timeouts",new Map);L(this,"intervals",new Map);L(this,"rafs",new Map);this.setTimeout=this.setTimeout.bind(this),this.setInterval=this.setInterval.bind(this),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.dispose=this.dispose.bind(this)}setTimeout(e,n,r,...o){const a=window.setTimeout(n,r,o),s=this.timeouts.get(e)??[];return this.timeouts.set(e,[...s,a]),a}setInterval(e,n,r,...o){const a=window.setInterval(n,r,o),s=this.intervals.get(e)??[];return this.intervals.set(e,[...s,a]),a}requestAnimationFrame(e,n){const r=window.requestAnimationFrame(n),o=this.rafs.get(e)??[];return this.rafs.set(e,[...o,r]),r}dispose(e){var n,r,o;(n=this.timeouts.get(e))==null||n.forEach(a=>clearTimeout(a)),(r=this.intervals.get(e))==null||r.forEach(a=>clearInterval(a)),(o=this.rafs.get(e))==null||o.forEach(a=>cancelAnimationFrame(a)),this.timeouts.delete(e),this.intervals.delete(e),this.rafs.delete(e)}disposeAll(){for(const e of this.timeouts.keys())this.dispose(e)}forContext(e){return{setTimeout:(n,r,...o)=>this.setTimeout(e,n,r,o),setInterval:(n,r,...o)=>this.setInterval(e,n,r,o),requestAnimationFrame:n=>this.requestAnimationFrame(e,n),dispose:()=>this.dispose(e)}}}const zt=(t,e)=>{try{return new URL(t,e)}catch{return}};function Fwe(t){return t!==void 0}function zwe(){return typeof globalThis<"u"&&globalThis.structuredClone?[globalThis.structuredClone,!0]:typeof global<"u"&&global.structuredClone?[global.structuredClone,!0]:typeof window<"u"&&window.structuredClone?[window.structuredClone,!0]:[t=>t&&JSON.parse(JSON.stringify(t)),!1]}const JK=zwe(),bo=JK[0];JK[1];const Uwe=Object.getPrototypeOf(bo({})),cz=new Set;function qwe(t){cz.has(t)||(cz.add(t),console.warn(`[tldraw] ${t}`))}Cp("@tldraw/utils","4.2.0","esm");var uz={},Lb,dz;function ss(){if(dz)return Lb;dz=1;var t=function(e){return e&&e.Math===Math&&e};return Lb=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof la=="object"&&la)||t(typeof Lb=="object"&&Lb)||(function(){return this})()||Function("return this")(),Lb}var q2={},H2,pz;function is(){return pz||(pz=1,H2=function(t){try{return!!t()}catch{return!0}}),H2}var $2,fz;function kp(){if(fz)return $2;fz=1;var t=is();return $2=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),$2}var V2,mz;function mw(){if(mz)return V2;mz=1;var t=is();return V2=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),V2}var G2,hz;function Ju(){if(hz)return G2;hz=1;var t=mw(),e=Function.prototype.call;return G2=t?e.bind(e):function(){return e.apply(e,arguments)},G2}var K2={},gz;function Hwe(){if(gz)return K2;gz=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,n=e&&!t.call({1:2},1);return K2.f=n?function(o){var a=e(this,o);return!!a&&a.enumerable}:t,K2}var W2,bz;function QK(){return bz||(bz=1,W2=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),W2}var Y2,yz;function ua(){if(yz)return Y2;yz=1;var t=mw(),e=Function.prototype,n=e.call,r=t&&e.bind.bind(n,n);return Y2=t?r:function(o){return function(){return n.apply(o,arguments)}},Y2}var X2,vz;function Cg(){if(vz)return X2;vz=1;var t=ua(),e=t({}.toString),n=t("".slice);return X2=function(r){return n(e(r),8,-1)},X2}var J2,xz;function $we(){if(xz)return J2;xz=1;var t=ua(),e=is(),n=Cg(),r=Object,o=t("".split);return J2=e(function(){return!r("z").propertyIsEnumerable(0)})?function(a){return n(a)==="String"?o(a,""):r(a)}:r,J2}var Q2,Sz;function ZK(){return Sz||(Sz=1,Q2=function(t){return t==null}),Q2}var Z2,Ez;function Ag(){if(Ez)return Z2;Ez=1;var t=ZK(),e=TypeError;return Z2=function(n){if(t(n))throw new e("Can't call method on "+n);return n},Z2}var ek,Tz;function hw(){if(Tz)return ek;Tz=1;var t=$we(),e=Ag();return ek=function(n){return t(e(n))},ek}var tk,wz;function Ns(){if(wz)return tk;wz=1;var t=typeof document=="object"&&document.all;return tk=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},tk}var nk,Cz;function Qu(){if(Cz)return nk;Cz=1;var t=Ns();return nk=function(e){return typeof e=="object"?e!==null:t(e)},nk}var rk,Az;function gw(){if(Az)return rk;Az=1;var t=ss(),e=Ns(),n=function(r){return e(r)?r:void 0};return rk=function(r,o){return arguments.length<2?n(t[r]):t[r]&&t[r][o]},rk}var ok,_z;function eW(){if(_z)return ok;_z=1;var t=ua();return ok=t({}.isPrototypeOf),ok}var ak,kz;function Vwe(){if(kz)return ak;kz=1;var t=ss(),e=t.navigator,n=e&&e.userAgent;return ak=n?String(n):"",ak}var sk,Iz;function Gwe(){if(Iz)return sk;Iz=1;var t=ss(),e=Vwe(),n=t.process,r=t.Deno,o=n&&n.versions||r&&r.version,a=o&&o.v8,s,i;return a&&(s=a.split("."),i=s[0]>0&&s[0]<4?1:+(s[0]+s[1])),!i&&e&&(s=e.match(/Edge\/(\d+)/),(!s||s[1]>=74)&&(s=e.match(/Chrome\/(\d+)/),s&&(i=+s[1]))),sk=i,sk}var ik,Pz;function tW(){if(Pz)return ik;Pz=1;var t=Gwe(),e=is(),n=ss(),r=n.String;return ik=!!Object.getOwnPropertySymbols&&!e(function(){var o=Symbol("symbol detection");return!r(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&t&&t<41}),ik}var lk,Oz;function nW(){if(Oz)return lk;Oz=1;var t=tW();return lk=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",lk}var ck,Mz;function rW(){if(Mz)return ck;Mz=1;var t=gw(),e=Ns(),n=eW(),r=nW(),o=Object;return ck=r?function(a){return typeof a=="symbol"}:function(a){var s=t("Symbol");return e(s)&&n(s.prototype,o(a))},ck}var uk,Rz;function Kwe(){if(Rz)return uk;Rz=1;var t=String;return uk=function(e){try{return t(e)}catch{return"Object"}},uk}var dk,Dz;function VD(){if(Dz)return dk;Dz=1;var t=Ns(),e=Kwe(),n=TypeError;return dk=function(r){if(t(r))return r;throw new n(e(r)+" is not a function")},dk}var pk,Nz;function GD(){if(Nz)return pk;Nz=1;var t=VD(),e=ZK();return pk=function(n,r){var o=n[r];return e(o)?void 0:t(o)},pk}var fk,Lz;function Wwe(){if(Lz)return fk;Lz=1;var t=Ju(),e=Ns(),n=Qu(),r=TypeError;return fk=function(o,a){var s,i;if(a==="string"&&e(s=o.toString)&&!n(i=t(s,o))||e(s=o.valueOf)&&!n(i=t(s,o))||a!=="string"&&e(s=o.toString)&&!n(i=t(s,o)))return i;throw new r("Can't convert object to primitive value")},fk}var mk={exports:{}},hk,jz;function oW(){return jz||(jz=1,hk=!1),hk}var gk,Bz;function KD(){if(Bz)return gk;Bz=1;var t=ss(),e=Object.defineProperty;return gk=function(n,r){try{e(t,n,{value:r,configurable:!0,writable:!0})}catch{t[n]=r}return r},gk}var Fz;function WD(){if(Fz)return mk.exports;Fz=1;var t=oW(),e=ss(),n=KD(),r="__core-js_shared__",o=mk.exports=e[r]||n(r,{});return(o.versions||(o.versions=[])).push({version:"3.47.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"}),mk.exports}var bk,zz;function YD(){if(zz)return bk;zz=1;var t=WD();return bk=function(e,n){return t[e]||(t[e]=n||{})},bk}var yk,Uz;function tv(){if(Uz)return yk;Uz=1;var t=Ag(),e=Object;return yk=function(n){return e(t(n))},yk}var vk,qz;function Ip(){if(qz)return vk;qz=1;var t=ua(),e=tv(),n=t({}.hasOwnProperty);return vk=Object.hasOwn||function(o,a){return n(e(o),a)},vk}var xk,Hz;function aW(){if(Hz)return xk;Hz=1;var t=ua(),e=0,n=Math.random(),r=t(1.1.toString);return xk=function(o){return"Symbol("+(o===void 0?"":o)+")_"+r(++e+n,36)},xk}var Sk,$z;function Zu(){if($z)return Sk;$z=1;var t=ss(),e=YD(),n=Ip(),r=aW(),o=tW(),a=nW(),s=t.Symbol,i=e("wks"),l=a?s.for||s:s&&s.withoutSetter||r;return Sk=function(c){return n(i,c)||(i[c]=o&&n(s,c)?s[c]:l("Symbol."+c)),i[c]},Sk}var Ek,Vz;function Ywe(){if(Vz)return Ek;Vz=1;var t=Ju(),e=Qu(),n=rW(),r=GD(),o=Wwe(),a=Zu(),s=TypeError,i=a("toPrimitive");return Ek=function(l,c){if(!e(l)||n(l))return l;var d=r(l,i),u;if(d){if(c===void 0&&(c="default"),u=t(d,l,c),!e(u)||n(u))return u;throw new s("Can't convert object to primitive value")}return c===void 0&&(c="number"),o(l,c)},Ek}var Tk,Gz;function sW(){if(Gz)return Tk;Gz=1;var t=Ywe(),e=rW();return Tk=function(n){var r=t(n,"string");return e(r)?r:r+""},Tk}var wk,Kz;function iW(){if(Kz)return wk;Kz=1;var t=ss(),e=Qu(),n=t.document,r=e(n)&&e(n.createElement);return wk=function(o){return r?n.createElement(o):{}},wk}var Ck,Wz;function lW(){if(Wz)return Ck;Wz=1;var t=kp(),e=is(),n=iW();return Ck=!t&&!e(function(){return Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a!==7}),Ck}var Yz;function cW(){if(Yz)return q2;Yz=1;var t=kp(),e=Ju(),n=Hwe(),r=QK(),o=hw(),a=sW(),s=Ip(),i=lW(),l=Object.getOwnPropertyDescriptor;return q2.f=t?l:function(d,u){if(d=o(d),u=a(u),i)try{return l(d,u)}catch{}if(s(d,u))return r(!e(n.f,d,u),d[u])},q2}var Ak={},_k,Xz;function uW(){if(Xz)return _k;Xz=1;var t=kp(),e=is();return _k=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),_k}var kk,Jz;function om(){if(Jz)return kk;Jz=1;var t=Qu(),e=String,n=TypeError;return kk=function(r){if(t(r))return r;throw new n(e(r)+" is not an object")},kk}var Qz;function nv(){if(Qz)return Ak;Qz=1;var t=kp(),e=lW(),n=uW(),r=om(),o=sW(),a=TypeError,s=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",d="writable";return Ak.f=t?n?function(m,h,y){if(r(m),h=o(h),r(y),typeof m=="function"&&h==="prototype"&&"value"in y&&d in y&&!y[d]){var v=i(m,h);v&&v[d]&&(m[h]=y.value,y={configurable:c in y?y[c]:v[c],enumerable:l in y?y[l]:v[l],writable:!1})}return s(m,h,y)}:s:function(m,h,y){if(r(m),h=o(h),r(y),e)try{return s(m,h,y)}catch{}if("get"in y||"set"in y)throw new a("Accessors not supported");return"value"in y&&(m[h]=y.value),m},Ak}var Ik,Zz;function XD(){if(Zz)return Ik;Zz=1;var t=kp(),e=nv(),n=QK();return Ik=t?function(r,o,a){return e.f(r,o,n(1,a))}:function(r,o,a){return r[o]=a,r},Ik}var Pk={exports:{}},Ok,eU;function Xwe(){if(eU)return Ok;eU=1;var t=kp(),e=Ip(),n=Function.prototype,r=t&&Object.getOwnPropertyDescriptor,o=e(n,"name"),a=o&&(function(){}).name==="something",s=o&&(!t||t&&r(n,"name").configurable);return Ok={EXISTS:o,PROPER:a,CONFIGURABLE:s},Ok}var Mk,tU;function dW(){if(tU)return Mk;tU=1;var t=ua(),e=Ns(),n=WD(),r=t(Function.toString);return e(n.inspectSource)||(n.inspectSource=function(o){return r(o)}),Mk=n.inspectSource,Mk}var Rk,nU;function Jwe(){if(nU)return Rk;nU=1;var t=ss(),e=Ns(),n=t.WeakMap;return Rk=e(n)&&/native code/.test(String(n)),Rk}var Dk,rU;function pW(){if(rU)return Dk;rU=1;var t=YD(),e=aW(),n=t("keys");return Dk=function(r){return n[r]||(n[r]=e(r))},Dk}var Nk,oU;function JD(){return oU||(oU=1,Nk={}),Nk}var Lk,aU;function fW(){if(aU)return Lk;aU=1;var t=Jwe(),e=ss(),n=Qu(),r=XD(),o=Ip(),a=WD(),s=pW(),i=JD(),l="Object already initialized",c=e.TypeError,d=e.WeakMap,u,m,h,y=function(T){return h(T)?m(T):u(T,{})},v=function(T){return function(C){var _;if(!n(C)||(_=m(C)).type!==T)throw new c("Incompatible receiver, "+T+" required");return _}};if(t||a.state){var x=a.state||(a.state=new d);x.get=x.get,x.has=x.has,x.set=x.set,u=function(T,C){if(x.has(T))throw new c(l);return C.facade=T,x.set(T,C),C},m=function(T){return x.get(T)||{}},h=function(T){return x.has(T)}}else{var S=s("state");i[S]=!0,u=function(T,C){if(o(T,S))throw new c(l);return C.facade=T,r(T,S,C),C},m=function(T){return o(T,S)?T[S]:{}},h=function(T){return o(T,S)}}return Lk={set:u,get:m,has:h,enforce:y,getterFor:v},Lk}var sU;function Qwe(){if(sU)return Pk.exports;sU=1;var t=ua(),e=is(),n=Ns(),r=Ip(),o=kp(),a=Xwe().CONFIGURABLE,s=dW(),i=fW(),l=i.enforce,c=i.get,d=String,u=Object.defineProperty,m=t("".slice),h=t("".replace),y=t([].join),v=o&&!e(function(){return u(function(){},"length",{value:8}).length!==8}),x=String(String).split("String"),S=Pk.exports=function(T,C,_){m(d(C),0,7)==="Symbol("&&(C="["+h(d(C),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),_&&_.getter&&(C="get "+C),_&&_.setter&&(C="set "+C),(!r(T,"name")||a&&T.name!==C)&&(o?u(T,"name",{value:C,configurable:!0}):T.name=C),v&&_&&r(_,"arity")&&T.length!==_.arity&&u(T,"length",{value:_.arity});try{_&&r(_,"constructor")&&_.constructor?o&&u(T,"prototype",{writable:!1}):T.prototype&&(T.prototype=void 0)}catch{}var I=l(T);return r(I,"source")||(I.source=y(x,typeof C=="string"?C:"")),T};return Function.prototype.toString=S(function(){return n(this)&&c(this).source||s(this)},"toString"),Pk.exports}var jk,iU;function mW(){if(iU)return jk;iU=1;var t=Ns(),e=nv(),n=Qwe(),r=KD();return jk=function(o,a,s,i){i||(i={});var l=i.enumerable,c=i.name!==void 0?i.name:a;if(t(s)&&n(s,c,i),i.global)l?o[a]=s:r(a,s);else{try{i.unsafe?o[a]&&(l=!0):delete o[a]}catch{}l?o[a]=s:e.f(o,a,{value:s,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return o},jk}var Bk={},Fk,lU;function Zwe(){if(lU)return Fk;lU=1;var t=Math.ceil,e=Math.floor;return Fk=Math.trunc||function(r){var o=+r;return(o>0?e:t)(o)},Fk}var zk,cU;function am(){if(cU)return zk;cU=1;var t=Zwe();return zk=function(e){var n=+e;return n!==n||n===0?0:t(n)},zk}var Uk,uU;function eCe(){if(uU)return Uk;uU=1;var t=am(),e=Math.max,n=Math.min;return Uk=function(r,o){var a=t(r);return a<0?e(a+o,0):n(a,o)},Uk}var qk,dU;function hW(){if(dU)return qk;dU=1;var t=am(),e=Math.min;return qk=function(n){var r=t(n);return r>0?e(r,9007199254740991):0},qk}var Hk,pU;function rv(){if(pU)return Hk;pU=1;var t=hW();return Hk=function(e){return t(e.length)},Hk}var $k,fU;function tCe(){if(fU)return $k;fU=1;var t=hw(),e=eCe(),n=rv(),r=function(o){return function(a,s,i){var l=t(a),c=n(l);if(c===0)return!o&&-1;var d=e(i,c),u;if(o&&s!==s){for(;c>d;)if(u=l[d++],u!==u)return!0}else for(;c>d;d++)if((o||d in l)&&l[d]===s)return o||d||0;return!o&&-1}};return $k={includes:r(!0),indexOf:r(!1)},$k}var Vk,mU;function gW(){if(mU)return Vk;mU=1;var t=ua(),e=Ip(),n=hw(),r=tCe().indexOf,o=JD(),a=t([].push);return Vk=function(s,i){var l=n(s),c=0,d=[],u;for(u in l)!e(o,u)&&e(l,u)&&a(d,u);for(;i.length>c;)e(l,u=i[c++])&&(~r(d,u)||a(d,u));return d},Vk}var Gk,hU;function QD(){return hU||(hU=1,Gk=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Gk}var gU;function nCe(){if(gU)return Bk;gU=1;var t=gW(),e=QD(),n=e.concat("length","prototype");return Bk.f=Object.getOwnPropertyNames||function(o){return t(o,n)},Bk}var Kk={},bU;function rCe(){return bU||(bU=1,Kk.f=Object.getOwnPropertySymbols),Kk}var Wk,yU;function oCe(){if(yU)return Wk;yU=1;var t=gw(),e=ua(),n=nCe(),r=rCe(),o=om(),a=e([].concat);return Wk=t("Reflect","ownKeys")||function(i){var l=n.f(o(i)),c=r.f;return c?a(l,c(i)):l},Wk}var Yk,vU;function aCe(){if(vU)return Yk;vU=1;var t=Ip(),e=oCe(),n=cW(),r=nv();return Yk=function(o,a,s){for(var i=e(a),l=r.f,c=n.f,d=0;d<i.length;d++){var u=i[d];!t(o,u)&&!(s&&t(s,u))&&l(o,u,c(a,u))}},Yk}var Xk,xU;function sCe(){if(xU)return Xk;xU=1;var t=is(),e=Ns(),n=/#|\.prototype\./,r=function(l,c){var d=a[o(l)];return d===i?!0:d===s?!1:e(c)?t(c):!!c},o=r.normalize=function(l){return String(l).replace(n,".").toLowerCase()},a=r.data={},s=r.NATIVE="N",i=r.POLYFILL="P";return Xk=r,Xk}var Jk,SU;function _g(){if(SU)return Jk;SU=1;var t=ss(),e=cW().f,n=XD(),r=mW(),o=KD(),a=aCe(),s=sCe();return Jk=function(i,l){var c=i.target,d=i.global,u=i.stat,m,h,y,v,x,S;if(d?h=t:u?h=t[c]||o(c,{}):h=t[c]&&t[c].prototype,h)for(y in l){if(x=l[y],i.dontCallGetSet?(S=e(h,y),v=S&&S.value):v=h[y],m=s(d?y:c+(u?".":"#")+y,i.forced),!m&&v!==void 0){if(typeof x==typeof v)continue;a(x,v)}(i.sham||v&&v.sham)&&n(x,"sham",!0),r(h,y,x,i)}},Jk}var Qk={},Zk,EU;function iCe(){if(EU)return Zk;EU=1;var t=gW(),e=QD();return Zk=Object.keys||function(r){return t(r,e)},Zk}var TU;function lCe(){if(TU)return Qk;TU=1;var t=kp(),e=uW(),n=nv(),r=om(),o=hw(),a=iCe();return Qk.f=t&&!e?Object.defineProperties:function(i,l){r(i);for(var c=o(l),d=a(l),u=d.length,m=0,h;u>m;)n.f(i,h=d[m++],c[h]);return i},Qk}var eI,wU;function cCe(){if(wU)return eI;wU=1;var t=gw();return eI=t("document","documentElement"),eI}var tI,CU;function bW(){if(CU)return tI;CU=1;var t=om(),e=lCe(),n=QD(),r=JD(),o=cCe(),a=iW(),s=pW(),i=">",l="<",c="prototype",d="script",u=s("IE_PROTO"),m=function(){},h=function(T){return l+d+i+T+l+"/"+d+i},y=function(T){T.write(h("")),T.close();var C=T.parentWindow.Object;return T=null,C},v=function(){var T=a("iframe"),C="java"+d+":",_;return T.style.display="none",o.appendChild(T),T.src=String(C),_=T.contentWindow.document,_.open(),_.write(h("document.F=Object")),_.close(),_.F},x,S=function(){try{x=new ActiveXObject("htmlfile")}catch{}S=typeof document<"u"?document.domain&&x?y(x):v():y(x);for(var T=n.length;T--;)delete S[c][n[T]];return S()};return r[u]=!0,tI=Object.create||function(C,_){var I;return C!==null?(m[c]=t(C),I=new m,m[c]=null,I[u]=C):I=S(),_===void 0?I:e.f(I,_)},tI}var nI,AU;function ZD(){if(AU)return nI;AU=1;var t=Zu(),e=bW(),n=nv().f,r=t("unscopables"),o=Array.prototype;return o[r]===void 0&&n(o,r,{configurable:!0,value:e(null)}),nI=function(a){o[r][a]=!0},nI}var _U;function uCe(){if(_U)return uz;_U=1;var t=_g(),e=tv(),n=rv(),r=am(),o=ZD();return t({target:"Array",proto:!0},{at:function(s){var i=e(this),l=n(i),c=r(s),d=c>=0?c:l+c;return d<0||d>=l?void 0:i[d]}}),o("at"),uz}var rI,kU;function ov(){if(kU)return rI;kU=1;var t=ss(),e=ua();return rI=function(n,r){return e(t[n].prototype[r])},rI}var oI,IU;function dCe(){if(IU)return oI;IU=1,uCe();var t=ov();return oI=t("Array","at"),oI}var aI,PU;function pCe(){if(PU)return aI;PU=1;var t=dCe();return aI=t,aI}pCe();var OU={},sI,MU;function yW(){if(MU)return sI;MU=1;var t=Cg();return sI=Array.isArray||function(n){return t(n)==="Array"},sI}var iI,RU;function fCe(){if(RU)return iI;RU=1;var t=TypeError,e=9007199254740991;return iI=function(n){if(n>e)throw t("Maximum allowed index exceeded");return n},iI}var lI,DU;function mCe(){if(DU)return lI;DU=1;var t=Cg(),e=ua();return lI=function(n){if(t(n)==="Function")return e(n)},lI}var cI,NU;function hCe(){if(NU)return cI;NU=1;var t=mCe(),e=VD(),n=mw(),r=t(t.bind);return cI=function(o,a){return e(o),a===void 0?o:n?r(o,a):function(){return o.apply(a,arguments)}},cI}var uI,LU;function vW(){if(LU)return uI;LU=1;var t=yW(),e=rv(),n=fCe(),r=hCe(),o=function(a,s,i,l,c,d,u,m){for(var h=c,y=0,v=u?r(u,m):!1,x,S;y<l;)y in i&&(x=v?v(i[y],y,s):i[y],d>0&&t(x)?(S=e(x),h=o(a,s,x,S,h,d-1)-1):(n(h+1),a[h]=x),h++),y++;return h};return uI=o,uI}var dI,jU;function gCe(){if(jU)return dI;jU=1;var t=Zu(),e=t("toStringTag"),n={};return n[e]="z",dI=String(n)==="[object z]",dI}var pI,BU;function xW(){if(BU)return pI;BU=1;var t=gCe(),e=Ns(),n=Cg(),r=Zu(),o=r("toStringTag"),a=Object,s=n((function(){return arguments})())==="Arguments",i=function(l,c){try{return l[c]}catch{}};return pI=t?n:function(l){var c,d,u;return l===void 0?"Undefined":l===null?"Null":typeof(d=i(c=a(l),o))=="string"?d:s?n(c):(u=n(c))==="Object"&&e(c.callee)?"Arguments":u},pI}var fI,FU;function bCe(){if(FU)return fI;FU=1;var t=ua(),e=is(),n=Ns(),r=xW(),o=gw(),a=dW(),s=function(){},i=o("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),d=!l.test(s),u=function(y){if(!n(y))return!1;try{return i(s,[],y),!0}catch{return!1}},m=function(y){if(!n(y))return!1;switch(r(y)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!c(l,a(y))}catch{return!0}};return m.sham=!0,fI=!i||e(function(){var h;return u(u.call)||!u(Object)||!u(function(){h=!0})||h})?m:u,fI}var mI,zU;function yCe(){if(zU)return mI;zU=1;var t=yW(),e=bCe(),n=Qu(),r=Zu(),o=r("species"),a=Array;return mI=function(s){var i;return t(s)&&(i=s.constructor,e(i)&&(i===a||t(i.prototype))?i=void 0:n(i)&&(i=i[o],i===null&&(i=void 0))),i===void 0?a:i},mI}var hI,UU;function SW(){if(UU)return hI;UU=1;var t=yCe();return hI=function(e,n){return new(t(e))(n===0?0:n)},hI}var qU;function vCe(){if(qU)return OU;qU=1;var t=_g(),e=vW(),n=VD(),r=tv(),o=rv(),a=SW();return t({target:"Array",proto:!0},{flatMap:function(i){var l=r(this),c=o(l),d;return n(i),d=a(l,0),d.length=e(d,l,l,c,0,1,i,arguments.length>1?arguments[1]:void 0),d}}),OU}var HU={},$U;function xCe(){if($U)return HU;$U=1;var t=ZD();return t("flatMap"),HU}var gI,VU;function SCe(){if(VU)return gI;VU=1,vCe(),xCe();var t=ov();return gI=t("Array","flatMap"),gI}var bI,GU;function ECe(){if(GU)return bI;GU=1;var t=SCe();return bI=t,bI}ECe();var KU={},WU;function TCe(){if(WU)return KU;WU=1;var t=_g(),e=vW(),n=tv(),r=rv(),o=am(),a=SW();return t({target:"Array",proto:!0},{flat:function(){var i=arguments.length?arguments[0]:void 0,l=n(this),c=r(l),d=a(l,0);return d.length=e(d,l,l,c,0,i===void 0?1:o(i)),d}}),KU}var YU={},XU;function wCe(){if(XU)return YU;XU=1;var t=ZD();return t("flat"),YU}var yI,JU;function CCe(){if(JU)return yI;JU=1,TCe(),wCe();var t=ov();return yI=t("Array","flat"),yI}var vI,QU;function ACe(){if(QU)return vI;QU=1;var t=CCe();return vI=t,vI}ACe();var ZU={},xI,e8;function av(){if(e8)return xI;e8=1;var t=xW(),e=String;return xI=function(n){if(t(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(n)},xI}var t8;function _Ce(){if(t8)return ZU;t8=1;var t=_g(),e=ua(),n=Ag(),r=am(),o=av(),a=is(),s=e("".charAt),i=a(function(){return"".at(-2)!=="\uD842"});return t({target:"String",proto:!0,forced:i},{at:function(c){var d=o(n(this)),u=d.length,m=r(c),h=m>=0?m:u+m;return h<0||h>=u?void 0:s(d,h)}}),ZU}var SI,n8;function kCe(){if(n8)return SI;n8=1,_Ce();var t=ov();return SI=t("String","at"),SI}var EI,r8;function ICe(){if(r8)return EI;r8=1;var t=kCe();return EI=t,EI}ICe();var o8={},TI,a8;function EW(){if(a8)return TI;a8=1;var t=om();return TI=function(){var e=t(this),n="";return e.hasIndices&&(n+="d"),e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.unicodeSets&&(n+="v"),e.sticky&&(n+="y"),n},TI}var wI,s8;function PCe(){if(s8)return wI;s8=1;var t=is(),e=ss(),n=e.RegExp,r=t(function(){var s=n("a","y");return s.lastIndex=2,s.exec("abcd")!==null}),o=r||t(function(){return!n("a","y").sticky}),a=r||t(function(){var s=n("^r","gy");return s.lastIndex=2,s.exec("str")!==null});return wI={BROKEN_CARET:a,MISSED_STICKY:o,UNSUPPORTED_Y:r},wI}var CI,i8;function OCe(){if(i8)return CI;i8=1;var t=is(),e=ss(),n=e.RegExp;return CI=t(function(){var r=n(".","s");return!(r.dotAll&&r.test(`
`)&&r.flags==="s")}),CI}var AI,l8;function MCe(){if(l8)return AI;l8=1;var t=is(),e=ss(),n=e.RegExp;return AI=t(function(){var r=n("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),AI}var _I,c8;function eN(){if(c8)return _I;c8=1;var t=Ju(),e=ua(),n=av(),r=EW(),o=PCe(),a=YD(),s=bW(),i=fW().get,l=OCe(),c=MCe(),d=a("native-string-replace",String.prototype.replace),u=RegExp.prototype.exec,m=u,h=e("".charAt),y=e("".indexOf),v=e("".replace),x=e("".slice),S=(function(){var I=/a/,P=/b*/g;return t(u,I,"a"),t(u,P,"a"),I.lastIndex!==0||P.lastIndex!==0})(),T=o.BROKEN_CARET,C=/()??/.exec("")[1]!==void 0,_=S||C||T||l||c;return _&&(m=function(P){var M=this,D=i(M),F=n(P),B=D.raw,V,z,H,j,q,U,Y;if(B)return B.lastIndex=M.lastIndex,V=t(m,B,F),M.lastIndex=B.lastIndex,V;var X=D.groups,ee=T&&M.sticky,$=t(r,M),G=M.source,re=0,K=F;if(ee&&($=v($,"y",""),y($,"g")===-1&&($+="g"),K=x(F,M.lastIndex),M.lastIndex>0&&(!M.multiline||M.multiline&&h(F,M.lastIndex-1)!==`
`)&&(G="(?: "+G+")",K=" "+K,re++),z=new RegExp("^(?:"+G+")",$)),C&&(z=new RegExp("^"+G+"$(?!\\s)",$)),S&&(H=M.lastIndex),j=t(u,ee?z:M,K),ee?j?(j.input=x(j.input,re),j[0]=x(j[0],re),j.index=M.lastIndex,M.lastIndex+=j[0].length):M.lastIndex=0:S&&j&&(M.lastIndex=M.global?j.index+j[0].length:H),C&&j&&j.length>1&&t(d,j[0],z,function(){for(q=1;q<arguments.length-2;q++)arguments[q]===void 0&&(j[q]=void 0)}),j&&X)for(j.groups=U=s(null),q=0;q<X.length;q++)Y=X[q],U[Y[0]]=j[Y[1]];return j}),_I=m,_I}var u8;function TW(){if(u8)return o8;u8=1;var t=_g(),e=eN();return t({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e}),o8}var d8={},kI,p8;function RCe(){if(p8)return kI;p8=1;var t=mw(),e=Function.prototype,n=e.apply,r=e.call;return kI=typeof Reflect=="object"&&Reflect.apply||(t?r.bind(n):function(){return r.apply(n,arguments)}),kI}var II,f8;function DCe(){if(f8)return II;f8=1,TW();var t=Ju(),e=mW(),n=eN(),r=is(),o=Zu(),a=XD(),s=o("species"),i=RegExp.prototype;return II=function(l,c,d,u){var m=o(l),h=!r(function(){var S={};return S[m]=function(){return 7},""[l](S)!==7}),y=h&&!r(function(){var S=!1,T=/a/;if(l==="split"){var C={};C[s]=function(){return T},T={constructor:C,flags:""},T[m]=/./[m]}return T.exec=function(){return S=!0,null},T[m](""),!S});if(!h||!y||d){var v=/./[m],x=c(m,""[l],function(S,T,C,_,I){var P=T.exec;return P===n||P===i.exec?h&&!I?{done:!0,value:t(v,T,C,_)}:{done:!0,value:t(S,C,T,_)}:{done:!1}});e(String.prototype,l,x[0]),e(i,m,x[1])}u&&a(i[m],"sham",!0)},II}var PI,m8;function NCe(){if(m8)return PI;m8=1;var t=ua(),e=am(),n=av(),r=Ag(),o=t("".charAt),a=t("".charCodeAt),s=t("".slice),i=function(l){return function(c,d){var u=n(r(c)),m=e(d),h=u.length,y,v;return m<0||m>=h?l?"":void 0:(y=a(u,m),y<55296||y>56319||m+1===h||(v=a(u,m+1))<56320||v>57343?l?o(u,m):y:l?s(u,m,m+2):(y-55296<<10)+(v-56320)+65536)}};return PI={codeAt:i(!1),charAt:i(!0)},PI}var OI,h8;function LCe(){if(h8)return OI;h8=1;var t=NCe().charAt;return OI=function(e,n,r){return n+(r?t(e,n).length:1)},OI}var MI,g8;function wW(){if(g8)return MI;g8=1;var t=ua(),e=tv(),n=Math.floor,r=t("".charAt),o=t("".replace),a=t("".slice),s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;return MI=function(l,c,d,u,m,h){var y=d+l.length,v=u.length,x=i;return m!==void 0&&(m=e(m),x=s),o(h,x,function(S,T){var C;switch(r(T,0)){case"$":return"$";case"&":return l;case"`":return a(c,0,d);case"'":return a(c,y);case"<":C=m[a(T,1,-1)];break;default:var _=+T;if(_===0)return S;if(_>v){var I=n(_/10);return I===0?S:I<=v?u[I-1]===void 0?r(T,1):u[I-1]+r(T,1):S}C=u[_-1]}return C===void 0?"":C})},MI}var RI,b8;function jCe(){if(b8)return RI;b8=1;var t=ss(),e=is(),n=t.RegExp,r=!e(function(){var o=!0;try{n(".","d")}catch{o=!1}var a={},s="",i=o?"dgimsy":"gimsy",l=function(m,h){Object.defineProperty(a,m,{get:function(){return s+=h,!0}})},c={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};o&&(c.hasIndices="d");for(var d in c)l(d,c[d]);var u=Object.getOwnPropertyDescriptor(n.prototype,"flags").get.call(a);return u!==i||s!==i});return RI={correct:r},RI}var DI,y8;function CW(){if(y8)return DI;y8=1;var t=Ju(),e=Ip(),n=eW(),r=jCe(),o=EW(),a=RegExp.prototype;return DI=r.correct?function(s){return s.flags}:function(s){return!r.correct&&n(a,s)&&!e(s,"flags")?t(o,s):s.flags},DI}var NI,v8;function BCe(){if(v8)return NI;v8=1;var t=Ju(),e=om(),n=Ns(),r=Cg(),o=eN(),a=TypeError;return NI=function(s,i){var l=s.exec;if(n(l)){var c=t(l,s,i);return c!==null&&e(c),c}if(r(s)==="RegExp")return t(o,s,i);throw new a("RegExp#exec called on incompatible receiver")},NI}var x8;function FCe(){if(x8)return d8;x8=1;var t=RCe(),e=Ju(),n=ua(),r=DCe(),o=is(),a=om(),s=Ns(),i=Qu(),l=am(),c=hW(),d=av(),u=Ag(),m=LCe(),h=GD(),y=wW(),v=CW(),x=BCe(),S=Zu(),T=S("replace"),C=Math.max,_=Math.min,I=n([].concat),P=n([].push),M=n("".indexOf),D=n("".slice),F=function(H){return H===void 0?H:String(H)},B=(function(){return"a".replace(/./,"$0")==="$0"})(),V=(function(){return/./[T]?/./[T]("a","$0")==="":!1})(),z=!o(function(){var H=/./;return H.exec=function(){var j=[];return j.groups={a:"7"},j},"".replace(H,"$<a>")!=="7"});return r("replace",function(H,j,q){var U=V?"$":"$0";return[function(X,ee){var $=u(this),G=i(X)?h(X,T):void 0;return G?e(G,X,$,ee):e(j,d($),X,ee)},function(Y,X){var ee=a(this),$=d(Y);if(typeof X=="string"&&M(X,U)===-1&&M(X,"$<")===-1){var G=q(j,ee,$,X);if(G.done)return G.value}var re=s(X);re||(X=d(X));var K=d(v(ee)),ve=M(K,"g")!==-1,xe;ve&&(xe=M(K,"u")!==-1,ee.lastIndex=0);for(var Oe=[],Ne;Ne=x(ee,$),!(Ne===null||(P(Oe,Ne),!ve));){var Fe=d(Ne[0]);Fe===""&&(ee.lastIndex=m($,c(ee.lastIndex),xe))}for(var Ke="",Qe=0,Wt=0;Wt<Oe.length;Wt++){Ne=Oe[Wt];for(var hn=d(Ne[0]),Yt=C(_(l(Ne.index),$.length),0),Ut=[],an,wt=1;wt<Ne.length;wt++)P(Ut,F(Ne[wt]));var qn=Ne.groups;if(re){var Gn=I([hn],Ut,Yt,$);qn!==void 0&&P(Gn,qn),an=d(t(X,void 0,Gn))}else an=y(hn,$,Yt,Ut,qn,X);Yt>=Qe&&(Ke+=D($,Qe,Yt)+an,Qe=Yt+hn.length)}return Ke+D($,Qe)}]},!z||!B||V),d8}var S8={},LI,E8;function zCe(){if(E8)return LI;E8=1;var t=Qu(),e=Cg(),n=Zu(),r=n("match");return LI=function(o){var a;return t(o)&&((a=o[r])!==void 0?!!a:e(o)==="RegExp")},LI}var T8;function UCe(){if(T8)return S8;T8=1;var t=_g(),e=Ju(),n=ua(),r=Ag(),o=Ns(),a=Qu(),s=zCe(),i=av(),l=GD(),c=CW(),d=wW(),u=Zu(),m=oW(),h=u("replace"),y=TypeError,v=n("".indexOf),x=n("".replace),S=n("".slice),T=Math.max;return t({target:"String",proto:!0},{replaceAll:function(_,I){var P=r(this),M,D,F,B,V,z,H,j,q,U,Y=0,X="";if(a(_)){if(M=s(_),M&&(D=i(r(c(_))),!~v(D,"g")))throw new y("`.replaceAll` does not allow non-global regexes");if(F=l(_,h),F)return e(F,_,P,I);if(m&&M)return x(i(P),_,I)}for(B=i(P),V=i(_),z=o(I),z||(I=i(I)),H=V.length,j=T(1,H),q=v(B,V);q!==-1;)U=z?i(I(V,q,B)):d(V,B,q,[],void 0,I),X+=S(B,Y,q)+U,Y=q+H,q=q+j>B.length?-1:v(B,V,q+j);return Y<B.length&&(X+=S(B,Y)),X}}),S8}var jI,w8;function qCe(){if(w8)return jI;w8=1,TW(),FCe(),UCe();var t=ov();return jI=t("String","replaceAll"),jI}var BI,C8;function HCe(){if(C8)return BI;C8=1;var t=qCe();return BI=t,BI}HCe();function AW(t){return t&&typeof t=="object"&&"parents"in t}function _W(t){for(let e=0,n=t.parents.length;e<n;e++)if(t.parents[e].__unsafe__getWithoutCapture(!0),t.parents[e].lastChangedEpoch!==t.parentEpochs[e])return!0;return!1}function yE(t,e){if(t.children.remove(e)&&t.children.isEmpty&&AW(t))for(let n=0,r=t.parents.length;n<r;n++)yE(t.parents[n],t)}function tN(t,e){if(t.children.add(e)&&AW(t))for(let n=0,r=t.parents.length;n<r;n++)tN(t.parents[n],t)}function kW(t,e){return t===e||Object.is(t,e)||!!(t&&e&&typeof t.equals=="function"&&t.equals(e))}function Pp(t,e){const n=Symbol.for(`com.tldraw.state/${t}`),r=globalThis;return r[n]??(r[n]=e()),r[n]}const io=Pp("empty_array",()=>Object.freeze([])),A8=8;class vE{constructor(){L(this,"arraySize",0);L(this,"array",Array(A8));L(this,"set",null)}get isEmpty(){if(this.array)return this.arraySize===0;if(this.set)return this.set.size===0;throw new Error("no set or array")}add(e){if(this.array)return this.array.indexOf(e)!==-1?!1:this.arraySize<A8?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0);if(this.set)return this.set.has(e)?!1:(this.set.add(e),!0);throw new Error("no set or array")}remove(e){if(this.array){const n=this.array.indexOf(e);return n===-1?!1:(this.array[n]=void 0,this.arraySize--,n!==this.arraySize&&(this.array[n]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return this.set.has(e)?(this.set.delete(e),!0):!1;throw new Error("no set or array")}visit(e){if(this.array){for(let n=0;n<this.arraySize;n++){const r=this.array[n];typeof r<"u"&&e(r)}return}if(this.set){this.set.forEach(e);return}throw new Error("no set or array")}*[Symbol.iterator](){if(this.array)for(let e=0;e<this.arraySize;e++){const n=this.array[e];typeof n<"u"&&(yield n)}else if(this.set)yield*this.set;else throw new Error("no set or array")}has(e){return this.array?this.array.indexOf(e)!==-1:this.set.has(e)}clear(){this.set?this.set.clear():(this.arraySize=0,this.array=[])}size(){return this.set?this.set.size:this.arraySize}}const zi=Symbol.for("com.tldraw.state/RESET_VALUE");class IW{constructor(e){L(this,"index",0);L(this,"buffer");this.capacity=e,this.buffer=new Array(e)}pushEntry(e,n,r){if(r!==void 0){if(r===zi){this.clear();return}this.buffer[this.index]=[e,n,r],this.index=(this.index+1)%this.capacity}}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(e){const{index:n,capacity:r,buffer:o}=this;for(let a=0;a<r;a++){const s=(n-1+r-a)%r,i=o[s];if(!i)return zi;const[l,c]=i;if(a===0&&e>=c)return[];if(l<=e&&e<c){const d=a+1,u=new Array(d);for(let m=0;m<d;m++)u[m]=o[(s+m)%r][2];return u}}return zi}}const Zd=-1;class $Ce{constructor(e,n,r){L(this,"_isActivelyListening",!1);L(this,"lastTraversedEpoch",Zd);L(this,"lastReactedEpoch",Zd);L(this,"_scheduleCount",0);L(this,"__debug_ancestor_epochs__",null);L(this,"parentSet",new vE);L(this,"parentEpochs",[]);L(this,"parents",[]);L(this,"_scheduleEffect");L(this,"maybeExecute",()=>{this._isActivelyListening&&this.execute()});this.name=e,this.runEffect=n,this._scheduleEffect=r==null?void 0:r.scheduleEffect}get isActivelyListening(){return this._isActivelyListening}get scheduleCount(){return this._scheduleCount}maybeScheduleEffect(){if(this._isActivelyListening&&this.lastReactedEpoch!==Zs()){if(this.parents.length&&!_W(this)){this.lastReactedEpoch=Zs();return}this.scheduleEffect()}}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}attach(){this._isActivelyListening=!0;for(let e=0,n=this.parents.length;e<n;e++)tN(this.parents[e],this)}detach(){this._isActivelyListening=!1;for(let e=0,n=this.parents.length;e<n;e++)yE(this.parents[e],this)}execute(){try{RW(this);const e=Zs(),n=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=e,n}finally{DW()}}}const sm=Pp("EffectScheduler",()=>$Ce);function si(t,e,n){const r=new sm(t,e,n);return r.attach(),r.scheduleEffect(),()=>{r.detach()}}function VCe(t,e,n){const r=new sm(t,e,n);return{scheduler:r,start:o=>{const a=(o==null?void 0:o.force)??!1;r.attach(),a?r.scheduleEffect():r.maybeScheduleEffect()},stop:()=>{r.detach()}}}let GCe=class{constructor(e,n){L(this,"asyncProcessCount",0);L(this,"initialAtomValues",new Map);this.parent=e,this.isSync=n}get isRoot(){return this.parent===null}commit(){if(zn.globalIsReacting)for(const e of this.initialAtomValues.keys())OW(e);else this.isRoot?PW(this.initialAtomValues.keys()):this.initialAtomValues.forEach((e,n)=>{this.parent.initialAtomValues.has(n)||this.parent.initialAtomValues.set(n,e)})}abort(){zn.globalEpoch++,this.initialAtomValues.forEach((e,n)=>{var r;n.set(e),(r=n.historyBuffer)==null||r.clear()}),this.commit()}};const zn=Pp("transactions",()=>({globalEpoch:Zd+1,globalIsReacting:!1,currentTransaction:null,cleanupReactors:null,reactionEpoch:Zd+1}));function KCe(){return zn.reactionEpoch}function Zs(){return zn.globalEpoch}function WCe(){return zn.globalIsReacting}function nN(t,e){e.lastTraversedEpoch!==zn.globalEpoch&&(e.lastTraversedEpoch=zn.globalEpoch,e instanceof sm?t.add(e):e.children.visit(n=>nN(t,n)))}function PW(t){var n;if(zn.globalIsReacting)throw new Error("flushChanges cannot be called during a reaction");const e=zn.currentTransaction;try{zn.currentTransaction=null,zn.globalIsReacting=!0,zn.reactionEpoch=zn.globalEpoch;const r=new Set;for(const a of t)a.children.visit(s=>nN(r,s));for(const a of r)a.maybeScheduleEffect();let o=0;for(;(n=zn.cleanupReactors)!=null&&n.size;){if(o++>1e3)throw new Error("Reaction update depth limit exceeded");const a=zn.cleanupReactors;zn.cleanupReactors=null;for(const s of a)s.maybeScheduleEffect()}}finally{zn.cleanupReactors=null,zn.globalIsReacting=!1,zn.currentTransaction=e}}function YCe(t,e){zn.currentTransaction?zn.currentTransaction.initialAtomValues.has(t)||zn.currentTransaction.initialAtomValues.set(t,e):zn.globalIsReacting?OW(t):PW([t])}function OW(t){const e=zn.cleanupReactors??(zn.cleanupReactors=new Set);t.children.visit(n=>nN(e,n))}function XCe(){zn.globalEpoch++}function JCe(t){const e=new GCe(zn.currentTransaction,!0);zn.currentTransaction=e;try{let n,r=!1;try{n=t(()=>r=!0)}catch(o){throw e.abort(),o}if(zn.currentTransaction!==e)throw new Error("Transaction boundaries overlap");return r?e.abort():e.commit(),n}finally{zn.currentTransaction=e.parent}}function Ui(t){return zn.currentTransaction?t():JCe(t)}let _8=!1;function QCe(){_8||(_8=!0,console.warn(`Using \`@computed\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \`@computed\` as a decorator for methods.

// Before
@computed
get foo() {
	return 'foo'
}

// After
@computed
getFoo() {
	return 'foo'
}
`))}const Va=Symbol.for("com.tldraw.state/UNINITIALIZED");function Tf(t){return t===Va}const iM=Pp("WithDiff",()=>class{constructor(e,n){this.value=e,this.diff=n}});function iy(t,e){return new iM(t,e)}class ZCe{constructor(e,n,r){L(this,"lastChangedEpoch",Zd);L(this,"lastTraversedEpoch",Zd);L(this,"__debug_ancestor_epochs__",null);L(this,"lastCheckedEpoch",Zd);L(this,"parentSet",new vE);L(this,"parents",[]);L(this,"parentEpochs",[]);L(this,"children",new vE);L(this,"historyBuffer");L(this,"state",Va);L(this,"error",null);L(this,"computeDiff");L(this,"isEqual");this.name=e,this.derive=n,r!=null&&r.historyLength&&(this.historyBuffer=new IW(r.historyLength)),this.computeDiff=r==null?void 0:r.computeDiff,this.isEqual=(r==null?void 0:r.isEqual)??kW}get isActivelyListening(){return!this.children.isEmpty}__unsafe__getWithoutCapture(e){var o;const n=this.lastChangedEpoch===Zd,r=Zs();if(!n&&(this.lastCheckedEpoch===r||this.isActivelyListening&&WCe()&&this.lastTraversedEpoch<KCe()||!_W(this)))if(this.lastCheckedEpoch=r,this.error){if(e)return this.state;throw this.error.thrownValue}else return this.state;try{RW(this);const a=this.derive(this.state,this.lastCheckedEpoch),s=a instanceof iM?a.value:a,i=this.state===Va;if(i||!this.isEqual(s,this.state)){if(this.historyBuffer&&!i){const l=a instanceof iM?a.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,Zs(),l??((o=this.computeDiff)==null?void 0:o.call(this,this.state,s,this.lastCheckedEpoch,Zs()))??zi)}this.lastChangedEpoch=Zs(),this.state=s}return this.error=null,this.lastCheckedEpoch=Zs(),this.state}catch(a){if(this.state!==Va&&(this.state=Va,this.lastChangedEpoch=Zs()),this.lastCheckedEpoch=Zs(),this.historyBuffer&&this.historyBuffer.clear(),this.error={thrownValue:a},!e)throw a;return this.state}finally{DW()}}get(){try{return this.__unsafe__getWithoutCapture()}finally{xE(this)}}getDiffSince(e){var n;return this.__unsafe__getWithoutCapture(!0),xE(this),e>=this.lastChangedEpoch?io:((n=this.historyBuffer)==null?void 0:n.getChangesSince(e))??zi}}const sv=Pp("Computed",()=>ZCe);function eAe(t={},e,n,r){const o=r.value,a=Symbol.for("__@tldraw/state__computed__"+n);return r.value=function(){let s=this[a];return s||(s=new sv(n,o.bind(this),t),Object.defineProperty(this,a,{enumerable:!1,configurable:!1,writable:!1,value:s})),s.get()},r.value[MW]=!0,r}function tAe(t={},e,n,r){const o=r.get,a=Symbol.for("__@tldraw/state__computed__"+n);return r.get=function(){let s=this[a];return s||(s=new sv(n,o.bind(this),t),Object.defineProperty(this,a,{enumerable:!1,configurable:!1,writable:!1,value:s})),s.get()},r}function nAe(t,e,n){dt(n.kind==="method","@computed can only be used on methods");const r=Symbol.for("__@tldraw/state__computed__"+String(n.name)),o=function(){let a=this[r];return a||(a=new sv(String(n.name),e.bind(this),t),Object.defineProperty(this,r,{enumerable:!1,configurable:!1,writable:!1,value:a})),a.get()};return o[MW]=!0,o}function k8(t={},e){if(e.length===2){const[n,r]=e;return nAe(t,n,r)}else{const[n,r,o]=e;return o.get?(QCe(),tAe(t,n,r,o)):eAe(t,n,r,o)}}const MW="@@__isComputedMethod__@@";function ke(){if(arguments.length===1){const t=arguments[0];return(...e)=>k8(t,e)}else return typeof arguments[0]=="string"?new sv(arguments[0],arguments[1],arguments[2]):k8(void 0,arguments)}function rN(t){return!!(t&&t instanceof sv)}class rAe{constructor(e,n){L(this,"offset",0);L(this,"maybeRemoved");this.below=e,this.child=n}}const Fr=Pp("capture",()=>({stack:null}));function ly(t){const e=Fr.stack;Fr.stack=null;try{return t()}finally{Fr.stack=e}}function RW(t){if(Fr.stack=new rAe(Fr.stack,t),t.__debug_ancestor_epochs__){const e=t.__debug_ancestor_epochs__;t.__debug_ancestor_epochs__=null;for(const n of t.parents)n.__unsafe__getWithoutCapture(!0);oAe(t,e)}t.parentSet.clear()}function DW(){const t=Fr.stack;if(Fr.stack=t.below,t.offset<t.child.parents.length){for(let e=t.offset;e<t.child.parents.length;e++){const n=t.child.parents[e];t.child.parentSet.has(n)||yE(n,t.child)}t.child.parents.length=t.offset,t.child.parentEpochs.length=t.offset}if(t.maybeRemoved)for(let e=0;e<t.maybeRemoved.length;e++){const n=t.maybeRemoved[e];t.child.parentSet.has(n)||yE(n,t.child)}t.child.__debug_ancestor_epochs__&&NW(t.child,t.child.__debug_ancestor_epochs__)}function xE(t){if(Fr.stack){if(Fr.stack.child.parentSet.has(t))return;if(Fr.stack.child.parentSet.add(t),Fr.stack.child.isActivelyListening&&tN(t,Fr.stack.child),Fr.stack.offset<Fr.stack.child.parents.length){const n=Fr.stack.child.parents[Fr.stack.offset];n!==t&&(Fr.stack.maybeRemoved?Fr.stack.maybeRemoved.push(n):Fr.stack.maybeRemoved=[n])}Fr.stack.child.parents[Fr.stack.offset]=t,Fr.stack.child.parentEpochs[Fr.stack.offset]=t.lastChangedEpoch,Fr.stack.offset++}}function NW(t,e){for(let n=0;n<t.parents.length;n++){const r=t.parents[n],o=t.parentEpochs[n];e.set(r,o),rN(r)&&NW(r,e)}return e}function LW(t,e){const n={};for(let r=0;r<t.parents.length;r++){const o=t.parents[r];if(!e.has(o))continue;const a=e.get(o);o.lastChangedEpoch!==a&&(rN(o)?n[o.name]=LW(o,e):n[o.name]=null)}return n}function oAe(t,e){const n=LW(t,e);if(Object.keys(n).length===0){console.log(`Effect(${t.name}) was executed manually.`);return}let r=rN(t)?`Computed(${t.name}) is recomputing because:`:`Effect(${t.name}) is executing because:`;function o(a,s){const i=`
`+" ".repeat(s)+" ";for(const[l,c]of Object.entries(a))c?(r+=`${i}Computed(${l}) changed`,o(c,s+2)):r+=`${i}Atom(${l}) changed`}o(n,1),console.log(r)}class aAe{constructor(e,n,r){L(this,"isEqual");L(this,"computeDiff");L(this,"lastChangedEpoch",Zs());L(this,"children",new vE);L(this,"historyBuffer");this.name=e,this.current=n,this.isEqual=(r==null?void 0:r.isEqual)??null,r&&(r.historyLength&&(this.historyBuffer=new IW(r.historyLength)),this.computeDiff=r.computeDiff)}__unsafe__getWithoutCapture(e){return this.current}get(){return xE(this),this.current}set(e,n){var o,a;if(((o=this.isEqual)==null?void 0:o.call(this,this.current,e))??kW(this.current,e))return this.current;XCe(),this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,Zs(),n??((a=this.computeDiff)==null?void 0:a.call(this,this.current,e,this.lastChangedEpoch,Zs()))??zi),this.lastChangedEpoch=Zs();const r=this.current;return this.current=e,YCe(this,r),e}update(e){return this.set(e(this.current))}getDiffSince(e){var n;return xE(this),e>=this.lastChangedEpoch?io:((n=this.historyBuffer)==null?void 0:n.getChangesSince(e))??zi}}const sAe=Pp("Atom",()=>aAe);function Ir(t,e,n){return new sAe(t,e,n)}const jW=1,iAe=Pp("apiVersion",()=>jW);if(iAe!==jW)throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");Cp("@tldraw/state","4.2.0","esm");function bw(t,e,n=[]){const r=bt.useRef(e);r.current=e;const[o,a,s]=bt.useMemo(()=>{let i=null;const l=u=>(i=u,()=>{i=null}),c=new sm(`useStateTracking(${t})`,()=>{var u;return(u=r.current)==null?void 0:u.call(r)},{scheduleEffect(){i==null||i()}});return[c,l,()=>c.scheduleCount]},[t,...n]);return bt.useSyncExternalStore(a,s,s),bt.useEffect(()=>(o.attach(),o.maybeScheduleEffect(),()=>{o.detach()}),[o]),o.execute()}const I8={apply(t,e,n){return bw(t.displayName??t.name??"tracked(???)",()=>t.apply(e,n))}},lAe=Symbol.for("react.memo"),cAe=Symbol.for("react.forward_ref");function Co(t){let e=null;const n=t.$$typeof;return n===lAe&&(t=t.type,e=t.compare),n===cAe?w.memo(w.forwardRef(new Proxy(t.render,I8))):w.memo(new Proxy(t,I8),e)}function iv(t,e,n){return w.useState(()=>{const r=typeof e=="function"?e():e;return Ir(`useAtom(${t})`,r,n)})[0]}function uAe(){const t=arguments[0],e=arguments[1],n=arguments.length===3?void 0:arguments[2],r=arguments.length===3?arguments[2]:arguments[3];return w.useMemo(()=>ke(`useComputed(${t})`,e,n),r)}function Rf(t,e,n=io){w.useEffect(()=>{const r=new sm(t,e);return r.attach(),r.execute(),()=>{r.detach()}},n)}function oN(t,e,n=[]){w.useEffect(()=>{let r;const o=new sm(t,e,{scheduleEffect:a=>{r=$D(a)}});return o.attach(),o.execute(),()=>{o.detach(),r==null||r()}},n)}function ce(){const t=arguments,e=t.length===3?t[2]:[t[0]],n=t.length===3?t[0]:`useValue(${t[0].name})`,{$val:r,subscribe:o,getSnapshot:a}=w.useMemo(()=>{const s=t.length===1?t[0]:ke(n,t[1]);return{$val:s,subscribe:i=>si(`useValue(${n})`,()=>{try{s.get()}catch{}i()}),getSnapshot:()=>s.lastChangedEpoch}},e);return w.useSyncExternalStore(o,a,a),r.__unsafe__getWithoutCapture()}Cp("@tldraw/state-react","4.2.0","esm");/*!
 * This file was lovingly and delicately extracted from Immutable.js
 * MIT License: https://github.com/immutable-js/immutable-js/blob/main/LICENSE
 * Copyright (c) 2014-present, Lee Byron and other contributors.
 */function aN(t){return t>>>1&1073741824|t&3221225471}const dAe=Object.prototype.valueOf;function Df(t){if(t==null)return P8(t);if(typeof t.hashCode=="function")return aN(t.hashCode(t));const e=gAe(t);if(e==null)return P8(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return pAe(e);case"string":return e.length>bAe?fAe(e):lM(e);case"object":case"function":return hAe(e);case"symbol":return mAe(e);default:if(typeof e.toString=="function")return lM(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function P8(t){return t===null?1108378658:1108378659}function pAe(t){if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return aN(e)}function fAe(t){let e=UI[t];return e===void 0&&(e=lM(t),zI===yAe&&(zI=0,UI={}),zI++,UI[t]=e),e}function lM(t){let e=0;for(let n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return aN(e)}function mAe(t){let e=M8[t];return e!==void 0||(e=BW(),M8[t]=e),e}function hAe(t){let e=O8.get(t);return e!==void 0||(e=BW(),O8.set(t,e)),e}function gAe(t){return t.valueOf!==dAe&&typeof t.valueOf=="function"?t.valueOf(t):t}function BW(){const t=++FI;return FI&1073741824&&(FI=0),t}const O8=new WeakMap,M8=Object.create(null);let FI=0;const bAe=16,yAe=255;let zI=0,UI={};const Gh=5,lv=1<<Gh,Kh=lv-1,Gu={};function R8(){return{value:!1}}function Yl(t){t&&(t.value=!0)}function sN(t,e){e=e||0;const n=Math.max(0,t.length-e),r=new Array(n);for(let o=0;o<n;o++)r[o]=t[o+e];return r}const Wh=Object.is;class FW{}class iN{constructor(e){L(this,"_root");L(this,"size");L(this,"__ownerID");L(this,"__hash");L(this,"__altered");return e==null?Mh():e instanceof iN?e:Mh().withMutations(n=>{for(const[r,o]of e)n.set(r,o)})}get(e,n){return this._root?this._root.get(0,void 0,e,n):n}set(e,n){return L8(this,e,n)}delete(e){return L8(this,e,Gu)}deleteAll(e){return this.withMutations(n=>{for(const r of e)n.delete(r)})}__ensureOwner(e){return e===this.__ownerID?this:e?uN(this.size,this._root,e,this.__hash):this.size===0?Mh():(this.__ownerID=e,this.__altered=!1,this)}withMutations(e){const n=this.asMutable();return e(n),n.wasAltered()?n.__ensureOwner(this.__ownerID):this}wasAltered(){return this.__altered}asMutable(){return this.__ownerID?this:this.__ensureOwner(new FW)}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}entries(){return new qI(this,vAe,!1)}keys(){return new qI(this,zW,!1)}values(){return new qI(this,UW,!1)}}class lN{constructor(e,n){this.ownerID=e,this.entries=n}get(e,n,r,o){const a=this.entries;for(let s=0,i=a.length;s<i;s++)if(Wh(r,a[s][0]))return a[s][1];return o}update(e,n,r,o,a,s,i){const l=a===Gu,c=this.entries;let d=0;const u=c.length;for(;d<u&&!Wh(o,c[d][0]);d++);const m=d<u;if(m?c[d][1]===a:l)return this;if(Yl(i),(l||!m)&&Yl(s),l&&c.length===1)return;if(!m&&!l&&c.length>=_Ae)return EAe(e,c,o,a);const h=e&&e===this.ownerID,y=h?c:sN(c);return m?l?d===u-1?y.pop():y[d]=y.pop():y[d]=[o,a]:y.push([o,a]),h?(this.entries=y,this):new lN(e,y)}}class yw{constructor(e,n,r){this.ownerID=e,this.bitmap=n,this.nodes=r}get(e,n,r,o){n===void 0&&(n=Df(r));const a=1<<((e===0?n:n>>>e)&Kh),s=this.bitmap;return(s&a)===0?o:this.nodes[B8(s&a-1)].get(e+Gh,n,r,o)}update(e,n,r,o,a,s,i){r===void 0&&(r=Df(o));const l=(n===0?r:r>>>n)&Kh,c=1<<l,d=this.bitmap,u=(d&c)!==0;if(!u&&a===Gu)return this;const m=B8(d&c-1),h=this.nodes,y=u?h[m]:void 0,v=dN(y,e,n+Gh,r,o,a,s,i);if(v===y)return this;if(!u&&v&&h.length>=kAe)return wAe(e,h,d,l,v);if(u&&!v&&h.length===2&&j8(h[m^1]))return h[m^1];if(u&&v&&h.length===1&&j8(v))return v;const x=e&&e===this.ownerID,S=u?v?d:d^c:d|c,T=u?v?qW(h,m,v,x):AAe(h,m,x):CAe(h,m,v,x);return x?(this.bitmap=S,this.nodes=T,this):new yw(e,S,T)}}class cN{constructor(e,n,r){this.ownerID=e,this.count=n,this.nodes=r}get(e,n,r,o){n===void 0&&(n=Df(r));const a=(e===0?n:n>>>e)&Kh,s=this.nodes[a];return s?s.get(e+Gh,n,r,o):o}update(e,n,r,o,a,s,i){r===void 0&&(r=Df(o));const l=(n===0?r:r>>>n)&Kh,c=a===Gu,d=this.nodes,u=d[l];if(c&&!u)return this;const m=dN(u,e,n+Gh,r,o,a,s,i);if(m===u)return this;let h=this.count;if(!u)h++;else if(!m&&(h--,h<IAe))return TAe(e,d,h,l);const y=e&&e===this.ownerID,v=qW(d,l,m,y);return y?(this.count=h,this.nodes=v,this):new cN(e,h,v)}}class vw{constructor(e,n,r){this.ownerID=e,this.keyHash=n,this.entries=r}get(e,n,r,o){const a=this.entries;for(let s=0,i=a.length;s<i;s++)if(Wh(r,a[s][0]))return a[s][1];return o}update(e,n,r,o,a,s,i){r===void 0&&(r=Df(o));const l=a===Gu;if(r!==this.keyHash)return l?this:(Yl(i),Yl(s),pN(this,e,n,r,[o,a]));const c=this.entries;let d=0;const u=c.length;for(;d<u&&!Wh(o,c[d][0]);d++);const m=d<u;if(m?c[d][1]===a:l)return this;if(Yl(i),(l||!m)&&Yl(s),l&&u===2)return new im(e,this.keyHash,c[d^1]);const h=e&&e===this.ownerID,y=h?c:sN(c);return m?l?d===u-1?y.pop():y[d]=y.pop():y[d]=[o,a]:y.push([o,a]),h?(this.entries=y,this):new vw(e,this.keyHash,y)}}class im{constructor(e,n,r){this.ownerID=e,this.keyHash=n,this.entry=r}get(e,n,r,o){return Wh(r,this.entry[0])?this.entry[1]:o}update(e,n,r,o,a,s,i){const l=a===Gu,c=Wh(o,this.entry[0]);if(c?a===this.entry[1]:l)return this;if(Yl(i),l){Yl(s);return}return c?e&&e===this.ownerID?(this.entry[1]=a,this):new im(e,this.keyHash,[o,a]):(Yl(s),pN(this,e,n,Df(o),[o,a]))}}class qI{constructor(e,n,r){L(this,"_stack");this._type=n,this._reverse=r,this._stack=e._root&&D8(e._root)}[Symbol.iterator](){return this}next(){const e=this._type;let n=this._stack;for(;n;){const r=n.node,o=n.index++;let a;if(r.entry){if(o===0)return HI(e,r.entry)}else if("entries"in r&&r.entries){if(a=r.entries.length-1,o<=a)return HI(e,r.entries[this._reverse?a-o:o])}else if(a=r.nodes.length-1,o<=a){const s=r.nodes[this._reverse?a-o:o];if(s){if(s.entry)return HI(e,s.entry);n=this._stack=D8(s,n)}continue}n=this._stack=this._stack.__prev}return SAe()}}function HI(t,e){return xAe(t,e[0],e[1])}function D8(t,e){return{node:t,index:0,__prev:e}}const zW=0,UW=1,vAe=2;function xAe(t,e,n,r){const o=t===zW?e:t===UW?n:[e,n];return r?r.value=o:r={value:o,done:!1},r}function SAe(){return{value:void 0,done:!0}}function uN(t,e,n,r){const o=Object.create(iN.prototype);return o.size=t,o._root=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}let N8;function Mh(){return N8||(N8=uN(0))}function L8(t,e,n){let r,o;if(t._root){const a=R8(),s=R8();if(r=dN(t._root,t.__ownerID,0,void 0,e,n,a,s),!s.value)return t;o=t.size+(a.value?n===Gu?-1:1:0)}else{if(n===Gu)return t;o=1,r=new lN(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?uN(o,r):Mh()}function dN(t,e,n,r,o,a,s,i){return t?t.update(e,n,r,o,a,s,i):a===Gu?t:(Yl(i),Yl(s),new im(e,r,[o,a]))}function j8(t){return t.constructor===im||t.constructor===vw}function pN(t,e,n,r,o){if(t.keyHash===r)return new vw(e,r,[t.entry,o]);const a=(n===0?t.keyHash:t.keyHash>>>n)&Kh,s=(n===0?r:r>>>n)&Kh;let i;const l=a===s?[pN(t,e,n+Gh,r,o)]:(i=new im(e,r,o),a<s?[t,i]:[i,t]);return new yw(e,1<<a|1<<s,l)}function EAe(t,e,n,r){t||(t=new FW);let o=new im(t,Df(n),[n,r]);for(let a=0;a<e.length;a++){const s=e[a];o=o.update(t,0,void 0,s[0],s[1])}return o}function TAe(t,e,n,r){let o=0,a=0;const s=new Array(n);for(let i=0,l=1,c=e.length;i<c;i++,l<<=1){const d=e[i];d!==void 0&&i!==r&&(o|=l,s[a++]=d)}return new yw(t,o,s)}function wAe(t,e,n,r,o){let a=0;const s=new Array(lv);for(let i=0;n!==0;i++,n>>>=1)s[i]=n&1?e[a++]:void 0;return s[r]=o,new cN(t,a+1,s)}function B8(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function qW(t,e,n,r){const o=r?t:sN(t);return o[e]=n,o}function CAe(t,e,n,r){const o=t.length+1;if(r&&e+1===o)return t[e]=n,t;const a=new Array(o);let s=0;for(let i=0;i<o;i++)i===e?(a[i]=n,s=-1):a[i]=t[i+s];return a}function AAe(t,e,n){const r=t.length-1;if(n&&e===r)return t.pop(),t;const o=new Array(r);let a=0;for(let s=0;s<r;s++)s===e&&(a=1),o[s]=t[s+a];return o}const _Ae=lv/4,kAe=lv/2,IAe=lv/4;var N$,L$;class cM{constructor(e,n){L(this,"atoms");L(this,N$,"AtomMap");this.name=e;let r=Mh();n&&(r=r.withMutations(o=>{for(const[a,s]of n)o.set(a,Ir(`${e}:${String(a)}`,s))})),this.atoms=Ir(`${e}:atoms`,r)}getAtom(e){const n=this.atoms.__unsafe__getWithoutCapture().get(e);if(!n){this.atoms.get();return}return n}get(e){var r;const n=(r=this.getAtom(e))==null?void 0:r.get();return dt(n!==Va),n}__unsafe__getWithoutCapture(e){const n=this.atoms.__unsafe__getWithoutCapture().get(e);if(!n)return;const r=n.__unsafe__getWithoutCapture();return dt(r!==Va),r}has(e){const n=this.getAtom(e);return n?n.get()!==Va:!1}__unsafe__hasWithoutCapture(e){const n=this.atoms.__unsafe__getWithoutCapture().get(e);return n?(dt(n.__unsafe__getWithoutCapture()!==Va),!0):!1}set(e,n){const r=this.atoms.__unsafe__getWithoutCapture().get(e);return r?r.set(n):this.atoms.update(o=>o.set(e,Ir(`${this.name}:${String(e)}`,n))),this}update(e,n){const r=this.atoms.__unsafe__getWithoutCapture().get(e);if(!r)throw new Error(`AtomMap: key ${e} not found`);const o=r.__unsafe__getWithoutCapture();dt(o!==Va),r.set(n(o))}delete(e){const n=this.atoms.__unsafe__getWithoutCapture().get(e);return n?(Ui(()=>{n.set(Va),this.atoms.update(r=>r.delete(e))}),!0):!1}deleteMany(e){return Ui(()=>{const n=[],r=this.atoms.get().withMutations(o=>{for(const a of e){const s=o.get(a);if(!s)continue;const i=s.get();dt(i!==Va),n.push([a,i]),o.delete(a),s.set(Va)}});return n.length&&this.atoms.set(r),n})}clear(){return Ui(()=>{for(const e of this.atoms.__unsafe__getWithoutCapture().values())e.set(Va);this.atoms.set(Mh())})}*entries(){for(const[e,n]of this.atoms.get()){const r=n.get();dt(r!==Va),yield[e,r]}}*keys(){for(const e of this.atoms.get().keys())yield e}*values(){for(const e of this.atoms.get().values()){const n=e.get();dt(n!==Va),yield n}}get size(){return this.atoms.get().size}forEach(e,n){for(const[r,o]of this.entries())e.call(n,o,r,this)}[(L$=Symbol.iterator,N$=Symbol.toStringTag,L$)](){return this.entries()}}class b1{constructor(e){L(this,"nextValue");L(this,"diff");this.previousValue=e}get(){var r,o,a,s;const e=((o=(r=this.diff)==null?void 0:r.removed)==null?void 0:o.size)??0,n=((s=(a=this.diff)==null?void 0:a.added)==null?void 0:s.size)??0;if(!(e===0&&n===0))return{value:this.nextValue,diff:this.diff}}_add(e,n){var r,o;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),this.diff??(this.diff={}),n?(r=this.diff.removed)==null||r.delete(e):((o=this.diff).added??(o.added=new Set),this.diff.added.add(e))}add(e){var o,a,s;const n=this.previousValue.has(e);if(n)return((a=(o=this.diff)==null?void 0:o.removed)==null?void 0:a.has(e))?this._add(e,n):void 0;(s=this.nextValue)!=null&&s.has(e)||this._add(e,n)}_remove(e,n){var r,o;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),this.diff??(this.diff={}),n?((r=this.diff).removed??(r.removed=new Set),this.diff.removed.add(e)):(o=this.diff.added)==null||o.delete(e)}remove(e){var o,a,s,i;const n=this.previousValue.has(e);if(!n)return((a=(o=this.diff)==null?void 0:o.added)==null?void 0:a.has(e))?this._remove(e,n):void 0;(i=(s=this.diff)==null?void 0:s.removed)!=null&&i.has(e)||this._remove(e,n)}}function PAe(t){const e=[];for(let n=t.length-1;n>=0;n--){const r=t[n];if("id"in r)e.unshift(r);else{const o=r.dependsOn,a=e[0];a&&(e[0]={...a,dependsOn:o.concat(a.dependsOn??[])})}}return e}function Rh({sequence:t,sequenceId:e,retroactive:n=!0}){const r={sequenceId:e,retroactive:n,sequence:PAe(t)};return HW(r),r}function mi(t,e){return Object.fromEntries(Ts(e).map(([n,r])=>[n,`${t}/${r}`]))}function Xi(t){const e=t.sequenceId;return Rh({sequenceId:e,retroactive:t.retroactive??!0,sequence:t.sequence.map(n=>"id"in n?{...n,scope:"record",filter:r=>{var o,a;return r.typeName===t.recordType&&(((o=n.filter)==null?void 0:o.call(n,r))??!0)&&(((a=t.filter)==null?void 0:a.call(t,r))??!0)}}:n)})}function OAe(t){if(t.length===0)return[];const e=new Map(t.map(l=>[l.id,l])),n=new Map,r=new Map,o=new Map;for(const l of t)r.set(l.id,0),n.set(l.id,new Set),o.set(l.id,new Set);for(const l of t){const{version:c,sequenceId:d}=SE(l.id),u=`${d}/${c-1}`;if(e.has(u)&&(n.get(u).add(l.id),r.set(l.id,r.get(l.id)+1)),l.dependsOn)for(const m of l.dependsOn)e.has(m)&&(n.get(m).add(l.id),o.get(l.id).add(m),r.set(l.id,r.get(l.id)+1))}const a=t.filter(l=>r.get(l.id)===0),s=[],i=new Set;for(;a.length>0;){let l,c=-1/0;for(const u of a){let m=0;for(const h of n.get(u.id)||[])i.has(h)||(m+=1,o.get(h).has(u.id)&&(m+=100));(m>c||m===c&&u.id.localeCompare((l==null?void 0:l.id)??"")<0)&&(l=u,c=m)}const d=l;a.splice(a.indexOf(d),1),s.push(d),i.add(d.id);for(const u of n.get(d.id)||[])i.has(u)||(r.set(u,r.get(u)-1),r.get(u)===0&&a.push(e.get(u)))}if(s.length!==t.length){const l=t.filter(c=>!i.has(c.id));dt(!1,`Circular dependency in migrations: ${l[0].id}`)}return s}function SE(t){const[e,n]=t.split("/");return{sequenceId:e,version:parseInt(n)}}function F8(t,e){e&&dt(t.startsWith(e+"/"),`Every migration in sequence '${e}' must have an id starting with '${e}/'. Got invalid id: '${t}'`),dt(t.match(/^(.*?)\/(0|[1-9]\d*)$/),`Invalid migration id: '${t}'`)}function HW(t){if(dt(!t.sequenceId.includes("/"),`sequenceId cannot contain a '/', got ${t.sequenceId}`),dt(t.sequenceId.length,"sequenceId must be a non-empty string"),t.sequence.length===0)return;F8(t.sequence[0].id,t.sequenceId);let e=SE(t.sequence[0].id).version;dt(e===1,`Expected the first migrationId to be '${t.sequenceId}/1' but got '${t.sequence[0].id}'`);for(let n=1;n<t.sequence.length;n++){const r=t.sequence[n].id;F8(r,t.sequenceId);const o=SE(r).version;dt(o===e+1,`Migration id numbers must increase in increments of 1, expected ${t.sequenceId}/${e+1} but got '${t.sequence[n].id}'`),e=o}}var Fd=(t=>(t.IncompatibleSubtype="incompatible-subtype",t.UnknownType="unknown-type",t.TargetVersionTooNew="target-version-too-new",t.TargetVersionTooOld="target-version-too-old",t.MigrationError="migration-error",t.UnrecognizedSubtype="unrecognized-subtype",t))(Fd||{});function EE(){return{added:{},updated:{},removed:{}}}function uM(t){const e={added:t.removed,removed:t.added,updated:{}};for(const[n,r]of Object.values(t.updated))e.updated[n.id]=[r,n];return e}function $W(t){return Object.keys(t.added).length===0&&Object.keys(t.updated).length===0&&Object.keys(t.removed).length===0}function fN(t,e){const n=e!=null&&e.mutateFirstDiff?t[0]:{added:{},removed:{},updated:{}};return By(n,t),n}function By(t,e){for(const n of e){for(const[r,o]of Ts(n.added))if(t.removed[r]){const a=t.removed[r];delete t.removed[r],a!==o&&(t.updated[r]=[a,o])}else t.added[r]=o;for(const[r,[o,a]]of Ts(n.updated)){if(t.added[r]){t.added[r]=a,delete t.updated[r],delete t.removed[r];continue}if(t.updated[r]){t.updated[r]=[t.updated[r][0],a],delete t.removed[r];continue}t.updated[r]=n.updated[r],delete t.removed[r]}for(const[r,o]of Ts(n.removed))t.added[r]?delete t.added[r]:t.updated[r]?(t.removed[r]=t.updated[r][0],delete t.updated[r]):t.removed[r]=o}}class xw{constructor(e,n){L(this,"createDefaultProperties");L(this,"validator");L(this,"ephemeralKeys");L(this,"ephemeralKeySet");L(this,"scope");this.typeName=e,this.createDefaultProperties=n.createDefaultProperties,this.validator=n.validator??{validate:o=>o},this.scope=n.scope??"document",this.ephemeralKeys=n.ephemeralKeys;const r=new Set;if(n.ephemeralKeys)for(const[o,a]of Ts(n.ephemeralKeys))a&&r.add(o);this.ephemeralKeySet=r}create(e){const n={...this.createDefaultProperties(),id:"id"in e?e.id:this.createId()};for(const[r,o]of Object.entries(e))o!==void 0&&(n[r]=o);return n.typeName=this.typeName,n}clone(e){return{...bo(e),id:this.createId()}}createId(e){return this.typeName+":"+(e??Ln())}parseId(e){if(!this.isId(e))throw new Error(`ID "${e}" is not a valid ID for type "${this.typeName}"`);return e.slice(this.typeName.length+1)}isInstance(e){return(e==null?void 0:e.typeName)===this.typeName}isId(e){if(!e)return!1;for(let n=0;n<this.typeName.length;n++)if(e[n]!==this.typeName[n])return!1;return e[this.typeName.length]===":"}withDefaultProperties(e){return new xw(this.typeName,{createDefaultProperties:e,validator:this.validator,scope:this.scope,ephemeralKeys:this.ephemeralKeys})}validate(e,n){return n&&this.validator.validateUsingKnownGoodVersion?this.validator.validateUsingKnownGoodVersion(n,e):this.validator.validate(e)}}function Qc(t,e){return new xw(t,{createDefaultProperties:()=>({}),validator:e.validator,scope:e.scope,ephemeralKeys:e.ephemeralKeys})}function MAe(t){if(t.length===0)return new Set;const e=t[0],n=t.slice(1),r=new Set;for(const o of e)n.every(a=>a.has(o))&&r.add(o);return r}function RAe(t,e){const n={};for(const r of e)t.has(r)||(n.added??(n.added=new Set),n.added.add(r));for(const r of t)e.has(r)||(n.removed??(n.removed=new Set),n.removed.add(r));return n.added||n.removed?n:void 0}function VW(t){return typeof t!="object"||t===null?!1:"eq"in t||"neq"in t||"gt"in t}function GW(t,e=""){const n=[];for(const[r,o]of Object.entries(t)){const a=e?`${e}\\${r}`:r;VW(o)?n.push({path:a,matcher:o}):typeof o=="object"&&o!==null&&n.push(...GW(o,a))}return n}function dM(t,e){for(const[n,r]of Object.entries(t)){const o=e[n];if(VW(r)){if("eq"in r&&o!==r.eq||"neq"in r&&o===r.neq||"gt"in r&&(typeof o!="number"||o<=r.gt))return!1;continue}if(typeof o!="object"||o===null||!dM(r,o))return!1}return!0}function z8(t,e,n){const r=GW(n),o=Object.fromEntries(r.map(({path:a})=>[a,new Set]));for(const{path:a,matcher:s}of r){const i=t.index(e,a);if("eq"in s){const l=i.get().get(s.eq);if(l)for(const c of l)o[a].add(c)}else if("neq"in s){for(const[l,c]of i.get())if(l!==s.neq)for(const d of c)o[a].add(d)}else if("gt"in s){for(const[l,c]of i.get())if(typeof l=="number"&&l>s.gt)for(const d of c)o[a].add(d)}if(o[a].size===0)return new Set}return MAe(Object.values(o))}class DAe{constructor(e,n){L(this,"indexCache",new Map);L(this,"historyCache",new Map);this.recordMap=e,this.history=n}getAllIdsForType(e){const n=new Set;for(const r of this.recordMap.values())r.typeName===e&&n.add(r.id);return n}getRecordById(e,n){const r=this.recordMap.get(n);if(r&&r.typeName===e)return r}getNestedValue(e,n){let r=e;for(const o of n){if(r==null||typeof r!="object")return;r=r[o]}return r}filterHistory(e){if(this.historyCache.has(e))return this.historyCache.get(e);const n=ke("filterHistory:"+e,(r,o)=>{if(Tf(r))return this.history.get();const a=this.history.getDiffSince(o);if(a===zi)return this.history.get();const s={added:{},removed:{},updated:{}};let i=0,l=0,c=0;for(const d of a){for(const u of oo(d.added))if(u.typeName===e)if(s.removed[u.id]){const m=s.removed[u.id];delete s.removed[u.id],l--,m!==u&&(s.updated[u.id]=[m,u],c++)}else s.added[u.id]=u,i++;for(const[u,m]of oo(d.updated))m.typeName===e&&(s.added[m.id]?s.added[m.id]=m:s.updated[m.id]?s.updated[m.id]=[s.updated[m.id][0],m]:(s.updated[m.id]=[u,m],c++));for(const u of oo(d.removed))u.typeName===e&&(s.added[u.id]?(delete s.added[u.id],i--):s.updated[u.id]?(s.removed[u.id]=s.updated[u.id][0],delete s.updated[u.id],c--,l++):(s.removed[u.id]=u,l++))}return i||l||c?iy(this.history.get(),s):r},{historyLength:100});return this.historyCache.set(e,n),n}index(e,n){const r=e+":"+n;if(this.indexCache.has(r))return this.indexCache.get(r);const o=this.__uncached_createIndex(e,n);return this.indexCache.set(r,o),o}__uncached_createIndex(e,n){const r=this.filterHistory(e),o=n.split("\\"),a=o.length>1?i=>this.getNestedValue(i,o):i=>i[n],s=()=>{r.get();const i=new Map;for(const l of this.recordMap.values())if(l.typeName===e){const c=a(l);c!==void 0&&(i.has(c)||i.set(c,new Set),i.get(c).add(l.id))}return i};return ke("index:"+e+":"+n,(i,l)=>{if(Tf(i))return s();const c=r.getDiffSince(l);if(c===zi)return s();const d=new Map,u=(v,x)=>{let S=d.get(v);S||(S=new b1(i.get(v)??new Set)),S.add(x),d.set(v,S)},m=(v,x)=>{let S=d.get(v);S||(S=new b1(i.get(v)??new Set)),S.remove(x),d.set(v,S)};for(const v of c){for(const x of oo(v.added))if(x.typeName===e){const S=a(x);S!==void 0&&u(S,x.id)}for(const[x,S]of oo(v.updated))if(S.typeName===e){const T=a(x),C=a(S);T!==C&&(T!==void 0&&m(T,S.id),C!==void 0&&u(C,S.id))}for(const x of oo(v.removed))if(x.typeName===e){const S=a(x);S!==void 0&&m(S,x.id)}}let h,y;for(const[v,x]of d){const S=x.get();S&&(h||(h=new Map(i)),y||(y=new Map),S.value.size===0?h.delete(v):h.set(v,S.value),y.set(v,S.diff))}return h&&y?iy(h,y):i},{historyLength:100})}record(e,n=()=>({}),r="record:"+e+(n?":"+n.toString():"")){const o=this.ids(e,n,r);return ke(r,()=>{for(const a of o.get())return this.recordMap.get(a)})}records(e,n=()=>({}),r="records:"+e+(n?":"+n.toString():"")){const o=this.ids(e,n,"ids:"+r);return ke(r,()=>Array.from(o.get(),a=>this.recordMap.get(a)),{isEqual:gE})}ids(e,n=()=>({}),r="ids:"+e+(n?":"+n.toString():"")){const o=this.filterHistory(e),a=()=>{o.get();const l=n();return Object.keys(l).length===0?this.getAllIdsForType(e):z8(this,e,l)},s=l=>{const c=a(),d=RAe(l,c);return d?iy(c,d):l},i=ke("ids_query:"+r,n,{isEqual:Ap});return ke("query:"+r,(l,c)=>{const d=i.get();if(Tf(l))return a();if(c<i.lastChangedEpoch)return s(l);const u=o.getDiffSince(c);if(u===zi)return s(l);const m=new b1(l);for(const y of u){for(const v of oo(y.added))v.typeName===e&&dM(d,v)&&m.add(v.id);for(const[v,x]of oo(y.updated))x.typeName===e&&(dM(d,x)?m.add(x.id):m.remove(x.id));for(const v of oo(y.removed))v.typeName===e&&m.remove(v.id)}const h=m.get();return h?iy(h.value,h.diff):l},{historyLength:50})}exec(e,n){const r=z8(this,e,n);return r.size===0?io:Array.from(r,o=>this.recordMap.get(o))}}class NAe{constructor(e){L(this,"_beforeCreateHandlers",{});L(this,"_afterCreateHandlers",{});L(this,"_beforeChangeHandlers",{});L(this,"_afterChangeHandlers",{});L(this,"_beforeDeleteHandlers",{});L(this,"_afterDeleteHandlers",{});L(this,"_operationCompleteHandlers",[]);L(this,"_isEnabled",!0);this.store=e}isEnabled(){return this._isEnabled}setIsEnabled(e){this._isEnabled=e}handleBeforeCreate(e,n){if(!this._isEnabled)return e;const r=this._beforeCreateHandlers[e.typeName];if(r){let o=e;for(const a of r)o=a(o,n);return o}return e}handleAfterCreate(e,n){if(!this._isEnabled)return;const r=this._afterCreateHandlers[e.typeName];if(r)for(const o of r)o(e,n)}handleBeforeChange(e,n,r){if(!this._isEnabled)return n;const o=this._beforeChangeHandlers[n.typeName];if(o){let a=n;for(const s of o)a=s(e,a,r);return a}return n}handleAfterChange(e,n,r){if(!this._isEnabled)return;const o=this._afterChangeHandlers[n.typeName];if(o)for(const a of o)a(e,n,r)}handleBeforeDelete(e,n){if(!this._isEnabled)return!0;const r=this._beforeDeleteHandlers[e.typeName];if(r){for(const o of r)if(o(e,n)===!1)return!1}return!0}handleAfterDelete(e,n){if(!this._isEnabled)return;const r=this._afterDeleteHandlers[e.typeName];if(r)for(const o of r)o(e,n)}handleOperationComplete(e){if(this._isEnabled)for(const n of this._operationCompleteHandlers)n(e)}register(e){const n=[];for(const[r,o]of Object.entries(e))o!=null&&o.beforeCreate&&n.push(this.registerBeforeCreateHandler(r,o.beforeCreate)),o!=null&&o.afterCreate&&n.push(this.registerAfterCreateHandler(r,o.afterCreate)),o!=null&&o.beforeChange&&n.push(this.registerBeforeChangeHandler(r,o.beforeChange)),o!=null&&o.afterChange&&n.push(this.registerAfterChangeHandler(r,o.afterChange)),o!=null&&o.beforeDelete&&n.push(this.registerBeforeDeleteHandler(r,o.beforeDelete)),o!=null&&o.afterDelete&&n.push(this.registerAfterDeleteHandler(r,o.afterDelete));return()=>{for(const r of n)r()}}registerBeforeCreateHandler(e,n){return this._beforeCreateHandlers[e]||(this._beforeCreateHandlers[e]=[]),this._beforeCreateHandlers[e].push(n),()=>sf(this._beforeCreateHandlers[e],n)}registerAfterCreateHandler(e,n){return this._afterCreateHandlers[e]||(this._afterCreateHandlers[e]=[]),this._afterCreateHandlers[e].push(n),()=>sf(this._afterCreateHandlers[e],n)}registerBeforeChangeHandler(e,n){return this._beforeChangeHandlers[e]||(this._beforeChangeHandlers[e]=[]),this._beforeChangeHandlers[e].push(n),()=>sf(this._beforeChangeHandlers[e],n)}registerAfterChangeHandler(e,n){return this._afterChangeHandlers[e]||(this._afterChangeHandlers[e]=[]),this._afterChangeHandlers[e].push(n),()=>sf(this._afterChangeHandlers[e],n)}registerBeforeDeleteHandler(e,n){return this._beforeDeleteHandlers[e]||(this._beforeDeleteHandlers[e]=[]),this._beforeDeleteHandlers[e].push(n),()=>sf(this._beforeDeleteHandlers[e],n)}registerAfterDeleteHandler(e,n){return this._afterDeleteHandlers[e]||(this._afterDeleteHandlers[e]=[]),this._afterDeleteHandlers[e].push(n),()=>sf(this._afterDeleteHandlers[e],n)}registerOperationCompleteHandler(e){return this._operationCompleteHandlers.push(e),()=>sf(this._operationCompleteHandlers,e)}}function sf(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}class mN{constructor(e){L(this,"id");L(this,"records");L(this,"history",Ir("history",0,{historyLength:1e3}));L(this,"query");L(this,"listeners",new Set);L(this,"historyAccumulator",new jAe);L(this,"historyReactor");L(this,"schema");L(this,"props");L(this,"scopedTypes");L(this,"sideEffects",new NAe(this));L(this,"isMergingRemoteChanges",!1);L(this,"_integrityChecker");L(this,"_isPossiblyCorrupted",!1);L(this,"pendingAfterEvents",null);L(this,"_isInAtomicOp",!1);const{initialData:n,schema:r,id:o}=e;this.id=o??Ln(),this.schema=r,this.props=e.props,n?this.records=new cM("store",Ts(n).map(([a,s])=>[a,this.schema.validateRecord(this,s,"initialize",null)])):this.records=new cM("store"),this.query=new DAe(this.records,this.history),this.historyReactor=VCe("Store.historyReactor",()=>{this.history.get(),this._flushHistory()},{scheduleEffect:a=>this.cancelHistoryReactor=$D(a)}),this.scopedTypes={document:new Set(oo(this.schema.types).filter(a=>a.scope==="document").map(a=>a.typeName)),session:new Set(oo(this.schema.types).filter(a=>a.scope==="session").map(a=>a.typeName)),presence:new Set(oo(this.schema.types).filter(a=>a.scope==="presence").map(a=>a.typeName))}}cancelHistoryReactor(){}_flushHistory(){if(this.historyAccumulator.hasChanges()){const e=this.historyAccumulator.flush();for(const{changes:n,source:r}of e){let o=null,a=null,s=null;for(const{onHistory:i,filters:l}of this.listeners)if(!(l.source!=="all"&&l.source!==r))if(l.scope!=="all")if(l.scope==="document"){if(a??(a=this.filterChangesByScope(n,"document")),!a)continue;i({changes:a,source:r})}else if(l.scope==="session"){if(o??(o=this.filterChangesByScope(n,"session")),!o)continue;i({changes:o,source:r})}else{if(s??(s=this.filterChangesByScope(n,"presence")),!s)continue;i({changes:s,source:r})}else i({changes:n,source:r})}}}dispose(){this.cancelHistoryReactor()}filterChangesByScope(e,n){const r={added:jy(e.added,(o,a)=>this.scopedTypes[n].has(a.typeName)),updated:jy(e.updated,(o,a)=>this.scopedTypes[n].has(a[1].typeName)),removed:jy(e.removed,(o,a)=>this.scopedTypes[n].has(a.typeName))};return Object.keys(r.added).length===0&&Object.keys(r.updated).length===0&&Object.keys(r.removed).length===0?null:r}updateHistory(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),this.listeners.size===0&&this.historyAccumulator.clear(),this.history.set(this.history.get()+1,e)}validate(e){this.allRecords().forEach(n=>this.schema.validateRecord(this,n,e,null))}put(e,n){this.atomic(()=>{const r={},o={};let a,s=!1;const i=this.isMergingRemoteChanges?"remote":"user";for(let l=0,c=e.length;l<c;l++){a=e[l];const d=this.records.__unsafe__getWithoutCapture(a.id);if(d){if(a=this.sideEffects.handleBeforeChange(d,a,i),this.schema.validateRecord(this,a,n??"updateRecord",d)===d)continue;a=a,this.records.set(a.id,a),s=!0,r[a.id]=[d,a],this.addDiffForAfterEvent(d,a)}else a=this.sideEffects.handleBeforeCreate(a,i),s=!0,a=this.schema.validateRecord(this,a,n??"createRecord",null),a=a,o[a.id]=a,this.addDiffForAfterEvent(null,a),this.records.set(a.id,a)}s&&this.updateHistory({added:o,updated:r,removed:{}})})}remove(e){this.atomic(()=>{const n=new Set(e),r=this.isMergingRemoteChanges?"remote":"user";if(this.sideEffects.isEnabled())for(const s of e){const i=this.records.__unsafe__getWithoutCapture(s);i&&this.sideEffects.handleBeforeDelete(i,r)===!1&&n.delete(s)}const o=this.records.deleteMany(n);if(o.length===0)return;const a={};for(const[s,i]of o)a[s]=i,this.addDiffForAfterEvent(i,null);this.updateHistory({added:{},updated:{},removed:a})})}get(e){return this.records.get(e)}unsafeGetWithoutCapture(e){return this.records.__unsafe__getWithoutCapture(e)}serialize(e="document"){const n={};for(const[r,o]of this.records)(e==="all"||this.scopedTypes[e].has(o.typeName))&&(n[r]=o);return n}getStoreSnapshot(e="document"){return{store:this.serialize(e),schema:this.schema.serialize()}}migrateSnapshot(e){const n=this.schema.migrateStoreSnapshot(e);if(n.type==="error")throw new Error(`Failed to migrate snapshot: ${n.reason}`);return{store:n.value,schema:this.schema.serialize()}}loadStoreSnapshot(e){const n=this.schema.migrateStoreSnapshot(e);if(n.type==="error")throw new Error(`Failed to migrate snapshot: ${n.reason}`);const r=this.sideEffects.isEnabled();try{this.sideEffects.setIsEnabled(!1),this.atomic(()=>{this.clear(),this.put(Object.values(n.value)),this.ensureStoreIsUsable()})}finally{this.sideEffects.setIsEnabled(r)}}allRecords(){return Array.from(this.records.values())}clear(){this.remove(Array.from(this.records.keys()))}update(e,n){const r=this.unsafeGetWithoutCapture(e);if(!r){console.error(`Record ${e} not found. This is probably an error`);return}this.put([n(r)])}has(e){return this.records.has(e)}listen(e,n){this._flushHistory();const r={onHistory:e,filters:{source:(n==null?void 0:n.source)??"all",scope:(n==null?void 0:n.scope)??"all"}};return this.historyReactor.scheduler.isActivelyListening||(this.historyReactor.start(),this.historyReactor.scheduler.execute()),this.listeners.add(r),()=>{this.listeners.delete(r),this.listeners.size===0&&this.historyReactor.stop()}}mergeRemoteChanges(e){if(this.isMergingRemoteChanges)return e();if(this._isInAtomicOp)throw new Error("Cannot merge remote changes while in atomic operation");try{this.atomic(e,!0,!0)}finally{this.ensureStoreIsUsable()}}extractingChanges(e){const n=[],r=this.historyAccumulator.addInterceptor(o=>n.push(o.changes));try{return Ui(e),fN(n)}finally{r()}}applyDiff(e,{runCallbacks:n=!0,ignoreEphemeralKeys:r=!1}={}){this.atomic(()=>{const o=oo(e.added);for(const[s,i]of oo(e.updated)){const l=this.schema.getType(i.typeName);if(r&&l.ephemeralKeySet.size){const c=this.get(i.id);if(!c){o.push(i);continue}let d=null;for(const[u,m]of Object.entries(i))l.ephemeralKeySet.has(u)||Object.is(m,vo(c,u))||(d||(d={...c}),d[u]=m);d&&o.push(d)}else o.push(i)}const a=Ly(e.removed);o.length&&this.put(o),a.length&&this.remove(a)},n)}createCache(e){const n=new as;return{get:r=>{const o=this.records.getAtom(r);if(o)return n.get(o,()=>e(r,o)).get()}}}createComputedCache(e,n,r){return this.createCache((o,a)=>{const s=r!=null&&r.areRecordsEqual?ke(`${e}:${o}:isEqual`,()=>a.get(),{isEqual:r.areRecordsEqual}):a;return ke(e+":"+o,()=>n(s.get()),{isEqual:r==null?void 0:r.areResultsEqual})})}ensureStoreIsUsable(){this.atomic(()=>{var e;this._integrityChecker??(this._integrityChecker=this.schema.createIntegrityChecker(this)),(e=this._integrityChecker)==null||e.call(this)})}markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}addDiffForAfterEvent(e,n){if(dt(this.pendingAfterEvents,"must be in event operation"),e===n||(e&&n&&dt(e.id===n.id),!e&&!n))return;const r=(e||n).id,o=this.pendingAfterEvents.get(r);o?o.after=n:this.pendingAfterEvents.set(r,{before:e,after:n})}flushAtomicCallbacks(e){let n=0,r=e?"remote":"user";for(;this.pendingAfterEvents;){const o=this.pendingAfterEvents;if(this.pendingAfterEvents=null,!!this.sideEffects.isEnabled()){if(n++,n>100)throw new Error("Maximum store update depth exceeded, bailing out");for(const{before:a,after:s}of o.values())a&&s&&a!==s&&!Ap(a,s)?this.sideEffects.handleAfterChange(a,s,r):a&&!s?this.sideEffects.handleAfterDelete(a,r):!a&&s&&this.sideEffects.handleAfterCreate(s,r);this.pendingAfterEvents?r="user":this.sideEffects.handleOperationComplete(r)}}}atomic(e,n=!0,r=!1){return Ui(()=>{if(this._isInAtomicOp){this.pendingAfterEvents||(this.pendingAfterEvents=new Map);const a=this.sideEffects.isEnabled();dt(!r,"cannot call mergeRemoteChanges while in atomic operation");try{return a&&!n&&this.sideEffects.setIsEnabled(!1),e()}finally{this.sideEffects.setIsEnabled(a)}}this.pendingAfterEvents=new Map;const o=this.sideEffects.isEnabled();this.sideEffects.setIsEnabled(n??o),this._isInAtomicOp=!0,r&&(this.isMergingRemoteChanges=!0);try{const a=e();return this.isMergingRemoteChanges=!1,this.flushAtomicCallbacks(r),a}finally{this.pendingAfterEvents=null,this.sideEffects.setIsEnabled(o),this._isInAtomicOp=!1,this.isMergingRemoteChanges=!1}})}addHistoryInterceptor(e){return this.historyAccumulator.addInterceptor(n=>e(n,this.isMergingRemoteChanges?"remote":"user"))}}function LAe(t){if(t.length===0)return[];const e=[];let n=[t[0]],r;for(let o=1,a=t.length;o<a;o++)r=t[o],n[0].source!==r.source&&(e.push(n),n=[]),n.push(r);return e.push(n),e.map(o=>({source:o[0].source,changes:fN(o.map(a=>a.changes))}))}class jAe{constructor(){L(this,"_history",[]);L(this,"_interceptors",new Set)}addInterceptor(e){return this._interceptors.add(e),()=>{this._interceptors.delete(e)}}add(e){this._history.push(e);for(const n of this._interceptors)n(e)}flush(){const e=LAe(this._history);return this._history=[],e}clear(){this._history=[]}hasChanges(){return this._history.length>0}}function Sw(t,e,n){const r=new as;return{get(o,a){return r.get(o,()=>(o instanceof mN?o:o.store).createComputedCache(t,l=>e(o,l),n)).get(a)}}}function BAe(t){if(t.schemaVersion>2||t.schemaVersion<1)return zc.err("Bad schema version");if(t.schemaVersion===2)return zc.ok(t);const e={schemaVersion:2,sequences:{"com.tldraw.store":t.storeVersion}};for(const[n,r]of Object.entries(t.recordVersions))if(e.sequences[`com.tldraw.${n}`]=r.version,"subTypeKey"in r)for(const[o,a]of Object.entries(r.subTypeVersions))e.sequences[`com.tldraw.${n}.${o}`]=a;return zc.ok(e)}class hN{constructor(e,n){L(this,"migrations",{});L(this,"sortedMigrations");L(this,"migrationCache",new WeakMap);var o;this.types=e,this.options=n;for(const a of n.migrations??[])dt(!this.migrations[a.sequenceId],`Duplicate migration sequenceId ${a.sequenceId}`),HW(a),this.migrations[a.sequenceId]=a;const r=Object.values(this.migrations).flatMap(a=>a.sequence);this.sortedMigrations=OAe(r);for(const a of this.sortedMigrations)if((o=a.dependsOn)!=null&&o.length)for(const s of a.dependsOn){const i=r.find(l=>l.id===s);dt(i,`Migration '${a.id}' depends on missing migration '${s}'`)}}static create(e,n){return new hN(e,n??{})}validateRecord(e,n,r,o){try{const a=vo(this.types,n.typeName);if(!a)throw new Error(`Missing definition for record type ${n.typeName}`);return a.validate(n,o??void 0)}catch(a){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:n,phase:r,recordBefore:o,error:a});throw a}}getMigrationsSince(e){const n=this.migrationCache.get(e);if(n)return n;const r=BAe(e);if(!r.ok)return this.migrationCache.set(e,r),r;const o=r.value,a=new Set(Object.keys(o.sequences).filter(l=>this.migrations[l]));for(const l in this.migrations)o.sequences[l]===void 0&&this.migrations[l].retroactive&&a.add(l);if(a.size===0){const l=zc.ok([]);return this.migrationCache.set(e,l),l}const s=new Set;for(const l of a){const c=o.sequences[l];if(typeof c!="number"&&this.migrations[l].retroactive||c===0){for(const m of this.migrations[l].sequence)s.add(m.id);continue}const d=`${l}/${c}`,u=this.migrations[l].sequence.findIndex(m=>m.id===d);if(u===-1){const m=zc.err("Incompatible schema?");return this.migrationCache.set(e,m),m}for(const m of this.migrations[l].sequence.slice(u+1))s.add(m.id)}const i=zc.ok(this.sortedMigrations.filter(({id:l})=>s.has(l)));return this.migrationCache.set(e,i),i}migratePersistedRecord(e,n,r="up"){const o=this.getMigrationsSince(n);if(!o.ok)return console.error("Error migrating record",o.error),{type:"error",reason:Fd.MigrationError};let a=o.value;if(a.length===0)return{type:"success",value:e};if(a.some(s=>s.scope==="store"))return{type:"error",reason:r==="down"?Fd.TargetVersionTooOld:Fd.TargetVersionTooNew};if(r==="down"){if(!a.every(s=>s.down))return{type:"error",reason:Fd.TargetVersionTooOld};a=a.slice().reverse()}e=bo(e);try{for(const s of a){if(s.scope==="store")throw new Error;if(!(s.filter?s.filter(e):!0))continue;const l=s[r](e);l&&(e=bo(l))}}catch(s){return console.error("Error migrating record",s),{type:"error",reason:Fd.MigrationError}}return{type:"success",value:e}}migrateStoreSnapshot(e,n){let{store:r}=e;const o=this.getMigrationsSince(e.schema);if(!o.ok)return console.error("Error migrating store",o.error),{type:"error",reason:Fd.MigrationError};const a=o.value;if(a.length===0)return{type:"success",value:r};n!=null&&n.mutateInputStore||(r=bo(r));try{for(const s of a)if(s.scope==="record")for(const[i,l]of Object.entries(r)){if(!(s.filter?s.filter(l):!0))continue;const d=s.up(l);d&&(r[i]=d)}else if(s.scope==="store"){const i=s.up(r);i&&(r=i)}else wn(s)}catch(s){return console.error("Error migrating store",s),{type:"error",reason:Fd.MigrationError}}return{type:"success",value:r}}createIntegrityChecker(e){var n,r;return((r=(n=this.options).createIntegrityChecker)==null?void 0:r.call(n,e))??void 0}serialize(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:e,sequence:n})=>[e,n.length?SE(n.at(-1).id).version:0]))}}serializeEarliestVersion(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:e})=>[e,0]))}}getType(e){const n=vo(this.types,e);return dt(n,"record type does not exists"),n}}Cp("@tldraw/store","4.2.0","esm");function FAe(t){if(!t.length)return null;let e="";for(const n of t)typeof n=="number"?e+=`.${n}`:n.startsWith("(")?e.endsWith(")")?e=`${e.slice(0,-1)}, ${n.slice(1)}`:e+=n:e+=`.${n}`;return e=e.replace(/id = [^,]+, /,"").replace(/id = [^)]+/,""),e.startsWith(".")?e.slice(1):e}class kn extends Error{constructor(n,r=[]){const o=FAe(r),a=n.split(`
`).map((s,i)=>i===0?s:`  ${s}`).join(`
`);super(r?`At ${o}: ${a}`:a);L(this,"name","ValidationError");this.rawMessage=n,this.path=r}}function ii(t,e){try{return e()}catch(n){throw n instanceof kn?new kn(n.rawMessage,[t,...n.path]):new kn(n.toString(),[t])}}function up(t){if(t===null)return"null";if(Array.isArray(t))return"an array";const e=typeof t;switch(e){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${e}`;case"object":return`an ${e}`;case"undefined":return"undefined";default:wn(e)}}class ls{constructor(e,n){this.validationFn=e,this.validateUsingKnownGoodVersionFn=n}validate(e){return this.validationFn(e)}validateUsingKnownGoodVersion(e,n){return Object.is(e,n)?e:this.validateUsingKnownGoodVersionFn?this.validateUsingKnownGoodVersionFn(e,n):this.validate(n)}isValid(e){try{return this.validate(e),!0}catch{return!1}}nullable(){return GAe(this)}optional(){return WW(this)}refine(e){return new ls(n=>e(this.validate(n)),(n,r)=>{const o=this.validateUsingKnownGoodVersion(n,r);return Object.is(n,o)?n:e(o)})}check(e,n){return typeof e=="string"?this.refine(r=>(ii(`(check ${e})`,()=>n(r)),r)):this.refine(r=>(e(r),r))}}class zAe extends ls{constructor(e){super(n=>{const r=U8.validate(n);for(let o=0;o<r.length;o++)ii(o,()=>e.validate(r[o]));return r},(n,r)=>{if(!e.validateUsingKnownGoodVersion)return this.validate(r);const o=U8.validate(r);let a=n.length!==o.length;for(let s=0;s<o.length;s++){const i=o[s];if(s>=n.length){a=!0,ii(s,()=>e.validate(i));continue}if(Object.is(n[s],i))continue;const l=ii(s,()=>e.validateUsingKnownGoodVersion(n[s],i));Object.is(l,n[s])||(a=!0)}return a?r:n}),this.itemValidator=e}nonEmpty(){return this.check(e=>{if(e.length===0)throw new kn("Expected a non-empty array")})}lengthGreaterThan1(){return this.check(e=>{if(e.length<=1)throw new kn("Expected an array with length greater than 1")})}}class TE extends ls{constructor(e,n=!1){super(r=>{if(typeof r!="object"||r===null)throw new kn(`Expected object, got ${up(r)}`);for(const[o,a]of Object.entries(e))ii(o,()=>{a.validate(vo(r,o))});if(!n){for(const o of Object.keys(r))if(!ai(e,o))throw new kn("Unexpected property",[o])}return r},(r,o)=>{if(typeof o!="object"||o===null)throw new kn(`Expected object, got ${up(o)}`);let a=!1;for(const[s,i]of Object.entries(e)){const l=vo(r,s),c=vo(o,s);if(Object.is(l,c))continue;const d=ii(s,()=>{const u=i;return u.validateUsingKnownGoodVersion?u.validateUsingKnownGoodVersion(l,c):u.validate(c)});Object.is(d,l)||(a=!0)}if(!n){for(const s of Object.keys(o))if(!ai(e,s))throw new kn("Unexpected property",[s])}for(const s of Object.keys(r))if(!ai(o,s)){a=!0;break}return a?o:r}),this.config=e,this.shouldAllowUnknownProperties=n}allowUnknownProperties(){return new TE(this.config,!0)}extend(e){return new TE({...this.config,...e})}}class Ew extends ls{constructor(e,n,r,o){super(a=>{this.expectObject(a);const{matchingSchema:s,variant:i}=this.getMatchingSchemaAndVariant(a);return s===void 0?this.unknownValueValidation(a,i):ii(`(${e} = ${i})`,()=>s.validate(a))},(a,s)=>{this.expectObject(s),this.expectObject(a);const{matchingSchema:i,variant:l}=this.getMatchingSchemaAndVariant(s);return i===void 0?this.unknownValueValidation(s,l):vo(a,e)!==vo(s,e)?ii(`(${e} = ${l})`,()=>i.validate(s)):ii(`(${e} = ${l})`,()=>i.validateUsingKnownGoodVersion?i.validateUsingKnownGoodVersion(a,s):i.validate(s))}),this.key=e,this.config=n,this.unknownValueValidation=r,this.useNumberKeys=o}expectObject(e){if(typeof e!="object"||e===null)throw new kn(`Expected an object, got ${up(e)}`,[])}getMatchingSchemaAndVariant(e){const n=vo(e,this.key);if(!this.useNumberKeys&&typeof n!="string")throw new kn(`Expected a string for key "${this.key}", got ${up(n)}`);if(this.useNumberKeys&&!Number.isFinite(Number(n)))throw new kn(`Expected a number for key "${this.key}", got "${n}"`);return{matchingSchema:ai(this.config,n)?this.config[n]:void 0,variant:n}}validateUnknownVariants(e){return new Ew(this.key,this.config,e,this.useNumberKeys)}}class UAe extends ls{constructor(e,n){super(r=>{if(typeof r!="object"||r===null)throw new kn(`Expected object, got ${up(r)}`);for(const[o,a]of Object.entries(r))ii(o,()=>{e.validate(o),n.validate(a)});return r},(r,o)=>{if(typeof o!="object"||o===null)throw new kn(`Expected object, got ${up(o)}`);let a=!1;for(const[s,i]of Object.entries(o)){if(!ai(r,s)){a=!0,ii(s,()=>{e.validate(s),n.validate(i)});continue}const l=vo(r,s),c=i;if(Object.is(l,c))continue;const d=ii(s,()=>n.validateUsingKnownGoodVersion?n.validateUsingKnownGoodVersion(l,c):n.validate(c));Object.is(d,l)||(a=!0)}for(const s of Object.keys(r))if(!ai(o,s)){a=!0;break}return a?o:r}),this.keyValidator=e,this.valueValidator=n}}function gN(t){return new ls(e=>{if(typeof e!==t)throw new kn(`Expected ${t}, got ${up(e)}`);return e})}const qAe=new ls(t=>t),HAe=new ls(t=>t),Gt=gN("string"),Ot=gN("number").check(t=>{if(Number.isNaN(t))throw new kn("Expected a number, got NaN");if(!Number.isFinite(t))throw new kn(`Expected a finite number, got ${t}`)}),wE=Ot.check(t=>{if(t<0)throw new kn(`Expected a positive number, got ${t}`)}),So=Ot.check(t=>{if(t<=0)throw new kn(`Expected a non-zero positive number, got ${t}`)}),KW=Ot.check(t=>{if(!Number.isInteger(t))throw new kn(`Expected an integer, got ${t}`)}),y1=KW.check(t=>{if(t<0)throw new kn(`Expected a positive integer, got ${t}`)}),$Ae=KW.check(t=>{if(t<=0)throw new kn(`Expected a non-zero positive integer, got ${t}`)}),en=gN("boolean");function Za(t){return new ls(e=>{if(e!==t)throw new kn(`Expected ${t}, got ${JSON.stringify(e)}`);return t})}const U8=new ls(t=>{if(!Array.isArray(t))throw new kn(`Expected an array, got ${up(t)}`);return t});function ia(t){return new zAe(t)}function pn(t){return new TE(t)}function pM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null||Object.getPrototypeOf(t)===Uwe)}function fM(t){return t===null||typeof t=="number"||typeof t=="string"||typeof t=="boolean"?!0:Array.isArray(t)?t.every(fM):pM(t)?Object.values(t).every(fM):!1}const Ia=new ls(t=>{if(fM(t))return t;throw new kn(`Expected json serializable value, got ${typeof t}`)},(t,e)=>{if(Array.isArray(t)&&Array.isArray(e)){let n=t.length!==e.length;for(let r=0;r<e.length;r++){if(r>=t.length){n=!0,Ia.validate(e[r]);continue}const o=t[r],a=e[r];if(Object.is(o,a))continue;const s=Ia.validateUsingKnownGoodVersion(o,a);Object.is(s,o)||(n=!0)}return n?e:t}else if(pM(t)&&pM(e)){let n=!1;for(const r of Object.keys(e)){if(!ai(t,r)){n=!0,Ia.validate(e[r]);continue}const o=t[r],a=e[r];if(Object.is(o,a))continue;const s=Ia.validateUsingKnownGoodVersion(o,a);Object.is(s,o)||(n=!0)}for(const r of Object.keys(t))if(!ai(e,r)){n=!0;break}return n?e:t}else return Ia.validate(e)});function CE(t,e){return new UAe(t,e)}function bN(t,e){return new Ew(t,e,(n,r)=>{throw new kn(`Expected one of ${Object.keys(e).map(o=>JSON.stringify(o)).join(" or ")}, got ${JSON.stringify(r)}`,[t])},!1)}function VAe(t,e){return new Ew(t,e,(n,r)=>{throw new kn(`Expected one of ${Object.keys(e).map(o=>JSON.stringify(o)).join(" or ")}, got ${JSON.stringify(r)}`,[t])},!0)}function Zc(t,e){return new ls(n=>ii(t,()=>e.validate(n)),(n,r)=>ii(t,()=>e.validateUsingKnownGoodVersion?e.validateUsingKnownGoodVersion(n,r):e.validate(r)))}function Tw(t){return new ls(e=>{if(!t.has(e)){const n=Array.from(t,r=>JSON.stringify(r)).join(" or ");throw new kn(`Expected ${n}, got ${e}`)}return e})}function WW(t){return new ls(e=>{if(e!==void 0)return t.validate(e)},(e,n)=>{if(!(e===void 0&&n===void 0)&&n!==void 0)return t.validateUsingKnownGoodVersion&&e!==void 0?t.validateUsingKnownGoodVersion(e,n):t.validate(n)})}function GAe(t){return new ls(e=>e===null?null:t.validate(e),(e,n)=>n===null?null:t.validateUsingKnownGoodVersion&&e!==null?t.validateUsingKnownGoodVersion(e,n):t.validate(n))}function Nf(...t){return Tw(new Set(t))}function yN(t){try{return new URL(t)}catch{if(t.startsWith("/")||t.startsWith("./"))try{return new URL(t,"http://example.com")}catch{throw new kn(`Expected a valid url, got ${JSON.stringify(t)}`)}throw new kn(`Expected a valid url, got ${JSON.stringify(t)}`)}}const KAe=new Set(["http:","https:","mailto:"]),Vi=Gt.check(t=>{if(t==="")return;const e=yN(t);if(!KAe.has(e.protocol.toLowerCase()))throw new kn(`Expected a valid url, got ${JSON.stringify(t)} (invalid protocol)`)}),WAe=new Set(["http:","https:","data:","asset:"]),Lf=Gt.check(t=>{if(t==="")return;const e=yN(t);if(!WAe.has(e.protocol.toLowerCase()))throw new kn(`Expected a valid url, got ${JSON.stringify(t)} (invalid protocol)`)});Gt.check(t=>{if(t==="")return;if(!yN(t).protocol.toLowerCase().match(/^https?:$/))throw new kn(`Expected a valid url, got ${JSON.stringify(t)} (invalid protocol)`)});const vN=Gt.refine(t=>{try{return Mwe(t),t}catch{throw new kn(`Expected an index key, got ${JSON.stringify(t)}`)}});Cp("@tldraw/validate","4.2.0","esm");function qi(t){return Gt.refine(e=>{if(!e.startsWith(`${t}:`))throw new Error(`${t} ID must start with "${t}:"`);return e})}const ww=qi("asset");function xN(t,e){return pn({id:ww,typeName:Za("asset"),type:Za(t),props:e,meta:Ia})}const jf=pn({x:Ot,y:Ot,z:Ot.optional()}),Fy=pn({x:Ot,y:Ot,w:Ot,h:Ot}),YW=Ot.check(t=>{if(t<0||t>1)throw new kn("Opacity must be between 0 and 1")}),YAe=Gt.refine(t=>{if(!t.startsWith("page:")&&!t.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return t}),xl=qi("shape");function XAe(t,e,n){return pn({id:xl,typeName:Za("shape"),x:Ot,y:Ot,rotation:Ot,index:vN,parentId:YAe,type:Za(t),isLocked:en,opacity:YW,props:e?pn(e):Ia,meta:n?pn(n):Ia})}const JAe=qi("binding");function QAe(t,e,n){return pn({id:JAe,typeName:Za("binding"),type:Za(t),fromId:xl,toId:xl,props:e?pn(e):Ia,meta:n?pn(n):Ia})}mi("com.tldraw.binding",{});Xi({sequenceId:"com.tldraw.binding",recordType:"binding",sequence:[]});function wf(t){return`binding:${Ln()}`}function ZAe(t,e){return _p(e,(n,r)=>`com.tldraw.binding.${t}/${r}`)}function e_e(t){return Qc("binding",{scope:"document",validator:Zc("binding",bN("type",_p(t,(e,{props:n,meta:r})=>QAe(e,n,r))))}).withDefaultProperties(()=>({meta:{}}))}const Cw=pn({type:Gt,content:ia(qAe)});function Ma(t){return{type:"doc",content:t.split(`
`).map(r=>r?{type:"paragraph",content:[{type:"text",text:r}]}:{type:"paragraph"})}}class da{constructor(e,n,r){this.id=e,this.defaultValue=n,this.type=r}static define(e,n){const{defaultValue:r,type:o=HAe}=n;return new da(e,r,o)}static defineEnum(e,n){const{defaultValue:r,values:o}=n;return new t_e(e,r,o)}setDefaultValue(e){this.defaultValue=e}validate(e){return this.type.validate(e)}validateUsingKnownGoodVersion(e,n){return this.type.validateUsingKnownGoodVersion?this.type.validateUsingKnownGoodVersion(e,n):this.validate(n)}}class t_e extends da{constructor(e,n,r){super(e,n,Nf(...r)),this.values=r}}const uS=mi("com.tldraw.shape",{AddIsLocked:1,HoistOpacity:2,AddMeta:3,AddWhite:4}),n_e=Xi({sequenceId:"com.tldraw.shape",recordType:"shape",sequence:[{id:uS.AddIsLocked,up:t=>{t.isLocked=!1},down:t=>{delete t.isLocked}},{id:uS.HoistOpacity,up:t=>{t.opacity=Number(t.props.opacity??"1"),delete t.props.opacity},down:t=>{const e=t.opacity;delete t.opacity,t.props.opacity=e<.175?"0.1":e<.375?"0.25":e<.625?"0.5":e<.875?"0.75":"1"}},{id:uS.AddMeta,up:t=>{t.meta={}}},{id:uS.AddWhite,up:t=>{},down:t=>{t.props.color==="white"&&(t.props.color="black")}}]});function Ch(t){return t?t.typeName==="shape":!1}function bs(t){return t?t.startsWith("shape:"):!1}function lr(t){return`shape:${t??Ln()}`}function XW(t){const e=new Map;for(const[n,r]of Object.entries(t))if(r instanceof da){if(e.has(r))throw new Error(`Duplicate style prop ${r.id}. Each style prop can only be used once within a shape.`);e.set(r,n)}return e}function Nl(t,e){return _p(e,(n,r)=>`com.tldraw.shape.${t}/${r}`)}function r_e(t){return Qc("shape",{scope:"document",validator:Zc("shape",bN("type",_p(t,(e,{props:n,meta:r})=>XAe(e,n,r))))}).withDefaultProperties(()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}}))}function q8(t,e){const n=[];for(const[r,{migrations:o}]of Object.entries(e)){const a=`com.tldraw.${t}.${r}`;o?"sequenceId"in o?(dt(a===o.sequenceId,`sequenceId mismatch for ${r} ${xw} migrations. Expected '${a}', got '${o.sequenceId}'`),n.push(o)):"sequence"in o?n.push(Rh({sequenceId:a,retroactive:!0,sequence:o.sequence.map(s=>"id"in s?JW(t,r,s):s)})):n.push(Rh({sequenceId:a,retroactive:!0,sequence:Object.keys(o.migrators).map(s=>Number(s)).sort((s,i)=>s-i).map(s=>({id:`${a}/${s}`,scope:"record",filter:i=>i.typeName===t&&i.type===r,up:i=>{const l=o.migrators[s].up(i);if(l)return l},down:i=>{const l=o.migrators[s].down(i);if(l)return l}}))})):n.push(Rh({sequenceId:a,retroactive:!0,sequence:[]}))}return n}function JW(t,e,n){return{id:n.id,dependsOn:n.dependsOn,scope:"record",filter:r=>r.typeName===t&&r.type===e,up:r=>{const o=n.up(r.props);o&&(r.props=o)},down:typeof n.down=="function"?r=>{const o=n.down(r.props);o&&(r.props=o)}:void 0}}const SN=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red","white"],AE={lightMode:{id:"light",text:"#000000",background:"#f9fafb",solid:"#fcfffe",black:{solid:"#1d1d1d",fill:"#1d1d1d",linedFill:"#363636",frameHeadingStroke:"#717171",frameHeadingFill:"#ffffff",frameStroke:"#717171",frameFill:"#ffffff",frameText:"#000000",noteFill:"#FCE19C",noteText:"#000000",semi:"#e8e8e8",pattern:"#494949",highlightSrgb:"#fddd00",highlightP3:"color(display-p3 0.972 0.8205 0.05)"},blue:{solid:"#4465e9",fill:"#4465e9",linedFill:"#6580ec",frameHeadingStroke:"#6681ec",frameHeadingFill:"#f9fafe",frameStroke:"#6681ec",frameFill:"#f9fafe",frameText:"#000000",noteFill:"#8AA3FF",noteText:"#000000",semi:"#dce1f8",pattern:"#6681ee",highlightSrgb:"#10acff",highlightP3:"color(display-p3 0.308 0.6632 0.9996)"},green:{solid:"#099268",fill:"#099268",linedFill:"#0bad7c",frameHeadingStroke:"#37a684",frameHeadingFill:"#f8fcfa",frameStroke:"#37a684",frameFill:"#f8fcfa",frameText:"#000000",noteFill:"#6FC896",noteText:"#000000",semi:"#d3e9e3",pattern:"#39a785",highlightSrgb:"#00ffc8",highlightP3:"color(display-p3 0.2536 0.984 0.7981)"},grey:{solid:"#9fa8b2",fill:"#9fa8b2",linedFill:"#bbc1c9",frameHeadingStroke:"#aaaaab",frameHeadingFill:"#fbfcfc",frameStroke:"#aaaaab",frameFill:"#fcfcfd",frameText:"#000000",noteFill:"#C0CAD3",noteText:"#000000",semi:"#eceef0",pattern:"#bcc3c9",highlightSrgb:"#cbe7f1",highlightP3:"color(display-p3 0.8163 0.9023 0.9416)"},"light-blue":{solid:"#4ba1f1",fill:"#4ba1f1",linedFill:"#7abaf5",frameHeadingStroke:"#6cb2f3",frameHeadingFill:"#f8fbfe",frameStroke:"#6cb2f3",frameFill:"#fafcff",frameText:"#000000",noteFill:"#9BC4FD",noteText:"#000000",semi:"#ddedfa",pattern:"#6fbbf8",highlightSrgb:"#00f4ff",highlightP3:"color(display-p3 0.1512 0.9414 0.9996)"},"light-green":{solid:"#4cb05e",fill:"#4cb05e",linedFill:"#7ec88c",frameHeadingStroke:"#6dbe7c",frameHeadingFill:"#f8fcf9",frameStroke:"#6dbe7c",frameFill:"#fafdfa",frameText:"#000000",noteFill:"#98D08A",noteText:"#000000",semi:"#dbf0e0",pattern:"#65cb78",highlightSrgb:"#65f641",highlightP3:"color(display-p3 0.563 0.9495 0.3857)"},"light-red":{solid:"#f87777",fill:"#f87777",linedFill:"#f99a9a",frameHeadingStroke:"#f89090",frameHeadingFill:"#fffafa",frameStroke:"#f89090",frameFill:"#fffbfb",frameText:"#000000",noteFill:"#F7A5A1",noteText:"#000000",semi:"#f4dadb",pattern:"#fe9e9e",highlightSrgb:"#ff7fa3",highlightP3:"color(display-p3 0.9988 0.5301 0.6397)"},"light-violet":{solid:"#e085f4",fill:"#e085f4",linedFill:"#e9abf7",frameHeadingStroke:"#e59bf5",frameHeadingFill:"#fefaff",frameStroke:"#e59bf5",frameFill:"#fefbff",frameText:"#000000",noteFill:"#DFB0F9",noteText:"#000000",semi:"#f5eafa",pattern:"#e9acf8",highlightSrgb:"#ff88ff",highlightP3:"color(display-p3 0.9676 0.5652 0.9999)"},orange:{solid:"#e16919",fill:"#e16919",linedFill:"#ea8643",frameHeadingStroke:"#e68544",frameHeadingFill:"#fef9f6",frameStroke:"#e68544",frameFill:"#fef9f6",frameText:"#000000",noteFill:"#FAA475",noteText:"#000000",semi:"#f8e2d4",pattern:"#f78438",highlightSrgb:"#ffa500",highlightP3:"color(display-p3 0.9988 0.6905 0.266)"},red:{solid:"#e03131",fill:"#e03131",linedFill:"#e75f5f",frameHeadingStroke:"#e55757",frameHeadingFill:"#fef7f7",frameStroke:"#e55757",frameFill:"#fef9f9",frameText:"#000000",noteFill:"#FC8282",noteText:"#000000",semi:"#f4dadb",pattern:"#e55959",highlightSrgb:"#ff636e",highlightP3:"color(display-p3 0.9992 0.4376 0.45)"},violet:{solid:"#ae3ec9",fill:"#ae3ec9",linedFill:"#be68d4",frameHeadingStroke:"#bc62d3",frameHeadingFill:"#fcf7fd",frameStroke:"#bc62d3",frameFill:"#fdf9fd",frameText:"#000000",noteFill:"#DB91FD",noteText:"#000000",semi:"#ecdcf2",pattern:"#bd63d3",highlightSrgb:"#c77cff",highlightP3:"color(display-p3 0.7469 0.5089 0.9995)"},yellow:{solid:"#f1ac4b",fill:"#f1ac4b",linedFill:"#f5c27a",frameHeadingStroke:"#f3bb6c",frameHeadingFill:"#fefcf8",frameStroke:"#f3bb6c",frameFill:"#fffdfa",frameText:"#000000",noteFill:"#FED49A",noteText:"#000000",semi:"#f9f0e6",pattern:"#fecb92",highlightSrgb:"#fddd00",highlightP3:"color(display-p3 0.972 0.8705 0.05)"},white:{solid:"#FFFFFF",fill:"#FFFFFF",linedFill:"#ffffff",semi:"#f5f5f5",pattern:"#f9f9f9",frameHeadingStroke:"#7d7d7d",frameHeadingFill:"#ffffff",frameStroke:"#7d7d7d",frameFill:"#ffffff",frameText:"#000000",noteFill:"#FFFFFF",noteText:"#000000",highlightSrgb:"#ffffff",highlightP3:"color(display-p3 1 1 1)"}},darkMode:{id:"dark",text:"hsl(210, 17%, 98%)",background:"hsl(240, 5%, 6.5%)",solid:"#010403",black:{solid:"#f2f2f2",fill:"#f2f2f2",linedFill:"#ffffff",frameHeadingStroke:"#5c5c5c",frameHeadingFill:"#252525",frameStroke:"#5c5c5c",frameFill:"#0c0c0c",frameText:"#f2f2f2",noteFill:"#2c2c2c",noteText:"#f2f2f2",semi:"#2c3036",pattern:"#989898",highlightSrgb:"#d2b700",highlightP3:"color(display-p3 0.8078 0.6225 0.0312)"},blue:{solid:"#4f72fc",fill:"#4f72fc",linedFill:"#3c5cdd",frameHeadingStroke:"#384994",frameHeadingFill:"#1C2036",frameStroke:"#384994",frameFill:"#11141f",frameText:"#f2f2f2",noteFill:"#2A3F98",noteText:"#f2f2f2",semi:"#262d40",pattern:"#3a4b9e",highlightSrgb:"#0079d2",highlightP3:"color(display-p3 0.0032 0.4655 0.7991)"},green:{solid:"#099268",fill:"#099268",linedFill:"#087856",frameHeadingStroke:"#10513C",frameHeadingFill:"#14241f",frameStroke:"#10513C",frameFill:"#0E1614",frameText:"#f2f2f2",noteFill:"#014429",noteText:"#f2f2f2",semi:"#253231",pattern:"#366a53",highlightSrgb:"#009774",highlightP3:"color(display-p3 0.0085 0.582 0.4604)"},grey:{solid:"#9398b0",fill:"#9398b0",linedFill:"#8388a5",frameHeadingStroke:"#42474D",frameHeadingFill:"#23262A",frameStroke:"#42474D",frameFill:"#151719",frameText:"#f2f2f2",noteFill:"#56595F",noteText:"#f2f2f2",semi:"#33373c",pattern:"#7c8187",highlightSrgb:"#9cb4cb",highlightP3:"color(display-p3 0.6299 0.7012 0.7856)"},"light-blue":{solid:"#4dabf7",fill:"#4dabf7",linedFill:"#2793ec",frameHeadingStroke:"#075797",frameHeadingFill:"#142839",frameStroke:"#075797",frameFill:"#0B1823",frameText:"#f2f2f2",noteFill:"#1F5495",noteText:"#f2f2f2",semi:"#2a3642",pattern:"#4d7aa9",highlightSrgb:"#00bdc8",highlightP3:"color(display-p3 0.0023 0.7259 0.7735)"},"light-green":{solid:"#40c057",fill:"#40c057",linedFill:"#37a44b",frameHeadingStroke:"#1C5427",frameHeadingFill:"#18251A",frameStroke:"#1C5427",frameFill:"#0F1911",frameText:"#f2f2f2",noteFill:"#21581D",noteText:"#f2f2f2",semi:"#2a3830",pattern:"#4e874e",highlightSrgb:"#00a000",highlightP3:"color(display-p3 0.2711 0.6172 0.0195)"},"light-red":{solid:"#ff8787",fill:"#ff8787",linedFill:"#ff6666",frameHeadingStroke:"#6f3232",frameHeadingFill:"#341818",frameStroke:"#6f3232",frameFill:"#181212",frameText:"#f2f2f2",noteFill:"#7a3333",noteText:"#f2f2f2",semi:"#3c2b2b",pattern:"#a56767",highlightSrgb:"#db005b",highlightP3:"color(display-p3 0.7849 0.0585 0.3589)"},"light-violet":{solid:"#e599f7",fill:"#e599f7",linedFill:"#dc71f4",frameHeadingStroke:"#6c367a",frameHeadingFill:"#2D2230",frameStroke:"#6c367a",frameFill:"#1C151E",frameText:"#f2f2f2",noteFill:"#762F8E",noteText:"#f2f2f2",semi:"#383442",pattern:"#9770a9",highlightSrgb:"#c400c7",highlightP3:"color(display-p3 0.7024 0.0403 0.753)"},orange:{solid:"#f76707",fill:"#f76707",linedFill:"#f54900",frameHeadingStroke:"#773a0e",frameHeadingFill:"#2f1d13",frameStroke:"#773a0e",frameFill:"#1c1512",frameText:"#f2f2f2",noteFill:"#7c3905",noteText:"#f2f2f2",semi:"#3b2e27",pattern:"#9f552d",highlightSrgb:"#d07a00",highlightP3:"color(display-p3 0.7699 0.4937 0.0085)"},red:{solid:"#e03131",fill:"#e03131",linedFill:"#c31d1d",frameHeadingStroke:"#701e1e",frameHeadingFill:"#301616",frameStroke:"#701e1e",frameFill:"#1b1313",frameText:"#f2f2f2",noteFill:"#7e201f",noteText:"#f2f2f2",semi:"#382726",pattern:"#8f3734",highlightSrgb:"#de002c",highlightP3:"color(display-p3 0.7978 0.0509 0.2035)"},violet:{solid:"#ae3ec9",fill:"#ae3ec9",linedFill:"#8f2fa7",frameHeadingStroke:"#6d1583",frameHeadingFill:"#27152e",frameStroke:"#6d1583",frameFill:"#1b0f21",frameText:"#f2f2f2",noteFill:"#5f1c70",noteText:"#f2f2f2",semi:"#342938",pattern:"#763a8b",highlightSrgb:"#9e00ee",highlightP3:"color(display-p3 0.5651 0.0079 0.8986)"},yellow:{solid:"#ffc034",fill:"#ffc034",linedFill:"#ffae00",frameHeadingStroke:"#684e12",frameHeadingFill:"#2a2113",frameStroke:"#684e12",frameFill:"#1e1911",frameText:"#f2f2f2",noteFill:"#8a5e1c",noteText:"#f2f2f2",semi:"#3b352b",pattern:"#fecb92",highlightSrgb:"#d2b700",highlightP3:"color(display-p3 0.8078 0.7225 0.0312)"},white:{solid:"#f3f3f3",fill:"#f3f3f3",linedFill:"#f3f3f3",semi:"#f5f5f5",pattern:"#f9f9f9",frameHeadingStroke:"#ffffff",frameHeadingFill:"#ffffff",frameStroke:"#ffffff",frameFill:"#ffffff",frameText:"#000000",noteFill:"#eaeaea",noteText:"#1d1d1d",highlightSrgb:"#ffffff",highlightP3:"color(display-p3 1 1 1)"}}};function Op(t){return t.isDarkMode?AE.darkMode:AE.lightMode}const ks=da.defineEnum("tldraw:color",{defaultValue:"black",values:SN}),EN=da.defineEnum("tldraw:labelColor",{defaultValue:"black",values:SN}),o_e=new Set(SN);function a_e(t){return o_e.has(t)}function yn(t,e,n){return a_e(e)?t[e][n]:e}const Bf=da.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),dp=da.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern","fill","lined-fill"]}),pp=da.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),s_e={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"},$c=da.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),i_e=["arc","elbow"],_E=da.defineEnum("tldraw:arrowKind",{defaultValue:"arc",values:i_e}),QW=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],mM=da.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:QW}),hM=da.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:QW}),ZW={kind:_E,labelColor:EN,color:ks,fill:dp,dash:Bf,size:$c,arrowheadStart:mM,arrowheadEnd:hM,font:pp,start:jf,end:jf,bend:Ot,richText:Cw,labelPosition:Ot,scale:So,elbowMidPoint:Ot},zd=Nl("arrow",{AddLabelColor:1,AddIsPrecise:2,AddLabelPosition:3,ExtractBindings:4,AddScale:5,AddElbow:6,AddRichText:7});function Gm(t){return JW("shape","arrow",t)}const eY=Rh({sequenceId:"com.tldraw.shape.arrow",retroactive:!1,sequence:[Gm({id:zd.AddLabelColor,up:t=>{t.labelColor="black"},down:"retired"}),Gm({id:zd.AddIsPrecise,up:({start:t,end:e})=>{t.type==="binding"&&(t.isPrecise=!(t.normalizedAnchor.x===.5&&t.normalizedAnchor.y===.5)),e.type==="binding"&&(e.isPrecise=!(e.normalizedAnchor.x===.5&&e.normalizedAnchor.y===.5))},down:({start:t,end:e})=>{t.type==="binding"&&(t.isPrecise||(t.normalizedAnchor={x:.5,y:.5}),delete t.isPrecise),e.type==="binding"&&(e.isPrecise||(e.normalizedAnchor={x:.5,y:.5}),delete e.isPrecise)}}),Gm({id:zd.AddLabelPosition,up:t=>{t.labelPosition=.5},down:t=>{delete t.labelPosition}}),{id:zd.ExtractBindings,scope:"store",up:t=>{const e=Object.values(t).filter(n=>n.typeName==="shape"&&n.type==="arrow");for(const n of e){const{start:r,end:o}=n.props;if(r.type==="binding"){const a=wf(),s={typeName:"binding",id:a,type:"arrow",fromId:n.id,toId:r.boundShapeId,meta:{},props:{terminal:"start",normalizedAnchor:r.normalizedAnchor,isExact:r.isExact,isPrecise:r.isPrecise}};t[a]=s,n.props.start={x:0,y:0}}else delete n.props.start.type;if(o.type==="binding"){const a=wf(),s={typeName:"binding",id:a,type:"arrow",fromId:n.id,toId:o.boundShapeId,meta:{},props:{terminal:"end",normalizedAnchor:o.normalizedAnchor,isExact:o.isExact,isPrecise:o.isPrecise}};t[a]=s,n.props.end={x:0,y:0}}else delete n.props.end.type}}},Gm({id:zd.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}}),Gm({id:zd.AddElbow,up:t=>{t.kind="arc",t.elbowMidPoint=.5},down:t=>{delete t.kind,delete t.elbowMidPoint}}),Gm({id:zd.AddRichText,up:t=>{t.richText=Ma(t.text),delete t.text}})]}),l_e=Nf("center","edge-point","edge","none"),tY={terminal:Nf("start","end"),normalizedAnchor:jf,isExact:en,isPrecise:en,snap:l_e},c_e=ZAe("arrow",{AddSnap:1}),nY={sequence:[{dependsOn:[zd.ExtractBindings]},{id:c_e.AddSnap,up:t=>{t.snap="none"},down:t=>{delete t.snap}}]},u_e=Zc("camera",pn({typeName:Za("camera"),id:qi("camera"),x:Ot,y:Ot,z:Ot,meta:Ia})),d_e=mi("com.tldraw.camera",{AddMeta:1}),p_e=Xi({sequenceId:"com.tldraw.camera",recordType:"camera",sequence:[{id:d_e.AddMeta,up:t=>{t.meta={}}}]}),jc=Qc("camera",{validator:u_e,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,z:1,meta:{}})),f_e=new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"]),rY=Tw(f_e),m_e=pn({type:rY,rotation:Ot}),h_e=new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"]),g_e=Tw(h_e),b_e=new Set(["starting","paused","active","stopping"]),oY=pn({id:Gt,points:ia(jf),size:wE,color:g_e,opacity:Ot,state:Tw(b_e),delay:Ot,shrink:Ot,taper:en}),p0=qi("page"),y_e=Zc("page",pn({typeName:Za("page"),id:p0,name:Gt,index:vN,meta:Ia})),v_e=mi("com.tldraw.page",{AddMeta:1}),x_e=Xi({sequenceId:"com.tldraw.page",recordType:"page",sequence:[{id:v_e.AddMeta,up:t=>{t.meta={}}}]}),Cs=Qc("page",{validator:y_e,scope:"document"}).withDefaultProperties(()=>({meta:{}}));function Ea(t){return Cs.isId(t)}const S_e={id:!1,typeName:!1,currentPageId:!1,opacityForNextShape:!1,stylesForNextShape:!1,followingUserId:!1,highlightedUserIds:!1,brush:!1,cursor:!1,scribbles:!1,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!1,chatMessage:!1,isChatting:!1,isPenMode:!1,isGridMode:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!1,openMenus:!1,isChangingStyle:!1,isReadonly:!0,meta:!1,duplicateProps:!1};function aY(t){return t?jy(t,e=>S_e[e]):null}qi("instance");function E_e(t){const e={};for(const[r,o]of t)e[r]=WW(o);const n=Zc("instance",pn({typeName:Za("instance"),id:qi("instance"),currentPageId:p0,followingUserId:Gt.nullable(),brush:Fy.nullable(),opacityForNextShape:YW,stylesForNextShape:pn(e),cursor:m_e,scribbles:ia(oY),isFocusMode:en,isDebugMode:en,isToolLocked:en,exportBackground:en,screenBounds:Fy,insets:ia(en),zoomBrush:Fy.nullable(),isPenMode:en,isGridMode:en,chatMessage:Gt,isChatting:en,highlightedUserIds:ia(Gt),isFocused:en,devicePixelRatio:Ot,isCoarsePointer:en,isHoveringCanvas:en.nullable(),openMenus:ia(Gt),isChangingStyle:en,isReadonly:en,meta:Ia,duplicateProps:pn({shapeIds:ia(qi("shape")),offset:pn({x:Ot,y:Ot})}).nullable()}));return Qc("instance",{validator:n,scope:"session",ephemeralKeys:{currentPageId:!1,meta:!1,followingUserId:!0,opacityForNextShape:!0,stylesForNextShape:!0,brush:!0,cursor:!0,scribbles:!0,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!0,isPenMode:!0,isGridMode:!0,chatMessage:!0,isChatting:!0,highlightedUserIds:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!0,openMenus:!0,isChangingStyle:!0,isReadonly:!0,duplicateProps:!0}}).withDefaultProperties(()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribbles:[],cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},insets:[!1,!1,!1,!1],zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],isFocused:!1,devicePixelRatio:typeof window>"u"?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{},duplicateProps:null}))}const _r=mi("com.tldraw.instance",{AddTransparentExportBgs:1,RemoveDialog:2,AddToolLockMode:3,RemoveExtraPropsForNextShape:4,AddLabelColor:5,AddFollowingUserId:6,RemoveAlignJustify:7,AddZoom:8,AddVerticalAlign:9,AddScribbleDelay:10,RemoveUserId:11,AddIsPenModeAndIsGridMode:12,HoistOpacity:13,AddChat:14,AddHighlightedUserIds:15,ReplacePropsForNextShapeWithStylesForNextShape:16,AddMeta:17,RemoveCursorColor:18,AddLonelyProperties:19,ReadOnlyReadonly:20,AddHoveringCanvas:21,AddScribbles:22,AddInset:23,AddDuplicateProps:24,RemoveCanMoveCamera:25}),T_e=Xi({sequenceId:"com.tldraw.instance",recordType:"instance",sequence:[{id:_r.AddTransparentExportBgs,up:t=>({...t,exportBackground:!0})},{id:_r.RemoveDialog,up:({dialog:t,...e})=>e},{id:_r.AddToolLockMode,up:t=>({...t,isToolLocked:!1})},{id:_r.RemoveExtraPropsForNextShape,up:({propsForNextShape:t,...e})=>({...e,propsForNextShape:Object.fromEntries(Object.entries(t).filter(([n])=>["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(n)))})},{id:_r.AddLabelColor,up:({propsForNextShape:t,...e})=>({...e,propsForNextShape:{...t,labelColor:"black"}})},{id:_r.AddFollowingUserId,up:t=>({...t,followingUserId:null})},{id:_r.RemoveAlignJustify,up:t=>{let e=t.propsForNextShape.align;return e==="justify"&&(e="start"),{...t,propsForNextShape:{...t.propsForNextShape,align:e}}}},{id:_r.AddZoom,up:t=>({...t,zoomBrush:null})},{id:_r.AddVerticalAlign,up:t=>({...t,propsForNextShape:{...t.propsForNextShape,verticalAlign:"middle"}})},{id:_r.AddScribbleDelay,up:t=>t.scribble!==null?{...t,scribble:{...t.scribble,delay:0}}:{...t}},{id:_r.RemoveUserId,up:({userId:t,...e})=>e},{id:_r.AddIsPenModeAndIsGridMode,up:t=>({...t,isPenMode:!1,isGridMode:!1})},{id:_r.HoistOpacity,up:({propsForNextShape:{opacity:t,...e},...n})=>({...n,opacityForNextShape:Number(t??"1"),propsForNextShape:e})},{id:_r.AddChat,up:t=>({...t,chatMessage:"",isChatting:!1})},{id:_r.AddHighlightedUserIds,up:t=>({...t,highlightedUserIds:[]})},{id:_r.ReplacePropsForNextShapeWithStylesForNextShape,up:({propsForNextShape:t,...e})=>({...e,stylesForNextShape:{}})},{id:_r.AddMeta,up:t=>({...t,meta:{}})},{id:_r.RemoveCursorColor,up:t=>{const{color:e,...n}=t.cursor;return{...t,cursor:n}}},{id:_r.AddLonelyProperties,up:t=>({...t,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1})},{id:_r.ReadOnlyReadonly,up:({isReadOnly:t,...e})=>({...e,isReadonly:t})},{id:_r.AddHoveringCanvas,up:t=>({...t,isHoveringCanvas:null})},{id:_r.AddScribbles,up:({scribble:t,...e})=>({...e,scribbles:[]})},{id:_r.AddInset,up:t=>({...t,insets:[!1,!1,!1,!1]}),down:({insets:t,...e})=>({...e})},{id:_r.AddDuplicateProps,up:t=>({...t,duplicateProps:null}),down:({duplicateProps:t,...e})=>({...e})},{id:_r.RemoveCanMoveCamera,up:({canMoveCamera:t,...e})=>({...e}),down:t=>({...t,canMoveCamera:!0})}]}),ys="instance:instance",w_e=Zc("instance_page_state",pn({typeName:Za("instance_page_state"),id:qi("instance_page_state"),pageId:p0,selectedShapeIds:ia(xl),hintingShapeIds:ia(xl),erasingShapeIds:ia(xl),hoveredShapeId:xl.nullable(),editingShapeId:xl.nullable(),croppingShapeId:xl.nullable(),focusedGroupId:xl.nullable(),meta:Ia})),jb=mi("com.tldraw.instance_page_state",{AddCroppingId:1,RemoveInstanceIdAndCameraId:2,AddMeta:3,RenameProperties:4,RenamePropertiesAgain:5}),C_e=Xi({sequenceId:"com.tldraw.instance_page_state",recordType:"instance_page_state",sequence:[{id:jb.AddCroppingId,up(t){t.croppingShapeId=null}},{id:jb.RemoveInstanceIdAndCameraId,up(t){delete t.instanceId,delete t.cameraId}},{id:jb.AddMeta,up:t=>{t.meta={}}},{id:jb.RenameProperties,up:t=>{},down:t=>{}},{id:jb.RenamePropertiesAgain,up:t=>{t.selectedShapeIds=t.selectedIds,delete t.selectedIds,t.hintingShapeIds=t.hintingIds,delete t.hintingIds,t.erasingShapeIds=t.erasingIds,delete t.erasingIds,t.hoveredShapeId=t.hoveredId,delete t.hoveredId,t.editingShapeId=t.editingId,delete t.editingId,t.croppingShapeId=t.croppingShapeId??t.croppingId??null,delete t.croppingId,t.focusedGroupId=t.focusLayerId,delete t.focusLayerId},down:t=>{t.selectedIds=t.selectedShapeIds,delete t.selectedShapeIds,t.hintingIds=t.hintingShapeIds,delete t.hintingShapeIds,t.erasingIds=t.erasingShapeIds,delete t.erasingShapeIds,t.hoveredId=t.hoveredShapeId,delete t.hoveredShapeId,t.editingId=t.editingShapeId,delete t.editingShapeId,t.croppingId=t.croppingShapeId,delete t.croppingShapeId,t.focusLayerId=t.focusedGroupId,delete t.focusedGroupId}}]}),Xl=Qc("instance_page_state",{validator:w_e,scope:"session",ephemeralKeys:{pageId:!1,selectedShapeIds:!1,editingShapeId:!1,croppingShapeId:!1,meta:!1,hintingShapeIds:!0,erasingShapeIds:!0,hoveredShapeId:!0,focusedGroupId:!0}}).withDefaultProperties(()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}})),A_e=Zc("pointer",pn({typeName:Za("pointer"),id:qi("pointer"),x:Ot,y:Ot,lastActivityTimestamp:Ot,meta:Ia})),__e=mi("com.tldraw.pointer",{AddMeta:1}),k_e=Xi({sequenceId:"com.tldraw.pointer",recordType:"pointer",sequence:[{id:__e.AddMeta,up:t=>{t.meta={}}}]}),TN=Qc("pointer",{validator:A_e,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}})),kE=TN.createId("pointer"),I_e=Zc("instance_presence",pn({typeName:Za("instance_presence"),id:qi("instance_presence"),userId:Gt,userName:Gt,lastActivityTimestamp:Ot.nullable(),followingUserId:Gt.nullable(),cursor:pn({x:Ot,y:Ot,type:rY,rotation:Ot}).nullable(),color:Gt,camera:pn({x:Ot,y:Ot,z:Ot}).nullable(),screenBounds:Fy.nullable(),selectedShapeIds:ia(qi("shape")),currentPageId:qi("page"),brush:Fy.nullable(),scribbles:ia(oY),chatMessage:Gt,meta:Ia})),Km=mi("com.tldraw.instance_presence",{AddScribbleDelay:1,RemoveInstanceId:2,AddChatMessage:3,AddMeta:4,RenameSelectedShapeIds:5,NullableCameraCursor:6}),P_e=Xi({sequenceId:"com.tldraw.instance_presence",recordType:"instance_presence",sequence:[{id:Km.AddScribbleDelay,up:t=>{t.scribble!==null&&(t.scribble.delay=0)}},{id:Km.RemoveInstanceId,up:t=>{delete t.instanceId}},{id:Km.AddChatMessage,up:t=>{t.chatMessage=""}},{id:Km.AddMeta,up:t=>{t.meta={}}},{id:Km.RenameSelectedShapeIds,up:t=>{}},{id:Km.NullableCameraCursor,up:t=>{},down:t=>{t.camera===null&&(t.camera={x:0,y:0,z:1}),t.lastActivityTimestamp===null&&(t.lastActivityTimestamp=0),t.cursor===null&&(t.cursor={type:"default",x:0,y:0,rotation:0}),t.screenBounds===null&&(t.screenBounds={x:0,y:0,w:1,h:1})}}]}),O_e=Qc("instance_presence",{validator:I_e,scope:"presence"}).withDefaultProperties(()=>({lastActivityTimestamp:null,followingUserId:null,color:"#FF0000",camera:null,cursor:null,screenBounds:null,selectedShapeIds:[],brush:null,scribbles:[],chatMessage:"",meta:{}})),M_e=Zc("document",pn({typeName:Za("document"),id:Za("document:document"),gridSize:Ot,name:Gt,meta:Ia})),H8=mi("com.tldraw.document",{AddName:1,AddMeta:2}),R_e=Xi({sequenceId:"com.tldraw.document",recordType:"document",sequence:[{id:H8.AddName,up:t=>{t.name=""},down:t=>{delete t.name}},{id:H8.AddMeta,up:t=>{t.meta={}}}]}),wN=Qc("document",{validator:M_e,scope:"document"}).withDefaultProperties(()=>({gridSize:10,name:"",meta:{}})),gM=wN.createId("document");function $8(t){t.typeName==="asset"&&("src"in t&&(t.src="<redacted>"),"src"in t.props&&(t.props.src="<redacted>"))}function D_e({error:t,phase:e,record:n,recordBefore:r}){throw FD(t,{tags:{origin:"store.validateRecord",storePhase:e,isExistingValidationIssue:e==="initialize"},extras:{recordBefore:r?$8(bo(r)):void 0,recordAfter:$8(bo(n))}}),t}function N_e(){return[Cs.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]}function L_e(t){const e=t.query.ids("page"),n=t.query.records("instance_page_state"),r=()=>{if(!t.has(gM))return t.put([wN.create({id:gM,name:t.props.defaultName})]),r();if(!t.has(kE))return t.put([TN.create({id:kE})]),r();const o=e.get();if(o.size===0)return t.put(N_e()),r();const a=()=>[...o].map(d=>t.get(d)).sort(oa)[0].id,s=t.get(ys);if(s){if(!o.has(s.currentPageId))return t.put([{...s,currentPageId:a()}]),r()}else return t.put([t.schema.types.instance.create({id:ys,currentPageId:a(),exportBackground:!0})]),r();const i=new Set,l=new Set;for(const d of o){const u=Xl.createId(d);t.get(u)||i.add(u);const h=jc.createId(d);t.has(h)||l.add(h)}i.size>0&&t.put([...i].map(d=>Xl.create({id:d,pageId:Xl.parseId(d)}))),l.size>0&&t.put([...l].map(d=>jc.create({id:d})));const c=n.get();for(const d of c){if(!o.has(d.pageId)){t.remove([d.id]);continue}if(d.croppingShapeId&&!t.has(d.croppingShapeId))return t.put([{...d,croppingShapeId:null}]),r();if(d.focusedGroupId&&!t.has(d.focusedGroupId))return t.put([{...d,focusedGroupId:null}]),r();if(d.hoveredShapeId&&!t.has(d.hoveredShapeId))return t.put([{...d,hoveredShapeId:null}]),r();const u=d.selectedShapeIds.filter(y=>t.has(y));if(u.length!==d.selectedShapeIds.length)return t.put([{...d,selectedShapeIds:u}]),r();const m=d.hintingShapeIds.filter(y=>t.has(y));if(m.length!==d.hintingShapeIds.length)return t.put([{...d,hintingShapeIds:m}]),r();const h=d.erasingShapeIds.filter(y=>t.has(y));if(h.length!==d.erasingShapeIds.length)return t.put([{...d,erasingShapeIds:h}]),r()}};return r}const j_e=xN("bookmark",pn({title:Gt,description:Gt,image:Gt,favicon:Gt,src:Lf.nullable()})),V8=mi("com.tldraw.asset.bookmark",{MakeUrlsValid:1,AddFavicon:2}),B_e=Xi({sequenceId:"com.tldraw.asset.bookmark",recordType:"asset",filter:t=>t.type==="bookmark",sequence:[{id:V8.MakeUrlsValid,up:t=>{Lf.isValid(t.props.src)||(t.props.src="")},down:t=>{}},{id:V8.AddFavicon,up:t=>{Lf.isValid(t.props.favicon)||(t.props.favicon="")},down:t=>{delete t.props.favicon}}]}),F_e=xN("image",pn({w:Ot,h:Ot,name:Gt,isAnimated:en,mimeType:Gt.nullable(),src:Lf.nullable(),fileSize:So.optional()})),Bb=mi("com.tldraw.asset.image",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3,AddFileSize:4,MakeFileSizeOptional:5}),z_e=Xi({sequenceId:"com.tldraw.asset.image",recordType:"asset",filter:t=>t.type==="image",sequence:[{id:Bb.AddIsAnimated,up:t=>{t.props.isAnimated=!1},down:t=>{delete t.props.isAnimated}},{id:Bb.RenameWidthHeight,up:t=>{t.props.w=t.props.width,t.props.h=t.props.height,delete t.props.width,delete t.props.height},down:t=>{t.props.width=t.props.w,t.props.height=t.props.h,delete t.props.w,delete t.props.h}},{id:Bb.MakeUrlsValid,up:t=>{Lf.isValid(t.props.src)||(t.props.src="")},down:t=>{}},{id:Bb.AddFileSize,up:t=>{t.props.fileSize=-1},down:t=>{delete t.props.fileSize}},{id:Bb.MakeFileSizeOptional,up:t=>{t.props.fileSize===-1&&(t.props.fileSize=void 0)},down:t=>{t.props.fileSize===void 0&&(t.props.fileSize=-1)}}]}),U_e=xN("video",pn({w:Ot,h:Ot,name:Gt,isAnimated:en,mimeType:Gt.nullable(),src:Lf.nullable(),fileSize:Ot.optional()})),Fb=mi("com.tldraw.asset.video",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3,AddFileSize:4,MakeFileSizeOptional:5}),q_e=Xi({sequenceId:"com.tldraw.asset.video",recordType:"asset",filter:t=>t.type==="video",sequence:[{id:Fb.AddIsAnimated,up:t=>{t.props.isAnimated=!1},down:t=>{delete t.props.isAnimated}},{id:Fb.RenameWidthHeight,up:t=>{t.props.w=t.props.width,t.props.h=t.props.height,delete t.props.width,delete t.props.height},down:t=>{t.props.width=t.props.w,t.props.height=t.props.h,delete t.props.w,delete t.props.h}},{id:Fb.MakeUrlsValid,up:t=>{Lf.isValid(t.props.src)||(t.props.src="")},down:t=>{}},{id:Fb.AddFileSize,up:t=>{t.props.fileSize=-1},down:t=>{delete t.props.fileSize}},{id:Fb.MakeFileSizeOptional,up:t=>{t.props.fileSize===-1&&(t.props.fileSize=void 0)},down:t=>{t.props.fileSize===void 0&&(t.props.fileSize=-1)}}]}),H_e=Zc("asset",bN("type",{image:F_e,video:U_e,bookmark:j_e})),$_e=mi("com.tldraw.asset",{AddMeta:1}),V_e=Xi({sequenceId:"com.tldraw.asset",recordType:"asset",sequence:[{id:$_e.AddMeta,up:t=>{t.meta={}}}]}),lm=Qc("asset",{validator:H_e,scope:"document"}).withDefaultProperties(()=>({meta:{}})),sY={w:So,h:So,assetId:ww.nullable(),url:Vi},G8=Nl("bookmark",{NullAssetId:1,MakeUrlsValid:2}),iY={sequence:[{id:G8.NullAssetId,up:t=>{t.assetId===void 0&&(t.assetId=null)},down:"retired"},{id:G8.MakeUrlsValid,up:t=>{Vi.isValid(t.url)||(t.url="")},down:t=>{}}]},lY=pn({type:Nf("free","straight"),points:ia(jf)}),cY={color:ks,fill:dp,dash:Bf,size:$c,segments:ia(lY),isComplete:en,isClosed:en,isPen:en,scale:So},K8=Nl("draw",{AddInPen:1,AddScale:2}),uY={sequence:[{id:K8.AddInPen,up:t=>{const{points:e}=t.segments[0];if(e.length===0){t.isPen=!1;return}let n=!(e[0].z===0||e[0].z===.5);e[1]&&(n=n&&!(e[1].z===0||e[1].z===.5)),t.isPen=n},down:"retired"},{id:K8.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}}]},G_e=/(^\/r\/[^/]+\/?$)/,K_e=[{hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(G_e))return t}},{hostnames:["figma.com"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/embed\/?$/)){const n=e.searchParams.get("url");if(n)return n}}},{hostnames:["google.*"],fromEmbedUrl:t=>{const e=zt(t);if(!e)return;if(e.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&e.searchParams.has("center")&&e.searchParams.get("zoom")){const r=e.searchParams.get("zoom"),[o,a]=e.searchParams.get("center").split(",");return`https://www.google.com/maps/@${o},${a},${r}z`}}},{hostnames:["val.town"],fromEmbedUrl:t=>{const e=zt(t),n=e&&e.pathname.match(/\/embed\/(.+)\/?/);if(n)return`https://www.val.town/v/${n[1]}`}},{hostnames:["codesandbox.io"],fromEmbedUrl:t=>{const e=zt(t),n=e&&e.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return`https://codesandbox.io/s/${n[1]}`}},{hostnames:["codepen.io"],fromEmbedUrl:t=>{const e=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,n=t.match(e);if(n){const[r,o,a]=n;return`https://codepen.io/${o}/pen/${a}`}}},{hostnames:["scratch.mit.edu"],fromEmbedUrl:t=>{const e=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,n=t.match(e);if(n){const[r,o]=n;return`https://scratch.mit.edu/projects/${o}`}}},{hostnames:["*.youtube.com","youtube.com","youtu.be"],fromEmbedUrl:t=>{const e=zt(t);if(!e)return;if(e.hostname.replace(/^www./,"")==="youtube.com"){const r=e.pathname.match(/^\/embed\/([^/]+)\/?/);if(r)return`https://www.youtube.com/watch?v=${r[1]}`}}},{hostnames:["calendar.google.*"],fromEmbedUrl:t=>{const e=zt(t),n=e==null?void 0:e.searchParams.get("src");if(e!=null&&e.pathname.match(/\/calendar\/embed/)&&n){e.pathname="/calendar/u/0";const r=Array.from(e.searchParams.keys());for(const o of r)e.searchParams.delete(o);return e.searchParams.set("cid",n),e.href}}},{hostnames:["docs.google.*"],fromEmbedUrl:t=>{const e=zt(t);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/embed\/?$/))){e.pathname=e.pathname.replace(/\/embed$/,"/pub");const n=Array.from(e.searchParams.keys());for(const r of n)e.searchParams.delete(r);return e.href}}},{hostnames:["gist.github.com"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/\/([^/]+)\/([^/]+)/))return t.split("/").pop()?t:void 0}},{hostnames:["replit.com"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/)&&e.searchParams.has("embed"))return e.searchParams.delete("embed"),e.href}},{hostnames:["felt.com"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/embed\/map\//))return e.pathname=e.pathname.replace(/^\/embed/,""),e.href}},{hostnames:["open.spotify.com"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/embed\/(artist|album)\//))return e.origin+e.pathname.replace(/^\/embed/,"")}},{hostnames:["vimeo.com","player.vimeo.com"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.hostname==="player.vimeo.com"){const n=e.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{hostnames:["observablehq.com"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","")}#cell-*`;if(e&&e.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","/d")}#cell-*`}},{hostnames:["desmos.com"],fromEmbedUrl:t=>{const e=zt(t);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search==="?embed"&&e.hash==="")return t.replace("?embed","")}}],dY={w:So,h:So,url:Gt},dS=Nl("embed",{GenOriginalUrlInEmbed:1,RemoveDoesResize:2,RemoveTmpOldUrl:3,RemovePermissionOverrides:4}),pY={sequence:[{id:dS.GenOriginalUrlInEmbed,up:t=>{try{const e=t.url,n=new URL(e).host.replace("www.","");let r;for(const o of K_e)if(o.hostnames.includes(n))try{r=o.fromEmbedUrl(e)}catch(a){console.warn(a)}t.tmpOldUrl=t.url,t.url=r??""}catch{t.url="",t.tmpOldUrl=t.url}},down:"retired"},{id:dS.RemoveDoesResize,up:t=>{delete t.doesResize},down:"retired"},{id:dS.RemoveTmpOldUrl,up:t=>{delete t.tmpOldUrl},down:"retired"},{id:dS.RemovePermissionOverrides,up:t=>{delete t.overridePermissions},down:"retired"}]},fY={w:So,h:So,name:Gt,color:Nf(...ks.values)},W_e=Nl("frame",{AddColorProp:1}),mY={sequence:[{id:W_e.AddColorProp,up:t=>{t.color="black"},down:t=>{delete t.color}}]},IE=da.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),PE=da.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),Bc=da.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box","heart"]}),hY={geo:Bc,dash:Bf,url:Vi,w:So,h:So,growY:wE,scale:So,labelColor:EN,color:ks,fill:dp,size:$c,font:pp,align:IE,verticalAlign:PE,richText:Cw},Sc=Nl("geo",{AddUrlProp:1,AddLabelColor:2,RemoveJustify:3,AddCheckBox:4,AddVerticalAlign:5,MigrateLegacyAlign:6,AddCloud:7,MakeUrlsValid:8,AddScale:9,AddRichText:10}),gY={sequence:[{id:Sc.AddUrlProp,up:t=>{t.url=""},down:"retired"},{id:Sc.AddLabelColor,up:t=>{t.labelColor="black"},down:"retired"},{id:Sc.RemoveJustify,up:t=>{t.align==="justify"&&(t.align="start")},down:"retired"},{id:Sc.AddCheckBox,up:t=>{},down:"retired"},{id:Sc.AddVerticalAlign,up:t=>{t.verticalAlign="middle"},down:"retired"},{id:Sc.MigrateLegacyAlign,up:t=>{let e;switch(t.align){case"start":e="start-legacy";break;case"end":e="end-legacy";break;default:e="middle-legacy";break}t.align=e},down:"retired"},{id:Sc.AddCloud,up:t=>{},down:"retired"},{id:Sc.MakeUrlsValid,up:t=>{Vi.isValid(t.url)||(t.url="")},down:t=>{}},{id:Sc.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}},{id:Sc.AddRichText,up:t=>{t.richText=Ma(t.text),delete t.text}}]},bY={},yY={sequence:[]},vY={color:ks,size:$c,segments:ia(lY),isComplete:en,isPen:en,scale:So},Y_e=Nl("highlight",{AddScale:1}),xY={sequence:[{id:Y_e.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}}]},X_e=pn({topLeft:jf,bottomRight:jf,isCircle:en.optional()}),SY={w:So,h:So,playing:en,url:Vi,assetId:ww.nullable(),crop:X_e.nullable(),flipX:en,flipY:en,altText:Gt},zb=Nl("image",{AddUrlProp:1,AddCropProp:2,MakeUrlsValid:3,AddFlipProps:4,AddAltText:5}),EY={sequence:[{id:zb.AddUrlProp,up:t=>{t.url=""},down:"retired"},{id:zb.AddCropProp,up:t=>{t.crop=null},down:t=>{delete t.crop}},{id:zb.MakeUrlsValid,up:t=>{Vi.isValid(t.url)||(t.url="")},down:t=>{}},{id:zb.AddFlipProps,up:t=>{t.flipX=!1,t.flipY=!1},down:t=>{delete t.flipX,delete t.flipY}},{id:zb.AddAltText,up:t=>{t.altText=""},down:t=>{delete t.altText}}]},bM=da.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),J_e=pn({id:Gt,index:vN,x:Ot,y:Ot}),TY={color:ks,dash:Bf,size:$c,spline:bM,points:CE(Gt,J_e),scale:So},Ub=Nl("line",{AddSnapHandles:1,RemoveExtraHandleProps:2,HandlesToPoints:3,PointIndexIds:4,AddScale:5}),wY={sequence:[{id:Ub.AddSnapHandles,up:t=>{for(const e of Object.values(t.handles))e.canSnap=!0},down:"retired"},{id:Ub.RemoveExtraHandleProps,up:t=>{t.handles=FK(Object.values(t.handles).map(e=>[e.index,{x:e.x,y:e.y}]))},down:t=>{const e=Object.entries(t.handles).map(([n,r])=>({index:n,...r})).sort(oa);t.handles=Object.fromEntries(e.map((n,r)=>{const o=r===0?"start":r===e.length-1?"end":`handle:${n.index}`;return[o,{id:o,type:"vertex",canBind:!1,canSnap:!0,index:n.index,x:n.x,y:n.y}]}))}},{id:Ub.HandlesToPoints,up:t=>{const e=Object.entries(t.handles).map(([n,{x:r,y:o}])=>({x:r,y:o,index:n})).sort(oa);t.points=e.map(({x:n,y:r})=>({x:n,y:r})),delete t.handles},down:t=>{const e=d0(t.points.length);t.handles=Object.fromEntries(t.points.map((n,r)=>[e[r],{x:n.x,y:n.y}])),delete t.points}},{id:Ub.PointIndexIds,up:t=>{const e=d0(t.points.length);t.points=Object.fromEntries(t.points.map((n,r)=>{const o=e[r];return[o,{id:o,index:o,x:n.x,y:n.y}]}))},down:t=>{const e=Object.values(t.points).sort(oa);t.points=e.map(({x:n,y:r})=>({x:n,y:r}))}},{id:Ub.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}}]},CY={color:ks,labelColor:EN,size:$c,font:pp,fontSizeAdjustment:wE,align:IE,verticalAlign:PE,growY:wE,url:Vi,richText:Cw,scale:So},Cu=Nl("note",{AddUrlProp:1,RemoveJustify:2,MigrateLegacyAlign:3,AddVerticalAlign:4,MakeUrlsValid:5,AddFontSizeAdjustment:6,AddScale:7,AddLabelColor:8,AddRichText:9}),AY={sequence:[{id:Cu.AddUrlProp,up:t=>{t.url=""},down:"retired"},{id:Cu.RemoveJustify,up:t=>{t.align==="justify"&&(t.align="start")},down:"retired"},{id:Cu.MigrateLegacyAlign,up:t=>{switch(t.align){case"start":t.align="start-legacy";return;case"end":t.align="end-legacy";return;default:t.align="middle-legacy";return}},down:"retired"},{id:Cu.AddVerticalAlign,up:t=>{t.verticalAlign="middle"},down:"retired"},{id:Cu.MakeUrlsValid,up:t=>{Vi.isValid(t.url)||(t.url="")},down:t=>{}},{id:Cu.AddFontSizeAdjustment,up:t=>{t.fontSizeAdjustment=0},down:t=>{delete t.fontSizeAdjustment}},{id:Cu.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}},{id:Cu.AddLabelColor,up:t=>{t.labelColor="black"},down:t=>{delete t.labelColor}},{id:Cu.AddRichText,up:t=>{t.richText=Ma(t.text),delete t.text}}]},yM=da.defineEnum("tldraw:textAlign",{defaultValue:"start",values:["start","middle","end"]}),_Y={color:ks,size:$c,font:pp,textAlign:yM,w:So,richText:Cw,scale:So,autoSize:en},$I=Nl("text",{RemoveJustify:1,AddTextAlign:2,AddRichText:3}),kY={sequence:[{id:$I.RemoveJustify,up:t=>{t.align==="justify"&&(t.align="start")},down:"retired"},{id:$I.AddTextAlign,up:t=>{t.textAlign=t.align,delete t.align},down:t=>{t.align=t.textAlign,delete t.textAlign}},{id:$I.AddRichText,up:t=>{t.richText=Ma(t.text),delete t.text}}]},IY={w:So,h:So,time:Ot,playing:en,autoplay:en,url:Vi,assetId:ww.nullable(),altText:Gt},pS=Nl("video",{AddUrlProp:1,MakeUrlsValid:2,AddAltText:3,AddAutoplay:4}),PY={sequence:[{id:pS.AddUrlProp,up:t=>{t.url=""},down:"retired"},{id:pS.MakeUrlsValid,up:t=>{Vi.isValid(t.url)||(t.url="")},down:t=>{}},{id:pS.AddAltText,up:t=>{t.altText=""},down:t=>{delete t.altText}},{id:pS.AddAutoplay,up:t=>{t.autoplay=!0},down:t=>{delete t.autoplay}}]},qb=mi("com.tldraw.store",{RemoveCodeAndIconShapeTypes:1,AddInstancePresenceType:2,RemoveTLUserAndPresenceAndAddPointer:3,RemoveUserDocument:4,FixIndexKeys:5}),Q_e=Rh({sequenceId:"com.tldraw.store",retroactive:!1,sequence:[{id:qb.RemoveCodeAndIconShapeTypes,scope:"store",up:t=>{for(const[e,n]of Ts(t))n.typeName==="shape"&&(n.type==="icon"||n.type==="code")&&delete t[e]}},{id:qb.AddInstancePresenceType,scope:"store",up(t){}},{id:qb.RemoveTLUserAndPresenceAndAddPointer,scope:"store",up:t=>{for(const[e,n]of Ts(t))n.typeName.match(/^(user|user_presence)$/)&&delete t[e]}},{id:qb.RemoveUserDocument,scope:"store",up:t=>{for(const[e,n]of Ts(t))n.typeName.match("user_document")&&delete t[e]}},{id:qb.FixIndexKeys,scope:"record",up:t=>{if(["shape","page"].includes(t.typeName)&&"index"in t){const e=t;if(e.index.endsWith("0")&&e.index!=="a0"&&(e.index=e.index.slice(0,-1)+Y8(3)),t.typeName==="shape"&&e.type==="line"){const n=e;for(const[r,o]of Ts(n.props.points))o.index.endsWith("0")&&o.index!=="a0"&&(o.index=o.index.slice(0,-1)+Y8(3))}}},down:()=>{}}]}),W8="123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Z_e=()=>W8.charAt(Math.floor(Math.random()*W8.length)),Y8=t=>Array.from({length:t},Z_e).join(""),e2e={arrow:{migrations:eY,props:ZW},bookmark:{migrations:iY,props:sY},draw:{migrations:uY,props:cY},embed:{migrations:pY,props:dY},frame:{migrations:mY,props:fY},geo:{migrations:gY,props:hY},group:{migrations:yY,props:bY},highlight:{migrations:xY,props:vY},image:{migrations:EY,props:SY},line:{migrations:wY,props:TY},note:{migrations:AY,props:CY},text:{migrations:kY,props:_Y},video:{migrations:PY,props:IY}},t2e={arrow:{migrations:nY,props:tY}};function n2e({shapes:t=e2e,bindings:e=t2e,migrations:n}={}){const r=new Map;for(const i of oo(t))for(const l of XW(i.props??{}).keys()){if(r.has(l.id)&&r.get(l.id)!==l)throw new Error(`Multiple StyleProp instances with the same id: ${l.id}`);r.set(l.id,l)}const o=r_e(t),a=e_e(e),s=E_e(r);return hN.create({asset:lm,binding:a,camera:jc,document:wN,instance:s,instance_page_state:Xl,page:Cs,instance_presence:O_e,pointer:TN,shape:o},{migrations:[Q_e,V_e,p_e,R_e,T_e,C_e,x_e,P_e,k_e,n_e,B_e,z_e,q_e,...q8("shape",t),...q8("binding",e),...n??[]],onValidationFailure:D_e,createIntegrityChecker:L_e})}const f0=[{locale:"id",label:"Bahasa Indonesia"},{locale:"ms",label:"Bahasa Melayu"},{locale:"ca",label:"Catal"},{locale:"cs",label:"etina"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espaol"},{locale:"tl",label:"Filipino"},{locale:"fr",label:"Franais"},{locale:"gl",label:"Galego"},{locale:"hr",label:"Hrvatski"},{locale:"it",label:"Italiano"},{locale:"hu",label:"Magyar"},{locale:"nl",label:"Nederlands"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugus - Brasil"},{locale:"pt-pt",label:"Portugus - Europeu"},{locale:"ro",label:"Romn"},{locale:"sl",label:"Slovenina"},{locale:"so",label:"Somali"},{locale:"fi",label:"Suomi"},{locale:"sv",label:"Svenska"},{locale:"vi",label:"Ting Vit"},{locale:"tr",label:"Trke"},{locale:"el",label:""},{locale:"ru",label:""},{locale:"uk",label:""},{locale:"he",label:""},{locale:"ur",label:""},{locale:"ar",label:""},{locale:"fa",label:""},{locale:"ne",label:""},{locale:"mr",label:""},{locale:"hi-in",label:""},{locale:"bn",label:""},{locale:"pa",label:""},{locale:"gu-in",label:""},{locale:"ta",label:""},{locale:"te",label:""},{locale:"kn",label:""},{locale:"ml",label:""},{locale:"th",label:""},{locale:"km-kh",label:""},{locale:"ko-kr",label:""},{locale:"ja",label:""},{locale:"zh-cn",label:""},{locale:"zh-tw",label:" ()"}];function r2e(){const t=typeof window<"u"&&window.navigator?window.navigator.languages??["en"]:["en"];return o2e(t)}function o2e(t){for(const e of t){const n=a2e(e);if(n)return n}return"en"}const X8={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function a2e(t){const e=f0.find(o=>o.locale===t.toLowerCase());if(e)return e.locale;const[n,r]=t.split(/[-_]/).map(o=>o.toLowerCase());if(r){const o=f0.find(a=>a.locale===n);if(o)return o.locale}return n in X8?X8[n]:null}Cp("@tldraw/tlschema","4.2.0","esm");function s2e(){return g.jsx("div",{className:"tl-background"})}function cv(t,e,n,r,o,a){w.useLayoutEffect(()=>{const s=t.current;if(!s||e===void 0)return;let i=`translate(${e}px, ${n}px)`;r!==void 0&&(i+=` scale(${r})`),o!==void 0&&(i+=` rotate(${o}rad)`),a&&(i+=` translate(${a.x}px, ${a.y}px)`),s.style.transform=i})}const Ja={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:-1+(4-2*t)*t,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1- --t*t*t*t,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1+--t*t*t*t*t,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t<=0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t>=1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t<=0?0:t>=1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2};class R{constructor(e=0,n=0,r=1){this.x=e,this.y=n,this.z=r}get pressure(){return this.z}set(e=this.x,n=this.y,r=this.z){return this.x=e,this.y=n,this.z=r,this}setTo({x:e=0,y:n=0,z:r=1}){return this.x=e,this.y=n,this.z=r,this}rot(e){if(e===0)return this;const{x:n,y:r}=this,o=Math.sin(e),a=Math.cos(e);return this.x=n*a-r*o,this.y=n*o+r*a,this}rotWith(e,n){if(n===0)return this;const r=this.x-e.x,o=this.y-e.y,a=Math.sin(n),s=Math.cos(n);return this.x=e.x+(r*s-o*a),this.y=e.y+(r*a+o*s),this}clone(){const{x:e,y:n,z:r}=this;return new R(e,n,r)}sub(e){return this.x-=e.x,this.y-=e.y,this}subXY(e,n){return this.x-=e,this.y-=n,this}subScalar(e){return this.x-=e,this.y-=e,this}add(e){return this.x+=e.x,this.y+=e.y,this}addXY(e,n){return this.x+=e,this.y+=n,this}addScalar(e){return this.x+=e,this.y+=e,this}clamp(e,n){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),n!==void 0&&(this.x=Math.min(this.x,n),this.y=Math.min(this.y,n)),this}div(e){return this.x/=e,this.y/=e,this}divV(e){return this.x/=e.x,this.y/=e.y,this}mul(e){return this.x*=e,this.y*=e,this}mulV(e){return this.x*=e.x,this.y*=e.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(e,n){const r=R.Tan(e,this);return this.add(r.mul(n))}neg(){return this.x*=-1,this.y*=-1,this}cross(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}dpr(e){return R.Dpr(this,e)}cpr(e){return R.Cpr(this,e)}len2(){return R.Len2(this)}len(){return R.Len(this)}pry(e){return R.Pry(this,e)}per(){const{x:e,y:n}=this;return this.x=n,this.y=-e,this}uni(){const e=this.len();return e===0?this:(this.x/=e,this.y/=e,this)}tan(e){return this.sub(e).uni()}dist(e){return R.Dist(this,e)}distanceToLineSegment(e,n){return R.DistanceToLineSegment(e,n,this)}slope(e){return R.Slope(this,e)}snapToGrid(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}angle(e){return R.Angle(this,e)}toAngle(){return R.ToAngle(this)}lrp(e,n){return this.x=this.x+(e.x-this.x)*n,this.y=this.y+(e.y-this.y)*n,this}equals(e){return R.Equals(this,e)}equalsXY(e,n){return R.EqualsXY(this,e,n)}toFixed(){return this.x=Kl(this.x),this.y=Kl(this.y),this}toString(){return R.ToString(R.ToFixed(this))}toJson(){return R.ToJson(this)}toArray(){return R.ToArray(this)}static Add(e,n){return new R(e.x+n.x,e.y+n.y)}static AddXY(e,n,r){return new R(e.x+n,e.y+r)}static Sub(e,n){return new R(e.x-n.x,e.y-n.y)}static SubXY(e,n,r){return new R(e.x-n,e.y-r)}static AddScalar(e,n){return new R(e.x+n,e.y+n)}static SubScalar(e,n){return new R(e.x-n,e.y-n)}static Div(e,n){return new R(e.x/n,e.y/n)}static Mul(e,n){return new R(e.x*n,e.y*n)}static DivV(e,n){return new R(e.x/n.x,e.y/n.y)}static MulV(e,n){return new R(e.x*n.x,e.y*n.y)}static Neg(e){return new R(-e.x,-e.y)}static Per(e){return new R(e.y,-e.x)}static Abs(e){return new R(Math.abs(e.x),Math.abs(e.y))}static Dist(e,n){return((e.y-n.y)**2+(e.x-n.x)**2)**.5}static ManhattanDist(e,n){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)}static DistMin(e,n,r){return(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)<r**2}static Dist2(e,n){return(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)}static Dpr(e,n){return e.x*n.x+e.y*n.y}static Cross(e,n){return new R(e.y*n.z-e.z*n.y,e.z*n.x-e.x*n.z)}static Cpr(e,n){return e.x*n.y-n.x*e.y}static Len2(e){return e.x*e.x+e.y*e.y}static Len(e){return(e.x*e.x+e.y*e.y)**.5}static Pry(e,n){return R.Dpr(e,n)/R.Len(n)}static Uni(e){const n=R.Len(e);return new R(n===0?0:e.x/n,n===0?0:e.y/n)}static Tan(e,n){return R.Uni(R.Sub(e,n))}static Min(e,n){return new R(Math.min(e.x,n.x),Math.min(e.y,n.y))}static Max(e,n){return new R(Math.max(e.x,n.x),Math.max(e.y,n.y))}static From({x:e,y:n,z:r=1}){return new R(e,n,r)}static FromArray(e){return new R(e[0],e[1])}static Rot(e,n=0){const r=Math.sin(n),o=Math.cos(n);return new R(e.x*o-e.y*r,e.x*r+e.y*o)}static RotWith(e,n,r){const o=e.x-n.x,a=e.y-n.y,s=Math.sin(r),i=Math.cos(r);return new R(n.x+(o*i-a*s),n.y+(o*s+a*i))}static NearestPointOnLineThroughPoint(e,n,r){return R.Mul(n,R.Sub(r,e).pry(n)).add(e)}static NearestPointOnLineSegment(e,n,r,o=!0){if(R.Equals(e,r)||R.Equals(n,r))return R.From(r);const a=R.Tan(n,e),s=R.Add(e,R.Mul(a,R.Sub(r,e).pry(a)));if(o){if(s.x<Math.min(e.x,n.x))return R.Cast(e.x<n.x?e:n);if(s.x>Math.max(e.x,n.x))return R.Cast(e.x>n.x?e:n);if(s.y<Math.min(e.y,n.y))return R.Cast(e.y<n.y?e:n);if(s.y>Math.max(e.y,n.y))return R.Cast(e.y>n.y?e:n)}return s}static DistanceToLineThroughPoint(e,n,r){return R.Dist(r,R.NearestPointOnLineThroughPoint(e,n,r))}static DistanceToLineSegment(e,n,r,o=!0){return R.Dist(r,R.NearestPointOnLineSegment(e,n,r,o))}static Snap(e,n=1){return new R(Math.round(e.x/n)*n,Math.round(e.y/n)*n)}static Cast(e){return e instanceof R?e:R.From(e)}static Slope(e,n){return e.x===n.y?NaN:(e.y-n.y)/(e.x-n.x)}static IsNaN(e){return isNaN(e.x)||isNaN(e.y)}static Angle(e,n){return Math.atan2(n.y-e.y,n.x-e.x)}static AngleBetween(e,n){const r=e.x*n.x+e.y*n.y,o=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(n.x,2)+Math.pow(n.y,2)));return(e.x*n.y-e.y*n.x<0?-1:1)*Math.acos(Lt(r/o,-1,1))}static Lrp(e,n,r){return R.Sub(n,e).mul(r).add(e)}static Med(e,n){return new R((e.x+n.x)/2,(e.y+n.y)/2)}static Equals(e,n){return Math.abs(e.x-n.x)<1e-4&&Math.abs(e.y-n.y)<1e-4}static EqualsXY(e,n,r){return e.x===n&&e.y===r}static Clockwise(e,n,r){return(r.x-e.x)*(n.y-e.y)-(n.x-e.x)*(r.y-e.y)<0}static Rescale(e,n){const r=R.Len(e);return new R(n*e.x/r,n*e.y/r)}static ScaleWithOrigin(e,n,r){return R.Sub(e,r).mul(n).add(r)}static ToFixed(e){return new R(Kl(e.x),Kl(e.y))}static ToInt(e){return new R(parseInt(e.x.toFixed(0)),parseInt(e.y.toFixed(0)),parseInt((e.z??0).toFixed(0)))}static ToCss(e){return`${e.x},${e.y}`}static Nudge(e,n,r){return R.Add(e,R.Tan(n,e).mul(r))}static ToString(e){return`${e.x}, ${e.y}`}static ToAngle(e){let n=Math.atan2(e.y,e.x);return n<0&&(n+=Math.PI*2),n}static FromAngle(e,n=1){return new R(Math.cos(e)*n,Math.sin(e)*n)}static ToArray(e){return[e.x,e.y,e.z]}static ToJson(e){const{x:n,y:r,z:o}=e;return{x:n,y:r,z:o}}static Average(e){const n=e.length,r=new R(0,0);if(n===0)return r;for(let o=0;o<n;o++)r.add(e[o]);return r.div(n)}static Clamp(e,n,r){return r===void 0?new R(Math.min(Math.max(e.x,n)),Math.min(Math.max(e.y,n))):new R(Math.min(Math.max(e.x,n),r),Math.min(Math.max(e.y,n),r))}static PointsBetween(e,n,r=6){const o=[];for(let a=0;a<r;a++){const s=Ja.easeInQuad(a/(r-1)),i=R.Lrp(e,n,s);i.z=Math.min(1,.5+Math.abs(.5-i2e(s))*.65),o.push(i)}return o}static SnapToGrid(e,n=8){return new R(Math.round(e.x/n)*n,Math.round(e.y/n)*n)}}const i2e=t=>t<.5?2*t*t:-1+(4-2*t)*t;function Aa(t){return`${ie(t.x)},${ie(t.y)} `}function ei(t,e){return`${ie((t.x+e.x)/2)},${ie((t.y+e.y)/2)} `}const Un=Math.PI,yo=Un/2,mr=Un*2,l2e=Math.sin;function Lt(t,e,n){return Math.max(e,typeof n<"u"?Math.min(t,n):t)}function fS(t,e=1e10){return t?Math.round(t*e)/e:0}function Eo(t,e,n=1e-6){return Math.abs(t-e)<=n}function ep(t,e,n=1e-6){return t<e||Eo(t,e,n)}function c2e(t,e){const n=Math.pow(t-e,2)/Math.pow(t+e,2);return Un*(t+e)*(1+3*n/(10+Math.sqrt(4-3*n)))}function OE(t){return t=t%mr,t<0?t=t+mr:t===0&&(t=0),t}function CN(t,e){return t=OE(t),e=OE(e),t>e&&(e+=mr),e-t}function u2e(t,e){return mr-CN(t,e)}function v1(t,e){const n=(e-t)%mr;return 2*n%mr-n}function vM(t){return(mr+t)%mr}function ME(t,e){const n=mr/e;let r=Math.floor((vM(t)+n/2)/n)*n%mr;return r<Un&&(r+=mr),r>Un&&(r-=mr),r}function OY(t,e){return t===e||Eo(t%(Math.PI/2)-e%(Math.PI/2),0)}function d2e(t){return t*Un/180}function p2e(t){return t*180/Un}function AN(t,e,n){return new R(t.x,t.y).add(R.FromAngle(n,e))}function VI(t,e,n){const r=t/2,o=e/2,a=[];let s=1/0,i=-1/0,l=1/0,c=-1/0;for(let y=0;y<n;y++){const v=mr/n,x=-yo+y*v,S=r+r*Math.cos(x),T=o+o*Math.sin(x);S<s&&(s=S),T<l&&(l=T),S>i&&(i=S),T>c&&(c=T),a.push(new R(S,T))}const d=i-s,u=c-l,m=t-d,h=e-u;if(m!==0||h!==0)for(let y=0;y<a.length;y++){const v=a[y];v.x=(v.x-s)/d*t,v.y=(v.y-l)/u*e}return a}function Hb(t,e,n,r){return t<r&&n<e}function Gl(t,e,n,r){const o=Math.max(t,n),a=Math.min(e,r);return o<=a?[o,a]:null}function J8(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function Ss(t,e){let n=0,r,o;for(let a=0;a<e.length;a++){if(r=e[a],r.x===t.x&&r.y===t.y||(o=e[(a+1)%e.length],R.Dist(t,r)+R.Dist(t,o)===R.Dist(r,o)))return!0;r.y<=t.y?o.y>t.y&&J8(r,o,t)>0&&(n+=1):o.y<=t.y&&J8(r,o,t)<0&&(n-=1)}return n!==0}function ie(t){return Math.round(t*1e4)/1e4}function Kl(t){return Math.round(t*100)/100}const Q8=t=>Math.abs(t)<Number.MAX_SAFE_INTEGER;function Z8(t,e,n,r){let o;if(Math.abs(t)>Un){o=v1(e,r);const a=v1(r,n);return Math.abs(o)<Math.abs(a)?o/t:(t-a)/t}else{o=v1(e,r);const a=o/t;return Math.sign(o)!==Math.sign(t)?Math.abs(a)>.5?1:0:a}}function f2e(t,e,n,r){const o=2*((e-t)%mr)%mr-(e-t)%mr;return r?(mr-Math.abs(o))*(n?1:-1):o}function MY(t,e,n){const r=-2*(t.x*(e.y-n.y)-t.y*(e.x-n.x)+e.x*n.y-n.x*e.y),o=((t.x*t.x+t.y*t.y)*(n.y-e.y)+(e.x*e.x+e.y*e.y)*(t.y-n.y)+(n.x*n.x+n.y*n.y)*(e.y-t.y))/r,a=((t.x*t.x+t.y*t.y)*(e.x-n.x)+(e.x*e.x+e.y*e.y)*(n.x-t.x)+(n.x*n.x+n.y*n.y)*(t.x-e.x))/r;return!Number.isFinite(o)||!Number.isFinite(a)?null:new R(o,a)}const GI=({brush:t,color:e,opacity:n,className:r})=>{const o=w.useRef(null);cv(o,t.x,t.y);const a=ie(Math.max(1,t.w)),s=ie(Math.max(1,t.h));return g.jsx("svg",{className:"tl-overlays__item",ref:o,"aria-hidden":"true",children:e?g.jsxs("g",{className:"tl-brush",opacity:n,children:[g.jsx("rect",{width:a,height:s,fill:e,opacity:.75}),g.jsx("rect",{width:a,height:s,fill:"none",stroke:e,opacity:.1})]}):g.jsx("rect",{className:`tl-brush tl-brush__default ${r}`,width:a,height:s})})};var KI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var e9;function m2e(){return e9||(e9=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",s=0;s<arguments.length;s++){var i=arguments[s];i&&(a=o(a,r(i)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var i in a)e.call(a,i)&&a[i]&&(s=o(s,i));return s}function o(a,s){return s?a?a+" "+s:a+s:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(KI)),KI.exports}var h2e=m2e();const pt=Wi(h2e),Nn={isSafari:!1,isIos:!1,isChromeForIos:!1,isFirefox:!1,isAndroid:!1,isDarwin:!1,hasCanvasSupport:!1};typeof window<"u"&&"navigator"in window&&(Nn.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Nn.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),Nn.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),Nn.isFirefox=/firefox/i.test(navigator.userAgent),Nn.isAndroid=/android/i.test(navigator.userAgent),Nn.isDarwin=window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,Nn.hasCanvasSupport=typeof window<"u"&&"Promise"in window&&"HTMLCanvasElement"in window);const t9={isLocked:!1,wheelBehavior:"pan",panSpeed:1,zoomSpeed:1,zoomSteps:[.05,.1,.25,.5,1,2,4,8]},WI={duration:0,easing:Ja.easeInOutCubic},n9={CAMERA_MOVE:-10},g2e=["top","right","bottom","left"],r9=0,_N=2,mS=1,o9=5,b2e=128;var YI={};const y2e={},RY=Ha("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),Ur={logPreventDefaults:Ha("logPreventDefaults",{defaults:{all:!1}}),logPointerCaptures:Ha("logPointerCaptures",{defaults:{all:!1}}),logElementRemoves:Ha("logElementRemoves",{defaults:{all:!1}}),debugSvg:Ha("debugSvg",{defaults:{all:!1}}),showFps:Ha("showFps",{defaults:{all:!1}}),measurePerformance:Ha("measurePerformance",{defaults:{all:!1}}),throwToBlob:Ha("throwToBlob",{defaults:{all:!1}}),reconnectOnPing:Ha("reconnectOnPing",{defaults:{all:!1}}),debugCursors:Ha("debugCursors",{defaults:{all:!1}}),forceSrgb:Ha("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:Ha("debugGeometry",{defaults:{all:!1}}),hideShapes:Ha("hideShapes",{defaults:{all:!1}}),editOnType:Ha("editOnType",{defaults:{all:!1}}),a11y:Ha("a11y",{defaults:{all:!1}}),debugElbowArrows:Ha("debugElbowArrows",{defaults:{all:!1}})};if(typeof Element<"u"){const t=Element.prototype.removeChild;si("element removal logging",()=>{Ur.logElementRemoves.get()?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),t.call(this,e)}:Element.prototype.removeChild=t})}function Ha(t,{defaults:e,shouldStoreForSession:n=!0}){return v2e({name:t,defaults:e,shouldStoreForSession:n})}function v2e(t){const e=S2e(t),n=t.shouldStoreForSession?x2e(t.name):null,r=Ir(`debug:${t.name}`,n??e);return typeof window<"u"&&(t.shouldStoreForSession&&si(`debug:${t.name}`,()=>{const o=r.get();o===e?WK(`tldraw_debug:${t.name}`):HD(`tldraw_debug:${t.name}`,JSON.stringify(o))}),Object.defineProperty(window,`tldraw${t.name.replace(/^[a-z]/,o=>o.toUpperCase())}`,{get(){return r.get()},set(o){r.set(o)},configurable:!0})),Object.assign(r,t,{reset:()=>r.set(e)})}function x2e(t){try{return JSON.parse(KK(`tldraw_debug:${t}`)??"null")}catch{return null}}function XI(t){try{return t()}catch{return null}}function S2e(t){switch(XI(()=>YI.TLDRAW_ENV)??XI(()=>YI.VERCEL_PUBLIC_TLDRAW_ENV)??XI(()=>YI.NEXT_PUBLIC_TLDRAW_ENV)??"production"){case"production":return t.defaults.production??t.defaults.all;case"preview":case"staging":return t.defaults.staging??t.defaults.all;default:return t.defaults.development??t.defaults.all}}function RE(t){if(t.nodeType===Node.ELEMENT_NODE)return t;if(t.parentElement)return RE(t.parentElement);throw Error("Could not find a parent element of an HTML type!")}function Nt(t){t.preventDefault(),Ur.logPreventDefaults.get()&&console.warn("preventDefault called on event:",t)}function uv(t,e){if(t.setPointerCapture(e.pointerId),Ur.logPointerCaptures.get()){const n=RY.get();n.set(t,(n.get(t)??0)+1),console.warn("setPointerCapture called on element:",t,e)}}function dv(t,e){if(t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),Ur.logPointerCaptures.get())){const n=RY.get();n.get(t)===1?n.delete(t):n.has(t)?n.set(t,n.get(t)-1):console.warn("Release without capture"),console.warn("releasePointerCapture called on element:",t,e)}}const $a=(t,e,n)=>{t&&t.style.setProperty(e,n)};function DY(t=!1){const{activeElement:e}=document,n=t?["input","textarea"]:["input","select","button","textarea"];return!!(e&&(e.isContentEditable||n.indexOf(e.tagName.toLowerCase())>-1||e.classList.contains("tlui-slider__thumb")))}const Pr=t=>Nn.isDarwin?t.metaKey:t.ctrlKey||t.metaKey;function Pa(t,e){return t.markEventAsHandled(e),{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,metaKey:e.metaKey,accelKey:Pr(e),pointerId:e.pointerId,button:e.button,isPen:e.pointerType==="pen"}}function kN(t,e){return Aw(`${t}_${e}`)}function cm(t){return Aw(`${w.useId()}${t??""}`)}function Zl(t){const e=ra(w.useContext(NY));return Aw(`${e}_${t}`)}function Aw(t){return t.replace(/:/g,"_")}const NY=w.createContext(null);function E2e({children:t}){const e=cm();return g.jsx(NY.Provider,{value:e,children:t})}const IN=w.createContext(null);function ue(){const t=bt.useContext(IN);if(!t)throw new Error("useEditor must be used inside of the <Tldraw /> or <TldrawEditor /> components");return t}function lo(){return bt.useContext(IN)}function PN({editor:t,children:e}){return g.jsx(IN.Provider,{value:t,children:g.jsx(E2e,{children:e})})}function _w(){const t=ue(),e=ce("current tool",()=>t.getCurrentTool(),[t]),n=w.useMemo(function(){function o(h){if(!t.wasEventAlreadyHandled(h)){if(h.button===_N){t.dispatch({type:"pointer",target:"canvas",name:"right_click",...Pa(t,h)});return}h.button!==0&&h.button!==1&&h.button!==5||(uv(h.currentTarget,h),t.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...Pa(t,h)}))}}function a(h){t.wasEventAlreadyHandled(h)||h.button!==0&&h.button!==1&&h.button!==2&&h.button!==5||(dv(h.currentTarget,h),t.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...Pa(t,h)}))}function s(h){if(t.wasEventAlreadyHandled(h)||t.getInstanceState().isPenMode&&h.pointerType!=="pen")return;const y=h.pointerType==="mouse"||h.pointerType==="pen";t.updateInstanceState({isHoveringCanvas:y?!0:null})}function i(h){if(t.wasEventAlreadyHandled(h)||t.getInstanceState().isPenMode&&h.pointerType!=="pen")return;const y=h.pointerType==="mouse"||h.pointerType==="pen";t.updateInstanceState({isHoveringCanvas:y?!1:null})}function l(h){t.wasEventAlreadyHandled(h)||(t.markEventAsHandled(h),Nt(h))}function c(h){var v;if(t.wasEventAlreadyHandled(h)||(t.markEventAsHandled(h),!(h.target instanceof HTMLElement)))return;const y=(v=t.getEditingShape())==null?void 0:v.id;!(y&&h.target.closest(`[data-shape-id="${y}"]`))&&h.target.tagName!=="A"&&h.target.tagName!=="TEXTAREA"&&!h.target.isContentEditable&&Nt(h)}function d(h){t.wasEventAlreadyHandled(h)||Nt(h)}async function u(h){var v,x;if(t.wasEventAlreadyHandled(h))return;if(Nt(h),h.stopPropagation(),(x=(v=h.dataTransfer)==null?void 0:v.files)!=null&&x.length){const S=Array.from(h.dataTransfer.files);await t.putExternalContent({type:"files",files:S,point:t.screenToPage({x:h.clientX,y:h.clientY})});return}const y=h.dataTransfer.getData("url");if(y){await t.putExternalContent({type:"url",url:y,point:t.screenToPage({x:h.clientX,y:h.clientY})});return}}function m(h){t.wasEventAlreadyHandled(h)||h.stopPropagation()}return{onPointerDown:o,onPointerUp:a,onPointerEnter:s,onPointerLeave:i,onDragOver:d,onDrop:u,onTouchStart:l,onTouchEnd:c,onClick:m}},[t]);return w.useEffect(()=>{let r,o;function a(s){if(t.wasEventAlreadyHandled(s)||(t.markEventAsHandled(s),s.clientX===r&&s.clientY===o))return;r=s.clientX,o=s.clientY;const i=!Nn.isIos&&e.useCoalescedEvents&&s.getCoalescedEvents?s.getCoalescedEvents():[s];for(const l of i)t.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...Pa(t,l)})}return document.body.addEventListener("pointermove",a),()=>{document.body.removeEventListener("pointermove",a)}},[t,e]),n}function T2e(){const t=ue();w.useEffect(()=>{let e=t.getInstanceState().isCoarsePointer;const n=s=>{const i=s.pointerType!=="mouse";e!==i&&(e=i,t.updateInstanceState({isCoarsePointer:i}))};window.addEventListener("pointerdown",n,{capture:!0});const r=window.matchMedia&&window.matchMedia("(any-pointer: coarse)"),o=Nn.isFirefox&&!Nn.isAndroid&&!Nn.isIos,a=()=>{const s=o?!1:r.matches;e===s&&(e=s,t.updateInstanceState({isCoarsePointer:s}))};return r&&(r.addEventListener("change",a),a()),()=>{window.removeEventListener("pointerdown",n,{capture:!0}),r&&r.removeEventListener("change",a)}},[t])}const LY=w.createContext(null);function jY({container:t,children:e}){return g.jsx(LY.Provider,{value:t,children:e})}function Ao(){return ra(w.useContext(LY),"useContainer used outside of <Tldraw />")}function w2e(){const t=ue(),e=Ao(),n=ce("isEditing",()=>t.getEditingShapeId(),[t]),r=ce("isFocused",()=>t.getIsFocused(),[t]);w.useEffect(()=>{if(!e)return;function o(a){if(a.isSpecialRedispatchedEvent)return;Nt(a),a.stopPropagation();const s=e.querySelector(".tl-canvas");if(!s)return;const i=new DragEvent(a.type,a);i.isSpecialRedispatchedEvent=!0,s.dispatchEvent(i)}return e.addEventListener("dragover",o),e.addEventListener("drop",o),()=>{e.removeEventListener("dragover",o),e.removeEventListener("drop",o)}},[e]),w.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;let o=null;const a=()=>{o!=null&&o();const s=`(resolution: ${window.devicePixelRatio}dppx)`,i=matchMedia(s),l=c=>{c.type==="change"&&a()};i.addEventListener?i.addEventListener("change",a):i.addListener&&i.addListener(l),o=()=>{i.removeEventListener?i.removeEventListener("change",a):i.removeListener&&i.removeListener(l)},t.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return a(),()=>{o==null||o()}},[t]),w.useEffect(()=>{if(!r)return;const o=l=>{if(l.altKey&&(t.isIn("zoom")||!t.getPath().endsWith(".idle"))&&!$b(t)&&Nt(l),t.wasEventAlreadyHandled(l))return;t.markEventAsHandled(l);const c=!!t.getSelectedShapeIds().length;switch(l.key){case"=":case"-":case"0":{if(l.metaKey||l.ctrlKey){Nt(l);return}break}case"Tab":{if($b(t))return;c&&!n&&Nt(l);break}case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{if($b(t))return;c&&(l.metaKey||l.ctrlKey)&&Nt(l);break}case",":return;case"Escape":{if((t.getEditingShape()||t.getSelectedShapeIds().length>0)&&Nt(l),t.menus.getOpenMenus().length>0)return;t.inputs.keys.has("Escape")||(t.inputs.keys.add("Escape"),t.cancel(),e.focus());return}default:if($b(t))return}const d={type:"keyboard",name:l.repeat?"key_repeat":"key_down",key:l.key,code:l.code,shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey,metaKey:l.metaKey,accelKey:Pr(l)};t.dispatch(d)},a=l=>{if(t.wasEventAlreadyHandled(l)||(t.markEventAsHandled(l),$b(t))||l.key===",")return;const c={type:"keyboard",name:"key_up",key:l.key,code:l.code,shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey,metaKey:l.metaKey,accelKey:Pr(l)};t.dispatch(c)};function s(l){var c,d;if(e.contains(l.target)){const u=l.touches[0].pageX,m=l.touches[0].radiusX||0;(u-m<10||u+m>t.getViewportScreenBounds().width-10)&&(((c=l.target)==null?void 0:c.tagName)==="BUTTON"&&((d=l.target)==null||d.click()),Nt(l))}}const i=l=>{e.contains(l.target)&&(l.ctrlKey||l.metaKey)&&Nt(l)};return e.addEventListener("touchstart",s,{passive:!1}),e.addEventListener("wheel",i,{passive:!1}),document.addEventListener("gesturestart",Nt),document.addEventListener("gesturechange",Nt),document.addEventListener("gestureend",Nt),e.addEventListener("keydown",o),e.addEventListener("keyup",a),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("wheel",i),document.removeEventListener("gesturestart",Nt),document.removeEventListener("gesturechange",Nt),document.removeEventListener("gestureend",Nt),e.removeEventListener("keydown",o),e.removeEventListener("keyup",a)}},[t,e,r,n])}function $b(t){return t.menus.hasOpenMenus()||DY()}function C2e({className:t,zoom:e,point:n,color:r,viewport:o,opacity:a=1}){const s=w.useRef(null);cv(s,Lt(n.x,o.minX+5/e,o.maxX-5/e),Lt(n.y,o.minY+5/e,o.maxY-5/e),1/e,R.Angle(o.center,n));const i=Zl("cursor_hint");return g.jsxs("svg",{ref:s,className:pt("tl-overlays__item",t),"aria-hidden":"true",children:[g.jsx("use",{href:`#${i}`,color:r,strokeWidth:3,stroke:"var(--tl-color-background)"}),g.jsx("use",{href:`#${i}`,color:r,opacity:a})]})}const a9=w.memo(function({className:e,zoom:n,point:r,color:o,name:a,chatMessage:s}){const i=w.useRef(null);cv(i,r==null?void 0:r.x,r==null?void 0:r.y,1/n);const l=Zl("cursor");return r?g.jsxs("div",{ref:i,className:pt("tl-overlays__item",e),children:[g.jsx("svg",{className:"tl-cursor","aria-hidden":"true",children:g.jsx("use",{href:`#${l}`,color:o})}),s?g.jsxs(g.Fragment,{children:[a&&g.jsx("div",{className:"tl-nametag-title",style:{color:o},children:a}),g.jsx("div",{className:"tl-nametag-chat",style:{backgroundColor:o},children:s})]}):a&&g.jsx("div",{className:"tl-nametag",style:{backgroundColor:o},children:a})]}):null}),pv={openWindow(t,e,n=!1){return window.open(t,e,n?"noopener":"noopener noreferrer")},refreshPage(){window.location.reload()},async hardReset(){var t;return await((t=window.__tldraw__hardReset)==null?void 0:t.call(window))}};function BY(){pv.hardReset()}function A2e(){pv.refreshPage()}const _2e={error:null};class ON extends w.Component{constructor(){super(...arguments);L(this,"state",_2e)}static getDerivedStateFromError(n){return{error:n}}componentDidCatch(n){var r,o;(o=(r=this.props).onError)==null||o.call(r,n)}render(){const{error:n}=this.state;if(n!==null){const{fallback:r}=this.props;return g.jsx(r,{error:n})}return this.props.children}}function m0({children:t,fallback:e,...n}){return e===null?t:g.jsx(ON,{fallback:e,...n,children:t})}const k2e="https://github.com/tldraw/tldraw/issues/new",FY=({error:t,editor:e})=>{const n=w.useRef(null),[r,o]=w.useState(!1),[a,s]=w.useState(!1),[i,l]=w.useState(!1);let c=null;try{c=cr().Canvas??null}catch{}const d=t instanceof Error?t.message:String(t),u=t instanceof Error?t.stack:null,m=ce("isDarkMode",()=>{try{if(e)return e.user.getIsDarkMode()}catch{}return null},[e]),[h,y]=w.useState(null);w.useLayoutEffect(()=>{var I;m!==null&&y(m);let C=(I=n.current)==null?void 0:I.parentElement,_=!1;for(;C;){if(C.classList.contains("tl-theme__dark")||C.classList.contains("tl-theme__light")){_=!0;break}C=C.parentElement}if(_){y(null);return}typeof window<"u"&&window.matchMedia&&y(window.matchMedia("(prefers-color-scheme: dark)").matches)},[m]),w.useEffect(()=>{if(a){const C=e==null?void 0:e.timers.setTimeout(()=>{s(!1)},2e3);return()=>clearTimeout(C)}},[a,e]);const v=()=>{const C=document.createElement("textarea");C.value=u??d,document.body.appendChild(C),C.select(),document.execCommand("copy"),C.remove(),s(!0)},x=()=>{A2e()},S=async()=>{BY()},T=new URL(k2e);return T.searchParams.set("title",d),T.searchParams.set("labels","bug"),T.searchParams.set("body",`Hey, I ran into an error while using tldraw:

\`\`\`js
${u??d}
\`\`\`

My browser: ${navigator.userAgent}`),g.jsxs("div",{ref:n,className:pt("tl-container tl-error-boundary",h===null?"":h?"tl-theme__dark":"tl-theme__light"),children:[g.jsx("div",{className:"tl-error-boundary__overlay"}),e&&g.jsx(ON,{onError:l0,fallback:()=>null,children:g.jsx(PN,{editor:e,children:g.jsx("div",{className:"tl-overlay tl-error-boundary__canvas",children:c?g.jsx(c,{}):null})})}),g.jsx("div",{className:pt("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":r&&!i}),children:i?g.jsxs(g.Fragment,{children:[g.jsx("h2",{children:"Are you sure?"}),g.jsx("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),g.jsxs("div",{className:"tl-error-boundary__content__actions",children:[g.jsx("button",{className:"tlui-button",onClick:()=>l(!1),children:"Cancel"}),g.jsx("button",{className:"tlui-button tl-error-boundary__reset",onClick:S,children:"Reset data"})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("h2",{children:"Something went wrong"}),g.jsx("p",{children:"Please refresh your browser."}),g.jsx("p",{children:"If the issue continues after refreshing, you may need to reset the tldraw data stored on your device."}),g.jsxs("p",{children:[g.jsx("strong",{children:"Note:"})," Resetting will erase your current project and any unsaved work."]}),!1,r&&g.jsxs(g.Fragment,{children:["Message:",g.jsx("h4",{children:g.jsx("code",{children:d})}),"Stack trace:",g.jsxs("div",{className:"tl-error-boundary__content__error",children:[g.jsx("pre",{children:g.jsx("code",{children:u??d})}),g.jsx("button",{className:"tlui-button",onClick:v,children:a?"Copied!":"Copy"})]})]}),g.jsxs("div",{className:"tl-error-boundary__content__actions",children:[g.jsx("button",{className:"tlui-button",onClick:()=>o(!r),children:r?"Hide details":"Show details"}),g.jsxs("div",{className:"tl-error-boundary__content__actions__group",children:[g.jsx("button",{className:"tlui-button tl-error-boundary__reset",onClick:()=>l(!0),children:"Reset data"}),g.jsx("button",{className:"tlui-button tl-error-boundary__refresh",onClick:x,children:"Refresh Page"})]})]})]})})]})};function I2e({x:t,y:e,z:n,size:r}){const o=cm("grid"),a=ue(),{gridSteps:s}=a.options;return g.jsxs("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[g.jsx("defs",{children:s.map(({min:i,mid:l,step:c},d)=>{const u=c*r*n,m=.5+t*n,h=.5+e*n,y=m>0?m%u:u+m%u,v=h>0?h%u:u+h%u,x=n<l?nc(n,[i,l],[0,1]):1;return g.jsx("pattern",{id:kN(o,`${c}`),width:u,height:u,patternUnits:"userSpaceOnUse",children:g.jsx("circle",{className:"tl-grid-dot",cx:y,cy:v,r:1,opacity:x})},d)})}),s.map(({step:i},l)=>g.jsx("rect",{width:"100%",height:"100%",fill:`url(#${o}_${i})`},l))]})}function P2e({handle:t,isCoarse:e,className:n,zoom:r}){const o=ue(),a=(e?o.options.coarseHandleRadius:o.options.handleRadius)/r;if(t.type==="clone"){const i=3/r,l=`M0,${-i} A${i},${i} 0 0,1 0,${i}`,c=g2e.indexOf(t.id);return g.jsxs("g",{className:pt(`tl-handle tl-handle__${t.type}`,n),children:[g.jsx("circle",{className:"tl-handle__bg",r:a}),g.jsx("path",{className:"tl-handle__fg",d:l,transform:`rotate(${-90+90*c})`})]})}const s=(t.type==="create"&&e?3:4)/Math.max(r,.25);return g.jsxs("g",{className:pt(`tl-handle tl-handle__${t.type}`,n),children:[g.jsx("circle",{className:"tl-handle__bg",r:a}),g.jsx("circle",{className:"tl-handle__fg",r:s})]})}const O2e=({children:t})=>g.jsx("svg",{className:"tl-user-handles tl-overlays__item","aria-hidden":"true",children:t}),MN="4.2.0",s9={major:"2025-09-18T14:39:22.803Z",minor:"2025-11-19T11:47:45.748Z"};function zY(t,e){const n=w.useRef(t);return e(t,n.current)?n.current:(n.current=t,t)}const M2e=(t,e)=>(t??(t=null),e??(e=null),t===e?!0:!t||!e?!1:gE(t,e));function Yd(t){return zY(t,M2e)}const R2e=(t,e)=>(t??(t=null),e??(e=null),t===e?!0:!t||!e?!1:zK(t,e));function kg(t){return zY(t,R2e)}const UY="TLDRAW_USER_DATA_v3",qY=pn({id:Gt,name:Gt.nullable().optional(),color:Gt.nullable().optional(),locale:Gt.nullable().optional(),animationSpeed:Ot.nullable().optional(),areKeyboardShortcutsEnabled:en.nullable().optional(),edgeScrollSpeed:Ot.nullable().optional(),colorScheme:Nf("light","dark","system").optional(),isSnapMode:en.nullable().optional(),isWrapMode:en.nullable().optional(),isDynamicSizeMode:en.nullable().optional(),isPasteAtCursorMode:en.nullable().optional(),enhancedA11yMode:en.nullable().optional(),inputMode:Nf("trackpad","mouse").nullable().optional()}),Mi={AddAnimationSpeed:1,AddIsSnapMode:2,MakeFieldsNullable:3,AddEdgeScrollSpeed:4,AddExcalidrawSelectMode:5,AddDynamicSizeMode:6,AllowSystemColorScheme:7,AddPasteAtCursor:8,AddKeyboardShortcuts:9,AddShowUiLabels:10,AddPointerPeripheral:11,RenameShowUiLabelsToEnhancedA11yMode:12},RN=Math.max(...Object.values(Mi));function D2e(t){t.version<Mi.AddAnimationSpeed&&(t.user.animationSpeed=1),t.version<Mi.AddIsSnapMode&&(t.user.isSnapMode=!1),t.version<Mi.MakeFieldsNullable,t.version<Mi.AddEdgeScrollSpeed&&(t.user.edgeScrollSpeed=1),t.version<Mi.AddExcalidrawSelectMode&&(t.user.isWrapMode=!1),t.version<Mi.AllowSystemColorScheme&&(t.user.isDarkMode===!0?t.user.colorScheme="dark":t.user.isDarkMode===!1&&(t.user.colorScheme="light"),delete t.user.isDarkMode),t.version<Mi.AddDynamicSizeMode&&(t.user.isDynamicSizeMode=!1),t.version<Mi.AddPasteAtCursor&&(t.user.isPasteAtCursorMode=!1),t.version<Mi.AddKeyboardShortcuts&&(t.user.areKeyboardShortcutsEnabled=!0),t.version<Mi.AddShowUiLabels&&(t.user.showUiLabels=!1),t.version<Mi.RenameShowUiLabelsToEnhancedA11yMode&&(t.user.enhancedA11yMode=t.user.showUiLabels,delete t.user.showUiLabels),t.version<Mi.AddPointerPeripheral&&(t.user.inputMode=null),t.version=RN}const xM=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function HY(){return xM[Math.floor(Math.random()*xM.length)]}function N2e(){var t,e;return typeof window<"u"&&window.matchMedia?((e=(t=window.matchMedia)==null?void 0:t.call(window,"(prefers-reduced-motion: reduce)"))==null?void 0:e.matches)??!1:!1}const Xs=Object.freeze({name:"",locale:r2e(),color:HY(),edgeScrollSpeed:1,animationSpeed:N2e()?0:1,areKeyboardShortcutsEnabled:!0,isSnapMode:!1,isWrapMode:!1,isDynamicSizeMode:!1,isPasteAtCursorMode:!1,enhancedA11yMode:!1,colorScheme:"light",inputMode:null});function JI(){return{id:Ln(),color:HY()}}function $Y(t){if(t===null||typeof t!="object"||!("version"in t)||!("user"in t)||typeof t.version!="number")return JI();const e=bo(t);D2e(e);try{return qY.validate(e.user)}catch{return JI()}}function L2e(){const t=JSON.parse(UD(UY)||"null")??null;return $Y(t)}const kw=Ir("globalUserData",null);function j2e(){qD(UY,JSON.stringify({version:RN,user:kw.get()}))}function VY(t){qY.validate(t),kw.set(t),j2e(),B2e()}const Dh=typeof BroadcastChannel<"u"?new BroadcastChannel("tldraw-user-sync"):null;Dh==null||Dh.addEventListener("message",t=>{const e=t.data;(e==null?void 0:e.type)===KY&&(e==null?void 0:e.origin)!==GY()&&kw.set($Y(e.data))});let QI=null;function GY(){return QI===null&&(QI=Ln()),QI}const KY="tldraw-user-preferences-change";function B2e(){Dh==null||Dh.postMessage({type:KY,origin:GY(),data:{user:WY(),version:RN}})}function WY(){let t=kw.get();return t||(t=L2e(),VY(t)),t}const F2e=ke("defaultLocalStorageUserPrefs",()=>WY());function YY(t={}){return{userPreferences:t.userPreferences??F2e,setUserPreferences:t.setUserPreferences??VY}}var ZI={exports:{}},i9;function z2e(){return i9||(i9=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function a(l,c,d,u,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new o(d,u||l,m),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],h]:l._events[y].push(h):(l._events[y]=h,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function i(){this._events=new r,this._eventsCount=0}i.prototype.eventNames=function(){var c=[],d,u;if(this._eventsCount===0)return c;for(u in d=this._events)e.call(d,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},i.prototype.listeners=function(c){var d=n?n+c:c,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var m=0,h=u.length,y=new Array(h);m<h;m++)y[m]=u[m].fn;return y},i.prototype.listenerCount=function(c){var d=n?n+c:c,u=this._events[d];return u?u.fn?1:u.length:0},i.prototype.emit=function(c,d,u,m,h,y){var v=n?n+c:c;if(!this._events[v])return!1;var x=this._events[v],S=arguments.length,T,C;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),S){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,u),!0;case 4:return x.fn.call(x.context,d,u,m),!0;case 5:return x.fn.call(x.context,d,u,m,h),!0;case 6:return x.fn.call(x.context,d,u,m,h,y),!0}for(C=1,T=new Array(S-1);C<S;C++)T[C-1]=arguments[C];x.fn.apply(x.context,T)}else{var _=x.length,I;for(C=0;C<_;C++)switch(x[C].once&&this.removeListener(c,x[C].fn,void 0,!0),S){case 1:x[C].fn.call(x[C].context);break;case 2:x[C].fn.call(x[C].context,d);break;case 3:x[C].fn.call(x[C].context,d,u);break;case 4:x[C].fn.call(x[C].context,d,u,m);break;default:if(!T)for(I=1,T=new Array(S-1);I<S;I++)T[I-1]=arguments[I];x[C].fn.apply(x[C].context,T)}}return!0},i.prototype.on=function(c,d,u){return a(this,c,d,u,!1)},i.prototype.once=function(c,d,u){return a(this,c,d,u,!0)},i.prototype.removeListener=function(c,d,u,m){var h=n?n+c:c;if(!this._events[h])return this;if(!d)return s(this,h),this;var y=this._events[h];if(y.fn)y.fn===d&&(!m||y.once)&&(!u||y.context===u)&&s(this,h);else{for(var v=0,x=[],S=y.length;v<S;v++)(y[v].fn!==d||m&&!y[v].once||u&&y[v].context!==u)&&x.push(y[v]);x.length?this._events[h]=x.length===1?x[0]:x:s(this,h)}return this},i.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,t.exports=i})(ZI)),ZI.exports}var U2e=z2e();const q2e=Wi(U2e),Nh="TLDRAW_TAB_ID_v2",zu=globalThis.window;function H2e(){return zu?["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(zu.navigator.platform)||Nn.isDarwin&&"ontouchend"in document:!1}const DE=zu?zu[Nh]??KK(Nh)??"TLDRAW_INSTANCE_STATE_V1_"+Ln():"<error>";zu&&(zu[Nh]=DE,H2e()?HD(Nh,DE):WK(Nh));zu==null||zu.addEventListener("beforeunload",()=>{HD(Nh,DE)});const XY={Initial:0},Iw=Math.max(...Object.values(XY));function $2e(t){t.version<XY.Initial,t.version=Iw}const JY=pn({version:Ot,currentPageId:p0.optional(),isFocusMode:en.optional(),exportBackground:en.optional(),isDebugMode:en.optional(),isToolLocked:en.optional(),isGridMode:en.optional(),pageStates:ia(pn({pageId:p0,camera:pn({x:Ot,y:Ot,z:Ot}).optional(),selectedShapeIds:ia(xl).optional(),focusedGroupId:xl.nullable().optional()})).optional()});function V2e(t){if(!t||typeof t!="object")return console.warn("Invalid instance state"),null;if(!("version"in t)||typeof t.version!="number")return console.warn("No version in instance state"),null;t.version!==Iw&&(t=bo(t),$2e(t));try{return JY.validate(t)}catch(e){return console.warn(e),null}}function DN(t){const e=t.query.ids("page");return ke("sessionStateSnapshot",()=>{const n=t.get(ys);if(!n)return null;const r=[...e.get()];return{version:Iw,currentPageId:n.currentPageId,exportBackground:n.exportBackground,isFocusMode:n.isFocusMode,isDebugMode:n.isDebugMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,pageStates:r.map(o=>{const a=t.get(Xl.createId(o)),s=t.get(jc.createId(o));return{pageId:o,camera:{x:(s==null?void 0:s.x)??0,y:(s==null?void 0:s.y)??0,z:(s==null?void 0:s.z)??1},selectedShapeIds:(a==null?void 0:a.selectedShapeIds)??[],focusedGroupId:(a==null?void 0:a.focusedGroupId)??null}})}},{isEqual:Ap})}function SM(t,e,n){const r=V2e(e);if(!r)return;const o=aY(t.get(ys)),a=n!=null&&n.forceOverwrite?r:o,s=n!=null&&n.forceOverwrite?o:r,i=t.schema.types.instance.create({id:ys,...o,currentPageId:r.currentPageId,isDebugMode:(a==null?void 0:a.isDebugMode)??(s==null?void 0:s.isDebugMode),isFocusMode:(a==null?void 0:a.isFocusMode)??(s==null?void 0:s.isFocusMode),isToolLocked:(a==null?void 0:a.isToolLocked)??(s==null?void 0:s.isToolLocked),isGridMode:(a==null?void 0:a.isGridMode)??(s==null?void 0:s.isGridMode),exportBackground:(a==null?void 0:a.exportBackground)??(s==null?void 0:s.exportBackground)});t.atomic(()=>{var l,c,d;for(const u of r.pageStates??[]){if(!t.has(u.pageId))continue;const m=jc.createId(u.pageId),h=Xl.createId(u.pageId),y=t.get(m),v=t.get(h);t.put([jc.create({id:m,x:((l=u.camera)==null?void 0:l.x)??(y==null?void 0:y.x),y:((c=u.camera)==null?void 0:c.y)??(y==null?void 0:y.y),z:((d=u.camera)==null?void 0:d.z)??(y==null?void 0:y.z)}),Xl.create({id:h,pageId:u.pageId,selectedShapeIds:u.selectedShapeIds??(v==null?void 0:v.selectedShapeIds),focusedGroupId:u.focusedGroupId??(v==null?void 0:v.focusedGroupId)})])}t.put([i]),t.ensureStoreIsUsable()})}function G2e(t){var o;const e=[];for(const a of Object.values(t))(o=a.typeName)!=null&&o.match(/^(instance.*|pointer|camera)$/)&&e.push(a);const n=e.filter(a=>a.typeName==="instance"&&a.id!==ys)[0];if(!n)return null;const r={version:Iw,currentPageId:n.currentPageId,exportBackground:!!n.exportBackground,isFocusMode:!!n.isFocusMode,isDebugMode:!!n.isDebugMode,isToolLocked:!!n.isToolLocked,isGridMode:!1,pageStates:e.filter(a=>a.typeName==="instance_page_state"&&a.instanceId===n.id).map(a=>{const s=t[a.cameraId]??{x:0,y:0,z:1};return{pageId:a.pageId,camera:{x:s.x,y:s.y,z:s.z},selectedShapeIds:a.selectedShapeIds,focusedGroupId:a.focusedGroupId}})};try{return JY.validate(r),r}catch{return null}}function QY(t,e,n){let r={};if("store"in e){const s=t.schema.migrateStoreSnapshot(e);if(s.type!=="success")throw new Error("Failed to migrate store snapshot: "+s.reason);r.document={schema:t.schema.serialize(),store:jy(s.value,(i,{typeName:l})=>t.scopedTypes.document.has(l))}}else r=e;const o=aY(t.get(ys)),a=ZY.get(t,DN).get();t.atomic(()=>{r.document&&t.loadStoreSnapshot(r.document),o&&t.update(ys,s=>({...s,...o})),a&&SM(t,a),r.session&&SM(t,r.session,{forceOverwrite:n==null?void 0:n.forceOverwriteSessionState})})}const ZY=new as;function K2e(t){const n=ZY.get(t,DN).get();if(!n)throw new Error("Session state is not ready yet");return{document:t.getStoreSnapshot(),session:n}}function eX(t){const e=[],n=new Set;for(const r of t){if(n.has(r.type))throw new Error(`Binding type "${r.type}" is defined more than once`);e.push(r),n.add(r.type)}return e}function fp({children:t,className:e="",...n}){return g.jsx("svg",{...n,className:pt("tl-svg-container",e),"aria-hidden":"true",children:t})}class Be{constructor(e=0,n=0,r=0,o=0){L(this,"x",0);L(this,"y",0);L(this,"w",0);L(this,"h",0);this.x=e,this.y=n,this.w=r,this.h=o}get point(){return new R(this.x,this.y)}set point(e){this.x=e.x,this.y=e.y}get minX(){return this.x}set minX(e){this.x=e}get left(){return this.x}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get right(){return this.x+this.w}get minY(){return this.y}set minY(e){this.y=e}get top(){return this.y}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get bottom(){return this.y+this.h}get width(){return this.w}set width(e){this.w=e}get height(){return this.h}set height(e){this.h=e}get aspectRatio(){return this.width/this.height}get center(){return new R(this.x+this.w/2,this.y+this.h/2)}set center(e){this.x=e.x-this.w/2,this.y=e.y-this.h/2}get corners(){return[new R(this.x,this.y),new R(this.x+this.w,this.y),new R(this.x+this.w,this.y+this.h),new R(this.x,this.y+this.h)]}get cornersAndCenter(){return[new R(this.x,this.y),new R(this.x+this.w,this.y),new R(this.x+this.w,this.y+this.h),new R(this.x,this.y+this.h),new R(this.x+this.w/2,this.y+this.h/2)]}get sides(){const{corners:e}=this;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}get size(){return new R(this.w,this.h)}toFixed(){return this.x=fS(this.x),this.y=fS(this.y),this.w=fS(this.w),this.h=fS(this.h),this}setTo(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}set(e=0,n=0,r=0,o=0){return this.x=e,this.y=n,this.w=r,this.h=o,this}expand(e){const n=Math.min(this.x,e.x),r=Math.min(this.y,e.y),o=Math.max(this.x+this.w,e.x+e.w),a=Math.max(this.y+this.h,e.y+e.h);return this.x=n,this.y=r,this.w=o-n,this.h=a-r,this}expandBy(e){return this.x-=e,this.y-=e,this.w+=e*2,this.h+=e*2,this}scale(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}clone(){const{x:e,y:n,w:r,h:o}=this;return new Be(e,n,r,o)}translate(e){return this.x+=e.x,this.y+=e.y,this}snapToGrid(e){const n=Math.round(this.x/e)*e,r=Math.round(this.y/e)*e,o=Math.round((this.x+this.w)/e)*e,a=Math.round((this.y+this.h)/e)*e;this.minX=n,this.minY=r,this.width=Math.max(1,o-n),this.height=Math.max(1,a-r)}collides(e){return Be.Collides(this,e)}contains(e){return Be.Contains(this,e)}includes(e){return Be.Includes(this,e)}containsPoint(e,n=0){return Be.ContainsPoint(this,e,n)}getHandlePoint(e){switch(e){case"top_left":return new R(this.x,this.y);case"top_right":return new R(this.x+this.w,this.y);case"bottom_left":return new R(this.x,this.y+this.h);case"bottom_right":return new R(this.x+this.w,this.y+this.h);case"top":return new R(this.x+this.w/2,this.y);case"right":return new R(this.x+this.w,this.y+this.h/2);case"bottom":return new R(this.x+this.w/2,this.y+this.h);case"left":return new R(this.x,this.y+this.h/2)}}toJson(){return{x:this.x,y:this.y,w:this.w,h:this.h}}resize(e,n,r){const{minX:o,minY:a,maxX:s,maxY:i}=this;let{minX:l,minY:c,maxX:d,maxY:u}=this;switch(e){case"left":case"top_left":case"bottom_left":{l+=n;break}case"right":case"top_right":case"bottom_right":{d+=n;break}}switch(e){case"top":case"top_left":case"top_right":{c+=r;break}case"bottom":case"bottom_left":case"bottom_right":{u+=r;break}}const m=(d-l)/(s-o),h=(u-c)/(i-a),y=m<0,v=h<0;if(y){const x=d;d=l,l=x}if(v){const x=u;u=c,c=x}this.minX=l,this.minY=c,this.width=Math.abs(d-l),this.height=Math.abs(u-c)}union(e){const n=Math.min(this.x,e.x),r=Math.min(this.y,e.y),o=Math.max(this.x+this.w,e.x+e.w),a=Math.max(this.y+this.h,e.y+e.h);return this.x=n,this.y=r,this.width=o-n,this.height=a-r,this}static From(e){return new Be(e.x,e.y,e.w,e.h)}static FromCenter(e,n){return new Be(e.x-n.x/2,e.y-n.y/2,n.x,n.y)}static FromPoints(e){if(e.length===0)return new Be;let n=1/0,r=1/0,o=-1/0,a=-1/0,s;for(let i=0,l=e.length;i<l;i++)s=e[i],n=Math.min(s.x,n),r=Math.min(s.y,r),o=Math.max(s.x,o),a=Math.max(s.y,a);return new Be(n,r,o-n,a-r)}static Expand(e,n){const r=Math.min(n.minX,e.minX),o=Math.min(n.minY,e.minY),a=Math.max(n.maxX,e.maxX),s=Math.max(n.maxY,e.maxY);return new Be(r,o,a-r,s-o)}static ExpandBy(e,n){return new Be(e.minX-n,e.minY-n,e.width+n*2,e.height+n*2)}static Collides(e,n){return!(e.maxX<n.minX||e.minX>n.maxX||e.maxY<n.minY||e.minY>n.maxY)}static Contains(e,n){return e.minX<n.minX&&e.minY<n.minY&&e.maxY>n.maxY&&e.maxX>n.maxX}static ContainsApproximately(e,n,r){return ep(e.minX,n.minX,r)&&ep(e.minY,n.minY,r)&&ep(n.maxX,e.maxX,r)&&ep(n.maxY,e.maxY,r)}static Includes(e,n){return Be.Collides(e,n)||Be.Contains(e,n)}static ContainsPoint(e,n,r=0){return!(n.x<e.minX-r||n.y<e.minY-r||n.x>e.maxX+r||n.y>e.maxY+r)}static Common(e){let n=1/0,r=1/0,o=-1/0,a=-1/0;for(let s=0;s<e.length;s++){const i=e[s];n=Math.min(n,i.minX),r=Math.min(r,i.minY),o=Math.max(o,i.maxX),a=Math.max(a,i.maxY)}return new Be(n,r,o-n,a-r)}static Sides(e,n=0){const{corners:r}=e;return[[r[0],r[1]],[r[1],r[2]],[r[2],r[3]],[r[3],r[0]]]}static Resize(e,n,r,o,a=!1){const{minX:s,minY:i,maxX:l,maxY:c}=e;let{minX:d,minY:u,maxX:m,maxY:h}=e;switch(n){case"left":case"top_left":case"bottom_left":{d+=r;break}case"right":case"top_right":case"bottom_right":{m+=r;break}}switch(n){case"top":case"top_left":case"top_right":{u+=o;break}case"bottom":case"bottom_left":case"bottom_right":{h+=o;break}}const y=(m-d)/(l-s),v=(h-u)/(c-i),x=y<0,S=v<0;if(a){const C=(l-s)/(c-i),_=Math.abs(m-d),I=Math.abs(h-u),P=_*(v<0?1:-1)*(1/C),M=I*(y<0?1:-1)*C,D=C<_/I;switch(n){case"top_left":{D?u=h+P:d=m+M;break}case"top_right":{D?u=h+P:m=d-M;break}case"bottom_right":{D?h=u-P:m=d-M;break}case"bottom_left":{D?h=u-P:d=m+M;break}case"bottom":case"top":{const F=(d+m)/2,B=I*C;d=F-B/2,m=F+B/2;break}case"left":case"right":{const F=(u+h)/2,B=_/C;u=F-B/2,h=F+B/2;break}}}if(x){const C=m;m=d,d=C}if(S){const C=h;h=u,u=C}const T=new Be(d,u,Math.abs(m-d),Math.abs(h-u));return{box:T,scaleX:+(T.width/e.width*(y>0?1:-1)).toFixed(5),scaleY:+(T.height/e.height*(v>0?1:-1)).toFixed(5)}}equals(e){return Be.Equals(this,e)}static Equals(e,n){return n.x===e.x&&n.y===e.y&&n.w===e.w&&n.h===e.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(e){return new Be(e.x,e.y,Math.max(1,e.w),Math.max(1,e.h))}}function W2e(t){switch(t){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return t}}function Y2e(t){switch(t){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return t}}function X2e(t){return t==="top_left"||t==="top_right"||t==="bottom_right"||t==="bottom_left"}class De{constructor(e,n,r,o,a,s){L(this,"a",1);L(this,"b",0);L(this,"c",0);L(this,"d",1);L(this,"e",0);L(this,"f",0);this.a=e,this.b=n,this.c=r,this.d=o,this.e=a,this.f=s}equals(e){return this===e||this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(e){const n=e,{a:r,b:o,c:a,d:s,e:i,f:l}=this;return this.a=r*n.a+a*n.b,this.c=r*n.c+a*n.d,this.e=r*n.e+a*n.f+i,this.b=o*n.a+s*n.b,this.d=o*n.c+s*n.d,this.f=o*n.e+s*n.f+l,this}rotate(e,n,r){return e===0?this:n===void 0?this.multiply(De.Rotate(e)):this.translate(n,r).multiply(De.Rotate(e)).translate(-n,-r)}translate(e,n){return this.multiply(De.Translate(e,n))}scale(e,n){return this.multiply(De.Scale(e,n))}invert(){const{a:e,b:n,c:r,d:o,e:a,f:s}=this,i=e*o-n*r;return this.a=o/i,this.b=n/-i,this.c=r/-i,this.d=e/i,this.e=(o*a-r*s)/-i,this.f=(n*a-e*s)/i,this}applyToPoint(e){return De.applyToPoint(this,e)}applyToPoints(e){return De.applyToPoints(this,e)}rotation(){return De.Rotation(this)}point(){return De.Point(this)}decomposed(){return De.Decompose(this)}toCssString(){return De.toCssString(this)}setTo(e){return Object.assign(this,e),this}decompose(){return De.Decompose(this)}clone(){return new De(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new De(1,0,0,1,0,0)}static Translate(e,n){return new De(1,0,0,1,e,n)}static Rotate(e,n,r){if(e===0)return De.Identity();const o=Math.cos(e),a=Math.sin(e),s=new De(o,a,-a,o,0,0);return n===void 0?s:De.Compose(De.Translate(n,r),s,De.Translate(-n,-r))}static Scale(e,n,r,o){const a=new De(e,0,0,n,0,0);return r===void 0?a:De.Translate(r,o).multiply(a).translate(-r,-o)}static Multiply(e,n){return{a:e.a*n.a+e.c*n.b,c:e.a*n.c+e.c*n.d,e:e.a*n.e+e.c*n.f+e.e,b:e.b*n.a+e.d*n.b,d:e.b*n.c+e.d*n.d,f:e.b*n.e+e.d*n.f+e.f}}static Inverse(e){const n=e.a*e.d-e.b*e.c;return{a:e.d/n,b:e.b/-n,c:e.c/-n,d:e.a/n,e:(e.d*e.e-e.c*e.f)/-n,f:(e.b*e.e-e.a*e.f)/n}}static Absolute(e){const n=e.a*e.d-e.b*e.c;return{a:e.d/n,b:e.b/-n,c:e.c/-n,d:e.a/n,e:(e.d*e.e-e.c*e.f)/n,f:(e.b*e.e-e.a*e.f)/-n}}static Compose(...e){const n=De.Identity();for(let r=0,o=e.length;r<o;r++)n.multiply(e[r]);return n}static Point(e){return new R(e.e,e.f)}static Rotation(e){let n;if(e.a!==0||e.c!==0){const r=(e.a*e.a+e.c*e.c)**.5;n=Math.acos(e.a/r)*(e.c>0?-1:1)}else if(e.b!==0||e.d!==0){const r=(e.b*e.b+e.d*e.d)**.5;n=yo+Math.acos(e.b/r)*(e.d>0?-1:1)}else n=0;return vM(n)}static Decompose(e){let n,r,o;if(e.a!==0||e.c!==0){const a=(e.a*e.a+e.c*e.c)**.5;n=a,r=(e.a*e.d-e.b*e.c)/a,o=Math.acos(e.a/a)*(e.c>0?-1:1)}else if(e.b!==0||e.d!==0){const a=(e.b*e.b+e.d*e.d)**.5;n=(e.a*e.d-e.b*e.c)/a,r=a,o=yo+Math.acos(e.b/a)*(e.d>0?-1:1)}else n=0,r=0,o=0;return{x:e.e,y:e.f,scaleX:n,scaleY:r,rotation:vM(o)}}static Smooth(e,n=1e10){return e.a=Math.round(e.a*n)/n,e.b=Math.round(e.b*n)/n,e.c=Math.round(e.c*n)/n,e.d=Math.round(e.d*n)/n,e.e=Math.round(e.e*n)/n,e.f=Math.round(e.f*n)/n,e}static toCssString(e){return`matrix(${ie(e.a)}, ${ie(e.b)}, ${ie(e.c)}, ${ie(e.d)}, ${ie(e.e)}, ${ie(e.f)})`}static applyToPoint(e,n){return new R(e.a*n.x+e.c*n.y+e.e,e.b*n.x+e.d*n.y+e.f,n.z)}static applyToXY(e,n,r){return[e.a*n+e.c*r+e.e,e.b*n+e.d*r+e.f]}static applyToPoints(e,n){return n.map(r=>new R(e.a*r.x+e.c*r.y+e.e,e.b*r.x+e.d*r.y+e.f,r.z))}static applyToBounds(e,n){return new Be(e.e+n.minX,e.f+n.minY,n.width,n.height)}static From(e){return new De(e.a,e.b,e.c,e.d,e.e,e.f)}static Cast(e){return e instanceof De?e:De.From(e)}}function Pw(t,e,n,r,o=1e-10){const a=t.x-n.x,s=t.y-n.y,i=r.x-n.x,l=r.y-n.y,c=e.x-t.x,d=e.y-t.y,u=i*s-l*a,m=c*s-d*a,h=l*c-i*d;if(Eo(u,0,o)||Eo(m,0,o)||Eo(h,0,o))return null;if(h!==0){const y=u/h,v=m/h;if(ep(0,y,o)&&ep(y,1,o)&&ep(0,v,o)&&ep(v,1,o))return R.AddXY(t,y*c,y*d)}return null}function fv(t,e,n,r){const o=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),a=2*((e.x-t.x)*(t.x-n.x)+(e.y-t.y)*(t.y-n.y)),s=n.x*n.x+n.y*n.y+t.x*t.x+t.y*t.y-2*(n.x*t.x+n.y*t.y)-r*r,i=a*a-4*o*s;if(i<0||i===0)return null;const l=Math.sqrt(i),c=(-a+l)/(2*o),d=(-a-l)/(2*o);if((c<0||c>1)&&(d<0||d>1))return null;const u=[];return 0<=c&&c<=1&&u.push(R.Lrp(t,e,c)),0<=d&&d<=1&&u.push(R.Lrp(t,e,d)),u.length===0?null:u}function J2e(t,e,n){const r=[];let o;for(let a=0,s=n.length-1;a<s;a++)o=Pw(t,e,n[a],n[a+1]),o&&r.push(o);return r.length===0?null:r}function tX(t,e,n){const r=[];let o;for(let a=1,s=n.length;a<s+1;a++)o=Pw(t,e,n[a-1],n[a%n.length]),o&&r.push(o);return r.length===0?null:r}function Q2e(t,e,n,r){let o=n.x-t.x,a=n.y-t.y;const s=Math.sqrt(o*o+a*a),i=(s*s-r*r+e*e)/(2*s),l=Math.sqrt(e*e-i*i);return o/=s,a/=s,[new R(t.x+o*i-a*l,t.y+a*i+o*l),new R(t.x+o*i+a*l,t.y+a*i-o*l)]}function Z2e(t,e,n){const r=[];let o,a,s;for(let i=0,l=n.length;i<l;i++)o=n[i],a=n[(i+1)%n.length],s=fv(o,a,t,e),s&&r.push(...s);return r.length===0?null:r}function eke(t,e,n){const r=[];let o,a,s;for(let i=1,l=n.length;i<l;i++)o=n[i-1],a=n[i],s=fv(o,a,t,e),s&&r.push(...s);return r.length===0?null:r}function hS(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function NN(t,e,n,r){return hS(t,n,r)!==hS(e,n,r)&&hS(t,e,n)!==hS(t,e,r)}function NE(t,e){const n=new Map;let r,o,a,s;for(let i=0,l=t.length;i<l;i++)if(r=t[i],Ss(r,e)){const c=x1(r);n.has(c)||n.set(c,r)}for(let i=0,l=e.length;i<l;i++)if(r=e[i],Ss(r,t)){const c=x1(r);n.has(c)||n.set(c,r)}for(let i=0,l=t.length;i<l;i++){r=t[i],o=t[(i+1)%t.length];for(let c=0,d=e.length;c<d;c++){a=e[c],s=e[(c+1)%e.length];const u=Pw(r,o,a,s);if(u!==null){const m=x1(u);n.has(m)||n.set(m,u)}}}return n.size===0?null:tke([...n.values()])}function l9(t,e,n,r){const o=new Map;for(let a=0,s=n?t.length:t.length-1;a<s;a++){const i=t[a],l=t[(a+1)%t.length];for(let c=0,d=r?e.length:e.length-1;c<d;c++){const u=e[c],m=e[(c+1)%e.length],h=Pw(i,l,u,m);if(h!==null){const y=x1(h);o.has(y)||o.set(y,h)}}}return[...o.values()]}function x1(t){return`${t.x},${t.y}`}function tke(t){const e=R.Average(t);return t.sort((n,r)=>R.Angle(e,n)-R.Angle(e,r))}function nX(t,e){let n,r,o,a;for(let s=0,i=t.length;s<i;s++){n=t[s],r=t[(s+1)%i];for(let l=0,c=e.length;l<c;l++)if(o=e[l],a=e[(l+1)%c],NN(n,r,o,a))return!0}return!1}function nke(t,e){let n,r,o,a;for(let s=0,i=t.length;s<i;s++){n=t[s],r=t[(s+1)%i];for(let l=1,c=e.length;l<c;l++)if(o=e[l-1],a=e[l],NN(n,r,o,a))return!0}return!1}const Uc={EXCLUDE_NON_STANDARD:{includeLabels:!1,includeInternal:!1},EXCLUDE_LABELS:{includeLabels:!1,includeInternal:!0}};class Mp{constructor(e){L(this,"isFilled",!1);L(this,"isClosed",!0);L(this,"isLabel",!1);L(this,"isEmptyLabel",!1);L(this,"isInternal",!1);L(this,"excludeFromShapeBounds",!1);L(this,"debugColor");L(this,"ignore");L(this,"_vertices");L(this,"_boundsVertices");L(this,"_bounds");L(this,"_area");L(this,"_length");const{isLabel:n=!1,isEmptyLabel:r=!1,isInternal:o=!1,excludeFromShapeBounds:a=!1}=e;this.isFilled=e.isFilled,this.isClosed=e.isClosed,this.debugColor=e.debugColor,this.ignore=e.ignore,this.isLabel=n,this.isEmptyLabel=r,this.isInternal=o,this.excludeFromShapeBounds=a}isExcludedByFilter(e){return e?!!(this.isLabel&&!e.includeLabels||this.isInternal&&!e.includeInternal):!1}hitTestPoint(e,n=0,r=!1,o){return this.isClosed&&(this.isFilled||r)&&Ss(e,this.vertices)?!0:R.Dist2(e,this.nearestPoint(e))<=n*n}distanceToPoint(e,n=!1,r){return R.Dist(e,this.nearestPoint(e,r))*(this.isClosed&&(this.isFilled||n)&&Ss(e,this.vertices)?-1:1)}distanceToLineSegment(e,n,r){if(R.Equals(e,n))return this.distanceToPoint(e,!1,r);const{vertices:o}=this;if(o.length===0)throw Error("nearest point not found");if(o.length===1)return R.Dist(e,o[0]);let a,s=1/0,i,l,c;const d=this.isClosed?o.length:o.length-1;for(let u=0;u<o.length;u++){if(l=o[u],u<d){const m=o[(u+1)%o.length];if(NN(e,n,l,m))return 0}c=R.NearestPointOnLineSegment(e,n,l,!0),i=R.Dist2(l,c),i<s&&(s=i,a=c)}if(!a)throw Error("nearest point not found");return this.isClosed&&this.isFilled&&Ss(a,this.vertices)?-s:s}hitTestLineSegment(e,n,r=0,o){return this.distanceToLineSegment(e,n,o)<=r}intersectLineSegment(e,n,r){return(this.isClosed?tX(e,n,this.vertices):J2e(e,n,this.vertices))??[]}intersectCircle(e,n,r){return(this.isClosed?Z2e(e,n,this.vertices):eke(e,n,this.vertices))??[]}intersectPolygon(e,n){return l9(e,this.vertices,!0,this.isClosed)}intersectPolyline(e,n){return l9(e,this.vertices,!1,this.isClosed)}interpolateAlongEdge(e,n){const{vertices:r}=this;if(r.length===0)return new R(0,0);if(r.length===1||e<=0)return r[0];const o=e*this.length;let a=0;for(let s=0;s<(this.isClosed?r.length:r.length-1);s++){const i=r[s],l=r[(s+1)%r.length],c=R.Dist(i,l),d=a+c;if(d>=o)return R.Lrp(i,l,u0(a,d,o));a=d}return this.isClosed?r[0]:r[r.length-1]}uninterpolateAlongEdge(e,n){const{vertices:r,length:o}=this;let a=null,s=1/0,i=0;if(r.length===0||r.length===1)return 0;for(let c=0;c<(this.isClosed?r.length:r.length-1);c++){const d=r[c],u=r[(c+1)%r.length],m=R.NearestPointOnLineSegment(d,u,e,!0),h=R.Dist(m,e);h<s&&(s=h,a={start:d,end:u,nearestPoint:m,distanceToStart:i}),i+=R.Dist(d,u)}return dt(a),(a.distanceToStart+R.Dist(a.start,a.nearestPoint))/o}isPointInBounds(e,n=0){const{bounds:r}=this;return!(e.x<r.minX-n||e.y<r.minY-n||e.x>r.maxX+n||e.y>r.maxY+n)}overlapsPolygon(e){const n=e.map(l=>R.From(l)),{vertices:r,center:o,isFilled:a,isEmptyLabel:s,isClosed:i}=this;if(s)return!1;if(r.some(l=>Ss(l,n)))return!0;if(i){if(a&&(Ss(o,n)||n.every(l=>Ss(l,r)))||nX(n,r))return!0}else if(nke(n,r))return!0;return!1}transform(e,n){return new LN(this,e,n)}get vertices(){return this._vertices||(this._vertices=this.getVertices(Uc.EXCLUDE_LABELS)),this._vertices}getBoundsVertices(){return this.excludeFromShapeBounds?[]:this.vertices}get boundsVertices(){return this._boundsVertices||(this._boundsVertices=this.getBoundsVertices()),this._boundsVertices}getBounds(){return Be.FromPoints(this.boundsVertices)}get bounds(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}get center(){return this.bounds.center}get area(){return this._area||(this._area=this.getArea()),this._area}getArea(){if(!this.isClosed)return 0;const{vertices:e}=this;let n=0;for(let r=0,o=e.length;r<o;r++){const a=e[r],s=e[(r+1)%o];n+=a.x*s.y-s.x*a.y}return n/2}toSimpleSvgPath(){let e="";const{vertices:n}=this,r=n.length;if(r===0)return e;e+=`M${n[0].x},${n[0].y}`;for(let o=1;o<r;o++)e+=`L${n[o].x},${n[o].y}`;return this.isClosed&&(e+="Z"),e}get length(){return this._length?this._length:(this._length=this.getLength(Uc.EXCLUDE_LABELS),this._length)}getLength(e){const n=this.getVertices(e??Uc.EXCLUDE_LABELS);if(n.length===0)return 0;let r=n[0],o=0;for(let a=1;a<n.length;a++){const s=n[a];o+=R.Dist(r,s),r=s}return this.isClosed&&(o+=R.Dist(n[n.length-1],n[0])),o}}class LN extends Mp{constructor(n,r,o){super(n);L(this,"inverse");L(this,"decomposed");this.geometry=n,this.matrix=r,this.inverse=De.Inverse(r),this.decomposed=De.Decompose(r),o&&(o.isLabel!=null&&(this.isLabel=o.isLabel),o.isInternal!=null&&(this.isInternal=o.isInternal),o.debugColor!=null&&(this.debugColor=o.debugColor),o.ignore!=null&&(this.ignore=o.ignore)),dt(Eo(this.decomposed.scaleX,this.decomposed.scaleY),"non-uniform scaling is not yet supported")}getVertices(n){return this.geometry.getVertices(n).map(r=>De.applyToPoint(this.matrix,r))}getBoundsVertices(){return this.geometry.getBoundsVertices().map(n=>De.applyToPoint(this.matrix,n))}nearestPoint(n,r){return De.applyToPoint(this.matrix,this.geometry.nearestPoint(De.applyToPoint(this.inverse,n),r))}hitTestPoint(n,r=0,o,a){return this.geometry.hitTestPoint(De.applyToPoint(this.inverse,n),r/this.decomposed.scaleX,o,a)}distanceToPoint(n,r=!1,o){return this.geometry.distanceToPoint(De.applyToPoint(this.inverse,n),r,o)*this.decomposed.scaleX}distanceToLineSegment(n,r,o){return this.geometry.distanceToLineSegment(De.applyToPoint(this.inverse,n),De.applyToPoint(this.inverse,r),o)*this.decomposed.scaleX}hitTestLineSegment(n,r,o=0,a){return this.geometry.hitTestLineSegment(De.applyToPoint(this.inverse,n),De.applyToPoint(this.inverse,r),o/this.decomposed.scaleX,a)}intersectLineSegment(n,r,o){return De.applyToPoints(this.matrix,this.geometry.intersectLineSegment(De.applyToPoint(this.inverse,n),De.applyToPoint(this.inverse,r),o))}intersectCircle(n,r,o){return De.applyToPoints(this.matrix,this.geometry.intersectCircle(De.applyToPoint(this.inverse,n),r/this.decomposed.scaleX,o))}intersectPolygon(n,r){return De.applyToPoints(this.matrix,this.geometry.intersectPolygon(De.applyToPoints(this.inverse,n),r))}intersectPolyline(n,r){return De.applyToPoints(this.matrix,this.geometry.intersectPolyline(De.applyToPoints(this.inverse,n),r))}transform(n,r){return new LN(this.geometry,De.Multiply(n,this.matrix),{isLabel:(r==null?void 0:r.isLabel)??this.isLabel,isInternal:(r==null?void 0:r.isInternal)??this.isInternal,debugColor:(r==null?void 0:r.debugColor)??this.debugColor,ignore:(r==null?void 0:r.ignore)??this.ignore})}getSvgPathData(){throw new Error("Cannot get SVG path data for transformed geometry.")}}class pi extends Mp{constructor(n){super({...n,isClosed:!0,isFilled:!1});L(this,"children",[]);L(this,"ignoredChildren",[]);const r=o=>{for(const a of o)a instanceof pi?r(a.children):a.ignore?this.ignoredChildren.push(a):this.children.push(a)};if(r(n.children),this.children.length===0)throw Error("Group2d must have at least one child")}getVertices(n){return this.isExcludedByFilter(n)?[]:this.children.filter(r=>!r.isExcludedByFilter(n)).flatMap(r=>r.getVertices(n))}nearestPoint(n,r){let o=1/0,a;const{children:s}=this;if(s.length===0)throw Error("no children");let i,l;for(const c of s)c.isExcludedByFilter(r)||(i=c.nearestPoint(n,r),l=R.Dist2(i,n),l<o&&(o=l,a=i));if(!a)throw Error("nearest point not found");return a}distanceToPoint(n,r=!1,o){let a=1/0;for(const s of this.children){if(s.isExcludedByFilter(o))continue;const i=s.distanceToPoint(n,r,o);i<a&&(a=i)}return a}hitTestPoint(n,r,o,a=Uc.EXCLUDE_LABELS){return!!this.children.filter(s=>!s.isExcludedByFilter(a)).find(s=>s.hitTestPoint(n,r,o))}hitTestLineSegment(n,r,o,a=Uc.EXCLUDE_LABELS){return!!this.children.filter(s=>!s.isExcludedByFilter(a)).find(s=>s.hitTestLineSegment(n,r,o))}intersectLineSegment(n,r,o){return this.children.flatMap(a=>a.isExcludedByFilter(o)?io:a.intersectLineSegment(n,r,o))}intersectCircle(n,r,o){return this.children.flatMap(a=>a.isExcludedByFilter(o)?io:a.intersectCircle(n,r,o))}getBoundsVertices(){return this.excludeFromShapeBounds?[]:this.children.flatMap(n=>n.getBoundsVertices())}intersectPolygon(n,r){return this.children.flatMap(o=>o.isExcludedByFilter(r)?io:o.intersectPolygon(n,r))}intersectPolyline(n,r){return this.children.flatMap(o=>o.isExcludedByFilter(r)?io:o.intersectPolyline(n,r))}interpolateAlongEdge(n,r){const o=this.getLength(r),a=n*o;let s=0;for(const i of this.children){if(i.isExcludedByFilter(r))continue;const l=i.length,c=s+l;if(c>=a)return i.interpolateAlongEdge(u0(s,c,a),r);s=c}return this.children[this.children.length-1].interpolateAlongEdge(1,r)}uninterpolateAlongEdge(n,r){const o=this.getLength(r);let a=null,s=1/0,i=0;for(const d of this.children){if(d.isExcludedByFilter(r))continue;const u=d.getLength(r),m=i+u,h=d.distanceToPoint(n,!1,r);h<s&&(s=h,a={startLength:i,endLength:m,child:d}),i=m}dt(a);const l=a.child.uninterpolateAlongEdge(n,r);return qt(a.startLength,a.endLength,l)/o}transform(n){return new pi({children:this.children.map(r=>r.transform(n)),isLabel:this.isLabel,debugColor:this.debugColor,ignore:this.ignore})}getArea(){return this.children[0].area}toSimpleSvgPath(){let n="";for(const o of this.children)n+=o.toSimpleSvgPath();const r=Be.FromPoints(this.boundsVertices).corners;for(let o=0,a=r.length;o<a;o++){const s=r[o],i=r[(o-1+a)%a],l=s.dist(i),c=r[(o+1)%a],d=s.dist(c),u=s.clone().lrp(i,4/l),m=s,h=s.clone().lrp(c,4/d);n+=`M${u.x},${u.y} L${m.x},${m.y} L${h.x},${h.y} `}return n}getLength(n){let r=0;for(const o of this.children)o.isExcludedByFilter(n)||(r+=o.length);return r}getSvgPathData(){return this.children.map((n,r)=>n.isLabel?"":n.getSvgPathData(r===0)).join(" ")}overlapsPolygon(n){return this.children.some(r=>r.overlapsPolygon(n))}}class Yh extends Mp{constructor(n){super({...n,isClosed:!1,isFilled:!1});L(this,"_start");L(this,"_end");L(this,"_d");L(this,"_u");L(this,"_ul");const{start:r,end:o}=n;this._start=r,this._end=o,this._d=r.clone().sub(o),this._u=this._d.clone().uni(),this._ul=this._u.len()}getLength(){return this._d.len()}getVertices(){return[this._start,this._end]}nearestPoint(n){const{_start:r,_end:o,_d:a,_u:s,_ul:i}=this;if(a.len()===0||i===0)return r;const l=R.Sub(n,r).dpr(s)/i,c=r.x+s.x*l;if(c<Math.min(r.x,o.x))return r.x<o.x?r:o;if(c>Math.max(r.x,o.x))return r.x>o.x?r:o;const d=r.y+s.y*l;return d<Math.min(r.y,o.y)?r.y<o.y?r:o:d>Math.max(r.y,o.y)?r.y>o.y?r:o:new R(c,d)}getSvgPathData(n=!0){const{_start:r,_end:o}=this;return`${n?`M${r.toFixed()}`:""} L${o.toFixed()}`}}class mv extends Mp{constructor(n){super({isClosed:!1,isFilled:!1,...n});L(this,"_points");L(this,"_segments");const{points:r}=n;if(this._points=r,r.length<2)throw new Error("Polyline2d: points must be an array of at least 2 points")}get segments(){if(!this._segments){this._segments=[];const{vertices:n}=this;for(let r=0,o=n.length-1;r<o;r++){const a=n[r],s=n[r+1];this._segments.push(new Yh({start:a,end:s}))}this.isClosed&&this._segments.push(new Yh({start:n[n.length-1],end:n[0]}))}return this._segments}getLength(){return this.segments.reduce((n,r)=>n+r.length,0)}getVertices(){return this._points}nearestPoint(n){const{segments:r}=this;let o=this._points[0],a=1/0,s,i;for(let l=0;l<r.length;l++)s=r[l].nearestPoint(n),i=R.Dist2(s,n),i<a&&(o=s,a=i);if(!o)throw Error("nearest point not found");return o}hitTestLineSegment(n,r,o=0){const{segments:a}=this;for(let s=0,i=a.length;s<i;s++)if(a[s].hitTestLineSegment(n,r,o))return!0;return!1}getSvgPathData(){const{vertices:n}=this;return n.length<2?"":n.reduce((r,o,a)=>a===0?`M ${o.x} ${o.y}`:`${r} L ${o.x} ${o.y}`,"")}}class h0 extends mv{constructor(e){if(super({...e}),this.isClosed=!0,e.points.length<3)throw new Error("Polygon2d: points must be an array of at least 3 points")}}class rc extends h0{constructor(n){const{x:r=0,y:o=0,width:a,height:s}=n;super({...n,points:[new R(r,o),new R(r+a,o),new R(r+a,o+s),new R(r,o+s)]});L(this,"_x");L(this,"_y");L(this,"_w");L(this,"_h");this._x=r,this._y=o,this._w=a,this._h=s}getBounds(){return new Be(this._x,this._y,this._w,this._h)}getSvgPathData(){const{_x:n,_y:r,_w:o,_h:a}=this;return this.negativeZeroFix(),`M${n},${r} h${o} v${a} h${-o}z`}negativeZeroFix(){this._x=gS(this._x),this._y=gS(this._y),this._w=gS(this._w),this._h=gS(this._h)}}function gS(t){return Object.is(t,-0)?0:t}class ec{constructor(e){L(this,"options",{});this.editor=e}static configure(e){return class extends this{constructor(){super(...arguments);L(this,"options",{...this.options,...e})}}}getFontFaces(e){return io}canSnap(e){return!0}canTabTo(e){return!0}canScroll(e){return!1}canBind(e){return!0}canEdit(e){return!1}canResize(e){return!0}canResizeChildren(e){return!0}canEditInReadonly(e){return!1}canCrop(e){return!1}canBeLaidOut(e,n){return!0}canCull(e){return!0}providesBackgroundForChildren(e){return!1}hideResizeHandles(e){return!1}hideRotateHandle(e){return!1}hideSelectionBoundsBg(e){return!1}hideSelectionBoundsFg(e){return!1}isAspectRatioLocked(e){return!1}isExportBoundsContainer(e){return!1}canReceiveNewChildrenOfType(e,n){return!1}expandSelectionOutlinePx(e){return 0}getCanvasSvgDefs(){return[]}getBoundsSnapGeometry(e){return{}}getHandleSnapGeometry(e){return{}}getText(e){}getAriaDescriptor(e){}}L(ec,"props"),L(ec,"migrations"),L(ec,"type");function rX(t,e,n={}){const{closed:r=!1,snap:o=1,start:a="outset",end:s="outset",lengthRatio:i=2,style:l="dashed",forceSolid:c=!1}=n;let d=0,u=0,m=1,h=0,y=0;if(c)return{strokeDasharray:"none",strokeDashoffset:"none"};switch(l){case"dashed":{m=1,d=Math.min(e*i,t/4);break}case"dotted":{m=100,d=e/m;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return r||(a==="outset"?(t+=d/2,y+=d/2):a==="skip"&&(t-=d,y-=d),s==="outset"?t+=d/2:s==="skip"&&(t-=d)),u=Math.floor(t/d/(2*m)),u-=u%o,u<3&&l==="dashed"?t/e<4?(d=t,u=1,h=0):(d=t*(1/3),h=t*(1/3)):(d=t/u/(2*m),r?(y=d/2,h=(t-u*d)/u):h=(t-u*d)/Math.max(1,u-1)),{strokeDasharray:[d,h].join(" "),strokeDashoffset:y.toString()}}function c9({bounds:t,className:e}){const n=ue(),r=ce("zoom level",()=>n.getZoomLevel(),[n]);return g.jsx("g",{className:e,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map((o,a)=>{const{strokeDasharray:s,strokeDashoffset:i}=rX(o[0].dist(o[1]),1/r,{style:"dashed",lengthRatio:4});return g.jsx("line",{x1:o[0].x,y1:o[0].y,x2:o[1].x,y2:o[1].y,strokeDasharray:s,strokeDashoffset:i},a)})})}class S1 extends ec{hideSelectionBoundsFg(){return!0}canBind(){return!1}canResize(){return!0}canResizeChildren(){return!0}getDefaultProps(){return{}}getGeometry(e){const n=this.editor.getSortedChildIdsForParent(e.id);return n.length===0?new rc({width:1,height:1,isFilled:!1}):new pi({children:n.map(r=>{const o=this.editor.getShape(r);return this.editor.getShapeGeometry(r).transform(this.editor.getShapeLocalTransform(o),{isLabel:!1})})})}component(e){const n=this.editor.getErasingShapeIds().includes(e.id),{hintingShapeIds:r}=this.editor.getCurrentPageState(),o=r.length>0&&r.some(i=>i!==e.id&&this.editor.isShapeOfType(this.editor.getShape(i),"group")),a=this.editor.getCurrentPageState().focusedGroupId!==e.id;if(!n&&(a||o))return null;const s=this.editor.getShapeGeometry(e).bounds;return g.jsx(fp,{children:g.jsx(c9,{className:"tl-group",bounds:s})})}indicator(e){const n=this.editor.getShapeGeometry(e).bounds;return g.jsx(c9,{className:"",bounds:n})}onChildrenChange(e){const n=this.editor.getSortedChildIdsForParent(e.id);if(n.length===0){this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.deleteShapes([e.id]);return}else if(n.length===1){this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(n,e.parentId),this.editor.deleteShapes([e.id]);return}}}L(S1,"type","group"),L(S1,"props",bY),L(S1,"migrations",yY);const oX=[S1],rke=new Set(oX.map(t=>t.type));function aX(t){const e=[...oX],n=new Set;for(const r of t){if(rke.has(r.type))throw new Error(`Shape type "${r.type}" is a core shapes type and cannot be overridden`);if(n.has(r.type))throw new Error(`Shape type "${r.type}" is defined more than once`);e.push(r),n.add(r.type)}return e}function sX(t,e){const n=new Map;return async function(o){const a=n.get(o);if(a)return a;const s=(async()=>{try{const i=await Vu(o,e);return dt(i.ok),await t(i)}catch(i){return console.error(i),null}})();return n.set(o,s),s}}const Ow=sX(async t=>await Xa.blobToDataUrl(await t.blob())),oke=/@import\s+(?:"([^"]+)"|'([^']+)'|url\s*\(\s*(?:"([^"]+)"|'([^']+)'|([^'")]+))\s*\))([^;]+);/gi,ake=/@font-face\s*{([^}]+)}/gi,iX=/url\s*\(\s*(?:"([^"]+)"|'([^']+)'|([^'")]+))\s*\)/gi,ske=/(?:^|;)\s*font-family\s*:\s*(?:([^'"][^;\n]+)|"([^"]+)"|'([^']+)')\s*(?:;|$)/gi;function ike(t){return Array.from(t.matchAll(oke),e=>({url:e[1]||e[2]||e[3]||e[4]||e[5],extras:e[6]}))}function lX(t,e){return Array.from(t.matchAll(ake),n=>{const r=n[1],o=Array.from(r.matchAll(iX),s=>{var l;const i=s[1]||s[2]||s[3];return{original:i,resolved:((l=zt(i,e))==null?void 0:l.href)??null}}),a=new Set(Array.from(r.matchAll(ske),s=>(s[1]||s[2]||s[3]).toLowerCase()));return{fontFace:r,urls:o,fontFamilies:a}})}function lke(t){const e=/\s*(?:([^'"][^;\n\s,]+)|"([^"]+)"|'([^']+)')\s*/gi,n=/\s*,\s*/gi,r=new Set;for(;;){const o=e.exec(t);if(!o)break;const a=o[1]||o[2]||o[3];if(r.add(a.toLowerCase()),n.lastIndex=e.lastIndex,!n.exec(t))break;e.lastIndex=n.lastIndex}return r}function cX(t){return!(t.startsWith("-")||t.startsWith("animation")||t.startsWith("transition")||t==="cursor"||t==="pointer-events"||t==="user-select"||t==="touch-action")}function cke(t,e){return{imports:ike(t),fontFaces:lX(t,e)}}function uke(t){return Array.from(t.matchAll(iX),e=>({original:e[0],url:e[1]||e[2]||e[3]}))}var dke=Object.create,uX=Object.defineProperty,pke=Object.getOwnPropertyDescriptor,fke=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),dX=t=>{throw TypeError(t)},pX=(t,e,n)=>e in t?uX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mke=t=>[,,,dke(null)],fX=["class","method","getter","setter","accessor","field","value","get","set"],mX=t=>t!==void 0&&typeof t!="function"?dX("Function expected"):t,hke=(t,e,n,r,o)=>({kind:fX[t],name:e,metadata:r,addInitializer:a=>n._?dX("Already initialized"):o.push(mX(a||null))}),gke=(t,e)=>pX(e,fke("metadata"),t[3]),bke=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},yke=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=fX[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,pke(o,n)),S=r.length-1;S>=0;S--)l=hke(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,mX(s)&&(x[y]=s);return x&&uX(o,n,x),o},bS=(t,e,n)=>pX(t,typeof e!="symbol"?e+"":e,n),hX,Mw;const gX="tldraw-svg-export";hX=[oi];class jN{constructor(){bke(Mw,5,this),bS(this,"fontFacesPromise",null),bS(this,"foundFontNames",new Set),bS(this,"fontFacesToEmbed",new Set),bS(this,"pendingPromises",[])}startFindingCurrentDocumentFontFaces(){dt(!this.fontFacesPromise,"FontEmbedder already started"),this.fontFacesPromise=vke()}onFontFamilyValue(e){dt(this.fontFacesPromise,"FontEmbedder not started");const n=lke(e);for(const r of n){if(this.foundFontNames.has(r))return;this.foundFontNames.add(r),this.pendingPromises.push(this.fontFacesPromise.then(o=>{const a=o.filter(s=>s.fontFamilies.has(r));for(const s of a)if(!this.fontFacesToEmbed.has(s)){this.fontFacesToEmbed.add(s);for(const i of s.urls)!i.resolved||i.embedded||(i.embedded=Ow(i.resolved))}}))}}async createCss(){await Promise.all(this.pendingPromises);let e="";for(const n of this.fontFacesToEmbed){let r=`@font-face {${n.fontFace}}`;for(const o of n.urls){if(!o.embedded)continue;const a=await o.embedded;a&&(r=r.replace(o.original,a))}e+=r}return e}}Mw=mke();yke(Mw,1,"onFontFamilyValue",hX,jN);gke(Mw,jN);async function vke(){var n;const t=[],e=Array.from(document.styleSheets).filter(r=>{var o;return!((o=r.ownerNode)!=null&&o.closest(`.${gX}`))});for(const r of e){let o;try{o=r.cssRules}catch{}if(o){for(const a of r.cssRules)if(a instanceof CSSFontFaceRule)t.push(lX(a.cssText,r.href??document.baseURI));else if(a instanceof CSSImportRule){const s=new URL(a.href,((n=a.parentStyleSheet)==null?void 0:n.href)??document.baseURI);t.push(EM(s.href))}}else r.href&&t.push(EM(r.href))}return Dt(await Promise.all(t)).flat()}const EM=sX(async t=>{const e=cke(await t.text(),t.url),n=await Promise.all(e.imports.map(({url:r})=>EM(new URL(r,t.url).href)));return[...e.fontFaces,...Dt(n).flat()]}),Ii=(t,e,{currentColor:n})=>t==="currentColor"||t===n,cn=(t,e,{parentStyles:n})=>n[e]===t,Vr=t=>(e,n,{getStyle:r})=>{const o=r(`border-${t}-width`),a=r(`border-${t}-style`);return o==="0px"||a==="none"},bX={"border-block-end-color":Ii,"border-block-start-color":Ii,"border-bottom-color":Ii,"border-inline-end-color":Ii,"border-inline-start-color":Ii,"border-left-color":Ii,"border-right-color":Ii,"border-top-color":Ii,"caret-color":Ii,"column-rule-color":Ii,"outline-color":Ii,"text-decoration":(t,e,{currentColor:n})=>t==="none solid currentColor"||t==="none solid "+n,"text-decoration-color":Ii,"text-emphasis-color":Ii,"border-collapse":cn,"border-spacing":cn,"caption-side":cn,cursor:cn,direction:cn,"empty-cells":cn,"font-family":cn,"font-size":cn,"font-style":cn,"font-variant":cn,"font-weight":cn,"font-size-adjust":cn,"font-stretch":cn,font:cn,"letter-spacing":cn,"line-height":cn,"list-style-image":cn,"list-style-position":cn,"list-style-type":cn,"list-style":cn,orphans:cn,"overflow-wrap":cn,quotes:cn,"stroke-linecap":cn,"stroke-linejoin":cn,"tab-size":cn,"text-align":cn,"text-align-last":cn,"text-indent":cn,"text-justify":cn,"text-shadow":cn,"text-transform":cn,visibility:cn,"white-space":cn,"white-space-collapse":cn,widows:cn,"word-break":cn,"word-spacing":cn,"word-wrap":cn,"border-top":Vr("top"),"border-right":Vr("right"),"border-bottom":Vr("bottom"),"border-left":Vr("left"),"border-block-end":Vr("block-end"),"border-block-start":Vr("block-start"),"border-inline-end":Vr("inline-end"),"border-inline-start":Vr("inline-start"),"border-top-style":Vr("top"),"border-right-style":Vr("right"),"border-bottom-style":Vr("bottom"),"border-left-style":Vr("left"),"border-block-end-style":Vr("block-end"),"border-block-start-style":Vr("block-start"),"border-inline-end-style":Vr("inline-end"),"border-inline-start-style":Vr("inline-start"),"border-top-width":Vr("top"),"border-right-width":Vr("right"),"border-bottom-width":Vr("bottom"),"border-left-width":Vr("left"),"border-block-end-width":Vr("block-end"),"border-block-start-width":Vr("block-start"),"border-inline-end-width":Vr("inline-end")};function yX(t){if(t.shadowRoot)return t.shadowRoot.childNodes;if(Tke(t)){const e=t.assignedNodes();if(e!=null&&e.length)return e}return t.childNodes}function*TM(t){for(const e of yX(t))xke(e)&&(yield e)}function Rw(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)??globalThis}function xke(t){return t instanceof Rw(t).Element}function Ske(t){return t instanceof Rw(t).ShadowRoot}function Eke(t){return"getRootNode"in t&&Ske(t.getRootNode())}function Tke(t){return Eke(t)&&t instanceof Rw(t).HTMLSlotElement}function wke(t){return t.style}function BN(t,e){return Rw(t).getComputedStyle(t,e)}const Xh={};class Cke{constructor(e){L(this,"styles",new Map);L(this,"fonts",new jN);this.root=e}readRootElementStyles(e){this.readElementStyles(e,{shouldRespectDefaults:!1,shouldSkipInheritedParentStyles:!1});const n=Array.from(TM(e));for(;n.length;){const r=n.pop();n.push(...TM(r)),this.readElementStyles(r,{shouldRespectDefaults:!0,shouldSkipInheritedParentStyles:!0})}}readElementStyles(e,{shouldRespectDefaults:n=!0,shouldSkipInheritedParentStyles:r=!0}){var i;const o=n?Ike(e.tagName.toLowerCase()):Xh,a=Object.assign({},Xh);if(r){let l=e.parentElement;for(;l;){const c=(i=this.styles.get(l))==null?void 0:i.self;for(const d in c)a[d]||(a[d]=c[d]);l=l.parentElement}}const s={self:Ake(e,{defaultStyles:o,parentStyles:a}),before:u9(e,"::before"),after:u9(e,"::after")};this.styles.set(e,s)}fetchResources(){const e=[];for(const n of this.styles.values())for(const r of oo(n))if(r)for(const[o,a]of Object.entries(r)){if(!a)continue;o==="font-family"&&this.fonts.onFontFamilyValue(a);const s=uke(a);s.length!==0&&e.push(...s.map(async({url:i,original:l})=>{const c=await Ow(i)??"data:";r[o]=a.replace(l,`url("${c}")`)}))}return Promise.all(e)}unwrapCustomElements(){const e=new Set,n=(r,o)=>{if(e.has(r))return;e.add(r);const a=r.shadowRoot;if(a){const s=document.createElement("div");this.styles.set(s,this.styles.get(r)),s.setAttribute("data-tl-custom-element",r.tagName),(o??r.parentElement).appendChild(s);for(const i of a.childNodes)i instanceof Element?n(i,s):s.appendChild(i.cloneNode(!0));r.remove()}else if(o){if(r.tagName.toLowerCase()==="style")return;const s=r.cloneNode(!1);this.styles.set(s,this.styles.get(r)),o.appendChild(s);for(const i of yX(r))i instanceof Element?n(i,s):s.appendChild(i.cloneNode(!0))}};for(const r of this.styles.keys())n(r,null)}embedStyles(){let e="";for(const[n,r]of this.styles){if(r.after||r.before){const a=`pseudo-${Ln()}`;n.classList.add(a),r.before&&(e+=`.${a}::before {${d9(r.before)}}
`),r.after&&(e+=`.${a}::after {${d9(r.after)}}
`)}const o=wke(n);for(const[a,s]of Object.entries(r.self))s&&o.setProperty(a,s);o.fontKerning==="auto"&&(o.fontKerning="normal")}return e}async getFontFaceCss(){return await this.fonts.createCss()}dispose(){kke()}}function Ake(t,{defaultStyles:e,parentStyles:n}){return t.computedStyleMap?vX(t.computedStyleMap(),{defaultStyles:e,parentStyles:n}):FN(BN(t),{defaultStyles:e,parentStyles:n})}function u9(t,e){const n=BN(t,e),r=n.getPropertyValue("content");if(!(r===""||r==="none"))return FN(n,{defaultStyles:Xh,parentStyles:Xh})}function vX(t,{defaultStyles:e,parentStyles:n}){var s;const r={},a={currentColor:((s=t.get("color"))==null?void 0:s.toString())||"",parentStyles:n,defaultStyles:e,getStyle:i=>{var l;return((l=t.get(i))==null?void 0:l.toString())??""}};for(const i of t.keys()){if(!cX(i))continue;const l=t.get(i).toString();if(e[i]===l)continue;const c=vo(bX,i);c&&c(l,i,a)||(r[i]=l)}return r}function FN(t,{defaultStyles:e,parentStyles:n}){const r={},a={currentColor:t.color,parentStyles:n,defaultStyles:e,getStyle:s=>t.getPropertyValue(s)};for(const s in t){if(!cX(s))continue;const i=t.getPropertyValue(s);if(e[s]===i)continue;const l=vo(bX,s);l&&l(i,s,a)||(r[s]=i)}return r}function d9(t){let e="";for(const[n,r]of Object.entries(t))e+=`${n}: ${r};`;return e}let Lh;const p9={};function _ke(){if(!Lh){const t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t);const e=ra(t.contentDocument,"frame must have a document"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");n.appendChild(r),e.body.appendChild(n),Lh={iframe:t,foreignObject:r,document:e}}return Lh}function kke(){Lh&&(document.body.removeChild(Lh.iframe),Lh=void 0)}const f9={defaultStyles:Xh,parentStyles:Xh};function Ike(t){let e=p9[t];if(!e){const{foreignObject:n,document:r}=_ke(),o=r.createElement(t);n.appendChild(o),e=o.computedStyleMap?vX(o.computedStyleMap(),f9):FN(BN(o),f9),n.removeChild(o),p9[t]=e}return e}function Pke(t,e){Array.from(t.attributes).forEach(r=>{e.setAttribute(r.name,r.value)})}function m9(t,e){return t.replaceWith(e),e}async function zy(t,e){const n=document.createElement("img");e&&Pke(e,n),n.setAttribute("src",t??"data:"),n.setAttribute("decoding","sync"),n.setAttribute("loading","eager");try{await n.decode()}catch{}return n}async function Oke(t){try{const e=t.toDataURL();return await zy(e,t)}catch{return await zy(null,t)}}async function Mke(t){try{const e=await Li.getVideoFrameAsDataUrl(t);return zy(e,t)}catch(e){console.error("Could not get video frame",e)}if(t.poster){const e=await Ow(t.poster);return zy(e,t)}return zy(null,t)}async function xX(t){if(t instanceof HTMLCanvasElement)return m9(t,await Oke(t));if(t instanceof HTMLVideoElement)return m9(t,await Mke(t));if(t instanceof HTMLImageElement){const e=t.currentSrc||t.src,n=await Ow(e);t.setAttribute("src",n??"data:"),t.setAttribute("decoding","sync"),t.setAttribute("loading","eager");try{await t.decode()}catch{}return t}else t instanceof HTMLInputElement?t.setAttribute("value",t.value):t instanceof HTMLTextAreaElement&&(t.textContent=t.value);await Promise.all(Array.from(TM(t),e=>xX(e)))}const wM=(t,e)=>t.props===e.props&&t.meta===e.meta,SX=w.memo(function({id:e,shape:n,util:r,index:o,backgroundIndex:a,opacity:s}){const i=ue(),{ShapeErrorFallback:l,ShapeWrapper:c}=cr(),d=w.useRef(null),u=w.useRef(null);w.useEffect(()=>si("load fonts",()=>{const y=i.fonts.getShapeFontFaces(e);i.fonts.requestFonts(y)}),[i,e]);const m=w.useRef({transform:"",clipPath:"none",width:0,height:0,x:0,y:0,isCulled:!1});Rf("set shape stuff",()=>{const y=i.getShape(e);if(!y)return;const v=m.current,x=i.getShapeClipPath(e)??"none";x!==v.clipPath&&($a(d.current,"clip-path",x),$a(u.current,"clip-path",x),v.clipPath=x);const S=i.getShapePageTransform(e),T=De.toCssString(S),C=i.getShapeGeometry(y).bounds;T!==v.transform&&($a(d.current,"transform",T),$a(u.current,"transform",T),v.transform=T);const _=Math.max(C.width,1),I=Math.max(C.height,1);(_!==v.width||I!==v.height)&&($a(d.current,"width",_+"px"),$a(d.current,"height",I+"px"),$a(u.current,"width",_+"px"),$a(u.current,"height",I+"px"),v.width=_,v.height=I)},[i]),w.useLayoutEffect(()=>{const y=d.current,v=u.current;$a(y,"opacity",s),$a(v,"opacity",s),$a(y,"z-index",o),$a(v,"z-index",a)},[s,o,a]),Rf("set display",()=>{if(!i.getShape(e))return;const x=i.getCulledShapes().has(e);x!==m.current.isCulled&&($a(d.current,"display",x?"none":"block"),$a(u.current,"display",x?"none":"block"),m.current.isCulled=x)},[i]);const h=w.useCallback(y=>i.annotateError(y,{origin:"shape",willCrashApp:!1}),[i]);return!n||!c?null:g.jsxs(g.Fragment,{children:[r.backgroundComponent&&g.jsx(c,{ref:u,shape:n,isBackground:!0,children:g.jsx(m0,{fallback:l,onError:h,children:g.jsx(TX,{shape:n,util:r})})}),g.jsx(c,{ref:d,shape:n,isBackground:!1,children:g.jsx(m0,{fallback:l,onError:h,children:g.jsx(EX,{shape:n,util:r})})})]})}),EX=w.memo(function({shape:e,util:n}){return bw("InnerShape:"+e.type,()=>n.component(n.editor.store.unsafeGetWithoutCapture(e.id)),[n,e.id])},(t,e)=>wM(t.shape,e.shape)&&t.util===e.util),TX=w.memo(function({shape:e,util:n}){return bw("InnerShape:"+e.type,()=>{var r;return(r=n.backgroundComponent)==null?void 0:r.call(n,n.editor.store.unsafeGetWithoutCapture(e.id))},[n,e.id])},(t,e)=>t.shape.props===e.shape.props&&t.shape.meta===e.shape.meta&&t.util===e.util);function Rc(t){const e=w.useRef();return w.useLayoutEffect(()=>{e.current=t}),w.useDebugValue(t),w.useCallback((...n)=>{const r=e.current;return dt(r,"fn does not exist"),r(...n)},[])}const zN=w.createContext(null);function Rke({context:t,editor:e,children:n}){const r=e.options.exportProvider;return g.jsx(PN,{editor:e,children:g.jsx(jY,{container:e.getContainer(),children:g.jsx(zN.Provider,{value:t,children:g.jsx(r,{children:n})})})})}function hv(){return w.useContext(zN)}function Dke(){const t=w.useContext(zN),[e]=w.useState(BD);return w.useEffect(()=>(t==null||t.waitUntil(e),()=>{e.resolve()}),[e,t]),Rc(()=>{e.resolve()})}var Nke=Object.create,wX=Object.defineProperty,Lke=Object.getOwnPropertyDescriptor,jke=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),CX=t=>{throw TypeError(t)},AX=(t,e,n)=>e in t?wX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bke=t=>[,,,Nke(null)],_X=["class","method","getter","setter","accessor","field","value","get","set"],kX=t=>t!==void 0&&typeof t!="function"?CX("Function expected"):t,Fke=(t,e,n,r,o)=>({kind:_X[t],name:e,metadata:r,addInitializer:a=>n._?CX("Already initialized"):o.push(kX(a||null))}),zke=(t,e)=>AX(e,jke("metadata"),t[3]),Uke=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},qke=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=_X[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,Lke(o,n)),S=r.length-1;S>=0;S--)l=Fke(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,kX(s)&&(x[y]=s);return x&&wX(o,n,x),o},h9=(t,e,n)=>AX(t,typeof e!="symbol"?e+"":e,n),IX,Dw;IX=[oi];class UN{constructor(e){this.maxDelayTimeMs=e,Uke(Dw,5,this),h9(this,"isResolved",!1),h9(this,"promisesToWaitFor",[])}waitUntil(e){if(this.isResolved)throw new Error("Cannot `waitUntil` - the export has already been resolved. Make sure to call `waitUntil` as soon as possible during an export - ie within the first react effect after rendering.");this.promisesToWaitFor.push(e.catch(n=>console.error("Error while waiting for export:",n)))}async resolvePromises(){let e=null;for(;this.promisesToWaitFor.length!==e;)e=this.promisesToWaitFor.length,await Promise.allSettled(this.promisesToWaitFor),await aM(0)}async resolve(){const e=aM(this.maxDelayTimeMs).then(()=>"timeout"),n=this.resolvePromises().then(()=>"resolved");await Promise.race([e,n])==="timeout"&&console.warn("[tldraw] Export delay timed out after ${this.maxDelayTimeMs}ms"),this.isResolved=!0}}Dw=Bke();qke(Dw,1,"waitUntil",IX,UN);zke(Dw,UN);function Hke(t,e,n={}){var S,T;if(!window.document)throw Error("No document");const{scale:r=1,background:o=t.getInstanceState().exportBackground,padding:a=t.options.defaultSvgPadding,preserveAspectRatio:s}=n,i=n.darkMode??t.user.getIsDarkMode(),l=t.getShapeAndDescendantIds(e),c=t.getUnorderedRenderingShapes(!1).filter(({id:C})=>l.has(C)),d=e.length===1&&t.isShapeOfType(t.getShape(e[0]),"frame")?e[0]:null;let u=null;if(n.bounds?u=n.bounds.clone().expandBy(a):u=$ke(t,c,a,d),!u)return;const m=u.width*r,h=u.height*r;try{(T=(S=document.body).focus)==null||T.call(S)}catch{}const y=new UN(t.options.maxExportDelayMs),v=BD();return y.waitUntil(v),{jsx:g.jsx(Vke,{editor:t,preserveAspectRatio:s,scale:r,pixelRatio:n.pixelRatio??null,bbox:u,background:o,singleFrameShapeId:d,isDarkMode:i,renderingShapes:c,onMount:v.resolve,waitUntil:y.waitUntil}),width:m,height:h,exportDelay:y}}function $ke(t,e,n,r){let o=!1,a=null;for(const{id:s}of e){const i=t.getShapeMaskedPageBounds(s);if(!i)continue;const l=t.getShape(s),c=t.getShapeUtil(l).isExportBoundsContainer(l);a?c&&Be.ContainsApproximately(i,a)?(o=!0,a=i.clone()):(o&&!Be.ContainsApproximately(a,i)&&(o=!1),a.union(i)):(o=c,a=i.clone())}return a?(!r&&!o&&a.expandBy(n),a):null}function Vke({editor:t,preserveAspectRatio:e,scale:n,pixelRatio:r,bbox:o,background:a,singleFrameShapeId:s,isDarkMode:i,renderingShapes:l,onMount:c,waitUntil:d}){const u=cm(),m=Op({isDarkMode:i}),h=iv("export state",{defsById:{},shapeElements:null}),{defsById:y,shapeElements:v}=ce(h),x=Rc(_=>{h.update(I=>{if(ai(I.defsById,_.key))return I;const P=Promise.resolve(_.getElement());return d(P.then(M=>{h.update(D=>({...D,defsById:{...D.defsById,[_.key]:{pending:!1,element:M}}}))})),{...I,defsById:{...I.defsById,[_.key]:{pending:!0,element:P}}}})}),S=w.useMemo(()=>({isDarkMode:i,waitUntil:d,addExportDef:x,scale:n,pixelRatio:r,async resolveAssetUrl(_,I){const P=t.getAsset(_);return!P||P.type!=="image"&&P.type!=="video"?null:await t.resolveAssetUrl(_,{screenScale:n*(I/P.props.w),shouldResolveToOriginal:r===null,dpr:r??void 0})}}),[i,d,x,n,r,t]),T=w.useRef(!1);w.useLayoutEffect(()=>{if(T.current)throw new Error("SvgExport should only render once - do not use with react strict mode");T.current=!0,(async()=>{const _={},I=l.map(async({id:M,opacity:D,index:F,backgroundIndex:B})=>{var j,q;if(M===s)return[];const V=t.getShape(M);if(t.isShapeOfType(V,"group"))return[];const z=[],H=t.getShapeUtil(V);if(H.toSvg||H.toBackgroundSvg){const[U,Y]=await Promise.all([(j=H.toSvg)==null?void 0:j.call(H,V,S),(q=H.toBackgroundSvg)==null?void 0:q.call(H,V,S)]),X=t.getShapePageTransform(V);let ee=X.toCssString(),$=1;"scale"in V.props&&V.props.scale!==1&&($=V.props.scale,ee=`${ee} scale(${V.props.scale}, ${V.props.scale})`);const G=t.getShapeMask(V.id),re=G?De.From(De.Inverse(X)).applyToPoints(G):null,K=kN(u,V.id);re&&(_[K]={pending:!1,element:g.jsx("clipPath",{id:K,children:g.jsx("path",{d:`M${re.map(({x:ve,y:xe})=>`${ve/$},${xe/$}`).join("L")}Z`})})}),U&&z.push({zIndex:F,element:g.jsx("g",{transform:ee,opacity:D,clipPath:G?`url(#${K})`:void 0,children:U},`fg_${V.id}`)}),Y&&z.push({zIndex:B,element:g.jsx("g",{transform:ee,opacity:D,clipPath:G?`url(#${K})`:void 0,children:Y},`bg_${V.id}`)})}else z.push({zIndex:F,element:g.jsx(g9,{shape:V,util:H,component:EX,className:"tl-shape",bbox:o,opacity:D},`fg_${V.id}`)}),H.backgroundComponent&&z.push({zIndex:B,element:g.jsx(g9,{shape:V,util:H,component:TX,className:"tl-shape tl-shape-background",bbox:o,opacity:D},`bg_${V.id}`)});return z}),P=(await Promise.all(I)).flat();Qf.flushSync(()=>{h.update(M=>({...M,shapeElements:P.sort((D,F)=>D.zIndex-F.zIndex).map(({element:D})=>D),defsById:{...M.defsById,..._}}))})})()},[o,t,S,u,l,s,h]),w.useEffect(()=>{const _=new Set;for(const{id:I}of l)for(const P of t.fonts.getShapeFontFaces(I))_.add(P);for(const I of _)x({key:Ln(),getElement:async()=>{const P=await t.fonts.toEmbeddedCssDeclaration(I);return g.jsx("style",{nonce:t.options.nonce,children:P})}})},[t,l,x]),w.useEffect(()=>{v!==null&&c()},[c,v]);let C=a?m.background:"transparent";if(s&&a){const _=t.getShapeUtil("frame");if(_!=null&&_.options.showColors){const I=t.getShape(s);C=yn(m,I.props.color,"frameFill")}else C=m.solid}return g.jsx(Rke,{editor:t,context:S,children:g.jsxs("svg",{preserveAspectRatio:e,direction:"ltr",width:o.width*n,height:o.height*n,viewBox:`${o.minX} ${o.minY} ${o.width} ${o.height}`,strokeLinecap:"round",strokeLinejoin:"round",style:{backgroundColor:C},"data-color-mode":i?"dark":"light",className:`tl-container tl-theme__force-sRGB ${i?"tl-theme__dark":"tl-theme__light"}`,children:[g.jsx("defs",{children:Object.entries(y).map(([_,I])=>I.pending?null:g.jsx(w.Fragment,{children:I.element},_))}),v]})})}function g9({shape:t,util:e,className:n,component:r,bbox:o,opacity:a}){const s=ue(),i=De.Translate(-o.minX,-o.minY).multiply(s.getShapePageTransform(t.id)),l=s.getShapeGeometry(t.id).bounds,c=Math.max(l.width,1),d=Math.max(l.height,1);return g.jsx(ON,{fallback:()=>null,children:g.jsx("foreignObject",{x:o.minX,y:o.minY,width:o.w,height:o.h,className:"tl-shape-foreign-object tl-export-embed-styles",children:g.jsx("div",{className:n,"data-shape-type":t.type,style:{clipPath:s.getShapeClipPath(t.id),transform:i.toCssString(),width:c,height:d,opacity:a},children:g.jsx(r,{shape:t,util:e})})})})}let Gke=1;async function Kke(t,e,n={}){const r=Hke(t,e,n);if(!r)return;const o=t.getContainer(),a=document.createElement("div");a.className=gX,a.inert=!0,a.tabIndex=-1,Object.assign(a.style,{position:"absolute",top:"0px",left:"0px",width:r.width+"px",height:r.height+"px",pointerEvents:"none",opacity:0}),o.appendChild(a);const s=F$.createRoot(a,{identifierPrefix:`export_${Gke++}_`});try{await Promise.resolve(),Qf.flushSync(()=>{s.render(r.jsx)}),await r.exportDelay.resolve();const i=a.firstElementChild;return dt(i instanceof SVGSVGElement,"Expected an SVG element"),await Wke(i),{svg:i,width:r.width,height:r.height}}finally{setTimeout(()=>{s.unmount(),o.removeChild(a)},0)}}async function Wke(t){const e=[...t.querySelectorAll("foreignObject.tl-export-embed-styles > *")];if(!e.length)return;const n=new Cke(t);try{n.fonts.startFindingCurrentDocumentFontFaces(),await Promise.all(e.map(a=>xX(a)));for(const a of e)n.readRootElementStyles(a);await n.fetchResources();const r=await n.getFontFaceCss();n.unwrapCustomElements();const o=n.embedStyles();if(r||o){const a=document.createElementNS("http://www.w3.org/2000/svg","style");a.textContent=`${r}
${o}`,t.prepend(a)}}finally{n.dispose()}}let eP=null;function Yke(){return eP||(eP={maxWidth:tP("width"),maxHeight:tP("height"),maxArea:tP("area")}),eP}/*!
 * Extracted from https://github.com/jhildenbiddle/canvas-size
 * MIT License: https://github.com/jhildenbiddle/canvas-size/blob/master/LICENSE
 * Copyright (c) John Hildenbiddle
 */const b9=8192,Xke=4096*4096,Jke={area:[16384,14188,11402,11180,10836,8192,4096],height:[8388607,65535,32767,16384,8192,4096],width:[4194303,65535,32767,16384,8192,4096]};function tP(t){const e=document.createElement("canvas");e.width=1,e.height=1;const n=e.getContext("2d");for(const r of Jke[t]){const o=t==="height"?1:r,a=t==="width"?1:r,s=document.createElement("canvas");s.width=o,s.height=a,s.getContext("2d").fillRect(o-1,a-1,1,1),n.drawImage(s,o-1,a-1,1,1,0,0,1,1);const l=n.getImageData(0,0,1,1).data[3]!==0;if(s.width=0,s.height=0,l)return e.width=0,e.height=0,t==="area"?r*r:r}throw e.width=0,e.height=0,Error("Failed to determine maximum canvas dimension")}function Qke(t,e){if(t<=b9&&e<=b9&&t*e<=Xke)return[t,e];const{maxWidth:n,maxHeight:r,maxArea:o}=Yke(),a=t/e;if(t>n&&(t=n,e=t/a),e>r&&(e=r,t=e*a),t*e>o){const s=Math.sqrt(o/(t*e));t*=s,e*=s}return[t,e]}async function Zke(t,e){const{type:n,width:r,height:o,quality:a=1,pixelRatio:s=2}=e;let[i,l]=Qke(r*s,o*s);i=Math.floor(i),l=Math.floor(l);const c=i/r,d=await Xa.blobToDataUrl(new Blob([t],{type:"image/svg+xml"})),u=await new Promise(h=>{const y=c0();y.crossOrigin="anonymous",y.onload=async()=>{Nn.isSafari&&await aM(250);const v=document.createElement("canvas"),x=v.getContext("2d");v.width=i,v.height=l,x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(y,0,0,i,l),URL.revokeObjectURL(d),h(v)},y.onerror=()=>{h(null)},y.src=d});if(!u)return null;const m=await new Promise(h=>u.toBlob(y=>{(!y||Ur.throwToBlob.get())&&h(null),h(y)},"image/"+n,a));if(!m)return null;if(n==="png"){const h=new DataView(await m.arrayBuffer());return Dc.setPhysChunk(h,c,{type:"image/"+n})}else return m}const vs={menus:Ir("open menus",[]),getOpenMenus(t){return t?this.menus.get().filter(e=>e.endsWith("-"+t)):this.menus.get()},addOpenMenu(t,e=""){const n=e?`${t}-${e}`:t,r=new Set(this.menus.get());r.has(n)||(r.add(n),this.menus.set([...r]))},deleteOpenMenu(t,e=""){const n=e?`${t}-${e}`:t,r=new Set(this.menus.get());r.has(n)&&(r.delete(n),this.menus.set([...r]))},clearOpenMenus(t){this.menus.set(t?this.menus.get().filter(e=>!e.endsWith("-"+t)):[])},_hiddenMenus:[],hideOpenMenus(t){if(this._hiddenMenus=[...this.getOpenMenus(t)],this._hiddenMenus.length!==0)for(const e of this._hiddenMenus)this.deleteOpenMenu(e,t)},showOpenMenus(t){if(this._hiddenMenus.length!==0){for(const e of this._hiddenMenus)this.addOpenMenu(e,t);this._hiddenMenus=[]}},isMenuOpen(t,e){return this.getOpenMenus(e).includes(t)},hasOpenMenus(t){return this.getOpenMenus(t).length>0},hasAnyOpenMenus(){return this.getOpenMenus().length>0},forContext(t){return{getOpenMenus:()=>this.getOpenMenus(t),addOpenMenu:e=>this.addOpenMenu(e,t),deleteOpenMenu:e=>this.deleteOpenMenu(e,t),clearOpenMenus:()=>this.clearOpenMenus(t),isMenuOpen:e=>this.isMenuOpen(e,t),hasOpenMenus:()=>this.hasOpenMenus(t),hasAnyOpenMenus:()=>this.hasAnyOpenMenus()}}},LE=new Bwe,eIe={maxShapesPerPage:4e3,maxFilesAtOnce:100,maxPages:40,animationMediumMs:320,followChaseViewportSnap:2,doubleClickDurationMs:450,multiClickDurationMs:200,coarseDragDistanceSquared:36,dragDistanceSquared:16,uiDragDistanceSquared:16,uiCoarseDragDistanceSquared:625,defaultSvgPadding:32,cameraSlideFriction:.09,gridSteps:[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],collaboratorInactiveTimeoutMs:6e4,collaboratorIdleTimeoutMs:3e3,collaboratorCheckIntervalMs:1200,cameraMovingTimeoutMs:64,hitTestMargin:8,edgeScrollDelay:200,edgeScrollEaseDuration:200,edgeScrollSpeed:25,edgeScrollDistance:8,coarsePointerWidth:12,coarseHandleRadius:20,handleRadius:12,longPressDurationMs:500,textShadowLod:.35,adjacentShapeMargin:10,flattenImageBoundsExpand:64,flattenImageBoundsPadding:16,laserDelayMs:1200,maxExportDelayMs:5e3,tooltipDelayMs:700,temporaryAssetPreviewLifetimeMs:18e4,actionShortcutsLocation:"swap",createTextOnCanvasDoubleClick:!0,exportProvider:w.Fragment,enableToolbarKeyboardShortcuts:!0,maxFontsToLoadBeforeRender:1/0,nonce:void 0};function y9(t,e){if(!e)return!1;switch(t.type){case"mixed":return e.type==="mixed";case"shared":return e.type==="shared"&&t.value===e.value;default:throw wn(t)}}class tIe{constructor(e){L(this,"map");this.map=new Map(e)}get(e){return this.map.get(e)}getAsKnownValue(e){const n=this.get(e);if(n&&n.type!=="mixed")return n.value}get size(){return this.map.size}equals(e){if(this.size!==e.size)return!1;const n=new Set;for(const[r,o]of this){if(!y9(o,e.get(r)))return!1;n.add(r)}for(const[r,o]of e)if(!n.has(r)&&!y9(o,this.get(r)))return!1;return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}class CM extends tIe{set(e,n){this.map.set(e,n)}applyValue(e,n){const r=this.get(e);if(!r){this.set(e,{type:"shared",value:n});return}switch(r.type){case"mixed":return;case"shared":r.value!==n&&this.set(e,{type:"mixed"});return;default:wn(r,"type")}}}function nIe(t,e,n){return Vu(t).then(function(r){return r.arrayBuffer()}).then(function(r){return new File([r],e,{type:n})})}const rIe="https://cdn.tldraw.com";function Bo(){return`${rIe}/${MN}`}function oIe(t){switch(t.type){case"shapes":return`s${t.shapeIds.map(n=>nP(n.slice(6))).join(".")}`;case"page":return"p"+nP(Cs.parseId(t.pageId));case"viewport":{const{bounds:e,pageId:n}=t;let r=`v${Math.round(e.x)}.${Math.round(e.y)}.${Math.round(e.w)}.${Math.round(e.h)}`;return n&&(r+="."+nP(Cs.parseId(n))),r}default:wn(t)}}function aIe(t){switch(t[0]){case"s":return{type:"shapes",shapeIds:t.slice(1).split(".").filter(Boolean).map(r=>lr(decodeURIComponent(r)))};case"p":return{type:"page",pageId:Cs.createId(decodeURIComponent(t.slice(1)))};case"v":{const[n,r,o,a,s]=t.slice(1).split(".");return{type:"viewport",bounds:new Be(Number(n),Number(r),Number(o),Number(a)),pageId:s?Cs.createId(decodeURIComponent(s)):void 0}}default:throw Error("Invalid deep link string")}}function nP(t){return encodeURIComponent(t).replace(/\./g,"%2E")}function sIe(t,e){var o;let n=t;const r=new Set(e);for(;r.has(n);)n=(o=/^.*(\d+)$/.exec(n))!=null&&o[1]?n.replace(/(\d+)(?=\D?)$/,a=>(+a+1).toString()):`${n} 1`;return n}function yS(t,e,n,r){if(n.length===0)return[];const o=new Map;for(const s of Dt(n.map(i=>t.getShape(i)))){const{parentId:i}=s;o.has(i)||o.set(i,{children:Dt(t.getSortedChildIdsForParent(i).map(l=>t.getShape(l))),moving:new Set}),o.get(i).moving.add(s)}const a=[];switch(e){case"toBack":{o.forEach(({moving:s,children:i})=>iIe(s,i,a));break}case"toFront":{o.forEach(({moving:s,children:i})=>lIe(s,i,a));break}case"forward":{o.forEach(({moving:s,children:i})=>cIe(t,s,i,a,r));break}case"backward":{o.forEach(({moving:s,children:i})=>uIe(t,s,i,a,r));break}}return a}function iIe(t,e,n){const r=e.length;if(t.size===r)return;let o,a;for(let s=0;s<r;s++){const i=e[s];if(t.has(i))o=i.index,t.delete(i);else{a=i.index;break}}if(t.size!==0){const s=Mf(o,a,t.size);n.push(...Array.from(t.values()).sort(oa).map((i,l)=>({...i,index:s[l]})))}}function lIe(t,e,n){const r=e.length;if(t.size===r)return;let o,a;for(let s=r-1;s>-1;s--){const i=e[s];if(t.has(i))a=i.index,t.delete(i);else{o=i.index;break}}if(t.size!==0){const s=Mf(o,a,t.size);n.push(...Array.from(t.values()).sort(oa).map((i,l)=>({...i,index:s[l]})))}}function PX(t,e){const n=Dt(Array.from(e).map(o=>{const a=t.getShapePageBounds(o);return a?{shape:o,bounds:a}:null}));return o=>{const a=t.getShapePageBounds(o);return a?n.some(s=>s.bounds.includes(a)):!1}}function cIe(t,e,n,r,o){var l;const a=PX(t,e),s=n.length;if(e.size===s)return;let i={name:"skipping"};for(let c=0;c<s;c++){const d=e.has(n[c]);switch(i.name){case"skipping":{if(!d)continue;i={name:"selecting",selectIndex:c};break}case"selecting":{if(d||!(o!=null&&o.considerAllShapes)&&!a(n[c]))continue;const{selectIndex:u}=i;Mf(n[c].index,(l=n[c+1])==null?void 0:l.index,c-u).forEach((m,h)=>{const y=n[u+h];e.has(y)&&r.push({...y,index:m})}),i={name:"skipping"};break}}}}function uIe(t,e,n,r,o){var l;const a=PX(t,e),s=n.length;if(e.size===s)return;let i={name:"skipping"};for(let c=s-1;c>-1;c--){const d=e.has(n[c]);switch(i.name){case"skipping":{if(!d)continue;i={name:"selecting",selectIndex:c};break}case"selecting":{if(d||!(o!=null&&o.considerAllShapes)&&!a(n[c]))continue;Mf((l=n[c-1])==null?void 0:l.index,n[c].index,i.selectIndex-c).forEach((u,m)=>{const h=n[c+m+1];e.has(h)&&r.push({...h,index:u})}),i={name:"skipping"};break}}}}function OX({editor:t,ids:e}){const n=Dt(e.map(s=>t.getShape(s))),r=t.getShapesSharedRotation(e),o=t.getShapesRotatedPageBounds(e);if(!o)return null;const a=o.center.clone().rotWith(o.point,r);return{initialPageCenter:a,initialCursorAngle:a.angle(t.inputs.originPagePoint),initialShapesRotation:r,shapeSnapshots:n.map(s=>({shape:s,initialPagePoint:t.getShapePageTransform(s.id).point()}))}}function E1({delta:t,editor:e,snapshot:n,stage:r,centerOverride:o}){const{initialPageCenter:a,shapeSnapshots:s}=n;e.updateShapes(s.map(({shape:l,initialPagePoint:c})=>{const d=bs(l.parentId)?e.getShapePageTransform(l.parentId):De.Identity(),u=R.RotWith(c,o??a,t),m=De.applyToPoint(De.Inverse(d),u),h=OE(l.rotation+t);return{id:l.id,type:l.type,x:m.x,y:m.y,rotation:h}}));const i=[];s.forEach(({shape:l})=>{var m,h,y;const c=e.getShape(l.id);if(!c)return;const d=e.getShapeUtil(l);if(r==="start"||r==="one-off"){const v=(m=d.onRotateStart)==null?void 0:m.call(d,l);v&&i.push(v)}const u=(h=d.onRotate)==null?void 0:h.call(d,l,c);if(u&&i.push(u),r==="end"||r==="one-off"){const v=(y=d.onRotateEnd)==null?void 0:y.call(d,l,c);v&&i.push(v)}}),i.length>0&&e.updateShapes(i)}function v9(t){const e=t.get(),n=new Map;for(const r of e){const{fromId:o,toId:a}=r,s=n.get(o);s?s.push(r):n.set(o,[r]);const i=n.get(a);i?i.push(r):n.set(a,[r])}return n}const dIe=t=>{const{store:e}=t,n=e.query.filterHistory("binding"),r=e.query.records("binding");return ke("arrowBindingsIndex",(o,a)=>{if(Tf(o))return v9(r);const s=o,i=n.getDiffSince(a);if(i===zi)return v9(r);let l;function c(m){l??(l=new Map(s));const h=l.get(m.fromId),y=h==null?void 0:h.filter(S=>S.id!==m.id);y!=null&&y.length?l.set(m.fromId,y):l.delete(m.fromId);const v=l.get(m.toId),x=v==null?void 0:v.filter(S=>S.id!==m.id);x!=null&&x.length?l.set(m.toId,x):l.delete(m.toId)}function d(m){l??(l=new Map(s));let h=l.get(m);return h?h===s.get(m)&&(h=h.slice(0),l.set(m,h)):(h=[],l.set(m,h)),h}function u(m){d(m.fromId).push(m),d(m.toId).push(m)}for(const m of i){for(const h of oo(m.added))u(h);for(const[h,y]of oo(m.updated))c(h),u(y);for(const h of oo(m.removed))c(h)}return l??s})};function pIe(t){const e=t.getCurrentPageShapeIds(),n=t.getViewportPageBounds(),r=new Set;return e.forEach(o=>{const a=t.getShape(o);if(!a||!t.getShapeUtil(a.type).canCull(a))return;const i=t.getShapePageBounds(o);(i===void 0||!n.includes(i))&&r.add(o)}),r}function fIe(t){return ke("notVisibleShapes",function(n){const r=pIe(t);if(Tf(n)||n.size!==r.size)return r;for(const o of n)if(!r.has(o))return r;return n})}function x9(t,e){const n={},r=t.get();return Array.from(r,a=>e.get(a)).sort(oa).forEach(a=>{var s;n[s=a.parentId]??(n[s]=[]),n[a.parentId].push(a.id)}),n}const mIe=t=>{const e=t.query.ids("shape"),n=t.query.filterHistory("shape");return ke("parentsToChildrenWithIndexes",(r,o)=>{if(Tf(r))return x9(e,t);const a=n.getDiffSince(o);if(a===zi)return x9(e,t);if(a.length===0)return r;let s=null;const i=d=>{s||(s={...r}),s[d]?s[d]===r[d]&&(s[d]=[...s[d]]):s[d]=[]},l=new Set;let c;for(let d=0,u=a.length;d<u;d++){c=a[d];for(const m of Object.values(c.added))Ch(m)&&(i(m.parentId),s[m.parentId].push(m.id),l.add(s[m.parentId]));for(const[m,h]of Object.values(c.updated))if(Ch(h)&&Ch(m)){if(m.parentId!==h.parentId)i(m.parentId),i(h.parentId),s[m.parentId].splice(s[m.parentId].indexOf(h.id),1),s[h.parentId].push(h.id),l.add(s[h.parentId]);else if(m.index!==h.index){i(h.parentId);const y=s[h.parentId].indexOf(h.id);s[h.parentId][y]=h.id,l.add(s[h.parentId])}}for(const m of Object.values(c.removed))Ch(m)&&(i(m.parentId),s[m.parentId].splice(s[m.parentId].indexOf(m.id),1))}for(const d of l){const u=Dt(d.map(m=>t.get(m)));u.sort(oa),d.splice(0,d.length,...u.map(m=>m.id))}return s??r})},rP=(t,e,n)=>{for(;!Ea(n.parentId);){const r=t.get(n.parentId);if(!r)return!1;n=r}return n.parentId===e},hIe=(t,e)=>{const n=t.query.ids("shape");let r=null;function o(){const a=e();return r=a,new Set([...n.get()].filter(s=>rP(t,a,t.get(s))))}return ke("_shapeIdsInCurrentPage",(a,s)=>{if(Tf(a))return o();const i=e();if(i!==r)return o();const l=t.history.getDiffSince(s);if(l===zi)return o();const c=new b1(a);for(const u of l){for(const m of Object.values(u.added))Ch(m)&&rP(t,i,m)&&c.add(m.id);for(const[m,h]of Object.values(u.updated))Ch(h)&&(rP(t,i,h)?c.add(h.id):c.remove(h.id));for(const m of Object.keys(u.removed))bs(m)&&c.remove(m)}const d=c.get();return d?iy(d.value,d.diff):a})};var gIe=Object.create,MX=Object.defineProperty,bIe=Object.getOwnPropertyDescriptor,yIe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),RX=t=>{throw TypeError(t)},DX=(t,e,n)=>e in t?MX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vIe=t=>[,,,gIe(null)],NX=["class","method","getter","setter","accessor","field","value","get","set"],LX=t=>t!==void 0&&typeof t!="function"?RX("Function expected"):t,xIe=(t,e,n,r,o)=>({kind:NX[t],name:e,metadata:r,addInitializer:a=>n._?RX("Already initialized"):o.push(LX(a||null))}),SIe=(t,e)=>DX(e,yIe("metadata"),t[3]),EIe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},jX=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=NX[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,bIe(o,n)),S=r.length-1;S>=0;S--)l=xIe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,LX(s)&&(x[y]=s);return x&&MX(o,n,x),o},Wm=(t,e,n)=>DX(t,typeof e!="symbol"?e+"":e,n),BX,FX,gv;const TIe=40;FX=[oi],BX=[oi];class Nw{constructor(e){this.editor=e,EIe(gv,5,this),Wm(this,"_clickId",""),Wm(this,"_clickTimeout"),Wm(this,"_clickScreenPoint"),Wm(this,"_previousScreenPoint"),Wm(this,"_clickState","idle"),Wm(this,"lastPointerInfo",{})}_getClickTimeout(e,n=Ln()){this._clickId=n,clearTimeout(this._clickTimeout),this._clickTimeout=this.editor.timers.setTimeout(()=>{if(this._clickState===e&&this._clickId===n){switch(this._clickState){case"pendingTriple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break}case"pendingQuadruple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break}case"pendingOverflow":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"});break}}this._clickState="idle"}},e==="idle"||e==="pendingDouble"?this.editor.options.doubleClickDurationMs:this.editor.options.multiClickDurationMs)}get clickState(){return this._clickState}handlePointerEvent(e){switch(e.name){case"pointer_down":{if(!this._clickState)return e;switch(this._clickScreenPoint=R.From(e.point),this._previousScreenPoint&&R.Dist2(this._previousScreenPoint,this._clickScreenPoint)>TIe**2&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=e,this._clickState){case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"quadruple_click",phase:"down"};case"idle":{this._clickState="pendingDouble";break}case"pendingOverflow":{this._clickState="overflow";break}}return this._clickTimeout=this._getClickTimeout(this._clickState),e}case"pointer_up":{if(!this._clickState)return e;switch(this._clickScreenPoint=R.From(e.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"}}return e}case"pointer_move":return this._clickState!=="idle"&&this._clickScreenPoint&&R.Dist2(this._clickScreenPoint,this.editor.inputs.currentScreenPoint)>(this.editor.getInstanceState().isCoarsePointer?this.editor.options.coarseDragDistanceSquared:this.editor.options.dragDistanceSquared)&&this.cancelDoubleClickTimeout(),e}return e}cancelDoubleClickTimeout(){this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"}}gv=vIe();jX(gv,1,"_getClickTimeout",FX,Nw);jX(gv,1,"cancelDoubleClickTimeout",BX,Nw);SIe(gv,Nw);class wIe{constructor(e){L(this,"_isEdgeScrolling",!1);L(this,"_edgeScrollDuration",-1);this.editor=e}updateEdgeScrolling(e){const{editor:n}=this,r=this.getEdgeScroll();if(r.x===0&&r.y===0)this._isEdgeScrolling&&(this._isEdgeScrolling=!1,this._edgeScrollDuration=0);else if(this._isEdgeScrolling||(this._isEdgeScrolling=!0,this._edgeScrollDuration=0),this._edgeScrollDuration+=e,this._edgeScrollDuration>n.options.edgeScrollDelay){const o=n.options.edgeScrollEaseDuration>0?Ja.easeInCubic(Math.min(1,this._edgeScrollDuration/(n.options.edgeScrollDelay+n.options.edgeScrollEaseDuration))):1;this.moveCameraWhenCloseToEdge({x:r.x*o,y:r.y*o})}}getEdgeProximityFactors(e,n,r,o,a){const{editor:s}=this,i=s.options.edgeScrollDistance,l=r?s.options.coarsePointerWidth:0,c=e-l,d=e+l,u=o?0:i,m=a?n:n-i;return c<u?Math.min(1,(u-c)/i):d>m?-Math.min(1,(d-m)/i):0}getEdgeScroll(){const{editor:e}=this,{inputs:{currentScreenPoint:{x:n,y:r}}}=e,o=e.getViewportScreenBounds(),{isCoarsePointer:a,insets:[s,i,l,c]}=e.getInstanceState(),d=this.getEdgeProximityFactors(n,o.w,a,c,i),u=this.getEdgeProximityFactors(r,o.h,a,s,l);return{x:d,y:u}}moveCameraWhenCloseToEdge(e){const{editor:n}=this;if(!n.inputs.isDragging||n.inputs.isPanning||n.getCameraOptions().isLocked||e.x===0&&e.y===0)return;const r=n.getViewportScreenBounds(),o=r.w<1e3?.612:1,a=r.h<1e3?.612:1,s=n.getZoomLevel(),i=n.user.getEdgeScrollSpeed()*n.options.edgeScrollSpeed,l=i*e.x*o/s,c=i*e.y*a/s,{x:d,y:u,z:m}=n.getCamera();n.setCamera(new R(d+l,u+c,m))}}class CIe{constructor(e,n){L(this,"disposeSideEffectListener");this.editor=e,this.disposeSideEffectListener=e.sideEffects.registerAfterChangeHandler("instance",(o,a)=>{o.isFocused!==a.isFocused&&this.updateContainerClass()});const r=e.getInstanceState().isFocused;n!==r&&e.updateInstanceState({isFocused:!!n}),this.updateContainerClass(),document.body.addEventListener("keydown",this.handleKeyDown.bind(this)),document.body.addEventListener("mousedown",this.handleMouseDown.bind(this))}updateContainerClass(){const e=this.editor.getContainer();this.editor.getInstanceState().isFocused?e.classList.add("tl-container__focused"):e.classList.remove("tl-container__focused"),e.classList.add("tl-container__no-focus-ring")}handleKeyDown(e){const n=this.editor.getContainer(),r=document.activeElement;this.editor.isIn("select.editing_shape")&&!(r!=null&&r.closest(".tlui-contextual-toolbar"))||r===n&&this.editor.getSelectedShapeIds().length>0||["Tab","ArrowUp","ArrowDown"].includes(e.key)&&n.classList.remove("tl-container__no-focus-ring")}handleMouseDown(){this.editor.getContainer().classList.add("tl-container__no-focus-ring")}focus(){this.editor.getContainer().focus()}blur(){this.editor.complete(),this.editor.getContainer().blur()}dispose(){var e;document.body.removeEventListener("keydown",this.handleKeyDown.bind(this)),document.body.removeEventListener("mousedown",this.handleMouseDown.bind(this)),(e=this.disposeSideEffectListener)==null||e.call(this)}}class AIe{constructor(e,n){L(this,"shapeFontFacesCache");L(this,"shapeFontLoadStateCache");L(this,"fontStates",new cM("font states"));L(this,"fontsToLoad",new Set);this.editor=e,this.assetUrls=n,this.shapeFontFacesCache=e.store.createComputedCache("shape font faces",r=>this.editor.getShapeUtil(r).getFontFaces(r),{areResultsEqual:gE,areRecordsEqual:(r,o)=>r.props===o.props&&r.meta===o.meta}),this.shapeFontLoadStateCache=e.store.createCache(r=>{const o=ke("font faces",()=>this.getShapeFontFaces(r));return ke("font load state",()=>o.get().map(s=>this.getFontState(s)),{isEqual:gE})})}getShapeFontFaces(e){const n=typeof e=="string"?e:e.id;return this.shapeFontFacesCache.get(n)??io}trackFontsForShape(e){const n=typeof e=="string"?e:e.id;this.shapeFontLoadStateCache.get(n)}async loadRequiredFontsForCurrentPage(e=1/0){const n=new Set;for(const o of this.editor.getCurrentPageShapeIds())for(const a of this.getShapeFontFaces(this.editor.getShape(o)))n.add(a);if(n.size>e)return;const r=Array.from(n,o=>this.ensureFontIsLoaded(o));await Promise.all(r)}getFontState(e){return this.fontStates.get(e)??null}ensureFontIsLoaded(e){const n=this.getFontState(e);if(n)return n.loadingPromise;const r=this.findOrCreateFontFace(e),o={state:"loading",instance:r,loadingPromise:r.load().then(()=>{document.fonts.add(r),this.fontStates.update(e,a=>({...a,state:"ready"}))}).catch(a=>{console.error(a),this.fontStates.update(e,s=>({...s,state:"error"}))})};return this.fontStates.set(e,o),o.loadingPromise}requestFonts(e){this.fontsToLoad.size||queueMicrotask(()=>{if(this.editor.isDisposed)return;const n=this.fontsToLoad;this.fontsToLoad=new Set,Ui(()=>{for(const r of n)this.ensureFontIsLoaded(r)})});for(const n of e)this.fontsToLoad.add(n)}findOrCreateFontFace(e){var o;for(const a of document.fonts)if(a.family===e.family&&Ts(S9).every(([s,i])=>a[s]===(e[s]??i)))return a;const n=((o=this.assetUrls)==null?void 0:o[e.src.url])??e.src.url,r=new FontFace(e.family,`url(${JSON.stringify(n)})`,{..._p(S9,a=>e[a]),display:"swap"});return document.fonts.add(r),r}async toEmbeddedCssDeclaration(e){var a;const n=((a=this.assetUrls)==null?void 0:a[e.src.url])??e.src.url,r=await Xa.urlToDataUrl(n),o=Dt([`url("${r}")`,e.src.format?`format(${e.src.format})`:null,e.src.tech?`tech(${e.src.tech})`:null]).join(" ");return Dt(["@font-face {",`  font-family: "${e.family}";`,e.ascentOverride?`  ascent-override: ${e.ascentOverride};`:null,e.descentOverride?`  descent-override: ${e.descentOverride};`:null,e.stretch?`  font-stretch: ${e.stretch};`:null,e.style?`  font-style: ${e.style};`:null,e.weight?`  font-weight: ${e.weight};`:null,e.featureSettings?`  font-feature-settings: ${e.featureSettings};`:null,e.lineGapOverride?`  line-gap-override: ${e.lineGapOverride};`:null,e.unicodeRange?`  unicode-range: ${e.unicodeRange};`:null,`  src: ${o};`,"}"]).join(`
`)}}const S9={style:"normal",weight:"normal",stretch:"normal",unicodeRange:"U+0-10FFFF",featureSettings:"normal",ascentOverride:"normal",descentOverride:"normal",lineGapOverride:"normal"};class _Ie{constructor(e){L(this,"store");L(this,"dispose");L(this,"state","recording");L(this,"pendingDiff",new IIe);L(this,"stacks",Ir("HistoryManager.stacks",{undos:Vb(),redos:Vb()},{isEqual:(e,n)=>e.undos===n.undos&&e.redos===n.redos}));L(this,"annotateError");L(this,"_isInBatch",!1);this.store=e.store,this.annotateError=e.annotateError??l0,this.dispose=this.store.addHistoryInterceptor((n,r)=>{if(r==="user")switch(this.state){case"recording":this.pendingDiff.apply(n.changes),this.stacks.update(({undos:o})=>({undos:o,redos:Vb()}));break;case"recordingPreserveRedoStack":this.pendingDiff.apply(n.changes);break;case"paused":break;default:wn(this.state)}})}flushPendingDiff(){if(this.pendingDiff.isEmpty())return;const e=this.pendingDiff.clear();this.stacks.update(({undos:n,redos:r})=>({undos:n.push({type:"diff",diff:e}),redos:r}))}getNumUndos(){return this.stacks.get().undos.length+(this.pendingDiff.isEmpty()?0:1)}getNumRedos(){return this.stacks.get().redos.length}batch(e,n){const r=this.state;r!=="paused"&&(n!=null&&n.history)&&(this.state=kIe[n.history]);try{if(this._isInBatch)return Ui(e),this;this._isInBatch=!0;try{Ui(e)}catch(o){throw this.annotateError(o),o}finally{this._isInBatch=!1}return this}finally{this.state=r}}_undo({pushToRedoStack:e,toMark:n=void 0}){var o;const r=this.state;this.state="paused";try{let{undos:a,redos:s}=this.stacks.get();const i=this.pendingDiff.clear(),l=$W(i),c=uM(i);e&&!l&&(s=s.push({type:"diff",diff:i}));let d=!1;if(l)for(;((o=a.head)==null?void 0:o.type)==="stop";){const u=a.head;if(a=a.tail,e&&(s=s.push(u)),u.id===n){d=!0;break}}if(!d)e:for(;a.head;){const u=a.head;switch(a=a.tail,e&&(s=s.push(u)),u.type){case"diff":By(c,[uM(u.diff)]);break;case"stop":if(!n)break e;if(u.id===n){d=!0;break e}break;default:wn(u)}}if(!d&&n)return this;this.store.applyDiff(c,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:a,redos:s})}finally{this.state=r}return this}undo(){return this._undo({pushToRedoStack:!0}),this}redo(){var n;const e=this.state;this.state="paused";try{this.flushPendingDiff();let{undos:r,redos:o}=this.stacks.get();if(o.length===0)return this;for(;((n=o.head)==null?void 0:n.type)==="stop";)r=r.push(o.head),o=o.tail;const a=EE();for(;o.head;){const s=o.head;if(r=r.push(s),o=o.tail,s.type==="diff")By(a,[s.diff]);else break}this.store.applyDiff(a,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:r,redos:o})}finally{this.state=e}return this}bail(){return this._undo({pushToRedoStack:!1}),this}bailToMark(e){return e&&this._undo({pushToRedoStack:!1,toMark:e}),this}squashToMark(e){var a;let n=this.stacks.get().undos;const r=[];for(;n.head&&!(n.head.type==="stop"&&n.head.id===e);)n.head.type==="diff"&&r.push(n.head.diff),n=n.tail;if(!n.head||((a=n.head)==null?void 0:a.id)!==e)return console.error("Could not find mark to squash to: ",e),this;if(r.length===0)return this;const o=EE();return By(o,r.reverse()),this.stacks.update(({redos:s})=>({undos:n.push({type:"diff",diff:o}),redos:s})),this}_mark(e){Ui(()=>{this.flushPendingDiff(),this.stacks.update(({undos:n,redos:r})=>({undos:n.push({type:"stop",id:e}),redos:r}))})}clear(){this.stacks.set({undos:Vb(),redos:Vb()}),this.pendingDiff.clear()}getMarkIdMatching(e){let n=this.stacks.get().undos;for(;n.head;){if(n.head.type==="stop"&&n.head.id.includes(e))return n.head.id;n=n.tail}return null}debug(){const{undos:e,redos:n}=this.stacks.get();return{undos:e.toArray(),redos:n.toArray(),pendingDiff:this.pendingDiff.debug(),state:this.state}}}const kIe={record:"recording","record-preserveRedoStack":"recordingPreserveRedoStack",ignore:"paused"};class IIe{constructor(){L(this,"diff",EE());L(this,"isEmptyAtom",Ir("PendingDiff.isEmpty",!0))}clear(){const e=this.diff;return this.diff=EE(),this.isEmptyAtom.set(!0),e}isEmpty(){return this.isEmptyAtom.get()}apply(e){By(this.diff,[e]),this.isEmptyAtom.set($W(this.diff))}debug(){return{diff:this.diff,isEmpty:this.isEmpty()}}}function Vb(t){return OIe}class PIe{constructor(){L(this,"length",0);L(this,"head",null);L(this,"tail",this)}push(e){return new qN(e,this)}toArray(){return io}[Symbol.iterator](){return{next(){return{value:void 0,done:!0}}}}}const OIe=new PIe;class qN{constructor(e,n){L(this,"length");this.head=e,this.tail=n,this.length=n.length+1}push(e){return new qN(e,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let e=this;return{next(){if(e.length){const n=e.head;return e=e.tail,{value:n,done:!1}}else return{value:void 0,done:!0}}}}}class MIe{constructor(e){L(this,"scribbleItems",new Map);L(this,"state","paused");this.editor=e}addScribble(e,n=Ln()){const r={id:n,scribble:{id:n,size:20,color:"accent",opacity:.8,delay:0,points:[],shrink:.1,taper:!0,...e,state:"starting"},timeoutMs:0,delayRemaining:e.delay??0,prev:null,next:null};return this.scribbleItems.set(n,r),r}reset(){this.editor.updateInstanceState({scribbles:[]}),this.scribbleItems.clear()}stop(e){const n=this.scribbleItems.get(e);if(!n)throw Error(`Scribble with id ${e} not found`);return n.delayRemaining=Math.min(n.delayRemaining,200),n.scribble.state="stopping",n}addPoint(e,n,r,o=.5){const a=this.scribbleItems.get(e);if(!a)throw Error(`Scribble with id ${e} not found`);const{prev:s}=a,i={x:n,y:r,z:o};return(!s||R.Dist(s,i)>=1)&&(a.next=i),a}tick(e){this.scribbleItems.size!==0&&this.editor.run(()=>{this.scribbleItems.forEach(n=>{if(n.scribble.state==="starting"){const{next:l,prev:c}=n;l&&l!==c&&(n.prev=l,n.scribble.points.push(l)),n.scribble.points.length>8&&(n.scribble.state="active");return}n.delayRemaining>0&&(n.delayRemaining=Math.max(0,n.delayRemaining-e)),n.timeoutMs+=e,n.timeoutMs>=16&&(n.timeoutMs=0);const{delayRemaining:r,timeoutMs:o,prev:a,next:s,scribble:i}=n;switch(i.state){case"active":{s&&s!==a?(n.prev=s,i.points.push(s),r===0&&i.points.length>8&&i.points.shift()):o===0&&(i.points.length>1?i.points.shift():n.delayRemaining=i.delay);break}case"stopping":{if(n.delayRemaining===0&&o===0){if(i.points.length===1){this.scribbleItems.delete(n.id);return}i.shrink&&(i.size=Math.max(1,i.size*(1-i.shrink))),i.points.shift()}break}}}),this.editor.updateInstanceState({scribbles:Array.from(this.scribbleItems.values()).map(({scribble:n})=>({...n,points:[...n.points]})).slice(-5)})})}}var RIe=Object.create,zX=Object.defineProperty,DIe=Object.getOwnPropertyDescriptor,NIe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),UX=t=>{throw TypeError(t)},qX=(t,e,n)=>e in t?zX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LIe=t=>[,,,RIe(null)],HX=["class","method","getter","setter","accessor","field","value","get","set"],$X=t=>t!==void 0&&typeof t!="function"?UX("Function expected"):t,jIe=(t,e,n,r,o)=>({kind:HX[t],name:e,metadata:r,addInitializer:a=>n._?UX("Already initialized"):o.push($X(a||null))}),BIe=(t,e)=>qX(e,NIe("metadata"),t[3]),FIe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},Lw=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=HX[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,DIe(o,n)),S=r.length-1;S>=0;S--)l=jIe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,$X(s)&&(x[y]=s);return x&&zX(o,n,x),o},zIe=(t,e,n)=>qX(t,e+"",n),VX,GX,KX,WX,um;const It=t=>Math.round(t*10**8)/10**8;function Ou(t,e,n,r,o){const a=t.filter(i=>(r==="forward"?i.startNode.id===e:i.endNode.id===e)&&It(i.length)===It(n)&&Gl(i.breadthIntersection[0],i.breadthIntersection[1],o[0],o[1]));if(a.length===0)return[];const s=new Set;return a.forEach(i=>{const l=r==="forward"?i.endNode.id:i.startNode.id;if(!s.has(l)){s.add(l);const c=Ou(t,l,n,r,Gl(i.breadthIntersection[0],i.breadthIntersection[1],o[0],o[1]));a.push(...c)}}),a}function UIe(t){t.sort((e,n)=>n.gaps.length-e.gaps.length);for(let e=t.length-1;e>0;e--){const n=t[e];for(let r=e-1;r>=0;r--){const o=t[r];if(o.direction===n.direction&&n.gaps.every(a=>o.gaps.some(s=>It(a.startEdge[0].x)===It(s.startEdge[0].x)&&It(a.startEdge[0].y)===It(s.startEdge[0].y)&&It(a.startEdge[1].x)===It(s.startEdge[1].x)&&It(a.startEdge[1].y)===It(s.startEdge[1].y))&&o.gaps.some(s=>It(a.endEdge[0].x)===It(s.endEdge[0].x)&&It(a.endEdge[0].y)===It(s.endEdge[0].y)&&It(a.endEdge[1].x)===It(s.endEdge[1].x)&&It(a.endEdge[1].y)===It(s.endEdge[1].y)))){t.splice(e,1);break}}}}WX=[ke],KX=[ke],GX=[ke],VX=[ke];class Ig{constructor(e){this.manager=e,FIe(um,5,this),zIe(this,"editor"),this.editor=e.editor}getSnapPointsCache(){const{editor:e}=this;return e.store.createComputedCache("snapPoints",n=>{const r=e.getShapePageTransform(n.id);if(!r)return;const a=e.getShapeUtil(n).getBoundsSnapGeometry(n).points??e.getShapeGeometry(n).bounds.cornersAndCenter;if(!(!r||!a))return a.map((s,i)=>{const{x:l,y:c}=De.applyToPoint(r,s);return{x:l,y:c,id:`${n.id}:${i}`}})})}getSnapPoints(e){return this.getSnapPointsCache().get(e)??[]}getSnappablePoints(){const e=this.getSnapPointsCache(),n=this.manager.getSnappableShapes(),r=[];for(const o of n){const a=e.get(o);a&&r.push(...a)}return r}getSnappableGapNodes(){return Array.from(this.manager.getSnappableShapes(),e=>({id:e,pageBounds:ra(this.editor.getShapePageBounds(e))}))}getVisibleGaps(){const e=[],n=[];let r,o;const a=this.getSnappableGapNodes().sort((i,l)=>i.pageBounds.minX-l.pageBounds.minX);for(let i=0;i<a.length;i++){r=a[i];for(let l=i+1;l<a.length;l++)o=a[l],r.pageBounds.maxX<o.pageBounds.minX&&Hb(r.pageBounds.minY,r.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)&&e.push({startNode:r,endNode:o,startEdge:[new R(r.pageBounds.maxX,r.pageBounds.minY),new R(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new R(o.pageBounds.minX,o.pageBounds.minY),new R(o.pageBounds.minX,o.pageBounds.maxY)],length:o.pageBounds.minX-r.pageBounds.maxX,breadthIntersection:Gl(r.pageBounds.minY,r.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)})}const s=a.sort((i,l)=>i.pageBounds.minY-l.pageBounds.minY);for(let i=0;i<s.length;i++){r=s[i];for(let l=i+1;l<s.length;l++)o=s[l],r.pageBounds.maxY<o.pageBounds.minY&&Hb(r.pageBounds.minX,r.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)&&n.push({startNode:r,endNode:o,startEdge:[new R(r.pageBounds.minX,r.pageBounds.maxY),new R(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new R(o.pageBounds.minX,o.pageBounds.minY),new R(o.pageBounds.maxX,o.pageBounds.minY)],length:o.pageBounds.minY-r.pageBounds.maxY,breadthIntersection:Gl(r.pageBounds.minX,r.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)})}return{horizontal:e,vertical:n}}snapTranslateShapes({lockedAxis:e,initialSelectionPageBounds:n,initialSelectionSnapPoints:r,dragDelta:o}){var x,S;const a=this.manager.getSnapThreshold(),s=this.getSnappablePoints(),i=n.clone().translate(o),l=r.map(({x:T,y:C},_)=>({id:"selection:"+_,x:T+o.x,y:C+o.y})),c=s,d=[],u=[],m=new R(a,a);this.collectPointSnaps({minOffset:m,nearestSnapsX:d,nearestSnapsY:u,otherNodeSnapPoints:c,selectionSnapPoints:l}),this.collectGapSnaps({selectionPageBounds:i,nearestSnapsX:d,nearestSnapsY:u,minOffset:m});const h=new R(e==="x"?0:((x=d[0])==null?void 0:x.nudge)??0,e==="y"?0:((S=u[0])==null?void 0:S.nudge)??0);m.x=0,m.y=0,d.length=0,u.length=0,l.forEach(T=>{T.x+=h.x,T.y+=h.y}),i.translate(h),this.collectPointSnaps({minOffset:m,nearestSnapsX:d,nearestSnapsY:u,otherNodeSnapPoints:c,selectionSnapPoints:l}),this.collectGapSnaps({selectionPageBounds:i,nearestSnapsX:d,nearestSnapsY:u,minOffset:m});const y=this.getPointSnapLines({nearestSnapsX:d,nearestSnapsY:u}),v=this.getGapSnapLines({selectionPageBounds:i,nearestSnapsX:d,nearestSnapsY:u});return this.manager.setIndicators([...v,...y]),{nudge:h}}snapResizeShapes({initialSelectionPageBounds:e,dragDelta:n,handle:r,isAspectRatioLocked:o,isResizingFromCenter:a}){var M,D;const s=this.manager.getSnapThreshold(),{box:i,scaleX:l,scaleY:c}=Be.Resize(e,r,a?n.x*2:n.x,a?n.y*2:n.y,o);let d=r;l<0&&(d=Y2e(d)),c<0&&(d=W2e(d)),a&&(i.center=e.center);const u=d==="top"||d==="bottom",m=d==="left"||d==="right",h=E9(d,i),y=this.getSnappablePoints(),v=[],x=[],S=new R(s,s);this.collectPointSnaps({minOffset:S,nearestSnapsX:v,nearestSnapsY:x,otherNodeSnapPoints:y,selectionSnapPoints:h});const T=new R(u?0:((M=v[0])==null?void 0:M.nudge)??0,m?0:((D=x[0])==null?void 0:D.nudge)??0);if(o&&X2e(d)&&T.len()!==0){const F=v.length&&x.length?Math.abs(T.x)<Math.abs(T.y)?"x":"y":v.length?"x":"y",B=e.aspectRatio;F==="x"?(x.length=0,T.y=T.x/B,(d==="bottom_left"||d==="top_right")&&(T.y=-T.y)):(v.length=0,T.x=T.y*B,(d==="bottom_left"||d==="top_right")&&(T.x=-T.x))}const C=R.Add(n,T),{box:_}=Be.Resize(e,r,a?C.x*2:C.x,a?C.y*2:C.y,o);a&&(_.center=e.center);const I=E9("any",_);v.length=0,x.length=0,S.x=0,S.y=0,this.collectPointSnaps({minOffset:S,nearestSnapsX:v,nearestSnapsY:x,otherNodeSnapPoints:y,selectionSnapPoints:I});const P=this.getPointSnapLines({nearestSnapsX:v,nearestSnapsY:x});return this.manager.setIndicators([...P]),{nudge:T}}collectPointSnaps({selectionSnapPoints:e,otherNodeSnapPoints:n,minOffset:r,nearestSnapsX:o,nearestSnapsY:a}){for(const s of e)for(const i of n){const l=R.Sub(s,i),c=Math.abs(l.x),d=Math.abs(l.y);It(c)<=It(r.x)&&(It(c)<It(r.x)&&(o.length=0),o.push({type:"points",points:{thisPoint:s,otherPoint:i},nudge:i.x-s.x}),r.x=c),It(d)<=It(r.y)&&(It(d)<It(r.y)&&(a.length=0),a.push({type:"points",points:{thisPoint:s,otherPoint:i},nudge:i.y-s.y}),r.y=d)}}collectGapSnaps({selectionPageBounds:e,minOffset:n,nearestSnapsX:r,nearestSnapsY:o}){const{horizontal:a,vertical:s}=this.getVisibleGaps();for(const i of a){if(!Hb(i.breadthIntersection[0],i.breadthIntersection[1],e.minY,e.maxY))continue;const c=i.startEdge[0].x+i.length/2-e.center.x;if(i.length>e.width&&It(Math.abs(c))<=It(n.x)){It(Math.abs(c))<It(n.x)&&(r.length=0),n.x=Math.abs(c);const S={type:"gap_center",gap:i,nudge:c},T=r.find(({type:_})=>_==="gap_center"),C=T&&Gl(i.breadthIntersection[0],i.breadthIntersection[1],T.gap.breadthIntersection[0],T.gap.breadthIntersection[1]);T&&T.gap.length>i.length&&C?r[r.indexOf(T)]=S:(!T||!C)&&r.push(S)}const u=i.startNode.pageBounds.minX-i.length,m=e.maxX,h=u-m;It(Math.abs(h))<=It(n.x)&&(It(Math.abs(h))<It(n.x)&&(r.length=0),n.x=Math.abs(h),r.push({type:"gap_duplicate",gap:i,protrusionDirection:"left",nudge:h}));const y=i.endNode.pageBounds.maxX+i.length,v=e.minX,x=y-v;It(Math.abs(x))<=It(n.x)&&(It(Math.abs(x))<It(n.x)&&(r.length=0),n.x=Math.abs(x),r.push({type:"gap_duplicate",gap:i,protrusionDirection:"right",nudge:x}))}for(const i of s){if(!Hb(i.breadthIntersection[0],i.breadthIntersection[1],e.minX,e.maxX))continue;const c=i.startEdge[0].y+i.length/2-e.center.y;if(i.length>e.height&&It(Math.abs(c))<=It(n.y)){It(Math.abs(c))<It(n.y)&&(o.length=0),n.y=Math.abs(c);const S={type:"gap_center",gap:i,nudge:c},T=o.find(({type:_})=>_==="gap_center"),C=T&&Hb(T.gap.breadthIntersection[0],T.gap.breadthIntersection[1],i.breadthIntersection[0],i.breadthIntersection[1]);T&&T.gap.length>i.length&&C?o[o.indexOf(T)]=S:(!T||!C)&&o.push(S);continue}const u=i.startNode.pageBounds.minY-i.length,m=e.maxY,h=u-m;It(Math.abs(h))<=It(n.y)&&(It(Math.abs(h))<It(n.y)&&(o.length=0),n.y=Math.abs(h),o.push({type:"gap_duplicate",gap:i,protrusionDirection:"top",nudge:h}));const y=i.endNode.pageBounds.maxY+i.length,v=e.minY,x=y-v;It(Math.abs(x))<=It(n.y)&&(It(Math.abs(x))<It(n.y)&&(o.length=0),n.y=Math.abs(x),o.push({type:"gap_duplicate",gap:i,protrusionDirection:"bottom",nudge:x}))}}getPointSnapLines({nearestSnapsX:e,nearestSnapsY:n}){const r={},o={};if(e.length>0){for(const a of e)if(a.type==="points"){const s=It(a.points.otherPoint.x);r[s]||(r[s]=[]),r[s].push(a.points)}}if(n.length>0){for(const a of n)if(a.type==="points"){const s=It(a.points.otherPoint.y);o[s]||(o[s]=[]),o[s].push(a.points)}}return Object.values(r).concat(Object.values(o)).map(a=>({id:Ln(),type:"points",points:jD(a.map(s=>R.From(s.otherPoint)).concat(a.map(s=>R.From(s.thisPoint))),(s,i)=>s.equals(i))}))}getGapSnapLines({selectionPageBounds:e,nearestSnapsX:n,nearestSnapsY:r}){const{vertical:o,horizontal:a}=this.getVisibleGaps(),s={top:e.sides[0],right:e.sides[1],bottom:[e.corners[3],e.corners[2]],left:[e.corners[0],e.corners[3]]},i=[];if(n.length>0)for(const l of n){if(l.type==="points")continue;const{gap:{breadthIntersection:c,startEdge:d,startNode:u,endNode:m,length:h,endEdge:y}}=l;switch(l.type){case"gap_center":{const v=(h-e.width)/2,x=Gl(c[0],c[1],e.minY,e.maxY);i.push({type:"gaps",direction:"horizontal",id:Ln(),gaps:[...Ou(a,u.id,v,"backward",x),{startEdge:d,endEdge:s.left},{startEdge:s.right,endEdge:y},...Ou(a,m.id,v,"forward",x)]});break}case"gap_duplicate":{const v=Gl(c[0],c[1],e.minY,e.maxY);i.push({type:"gaps",direction:"horizontal",id:Ln(),gaps:l.protrusionDirection==="left"?[{startEdge:s.right,endEdge:d.map(x=>x.clone().addXY(-u.pageBounds.width,0))},{startEdge:d,endEdge:y},...Ou(a,m.id,h,"forward",v)]:[...Ou(a,u.id,h,"backward",v),{startEdge:d,endEdge:y},{startEdge:y.map(x=>x.clone().addXY(l.gap.endNode.pageBounds.width,0)),endEdge:s.left}]});break}}}if(r.length>0)for(const l of r){if(l.type==="points")continue;const{gap:{breadthIntersection:c,startEdge:d,startNode:u,endNode:m,length:h,endEdge:y}}=l;switch(l.type){case"gap_center":{const v=(h-e.height)/2,x=Gl(c[0],c[1],e.minX,e.maxX);i.push({type:"gaps",direction:"vertical",id:Ln(),gaps:[...Ou(o,u.id,v,"backward",x),{startEdge:d,endEdge:s.top},{startEdge:s.bottom,endEdge:y},...Ou(o,l.gap.endNode.id,v,"forward",x)]});break}case"gap_duplicate":{const v=Gl(c[0],c[1],e.minX,e.maxX);i.push({type:"gaps",direction:"vertical",id:Ln(),gaps:l.protrusionDirection==="top"?[{startEdge:s.bottom,endEdge:d.map(x=>x.clone().addXY(0,-u.pageBounds.height))},{startEdge:d,endEdge:y},...Ou(o,m.id,h,"forward",v)]:[...Ou(o,u.id,h,"backward",v),{startEdge:d,endEdge:y},{startEdge:y.map(x=>x.clone().addXY(0,m.pageBounds.height)),endEdge:s.top}]})}break}}return UIe(i),i}}um=LIe();Lw(um,1,"getSnapPointsCache",WX,Ig);Lw(um,1,"getSnappablePoints",KX,Ig);Lw(um,1,"getSnappableGapNodes",GX,Ig);Lw(um,1,"getVisibleGaps",VX,Ig);BIe(um,Ig);function E9(t,e){const{minX:n,maxX:r,minY:o,maxY:a}=e,s=[];switch(t){case"top":case"left":case"top_left":case"any":s.push({id:"top_left",handle:"top_left",x:n,y:o})}switch(t){case"top":case"right":case"top_right":case"any":s.push({id:"top_right",handle:"top_right",x:r,y:o})}switch(t){case"bottom":case"right":case"bottom_right":case"any":s.push({id:"bottom_right",handle:"bottom_right",x:r,y:a})}switch(t){case"bottom":case"left":case"bottom_left":case"any":s.push({id:"bottom_left",handle:"bottom_left",x:n,y:a})}return s}var qIe=Object.create,YX=Object.defineProperty,HIe=Object.getOwnPropertyDescriptor,$Ie=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),XX=t=>{throw TypeError(t)},JX=(t,e,n)=>e in t?YX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VIe=t=>[,,,qIe(null)],QX=["class","method","getter","setter","accessor","field","value","get","set"],ZX=t=>t!==void 0&&typeof t!="function"?XX("Function expected"):t,GIe=(t,e,n,r,o)=>({kind:QX[t],name:e,metadata:r,addInitializer:a=>n._?XX("Already initialized"):o.push(ZX(a||null))}),KIe=(t,e)=>JX(e,$Ie("metadata"),t[3]),WIe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},YIe=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=QX[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,HIe(o,n)),S=r.length-1;S>=0;S--)l=GIe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,ZX(s)&&(x[y]=s);return x&&YX(o,n,x),o},XIe=(t,e,n)=>JX(t,e+"",n),eJ,jw;const JIe=()=>null,QIe=()=>[];eJ=[ke];class HN{constructor(e){this.manager=e,WIe(jw,5,this),XIe(this,"editor"),this.editor=e.editor}getSnapGeometryCache(){const{editor:e}=this;return e.store.createComputedCache("handle snap geometry",n=>{const r=e.getShapeUtil(n).getHandleSnapGeometry(n),o=r.getSelfSnapOutline?r.getSelfSnapOutline.bind(r):JIe,a=r.getSelfSnapPoints?r.getSelfSnapPoints.bind(r):QIe;return{outline:r.outline===void 0?e.getShapeGeometry(n):r.outline,points:r.points??[],getSelfSnapOutline:o,getSelfSnapPoints:a}})}*iterateSnapPointsInPageSpace(e,n){var o,a;const r=(o=this.getSnapGeometryCache().get(e))==null?void 0:o.getSelfSnapPoints(n);if(r&&r.length){const s=ra(this.editor.getShapePageTransform(e));for(const i of r)yield s.applyToPoint(i)}for(const s of this.manager.getSnappableShapes()){if(s===e)continue;const i=(a=this.getSnapGeometryCache().get(s))==null?void 0:a.points;if(!i||!i.length)continue;const l=ra(this.editor.getShapePageTransform(s));for(const c of i)yield l.applyToPoint(c)}}*iterateSnapOutlines(e,n){var o,a;const r=(o=this.getSnapGeometryCache().get(e))==null?void 0:o.getSelfSnapOutline(n);r&&(yield{shapeId:e,outline:r});for(const s of this.manager.getSnappableShapes()){if(s===e)continue;const i=(a=this.getSnapGeometryCache().get(s))==null?void 0:a.outline;i&&(yield{shapeId:s,outline:i})}}getHandleSnapPosition({currentShapeId:e,handle:n,handleInPageSpace:r}){const o=this.manager.getSnapThreshold();let a=o,s=null;for(const c of this.iterateSnapPointsInPageSpace(e,n))R.DistMin(r,c,a)&&(a=R.Dist(r,c),s=c);if(s)return s;let i=o,l=null;for(const{shapeId:c,outline:d}of this.iterateSnapOutlines(e,n)){const u=ra(this.editor.getShapePageTransform(c)),m=this.editor.getPointInShapeSpace(c,r),h=d.nearestPoint(m),y=u.applyToPoint(h);R.DistMin(r,y,i)&&(i=R.Dist(r,y),l=y)}return l||null}getHandleSnapData({handle:e,currentShapeId:n}){const r=this.manager.getSnapThreshold(),a=ra(this.editor.getShapePageTransform(n)).applyToPoint(e);let s=null,i=null,l=r,c=r;for(const h of this.iterateSnapPointsInPageSpace(n,e)){const y=Math.abs(a.x-h.x),v=Math.abs(a.y-h.y);y<l&&(l=y,s=h),v<c&&(c=v,i=h)}if(!s&&!i)return null;const d=new R(s?s.x-a.x:0,i?i.y-a.y:0),u=R.Add(a,d),m=[];if(s){const h=new R(s.x,u.y);m.push({id:Ln(),type:"points",points:[s,h]})}if(i){const h=new R(u.x,i.y);m.push({id:Ln(),type:"points",points:[i,h]})}return{snaps:m,nudge:d}}snapHandle({currentShapeId:e,handle:n}){const o=ra(this.editor.getShapePageTransform(e)).applyToPoint(n),a=n.canSnap?"point":n.snapType;if(a==="point"){const s=this.getHandleSnapPosition({currentShapeId:e,handle:n,handleInPageSpace:o});return s?(this.manager.setIndicators([{id:Ln(),type:"points",points:[s]}]),{nudge:R.Sub(s,o)}):null}if(a==="align"){const s=this.getHandleSnapData({handle:n,currentShapeId:e});return s?(this.manager.setIndicators(s.snaps),{nudge:s.nudge}):null}return null}}jw=VIe();YIe(jw,1,"getSnapGeometryCache",eJ,HN);KIe(jw,HN);var ZIe=Object.create,tJ=Object.defineProperty,ePe=Object.getOwnPropertyDescriptor,tPe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),nJ=t=>{throw TypeError(t)},rJ=(t,e,n)=>e in t?tJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nPe=t=>[,,,ZIe(null)],oJ=["class","method","getter","setter","accessor","field","value","get","set"],aJ=t=>t!==void 0&&typeof t!="function"?nJ("Function expected"):t,rPe=(t,e,n,r,o)=>({kind:oJ[t],name:e,metadata:r,addInitializer:a=>n._?nJ("Already initialized"):o.push(aJ(a||null))}),oPe=(t,e)=>rJ(e,tPe("metadata"),t[3]),aPe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},$N=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=oJ[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,ePe(o,n)),S=r.length-1;S>=0;S--)l=rPe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,aJ(s)&&(x[y]=s);return x&&tJ(o,n,x),o},oP=(t,e,n)=>rJ(t,typeof e!="symbol"?e+"":e,n),sJ,iJ,lJ,Pg;lJ=[ke],iJ=[ke],sJ=[ke];class bv{constructor(e){this.editor=e,aPe(Pg,5,this),oP(this,"shapeBounds"),oP(this,"handles"),oP(this,"_snapIndicators",Ir("snapLines",void 0)),this.shapeBounds=new Ig(this),this.handles=new HN(this)}getIndicators(){return this._snapIndicators.get()??io}clearIndicators(){this.getIndicators().length&&this._snapIndicators.set(void 0)}setIndicators(e){this._snapIndicators.set(e)}getSnapThreshold(){return 8/this.editor.getZoomLevel()}getSnappableShapes(){const{editor:e}=this,n=e.getViewportPageBounds(),r=e.getSelectedShapeIds(),o=new Set,a=s=>{if(bs(s)){const l=e.getShape(s);l&&e.isShapeOfType(l,"frame")&&o.add(s)}const i=e.getSortedChildIdsForParent(s);for(const l of i){if(r.includes(l))continue;const c=e.getShape(l);if(!c||!e.getShapeUtil(c).canSnap(c))continue;const u=e.getShapePageBounds(l);if(u&&n.includes(u)){if(e.isShapeOfType(c,"group")){a(l);continue}o.add(l)}}};return a(this.getCurrentCommonAncestor()??e.getCurrentPageId()),o}getCurrentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.getSelectedShapes())}}Pg=nPe();$N(Pg,1,"getSnapThreshold",lJ,bv);$N(Pg,1,"getSnappableShapes",iJ,bv);$N(Pg,1,"getCurrentCommonAncestor",sJ,bv);oPe(Pg,bv);const sPe=/\r?\n|\r/g;function T9(t){return t.replace(sPe,`
`).split(`
`).map(e=>e||" ").join(`
`)}const iPe={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},lPe=/\s/,w9=Object.freeze({"overflow-wrap":"break-word","word-break":"auto",width:null,height:null,"max-width":null,"min-width":null});class cPe{constructor(e){L(this,"elm");this.editor=e;const n=document.createElement("div");n.classList.add("tl-text"),n.classList.add("tl-text-measure"),n.setAttribute("dir","auto"),n.tabIndex=-1,this.editor.getContainer().appendChild(n),this.elm=n;for(const r of Ly(w9))n.style.setProperty(r,w9[r])}setElementStyles(e){const n={};for(const r of Ly(e))if(typeof e[r]=="string"){const o=this.elm.style.getPropertyValue(r);if(o===e[r])continue;n[r]=o,this.elm.style.setProperty(r,e[r])}return()=>{for(const r of Ly(n))this.elm.style.setProperty(r,n[r])}}dispose(){return this.elm.remove()}measureText(e,n){const r=document.createElement("div");return r.textContent=T9(e),this.measureHtml(r.innerHTML,n)}measureHtml(e,n){const{elm:r}=this,o={"font-family":n.fontFamily,"font-style":n.fontStyle,"font-weight":n.fontWeight,"font-size":n.fontSize+"px","line-height":n.lineHeight.toString(),padding:n.padding,"max-width":n.maxWidth?n.maxWidth+"px":void 0,"min-width":n.minWidth?n.minWidth+"px":void 0,"overflow-wrap":n.disableOverflowWrapBreaking?"normal":void 0,...n.otherStyles},a=this.setElementStyles(o);try{r.innerHTML=e;const s=n.measureScrollWidth?r.scrollWidth:0,i=r.getBoundingClientRect();return{x:0,y:0,w:i.width,h:i.height,scrollWidth:s}}finally{a()}}measureElementTextNodeSpans(e,{shouldTruncateToFirstLine:n=!1}={}){const r=[],o=e.getBoundingClientRect(),a=-o.left,s=-o.top,i=new Range,l=e.childNodes[0];let c=0,d=null,u=null,m=0,h=0,y=!1;for(const v of e.childNodes)if(v.nodeType===Node.TEXT_NODE)for(const x of v.textContent??""){i.setStart(l,c),i.setEnd(l,c+x.length);const S=i.getClientRects(),T=S[S.length-1],C=T.top+s,_=T.left+a,I=T.right+a,P=_<h,M=lPe.test(x);if(M!==u||C!==m||!d){if(d){if(n&&C!==m){y=!0;break}r.push(d)}d={box:{x:_,y:C,w:T.width,h:T.height},text:x},h=_}else P&&(d.box.x=_),d.box.w=P?d.box.w+T.width:I-d.box.x,d.text+=x;x===`
`&&(h=0),u=M,m=C,c+=x.length}return d&&r.push(d),{spans:r,didTruncate:y}}measureTextSpans(e,n){if(e==="")return[];const{elm:r}=this,o=n.overflow==="truncate-ellipsis"||n.overflow==="truncate-clip",a=Math.ceil(n.width-n.padding*2),s={"font-family":n.fontFamily,"font-style":n.fontStyle,"font-weight":n.fontWeight,"font-size":n.fontSize+"px","line-height":n.lineHeight.toString(),width:`${a}px`,height:"min-content","text-align":iPe[n.textAlign],"overflow-wrap":o?"anywhere":void 0,"word-break":o?"break-all":void 0,...n.otherStyles},i=this.setElementStyles(s);try{const l=T9(e);r.textContent=l;const{spans:c,didTruncate:d}=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:o});if(n.overflow==="truncate-ellipsis"&&d){r.textContent="";const u=Math.ceil(this.measureElementTextNodeSpans(r).spans[0].box.w);r.style.setProperty("width",`${a-u}px`),r.textContent=l;const m=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:!0}).spans,h=m[m.length-1];return m.push({text:"",box:{x:Math.min(h.box.x+h.box.w,n.width-n.padding-u),y:h.box.y,w:u,h:h.box.h}}),m}return c}finally{i()}}}var uPe=Object.create,cJ=Object.defineProperty,dPe=Object.getOwnPropertyDescriptor,pPe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),uJ=t=>{throw TypeError(t)},dJ=(t,e,n)=>e in t?cJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fPe=t=>[,,,uPe(null)],pJ=["class","method","getter","setter","accessor","field","value","get","set"],fJ=t=>t!==void 0&&typeof t!="function"?uJ("Function expected"):t,mPe=(t,e,n,r,o)=>({kind:pJ[t],name:e,metadata:r,addInitializer:a=>n._?uJ("Already initialized"):o.push(fJ(a||null))}),hPe=(t,e)=>dJ(e,pPe("metadata"),t[3]),gPe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},mJ=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=pJ[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,dPe(o,n)),S=r.length-1;S>=0;S--)l=mPe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,fJ(s)&&(x[y]=s);return x&&cJ(o,n,x),o},vS=(t,e,n)=>dJ(t,typeof e!="symbol"?e+"":e,n),hJ,gJ,yv;const C9=$D;gJ=[oi],hJ=[oi];class Bw{constructor(e){this.editor=e,gPe(yv,5,this),vS(this,"cancelRaf"),vS(this,"isPaused",!0),vS(this,"now",0),vS(this,"prevPoint",new R),this.editor.disposables.add(this.dispose),this.start()}start(){var e;this.isPaused=!1,(e=this.cancelRaf)==null||e.call(this),this.cancelRaf=C9(this.tick),this.now=Date.now()}tick(){if(this.isPaused)return;const e=Date.now(),n=e-this.now;this.now=e,this.updatePointerVelocity(n),this.editor.emit("frame",n),this.editor.emit("tick",n),this.cancelRaf=C9(this.tick)}dispose(){var e;this.isPaused=!0,(e=this.cancelRaf)==null||e.call(this)}updatePointerVelocity(e){const{prevPoint:n,editor:{inputs:{currentScreenPoint:r,pointerVelocity:o}}}=this;if(e===0)return;const a=R.Sub(r,n);this.prevPoint=r.clone();const s=a.len(),i=s?a.div(s):new R(0,0),l=o.clone().lrp(i.mul(s/e),.5);Math.abs(l.x)<.01&&(l.x=0),Math.abs(l.y)<.01&&(l.y=0),o.equals(l)||(this.editor.inputs.pointerVelocity=l)}}yv=fPe();mJ(yv,1,"tick",gJ,Bw);mJ(yv,1,"dispose",hJ,Bw);hPe(yv,Bw);var bPe=Object.create,bJ=Object.defineProperty,yPe=Object.getOwnPropertyDescriptor,vPe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),yJ=t=>{throw TypeError(t)},vJ=(t,e,n)=>e in t?bJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xPe=t=>[,,,bPe(null)],xJ=["class","method","getter","setter","accessor","field","value","get","set"],SJ=t=>t!==void 0&&typeof t!="function"?yJ("Function expected"):t,SPe=(t,e,n,r,o)=>({kind:xJ[t],name:e,metadata:r,addInitializer:a=>n._?yJ("Already initialized"):o.push(SJ(a||null))}),EPe=(t,e)=>vJ(e,vPe("metadata"),t[3]),TPe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},Ls=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=xJ[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,yPe(o,n)),S=r.length-1;S>=0;S--)l=SPe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,SJ(s)&&(x[y]=s);return x&&bJ(o,n,x),o},A9=(t,e,n)=>vJ(t,typeof e!="symbol"?e+"":e,n),EJ,TJ,wJ,CJ,AJ,_J,kJ,IJ,PJ,OJ,MJ,RJ,DJ,NJ,LJ,pa;LJ=[ke],NJ=[ke],DJ=[ke],RJ=[ke],MJ=[ke],OJ=[ke],PJ=[ke],IJ=[ke],kJ=[ke],_J=[ke],AJ=[ke],CJ=[ke],wJ=[ke],TJ=[ke],EJ=[ke];class Na{constructor(e,n){if(this.user=e,this.inferDarkMode=n,TPe(pa,5,this),A9(this,"systemColorScheme",Ir("systemColorScheme","light")),A9(this,"disposables",new Set),typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia("(prefers-color-scheme: dark)");r!=null&&r.matches&&this.systemColorScheme.set("dark");const o=a=>{a.matches?this.systemColorScheme.set("dark"):this.systemColorScheme.set("light")};r==null||r.addEventListener("change",o),this.disposables.add(()=>r==null?void 0:r.removeEventListener("change",o))}dispose(){this.disposables.forEach(e=>e())}updateUserPreferences(e){this.user.setUserPreferences({...this.user.userPreferences.get(),...e})}getUserPreferences(){return{id:this.getId(),name:this.getName(),locale:this.getLocale(),color:this.getColor(),animationSpeed:this.getAnimationSpeed(),areKeyboardShortcutsEnabled:this.getAreKeyboardShortcutsEnabled(),isSnapMode:this.getIsSnapMode(),colorScheme:this.user.userPreferences.get().colorScheme,isDarkMode:this.getIsDarkMode(),isWrapMode:this.getIsWrapMode(),isDynamicResizeMode:this.getIsDynamicResizeMode(),enhancedA11yMode:this.getEnhancedA11yMode(),inputMode:this.getInputMode()}}getIsDarkMode(){switch(this.user.userPreferences.get().colorScheme){case"dark":return!0;case"light":return!1;case"system":return this.systemColorScheme.get()==="dark";default:return this.inferDarkMode?this.systemColorScheme.get()==="dark":!1}}getEdgeScrollSpeed(){return this.user.userPreferences.get().edgeScrollSpeed??Xs.edgeScrollSpeed}getAnimationSpeed(){return this.user.userPreferences.get().animationSpeed??Xs.animationSpeed}getAreKeyboardShortcutsEnabled(){return this.user.userPreferences.get().areKeyboardShortcutsEnabled??Xs.areKeyboardShortcutsEnabled}getId(){return this.user.userPreferences.get().id}getName(){var e;return((e=this.user.userPreferences.get().name)==null?void 0:e.trim())??Xs.name}getLocale(){return this.user.userPreferences.get().locale??Xs.locale}getColor(){return this.user.userPreferences.get().color??Xs.color}getIsSnapMode(){return this.user.userPreferences.get().isSnapMode??Xs.isSnapMode}getIsWrapMode(){return this.user.userPreferences.get().isWrapMode??Xs.isWrapMode}getIsDynamicResizeMode(){return this.user.userPreferences.get().isDynamicSizeMode??Xs.isDynamicSizeMode}getIsPasteAtCursorMode(){return this.user.userPreferences.get().isPasteAtCursorMode??Xs.isPasteAtCursorMode}getEnhancedA11yMode(){return this.user.userPreferences.get().enhancedA11yMode??Xs.enhancedA11yMode}getInputMode(){return this.user.userPreferences.get().inputMode??Xs.inputMode}}pa=xPe();Ls(pa,1,"getUserPreferences",LJ,Na);Ls(pa,1,"getIsDarkMode",NJ,Na);Ls(pa,1,"getEdgeScrollSpeed",DJ,Na);Ls(pa,1,"getAnimationSpeed",RJ,Na);Ls(pa,1,"getAreKeyboardShortcutsEnabled",MJ,Na);Ls(pa,1,"getId",OJ,Na);Ls(pa,1,"getName",PJ,Na);Ls(pa,1,"getLocale",IJ,Na);Ls(pa,1,"getColor",kJ,Na);Ls(pa,1,"getIsSnapMode",_J,Na);Ls(pa,1,"getIsWrapMode",AJ,Na);Ls(pa,1,"getIsDynamicResizeMode",CJ,Na);Ls(pa,1,"getIsPasteAtCursorMode",wJ,Na);Ls(pa,1,"getEnhancedA11yMode",TJ,Na);Ls(pa,1,"getInputMode",EJ,Na);EPe(pa,Na);const wPe={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",long_press:"onLongPress",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick",tick:"onTick"},CPe=["brushing","cropping","dragging","dragging_handle","drawing","erasing","lasering","resizing","rotating","scribble_brushing","translating"];class ht{constructor(e,n){L(this,"performanceTracker");L(this,"id");L(this,"type");L(this,"shapeType");L(this,"initial");L(this,"children");L(this,"isLockable");L(this,"useCoalescedEvents");L(this,"parent");L(this,"_path");L(this,"_current");L(this,"_isActive");L(this,"_currentToolIdMask",Ir("curent tool id mask",void 0));this.editor=e;const{id:r,children:o,initial:a,isLockable:s,useCoalescedEvents:i}=this.constructor;this.id=r,this._isActive=Ir("toolIsActive"+this.id,!1),this._current=Ir("toolState"+this.id,void 0),this._path=ke("toolPath"+this.id,()=>{const l=this.getCurrent();return this.id+(l?`.${l.getPath()}`:"")}),this.parent=n??{},n?o&&a?(this.type="branch",this.initial=a,this.children=Object.fromEntries(o().map(l=>[l.id,new l(this.editor,this)])),this._current.set(this.children[this.initial])):this.type="leaf":(this.type="root",o&&a&&(this.initial=a,this.children=Object.fromEntries(o().map(l=>[l.id,new l(this.editor,this)])),this._current.set(this.children[this.initial]))),this.isLockable=s,this.useCoalescedEvents=i,this.performanceTracker=new UK}getPath(){return this._path.get()}getCurrent(){return this._current.get()}getIsActive(){return this._isActive.get()}transition(e,n={}){var a;const r=e.split(".");let o=this;for(let s=0;s<r.length;s++){const i=r[s],l=o.getCurrent(),c=(a=o.children)==null?void 0:a[i];if(!c)throw Error(`${o.id} - no child state exists with the id ${i}.`);if((l==null?void 0:l.id)!==c.id&&(l==null||l.exit(n,i),o._current.set(c),c.enter(n,(l==null?void 0:l.id)||"initial"),!c.getIsActive()))break;o=c}return this}handleEvent(e){var o;const n=wPe[e.name],r=this._current.__unsafe__getWithoutCapture();(o=this[n])==null||o.call(this,e),this._isActive.__unsafe__getWithoutCapture()&&r&&r===this._current.__unsafe__getWithoutCapture()&&r.handleEvent(e)}enter(e,n){var r;if(Ur.measurePerformance.get()&&CPe.includes(this.id)&&this.performanceTracker.start(this.id),this._isActive.set(!0),(r=this.onEnter)==null||r.call(this,e,n),this.children&&this.initial&&this.getIsActive()){const o=this.children[this.initial];this._current.set(o),o.enter(e,n)}}exit(e,n){var r,o;Ur.measurePerformance.get()&&this.performanceTracker.isStarted()&&this.performanceTracker.stop(),this._isActive.set(!1),(r=this.onExit)==null||r.call(this,e,n),this.getIsActive()||(o=this.getCurrent())==null||o.exit(e,n)}getCurrentToolIdMask(){return this._currentToolIdMask.get()}setCurrentToolIdMask(e){this._currentToolIdMask.set(e)}addChild(e){if(this.type==="leaf")throw new Error("StateNode.addChild: cannot add child to a leaf node");this.children||(this.children={});const n=new e(this.editor,this);if(this.children[n.id])throw new Error(`StateNode.addChild: a child with id '${n.id}' already exists`);return this.children[n.id]=n,this}}L(ht,"id"),L(ht,"initial"),L(ht,"children"),L(ht,"isLockable",!0),L(ht,"useCoalescedEvents",!1);class AM extends ht{static children(){return[]}onKeyDown(e){var n;switch(e.code){case"KeyZ":{if(!(e.shiftKey||e.ctrlKey)){const r=this.getCurrent();r&&((n=r.getCurrent())==null?void 0:n.id)==="idle"&&this.children.zoom&&this.editor.setCurrentTool("zoom",{...e,onInteractionEnd:r.id})}break}}}}L(AM,"id","root"),L(AM,"initial","");var APe=Object.create,jJ=Object.defineProperty,_Pe=Object.getOwnPropertyDescriptor,BJ=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),FJ=t=>{throw TypeError(t)},zJ=(t,e,n)=>e in t?jJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kPe=t=>[,,,APe((t==null?void 0:t[BJ("metadata")])??null)],UJ=["class","method","getter","setter","accessor","field","value","get","set"],qJ=t=>t!==void 0&&typeof t!="function"?FJ("Function expected"):t,IPe=(t,e,n,r,o)=>({kind:UJ[t],name:e,metadata:r,addInitializer:a=>n._?FJ("Already initialized"):o.push(qJ(a||null))}),PPe=(t,e)=>zJ(e,BJ("metadata"),t[3]),OPe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},st=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=UJ[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,_Pe(o,n)),S=r.length-1;S>=0;S--)l=IPe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,qJ(s)&&(x[y]=s);return x&&jJ(o,n,x),o},Et=(t,e,n)=>zJ(t,typeof e!="symbol"?e+"":e,n),HJ,$J,VJ,GJ,KJ,WJ,YJ,XJ,JJ,QJ,ZJ,eQ,tQ,nQ,rQ,oQ,aQ,sQ,iQ,lQ,cQ,uQ,dQ,pQ,fQ,mQ,hQ,gQ,bQ,yQ,vQ,xQ,SQ,EQ,TQ,wQ,CQ,AQ,_Q,kQ,IQ,PQ,OQ,MQ,RQ,DQ,NQ,LQ,jQ,BQ,FQ,zQ,UQ,qQ,HQ,$Q,VQ,GQ,KQ,WQ,YQ,XQ,JQ,QQ,ZQ,eZ,tZ,nZ,rZ,oZ,aZ,_M,nt;let tt=class extends(_M=q2e,aZ=[ke],oZ=[ke],rZ=[ke],nZ=[ke],tZ=[ke],eZ=[ke],ZQ=[ke],QQ=[ke],JQ=[ke],XQ=[ke],YQ=[ke],WQ=[ke],KQ=[ke],GQ=[ke],VQ=[ke],$Q=[ke],HQ=[ke],qQ=[ke],UQ=[ke],zQ=[ke],FQ=[ke],BQ=[ke],jQ=[ke],LQ=[ke],NQ=[ke],DQ=[ke],RQ=[ke],MQ=[ke],OQ=[ke],PQ=[ke],IQ=[ke],kQ=[ke],_Q=[ke],AQ=[ke],CQ=[ke],wQ=[ke],TQ=[ke],EQ=[ke],SQ=[ke],xQ=[ke],vQ=[ke],yQ=[ke],bQ=[ke],gQ=[ke],hQ=[ke],mQ=[ke],fQ=[ke],pQ=[ke],dQ=[ke],uQ=[ke],cQ=[ke],lQ=[ke],iQ=[ke],sQ=[ke],aQ=[ke],oQ=[ke],rQ=[ke],nQ=[ke],tQ=[ke],eQ=[ke],ZJ=[ke],QJ=[ke],JJ=[ke],XJ=[ke({isEqual:(e,n)=>e.equals(n)})],YJ=[ke],WJ=[ke],KJ=[ke],GJ=[oi],VJ=[oi],$J=[oi],HJ=[oi],_M){constructor({store:e,user:n,shapeUtils:r,bindingUtils:o,tools:a,getContainer:s,cameraOptions:i,textOptions:l,initialState:c,autoFocus:d,inferDarkMode:u,options:m,getShapeVisibility:h,fontAssetUrls:y}){var V;super(),OPe(nt,5,this),Et(this,"id",Ln()),Et(this,"_getShapeVisibility"),Et(this,"options"),Et(this,"contextId",Ln()),Et(this,"store"),Et(this,"root"),Et(this,"disposables",new Set),Et(this,"isDisposed",!1),Et(this,"_tickManager"),Et(this,"snaps"),Et(this,"timers",LE.forContext(this.contextId)),Et(this,"user"),Et(this,"textMeasure"),Et(this,"fonts"),Et(this,"scribbles"),Et(this,"sideEffects"),Et(this,"edgeScrollManager"),Et(this,"focusManager"),Et(this,"getContainer"),Et(this,"shapeUtils"),Et(this,"styleProps"),Et(this,"bindingUtils"),Et(this,"history"),Et(this,"_shouldIgnoreShapeLock",!1),Et(this,"_crashingError",null),Et(this,"_isChangingStyleTimeout",-1),Et(this,"menus",vs.forContext(this.contextId)),Et(this,"_currentRichTextEditor",Ir("rich text editor",null)),Et(this,"_textOptions"),Et(this,"_cameraOptions",Ir("camera options",t9)),Et(this,"_viewportAnimation",null),Et(this,"_willSetInitialBounds",!0),Et(this,"_isLockedOnFollowingUser",Ir("isLockedOnFollowingUser",!1)),Et(this,"_cameraState",Ir("camera state","idle")),Et(this,"_cameraStateTimeoutRemaining",0),Et(this,"_currentPageShapeIds"),Et(this,"_shapeGeometryCaches",{}),Et(this,"_notVisibleShapes",fIe(this)),Et(this,"_parentIdsToChildIds"),Et(this,"animatingShapes",new Map),Et(this,"externalAssetContentHandlers",{file:null,url:null}),Et(this,"temporaryAssetPreview",new Map),Et(this,"externalContentHandlers",{text:null,files:null,"file-replace":null,embed:null,"svg-text":null,url:null,tldraw:null,excalidraw:null}),Et(this,"inputs",{originPagePoint:new R,originScreenPoint:new R,previousPagePoint:new R,previousScreenPoint:new R,currentPagePoint:new R,currentScreenPoint:new R,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,isSpacebarPanning:!1,pointerVelocity:new R}),Et(this,"_clickManager",new Nw(this)),Et(this,"_prevCursor","default"),Et(this,"_shiftKeyTimeout",-1),Et(this,"_altKeyTimeout",-1),Et(this,"_ctrlKeyTimeout",-1),Et(this,"_metaKeyTimeout",-1),Et(this,"_restoreToolId","select"),Et(this,"_pinchStart",1),Et(this,"_didPinch",!1),Et(this,"_selectedShapeIdsAtPointerDown",[]),Et(this,"_longPressTimeout",-1),Et(this,"capturedPointerId",null),Et(this,"performanceTracker"),Et(this,"performanceTrackerTimeout",-1),Et(this,"handledEvents",new WeakSet),Et(this,"_pendingEventsForNextTick",[]),this._getShapeVisibility=h,this.options={...eIe,...m},this.store=e,this.history=new _Ie({store:e,annotateError:z=>{this.annotateError(z,{origin:"history.batch",willCrashApp:!0}),this.crash(z)}}),this.snaps=new bv(this),this.disposables.add(this.timers.dispose),this._cameraOptions.set({...t9,...i}),this._textOptions=Ir("text options",l??null),this.user=new Na(n??YY(),u??!1),this.disposables.add(()=>this.user.dispose()),this.getContainer=s,this.textMeasure=new cPe(this),this.disposables.add(()=>this.textMeasure.dispose()),this.fonts=new AIe(this,y),this._tickManager=new Bw(this);class v extends AM{}L(v,"initial",c??""),this.root=new v(this),this.root.children={},this.markEventAsHandled=this.markEventAsHandled.bind(this);const x=aX(r),S={},T={},C=new Map;for(const z of x){const H=new z(this);S[z.type]=H;const j=XW(z.props??{});T[z.type]=j;for(const q of j.keys())if(!C.has(q.id))C.set(q.id,q);else if(C.get(q.id)!==q)throw Error(`Multiple style props with id "${q.id}" in use. Style prop IDs must be unique.`)}this.shapeUtils=S,this.styleProps=T;const _=eX(o),I={};for(const z of _){const H=new z(this);I[z.type]=H}this.bindingUtils=I;for(const z of[...a]){if(ai(this.root.children,z.id))throw Error(`Can't override tool with id "${z.id}"`);this.root.children[z.id]=new z(this,this.root)}this.scribbles=new MIe(this);const P=(z,H)=>{let j=null;const q=z.selectedShapeIds.filter(X=>!H.has(X));q.length!==z.selectedShapeIds.length&&(j||(j={...z}),j.selectedShapeIds=q);const U=z.erasingShapeIds.filter(X=>!H.has(X));U.length!==z.erasingShapeIds.length&&(j||(j={...z}),j.erasingShapeIds=U),z.hoveredShapeId&&H.has(z.hoveredShapeId)&&(j||(j={...z}),j.hoveredShapeId=null),z.editingShapeId&&H.has(z.editingShapeId)&&(j||(j={...z}),j.editingShapeId=null);const Y=z.hintingShapeIds.filter(X=>!H.has(X));return Y.length!==z.hintingShapeIds.length&&(j||(j={...z}),j.hintingShapeIds=Y),z.focusedGroupId&&H.has(z.focusedGroupId)&&(j||(j={...z}),j.focusedGroupId=null),j};this.sideEffects=this.store.sideEffects;let M=new Map;const D=new Set,F=new Set;let B=new Set;if(this.disposables.add(this.sideEffects.registerOperationCompleteHandler(()=>{var z,H,j,q;D.clear();for(const U of F){F.delete(U);const Y=this.getShape(U);if(!Y)continue;const X=this.getShapeUtil(Y),ee=(z=X.onChildrenChange)==null?void 0:z.call(X,Y);ee!=null&&ee.length&&this.updateShapes(ee)}if(B.size){const U=B;B=new Set;for(const Y of U){const X=this.getBindingUtil(Y);(H=X.onOperationComplete)==null||H.call(X)}}if(M.size){const U=M;M=new Map;for(const Y of U.values())(q=(j=this.getBindingUtil(Y.binding)).onAfterDelete)==null||q.call(j,Y)}this.emit("update")})),this.disposables.add(this.sideEffects.register({shape:{afterChange:(z,H)=>{var j,q,U,Y;for(const X of this.getBindingsInvolvingShape(H))B.add(X.type),X.fromId===H.id&&((q=(j=this.getBindingUtil(X)).onAfterChangeFromShape)==null||q.call(j,{binding:X,shapeBefore:z,shapeAfter:H,reason:"self"})),X.toId===H.id&&((Y=(U=this.getBindingUtil(X)).onAfterChangeToShape)==null||Y.call(U,{binding:X,shapeBefore:z,shapeAfter:H,reason:"self"}));if(z.parentId!==H.parentId){const X=ee=>{var G,re,K,ve;const $=this.getShape(ee);if($)for(const xe of this.getBindingsInvolvingShape($))B.add(xe.type),xe.fromId===$.id&&((re=(G=this.getBindingUtil(xe)).onAfterChangeFromShape)==null||re.call(G,{binding:xe,shapeBefore:$,shapeAfter:$,reason:"ancestry"})),xe.toId===$.id&&((ve=(K=this.getBindingUtil(xe)).onAfterChangeToShape)==null||ve.call(K,{binding:xe,shapeBefore:$,shapeAfter:$,reason:"ancestry"}))};X(H.id),this.visitDescendants(H.id,X)}if(z.parentId!==H.parentId&&Ea(H.parentId)){const X=new Set([z.id]);this.visitDescendants(z.id,ee=>{X.add(ee)});for(const ee of this.getPageStates()){if(ee.pageId===H.parentId)continue;const $=P(ee,X);$&&this.store.put([$])}}z.parentId&&bs(z.parentId)&&F.add(z.parentId),H.parentId!==z.parentId&&bs(H.parentId)&&F.add(H.parentId)},beforeDelete:z=>{var U,Y,X,ee;if(D.has(z.id))return;z.parentId&&bs(z.parentId)&&F.add(z.parentId),D.add(z.id);const H=[];for(const $ of this.getBindingsInvolvingShape(z)){B.add($.type),H.push($.id);const G=this.getBindingUtil($);$.fromId===z.id?((U=G.onBeforeIsolateToShape)==null||U.call(G,{binding:$,removedShape:z}),(Y=G.onBeforeDeleteFromShape)==null||Y.call(G,{binding:$,shape:z})):((X=G.onBeforeIsolateFromShape)==null||X.call(G,{binding:$,removedShape:z}),(ee=G.onBeforeDeleteToShape)==null||ee.call(G,{binding:$,shape:z}))}H.length&&this.deleteBindings(H);const j=new Set([z.id]),q=Dt(this.getPageStates().map($=>P($,j)));q.length&&this.store.put(q)}},binding:{beforeCreate:z=>{var j,q;const H=(q=(j=this.getBindingUtil(z)).onBeforeCreate)==null?void 0:q.call(j,{binding:z});return H||z},afterCreate:z=>{var H,j;B.add(z.type),(j=(H=this.getBindingUtil(z)).onAfterCreate)==null||j.call(H,{binding:z})},beforeChange:(z,H)=>{var q,U;const j=(U=(q=this.getBindingUtil(H)).onBeforeChange)==null?void 0:U.call(q,{bindingBefore:z,bindingAfter:H});return j||H},afterChange:(z,H)=>{var j,q;B.add(H.type),(q=(j=this.getBindingUtil(H)).onAfterChange)==null||q.call(j,{bindingBefore:z,bindingAfter:H})},beforeDelete:z=>{var H,j;(j=(H=this.getBindingUtil(z)).onBeforeDelete)==null||j.call(H,{binding:z})},afterDelete:z=>{var H,j;(j=(H=this.getBindingUtil(z)).onAfterDelete)==null||j.call(H,{binding:z}),B.add(z.type)}},page:{afterCreate:z=>{const H=jc.createId(z.id),j=Xl.createId(z.id);this.store.has(H)||this.store.put([jc.create({id:H})]),this.store.has(j)||this.store.put([Xl.create({id:j,pageId:z.id})])},afterDelete:(z,H)=>{var U,Y;if(((U=this.getInstanceState())==null?void 0:U.currentPageId)===z.id){const X=(Y=this.getPages().find(ee=>ee.id!==z.id))==null?void 0:Y.id;X?this.store.put([{...this.getInstanceState(),currentPageId:X}]):H==="user"&&this.store.ensureStoreIsUsable()}const j=jc.createId(z.id),q=Xl.createId(z.id);this.store.remove([j,q])}},instance:{afterChange:(z,H,j)=>{var q;if(!this.store.has(H.currentPageId)){const U=this.store.has(z.currentPageId)?z.currentPageId:(q=this.getPages()[0])==null?void 0:q.id;U?this.store.update(H.id,Y=>({...Y,currentPageId:U})):j==="user"&&this.store.ensureStoreIsUsable()}}},instance_page_state:{afterChange:(z,H)=>{if((z==null?void 0:z.selectedShapeIds)!==(H==null?void 0:H.selectedShapeIds)){const j=H.selectedShapeIds.filter(U=>{var X,ee;let Y=(X=this.getShape(U))==null?void 0:X.parentId;for(;bs(Y);){if(H.selectedShapeIds.includes(Y))return!1;Y=(ee=this.getShape(Y))==null?void 0:ee.parentId}return!0});let q=null;if(j.length>0){const U=this.findCommonAncestor(Dt(j.map(Y=>this.getShape(Y))),Y=>this.isShapeOfType(Y,"group"));U&&(q=U)}else H!=null&&H.focusedGroupId&&(q=H.focusedGroupId);(j.length!==H.selectedShapeIds.length||q!==H.focusedGroupId)&&this.store.put([{...H,selectedShapeIds:j,focusedGroupId:q??null}])}}}})),this._currentPageShapeIds=hIe(this.store,()=>this.getCurrentPageId()),this._parentIdsToChildIds=mIe(this.store),this.disposables.add(this.store.listen(z=>{this.emit("change",z)})),this.disposables.add(this.history.dispose),this.run(()=>{this.store.ensureStoreIsUsable(),this._updateCurrentPageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]})},{history:"ignore"}),c&&this.root.children[c]===void 0)throw Error(`No state found for initialState "${c}".`);if(this.root.enter(void 0,"initial"),this.edgeScrollManager=new wIe(this),this.focusManager=new CIe(this,d),this.disposables.add(this.focusManager.dispose.bind(this.focusManager)),this.getInstanceState().followingUserId&&this.stopFollowingUser(),this.on("tick",this._flushEventsForTick),this.timers.requestAnimationFrame(()=>{this._tickManager.start()}),this.performanceTracker=new UK,(V=this.store.props.collaboration)!=null&&V.mode){const z=this.store.props.collaboration.mode;this.disposables.add(si("update collaboration mode",()=>{this.store.put([{...this.getInstanceState(),isReadonly:z.get()==="readonly"}])}))}}getIsShapeHiddenCache(){return this._getShapeVisibility?this.store.createComputedCache("isShapeHidden",e=>{const n=this._getShapeVisibility(e,this);return(Cs.isId(e.parentId)?!1:this.isShapeHidden(e.parentId))?n!=="visible":n==="hidden"}):null}isShapeHidden(e){return this._getShapeVisibility?!!this.getIsShapeHiddenCache().get(typeof e=="string"?e:e.id):!1}setTool(e,n){if(n??(n=this.root),ai(n.children,e.id))throw Error(`Can't override tool with id "${e.id}"`);n.children[e.id]=new e(this,n)}removeTool(e,n){n??(n=this.root),ai(n.children,e.id)&&delete n.children[e.id]}dispose(){this.disposables.forEach(e=>e()),this.disposables.clear(),this.store.dispose(),this.isDisposed=!0}getShapeUtil(e){const n=typeof e=="string"?e:e.type,r=vo(this.shapeUtils,n);return dt(r,`No shape util found for type "${n}"`),r}hasShapeUtil(e){const n=typeof e=="string"?e:e.type;return ai(this.shapeUtils,n)}getBindingUtil(e){const n=typeof e=="string"?e:e.type,r=vo(this.bindingUtils,n);return dt(r,`No binding util found for type "${n}"`),r}undo(){return this._flushEventsForTick(0),this.complete(),this.history.undo(),this}getCanUndo(){return this.history.getNumUndos()>0}redo(){return this._flushEventsForTick(0),this.complete(),this.history.redo(),this}clearHistory(){return this.history.clear(),this}getCanRedo(){return this.history.getNumRedos()>0}markHistoryStoppingPoint(e){const n=`[${e??"stop"}]_${Ln()}`;return this.history._mark(n),n}getMarkIdMatching(e){return this.history.getMarkIdMatching(e)}squashToMark(e){return this.history.squashToMark(e),this}bail(){return this.history.bail(),this}bailToMark(e){return this.history.bailToMark(e),this}run(e,n){const r=this._shouldIgnoreShapeLock;this._shouldIgnoreShapeLock=(n==null?void 0:n.ignoreShapeLock)??r;try{this.history.batch(e,n)}finally{this._shouldIgnoreShapeLock=r}return this}annotateError(e,{origin:n,willCrashApp:r,tags:o,extras:a}){const s=this.createErrorAnnotations(n,r);return FD(e,{tags:{...s.tags,...o},extras:{...s.extras,...a}}),r&&this.store.markAsPossiblyCorrupted(),this}createErrorAnnotations(e,n){try{const r=this.getEditingShapeId();return{tags:{origin:e,willCrashApp:n},extras:{activeStateNode:this.root.getPath(),selectedShapes:this.getSelectedShapes().map(o=>{const{props:a,...s}=o,{text:i,richText:l,...c}=a;return{...s,props:c}}),selectionCount:this.getSelectedShapes().length,editingShape:r?this.getShape(r):void 0,inputs:this.inputs,pageState:this.getCurrentPageState(),instanceState:this.getInstanceState(),collaboratorCount:this.getCollaboratorsOnCurrentPage().length}}}catch{return{tags:{origin:e,willCrashApp:n},extras:{}}}}getCrashingError(){return this._crashingError}crash(e){return this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e}),this}getPath(){return this.root.getPath().split("root.")[1]}isIn(e){const n=e.split(".").reverse();let r=this.root;for(;n.length>0;){const o=n.pop();if(!o)return!0;const a=r.getCurrent();if((a==null?void 0:a.id)===o){if(n.length===0)return!0;r=a;continue}else return!1}return!1}isInAny(...e){return e.some(n=>this.isIn(n))}setCurrentTool(e,n={}){return this.root.transition(e,n),this}getCurrentTool(){return this.root.getCurrent()}getCurrentToolId(){const e=this.getCurrentTool();return e?e.getCurrentToolIdMask()??e.id:""}getStateDescendant(e){var o;const n=e.split(".").reverse();let r=this.root;for(;n.length>0;){const a=n.pop();if(!a)return r;const s=(o=r.children)==null?void 0:o[a];if(!s)return;r=s}return r}getDocumentSettings(){return this.store.get(gM)}updateDocumentSettings(e){return this.run(()=>{this.store.put([{...this.getDocumentSettings(),...e}])},{history:"ignore"}),this}getInstanceState(){return this.store.get(ys)}updateInstanceState(e,n){return this._updateInstanceState(e,{history:"ignore",...n}),e.isChangingStyle!==void 0&&(clearTimeout(this._isChangingStyleTimeout),e.isChangingStyle===!0&&(this._isChangingStyleTimeout=this.timers.setTimeout(()=>{this._updateInstanceState({isChangingStyle:!1},{history:"ignore"})},1e3))),this}_updateInstanceState(e,n){this.run(()=>{this.store.put([{...this.getInstanceState(),...e}])},n)}setCursor(e){return this.updateInstanceState({cursor:{...this.getInstanceState().cursor,...e}}),this}getPageStates(){return this._getPageStatesQuery().get()}_getPageStatesQuery(){return this.store.query.records("instance_page_state")}getCurrentPageState(){return this.store.get(this._getCurrentPageStateId())}_getCurrentPageStateId(){return Xl.createId(this.getCurrentPageId())}updateCurrentPageState(e){return this._updateCurrentPageState(e),this}_updateCurrentPageState(e){this.store.update(e.id??this.getCurrentPageState().id,n=>({...n,...e}))}getSelectedShapeIds(){return this.getCurrentPageState().selectedShapeIds}getSelectedShapes(){return Dt(this.getSelectedShapeIds().map(e=>this.store.get(e)))}setSelectedShapes(e){return this.run(()=>{const n=e.map(a=>typeof a=="string"?a:a.id),{selectedShapeIds:r}=this.getCurrentPageState(),o=new Set(r);if(n.length===o.size&&n.every(a=>o.has(a)))return null;this.store.put([{...this.getCurrentPageState(),selectedShapeIds:n}])},{history:"record-preserveRedoStack"})}isAncestorSelected(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null,r=this.getShape(n);if(!r)return!1;const o=this.getSelectedShapeIds();return!!this.findShapeAncestor(r,a=>o.includes(a.id))}select(...e){const n=typeof e[0]=="string"?e:e.map(r=>r.id);return this.setSelectedShapes(n),this}deselect(...e){const n=typeof e[0]=="string"?e:e.map(o=>o.id),r=this.getSelectedShapeIds();return r.length>0&&n.length>0&&this.setSelectedShapes(r.filter(o=>!n.includes(o))),this}selectAll(){let e=null;const n=this.getSelectedShapeIds();if(n.length>0)for(const o of n){const a=this.getShape(o);if(a){if(e===null)e=a.parentId;else if(e!==a.parentId)return this}}e||(e=this.getCurrentPageId());const r=this.getSortedChildIdsForParent(e);return r.length<=0?this:(this.setSelectedShapes(this._getUnlockedShapeIds(r)),this)}selectAdjacentShape(e){var d,u;const n=this.getSelectedShapeIds(),r=n[0]?(d=this.getShape(n[0]))==null?void 0:d.parentId:null,o=r&&n.every(m=>{var h;return((h=this.getShape(m))==null?void 0:h.parentId)===r})&&!Ea(r),a=o?this.getCurrentPageShapes().filter(m=>m.parentId===r):this.getCurrentPageShapes().filter(m=>Ea(m.parentId)),s=o?this._getShapesInReadingOrder(a):this.getCurrentPageShapesInReadingOrder(),i=n.length===1?n[0]:(u=s.find(m=>n.includes(m.id)))==null?void 0:u.id;let l;if(e==="next"||e==="prev"){const m=s.map(v=>v.id),y=((i?m.indexOf(i):-1)+(e==="next"?1:-1)+m.length)%m.length;l=m[y]}else{if(!i)return;l=this.getNearestAdjacentShape(a,i,e)}const c=this.getShape(l);c&&this._selectShapesAndZoom([c.id])}getCurrentPageShapesInReadingOrder(){const e=this.getCurrentPageShapes().filter(n=>Ea(n.parentId));return this._getShapesInReadingOrder(e)}_getShapesInReadingOrder(e){const o=e.filter(i=>this.getShapeUtil(i).canTabTo(i));if(o.length<=1)return o;const a=o.map(i=>({shape:i,center:this.getShapePageBounds(i).center}));a.sort((i,l)=>i.center.y-l.center.y);const s=[];for(const i of a){let l=-1;for(let c=s.length-1;c>=0;c--){const d=s[c],u=d[d.length-1];if(Math.abs(i.center.y-u.center.y)<100){l=c;break}}l===-1?s.push([i]):s[l].push(i)}for(const i of s)i.sort((l,c)=>l.center.x-c.center.x);for(const i of s)if(!(i.length<=2))for(let l=0;l<i.length-2;l++){const c=i[l],d=i[l+1],u=i[l+2],m=R.Dist2(c.center,d.center);R.Dist2(c.center,u.center)<m*.9&&Math.abs(R.Angle(c.center,u.center)*(180/Math.PI))<=20&&([i[l+1],i[l+2]]=[i[l+2],i[l+1]])}return s.flat().map(i=>i.shape)}getNearestAdjacentShape(e,n,r){const o={right:0,left:180,down:90,up:270},a=this.getShape(n);if(!a)return n;const s=e.filter(u=>this.getShapeUtil(u).canTabTo(u)&&u.id!==n);if(!s.length)return n;const i=this.getShapePageBounds(a).center,c=s.map(u=>({shape:u,center:this.getShapePageBounds(u).center})).filter(({center:u})=>{const m=u.x>i.x,h=u.y>i.y,y=u.x-i.x,v=u.y-i.y,x=Math.abs(v)<Math.abs(y)*2,S=Math.abs(y)<Math.abs(v)*2;if(r==="left"||r==="right")return x&&(r==="right"?m:!m);if(r==="up"||r==="down")return S&&(r==="down"?h:!h)});return c.length===0?n:MK(c,({center:u})=>{const m=R.Dist2(i,u),h=["left","right"].includes(r)?"x":"y",y=Math.abs(u[h]-i[h]),v=["left","right"].includes(r)?"y":"x",x=Math.abs(u[v]-i[v]),S=Math.abs(R.Angle(i,u)*(180/Math.PI)),T=Math.abs(S-o[r]);return m*1+x*2+(m-y)*1.5+T*.5}).shape.id}selectParentShape(){const e=this.getOnlySelectedShape();if(!e)return;const n=this.getShape(e.parentId);n&&this._selectShapesAndZoom([n.id])}selectFirstChildShape(){const e=this.getSelectedShapes();if(!e.length)return;const n=e[0],r=this.getSortedChildIdsForParent(n.id).map(a=>this.getShape(a)).filter(a=>a),o=this._getShapesInReadingOrder(r);o.length!==0&&this._selectShapesAndZoom([o[0].id])}_selectShapesAndZoom(e){this.setSelectedShapes(e),this.zoomToSelectionIfOffscreen(256,{animation:{duration:this.options.animationMediumMs},inset:0})}selectNone(){return this.getSelectedShapeIds().length>0&&this.setSelectedShapes([]),this}getOnlySelectedShapeId(){var e;return((e=this.getOnlySelectedShape())==null?void 0:e.id)??null}getOnlySelectedShape(){const e=this.getSelectedShapes();return e.length===1?e[0]:null}getShapesPageBounds(e){const n=Dt(e.map(r=>this.getShapePageBounds(r)));return n.length===0?null:Be.Common(n)}getSelectionPageBounds(){return this.getShapesPageBounds(this.getSelectedShapeIds())}getSelectionScreenBounds(){const e=this.getSelectionPageBounds();if(!e)return;const{x:n,y:r}=this.pageToScreen(e.point),o=this.getZoomLevel();return new Be(n,r,e.width*o,e.height*o)}getShapesSharedRotation(e){let n=!1,r=0;for(let o=0,a=e.length;o<a;o++){const s=this.getShapePageTransform(e[o]);if(s)if(n){if(s.rotation()!==r)return 0}else n=!0,r=s.rotation()}return r}getSelectionRotation(){return this.getShapesSharedRotation(this.getSelectedShapeIds())}getShapesRotatedPageBounds(e){if(e.length===0)return;const n=this.getShapesSharedRotation(e);if(n===0)return this.getShapesPageBounds(e)??void 0;if(e.length===1){const o=this.getShapeGeometry(e[0]).bounds.clone(),a=this.getShapePageTransform(e[0]);return o.point=a.applyToPoint(o.point),o}const r=Be.FromPoints(e.flatMap(o=>{const a=this.getShapePageTransform(o);return a?a.applyToPoints(this.getShapeGeometry(o).bounds.corners):[]}).map(o=>o.rot(-n)));return r.point=r.point.rot(n),r}getSelectionRotatedPageBounds(){return this.getShapesRotatedPageBounds(this.getSelectedShapeIds())}getSelectionRotatedScreenBounds(){const e=this.getSelectionRotatedPageBounds();if(!e)return;const{x:n,y:r}=this.pageToScreen(e.point),o=this.getZoomLevel();return new Be(n,r,e.width*o,e.height*o)}getFocusedGroupId(){return this.getCurrentPageState().focusedGroupId??this.getCurrentPageId()}getFocusedGroup(){const e=this.getFocusedGroupId();return e?this.getShape(e):void 0}setFocusedGroup(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null;if(n!==null){const r=this.getShape(n);if(!r)throw Error(`Editor.setFocusedGroup: Shape with id ${n} does not exist`);if(!this.isShapeOfType(r,"group"))throw Error(`Editor.setFocusedGroup: Cannot set focused group to shape of type ${r.type}`)}return n===this.getFocusedGroupId()?this:this.run(()=>{this.store.update(this.getCurrentPageState().id,r=>({...r,focusedGroupId:n}))},{history:"record-preserveRedoStack"})}popFocusedGroupId(){const e=this.getFocusedGroup();if(e){const n=this.findShapeAncestor(e,r=>this.isShapeOfType(r,"group"));this.setFocusedGroup((n==null?void 0:n.id)??null),this.select(e.id)}else this.setFocusedGroup(null),this.selectNone();return this}getEditingShapeId(){return this.getCurrentPageState().editingShapeId}getEditingShape(){const e=this.getEditingShapeId();return e?this.getShape(e):void 0}setEditingShape(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null;this.setRichTextEditor(null);const r=this.getEditingShapeId();if(n!==r){if(n){const o=this.getShape(n);if(o&&this.getShapeUtil(o).canEdit(o))return this.run(()=>{var a,s,i,l;if(this._updateCurrentPageState({editingShapeId:n}),r){const c=this.getShape(r);c&&((s=(a=this.getShapeUtil(c)).onEditEnd)==null||s.call(a,c))}(l=(i=this.getShapeUtil(o)).onEditStart)==null||l.call(i,o)},{history:"ignore"}),this}this.run(()=>{var o,a;if(this._updateCurrentPageState({editingShapeId:null}),this._currentRichTextEditor.set(null),r){const s=this.getShape(r);s&&((a=(o=this.getShapeUtil(s)).onEditEnd)==null||a.call(o,s))}},{history:"ignore"})}return this}getRichTextEditor(){return this._currentRichTextEditor.get()}setRichTextEditor(e){return this._currentRichTextEditor.set(e),this}getHoveredShapeId(){return this.getCurrentPageState().hoveredShapeId}getHoveredShape(){const e=this.getHoveredShapeId();return e?this.getShape(e):void 0}setHoveredShape(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null;return n===this.getHoveredShapeId()?this:(this.run(()=>{this.updateCurrentPageState({hoveredShapeId:n})},{history:"ignore"}),this)}getHintingShapeIds(){return this.getCurrentPageState().hintingShapeIds}getHintingShape(){const e=this.getHintingShapeIds();return Dt(e.map(n=>this.getShape(n)))}setHintingShapes(e){const n=typeof e[0]=="string"?e:e.map(r=>r.id);return this.run(()=>{this._updateCurrentPageState({hintingShapeIds:jD(n)})},{history:"ignore"}),this}getErasingShapeIds(){return this.getCurrentPageState().erasingShapeIds}getErasingShapes(){const e=this.getErasingShapeIds();return Dt(e.map(n=>this.getShape(n)))}setErasingShapes(e){const n=typeof e[0]=="string"?e:e.map(o=>o.id);n.sort();const r=this.getErasingShapeIds();return this.run(()=>{if(n.length===r.length){for(let o=0;o<n.length;o++)if(n[o]!==r[o]){this._updateCurrentPageState({erasingShapeIds:n});break}}else this._updateCurrentPageState({erasingShapeIds:n})},{history:"ignore"}),this}getCroppingShapeId(){return this.getCurrentPageState().croppingShapeId}setCroppingShape(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null;return n!==this.getCroppingShapeId()&&this.run(()=>{if(!n)this.updateCurrentPageState({croppingShapeId:null});else{const r=this.getShape(n),o=this.getShapeUtil(r);r&&o.canCrop(r)&&this.updateCurrentPageState({croppingShapeId:n})}},{history:"ignore"}),this}getTextOptions(){return ra(this._textOptions.get(),"Cannot use text without setting textOptions")}_unsafe_getCameraId(){return jc.createId(this.getCurrentPageId())}getCamera(){const e=this.store.get(this._unsafe_getCameraId());if(this._isLockedOnFollowingUser.get()){const n=this.getCameraForFollowing();if(n)return{...e,...n}}return e}_getFollowingPresence(e){const n=[this.user.getId()],r=this.getCollaborators();let o=null;for(;e&&!n.includes(e);)o=r.find(a=>a.userId===e)??null,e=(o==null?void 0:o.followingUserId)??null,o&&n.push(o.userId);return o}getViewportPageBoundsForFollowing(){const e=this._getFollowingPresence(this.getInstanceState().followingUserId);if(!(e!=null&&e.camera)||!(e!=null&&e.screenBounds))return null;const{w:n,h:r}=e.screenBounds,{x:o,y:a,z:s}=e.camera,i=new Be(-o,-a,n/s,r/s),l=this.getViewportScreenBounds().clone(),c=l.width/l.height;return l.width=i.width,l.height=l.width/c,l.height<i.height&&(l.height=i.height,l.width=l.height*c),l.center=i.center,l}getCameraForFollowing(){const e=this.getViewportPageBoundsForFollowing();return e?{x:-e.x,y:-e.y,z:this.getViewportScreenBounds().w/e.width}:null}getZoomLevel(){return this.getCamera().z}getInitialZoom(){const e=this.getCameraOptions();if(!e.constraints||e.constraints.initialZoom==="default")return 1;const{zx:n,zy:r}=k9(this,e);switch(e.constraints.initialZoom){case"fit-min":return Math.max(n,r);case"fit-max":return Math.min(n,r);case"fit-x":return n;case"fit-y":return r;case"fit-min-100":return Math.min(1,Math.max(n,r));case"fit-max-100":return Math.min(1,Math.min(n,r));case"fit-x-100":return Math.min(1,n);case"fit-y-100":return Math.min(1,r);default:throw wn(e.constraints.initialZoom)}}getBaseZoom(){const e=this.getCameraOptions();if(!e.constraints||e.constraints.baseZoom==="default")return 1;const{zx:n,zy:r}=k9(this,e);switch(e.constraints.baseZoom){case"fit-min":return Math.max(n,r);case"fit-max":return Math.min(n,r);case"fit-x":return n;case"fit-y":return r;case"fit-min-100":return Math.min(1,Math.max(n,r));case"fit-max-100":return Math.min(1,Math.min(n,r));case"fit-x-100":return Math.min(1,n);case"fit-y-100":return Math.min(1,r);default:throw wn(e.constraints.baseZoom)}}getCameraOptions(){return this._cameraOptions.get()}setCameraOptions(e){var r;const n=bo({...this._cameraOptions.__unsafe__getWithoutCapture(),...e});return((r=n.zoomSteps)==null?void 0:r.length)<1&&(n.zoomSteps=[1]),this._cameraOptions.set(n),this.setCamera(this.getCamera()),this}getConstrainedCamera(e,n){const r=this.getCamera();let{x:o,y:a,z:s=r.z}=e;if(!(n!=null&&n.force)){const i=this.getCameraOptions(),l=i.zoomSteps[0],c=Ca(i.zoomSteps),d=this.getViewportScreenBounds();if(i.constraints){const{constraints:u}=i,m=Math.min(u.padding.y,d.w/2),h=Math.min(u.padding.x,d.h/2),y=Be.From(i.constraints.bounds),v=(d.w-h*2)/y.w,x=(d.h-m*2)/y.h,S=this.getBaseZoom(),T=c*S,C=l*S;if(n!=null&&n.reset&&(s=this.getInitialZoom()),s<C||s>T){const{x:z,y:H,z:j}=r,q=-z+d.w/j/2,U=-H+d.h/j/2;s=Lt(s,C,T);const Y=-z+d.w/s/2,X=-H+d.h/s/2;o=z+Y-q,a=H+X-U}const _=h/s-y.x,I=m/s-y.y,P=(d.w-h*2)/s-y.w,M=(d.h-m*2)/s-y.h,D=_+P*u.origin.x,F=I+M*u.origin.y,B=typeof u.behavior=="string"?u.behavior:u.behavior.x,V=typeof u.behavior=="string"?u.behavior:u.behavior.y;if(n!=null&&n.reset)o=D,a=F;else{switch(B){case"fixed":{o=D;break}case"contain":{s<v?o=D:o=Lt(o,_+P,_);break}case"inside":{s<v?o=Lt(o,_,(d.w-h)/s-y.w):o=Lt(o,_+P,_);break}case"outside":{o=Lt(o,h/s-y.w,(d.w-h)/s);break}case"free":break;default:throw wn(B)}switch(V){case"fixed":{a=F;break}case"contain":{s<x?a=F:a=Lt(a,I+M,I);break}case"inside":{s<x?a=Lt(a,I,(d.h-m)/s-y.h):a=Lt(a,I+M,I);break}case"outside":{a=Lt(a,m/s-y.h,(d.h-m)/s);break}case"free":break;default:throw wn(V)}}}else if(s>c||s<l){const{x:u,y:m,z:h}=r;s=Lt(s,l,c),o=u+(-u+d.w/s/2)-(-u+d.w/h/2),a=m+(-m+d.h/s/2)-(-m+d.h/h/2)}}return{x:o,y:a,z:s}}_setCamera(e,n){const r=this.getCamera(),{x:o,y:a,z:s}=this.getConstrainedCamera(e,n);return r.x===o&&r.y===a&&r.z===s?this:(Ui(()=>{const i={...r,x:o,y:a,z:s};this.run(()=>{this.store.put([i])},{history:"ignore"});const{currentScreenPoint:l,currentPagePoint:c}=this.inputs;(l.x/s-o!==c.x||l.y/s-a!==c.y)&&this.updatePointer({immediate:n==null?void 0:n.immediate,pointerId:n9.CAMERA_MOVE}),this._tickCameraState()}),this)}setCamera(e,n){const{isLocked:r}=this._cameraOptions.__unsafe__getWithoutCapture();if(r&&!(n!=null&&n.force))return this;this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser();const o=R.Cast(e);Number.isFinite(o.x)||(o.x=0),Number.isFinite(o.y)||(o.y=0),(o.z===void 0||!Number.isFinite(o.z))&&(e.z=this.getZoomLevel());const a=this.getConstrainedCamera(o,n);if(n!=null&&n.animation){const{width:s,height:i}=this.getViewportScreenBounds();this._animateToViewport(new Be(-a.x,-a.y,s/a.z,i/a.z),n)}else this._setCamera(a,{...n,force:!0});return this}centerOnPoint(e,n){const{isLocked:r}=this.getCameraOptions();if(r&&!(n!=null&&n.force))return this;const{width:o,height:a}=this.getViewportPageBounds();return this.setCamera(new R(-(e.x-o/2),-(e.y-a/2),this.getCamera().z),n),this}zoomToFit(e){const n=[...this.getCurrentPageShapeIds()];if(n.length<=0)return this;const r=Be.Common(Dt(n.map(o=>this.getShapePageBounds(o))));return this.zoomToBounds(r,e),this}resetZoom(e=this.getViewportScreenCenter(),n){const{isLocked:r,constraints:o}=this.getCameraOptions();if(r&&!(n!=null&&n.force))return this;const a=this.getCamera(),{x:s,y:i,z:l}=a,{x:c,y:d}=e;let u=1;if(o){const m=this.getInitialZoom();l!==m&&(u=m)}return this.setCamera(new R(s+(c/u-c)-(c/l-c),i+(d/u-d)-(d/l-d),u),n),this}zoomIn(e=this.getViewportScreenCenter(),n){const{isLocked:r}=this.getCameraOptions();if(r&&!(n!=null&&n.force))return this;const{x:o,y:a,z:s}=this.getCamera(),{zoomSteps:i}=this.getCameraOptions();if(i!==null&&i.length>1){const l=this.getBaseZoom();let c=Ca(i)*l;for(let d=1;d<i.length;d++){const u=i[d-1]*l,m=i[d]*l;if(!(m-s<=(m-u)/2)){c=m;break}}this.setCamera(new R(o+(e.x/c-e.x)-(e.x/s-e.x),a+(e.y/c-e.y)-(e.y/s-e.y),c),n)}return this}zoomOut(e=this.getViewportScreenCenter(),n){const{isLocked:r}=this.getCameraOptions();if(r&&!(n!=null&&n.force))return this;const{zoomSteps:o}=this.getCameraOptions();if(o!==null&&o.length>1){const a=this.getBaseZoom(),{x:s,y:i,z:l}=this.getCamera();let c=o[0]*a;for(let d=o.length-1;d>0;d--){const u=o[d-1]*a,m=o[d]*a;if(!(m-l>=(m-u)/2)){c=u;break}}this.setCamera(new R(s+(e.x/c-e.x)-(e.x/l-e.x),i+(e.y/c-e.y)-(e.y/l-e.y),c),n)}return this}zoomToSelection(e){const{isLocked:n}=this.getCameraOptions();if(n&&!(e!=null&&e.force))return this;const r=this.getSelectionPageBounds();return r&&this.zoomToBounds(r,{targetZoom:Math.max(1,this.getZoomLevel()),...e}),this}zoomToSelectionIfOffscreen(e=16,n){const r=this.getSelectionPageBounds(),o=this.getViewportPageBounds();if(r&&!o.contains(r)){const a=r.clone().expandBy(e/this.getZoomLevel()).expand(o),s=o.clone().translate({x:(a.center.x-o.center.x)*2,y:(a.center.y-o.center.y)*2});this.zoomToBounds(s,n)}}zoomToBounds(e,n){const r=this._cameraOptions.__unsafe__getWithoutCapture();if(r.isLocked&&!(n!=null&&n.force))return this;const o=this.getViewportScreenBounds(),a=(n==null?void 0:n.inset)??Math.min(b2e,o.width*.28),s=this.getBaseZoom(),i=r.zoomSteps[0],l=Ca(r.zoomSteps);let c=Lt(Math.min((o.width-a)/e.w,(o.height-a)/e.h),i*s,l*s);return(n==null?void 0:n.targetZoom)!==void 0&&(c=Math.min(n.targetZoom,c)),this.setCamera(new R(-e.x+(o.width-e.w*c)/2/c,-e.y+(o.height-e.h*c)/2/c,c),n),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_animateViewport(e){if(!this._viewportAnimation)return;this._viewportAnimation.elapsed+=e;const{elapsed:n,easing:r,duration:o,start:a,end:s}=this._viewportAnimation;if(n>o){this.off("tick",this._animateViewport),this._viewportAnimation=null,this._setCamera(new R(-s.x,-s.y,this.getViewportScreenBounds().width/s.width));return}const i=o-n,l=r(1-i/o),c=a.minX+(s.minX-a.minX)*l,d=a.minY+(s.minY-a.minY)*l,u=a.maxX+(s.maxX-a.maxX)*l;this._setCamera(new R(-c,-d,this.getViewportScreenBounds().width/(u-c)),{force:!0})}_animateToViewport(e,n={animation:WI}){const{animation:r,...o}=n;if(!r)return;const{duration:a=0,easing:s=Ja.easeInOutCubic}=r,i=this.user.getAnimationSpeed(),l=this.getViewportPageBounds();return this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),a===0||i===0?this._setCamera(new R(-e.x,-e.y,this.getViewportScreenBounds().width/e.width),{...o}):(this._viewportAnimation={elapsed:0,duration:a/i,easing:s,start:l.clone(),end:e.clone()},this.once("stop-camera-animation",()=>{this.off("tick",this._animateViewport),this._viewportAnimation=null}),this.on("tick",this._animateViewport),this)}slideCamera(e={}){const{isLocked:n}=this.getCameraOptions();if(n&&!(e!=null&&e.force))return this;if(this.user.getAnimationSpeed()===0)return this;this.stopCameraAnimation();const{speed:o,friction:a=this.options.cameraSlideFriction,direction:s,speedThreshold:i=.01}=e;let l=Math.min(o,1);const c=()=>{this.off("tick",d),this.off("stop-camera-animation",c)};this.once("stop-camera-animation",c);const d=u=>{const{x:m,y:h,z:y}=this.getCamera(),v=R.Mul(s,l*u/y);l*=1-a,l<i?c():this._setCamera(new R(m+v.x,h+v.y,y))};return this.on("tick",d),this}zoomToUser(e,n={animation:{duration:500}}){const r=this.getCollaborators().find(a=>a.userId===e);if(!r)return this;const o=r.cursor;return o?(this.run(()=>{this.getInstanceState().followingUserId!==null&&this.stopFollowingUser();const a=r.currentPageId===this.getCurrentPageId();a||this.setCurrentPage(r.currentPageId),n&&n.animation&&!a&&(n.animation=void 0),this.centerOnPoint(o,n);const{highlightedUserIds:s}=this.getInstanceState();this.updateInstanceState({highlightedUserIds:[...s,e]}),this.timers.setTimeout(()=>{const i=[...this.getInstanceState().highlightedUserIds],l=i.indexOf(e);l<0||(i.splice(l,1),this.updateInstanceState({highlightedUserIds:i}))},this.options.collaboratorIdleTimeoutMs)}),this):this}updateViewportScreenBounds(e,n=!1){if(e instanceof Be)e.width=Math.max(e.width,1),e.height=Math.max(e.height,1);else{const i=e.getBoundingClientRect();e=new Be(i.left||i.x,i.top||i.y,Math.max(i.width,1),Math.max(i.height,1))}const r=[e.minY!==0,!Eo(document.body.scrollWidth,e.maxX,1),!Eo(document.body.scrollHeight,e.maxY,1),e.minX!==0],{_willSetInitialBounds:o}=this;this._willSetInitialBounds=!1;const{screenBounds:a,insets:s}=this.getInstanceState();if(e.equals(a)&&r.every((i,l)=>i===s[l]))return this;if(o)this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this.setCamera(this.getCamera());else if(n&&!this.getInstanceState().followingUserId){const i=this.getViewportPageBounds().center;this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this.centerOnPoint(i)}else this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this._setCamera(R.From({...this.getCamera()}));return this._tickCameraState(),this}getViewportScreenBounds(){const{x:e,y:n,w:r,h:o}=this.getInstanceState().screenBounds;return new Be(e,n,r,o)}getViewportScreenCenter(){const e=this.getViewportScreenBounds();return new R(e.w/2,e.h/2)}getViewportPageBounds(){const{w:e,h:n}=this.getViewportScreenBounds(),{x:r,y:o,z:a}=this.getCamera();return new Be(-r,-o,e/a,n/a)}screenToPage(e){const{screenBounds:n}=this.store.unsafeGetWithoutCapture(ys),{x:r,y:o,z:a=1}=this.getCamera();return new R((e.x-n.x)/a-r,(e.y-n.y)/a-o,e.z??.5)}pageToScreen(e){const{screenBounds:n}=this.store.unsafeGetWithoutCapture(ys),{x:r,y:o,z:a=1}=this.getCamera();return new R((e.x+r)*a+n.x,(e.y+o)*a+n.y,e.z??.5)}pageToViewport(e){const{x:n,y:r,z:o=1}=this.getCamera();return new R((e.x+n)*o,(e.y+r)*o,e.z??.5)}_getCollaboratorsQuery(){return this.store.query.records("instance_presence",()=>({userId:{neq:this.user.getId()}}))}getCollaborators(){const e=this._getCollaboratorsQuery().get();return e.length?[...new Set(e.map(r=>r.userId))].sort().map(r=>dwe(e.filter(a=>a.userId===r),a=>a.lastActivityTimestamp??0)):io}getCollaboratorsOnCurrentPage(){const e=this.getCurrentPageId();return this.getCollaborators().filter(n=>n.currentPageId===e)}startFollowingUser(e){if(this.stopFollowingUser(),this.user.getId()||console.warn("You should set the userId for the current instance before following a user"),!this._getFollowingPresence(e))return this;const o=ke("latestLeaderPresence",()=>this._getFollowingPresence(e));return Ui(()=>{this.updateInstanceState({followingUserId:e},{history:"ignore"});const a=si("update current page",()=>{const l=o.get();if(!l){this.stopFollowingUser();return}l.currentPageId!==this.getCurrentPageId()&&this.getPage(l.currentPageId)&&this.run(()=>{this.store.put([{...this.getInstanceState(),currentPageId:l.currentPageId}]),this._isLockedOnFollowingUser.set(!0)},{history:"ignore"})}),s=()=>{a(),this._isLockedOnFollowingUser.set(!1),this.off("frame",i),this.off("stop-following",s)},i=()=>{if(!o.get()){this.stopFollowingUser();return}if(this._isLockedOnFollowingUser.get())return;const c=this.user.getAnimationSpeed();if(c===0){this._isLockedOnFollowingUser.set(!0);return}const d=this.getViewportPageBoundsForFollowing();if(!d){this.stopFollowingUser();return}const u=this.getViewportPageBounds(),m=Math.abs(d.minX-u.minX)+Math.abs(d.maxX-u.maxX),h=Math.abs(d.minY-u.minY)+Math.abs(d.maxY-u.maxY);if(m<this.options.followChaseViewportSnap&&h<this.options.followChaseViewportSnap){this._isLockedOnFollowingUser.set(!0);return}const y=Lt(c*.5,.1,.8),v=new Be(qt(u.minX,d.minX,y),qt(u.minY,d.minY,y),qt(u.width,d.width,y),qt(u.height,d.height,y)),x=new R(-v.x,-v.y,this.getViewportScreenBounds().width/v.width);this.stopCameraAnimation(),this._setCamera(x)};this.once("stop-following",s),this.addListener("frame",i),i()}),this}stopFollowingUser(){return this.run(()=>{this.store.put([this.getCamera()]),this._isLockedOnFollowingUser.set(!1),this.updateInstanceState({followingUserId:null}),this.emit("stop-following")},{history:"ignore"}),this}getUnorderedRenderingShapes(e){const n=[];let r=this.options.maxShapesPerPage*2,o=this.options.maxShapesPerPage;const a=this.getErasingShapeIds(),s=(l,c,d)=>{const u=this.getShape(l);if(!u)return;if(this.isShapeHidden(u)){const x=d||a.includes(l);for(const S of this.getSortedChildIdsForParent(l))s(S,c,x);return}c*=u.opacity;let m=!1;const h=this.getShapeUtil(u);e&&(m=!d&&a.includes(l),m&&(c*=.32)),n.push({id:l,shape:u,util:h,index:r,backgroundIndex:o,opacity:c}),r+=1,o+=1;const y=this.getSortedChildIdsForParent(l);if(!y.length)return;let v=null;h.providesBackgroundForChildren(u)&&(v=o,o=r,r+=this.options.maxShapesPerPage);for(const x of y)s(x,c,d||m);v!==null&&(o=v)},i=e?[this.getCurrentPage()]:this.getPages();for(const l of i)for(const c of this.getSortedChildIdsForParent(l.id))s(c,1,!1);return n}_decayCameraStateTimeout(e){this._cameraStateTimeoutRemaining-=e,!(this._cameraStateTimeoutRemaining>0)&&(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"))}_tickCameraState(){this._cameraStateTimeoutRemaining=this.options.cameraMovingTimeoutMs,this._cameraState.__unsafe__getWithoutCapture()==="idle"&&(this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout))}getCameraState(){return this._cameraState.get()}getRenderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(Dwe)}_getAllPagesQuery(){return this.store.query.records("page")}getPages(){return Array.from(this._getAllPagesQuery().get()).sort(oa)}getCurrentPage(){return this.getPage(this.getCurrentPageId())}getCurrentPageId(){return this.getInstanceState().currentPageId}getPage(e){return this.store.get(typeof e=="string"?e:e.id)}getCurrentPageShapeIds(){return this._currentPageShapeIds.get()}getCurrentPageShapeIdsSorted(){return Array.from(this.getCurrentPageShapeIds()).sort()}getPageShapeIds(e){const n=typeof e=="string"?e:e.id,r=this.store.query.exec("shape",{parentId:{eq:n}});return this.getShapeAndDescendantIds(r.map(o=>o.id))}setCurrentPage(e){const n=typeof e=="string"?e:e.id;return this.store.has(n)?(this.stopFollowingUser(),this.complete(),this.run(()=>{this.store.put([{...this.getInstanceState(),currentPageId:n}]),this.setCamera(this.getCamera())},{history:"record-preserveRedoStack"})):(console.error("Tried to set the current page id to a page that doesn't exist."),this)}updatePage(e){return this.getIsReadonly()?this:this.getPage(e.id)?this.run(()=>this.store.update(e.id,r=>({...r,...e}))):this}createPage(e){return this.run(()=>{if(this.getIsReadonly()||this.getPages().length>=this.options.maxPages)return;const n=this.getPages(),r=sIe(e.name??"Page 1",n.map(s=>s.name));let o=e.index;(!o||n.some(s=>s.index===o))&&(o=_l(n[n.length-1].index));const a=Cs.create({meta:{},...e,name:r,index:o});this.store.put([a])}),this}deletePage(e){const n=typeof e=="string"?e:e.id;return this.run(()=>{if(this.getIsReadonly())return;const r=this.getPages();if(r.length===1)return;const o=this.getPage(n);if(!o)return;if(n===this.getCurrentPageId()){const s=r.findIndex(l=>l.id===n),i=r[s-1]??r[s+1];this.setCurrentPage(i.id)}const a=this.getSortedChildIdsForParent(o.id);this.deleteShapes(a),this.store.remove([o.id])},{ignoreShapeLock:!0}),this}duplicatePage(e,n=Cs.createId()){if(this.getPages().length>=this.options.maxPages)return this;const r=typeof e=="string"?e:e.id,o=this.getPage(r);if(!o)return this;const a={...this.getCamera()},s=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(o.id));return this.run(()=>{var c;const i=this.getPages(),l=Vh(o.index,(c=i[i.indexOf(o)+1])==null?void 0:c.index);if(this.createPage({name:o.name+" Copy",id:n,index:l}),this.setCurrentPage(n),this.setCamera(a),s)return this.putContentOntoCurrentPage(s)}),this}renamePage(e,n){const r=typeof e=="string"?e:e.id;return this.getIsReadonly()?this:(this.updatePage({id:r,name:n}),this)}_getAllAssetsQuery(){return this.store.query.records("asset")}getAssets(){return this._getAllAssetsQuery().get()}createAssets(e){return this.getIsReadonly()?this:e.length<=0?this:(this.run(()=>this.store.put(e),{history:"ignore"}),this)}updateAssets(e){return this.getIsReadonly()?this:e.length<=0?this:(this.run(()=>{this.store.put(e.map(n=>({...this.store.get(n.id),...n})))},{history:"ignore"}),this)}deleteAssets(e){if(this.getIsReadonly())return this;const n=typeof e[0]=="string"?e:e.map(r=>r.id);return n.length<=0?this:(this.run(()=>{var r,o;(o=(r=this.store.props.assets).remove)==null||o.call(r,n),this.store.remove(n)},{history:"ignore"}),this)}getAsset(e){return this.store.get(typeof e=="string"?e:e.id)}async resolveAssetUrl(e,n){if(!e)return null;const r=this.getAsset(e);if(!r)return null;const{screenScale:o=1,shouldResolveToOriginal:a=!1,dpr:s=this.getInstanceState().devicePixelRatio}=n,l=(d=>Math.pow(2,Math.ceil(Math.log2(d))))(o),c="connection"in navigator?navigator.connection.effectiveType:null;return await this.store.props.assets.resolve(r,{screenScale:o||1,steppedScreenScale:l,dpr:s,networkEffectiveType:c,shouldResolveToOriginal:a})}async uploadAsset(e,n,r){return await this.store.props.assets.upload(e,n,r)}getShapeGeometry(e,n){const r=(n==null?void 0:n.context)??"none";return this._shapeGeometryCaches[r]||(this._shapeGeometryCaches[r]=this.store.createComputedCache("bounds",o=>(this.fonts.trackFontsForShape(o),this.getShapeUtil(o).getGeometry(o,n)),{areRecordsEqual:wM})),this._shapeGeometryCaches[r].get(typeof e=="string"?e:e.id)}_getShapeHandlesCache(){return this.store.createComputedCache("handles",e=>{var n,r;return(r=(n=this.getShapeUtil(e)).getHandles)==null?void 0:r.call(n,e)},{areRecordsEqual:wM})}getShapeHandles(e){return this._getShapeHandlesCache().get(typeof e=="string"?e:e.id)}getShapeLocalTransform(e){const n=typeof e=="string"?e:e.id,r=this.getShape(n);if(!r)throw Error("Editor.getTransform: shape not found");return De.Identity().translate(r.x,r.y).rotate(r.rotation)}_getShapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",e=>{if(Ea(e.parentId))return this.getShapeLocalTransform(e);const n=this._getShapePageTransformCache().get(e.parentId)??De.Identity();return De.Compose(n,this.getShapeLocalTransform(e))})}getShapeParentTransform(e){const n=typeof e=="string"?e:e.id,r=this.getShape(n);return!r||Ea(r.parentId)?De.Identity():this._getShapePageTransformCache().get(r.parentId)??De.Identity()}getShapePageTransform(e){const n=typeof e=="string"?e:e.id;return this._getShapePageTransformCache().get(n)??De.Identity()}_getShapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",e=>{const n=this.getShapePageTransform(e);if(n)return Be.FromPoints(n.applyToPoints(this.getShapeGeometry(e).boundsVertices))})}getShapePageBounds(e){return this._getShapePageBoundsCache().get(typeof e=="string"?e:e.id)}_getShapeClipPathCache(){return this.store.createComputedCache("clipPathCache",e=>{const n=this._getShapeMaskCache().get(e.id);if(!n)return;if(n.length===0)return"polygon(0px 0px, 0px 0px, 0px 0px)";const r=this._getShapePageTransformCache().get(e.id);return r?`polygon(${De.applyToPoints(De.Inverse(r),n).map(a=>`${a.x}px ${a.y}px`).join(",")})`:void 0})}getShapeClipPath(e){return this._getShapeClipPathCache().get(typeof e=="string"?e:e.id)}_getShapeMaskCache(){return this.store.createComputedCache("pageMaskCache",e=>{var o,a;if(Ea(e.parentId))return;const n=[];for(const s of this.getShapeAncestors(e.id)){const i=this.getShapeUtil(s),l=(o=i.getClipPath)==null?void 0:o.call(i,s);if(!l||((a=i.shouldClipChild)==null?void 0:a.call(i,e))===!1)continue;const c=this.getShapePageTransform(s.id);n.push(c.applyToPoints(l))}return n.length===0?void 0:n.reduce((s,i)=>{const l=NE(s,i);return l?l.map(R.Cast):[]})})}getShapeMask(e){return this._getShapeMaskCache().get(typeof e=="string"?e:e.id)}getShapeMaskedPageBounds(e){return typeof e!="string"&&(e=e.id),this._getShapeMaskedPageBoundsCache().get(e)}_getShapeMaskedPageBoundsCache(){return this.store.createComputedCache("shapeMaskedPageBoundsCache",e=>{const n=this._getShapePageBoundsCache().get(e.id);if(!n)return;const r=this._getShapeMaskCache().get(e.id);if(r){if(r.length===0)return;const{corners:o}=n;if(o.every((s,i)=>s&&R.Equals(s,r[i])))return n.clone();const a=NE(r,o);return a?Be.FromPoints(a):void 0}return n})}getShapeAncestors(e,n=[]){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)return n;const a=o.parentId;if(Ea(a))return n.reverse(),n;const s=this.store.get(a);return s?(n.push(s),this.getShapeAncestors(s,n)):n}findShapeAncestor(e,n){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)return;const a=o.parentId;if(Ea(a))return;const s=this.getShape(a);if(s)return n(s)?s:this.findShapeAncestor(s,n)}hasAncestor(e,n){const r=typeof e=="string"?e:e==null?void 0:e.id,o=r&&this.getShape(r);return o?o.parentId===n?!0:this.hasAncestor(this.getShapeParent(o),n):!1}findCommonAncestor(e,n){var l;if(e.length===0)return;const r=typeof e[0]=="string"?e:e.map(c=>c.id),o=Dt(r.map(c=>this.getShape(c)));if(o.length===1){const c=o[0].parentId;return Ea(c)?void 0:n?(l=this.findShapeAncestor(o[0],n))==null?void 0:l.id:c}const[a,...s]=o;let i=this.getShapeParent(a);for(;i;){if(n&&!n(i)){i=this.getShapeParent(i);continue}if(s.every(c=>this.hasAncestor(c,i.id)))return i.id;i=this.getShapeParent(i)}}isShapeOrAncestorLocked(e){const n=e&&this.getShape(e);return n===void 0?!1:n.isLocked?!0:this.isShapeOrAncestorLocked(this.getShapeParent(n))}getNotVisibleShapes(){return this._notVisibleShapes.get()}getCulledShapes(){const e=this.getNotVisibleShapes(),n=this.getSelectedShapeIds(),r=this.getEditingShapeId(),o=new Set(e);return r&&o.delete(r),n.forEach(a=>{o.delete(a)}),o}getCurrentPageBounds(){let e;return this.getCurrentPageShapeIdsSorted().forEach(n=>{const r=this.getShapeMaskedPageBounds(n);r&&(e?e=e.expand(r):e=r.clone())}),e}getSelectedShapeAtPoint(e){const n=this.getSelectedShapeIds();return this.getCurrentPageShapesSorted().filter(r=>r.type!=="group"&&n.includes(r.id)).reverse().find(r=>this.isPointInShape(r,e,{hitInside:!0,margin:0}))}getShapeAtPoint(e,n={}){var T;const r=this.getZoomLevel(),o=this.getViewportPageBounds(),{filter:a,margin:s=0,hitLocked:i=!1,hitLabels:l=!1,hitInside:c=!1,hitFrameInside:d=!1}=n,[u,m]=Array.isArray(s)?s:[s,s];let h=1/0,y=null,v=1/0,x=null;const S=(n.renderingOnly?this.getCurrentPageRenderingShapesSorted():this.getCurrentPageShapesSorted()).filter(C=>{if(C.isLocked&&!i||this.isShapeHidden(C)||this.isShapeOfType(C,"group"))return!1;const _=this.getShapeMask(C);return!(_&&!Ss(e,_)||a&&!a(C))});for(let C=S.length-1;C>=0;C--){const _=S[C],I=this.getShapeGeometry(_),P=I instanceof pi,M=this.getPointInShapeSpace(_,e);if(this.isShapeOfType(_,"frame")||(this.isShapeOfType(_,"note")||this.isShapeOfType(_,"arrow")||this.isShapeOfType(_,"geo")&&_.props.fill==="none")&&((T=this.getShapeUtil(_).getText(_))!=null&&T.trim())){for(const F of I.children)if(F.isLabel&&F.isPointInBounds(M))return _}if(this.isShapeOfType(_,"frame")){const F=I.distanceToPoint(M,d);if(d?F>0&&F<=m||F<=0&&F>-u:F>0&&F<=m)return x||_;if(I.hitTestPoint(M,0,!0))return x||y||(d?_:void 0);continue}let D;if(P){let F=1/0;for(const B of I.children){if(B.isLabel&&!l)continue;const V=B.distanceToPoint(M,c);V<F&&(F=V)}D=F}else m===0&&(I.bounds.w<1||I.bounds.h<1)||I.bounds.containsPoint(M,m)?D=I.distanceToPoint(M,c):D=1/0;if(I.isClosed){if(D<=m||c&&D<=0&&D>-u){if(I.isFilled||P&&I.children[0].isFilled)return x||_;if(this.getShapePageBounds(_).contains(o))continue;if(c?D>0&&D<=m||D<=0&&D>-u:Math.abs(D)<=Math.max(u,m))Math.abs(D)<v&&(v=Math.abs(D),x=_);else if(!x){const{area:F}=I;F<h&&(h=F,y=_)}}}else if(D<this.options.hitTestMargin/r)return _}return x||y||void 0}getShapesAtPoint(e,n={}){return this.getCurrentPageShapesSorted().filter(r=>!this.isShapeHidden(r)&&this.isPointInShape(r,e,n)).reverse()}isPointInShape(e,n,r={}){const{hitInside:o=!1,margin:a=0}=r,s=typeof e=="string"?e:e.id,i=this.getShapeMask(s);return i&&!Ss(n,i)?!1:this.getShapeGeometry(s).hitTestPoint(this.getPointInShapeSpace(e,n),a,o)}getPointInShapeSpace(e,n){const r=typeof e=="string"?e:e.id;return this._getShapePageTransformCache().get(r).clone().invert().applyToPoint(n)}getPointInParentSpace(e,n){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)return new R(0,0);if(Ea(o.parentId))return R.From(n);const a=this.getShapePageTransform(o.parentId);return a?a.clone().invert().applyToPoint(n):R.From(n)}getCurrentPageShapes(){return Array.from(this.getCurrentPageShapeIds(),e=>this.store.get(e))}getCurrentPageShapesSorted(){const e=[],n=this.getSortedChildIdsForParent(this.getCurrentPageId());for(let r=0,o=n.length;r<o;r++)sZ(this,n[r],e);return e}getCurrentPageRenderingShapesSorted(){const e=this.getCulledShapes();return this.getCurrentPageShapesSorted().filter(({id:n})=>!e.has(n)&&!this.isShapeHidden(n))}isShapeOfType(e,n){const r=typeof e=="string"?this.getShape(e):e;return r?r.type===n:!1}getShape(e){const n=typeof e=="string"?e:e.id;if(bs(n))return this.store.get(n)}getShapeParent(e){const n=typeof e=="string"?e:e==null?void 0:e.id;if(!n)return;const r=this.getShape(n);if(!(r===void 0||!bs(r.parentId)))return this.getShape(r.parentId)}getShapeNearestSibling(e,n){return n?n.parentId===e.parentId?n:this.findShapeAncestor(n,o=>o.parentId===e.parentId):void 0}isShapeInPage(e,n=this.getCurrentPageId()){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)return!1;let a=!1;if(o.parentId===n)a=!0;else{let s=this.getShape(o.parentId);e:for(;s;){if(s.parentId===n){a=!0;break e}s=this.getShape(s.parentId)}}return a}getAncestorPageId(e){const n=typeof e=="string"?e:e==null?void 0:e.id,r=n&&this.getShape(n);if(r)return Ea(r.parentId)?r.parentId:this.getAncestorPageId(this.getShape(r.parentId))}reparentShapes(e,n,r){const o=typeof e[0]=="string"?e:e.map(m=>m.id);if(o.length===0)return this;const a=[],s=Ea(n)?De.Identity():this.getShapePageTransform(n),i=s.rotation();let l=[];const c=Dt(this.getSortedChildIdsForParent(n).map(m=>this.getShape(m)));if(r){const m=c.find(h=>h.index===r);if(m){const h=c[c.indexOf(m)+1];h?l=Mf(r,h.index,o.length):l=F2(r,o.length)}else{const h=c.sort(oa).find(y=>y.index>r);h?l=Mf(r,h.index,o.length):l=F2(r,o.length)}}else{const m=c.length&&c[c.length-1];l=m?F2(m.index,o.length):d0(o.length)}const d=s.clone().invert(),u=Dt(o.map(m=>this.getShape(m))).sort(oa);return this.run(()=>{for(let m=0;m<u.length;m++){const h=u[m],y=this.getShapePageTransform(h);if(!y)continue;const v=y.point();if(!v)continue;const x=d.applyToPoint(v),S=y.rotation()-i;if(h.id===n)throw Error("Attempted to reparent a shape to itself!");a.push({id:h.id,type:h.type,parentId:n,x:x.x,y:x.y,rotation:S,index:l[m]})}this.updateShapes(a)},{ignoreShapeLock:!0}),this}getHighestIndexForParent(e){const n=typeof e=="string"?e:e.id,r=this._parentIdsToChildIds.get()[n];if(!r||r.length===0)return _l(zD);const o=this.getShape(r[r.length-1]);return _l(o.index)}getSortedChildIdsForParent(e){const n=typeof e=="string"?e:e.id,r=this._parentIdsToChildIds.get()[n];return r||io}visitDescendants(e,n){const r=this.getSortedChildIdsForParent(e);for(const o of r)n(o)!==!1&&this.visitDescendants(o,n);return this}getShapeAndDescendantIds(e){const n=new Set;for(const r of e.map(o=>this.getShape(o)).sort(oa))n.add(r.id),this.visitDescendants(r,o=>{n.add(o)});return n}getDraggingOverShape(e,n){const r=Dt(n.map(a=>this.getShape(a))).filter(a=>!a.isLocked&&!this.isShapeHidden(a)),o=this.getShapesAtPoint(e,{hitInside:!0,margin:0}).filter(a=>!n.includes(a)&&!a.isLocked&&!this.isShapeHidden(a)&&!r.includes(a));for(const a of o){const s=this.getShapeUtil(a);if(s.onDragShapesOver||s.onDragShapesIn||s.onDragShapesOut||s.onDropShapesOver)return a}}getOutermostSelectableShape(e,n){const r=typeof e=="string"?e:e.id,o=this.getShape(r);let a=o,s=o;const i=this.getFocusedGroup();for(;s;){if(this.isShapeOfType(s,"group")&&(i==null?void 0:i.id)!==s.id&&!this.hasAncestor(i,s.id)&&((n==null?void 0:n(s))??!0))a=s;else if((i==null?void 0:i.id)===s.id)break;s=this.getShapeParent(s)}return a}_getBindingsIndexCache(){const e=dIe(this);return this.store.createComputedCache("bindingsIndex",n=>e.get().get(n.id),{areRecordsEqual:()=>!0})}getBinding(e){return this.store.get(e)}getBindingsFromShape(e,n){const r=typeof e=="string"?e:e.id;return this.getBindingsInvolvingShape(r).filter(o=>o.fromId===r&&o.type===n)}getBindingsToShape(e,n){const r=typeof e=="string"?e:e.id;return this.getBindingsInvolvingShape(r).filter(o=>o.toId===r&&o.type===n)}getBindingsInvolvingShape(e,n){const r=typeof e=="string"?e:e.id,o=this._getBindingsIndexCache().get(r)??io;return n?o.filter(a=>a.type===n):o}createBindings(e){const n=[];for(const r of e){const o=this.getShape(r.fromId),a=this.getShape(r.toId);if(!o||!a||!this.canBindShapes({fromShape:o,toShape:a,binding:r}))continue;const i=this.getBindingUtil(r.type).getDefaultProps(),l=this.store.schema.types.binding.create({...r,id:r.id??wf(),props:{...i,...r.props}});n.push(l)}return this.store.put(n),this}createBinding(e){return this.createBindings([e])}updateBindings(e){const n=[];for(const r of e){if(!r)continue;const o=this.getBinding(r.id);if(!o)continue;const a=Ec(o,r);if(a===o)continue;const s=this.getShape(a.fromId),i=this.getShape(a.toId);!s||!i||this.canBindShapes({fromShape:s,toShape:i,binding:a})&&n.push(a)}return this.store.put(n),this}updateBinding(e){return this.updateBindings([e])}deleteBindings(e,{isolateShapes:n=!1}={}){const r=e.map(o=>typeof o=="string"?o:o.id);return n?this.store.atomic(()=>{var o,a;for(const s of r){const i=this.getBinding(s);if(!i)continue;const l=this.getBindingUtil(i);(o=l.onBeforeIsolateFromShape)==null||o.call(l,{binding:i,removedShape:this.getShape(i.toId)}),(a=l.onBeforeIsolateToShape)==null||a.call(l,{binding:i,removedShape:this.getShape(i.fromId)}),this.store.remove([s])}}):this.store.remove(r),this}deleteBinding(e,n){return this.deleteBindings([e],n)}canBindShapes({fromShape:e,toShape:n,binding:r}){const o=typeof e=="string"?e:e.type,a=typeof n=="string"?n:n.type,s=typeof r=="string"?r:r.type,i={fromShapeType:o,toShapeType:a,bindingType:s};return o===a?this.getShapeUtil(o).canBind(i):this.getShapeUtil(o).canBind(i)&&this.getShapeUtil(a).canBind(i)}rotateShapesBy(e,n,r){const o=typeof e[0]=="string"?e:e.map(s=>s.id);if(o.length<=0)return this;const a=OX({editor:this,ids:o});return a?(E1({delta:n,snapshot:a,editor:this,stage:"one-off",centerOverride:r==null?void 0:r.center}),this):this}getChangesToTranslateShape(e,n){var l,c,d;let r=e;const o=this.getShapeUtil(e),a=(l=o.onTranslateStart)==null?void 0:l.call(o,r);a&&(r=Ec(r,a)),r=Ec(r,{id:e.id,type:e.type,x:n.x,y:n.y});const s=(c=o.onTranslate)==null?void 0:c.call(o,e,r);s&&(r=Ec(r,s));const i=(d=o.onTranslateEnd)==null?void 0:d.call(o,e,r);return i&&(r=Ec(r,i)),r}nudgeShapes(e,n){const r=typeof e[0]=="string"?e:e.map(a=>a.id);if(r.length<=0)return this;const o=[];for(const a of r){const s=this.getShape(a),i=R.From(n),l=this.getShapeParentTransform(s);l&&i.rot(-l.rotation()),o.push(this.getChangesToTranslateShape(s,i.add(s)))}return this.updateShapes(o),this}duplicateShapes(e,n){return this.run(()=>{const r=typeof e[0]=="string"?e:e.map(m=>m.id),o=this._shouldIgnoreShapeLock?r:this._getUnlockedShapeIds(r);if(o.length<=0)return this;const a=new Set(o),s=this.getShapeAndDescendantIds(o),i=[...s].reverse(),l=new Map;for(const m of s)l.set(m,lr());const{shapesToCreateWithOriginals:c,bindingsToCreate:d}=_9(this,s,m=>{const h=[];for(const v of m){const x=this.getBinding(v);if(!x)continue;const S=wf();h.push({...x,id:S,fromId:ra(l.get(x.fromId)),toId:ra(l.get(x.toId))})}const y=[];for(const v of i){const x=ra(l.get(v)),S=this.getShape(v);if(!S)continue;let T=0,C=0;if(n&&a.has(v)){const _=this.getShapeParentTransform(S),I=new R(n.x,n.y).rot(-_.rotation());T=I.x,C=I.y}y.push({shape:{...S,id:x,x:S.x+T,y:S.y+C,index:"a1",parentId:l.get(S.parentId)??S.parentId},originalShape:S})}return{shapesToCreateWithOriginals:y,bindingsToCreate:h}});c.forEach(({shape:m,originalShape:h})=>{const y=h.parentId,v=this.getSortedChildIdsForParent(y),x=v.indexOf(h.id),S=v[x+1],T=S?this.getShape(S):void 0,C=Vh(h.index,T==null?void 0:T.index);m.index=C});const u=c.map(({shape:m})=>m);if(!this.canCreateShapes(u)){xS(this);return}if(this.createShapes(u),this.createBindings(d),this.setSelectedShapes(Dt(o.map(m=>{const h=l.get(m);return!h||!this.getShape(h)?null:h}))),n!==void 0){const m=this.getSelectionPageBounds(),h=this.getViewportPageBounds();m&&!h.contains(m)&&this.centerOnPoint(m.center,{animation:{duration:this.options.animationMediumMs}})}}),this}moveShapesToPage(e,n){const r=typeof e[0]=="string"?e:e.map(i=>i.id);if(r.length===0)return this;if(this.getIsReadonly())return this;const o=this.getCurrentPageId();if(n===o)return this;if(!this.store.has(n))return this;const a=this.getContentFromCurrentPage(r);if(!a)return this;if(this.getPageShapeIds(n).size+a.shapes.length>this.options.maxShapesPerPage)return xS(this,n),this;const s=this.getCamera().z;return this.run(()=>{this.deleteShapes(r),this.setCurrentPage(n),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(a,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.getCamera(),z:s}),this.centerOnPoint(this.getSelectionRotatedPageBounds().center)}),this}toggleLock(e){const n=typeof e[0]=="string"?e:e.map(s=>s.id);if(this.getIsReadonly()||n.length===0)return this;let r=!0,o=!0;const a=[];for(const s of n){const i=this.getShape(s);i&&(a.push(i),i.isLocked?o=!1:r=!1)}return this.run(()=>{o?(this.updateShapes(a.map(s=>({id:s.id,type:s.type,isLocked:!0}))),this.setSelectedShapes([])):r?this.updateShapes(a.map(s=>({id:s.id,type:s.type,isLocked:!1}))):this.updateShapes(a.map(s=>({id:s.id,type:s.type,isLocked:!0})))}),this}sendToBack(e){const n=typeof e[0]=="string"?e:e.map(o=>o.id),r=yS(this,"toBack",n,{considerAllShapes:!0});return r&&this.updateShapes(r),this}sendBackward(e,n={}){const r=typeof e[0]=="string"?e:e.map(a=>a.id),o=yS(this,"backward",r,n);return o&&this.updateShapes(o),this}bringForward(e,n={}){const r=typeof e[0]=="string"?e:e.map(a=>a.id),o=yS(this,"forward",r,n);return o&&this.updateShapes(o),this}bringToFront(e){const n=typeof e[0]=="string"?e:e.map(o=>o.id),r=yS(this,"toFront",n);return r&&this.updateShapes(r),this}collectShapesViaArrowBindings(e){const{initialShapes:n,resultShapes:r,resultBounds:o,bindings:a,visited:s}=e;for(const i of a)for(const l of[i.fromId,i.toId])if(!s.has(l)){const c=n.find(d=>d.id===l);if(c&&!s.has(c.id)){s.add(c.id);const d=this.getShapePageBounds(c);if(!d)continue;r.push(c),o.push(d),this.collectShapesViaArrowBindings({...e,bindings:this.getBindingsInvolvingShape(c,"arrow")})}}}flipShapes(e,n){if(this.getIsReadonly())return this;const r=typeof e[0]=="string"?e:e.map(l=>l.id),o=Dt(r.map(l=>this.getShape(l)));for(const l of o)if(this.isShapeOfType(l,"group")){const c=Dt(this.getSortedChildIdsForParent(l.id).map(d=>this.getShape(d)));o.push(...c)}const a=[],s=[];for(const l of o){const c=this.getShapeUtil(l);if(!c.canBeLaidOut(l,{type:"flip",shapes:o}))continue;const d=this.getShapePageBounds(l),u=this.getShapeGeometry(l).bounds,m=this.getShapePageTransform(l.id);d&&u&&m&&(a.push({shape:l,localBounds:u,pageTransform:m,isAspectRatioLocked:c.isAspectRatioLocked(l)}),s.push(d))}if(!a.length)return this;const i=Be.Common(s).center;return this.run(()=>{for(const{shape:l,localBounds:c,pageTransform:d,isAspectRatioLocked:u}of a)this.resizeShape(l.id,{x:n==="horizontal"?-1:1,y:n==="vertical"?-1:1},{initialBounds:c,initialPageTransform:d,initialShape:l,isAspectRatioLocked:u,mode:"scale_shape",scaleOrigin:i,scaleAxisRotation:0})}),this}stackShapes(e,n,r){var S,T;const o=r??this.options.adjacentShapeMargin,a=typeof e[0]=="string"?e:e.map(C=>C.id);if(this.getIsReadonly())return this;const s=Dt(a.map(C=>this.getShape(C))),i=[],l=new Set;for(const C of s){if(l.has(C.id))continue;l.add(C.id);const _=this.getShapePageBounds(C);if(!_||!((T=(S=this.getShapeUtil(C)).canBeLaidOut)!=null&&T.call(S,C,{type:"stack",shapes:s})))continue;const I=[C],P=[_];this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(C.id,"arrow"),initialShapes:s,resultShapes:I,resultBounds:P,visited:l});const M=Be.Common(P);M&&i.push({shapes:I,pageBounds:M})}const c=i.length;if(o===0&&c<3||c<2)return this;let d,u,m,h;n==="horizontal"?(d="x",u="minX",m="maxX",h="width"):(d="y",u="minY",m="maxY",h="height");let y=0;if(o===0){const C={};i.sort((I,P)=>I.pageBounds[u]-P.pageBounds[u]);for(let I=0;I<c-1;I++){const P=i[I],D=i[I+1].pageBounds[u]-P.pageBounds[m];C[D]||(C[D]=0),C[D]++}let _=1;for(const[I,P]of Object.entries(C))P>_&&(_=P,y=parseFloat(I));if(_===1){let I=0;for(const[P,M]of Object.entries(C))y+=parseFloat(P)*M,I+=M;y/=I}}else y=o;const v=[];let x=i[0].pageBounds[m];for(let C=1;C<i.length;C++){const{shapes:_,pageBounds:I}=i[C],P=new R;P[d]=x+y-I[d];for(const M of _){const D=P.clone(),F=this.getShapeParent(M);if(F){const B=this.getShapePageTransform(F);B&&D.rot(-B.rotation())}D.add(M),v.push(this.getChangesToTranslateShape(M,D))}x+=I[h]+y}return this.updateShapes(v),this}packShapes(e,n){var I,P;if(this.getIsReadonly())return this;const r=n??this.options.adjacentShapeMargin,o=typeof e[0]=="string"?e:e.map(M=>M.id),a=Dt(o.map(M=>this.getShape(M))),s=[],i=[],l=new Set;for(const M of a){if(l.has(M.id))continue;l.add(M.id);const D=this.getShapePageBounds(M);if(!D||!((P=(I=this.getShapeUtil(M)).canBeLaidOut)!=null&&P.call(I,M,{type:"pack",shapes:a})))continue;const F=[M],B=[D];this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(M.id,"arrow"),initialShapes:a,resultShapes:F,resultBounds:B,visited:l});const V=Be.Common(B);V&&(s.push({shapes:F,pageBounds:V,nextPageBounds:V.clone()}),i.push(V))}if(s.length<2)return this;let c=0;for(const{pageBounds:M}of s)c+=M.width*M.height;const d=Be.Common(i),u=d.width;s.sort((M,D)=>M.pageBounds.width-D.pageBounds.width).sort((M,D)=>M.pageBounds.height-D.pageBounds.height);const m=Math.max(Math.ceil(Math.sqrt(c/.95)),u),h=[new Be(d.x,d.y,m,1/0)];let y=0,v=0,x,S;for(const{nextPageBounds:M}of s)for(let D=h.length-1;D>=0;D--)if(x=h[D],!(M.width>x.width||M.height>x.height)){M.x=x.x,M.y=x.y,v=Math.max(v,M.maxY),y=Math.max(y,M.maxX),M.width===x.width&&M.height===x.height?(S=h.pop(),D<h.length&&(h[D]=S)):M.height===x.height?(x.x+=M.width+r,x.width-=M.width+r):M.width===x.width?(x.y+=M.height+r,x.height-=M.height+r):(h.push(new Be(x.x+(M.width+r),x.y,x.width-(M.width+r),M.height)),x.y+=M.height+r,x.height-=M.height+r);break}const T=Be.Common(s.map(M=>M.nextPageBounds)),C=R.Sub(d.center,T.center),_=[];for(const{shapes:M,pageBounds:D,nextPageBounds:F}of s){const B=R.Sub(F.point,D.point).add(C);for(const V of M){const z=B.clone();if(this.getShapeParent(V)){const j=this.getShapeParentTransform(V);j&&z.rot(-j.rotation())}z.add(V),_.push(this.getChangesToTranslateShape(V,z))}}return _.length&&this.updateShapes(_),this}alignShapes(e,n){var d,u;if(this.getIsReadonly())return this;const r=typeof e[0]=="string"?e:e.map(m=>m.id),o=Dt(r.map(m=>this.getShape(m))),a=[],s=[],i=new Set;for(const m of o){if(i.has(m.id))continue;i.add(m.id);const h=this.getShapePageBounds(m);if(!h||!((u=(d=this.getShapeUtil(m)).canBeLaidOut)!=null&&u.call(d,m,{type:"align",shapes:o})))continue;const y=[m],v=[h];this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(m.id,"arrow"),initialShapes:o,resultShapes:y,resultBounds:v,visited:i});const x=Be.Common(v);x&&(a.push({shapes:y,pageBounds:x}),s.push(x))}if(a.length<2)return this;const l=Be.Common(s),c=[];return a.forEach(({shapes:m,pageBounds:h})=>{const y=new R;switch(n){case"top":{y.y=l.minY-h.minY;break}case"center-vertical":{y.y=l.midY-h.minY-h.height/2;break}case"bottom":{y.y=l.maxY-h.minY-h.height;break}case"left":{y.x=l.minX-h.minX;break}case"center-horizontal":{y.x=l.midX-h.minX-h.width/2;break}case"right":{y.x=l.maxX-h.minX-h.width;break}}for(const v of m){const x=y.clone(),S=this.getShapeParent(v);if(S){const T=this.getShapePageTransform(S);T&&x.rot(-T.rotation())}x.add(v),c.push(this.getChangesToTranslateShape(v,x))}}),this.updateShapes(c),this}distributeShapes(e,n){var C,_;if(this.getIsReadonly())return this;const r=typeof e[0]=="string"?e:e.map(I=>I.id),o=Dt(r.map(I=>this.getShape(I))),a=[],s=new Set;for(const I of o){if(s.has(I.id))continue;s.add(I.id);const P=this.getShapePageBounds(I);if(!P||!((_=(C=this.getShapeUtil(I)).canBeLaidOut)!=null&&_.call(C,I,{type:"distribute",shapes:o})))continue;const M=[I],D=[P];this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(I.id,"arrow"),initialShapes:o,resultShapes:M,resultBounds:D,visited:s});const F=Be.Common(D);F&&a.push({shapes:M,pageBounds:F})}if(a.length<3)return this;let i,l,c,d;n==="horizontal"?(i="x",l="minX",c="maxX",d="width"):(i="y",l="minY",c="maxY",d="height");const u=[],m=a.sort((I,P)=>I.pageBounds[l]-P.pageBounds[l])[0],h=a.sort((I,P)=>P.pageBounds[c]-I.pageBounds[c])[0];if(m===h){const I=new Set(m.shapes.map(P=>P.id));return this.distributeShapes(r.filter(P=>!I.has(P)),n)}const y=a.filter(I=>I!==m&&I!==h).sort((I,P)=>I.pageBounds[l]===P.pageBounds[l]?I.shapes[0].id<P.shapes[0].id?-1:1:I.pageBounds[l]-P.pageBounds[l]),v=m.pageBounds[c],x=h.pageBounds[l]-v,S=y.reduce((I,P)=>I+P.pageBounds[d],0),T=(x-S)/(y.length+1);for(let I=v+T,P=0;P<y.length;P++){const{shapes:M,pageBounds:D}=y[P],F=new R;F[i]=I-D[i],I+D[d]>h.pageBounds[c]-1&&(F[i]=h.pageBounds[c]-D[c]-1);for(const B of M){const V=F.clone(),z=this.getShapeParent(B);if(z){const H=this.getShapePageTransform(z);H&&V.rot(-H.rotation())}V.add(B),u.push(this.getChangesToTranslateShape(B,V))}I+=D[d]+T}return this.updateShapes(u),this}stretchShapes(e,n){var m,h;const r=typeof e[0]=="string"?e:e.map(y=>y.id);if(this.getIsReadonly())return this;const o=Dt(r.map(y=>this.getShape(y))).filter(y=>{var v;return((v=this.getShapePageTransform(y))==null?void 0:v.rotation())%(Un/2)===0}),a=[],s=[],i=new Set;for(const y of o){if(i.has(y.id))continue;i.add(y.id);const v=this.getShapePageBounds(y);if(!v)continue;const x=[y],S=[v];if(!((h=(m=this.getShapeUtil(y)).canBeLaidOut)!=null&&h.call(m,y,{type:"stretch"})))continue;this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(y.id,"arrow"),initialShapes:o,resultShapes:x,resultBounds:S,visited:i});const T=Be.Common(S);T&&(a.push({shapes:x,pageBounds:T}),s.push(T))}if(a.length<2)return this;const l=Be.Common(s);let c,d,u;return n==="horizontal"?(c="x",d="minX",u="width"):(c="y",d="minY",u="height"),this.run(()=>{a.forEach(({shapes:y,pageBounds:v})=>{const x=new R;x[c]=l[d]-v[d];const S=v.center.clone();S[c]=l[d];const T=new R(1,1);T[c]=l[u]/v[u];for(const C of y){const _=x.clone(),I=this.getShapeParentTransform(C);I&&x.rot(-I.rotation()),_.add(C);const P=this.getChangesToTranslateShape(C,_);this.updateShape(P),this.resizeShape(C.id,T,{initialBounds:this.getShapeGeometry(C).bounds,scaleOrigin:S,isAspectRatioLocked:this.getShapeUtil(C).isAspectRatioLocked(C),scaleAxisRotation:0})}})}),this}resizeShape(e,n,r={}){var y,v,x;const o=typeof e=="string"?e:e.id;if(this.getIsReadonly())return this;Number.isFinite(n.x)||(n=new R(1,n.y)),Number.isFinite(n.y)||(n=new R(n.x,1));const a=r.initialShape??this.getShape(o);if(!a)return this;const s=r.scaleOrigin??((y=this.getShapePageBounds(o))==null?void 0:y.center);if(!s)return this;const i=r.initialPageTransform?De.Cast(r.initialPageTransform):this.getShapePageTransform(o);if(!i)return this;const l=i.rotation();if(l==null)return this;const c=r.scaleAxisRotation??l,d=r.initialBounds??this.getShapeGeometry(o).bounds;if(!d)return this;const u=r.isAspectRatioLocked??this.getShapeUtil(a).isAspectRatioLocked(a);if(!OY(l,c))return this._resizeUnalignedShape(o,n,{...r,initialBounds:d,scaleOrigin:s,scaleAxisRotation:c,initialPageTransform:i,isAspectRatioLocked:u,initialShape:a});const m=this.getShapeUtil(a);u&&(Math.abs(n.x)>Math.abs(n.y)?n=new R(n.x,Math.sign(n.y)*Math.abs(n.x)):n=new R(Math.sign(n.x)*Math.abs(n.y),n.y));let h=!1;if(m.onResize&&m.canResize(a)){const S=this._scalePagePoint(De.applyToPoint(i,new R(0,0)),s,n,c),T=this.getPointInParentSpace(a.id,S),C=new R(n.x,n.y),_=Eo((l-c)%Math.PI,0);C.x=_?n.x:n.y,C.y=_?n.y:n.x;const I=De.applyToPoint(i,new R),{x:P,y:M}=this.getPointInParentSpace(a.id,I);let D=a;r.skipStartAndEndCallbacks||(D=Ec(a,((v=m.onResizeStart)==null?void 0:v.call(m,a))??void 0));const F=m.onResize({...a,x:P,y:M},{newPoint:T,handle:r.dragHandle??"bottom_right",mode:r.mode??"scale_shape",scaleX:C.x,scaleY:C.y,initialBounds:d,initialShape:a});F&&(h=!0),D=Ec(D,{id:o,type:a.type,x:T.x,y:T.y,...F}),r.skipStartAndEndCallbacks||(D=Ec(D,((x=m.onResizeEnd)==null?void 0:x.call(m,a,D))??void 0)),this.updateShapes([D])}if(!h){const S=De.applyToPoint(i,d.center),T=this._scalePagePoint(S,s,n,c),C=this.getPointInParentSpace(a.id,S),_=this.getPointInParentSpace(a.id,T),I=R.Sub(_,C);this.updateShapes([{id:o,type:a.type,x:a.x+I.x,y:a.y+I.y}])}return this}_scalePagePoint(e,n,r,o){const a=R.RotWith(e,n,-o).sub(n),s=R.MulV(a,r);return R.Add(s,n).rotWith(n,o)}_resizeUnalignedShape(e,n,r){const{type:o}=r.initialShape,a=new R(n.x,n.y);if(Math.abs(n.x)>Math.abs(n.y)?a.x=Math.sign(n.x)*Math.abs(n.y):a.y=Math.sign(n.y)*Math.abs(n.x),this.resizeShape(e,a,{initialShape:r.initialShape,initialBounds:r.initialBounds,isAspectRatioLocked:r.isAspectRatioLocked}),Math.sign(n.x)*Math.sign(n.y)<0){let{rotation:x}=De.Decompose(r.initialPageTransform);x-=2*x,this.updateShapes([{id:e,type:o,rotation:x}])}const s=De.applyToPoint(r.initialPageTransform,r.initialBounds.center),i=this._scalePagePoint(s,r.scaleOrigin,n,r.scaleAxisRotation),l=this.getShapePageBounds(e),c=this.getShapePageTransform(e),d=l.center,u=c.point();if(!d||!u)return this;const m=R.Sub(i,d),h=R.Add(u,m),{x:y,y:v}=this.getPointInParentSpace(e,h);return this.updateShapes([{id:e,type:o,x:y,y:v}]),this}getInitialMetaForShape(e){return{}}canCreateShape(e){return this.canCreateShapes([e])}canCreateShapes(e){return e.length+this.getCurrentPageShapeIds().size<=this.options.maxShapesPerPage}createShape(e){return this.createShapes([e]),this}createShapes(e){if(!Array.isArray(e))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");if(this.getIsReadonly())return this;if(e.length<=0)return this;const n=this.getCurrentPageShapeIds();if(e.length+n.size>this.options.maxShapesPerPage)return xS(this),this;const o=this.getFocusedGroupId();return this.run(()=>{var d,u;const a=this.getCurrentPageShapesSorted(),s=e.map(m=>{if(m.id||(m={id:lr(),...m}),!m.parentId||!(this.store.has(m.parentId)||e.some(h=>h.id===m.parentId))){let h=this.getFocusedGroupId();if(m.x!==void 0&&m.y!==void 0)for(let x=a.length-1;x>=0;x--){const S=a[x];if(this.getShapeUtil(S).canReceiveNewChildrenOfType(S,m.type)&&!this.isShapeHidden(S)&&this.isPointInShape(S,{x:m.x??0,y:m.y??0},{margin:0,hitInside:!0})){h=S.id;break}}const v=m.parentId;if(h===m.id&&(h=o),h!==v&&(m={...m},m.parentId=h,bs(h))){const x=this.getPointInShapeSpace(this.getShape(h),{x:m.x??0,y:m.y??0});m.x=x.x,m.y=x.y,m.rotation=-this.getShapePageTransform(h).rotation()+(m.rotation??0)}}return m}),i=new Map,l=[],{opacityForNextShape:c}=this.getInstanceState();for(const m of s){const h=this.getShapeUtil(m);let y=m.index;if(!y){const T=m.parentId??o;i.has(T)||i.set(T,this.getHighestIndexForParent(T)),y=i.get(T),i.set(T,_l(y))}const v=h.getDefaultProps();for(const[T,C]of this.styleProps[m.type])v[C]=this.getStyleForNextShape(T);let x=this.store.schema.types.shape.create({...m,index:y,opacity:m.opacity??c,parentId:m.parentId??o,props:"props"in m?{...v,...m.props}:v});if(x.index===void 0)throw Error("no index!");const S=(u=(d=this.getShapeUtil(x)).onBeforeCreate)==null?void 0:u.call(d,x);S&&(x=S),l.push(x)}l.forEach(m=>{m.meta={...this.getInitialMetaForShape(m),...m.meta}}),this.emit("created-shapes",l),this.emit("edit"),this.store.put(l)}),this}animateShape(e,n={animation:WI}){return this.animateShapes([e],n)}animateShapes(e,n={animation:WI}){if(!n.animation)return this;const{duration:r=500,easing:o=Ja.linear}=n.animation,a=Ln();let s=r,i;const l=[];let c,d;for(let m=0,h=e.length;m<h;m++){if(c=e[m],!c)continue;const y=this.getShape(c.id);y&&(d={start:bo(y),end:Ec(bo(y),c)},l.push(d),this.animatingShapes.set(y.id,a))}const u=m=>{var x,S;if(s-=m,s<0){const{animatingShapes:T}=this,C=e.filter(_=>_&&T.get(_.id)===a);C.length&&this.updateShapes(C),this.off("tick",u);return}i=o(1-s/r);const{animatingShapes:h}=this,y=[];let v;for(let T=0,C=l.length;T<C;T++){const{start:_,end:I}=l[T];v=h.get(_.id),v===a&&y.push({...I,x:_.x+(I.x-_.x)*i,y:_.y+(I.y-_.y)*i,opacity:_.opacity+(I.opacity-_.opacity)*i,rotation:_.rotation+(I.rotation-_.rotation)*i,props:((S=(x=this.getShapeUtil(I)).getInterpolatedProps)==null?void 0:S.call(x,_,I,i))??I.props})}this._updateShapes(y)};return this.on("tick",u),this}groupShapes(e,n={}){var y;const{groupId:r=lr(),select:o=!0}=n;if(!Array.isArray(e))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.getIsReadonly())return this;const a=typeof e[0]=="string"?e:e.map(v=>v.id);if(a.length<=1)return this;const s=Dt((this._shouldIgnoreShapeLock?a:this._getUnlockedShapeIds(a)).map(v=>this.getShape(v))),i=s.sort(oa).map(v=>v.id),l=Be.Common(Dt(s.map(v=>this.getShapePageBounds(v)))),{x:c,y:d}=l.point,u=this.findCommonAncestor(s)??this.getCurrentPageId();if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const m=s.filter(v=>v.parentId===u).sort(oa),h=(y=m[m.length-1])==null?void 0:y.index;return this.run(()=>{this.createShapes([{id:r,type:"group",parentId:u,index:h,x:c,y:d,opacity:1,props:{}}]),this.reparentShapes(i,r),o&&this.select(r)}),this}ungroupShapes(e,n={}){if(this.getIsReadonly())return this;const{select:r=!0}=n,o=typeof e[0]=="string"?e:e.map(l=>l.id),a=Dt((this._shouldIgnoreShapeLock?o:this._getUnlockedShapeIds(o)).map(l=>this.getShape(l)));if(a.length===0)return this;if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const s=new Set,i=[];return a.forEach(l=>{this.isShapeOfType(l,"group")?i.push(l):s.add(l.id)}),i.length===0?this:(this.run(()=>{let l;for(let c=0,d=i.length;c<d;c++){l=i[c];const u=this.getSortedChildIdsForParent(l.id);for(let m=0,h=u.length;m<h;m++)s.add(u[m]);this.reparentShapes(u,l.parentId,l.index)}this.deleteShapes(i.map(c=>c.id)),r&&this.select(...s)}),this)}updateShape(e){return this.updateShapes([e]),this}updateShapes(e){const n=Array(e.length);for(let r=0,o=e.length;r<o;r++){const a=e[r];if(!a)continue;const s=this.getShape(a.id);if(s){if(!this._shouldIgnoreShapeLock){if(s.isLocked){if(!(Object.hasOwn(a,"isLocked")&&!a.isLocked))continue}else if(this.isShapeOrAncestorLocked(s))continue}this.animatingShapes.delete(a.id),n.push(a)}}return this._updateShapes(n),this}_updateShapes(e){this.getIsReadonly()||this.run(()=>{var a,s;const n=[];let r,o;for(let i=0,l=e.length;i<l;i++){const c=e[i];c&&(r=this.getShape(c.id),r&&(o=Ec(r,c),o!==r&&(o=((s=(a=this.getShapeUtil(r)).onBeforeUpdate)==null?void 0:s.call(a,r,o))??o,n.push(o))))}this.emit("edited-shapes",n),this.emit("edit"),this.store.put(n)})}_getUnlockedShapeIds(e){return e.filter(n=>{var r;return!((r=this.getShape(n))!=null&&r.isLocked)})}deleteShapes(e){if(this.getIsReadonly())return this;if(!Array.isArray(e))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");const n=typeof e[0]=="string"?e:e.map(a=>a.id),r=this._shouldIgnoreShapeLock?n:this._getUnlockedShapeIds(n);if(r.length===0)return this;const o=new Set(r);for(const a of r)this.visitDescendants(a,s=>{o.add(s)});return this.emit("deleted-shapes",[...o]),this.emit("edit"),this.run(()=>this.store.remove([...o]))}deleteShape(e){return this.deleteShapes([typeof e=="string"?e:e.id]),this}_extractSharedStyles(e,n){if(this.isShapeOfType(e,"group")){const r=this._parentIdsToChildIds.get()[e.id];if(!r)return;for(let o=0,a=r.length;o<a;o++)this._extractSharedStyles(this.getShape(r[o]),n)}else for(const[r,o]of this.styleProps[e.type])n.applyValue(r,vo(e.props,o))}_getSelectionSharedStyles(){const e=this.getSelectedShapes(),n=new CM;for(const r of e)this._extractSharedStyles(r,n);return n}getStyleForNextShape(e){const n=this.getInstanceState().stylesForNextShape[e.id];return n===void 0?e.defaultValue:n}getShapeStyleIfExists(e,n){const r=this.styleProps[e.type].get(n);if(r!==void 0)return vo(e.props,r)}getSharedStyles(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0)return this._getSelectionSharedStyles();const e=this.root.getCurrent(),n=new CM;if(!e)return n;if(e.shapeType)if(e.shapeType==="frame"&&!this.getShapeUtil("frame").options.showColors)for(const r of this.styleProps[e.shapeType].keys())r.id!=="tldraw:color"&&n.applyValue(r,this.getStyleForNextShape(r));else for(const r of this.styleProps[e.shapeType].keys())n.applyValue(r,this.getStyleForNextShape(r));return n}getSharedOpacity(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0){const e=[],n=o=>{const a=this.getShape(o);if(a)if(this.isShapeOfType(a,"group"))for(const s of this.getSortedChildIdsForParent(a.id))n(s);else e.push(a)};for(const o of this.getSelectedShapeIds())n(o);let r=null;for(const o of e)if(r===null)r=o.opacity;else if(r!==o.opacity)return{type:"mixed"};if(r!==null)return{type:"shared",value:r}}return{type:"shared",value:this.getInstanceState().opacityForNextShape}}setOpacityForNextShapes(e,n){return this.updateInstanceState({opacityForNextShape:e},n),this}setOpacityForSelectedShapes(e){const n=this.getSelectedShapes();if(n.length>0){const r=[],o=a=>{if(this.isShapeOfType(a,"group")){const s=this.getSortedChildIdsForParent(a);for(const i of s)o(this.getShape(i))}else r.push(a)};for(const a of n)o(a);this.updateShapes(r.map(a=>({id:a.id,type:a.type,opacity:e})))}return this}setStyleForNextShapes(e,n,r){const o=this.getInstanceState().stylesForNextShape;return this.updateInstanceState({stylesForNextShape:{...o,[e.id]:n}},r),this}setStyleForSelectedShapes(e,n){const r=this.getSelectedShapes();if(r.length>0){const o=[],a=s=>{if(this.isShapeOfType(s,"group")){const i=this.getSortedChildIdsForParent(s.id);for(const l of i)a(this.getShape(l))}else{const i=this.getShapeUtil(s),l=this.styleProps[s.type].get(e);if(l){const c={id:s.id,type:s.type,props:{[l]:n}};o.push({util:i,originalShape:s,updatePartial:c})}}};for(const s of r)a(s);this.updateShapes(o.map(({updatePartial:s})=>s))}return this}registerExternalAssetHandler(e,n){return this.externalAssetContentHandlers[e]=n,this}createTemporaryAssetPreview(e,n){if(this.temporaryAssetPreview.has(e))return this.temporaryAssetPreview.get(e);const r=URL.createObjectURL(n);return this.temporaryAssetPreview.set(e,r),setTimeout(()=>{this.temporaryAssetPreview.delete(e),URL.revokeObjectURL(r)},this.options.temporaryAssetPreviewLifetimeMs),r}getTemporaryAssetPreview(e){return this.temporaryAssetPreview.get(e)}async getAssetForExternalContent(e){var n,r;return await((r=(n=this.externalAssetContentHandlers)[e.type])==null?void 0:r.call(n,e))}hasExternalAssetHandler(e){return!!this.externalAssetContentHandlers[e]}registerExternalContentHandler(e,n){return this.externalContentHandlers[e]=n,this}async putExternalContent(e,n={}){var r,o;if(!(!n.force&&this.getIsReadonly()))return(o=(r=this.externalContentHandlers)[e.type])==null?void 0:o.call(r,e)}async replaceExternalContent(e,n={}){var r,o;if(!(!n.force&&this.getIsReadonly()))return(o=(r=this.externalContentHandlers)[e.type])==null?void 0:o.call(r,e)}getContentFromCurrentPage(e){const n=typeof e[0]=="string"?e:e.map(o=>o.id);if(!n||n.length===0)return;const r=this.getShapeAndDescendantIds(n);return _9(this,r,o=>{const a=[];for(const d of o){const u=this.getBinding(d);u&&a.push(u)}const s=[],i=[];for(const d of r){const u=this.getShape(d);if(!u)continue;if(!r.has(u.parentId)){const h=this.getShapePageTransform(u.id),y=h.point();i.push({...u,x:y.x,y:y.y,rotation:h.rotation(),parentId:this.getCurrentPageId()}),s.push(u.id)}else i.push(u)}const l=[],c=new Set;for(const d of i){if(!("assetId"in d.props))continue;const u=d.props.assetId;if(!u||c.has(u))continue;c.add(u);const m=this.getAsset(u);m&&l.push(m)}return{schema:this.store.schema.serialize(),shapes:i,rootShapeIds:s,bindings:a,assets:l}})}async resolveAssetsInContent(e){if(!e)return;const n=[];return await Promise.allSettled(e.assets.map(async r=>{var o,a,s;if((r.type==="image"||r.type==="video")&&!((o=r.props.src)!=null&&o.startsWith("data:image"))&&!((a=r.props.src)!=null&&a.startsWith("data:video"))&&!((s=r.props.src)!=null&&s.startsWith("http"))){const i=bo(r),l=await this.store.props.assets.resolve(r,{screenScale:1,steppedScreenScale:1,dpr:1,networkEffectiveType:null,shouldResolveToOriginal:!0});i.props.src=await Xa.blobToDataUrl(await Vu(l).then(c=>c.blob())),n.push(i)}else n.push(r)})),e.assets=n,e}putContentOntoCurrentPage(e,n={}){var B,V,z;if(this.getIsReadonly())return this;if(!e.schema)throw Error(`Could not put content:
content is missing a schema.`);const{select:r=!1,preserveIds:o=!1,preservePosition:a=!1}=n;let{point:s=void 0}=n;const i=this.getCurrentPageId(),{rootShapeIds:l}=e,c=[],d=[],u=[],m={store:{...Object.fromEntries(e.assets.map(H=>[H.id,H])),...Object.fromEntries(e.shapes.map(H=>[H.id,H])),...Object.fromEntries(((B=e.bindings)==null?void 0:B.map(H=>[H.id,H]))??[])},schema:e.schema},h=this.store.schema.migrateStoreSnapshot(m);if(h.type==="error")throw Error("Could not put content: could not migrate content");for(const H of Object.values(h.value))switch(H.typeName){case"asset":{c.push(H);break}case"shape":{d.push(H);break}case"binding":{u.push(H);break}}const y=new Map(o?d.map(H=>[H.id,H.id]):d.map(H=>[H.id,lr()])),v=new Map(o?u.map(H=>[H.id,H.id]):u.map(H=>[H.id,wf()]));let x=this.getCurrentPageId(),S=1/0,T=[];for(const H of this.getSelectedShapes()){if(S===0)break;const j=this.isShapeOfType(H,"frame"),q=this.getShapeAncestors(H);j&&q.push(H);const U=j?q.length+1:q.length;if(U<S)S=U,T=q,x=j?H.id:H.parentId;else if(U===S){if(T.length!==q.length)throw Error(`Ancestors: ${T.length} !== ${q.length}`);if(T.length===0){x=i;break}else{x=i;for(let Y=0;Y<T.length&&q[Y]===T[Y];Y++)x=q[Y].id}}}let C=!1;if(!Ea(x)){const H=this.getShape(x);if(H){if(!this.getViewportPageBounds().includes(this.getShapePageBounds(H)))x=i;else if(l.length===1){const j=d.find(q=>q.id===l[0]);this.isShapeOfType(H,"frame")&&this.isShapeOfType(j,"frame")&&j.props.w===(H==null?void 0:H.props.w)&&j.props.h===(H==null?void 0:H.props.h)&&(C=!0)}}else x=i}C||(C=y.has(x)),C&&(x=this.getShape(x).parentId);let _=this.getHighestIndexForParent(x);const I=[],P=d.map(H=>{const j=y.get(H.id),q={...H,id:j};return l.includes(H.id)&&(q.parentId=i,I.push(q)),y.has(q.parentId)?q.parentId=y.get(H.parentId):(l.push(q.id),q.index=_,_=_l(_)),q});if(P.length+this.getCurrentPageShapeIds().size>this.options.maxShapesPerPage)return xS(this),this;const M=u.map(H=>({...H,id:ra(v.get(H.id)),fromId:ra(y.get(H.fromId)),toId:ra(y.get(H.toId))})),D=[],F=[];for(const H of c)this.store.has(H.id)||((H.type==="image"&&((V=H.props.src)!=null&&V.startsWith("data:image"))||H.type==="video"&&((z=H.props.src)!=null&&z.startsWith("data:video")))&&(F.push(bo(H)),H.props.src=null),D.push(H));return Promise.allSettled(F.map(async H=>{const j=await nIe(H.props.src,H.props.name,H.props.mimeType??"image/png"),q=await this.getAssetForExternalContent({type:"file",file:j,assetId:H.id});if(!q){this.deleteAssets([H.id]);return}this.updateAssets([{...q,id:H.id}])})),this.run(()=>{D.length>0&&this.createAssets(D),this.createShapes(P),this.createBindings(M),r&&this.select(...I.map(Y=>Y.id)),x!==i&&this.reparentShapes(I.map(Y=>Y.id),x);const H=P.map(Y=>this.getShape(Y.id)),j=Be.Common(H.map(Y=>this.getShapePageBounds(Y)));if(s===void 0)if(Ea(x)){const Y=this.getViewportPageBounds();a||Y.includes(Be.From(j))?s=j.center:s=Y.center}else{const Y=this.getShape(x);s=De.applyToPoint(this.getShapePageTransform(Y),this.getShapeGeometry(Y).bounds.center)}if(I.length===1){const Y=I[0];if(this.isShapeOfType(Y,"frame"))for(;this.getShapesAtPoint(s).some(X=>this.isShapeOfType(X,"frame")&&X.props.w===Y.props.w&&X.props.h===Y.props.h);)s.x+=j.w+16}const q=Be.Common(Dt(I.map(({id:Y})=>this.getShapePageBounds(Y)))).center,U=R.Sub(s,q);this.updateShapes(I.map(({id:Y})=>{const X=this.getShape(Y),ee=this.getShapeParentTransform(Y).decompose().rotation,$=R.Rot(U,-ee);return{id:X.id,type:X.type,x:X.x+$.x,y:X.y+$.y}}))}),this}async getSvgElement(e,n={}){const r=e.length===0?this.getCurrentPageShapeIdsSorted():typeof e[0]=="string"?e:e.map(o=>o.id);if(r.length!==0)return Kke(this,r,n)}async getSvgString(e,n={}){const r=await this.getSvgElement(e,n);return r?{svg:new XMLSerializer().serializeToString(r.svg),width:r.width,height:r.height}:void 0}async toImage(e,n={}){const r={format:"png",scale:1,pixelRatio:n.format==="svg"?void 0:2,...n},o=await this.getSvgString(e,r);if(!o)throw new Error("Could not create SVG");switch(r.format){case"svg":return{blob:new Blob([o.svg],{type:"image/svg+xml"}),width:o.width,height:o.height};case"jpeg":case"png":case"webp":{const a=await Zke(o.svg,{type:r.format,quality:r.quality,pixelRatio:r.pixelRatio,width:o.width,height:o.height});if(!a)throw new Error("Could not construct image.");return{blob:a,width:o.width,height:o.height}}default:wn(r.format)}}async toImageDataUrl(e,n={}){const{blob:r,width:o,height:a}=await this.toImage(e,n);return{url:await Xa.blobToDataUrl(r),width:o,height:a}}_updateInputsFromEvent(e){const{pointerVelocity:n,previousScreenPoint:r,previousPagePoint:o,currentScreenPoint:a,currentPagePoint:s,originScreenPoint:i,originPagePoint:l}=this.inputs,{screenBounds:c}=this.store.unsafeGetWithoutCapture(ys),{x:d,y:u,z:m}=ly(()=>this.getCamera()),h=e.point.x-c.x,y=e.point.y-c.y,v=e.point.z??.5;r.setTo(a),o.setTo(s),a.set(h,y);const x=h/m-d,S=y/m-u;isFinite(x)&&isFinite(S)&&s.set(x,S,v),this.inputs.isPen=e.type==="pointer"&&e.isPen,(e.name==="pointer_down"||this.inputs.isPinching)&&(n.set(0,0),i.setTo(a),l.setTo(s)),this.run(()=>{var T;this.store.put([{id:kE,typeName:"pointer",x:s.x,y:s.y,lastActivityTimestamp:e.type==="pointer"&&e.pointerId===n9.CAMERA_MOVE?((T=this.store.unsafeGetWithoutCapture(kE))==null?void 0:T.lastActivityTimestamp)??this._tickManager.now:this._tickManager.now,meta:{}}])},{history:"ignore"})}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}updatePointer(e){const n={type:"pointer",target:"canvas",name:"pointer_move",point:(e==null?void 0:e.point)??R.Add(this.inputs.currentScreenPoint,this.store.unsafeGetWithoutCapture(ys).screenBounds),pointerId:(e==null?void 0:e.pointerId)??0,button:(e==null?void 0:e.button)??0,isPen:(e==null?void 0:e.isPen)??this.inputs.isPen,shiftKey:(e==null?void 0:e.shiftKey)??this.inputs.shiftKey,altKey:(e==null?void 0:e.altKey)??this.inputs.altKey,ctrlKey:(e==null?void 0:e.ctrlKey)??this.inputs.ctrlKey,metaKey:(e==null?void 0:e.metaKey)??this.inputs.metaKey,accelKey:(e==null?void 0:e.accelKey)??Pr(this.inputs)};return e!=null&&e.immediate?this._flushEventForTick(n):this.dispatch(n),this}focus({focusContainer:e=!0}={}){return this.getIsFocused()?this:(e&&this.focusManager.focus(),this.updateInstanceState({isFocused:!0}),this)}blur({blurContainer:e=!0}={}){return this.getIsFocused()?(e?this.focusManager.blur():this.complete(),this.updateInstanceState({isFocused:!1}),this):this}getIsFocused(){return this.getInstanceState().isFocused}getIsReadonly(){return this.getInstanceState().isReadonly}getSnapshot(){return K2e(this.store)}loadSnapshot(e,n){return QY(this.store,e,n),this}_zoomToFitPageContentAt100Percent(){const e=this.getCurrentPageBounds();e&&this.zoomToBounds(e,{immediate:!0,targetZoom:this.getBaseZoom()})}_navigateToDeepLink(e){this.run(()=>{switch(e.type){case"page":{const n=this.getPage(e.pageId);n&&this.setCurrentPage(n),this._zoomToFitPageContentAt100Percent();return}case"shapes":{const n=Dt(e.shapeIds.map(s=>this.getShape(s))),r={};for(const s of n){const i=this.getAncestorPageId(s);i&&(r[i]??(r[i]=[]),r[i].push(s))}const[o,a]=Object.entries(r).sort(([s,i],[l,c])=>c.length-i.length)[0]??["",[]];if(!o||!a.length)this._zoomToFitPageContentAt100Percent();else{this.setCurrentPage(o);const s=Be.Common(a.map(i=>this.getShapePageBounds(i)));this.zoomToBounds(s,{immediate:!0,targetZoom:this.getBaseZoom()})}return}case"viewport":{if(e.pageId){if(!this.getPage(e.pageId)){this._zoomToFitPageContentAt100Percent();return}this.setCurrentPage(e.pageId)}this.zoomToBounds(e.bounds,{immediate:!0,inset:0});return}default:wn(e)}})}navigateToDeepLink(e){if(e&&"type"in e)return this._navigateToDeepLink(e),this;const r=new URL((e==null?void 0:e.url)??window.location.href).searchParams.get((e==null?void 0:e.param)??"d");if(!r)return this._zoomToFitPageContentAt100Percent(),this;try{this._navigateToDeepLink(aIe(r))}catch(o){console.warn(o),this._zoomToFitPageContentAt100Percent()}return this}createDeepLink(e){const n=new URL((e==null?void 0:e.url)??window.location.href);return n.searchParams.set((e==null?void 0:e.param)??"d",oIe((e==null?void 0:e.to)??{type:"viewport",pageId:this.options.maxPages===1?void 0:this.getCurrentPageId(),bounds:this.getViewportPageBounds()})),n}registerDeepLinkListener(e){if(e!=null&&e.getUrl&&!(e!=null&&e.onChange))throw Error("[tldraw:urlStateSync] If you specify getUrl, you must also specify the onChange callback.");const n=ke("url with state",()=>{var l,c;const s=((l=e==null?void 0:e.getUrl)==null?void 0:l.call(e,this))??window.location.href;return this.createDeepLink({param:e==null?void 0:e.param,url:s,to:(c=e==null?void 0:e.getTarget)==null?void 0:c.call(e,this)}).toString()}),r=(e==null?void 0:e.onChange)??(()=>{var i;const s=this.createDeepLink({param:e==null?void 0:e.param,to:(i=e==null?void 0:e.getTarget)==null?void 0:i.call(e,this)});window.history.replaceState({},document.title,s.toString())}),o=pw(s=>s(),(e==null?void 0:e.debounceMs)??500),a=si("update url on state change",()=>r(new URL(n.get()),this),{scheduleEffect:o});return()=>{a(),o.cancel()}}cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}_setShiftKeyTimeout(){this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Pr(this.inputs),code:"ShiftLeft"})}_setAltKeyTimeout(){this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Pr(this.inputs),code:"AltLeft"})}_setCtrlKeyTimeout(){this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Pr(this.inputs),code:"ControlLeft"})}_setMetaKeyTimeout(){this.inputs.metaKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Meta",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Pr(this.inputs),code:"MetaLeft"})}markEventAsHandled(e){const n="nativeEvent"in e?e.nativeEvent:e;this.handledEvents.add(n)}wasEventAlreadyHandled(e){const n="nativeEvent"in e?e.nativeEvent:e;return this.handledEvents.has(n)}dispatch(e){return this._pendingEventsForNextTick.push(e),e.type==="pointer"&&e.name==="pointer_move"||e.type==="wheel"||e.type==="pinch"||this._flushEventsForTick(0),this}_flushEventsForTick(e){this.run(()=>{if(this._pendingEventsForNextTick.length>0){const n=[...this._pendingEventsForNextTick];this._pendingEventsForNextTick.length=0;for(const r of n)this._flushEventForTick(r)}e>0&&this.root.handleEvent({type:"misc",name:"tick",elapsed:e}),this.scribbles.tick(e)})}_flushEventForTick(e){if(this.getCrashingError())return this;this.emit("before-event",e);const{inputs:n}=this,{type:r}=e;if(e.type==="misc"){(e.name==="cancel"||e.name==="complete")&&(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.inputs.isSpacebarPanning=!1,this.setCursor({type:this._prevCursor,rotation:0}))),this.root.handleEvent(e);return}e.shiftKey?(clearTimeout(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,n.shiftKey=!0):!e.shiftKey&&n.shiftKey&&this._shiftKeyTimeout===-1&&(this._shiftKeyTimeout=this.timers.setTimeout(this._setShiftKeyTimeout,150)),e.altKey?(clearTimeout(this._altKeyTimeout),this._altKeyTimeout=-1,n.altKey=!0):!e.altKey&&n.altKey&&this._altKeyTimeout===-1&&(this._altKeyTimeout=this.timers.setTimeout(this._setAltKeyTimeout,150)),e.ctrlKey?(clearTimeout(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,n.ctrlKey=!0):!e.ctrlKey&&n.ctrlKey&&this._ctrlKeyTimeout===-1&&(this._ctrlKeyTimeout=this.timers.setTimeout(this._setCtrlKeyTimeout,150)),e.metaKey?(clearTimeout(this._metaKeyTimeout),this._metaKeyTimeout=-1,n.metaKey=!0):!e.metaKey&&n.metaKey&&this._metaKeyTimeout===-1&&(this._metaKeyTimeout=this.timers.setTimeout(this._setMetaKeyTimeout,150));const{originPagePoint:o,currentPagePoint:a}=n;n.isPointing||(n.isDragging=!1);const s=this.store.unsafeGetWithoutCapture(ys),i=this.store.get(this._getCurrentPageStateId()),l=this._cameraOptions.__unsafe__getWithoutCapture();switch(r){case"pinch":{if(l.isLocked)return;switch(clearTimeout(this._longPressTimeout),this._updateInputsFromEvent(e),e.name){case"pinch_start":{if(n.isPinching)return;n.isEditing||(this._pinchStart=this.getCamera().z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=[...i.selectedShapeIds]),this._didPinch=!0,n.isPinching=!0,this.interrupt());return}case"pinch":{if(!n.isPinching)return;const{point:{z:c=1},delta:{x:d,y:u}}=e,{x:m,y:h}=R.SubXY(e.point,s.screenBounds.x,s.screenBounds.y);this.stopCameraAnimation(),s.followingUserId&&this.stopFollowingUser();const{x:y,y:v,z:x}=ly(()=>this.getCamera()),{panSpeed:S}=l;this._setCamera(new R(y+d*S/x-m/x+m/c,v+u*S/x-h/x+h/c,c),{immediate:!0});return}case"pinch_end":{if(!n.isPinching)return this;n.isPinching=!1;const{_selectedShapeIdsAtPointerDown:c}=this;this.setSelectedShapes(this._selectedShapeIdsAtPointerDown),this._selectedShapeIdsAtPointerDown=[],this._didPinch&&(this._didPinch=!1,c.length>0&&this.once("tick",()=>{this._didPinch||this.setSelectedShapes(c)}));return}}}case"wheel":{if(l.isLocked)return;this._updateInputsFromEvent(e);const{panSpeed:c,zoomSpeed:d}=l;let u=l.wheelBehavior;const m=this.user.getUserPreferences().inputMode;if(m!==null&&(u=m==="trackpad"?"pan":"zoom"),u!=="none"){this.stopCameraAnimation(),s.followingUserId&&this.stopFollowingUser();const{x:h,y,z:v}=ly(()=>this.getCamera()),{x,y:S,z:T=0}=e.delta;let C=u;switch(e.ctrlKey&&(C=u==="pan"?"zoom":"pan"),C){case"zoom":{const{x:_,y:I}=this.inputs.currentScreenPoint;let P=T;u==="zoom"&&(Math.abs(S)>10?P=10*Math.sign(S)/100:P=S/100);const M=v+(P??0)*d*v;this._setCamera(new R(h+_/M-_/v,y+I/M-I/v,M),{immediate:!0}),this.maybeTrackPerformance("Zooming");return}case"pan":{this._setCamera(new R(h+x*c/v,y+S*c/v,v),{immediate:!0}),this.maybeTrackPerformance("Panning");return}}}break}case"pointer":{if(n.isPinching)return;this._updateInputsFromEvent(e);const{isPen:c}=e,{isPenMode:d}=s;switch(e.name){case"pointer_down":{if(d&&!c)return;if(this.inputs.isPanning||(this._longPressTimeout=this.timers.setTimeout(()=>{const u=this.getViewportScreenBounds();this.dispatch({...e,point:this.inputs.originScreenPoint.clone().addXY(u.x,u.y),name:"long_press"})},this.options.longPressDurationMs)),this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds(),e.button===r9&&(this.capturedPointerId=e.pointerId),n.buttons.add(e.button),n.isPointing=!0,n.isDragging=!1,!d&&c&&this.updateInstanceState({isPenMode:!0}),e.button===o9?(this._restoreToolId=this.getCurrentToolId(),this.complete(),this.setCurrentTool("eraser")):e.button===mS&&(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0,clearTimeout(this._longPressTimeout)),this.inputs.isPanning)return this.stopCameraAnimation(),this.setCursor({type:"grabbing",rotation:0}),this;break}case"pointer_move":{if(!c&&d)return;const{x:u,y:m,z:h}=ly(()=>this.getCamera());if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:y,previousScreenPoint:v}=this.inputs,x=R.Sub(y,v);this.setCamera(new R(u+x.x/h,m+x.y/h,h),{immediate:!0}),this.maybeTrackPerformance("Panning");return}n.isPointing&&!n.isDragging&&R.Dist2(o,a)*this.getZoomLevel()>(s.isCoarsePointer?this.options.coarseDragDistanceSquared:this.options.dragDistanceSquared)/h&&(n.isDragging=!0,clearTimeout(this._longPressTimeout));break}case"pointer_up":{if(n.isDragging=!1,n.isPointing=!1,clearTimeout(this._longPressTimeout),n.buttons.delete(e.button),s.isPenMode&&!c)return;if(this.capturedPointerId===e.pointerId&&(this.capturedPointerId=null,e.button=0),n.isPanning){n.keys.has("Space")||(n.isPanning=!1,n.isSpacebarPanning=!1);const u=this.inputs.pointerVelocity,m=Math.min(2,u.len());switch(e.button){case r9:{this.setCursor({type:"grab",rotation:0});break}case mS:this.inputs.keys.has(" ")?this.setCursor({type:"grab",rotation:0}):this.setCursor({type:this._prevCursor,rotation:0})}m>0&&this.slideCamera({speed:m,direction:u})}else e.button===o9&&(this.complete(),this.setCurrentTool(this._restoreToolId));break}}break}case"keyboard":{switch(e.key==="ShiftRight"&&(e.key="ShiftLeft"),e.key==="AltRight"&&(e.key="AltLeft"),e.code==="ControlRight"&&(e.code="ControlLeft"),e.code==="MetaRight"&&(e.code="MetaLeft"),e.name){case"key_down":{if(n.keys.add(e.code),e.code==="Space"&&!e.ctrlKey&&(this.inputs.isPanning||(this._prevCursor=s.cursor.type),this.inputs.isPanning=!0,this.inputs.isSpacebarPanning=!0,clearTimeout(this._longPressTimeout),this.setCursor({type:this.inputs.isPointing?"grabbing":"grab",rotation:0})),this.inputs.isSpacebarPanning){let c;switch(e.code){case"ArrowUp":{c=new R(0,-1);break}case"ArrowRight":{c=new R(1,0);break}case"ArrowDown":{c=new R(0,1);break}case"ArrowLeft":{c=new R(-1,0);break}}if(c){const d=this.getViewportPageBounds(),u=d.clone().translate(c.mulV({x:d.w,y:d.h}));this._animateToViewport(u,{animation:{duration:320}})}}break}case"key_up":{n.keys.delete(e.code),e.code==="Space"&&(this.inputs.buttons.has(mS)||(this.inputs.isPanning=!1,this.inputs.isSpacebarPanning=!1,this.setCursor({type:this._prevCursor,rotation:0})));break}}break}}if(e.type==="pointer"){e.button===mS?e.name="middle_click":e.button===_N&&(e.name="right_click");const{isPenMode:c}=this.store.unsafeGetWithoutCapture(ys);if(e.isPen===c){const d=this._clickManager.handlePointerEvent(e);if(e.name!==d.name){this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(d),this.emit("event",d);return}}}return this.root.handleEvent(e),this.emit("event",e),e.type==="pointer"&&e.name==="pointer_down"&&this.menus.clearOpenMenus(),this}maybeTrackPerformance(e){Ur.measurePerformance.get()&&(this.performanceTracker.isStarted()?clearTimeout(this.performanceTrackerTimeout):this.performanceTracker.start(e),this.performanceTrackerTimeout=this.timers.setTimeout(()=>{this.performanceTracker.stop()},50))}};nt=kPe(_M);st(nt,1,"getIsShapeHiddenCache",aZ,tt);st(nt,1,"getCanUndo",oZ,tt);st(nt,1,"getCanRedo",rZ,tt);st(nt,1,"getPath",nZ,tt);st(nt,1,"getCurrentTool",tZ,tt);st(nt,1,"getCurrentToolId",eZ,tt);st(nt,1,"getDocumentSettings",ZQ,tt);st(nt,1,"getInstanceState",QQ,tt);st(nt,1,"getPageStates",JQ,tt);st(nt,1,"_getPageStatesQuery",XQ,tt);st(nt,1,"getCurrentPageState",YQ,tt);st(nt,1,"_getCurrentPageStateId",WQ,tt);st(nt,1,"getSelectedShapeIds",KQ,tt);st(nt,1,"getSelectedShapes",GQ,tt);st(nt,1,"getCurrentPageShapesInReadingOrder",VQ,tt);st(nt,1,"getOnlySelectedShapeId",$Q,tt);st(nt,1,"getOnlySelectedShape",HQ,tt);st(nt,1,"getSelectionPageBounds",qQ,tt);st(nt,1,"getSelectionRotation",UQ,tt);st(nt,1,"getSelectionRotatedPageBounds",zQ,tt);st(nt,1,"getSelectionRotatedScreenBounds",FQ,tt);st(nt,1,"getFocusedGroupId",BQ,tt);st(nt,1,"getFocusedGroup",jQ,tt);st(nt,1,"getEditingShapeId",LQ,tt);st(nt,1,"getEditingShape",NQ,tt);st(nt,1,"getRichTextEditor",DQ,tt);st(nt,1,"getHoveredShapeId",RQ,tt);st(nt,1,"getHoveredShape",MQ,tt);st(nt,1,"getHintingShapeIds",OQ,tt);st(nt,1,"getHintingShape",PQ,tt);st(nt,1,"getErasingShapeIds",IQ,tt);st(nt,1,"getErasingShapes",kQ,tt);st(nt,1,"_unsafe_getCameraId",_Q,tt);st(nt,1,"getCamera",AQ,tt);st(nt,1,"getViewportPageBoundsForFollowing",CQ,tt);st(nt,1,"getCameraForFollowing",wQ,tt);st(nt,1,"getZoomLevel",TQ,tt);st(nt,1,"getViewportScreenBounds",EQ,tt);st(nt,1,"getViewportScreenCenter",SQ,tt);st(nt,1,"getViewportPageBounds",xQ,tt);st(nt,1,"_getCollaboratorsQuery",vQ,tt);st(nt,1,"getCollaborators",yQ,tt);st(nt,1,"getCollaboratorsOnCurrentPage",bQ,tt);st(nt,1,"getRenderingShapes",gQ,tt);st(nt,1,"_getAllPagesQuery",hQ,tt);st(nt,1,"getPages",mQ,tt);st(nt,1,"getCurrentPageId",fQ,tt);st(nt,1,"getCurrentPageShapeIdsSorted",pQ,tt);st(nt,1,"_getAllAssetsQuery",dQ,tt);st(nt,1,"_getShapeHandlesCache",uQ,tt);st(nt,1,"_getShapePageTransformCache",cQ,tt);st(nt,1,"_getShapePageBoundsCache",lQ,tt);st(nt,1,"_getShapeClipPathCache",iQ,tt);st(nt,1,"_getShapeMaskCache",sQ,tt);st(nt,1,"_getShapeMaskedPageBoundsCache",aQ,tt);st(nt,1,"getNotVisibleShapes",oQ,tt);st(nt,1,"getCulledShapes",rQ,tt);st(nt,1,"getCurrentPageBounds",nQ,tt);st(nt,1,"getCurrentPageShapes",tQ,tt);st(nt,1,"getCurrentPageShapesSorted",eQ,tt);st(nt,1,"getCurrentPageRenderingShapesSorted",ZJ,tt);st(nt,1,"_getBindingsIndexCache",QJ,tt);st(nt,1,"_getSelectionSharedStyles",JJ,tt);st(nt,1,"getSharedStyles",XJ,tt);st(nt,1,"getSharedOpacity",YJ,tt);st(nt,1,"getIsFocused",WJ,tt);st(nt,1,"getIsReadonly",KJ,tt);st(nt,1,"_setShiftKeyTimeout",GJ,tt);st(nt,1,"_setAltKeyTimeout",VJ,tt);st(nt,1,"_setCtrlKeyTimeout",$J,tt);st(nt,1,"_setMetaKeyTimeout",HJ,tt);PPe(nt,tt);function xS(t,e=t.getCurrentPageId()){const n=t.getPage(e).name;t.emit("max-shapes",{name:n,pageId:e,count:t.options.maxShapesPerPage})}function Ec(t,e){if(!e)return t;let n=null;const r=Object.entries(e);for(let o=0,a=r.length;o<a;o++){const[s,i]=r[o];if(i!==void 0&&!(s==="id"||s==="type"||s==="typeName")&&i!==t[s]){if(n||(n={...t}),s==="props"||s==="meta"){n[s]={...t[s]};for(const[l,c]of Object.entries(i))n[s][l]=c;continue}n[s]=i}}return n||t}function sZ(t,e,n){const r=t.getShape(e);if(!r)return;n.push(r);const o=t.getSortedChildIdsForParent(e);for(let a=0,s=o.length;a<s;a++)sZ(t,o[a],n)}function _9(t,e,n){let r;if(t.run(()=>{const o=t.store.extractingChanges(()=>{const a=new Set,s=new Set;for(const i of e)if(t.getShape(i))for(const c of t.getBindingsInvolvingShape(i)){const d=e.has(c.fromId),u=e.has(c.toId);if(d&&u){a.add(c.id);continue}(!d||!u)&&s.add(c.id)}t.deleteBindings([...s],{isolateShapes:!0});try{r=zc.ok(n(a))}catch(i){r=zc.err(i)}});t.store.applyDiff(uM(o),{runCallbacks:!1})},{history:"ignore"}),r.ok)return r.value;throw r.error}function k9(t,e){if(!e.constraints)throw Error("Should have constraints here");const{padding:{x:n,y:r}}=e.constraints,o=t.getViewportScreenBounds(),a=Be.From(e.constraints.bounds),s=(o.w-n*2)/a.w,i=(o.h-r*2)/a.h;return{zx:s,zy:i}}function Fw(){const t=ue(),e=hv();return ce("isDarkMode",()=>(e==null?void 0:e.isDarkMode)??t.user.getIsDarkMode(),[e,t])}const I9="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",P9="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",SS='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function Od(t,e,n,r,o,a=16,s=16){const i=(-n-e)*(Un/180),l=Math.sin(i),c=Math.cos(i),d=1*c-1*l,u=1*l+1*c;return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${o};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${d}' dy='${u}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${e+n} 16 16)${r?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+t.replaceAll('"',"'")+`</g></svg>") ${a} ${s}, pointer`}const MPe=["default","pointer","cross","move","grab","grabbing","text","zoom-in","zoom-out"],RPe={none:()=>"none","ew-resize":(t,e,n)=>Od(P9,t,0,e,n),"ns-resize":(t,e,n)=>Od(P9,t,90,e,n),"nesw-resize":(t,e,n)=>Od(I9,t,0,e,n),"nwse-resize":(t,e,n)=>Od(I9,t,90,e,n),"nwse-rotate":(t,e,n)=>Od(SS,t,0,e,n),"nesw-rotate":(t,e,n)=>Od(SS,t,90,e,n),"senw-rotate":(t,e,n)=>Od(SS,t,180,e,n),"swne-rotate":(t,e,n)=>Od(SS,t,270,e,n)};function Ri(t,e=0,n="black"){return RPe[t](p2e(e),!1,n)}function DPe(){const t=ue(),e=Ao(),n=Fw();Rf("useCursor",()=>{const{type:r,rotation:o}=t.getInstanceState().cursor;if(MPe.includes(r)){e.style.setProperty("--tl-cursor",`var(--tl-cursor-${r})`);return}e.style.setProperty("--tl-cursor",Ri(r,o,n?"white":"black"))},[t,e,n])}function NPe(){const t=ue(),e=Ao(),n=Fw(),r=ce(Ur.forceSrgb);bt.useEffect(()=>{n?(e.setAttribute("data-color-mode","dark"),e.classList.remove("tl-theme__light"),e.classList.add("tl-theme__dark")):(e.setAttribute("data-color-mode","light"),e.classList.remove("tl-theme__dark"),e.classList.add("tl-theme__light")),r?e.classList.add("tl-theme__force-sRGB"):e.classList.remove("tl-theme__force-sRGB")},[t,e,r,n])}function LPe(){const[t,e]=w.useState(0);w.useEffect(()=>e(n=>n+1),[])}const jPe=t=>t.props.src,BPe={upload:async(t,e)=>({src:await Xa.blobToDataUrl(e)})};function FPe(t){return"schema"in t&&t.schema?t.schema:n2e({shapes:"shapeUtils"in t&&t.shapeUtils?O9(aX(t.shapeUtils)):void 0,bindings:"bindingUtils"in t&&t.bindingUtils?O9(eX(t.bindingUtils)):void 0,migrations:"migrations"in t?t.migrations:void 0})}function jE({initialData:t,defaultName:e="",id:n,assets:r=BPe,onMount:o,collaboration:a,...s}={}){const i=FPe(s),l=new mN({id:n,schema:i,initialData:t,props:{defaultName:e,assets:{upload:r.upload,resolve:r.resolve??jPe,remove:r.remove??(()=>Promise.resolve())},onMount:c=>{dt(c instanceof tt),o==null||o(c)},collaboration:a}});if(s.snapshot){if(t)throw new Error("Cannot provide both initialData and snapshot");QY(l,s.snapshot,{forceOverwriteSessionState:!0})}return l}function O9(t){return Object.fromEntries(t.map(e=>[e.type,{props:e.props,migrations:e.migrations}]))}const zPe=(t,e)=>e.some(n=>t instanceof n);let M9,R9;function UPe(){return M9||(M9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qPe(){return R9||(R9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iZ=new WeakMap,kM=new WeakMap,lZ=new WeakMap,aP=new WeakMap,VN=new WeakMap;function HPe(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Uu(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&iZ.set(n,t)}).catch(()=>{}),VN.set(e,t),e}function $Pe(t){if(kM.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});kM.set(t,e)}let IM={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kM.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lZ.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VPe(t){IM=t(IM)}function GPe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sP(this),e,...n);return lZ.set(r,e.sort?e.sort():[e]),Uu(r)}:qPe().includes(t)?function(...e){return t.apply(sP(this),e),Uu(iZ.get(this))}:function(...e){return Uu(t.apply(sP(this),e))}}function KPe(t){return typeof t=="function"?GPe(t):(t instanceof IDBTransaction&&$Pe(t),zPe(t,UPe())?new Proxy(t,IM):t)}function Uu(t){if(t instanceof IDBRequest)return HPe(t);if(aP.has(t))return aP.get(t);const e=KPe(t);return e!==t&&(aP.set(t,e),VN.set(e,t)),e}const sP=t=>VN.get(t);function cZ(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const s=indexedDB.open(t,e),i=Uu(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Uu(s.result),l.oldVersion,l.newVersion,Uu(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),i.then(l=>{a&&l.addEventListener("close",()=>a()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),i}function uZ(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Uu(n).then(()=>{})}const WPe=["get","getKey","getAll","getAllKeys","count"],YPe=["put","add","delete","clear"],iP=new Map;function D9(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(iP.get(e))return iP.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=YPe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||WPe.includes(n)))return;const a=async function(s,...i){const l=this.transaction(s,o?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(i.shift())),(await Promise.all([c[n](...i),o&&l.done]))[0]};return iP.set(e,a),a}VPe(t=>({...t,get:(e,n,r)=>D9(e,n)||t.get(e,n,r),has:(e,n)=>!!D9(e,n)||t.has(e,n)}));const XPe="TLDRAW_DOCUMENT_v2",JPe="TLDRAW_ASSET_STORE_v1",dZ="TLDRAW_DB_NAME_INDEX_v2",un={Records:"records",Schema:"schema",SessionState:"session_state",Assets:"assets"};async function pZ(t){const e=XPe+t;return ZPe(e),await cZ(e,4,{upgrade(n){n.objectStoreNames.contains(un.Records)||n.createObjectStore(un.Records),n.objectStoreNames.contains(un.Schema)||n.createObjectStore(un.Schema),n.objectStoreNames.contains(un.SessionState)||n.createObjectStore(un.SessionState),n.objectStoreNames.contains(un.Assets)||n.createObjectStore(un.Assets)}})}async function QPe(t){const e=window.indexedDB.databases?(await window.indexedDB.databases()).map(m=>m.name):GN(),n=JPe+t;if(!e.find(m=>m===n))return;const o=await cZ(n,1,{upgrade(m){m.objectStoreNames.contains("assets")||m.createObjectStore("assets")}});if(!o.objectStoreNames.contains("assets"))return;const a=o.transaction(["assets"],"readonly"),s=a.objectStore("assets"),i=await s.getAllKeys(),l=await Promise.all(i.map(async m=>[m,await s.get(m)]));await a.done;const c=await pZ(t),d=c.transaction([un.Assets],"readwrite"),u=d.objectStore(un.Assets);for(const[m,h]of l)u.put(h,m);await d.done,o.close(),c.close(),await uZ(n)}const t0=class t0{constructor(e){L(this,"getDbPromise");L(this,"isClosed",!1);L(this,"pendingTransactionSet",new Set);t0.connectedInstances.add(this),this.getDbPromise=(async()=>(await QPe(e),await pZ(e)))()}getDb(){return this.getDbPromise}pending(){return Promise.allSettled([this.getDbPromise,...this.pendingTransactionSet]).then(l0)}async close(){this.isClosed||(this.isClosed=!0,await this.pending(),(await this.getDb()).close(),t0.connectedInstances.delete(this))}tx(e,n,r){const o=(async()=>{dt(!this.isClosed,"db is closed");const s=(await this.getDb()).transaction(n,e),i=s.done.catch(l=>{if(!this.isClosed)throw l});try{return await r(s)}finally{this.isClosed?s.abort():await i}})();return this.pendingTransactionSet.add(o),o.finally(()=>this.pendingTransactionSet.delete(o)),o}async load({sessionId:e}={}){return await this.tx("readonly",[un.Records,un.Schema,un.SessionState],async n=>{var l,c;const r=n.objectStore(un.Records),o=n.objectStore(un.Schema),a=n.objectStore(un.SessionState);let s=e?(l=await a.get(e))==null?void 0:l.snapshot:null;return s||(s=(c=(await a.getAll()).sort((u,m)=>u.updatedAt-m.updatedAt).pop())==null?void 0:c.snapshot),{records:await r.getAll(),schema:await o.get(un.Schema),sessionStateSnapshot:s}})}async storeChanges({schema:e,changes:n,sessionId:r,sessionStateSnapshot:o}){await this.tx("readwrite",[un.Records,un.Schema,un.SessionState],async a=>{const s=a.objectStore(un.Records),i=a.objectStore(un.Schema),l=a.objectStore(un.SessionState);for(const[c,d]of Object.entries(n.added))await s.put(d,c);for(const[c,d]of Object.values(n.updated))await s.put(d,d.id);for(const c of Object.keys(n.removed))await s.delete(c);i.put(e.serialize(),un.Schema),o&&r?l.put({snapshot:o,updatedAt:Date.now(),id:r},r):(o||r)&&console.error("sessionStateSnapshot and instanceId must be provided together")})}async storeSnapshot({schema:e,snapshot:n,sessionId:r,sessionStateSnapshot:o}){await this.tx("readwrite",[un.Records,un.Schema,un.SessionState],async a=>{const s=a.objectStore(un.Records),i=a.objectStore(un.Schema),l=a.objectStore(un.SessionState);await s.clear();for(const[c,d]of Object.entries(n))await s.put(d,c);i.put(e.serialize(),un.Schema),o&&r?l.put({snapshot:o,updatedAt:Date.now(),id:r},r):(o||r)&&console.error("sessionStateSnapshot and instanceId must be provided together")})}async pruneSessions(){await this.tx("readwrite",[un.SessionState],async e=>{const n=e.objectStore(un.SessionState),r=(await n.getAll()).sort((a,s)=>a.updatedAt-s.updatedAt);if(r.length<10){await e.done;return}const o=r.slice(0,r.length-10);for(const{id:a}of o)await n.delete(a)})}async getAsset(e){return await this.tx("readonly",[un.Assets],async n=>await n.objectStore(un.Assets).get(e))}async storeAsset(e,n){await this.tx("readwrite",[un.Assets],async r=>{await r.objectStore(un.Assets).put(n,e)})}async removeAssets(e){await this.tx("readwrite",[un.Assets],async n=>{const r=n.objectStore(un.Assets);for(const o of e)await r.delete(o)})}};L(t0,"connectedInstances",new Set);let BE=t0;function GN(){const t=JSON.parse(UD(dZ)||"[]")??[];return Array.isArray(t)?t:[]}function ZPe(t){const e=new Set(GN());e.add(t),qD(dZ,JSON.stringify([...e]))}function eOe(){window.alert(`Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.

Keep seeing this message?
 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.
 If your hard disk is full, try clearing up some space and then reload the page.`)}function tOe(){window.alert(`Oops! We could not access your browser's storageand the app won't work correctly without that. We now need to reload the page and try again.

Keep seeing this message?
 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.`)}const nOe=350,rOe=1e4,N9=Symbol("UPDATE_INSTANCE_STATE"),oOe=t=>t;class aOe{constructor(e){L(this,"onmessage")}postMessage(e){}close(){}}const sOe=typeof BroadcastChannel>"u"?aOe:BroadcastChannel;class iOe{constructor(e,{persistenceKey:n,sessionId:r=DE,onLoad:o,onLoadError:a},s=new sOe(`tldraw-tab-sync-${n}`)){L(this,"disposables",new Set);L(this,"diffQueue",[]);L(this,"didDispose",!1);L(this,"shouldDoFullDBWrite",!0);L(this,"isReloading",!1);L(this,"persistenceKey");L(this,"sessionId");L(this,"serializedSchema");L(this,"isDebugging",!1);L(this,"documentTypes");L(this,"$sessionStateSnapshot");L(this,"db");L(this,"initTime",Date.now());L(this,"isPersisting",!1);L(this,"didLastWriteError",!1);L(this,"scheduledPersistTimeout",null);this.store=e,this.channel=s,typeof window<"u"&&(window.tlsync=this),this.persistenceKey=n,this.sessionId=r,this.db=new BE(n),this.disposables.add(()=>this.db.close()),this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=DN(this.store),this.disposables.add(e.listen(({changes:i})=>{this.diffQueue.push(i),this.channel.postMessage(oOe({type:"diff",storeId:this.store.id,changes:i,schema:this.serializedSchema})),this.schedulePersist()},{source:"user",scope:"document"})),this.disposables.add(e.listen(()=>{this.diffQueue.push(N9),this.schedulePersist()},{scope:"session"})),this.connect(o,a),this.documentTypes=new Set(Object.values(this.store.schema.types).filter(i=>i.scope==="document").map(i=>i.typeName))}debug(...e){this.isDebugging&&console.debug(...e)}async connect(e,n){this.debug("connecting");let r;try{r=await this.db.load({sessionId:this.sessionId})}catch(o){n(o),tOe();return}if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose)try{if(r){const o=Object.fromEntries(r.records.map(l=>[l.id,l])),a=r.sessionStateSnapshot??G2e(o),s=this.store.schema.migrateStoreSnapshot({store:o,schema:r.schema??this.store.schema.serializeEarliestVersion()});if(s.type==="error"){console.error("failed to migrate store",s),n(new Error(`Failed to migrate store: ${s.reason}`));return}const i=Object.values(s.value).filter(l=>this.documentTypes.has(l.typeName));i.length>0&&this.store.mergeRemoteChanges(()=>{this.store.put(i,"initialize")}),a&&SM(this.store,a,{forceOverwrite:!0})}this.channel.onmessage=({data:o})=>{var i,l;this.debug("got message",o);const a=o,s=this.store.schema.getMigrationsSince(a.schema);if(s.ok){if(s.value.length>0){this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,this.persistIfNeeded();return}}else{if(Date.now()-this.initTime<5e3){n(new Error("Schema mismatch, please close other tabs and reload the page"));return}this.debug("reloading"),this.isReloading=!0,(l=(i=window==null?void 0:window.location)==null?void 0:i.reload)==null||l.call(i);return}a.type==="diff"&&(this.debug("applying diff"),Ui(()=>{this.store.mergeRemoteChanges(()=>{this.store.applyDiff(a.changes)})}))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add(()=>{this.channel.close()}),e(this)}catch(o){if(this.debug("error loading data from store",o),this.didDispose)return;n(o);return}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach(e=>e())}schedulePersist(){this.debug("schedulePersist",this.scheduledPersistTimeout),!this.scheduledPersistTimeout&&(this.scheduledPersistTimeout=setTimeout(()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()},this.didLastWriteError?rOe:nOe))}persistIfNeeded(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),!this.isPersisting&&(this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist())}async doPersist(){if(dt(!this.isPersisting,"persist already in progress"),this.didDispose)return;this.isPersisting=!0,this.debug("doPersist start");const e=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await this.db.storeSnapshot({schema:this.store.schema,snapshot:this.store.serialize(),sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});else{const n=fN(e.filter(r=>r!==N9));await this.db.storeChanges({changes:n,schema:this.store.schema,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()})}this.didLastWriteError=!1}catch(n){this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",n),eOe(),typeof window<"u"&&window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}function fZ(t){const e=w.useRef(t),[n,r]=w.useState(t);n!==e.current&&r(e.current);const o=w.useCallback(a=>{typeof a=="function"?e.current=a(e.current):e.current=a,r(e.current)},[]);return[n,o]}function lOe(t){const[e,n]=fZ({status:"loading"});return t=kg(t),w.useEffect(()=>{const{persistenceKey:r,sessionId:o,...a}=t;if(!r){n({status:"not-synced",store:jE(a)});return}n({status:"loading"});const s=new as,i={upload:async(u,m)=>(await d.db.storeAsset(u.id,m),{src:u.id}),resolve:async u=>u.props.src?u.props.src.startsWith("asset:")?await s.get(u,async()=>{const m=await d.db.getAsset(u.id);return m?URL.createObjectURL(m):null}):u.props.src:null,remove:async u=>{await d.db.removeAssets(u)},...a.assets},l=jE({...a,assets:i});let c=!1;const d=new iOe(l,{sessionId:o,persistenceKey:r,onLoad(){c||n({store:l,status:"synced-local"})},onLoadError(u){c||n({status:"error",error:u})}});return()=>{c=!0,d.close()}},[t,n]),e}function cOe(){const t=ue();w.useLayoutEffect(()=>si("stateAttribute",()=>{t.getContainer().setAttribute("data-state",t.getPath())}),[t])}function uOe(){const t=ue(),e=Ao();w.useEffect(()=>{const n=a=>e.style.setProperty("--tl-zoom",a.toString()),r=pw(n,100),o=new sm("useZoomCss",()=>{t.getCurrentPageShapeIds().size<300?n(t.getZoomLevel()):r(t.getZoomLevel())});return o.attach(),o.execute(),()=>{o.detach(),r.cancel()}},[t,e])}function PM(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0,o=t.length;r<o;r++)n[r]=t.charCodeAt(r);return e}function dOe(t){const e=atob(t),n=PM(e);return crypto.subtle.importKey("spki",new Uint8Array(n),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"])}const pOe=30,Ac={ANNUAL_LICENSE:1,PERPETUAL_LICENSE:2,INTERNAL_LICENSE:4,WITH_WATERMARK:8,EVALUATION_LICENSE:16,NATIVE_LICENSE:32},fOe=Math.max(...Object.values(Ac)),cy={ID:0,HOSTS:1,FLAGS:2,EXPIRY_DATE:3},mOe=Object.keys(cy).length,Ym="sales@tldraw.com",hOe=`${Bo()}/watermarks/watermark-track.svg`;class vv{constructor(e,n){L(this,"publicKey","MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEHJh0uUfxHtCGyerXmmatE368Hd9rI6LH9oPDQihnaCryRFWEVeOvf9U/SPbyxX74LFyJs5tYeAHq5Nc0Ax25LQ");L(this,"isDevelopment");L(this,"isTest");L(this,"isCryptoAvailable");L(this,"state",Ir("license state","pending"));L(this,"verbose",!0);this.isTest=!1,this.isDevelopment=this.getIsDevelopment(),this.publicKey=n||this.publicKey,this.isCryptoAvailable=!!crypto.subtle,this.getLicenseFromKey(e).then(r=>{const o=gOe(r,a=>this.outputMessages(a),this.isDevelopment);this.maybeTrack(r,o),this.state.set(o)}).catch(r=>{console.error("License validation failed:",r),this.state.set("unlicensed")})}getIsDevelopment(){return!["https:","vscode-webview:"].includes(window.location.protocol)||window.location.hostname==="localhost"||!1}getTrackType(e,n){return n==="unlicensed-production"?"unlicensed":this.isDevelopment||!e.isLicenseParseable?null:e.isEvaluationLicense?"evaluation":n==="licensed-with-watermark"?"with_watermark":null}maybeTrack(e,n){const r=this.getTrackType(e,n);if(!r)return;const o=new URL(hOe);if(o.searchParams.set("version",MN),o.searchParams.set("license_type",r),"license"in e){o.searchParams.set("license_id",e.license.id);const a=this.isFlagEnabled(e.license.flags,Ac.EVALUATION_LICENSE)?"evaluation":this.isFlagEnabled(e.license.flags,Ac.ANNUAL_LICENSE)?"annual":this.isFlagEnabled(e.license.flags,Ac.PERPETUAL_LICENSE)?"perpetual":"unknown";o.searchParams.set("sku",a)}o.searchParams.set("url",window.location.href),o.searchParams.set("environment","production"),fetch(o.toString())}async extractLicenseKey(e){const[n,r]=e.split("."),[o,a]=n.split("/");if(!o.startsWith("tldraw-"))throw new Error(`Unsupported prefix '${o}'`);const s=await dOe(this.publicKey);let i;try{i=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},s,new Uint8Array(PM(atob(r))),new Uint8Array(PM(atob(a))))}catch(c){throw console.error(c),new Error("Could not perform signature validation")}if(!i)throw new Error("Invalid signature");let l;try{l=JSON.parse(atob(a))}catch{throw new Error("Could not parse object")}return l.length>mOe&&this.outputMessages(["License key contains some unknown properties.","You may want to update tldraw packages to a newer version to get access to new functionality."]),{id:l[cy.ID],hosts:l[cy.HOSTS],flags:l[cy.FLAGS],expiryDate:l[cy.EXPIRY_DATE]}}async getLicenseFromKey(e){if(!e)return this.isDevelopment||this.outputNoLicenseKeyProvided(),{isLicenseParseable:!1,reason:"no-key-provided"};if(this.isDevelopment&&!this.isCryptoAvailable)return this.verbose&&(console.log("tldraw: you seem to be in a development environment that does not support crypto. License not verified."),console.log("You should check that this works in production separately.")),{isLicenseParseable:!1,reason:"has-key-development-mode"};let n=e.replace(/[\u200B-\u200D\uFEFF]/g,"");n=n.replace(/\r?\n|\r/g,"");try{const r=await this.extractLicenseKey(n),o=new Date(r.expiryDate),a=this.isFlagEnabled(r.flags,Ac.ANNUAL_LICENSE),s=this.isFlagEnabled(r.flags,Ac.PERPETUAL_LICENSE),i=this.isFlagEnabled(r.flags,Ac.EVALUATION_LICENSE),l=this.getDaysSinceExpiry(o),c={license:r,isLicenseParseable:!0,isDevelopment:this.isDevelopment,isDomainValid:this.isDomainValid(r),expiryDate:o,isAnnualLicense:a,isAnnualLicenseExpired:a&&this.isAnnualLicenseExpired(o),isPerpetualLicense:s,isPerpetualLicenseExpired:s&&this.isPerpetualLicenseExpired(o),isInternalLicense:this.isFlagEnabled(r.flags,Ac.INTERNAL_LICENSE),isNativeLicense:this.isNativeLicense(r),isLicensedWithWatermark:this.isFlagEnabled(r.flags,Ac.WITH_WATERMARK),isEvaluationLicense:i,isEvaluationLicenseExpired:i&&this.isEvaluationLicenseExpired(o),daysSinceExpiry:l};return this.outputLicenseInfoIfNeeded(c),c}catch(r){return this.outputInvalidLicenseKey(r.message),{isLicenseParseable:!1,reason:"invalid-license-key"}}}isDomainValid(e){const n=window.location.hostname.toLowerCase();return e.hosts.some(r=>{const o=r.toLowerCase().trim();if(o===n||`www.${o}`===n||o===`www.${n}`||r==="*")return!0;if(this.isNativeLicense(e))return new RegExp(o).test(window.location.href);if(r.includes("*")){const a=new RegExp(r.replace(/\*/g,".*?"));return a.test(n)||a.test(`www.${n}`)}if(window.location.protocol==="vscode-webview:"){const s=new URL(window.location.href).searchParams.get("extensionId");if(o===s)return!0}return!1})}isNativeLicense(e){return this.isFlagEnabled(e.flags,Ac.NATIVE_LICENSE)}getExpirationDateWithoutGracePeriod(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}getExpirationDateWithGracePeriod(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+pOe+1)}isAnnualLicenseExpired(e){const n=this.getExpirationDateWithGracePeriod(e);return new Date>=n}isPerpetualLicenseExpired(e){const n=this.getExpirationDateWithGracePeriod(e),r={major:new Date(s9.major),minor:new Date(s9.minor)};return r.major>=n||r.minor>=n}getDaysSinceExpiry(e){const n=new Date,r=this.getExpirationDateWithoutGracePeriod(e),o=n.getTime()-r.getTime(),a=Math.floor(o/(1e3*60*60*24));return Math.max(0,a)}isEvaluationLicenseExpired(e){const n=new Date,r=this.getExpirationDateWithoutGracePeriod(e);return n>=r}isFlagEnabled(e,n){return(e&n)===n}outputNoLicenseKeyProvided(){}outputInvalidLicenseKey(e){this.outputMessages(["Invalid tldraw license key",`Reason: ${e}`])}outputLicenseInfoIfNeeded(e){e.license.flags>=fOe*2&&this.outputMessages(["Warning: This tldraw license contains some unknown flags.","This will still work, however, you may want to update tldraw packages to a newer version to get access to new functionality."],"warning")}outputMessages(e,n="error"){if(!this.isTest&&this.verbose){this.outputDelimiter();for(const r of e){const o=n==="warning"?"orange":"crimson",a=n==="warning"?"orange":"crimson";console.log(`%c${r}`,`color: ${o}; background: ${a}; padding: 2px; border-radius: 3px;`)}this.outputDelimiter()}}outputDelimiter(){console.log("%c-------------------------------------------------------------------","color: white; background: crimson; padding: 2px; border-radius: 3px;")}}L(vv,"className","tl-watermark_SEE-LICENSE");function gOe(t,e,n){if(!t.isLicenseParseable)return n?"unlicensed":(t.reason==="no-key-provided"?e(["No tldraw license key provided!","A license is required for production deployments.",`Please reach out to ${Ym} to purchase a license.`]):e(["Invalid license key. tldraw requires a valid license for production use.",`Please reach out to ${Ym} to purchase a license.`]),"unlicensed-production");if(!t.isDomainValid&&!t.isDevelopment)return e(["License key is not valid for this domain.","A license is required for production deployments.",`Please reach out to ${Ym} to purchase a license.`]),"unlicensed-production";if(t.isEvaluationLicense)return t.isEvaluationLicenseExpired?(e(["Your tldraw evaluation license has expired!",`Please reach out to ${Ym} to purchase a full license.`]),"expired"):"licensed";if(t.isPerpetualLicenseExpired||t.isAnnualLicenseExpired)return e(["Your tldraw license has been expired for more than 30 days!",`Please reach out to ${Ym} to renew your license.`]),"expired";const r=t.daysSinceExpiry;return r>0&&!t.isEvaluationLicense?(e(["Your tldraw license has expired.",`License expired ${r} days ago.`,`Please reach out to ${Ym} to renew your license.`]),"licensed"):t.isLicensedWithWatermark?"licensed-with-watermark":"licensed"}var Xm={};const mZ=w.createContext({}),bOe=()=>w.useContext(mZ);function L9(t){return t==="expired"||t==="unlicensed-production"}const yOe=5e3;function vOe({licenseKey:t=SOe()??void 0,children:e}){const[n]=w.useState(()=>new vv(t)),r=ce(n.state),[o,a]=w.useState(!0);return w.useEffect(()=>{if(L9(r)&&o){const s=setTimeout(()=>{a(!1)},yOe);return()=>clearTimeout(s)}},[r,o]),L9(r)&&!o?g.jsx(xOe,{}):g.jsx(mZ.Provider,{value:n,children:e})}function xOe(){return g.jsx("div",{"data-testid":"tl-license-expired",style:{display:"none"}})}let ES;function SOe(){return ES!==void 0||(ES=bl(()=>Xm.TLDRAW_LICENSE_KEY)||bl(()=>Xm.NEXT_PUBLIC_TLDRAW_LICENSE_KEY)||bl(()=>Xm.REACT_APP_TLDRAW_LICENSE_KEY)||bl(()=>Xm.GATSBY_TLDRAW_LICENSE_KEY)||bl(()=>Xm.VITE_TLDRAW_LICENSE_KEY)||bl(()=>Xm.PUBLIC_TLDRAW_LICENSE_KEY)||bl(()=>{})||bl(()=>{})||bl(()=>{})||bl(()=>{})||bl(()=>{})||bl(()=>{})||null),ES}function bl(t){try{return t()}catch{return}}function eu(t){if(!t)throw Error("usePassThroughWheelEvents must be passed a ref");const e=Ao(),n=lo();w.useEffect(()=>{function r(a){if(!(n!=null&&n.getInstanceState().isFocused)||a.isSpecialRedispatchedEvent)return;const s=t.current;if(s&&s.scrollHeight>s.clientHeight)return;Nt(a);const i=e.querySelector(".tl-canvas");if(!i)return;const l=new WheelEvent("wheel",a);l.isSpecialRedispatchedEvent=!0,i.dispatchEvent(l)}const o=t.current;if(o)return o.addEventListener("wheel",r,{passive:!1}),()=>{o.removeEventListener("wheel",r)}},[e,n,t])}const EOe='<svg xmlns="http://www.w3.org/2000/svg" width="3001" height="1000" fill="none"><path fill="#000" d="M590.656 300.449c0 49.706-40.294 90-90 90-49.705 0-90-40.294-90-90 0-49.705 40.295-90 90-90 49.706 0 90 40.295 90 90M569.431 719.011c-15.247 32.821-56.006 91.589-98.338 91.438-32.004-.115-38.642-30.904-17.414-50.856 17.381-16.337 28.246-48.075 31.995-72.719.415-2.728-1.556-5.197-4.272-5.679-39.666-7.04-70.746-40.877-70.746-83.417 0-48.23 38.983-87.329 87.07-87.329 39.936 0 70.172 22.237 83.369 52.397 18.839 43.055 7.117 115.733-11.664 156.165M2613.29 385.681V239.319c0-11.363 9.22-20.569 20.59-20.569h8.26c11.37 0 20.59 9.206 20.59 20.569v36.911c0 8.629 7 15.625 15.63 15.625h35.25c8.63 0 15.63-6.996 15.63-15.625v-36.911c0-11.363 9.22-20.569 20.59-20.569h8.17c11.37 0 20.59 9.206 20.59 20.569v146.362c0 11.363-9.22 20.569-20.59 20.569h-8.17c-11.37 0-20.59-9.206-20.59-20.569v-36.999c0-8.63-7-15.625-15.63-15.625h-35.25c-8.63 0-15.63 6.995-15.63 15.625v36.999c0 11.363-9.22 20.569-20.59 20.569h-8.26c-11.37 0-20.59-9.206-20.59-20.569M2391.97 239.319v146.362c0 11.348-9.16 20.569-20.49 20.569h-8.2c-11.33 0-20.49-9.221-20.49-20.569V239.319c0-11.348 9.16-20.569 20.49-20.569h8.2c11.33 0 20.49 9.221 20.49 20.569M2098.23 391.43l-42.69-146.361c-3.85-13.171 6.06-26.319 19.79-26.319h10.6c9.59 0 17.93 6.611 20.08 15.952l17.01 73.045c1.48 6.348 10.47 6.478 12.14.176l19.47-73.838c2.38-9.04 10.57-15.335 19.93-15.335h12.1c9.37 0 17.56 6.3 19.94 15.346l19.49 74.067c1.66 6.305 10.65 6.178 12.13-.171l17.09-73.294c2.15-9.339 10.49-15.948 20.08-15.948h10.53c13.72 0 23.63 13.141 19.79 26.31l-42.63 146.361c-2.56 8.789-10.63 14.829-19.79 14.829h-15.68c-9.12 0-17.16-5.98-19.76-14.709l-21.17-71.059c-1.77-5.948-10.19-5.957-11.97-.012l-21.33 71.071c-2.6 8.729-10.64 14.709-19.76 14.709h-15.59c-9.17 0-17.23-6.035-19.8-14.82M2443.23 218.75h118.59c11.38 0 20.62 9.195 20.62 20.557s-9.24 20.556-20.62 20.556h-24.79c-5.53 0-10 4.477-10 10v115.818c0 11.368-9.25 20.569-20.63 20.569h-7.65c-11.39 0-20.63-9.201-20.63-20.569V269.863c0-5.523-4.48-10-10-10h-24.89c-11.37 0-20.61-9.195-20.61-20.556s9.24-20.557 20.61-20.557M1174.15 218.75h24.64c8.35 0 15.88 5.042 19.04 12.764l34.61 83.942c2.13 5.161 9.44 5.155 11.56-.01l34.43-83.932a20.58 20.58 0 0 1 19.04-12.764h24.64c11.37 0 20.58 9.208 20.58 20.569v146.362c0 11.361-9.21 20.569-20.58 20.569h-7.09c-11.36 0-20.58-9.208-20.58-20.569l-.12-50.645c-.01-6.888-9.53-8.688-12.06-2.283l-23.46 59.332a20.57 20.57 0 0 1-19.14 13.009h-3.03a20.57 20.57 0 0 1-19.15-13.046l-23.47-59.68c-2.52-6.416-12.05-4.623-12.06 2.271l-.13 51.042c0 11.361-9.21 20.569-20.57 20.569h-7.1c-11.36 0-20.57-9.208-20.57-20.569V239.319c0-11.361 9.21-20.569 20.57-20.569"/><path fill="#000" fill-rule="evenodd" d="m1449.94 391.836 6.12-19.392a6.255 6.255 0 0 1 5.96-4.369l50.22-.061a6.24 6.24 0 0 1 5.96 4.348l6.23 19.486c2.71 8.581 10.71 14.402 19.74 14.402h9.34c14.13 0 24.15-13.791 19.61-27.151l-49.74-146.361c-2.85-8.37-10.74-13.988-19.61-13.988h-33.16c-8.87 0-16.77 5.618-19.61 13.988l-49.74 146.361c-4.54 13.36 5.48 27.151 19.61 27.151h9.32c9.04 0 17.04-5.827 19.75-14.414m31.1-98.858c1.85-5.807 10.08-5.796 11.91.016l8.83 27.916c1.28 4.028-1.73 8.134-5.96 8.134h-17.74c-4.23 0-7.24-4.119-5.95-8.151zM1681.81 406.25c18.91 0 35.39-3.686 49.36-11.168 13.97-7.544 24.73-18.394 32.24-32.489 7.56-14.105 11.29-30.866 11.29-50.182 0-19.256-3.73-35.957-11.29-50.004-7.57-14.094-18.35-24.912-32.32-32.397-13.91-7.545-30.4-11.26-49.37-11.26h-49.5c-11.38 0-20.63 9.201-20.63 20.569v146.362c0 11.368 9.25 20.569 20.63 20.569zm23.13-47.701c-6.62 3.215-14.85 4.886-24.79 4.886-10.49 0-19-8.507-19-19v-64.34c0-10.149 8.23-18.376 18.38-18.376 10.18 0 18.56 1.703 25.23 4.974 6.59 3.149 11.63 8.315 15.08 15.633 3.45 7.269 5.28 17.268 5.28 30.162 0 12.891-1.82 22.951-5.28 30.347-3.39 7.319-8.36 12.509-14.9 15.714" clip-rule="evenodd"/><path fill="#000" d="M1804.21 385.681V239.319c0-11.361 9.21-20.569 20.58-20.569h91.28c11.36 0 20.57 9.202 20.57 20.557s-9.21 20.556-20.57 20.556h-54.64a7.807 7.807 0 0 0-7.81 7.813v16.366a7.806 7.806 0 0 0 7.81 7.812h48.13c11.37 0 20.58 9.246 20.58 20.602s-9.21 20.601-20.58 20.601h-48.13a7.806 7.806 0 0 0-7.81 7.812v16.455a7.807 7.807 0 0 0 7.81 7.813h54.64c11.36 0 20.57 9.202 20.57 20.556s-9.21 20.557-20.57 20.557h-91.28c-11.37 0-20.58-9.208-20.58-20.569"/><path fill="#000" fill-rule="evenodd" d="M2875.5 68.75h-2750c-31.066 0-56.25 25.184-56.25 56.25v750c0 31.066 25.184 56.25 56.25 56.25h2750c31.07 0 56.25-25.184 56.25-56.25V125c0-31.066-25.18-56.25-56.25-56.25M125.5 0C56.464 0 .5 55.964.5 125v750c0 69.036 55.965 125 125 125h2750c69.04 0 125-55.964 125-125V125c0-69.036-55.96-125-125-125z" clip-rule="evenodd"/><path fill="#000" d="M2476.06 804.813c-10.54 0-19.82-6.947-22.81-17.068L2390.79 575.7c-4.49-15.248 6.92-30.534 22.8-30.534h27.75c11.1 0 20.72 7.686 23.18 18.52L2489 671.402c2.07 9.093 14.93 9.321 17.32.308l28.83-108.844c2.76-10.435 12.19-17.7 22.98-17.7h25.17c10.8 0 20.25 7.293 22.99 17.755l28.27 107.739c2.36 9.001 15.18 8.829 17.3-.232l25.01-106.888c2.51-10.763 12.1-18.374 23.14-18.374h27.87c15.88 0 27.29 15.286 22.8 30.534l-62.46 212.045a23.78 23.78 0 0 1-22.81 17.068h-32.12c-10.39 0-19.58-6.763-22.69-16.696l-32.08-102.694c-2.62-8.397-14.51-8.331-17.04.095l-30.74 102.346c-3.02 10.061-12.27 16.949-22.76 16.949zM1742.44 804.813h-75.81c-13.09 0-23.71-10.656-23.71-23.801V568.967c0-13.145 10.62-23.801 23.71-23.801h74.8c26.6 0 49.59 5.198 68.95 15.594 19.45 10.312 34.44 25.187 44.96 44.627 10.61 19.355 15.91 42.556 15.91 69.602q0 40.57-15.78 69.73c-10.53 19.355-25.43 34.231-44.71 44.627-19.28 10.311-42.05 15.467-68.32 15.467m-29.3-83.642c0 13.145 10.61 23.801 23.71 23.801h3.06c12.8 0 23.7-2.07 32.71-6.212 9.09-4.141 16-11.283 20.71-21.426q7.2-15.213 7.2-42.345 0-27.13-7.32-42.344c-4.8-10.143-11.87-17.285-21.22-21.426-9.26-4.142-20.63-6.212-34.1-6.212h-1.04c-13.1 0-23.71 10.656-23.71 23.801zM1460.86 804.813c-13.12 0-23.76-10.656-23.76-23.801V568.967c0-13.145 10.64-23.801 23.76-23.801h22.84c13.13 0 23.76 10.656 23.76 23.801v155.247c0 13.145 10.64 23.801 23.76 23.801h57.27c13.12 0 23.76 10.656 23.76 23.801v9.196c0 13.145-10.64 23.801-23.76 23.801zM1204.45 601.964c-13.13 0-23.77-10.656-23.77-23.801v-9.196c0-13.145 10.64-23.801 23.77-23.801h177.89c13.13 0 23.78 10.656 23.78 23.801v9.196c0 13.145-10.65 23.801-23.78 23.801h-39.38c-8.21 0-14.86 6.66-14.86 14.875v164.173c0 13.145-10.64 23.801-23.78 23.801h-21.85c-13.13 0-23.78-10.656-23.78-23.801V616.839c0-8.215-6.65-14.875-14.86-14.875z"/><path fill="#000" fill-rule="evenodd" d="M2223.05 787.891c-3.02 10.047-12.27 16.922-22.74 16.922h-25.43c-16.19 0-27.64-15.862-22.57-31.261l69.88-212.045c3.21-9.753 12.31-16.341 22.56-16.341h61.84c10.25 0 19.35 6.588 22.56 16.341l69.87 212.045c5.08 15.399-6.37 31.261-22.56 31.261h-25.43c-10.48 0-19.72-6.875-22.74-16.922l-6.7-22.2a14.84 14.84 0 0 0-14.21-10.576h-63.42c-6.55 0-12.32 4.296-14.22 10.576zm76.13-96.945-14.13-48.436c-2.46-8.451-14.36-8.602-17.04-.217l-15.46 48.436c-1.84 5.759 2.45 11.645 8.48 11.645h29.6c5.94 0 10.22-5.715 8.55-11.428" clip-rule="evenodd"/><path fill="#000" d="M1939.6 804.813c-13.13 0-23.77-10.656-23.77-23.801V568.967c0-13.145 10.64-23.801 23.77-23.801h88.13c19.24 0 36.08 3.508 50.51 10.523s25.65 17.115 33.67 30.3q12.03 19.779 12.03 47.416c0 18.595-4.14 34.273-12.41 47.036-7.64 11.913-18.18 21.101-31.63 27.564-16.98 8.159-36 11.104-54.7 11.104h-43.07c-76.56 0 4.08-135.84 4.08-84.706v7.996c0 12.117 9.81 21.941 21.91 21.941 8.12 0 16.3-.345 24.04-3.043 5.91-2.113 10.43-5.451 13.55-10.015 3.2-4.565 4.81-10.523 4.81-17.877 0-7.437-1.61-13.481-4.81-18.129-3.12-4.733-7.64-8.199-13.55-10.396-7.05-2.766-14.67-3.423-22.18-3.423-13.13 0-23.77 10.656-23.77 23.801v47.71c0 11.825 11.14 16.003 19.91 20.752 12.31 6.671 7.58 25.389-6.42 25.389-7.45 0-13.49 6.048-13.49 13.508v48.395c0 13.145-10.63 23.801-23.76 23.801zm134.89-106.758 5.41 9.95 33.51 61.622c8.62 15.86-2.84 35.186-20.87 35.186h-22.27c-8.74 0-16.77-4.798-20.92-12.496l-35.05-65.04a15.52 15.52 0 0 0-13.66-8.168c-42.24 0 40.62-82.154 73.85-21.054M931.652 0h68.748v1000h-68.748z"/></svg>',TOe='<svg xmlns="http://www.w3.org/2000/svg" width="400" height="1601" fill="none"><path fill="#000" d="M72 1319.8c0-10.73 7.071-20.18 17.372-23.22l215.823-63.62c15.519-4.57 31.078 7.05 31.078 23.22v28.26c0 11.31-7.824 21.1-18.85 23.61l-109.636 24.94c-9.254 2.1-9.487 15.2-.313 17.63l110.784 29.37a24.21 24.21 0 0 1 18.015 23.4v25.64c0 11-7.423 20.62-18.071 23.41l-109.659 28.79c-9.162 2.41-8.986 15.47.236 17.63l108.792 25.46c10.955 2.56 18.702 12.33 18.702 23.57v28.39c0 16.17-15.559 27.79-31.078 23.22l-215.823-63.62c-10.3-3.04-17.372-12.49-17.372-23.22v-32.72c0-10.59 6.883-19.95 16.994-23.11l104.523-32.67c8.547-2.67 8.479-14.79-.096-17.36l-104.17-31.3C79.01 1372.42 72 1363 72 1352.31zM72 572.638V495.43c0-13.336 10.846-24.147 24.225-24.147h215.823c13.379 0 24.225 10.811 24.225 24.147v76.179q0 40.645-15.872 70.228-15.743 29.712-45.422 45.79-29.55 16.206-70.843 16.206-41.292 0-70.971-16.078-29.55-16.077-45.422-45.532Q72 612.767 72 572.638m85.132-29.84c-13.379 0-24.225 10.81-24.225 24.146v3.122q0 19.55 6.323 33.313 6.323 13.89 21.807 21.094 15.485 7.332 43.099 7.331t43.1-7.46q15.484-7.33 21.807-21.608 6.323-14.15 6.323-34.728v-1.064c0-13.336-10.846-24.146-24.225-24.146zM72 285.858c0-13.363 10.846-24.197 24.225-24.197h215.823c13.379 0 24.225 10.834 24.225 24.197v23.27c0 13.364-10.846 24.197-24.225 24.197H154.035c-13.379 0-24.225 10.834-24.225 24.197v58.328c0 13.364-10.846 24.197-24.225 24.197h-9.36C82.845 440.047 72 429.214 72 415.85zM278.463 24.72c0-13.374 10.846-24.216 24.225-24.216h9.36c13.379 0 24.225 10.842 24.225 24.216v181.174c0 13.374-10.846 24.216-24.225 24.216h-9.36c-13.379 0-24.225-10.842-24.225-24.216v-40.108c0-8.359-6.779-15.135-15.141-15.135H96.225c-13.38 0-24.225-10.842-24.225-24.216v-22.256c0-13.374 10.846-24.216 24.225-24.216h167.097c8.362 0 15.141-6.776 15.141-15.135z"/><path fill="#000" fill-rule="evenodd" d="M89.224 1062.13C78.997 1059.04 72 1049.63 72 1038.96v-25.9c0-16.486 16.145-28.147 31.818-22.979l215.823 71.169a24.19 24.19 0 0 1 16.632 22.98v62.97c0 10.45-6.706 19.71-16.632 22.98l-215.823 71.17C88.145 1246.51 72 1234.86 72 1218.37v-25.9c0-10.67 6.997-20.08 17.224-23.17l22.595-6.81a15.13 15.13 0 0 0 10.765-14.48v-64.59a15.13 15.13 0 0 0-10.765-14.48zm98.672 77.53 49.299-14.39c8.601-2.51 8.755-14.62.22-17.35l-49.299-15.75c-5.861-1.88-11.852 2.49-11.852 8.64v30.14c0 6.05 5.817 10.41 11.632 8.71" clip-rule="evenodd"/><path fill="#000" d="M72 773.439c0-13.367 10.846-24.203 24.225-24.203h215.823c13.379 0 24.225 10.836 24.225 24.203v89.762q0 29.395-10.711 51.439-10.71 22.046-30.84 34.293t-48.261 12.248q-28.388 0-47.873-12.635-18.187-11.672-28.056-32.218c-8.303-17.289-11.301-36.661-11.301-55.705v-43.867c0-77.976 138.26 4.16 86.215 4.16h-8.138c-12.334 0-22.332 9.989-22.332 22.311 0 8.269.351 16.6 3.097 24.487q3.225 9.024 10.194 13.794 6.968 4.899 18.194 4.899 11.356 0 18.453-4.899 7.226-4.77 10.581-13.794c2.815-7.188 3.484-14.944 3.484-22.596 0-13.366-10.846-24.202-24.225-24.202h-48.56c-12.036 0-16.288 11.345-21.122 20.272-6.79 12.539-25.841 7.72-25.841-6.536 0-7.586-6.156-13.736-13.749-13.736H96.225C82.845 820.916 72 810.08 72 796.714zm108.66 137.378-10.128 5.511-62.72 34.131C91.67 959.243 72 947.569 72 929.205V906.52a24.2 24.2 0 0 1 12.719-21.299l66.199-35.696a15.82 15.82 0 0 0 8.313-13.921c0-43.012 83.618 41.371 21.429 75.213"/></svg>';function wOe(t){return ce("watermarkState",()=>t.state.get(),[t])}const COe=`data:image/svg+xml;utf8,${encodeURIComponent(EOe)}`,AOe=`data:image/svg+xml;utf8,${encodeURIComponent(TOe)}`,_Oe=w.memo(function(){const e=bOe(),n=ue(),r=ce("is mobile",()=>n.getViewportScreenBounds().width<700,[n]),o=wOe(e);return["licensed-with-watermark","unlicensed"].includes(o)?g.jsxs(g.Fragment,{children:[g.jsx(POe,{}),g.jsx(IOe,{src:r?AOe:COe,isUnlicensed:o==="unlicensed"})]}):null}),kOe=w.memo(function({isDebugMode:e,isMobile:n}){const r=ue(),o=_w(),a=w.useRef(null);eu(a);const s="https://tldraw.dev/pricing?utm_source=sdk&utm_medium=organic&utm_campaign=watermark";return g.jsx("div",{ref:a,className:vv.className,"data-debug":e,"data-mobile":n,"data-unlicensed":!0,"data-testid":"tl-watermark-unlicensed",draggable:!1,...o,children:g.jsx("button",{draggable:!1,role:"button",onPointerDown:i=>{r.markEventAsHandled(i),Nt(i)},title:"The tldraw SDK requires a license key to work in production. You can get a free 100-day trial license at tldraw.dev/pricing.",onClick:()=>{pv.openWindow(s,"_blank",!0)},children:"Get a license for production"})})}),IOe=w.memo(function({src:e,isUnlicensed:n}){const r=ue(),o=ce("debug mode",()=>r.getInstanceState().isDebugMode,[r]),a=ce("is mobile",()=>r.getViewportScreenBounds().width<700,[r]),s=_w(),i=w.useRef(null);eu(i);const l=`url('${e}') center 100% / 100% no-repeat`,c="https://tldraw.dev/?utm_source=sdk&utm_medium=organic&utm_campaign=watermark";return n?g.jsx(kOe,{isDebugMode:o,isMobile:a}):g.jsx("div",{ref:i,className:vv.className,"data-debug":o,"data-mobile":a,"data-testid":"tl-watermark-licensed",draggable:!1,...s,children:g.jsx("button",{draggable:!1,role:"button",onPointerDown:d=>{r.markEventAsHandled(d),Nt(d)},title:"Build infinite canvas applications with the tldraw SDK. Learn more at https://tldraw.dev.",onClick:()=>{pv.openWindow(c,"_blank")},style:{mask:l,WebkitMask:l}})})}),POe=w.memo(function(){const e=ue(),n=vv.className,r=`
/* ------------------- SEE LICENSE -------------------
The tldraw watermark is part of tldraw's license. It is shown for unlicensed
or "licensed-with-watermark" users. By using this library, you agree to
preserve the watermark's behavior, keeping it visible, unobscured, and
available to user-interaction.

To remove the watermark, please purchase a license at tldraw.dev.
*/

.${n} {
	position: absolute;
	bottom: max(var(--tl-space-2), env(safe-area-inset-bottom));
	right: max(var(--tl-space-2), env(safe-area-inset-right));
	width: 96px;
	height: 32px;
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: var(--tl-layer-watermark) !important;
	background-color: color-mix(in srgb, var(--tl-color-background) 62%, transparent);
	opacity: 1;
	border-radius: 5px;
	pointer-events: all;
	padding: 2px;
	box-sizing: content-box;
}

.${n} > button {
	position: absolute;
	width: 96px;
	height: 32px;
	pointer-events: all;
	cursor: inherit;
	color: var(--tl-color-text);
	opacity: .38;
	border: 0;
	padding: 0;
	background-color: currentColor;
}

.${n}[data-debug='true'] {
	bottom: max(46px, env(safe-area-inset-bottom));
}

.${n}[data-mobile='true'] {
	border-radius: 4px 0px 0px 4px;
	right: max(-2px, calc(env(safe-area-inset-right) - 2px));
	width: 8px;
	height: 48px;
}

.${n}[data-mobile='true'] > button {
	width: 8px;
	height: 32px;
}

.${n}[data-unlicensed='true'] > button {
	font-size: 100px;
	position: absolute;
	pointer-events: all;
	cursor: pointer;
	color: var(--tl-color-text);
	opacity: 0.8;
	border: 0;
	padding: 0;
	background-color: transparent;
	font-size: 11px;
	font-weight: 600;
	text-align: center;
}

.${n}[data-mobile='true'][data-unlicensed='true'] > button {
	display: none;
}

@media (hover: hover) {
	.${n} > button {
		pointer-events: none;
	}

	.${n}:hover {
		background-color: var(--tl-color-background);
		transition: background-color 0.2s ease-in-out;
		transition-delay: 0.32s;
	}

	.${n}:hover > button {
		animation: ${n}_delayed_link 0.2s forwards ease-in-out;
		animation-delay: 0.32s;
	}

	.${n} > button:focus-visible {
		opacity: 1;
	}
}

@keyframes ${n}_delayed_link {
	0% {
		cursor: inherit;
		opacity: .38;
		pointer-events: none;
	}
	100% {
		cursor: pointer;
		opacity: 1;
		pointer-events: all;
	}
}`;return g.jsx("style",{nonce:e.options.nonce,children:r})}),OOe=[],MOe=[],ROe=[],DOe="tl-container",NOe=w.memo(function({store:e,components:n,className:r,user:o,options:a,...s}){const[i,l]=w.useState(null),c=w.useMemo(()=>o??YY(),[o]),d=(n==null?void 0:n.ErrorFallback)===void 0?FY:n==null?void 0:n.ErrorFallback,u={...s,shapeUtils:s.shapeUtils??OOe,bindingUtils:s.bindingUtils??MOe,tools:s.tools??ROe,components:n,options:kg(a)};return g.jsx("div",{ref:l,"data-tldraw":MN,draggable:!1,className:pt(`${DOe} tl-theme__light`,r),tabIndex:-1,role:"application","aria-label":(a==null?void 0:a.branding)??"tldraw",children:g.jsx(m0,{fallback:d,onError:m=>FD(m,{tags:{origin:"react.tldraw-before-app"}}),children:i&&g.jsx(vOe,{licenseKey:s.licenseKey,children:g.jsx(jY,{container:i,children:g.jsx(XOe,{overrides:n,children:e?e instanceof mN?g.jsx(gZ,{...u,store:e,user:c}):g.jsx(hZ,{...u,store:e,user:c}):g.jsx(LOe,{...u,store:e,user:c})})})})})})});function LOe(t){const{defaultName:e,snapshot:n,initialData:r,shapeUtils:o,bindingUtils:a,persistenceKey:s,sessionId:i,user:l,assets:c,migrations:d}=t,u=lOe({shapeUtils:o,bindingUtils:a,initialData:r,persistenceKey:s,sessionId:i,defaultName:e,snapshot:n,assets:c,migrations:d});return g.jsx(hZ,{...t,store:u,user:l})}const hZ=w.memo(function({store:e,user:n,...r}){const o=Ao();w.useLayoutEffect(()=>{n.userPreferences.get().colorScheme==="dark"&&(o.classList.remove("tl-theme__light"),o.classList.add("tl-theme__dark"))},[o,n]);const{LoadingScreen:a}=cr();switch(e.status){case"error":throw e.error;case"loading":return a?g.jsx(a,{}):null}return g.jsx(gZ,{...r,store:e.store,user:n})}),lP=()=>document.location.search.includes("tldraw_preserve_focus");function gZ({onMount:t,children:e,store:n,tools:r,shapeUtils:o,bindingUtils:a,user:s,initialState:i,autoFocus:l=!0,inferDarkMode:c,cameraOptions:d,textOptions:u,options:m,licenseKey:h,deepLinks:y,getShapeVisibility:v,assetUrls:x}){const{ErrorFallback:S}=cr(),T=Ao(),[C,_]=fZ(null),I=w.useRef(null),P=kg(y===!0?{}:y),M=w.useRef({autoFocus:l&&!lP(),inferDarkMode:c,initialState:i,cameraOptions:d,deepLinks:P});w.useLayoutEffect(()=>{M.current={autoFocus:l&&!lP(),inferDarkMode:c,initialState:i,cameraOptions:d,deepLinks:P}},[l,c,i,d,P]),w.useLayoutEffect(()=>{const{autoFocus:j,inferDarkMode:q,initialState:U,cameraOptions:Y,deepLinks:X}=M.current,ee=new tt({store:n,shapeUtils:o,bindingUtils:a,tools:r,getContainer:()=>T,user:s,initialState:U,autoFocus:j,inferDarkMode:q,cameraOptions:Y,textOptions:u,options:m,licenseKey:h,getShapeVisibility:v,fontAssetUrls:x==null?void 0:x.fonts});return ee.updateViewportScreenBounds(I.current??T),X&&(X!=null&&X.getUrl?ee.navigateToDeepLink({...X,url:X.getUrl(ee)}):ee.navigateToDeepLink(X)),_(ee),()=>{ee.dispose()}},[a,T,m,o,n,r,s,_,h,v,u,x]),w.useLayoutEffect(()=>{if(C&&P)return C.registerDeepLinkListener(P)},[C,P]),w.useLayoutEffect(()=>{C&&d&&C.setCameraOptions(d)},[C,d]);const D=w.useSyncExternalStore(w.useCallback(j=>C?(C.on("crash",j),()=>C.off("crash",j)):()=>{},[C]),()=>(C==null?void 0:C.getCrashingError())??null);w.useEffect(function(){if(!C)return;function q(){C&&C.focus()}function U(){C&&C.blur()}if(l&&lP())return C.getContainer().addEventListener("pointerdown",q),document.body.addEventListener("pointerdown",U),()=>{var Y;(Y=C.getContainer())==null||Y.removeEventListener("pointerdown",q),document.body.removeEventListener("pointerdown",U)}},[C,l]);const[F,B]=w.useState(null);let V=F;C!==(V==null?void 0:V.editor)&&(V=null),w.useLayoutEffect(()=>{if(!C)return;if(C.options.maxFontsToLoadBeforeRender===0){B({editor:C,isLoaded:!0});return}let j=!1;return B({editor:C,isLoaded:!1}),C.fonts.loadRequiredFontsForCurrentPage(C.options.maxFontsToLoadBeforeRender).finally(()=>{j||B({editor:C,isLoaded:!0})}),()=>{j=!0}},[C]);const{Canvas:z,LoadingScreen:H}=cr();return!C||!(V!=null&&V.isLoaded)?g.jsxs(g.Fragment,{children:[H&&g.jsx(H,{}),g.jsx("div",{className:"tl-canvas",ref:I})]}):g.jsx(m0,{fallback:S,onError:j=>C.annotateError(j,{origin:"react.tldraw",willCrashApp:!0}),children:D?g.jsx(BOe,{crashingError:D}):g.jsx(PN,{editor:C,children:g.jsxs(jOe,{onMount:t,children:[e??(z?g.jsx(z,{},C.contextId):null),g.jsx(_Oe,{})]})})})}function jOe({children:t,onMount:e}){return uOe(),DPe(),NPe(),LPe(),cOe(),yZ(n=>{const r=n.store.props.onMount(n),o=e==null?void 0:e(n);return()=>{r==null||r(),o==null||o()}}),t}function BOe({crashingError:t}){throw t}function bZ({children:t}){return g.jsx("div",{className:"tl-loading","aria-busy":"true",tabIndex:0,children:t})}function yZ(t){const e=ue(),n=Rc(r=>{let o;return r.run(()=>{o=t==null?void 0:t(r),r.emit("mount")},{history:"ignore"}),window.tldrawReady=!0,o});bt.useLayoutEffect(()=>{if(e)return n==null?void 0:n(e)},[e,n])}const FOe=()=>{const{Spinner:t}=cr();return g.jsx(bZ,{children:t?g.jsx(t,{}):null})};function vZ(t,e=!0){const n=t.length;if(n<2)return"";let r=t[0],o=t[1];if(n===2)return`M${Aa(r)}L${Aa(o)}`;let a="";for(let s=2,i=n-1;s<i;s++)r=t[s],o=t[s+1],a+=ei(r,o);return e?`M${ei(t[0],t[1])}Q${Aa(t[1])}${ei(t[1],t[2])}T${a}${ei(t[n-1],t[0])}${ei(t[0],t[1])}Z`:`M${Aa(t[0])}Q${Aa(t[1])}${ei(t[1],t[2])}${t.length>3?"T":""}${a}L${Aa(t[n-1])}`}function j9({scribble:t,zoom:e,color:n,opacity:r,className:o}){return t.points.length?g.jsx("svg",{className:o&&pt("tl-overlays__item",o),children:g.jsx("path",{className:"tl-scribble",d:vZ(t.points,!1),stroke:n??`var(--tl-color-${t.color})`,fill:"none",strokeWidth:8/e,opacity:r??t.opacity})}):null}function zOe({bounds:t,rotation:e}){const n=ue(),r=w.useRef(null),o=ce("only selected shape",()=>n.getOnlySelectedShape(),[n]),a=o?n.getShapeUtil(o).expandSelectionOutlinePx(o):0;return cv(r,t==null?void 0:t.x,t==null?void 0:t.y,1,e,{x:-a,y:-a}),t=a instanceof Be?t.clone().expand(a).zeroFix():t.clone().expandBy(a).zeroFix(),g.jsx("svg",{ref:r,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:g.jsx("rect",{className:pt("tl-selection__fg__outline"),width:ie(t.width),height:ie(t.height)})})}const UOe=()=>g.jsx("div",{className:"tl-shape-error-boundary"}),qOe=w.memo(({shape:t,util:e})=>bw("Indicator: "+t.type,()=>e.indicator(e.editor.store.unsafeGetWithoutCapture(t.id))),(t,e)=>t.shape.props===e.shape.props&&t.shape.meta===e.shape.meta),HOe=w.memo(({editor:t,id:e})=>{const n=ce("shape for indicator",()=>t.store.get(e),[t,e]),{ShapeIndicatorErrorFallback:r}=cr();return!n||n.isLocked?null:g.jsx(m0,{fallback:r,onError:o=>t.annotateError(o,{origin:"react.shapeIndicator",willCrashApp:!1}),children:g.jsx(qOe,{shape:n,util:t.getShapeUtil(n)},n.id)})}),B9=w.memo(function({shapeId:e,className:n,color:r,hidden:o,opacity:a}){const s=ue(),i=w.useRef(null);return Rf("indicator transform",()=>{if(o)return;const l=i.current;if(!l)return;const c=s.getShapePageTransform(e);c&&l.style.setProperty("transform",c.toCssString())},[s,e,o]),w.useLayoutEffect(()=>{const l=i.current;l&&l.style.setProperty("display",o?"none":"block")},[o]),g.jsx("svg",{ref:i,className:pt("tl-overlays__item",n),"aria-hidden":"true",children:g.jsx("g",{className:"tl-shape-indicator",stroke:r??"var(--tl-color-selected)",opacity:a,children:g.jsx(HOe,{editor:s,id:e})})})}),$Oe=()=>g.jsx("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"}),xZ=w.memo(function({hideAll:e,showAll:n}){const r=ue();if(e&&n)throw Error("You cannot set both hideAll and showAll props to true, cmon now");const o=w.useRef(new Set),a=ce("should display selected ids",()=>{const l=o.current,c=new Set,d=r.getInstanceState(),u=d.isChangingStyle,m=r.isInAny("select.idle","select.editing_shape"),h=r.isInAny("select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","select.pointing_handle");if(u||!(m||h))return o.current=c,c;for(const y of r.getSelectedShapeIds())c.add(y);if(m&&d.isHoveringCanvas&&!d.isCoarsePointer){const y=r.getHoveredShapeId();y&&c.add(y)}if(l.size!==c.size)return o.current=c,c;for(const y of c)if(!l.has(y))return o.current=c,c;return l},[r]),s=ce("rendering shapes",()=>r.getRenderingShapes(),[r]),{ShapeIndicator:i}=cr();return i?s.map(({id:l})=>g.jsx(i,{shapeId:l,hidden:!n&&(e||!a.has(l))},l+"_indicator")):null}),VOe=w.forwardRef(function({children:e,shape:n,isBackground:r,...o},a){const s="fill"in n.props&&n.props.fill!=="none";return g.jsx("div",{ref:a,"data-shape-type":n.type,"data-shape-is-filled":r?void 0:s,"data-shape-id":n.id,draggable:!1,...o,className:pt("tl-shape",r&&"tl-shape-background",o.className),children:e})});function GOe({points:t,zoom:e}){const n=2.5/e,r=t.reduce((m,h)=>Math.min(m,h.x),1/0),o=t.reduce((m,h)=>Math.max(m,h.x),-1/0),a=t.reduce((m,h)=>Math.min(m,h.y),1/0),s=t.reduce((m,h)=>Math.max(m,h.y),-1/0),i=t.some(m=>m.x===r&&m.y===a);let l,c,d,u;return i?(l=r,c=a,d=o,u=s):(l=r,c=s,d=o,u=a),g.jsxs("g",{className:"tl-snap-indicator",stroke:"lime",children:[g.jsx("line",{x1:l,y1:c,x2:d,y2:u}),t.map((m,h)=>g.jsx("g",{transform:`translate(${m.x},${m.y})`,children:g.jsx("path",{className:"tl-snap-point",d:`M ${-n},${-n} L ${n},${n} M ${-n},${n} L ${n},${-n}`})},h))]})}function KOe({gaps:t,direction:e,zoom:n}){const r=3.5/n;let o=[-1/0,1/0],a=null;const s=e==="horizontal";for(const l of t){if(a=Gl(o[0],o[1],s?l.startEdge[0].y:l.startEdge[0].x,s?l.startEdge[1].y:l.startEdge[1].x),a)o=a;else continue;if(a=Gl(o[0],o[1],s?l.endEdge[0].y:l.endEdge[0].x,s?l.endEdge[1].y:l.endEdge[1].x),a)o=a;else continue}if(o===null)return null;const i=(o[0]+o[1])/2;return g.jsx("g",{className:"tl-snap-indicator",stroke:"cyan",children:t.map(({startEdge:l,endEdge:c},d)=>g.jsx(w.Fragment,{children:s?g.jsxs(g.Fragment,{children:[g.jsx("line",{x1:l[0].x,y1:i-2*r,x2:l[1].x,y2:i+2*r}),g.jsx("line",{x1:c[0].x,y1:i-2*r,x2:c[1].x,y2:i+2*r}),g.jsx("line",{x1:l[0].x,y1:i,x2:c[0].x,y2:i}),g.jsx("line",{x1:(l[0].x+c[0].x)/2,y1:i-r,x2:(l[0].x+c[0].x)/2,y2:i+r})]}):g.jsxs(g.Fragment,{children:[g.jsx("line",{x1:i-2*r,y1:l[0].y,x2:i+2*r,y2:l[1].y}),g.jsx("line",{x1:i-2*r,y1:c[0].y,x2:i+2*r,y2:c[1].y}),g.jsx("line",{x1:i,y1:l[0].y,x2:i,y2:c[0].y}),g.jsx("line",{x1:i-r,y1:(l[0].y+c[0].y)/2,x2:i+r,y2:(l[0].y+c[0].y)/2})]})},d))})}function WOe({className:t,line:e,zoom:n}){return g.jsx("svg",{className:pt("tl-overlays__item",t),"aria-hidden":"true",children:e.type==="points"?g.jsx(GOe,{...e,zoom:n}):e.type==="gaps"?g.jsx(KOe,{...e,zoom:n}):null})}function SZ(t){return g.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16","aria-hidden":"false",...t,className:pt("tl-spinner",t.className),children:g.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[g.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),g.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor"})]})})}const YOe=()=>null,EZ=w.createContext(null);function XOe({overrides:t={},children:e}){const n=kg(t),r=w.useMemo(()=>({Background:s2e,Brush:GI,Canvas:pRe,CollaboratorBrush:GI,CollaboratorCursor:a9,CollaboratorHint:C2e,CollaboratorScribble:j9,CollaboratorShapeIndicator:B9,Cursor:a9,Grid:I2e,Handle:P2e,Handles:O2e,InFrontOfTheCanvas:null,LoadingScreen:FOe,OnTheCanvas:null,Overlays:null,Scribble:j9,SelectionBackground:null,SelectionForeground:zOe,ShapeIndicator:B9,ShapeIndicators:xZ,ShapeWrapper:VOe,SnapIndicator:WOe,Spinner:SZ,SvgDefs:YOe,ZoomBrush:GI,ErrorFallback:FY,ShapeErrorFallback:UOe,ShapeIndicatorErrorFallback:$Oe,...n}),[n]);return g.jsx(EZ.Provider,{value:r,children:e})}function cr(){const t=w.useContext(EZ);if(!t)throw new Error("useEditorComponents must be used inside of <EditorComponentsProvider />");return t}const JOe=["textarea","input"];function QOe(t){const e=ue();w.useEffect(()=>{const n=t.current;if(!n)return;const r=o=>{var a;if(o instanceof PointerEvent&&o.pointerType==="pen"){e.markEventAsHandled(o);const{target:s}=o;if(JOe.includes((a=s.tagName)==null?void 0:a.toLocaleLowerCase())||s.isContentEditable||e.isIn("select.editing_shape"))return;Nt(o)}};return n.addEventListener("touchstart",r),n.addEventListener("touchend",r),()=>{n.removeEventListener("touchstart",r),n.removeEventListener("touchend",r)}},[e,t])}function ZOe(t,e,n){return Math.max(e,Math.min(t,n))}const Oa={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function F9(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function z9(t,e,n,r=.15){return r===0?ZOe(t,e,n):t<e?-F9(e-t,n-e,r)+e:t>n?+F9(t-n,n-e,r)+n:t}function eMe(t,[e,n],[r,o]){const[[a,s],[i,l]]=t;return[z9(e,a,s,r),z9(n,i,l,o)]}function tMe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nMe(t){var e=tMe(t,"string");return typeof e=="symbol"?e:String(e)}function Ka(t,e,n){return e=nMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U9(Object(n),!0).forEach(function(r){Ka(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const TZ={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function q9(t){return t?t[0].toUpperCase()+t.slice(1):""}const rMe=["enter","leave"];function oMe(t=!1,e){return t&&!rMe.includes(e)}function aMe(t,e="",n=!1){const r=TZ[t],o=r&&r[e]||e;return"on"+q9(t)+q9(o)+(oMe(n,o)?"Capture":"")}const sMe=["gotpointercapture","lostpointercapture"];function iMe(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=sMe.includes(e)?"capturecapture":"capture",o=!!~e.indexOf(r);return o&&(e=e.replace("capture","")),{device:e,capture:o,passive:n}}function lMe(t,e=""){const n=TZ[t],r=n&&n[e]||e;return t+r}function wZ(t){return"touches"in t}function cMe(t){return wZ(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function uMe(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function OM(t,e){try{const n=e.clientX-t.clientX,r=e.clientY-t.clientY,o=(e.clientX+t.clientX)/2,a=(e.clientY+t.clientY)/2,s=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:s,origin:[o,a]}}catch{}return null}function dMe(t){return uMe(t).map(e=>e.identifier)}function H9(t,e){const[n,r]=Array.from(t.touches).filter(o=>e.includes(o.identifier));return OM(n,r)}const $9=40,V9=800;function CZ(t){let{deltaX:e,deltaY:n,deltaMode:r}=t;return r===1?(e*=$9,n*=$9):r===2&&(e*=V9,n*=V9),[e,n]}function pMe(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:o,ctrlKey:a}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:o,ctrlKey:a})}return e}function FE(t,...e){return typeof t=="function"?t(...e):t}function fMe(){}function mMe(...t){return t.length===0?fMe:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function G9(t,e){return Object.assign({},e,t||{})}const hMe=32;class AZ{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:o}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=o,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?FE(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:o}=this;n.args=this.args;let a=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,pMe(e)),o.down=o.pressed=o.buttons%2===1||o.touches>0,a=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const P=n._delta.map(Math.abs);Oa.addTo(n._distance,P)}this.axisIntent&&this.axisIntent(e);const[s,i]=n._movement,[l,c]=r.threshold,{_step:d,values:u}=n;if(r.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(s)>=l&&u[0]),d[1]===!1&&(d[1]=Math.abs(i)>=c&&u[1])):(d[0]===!1&&(d[0]=Math.abs(s)>=l&&Math.sign(s)*l),d[1]===!1&&(d[1]=Math.abs(i)>=c&&Math.sign(i)*c)),n.intentional=d[0]!==!1||d[1]!==!1,!n.intentional)return;const m=[0,0];if(r.hasCustomTransform){const[P,M]=u;m[0]=d[0]!==!1?P-d[0]:0,m[1]=d[1]!==!1?M-d[1]:0}else m[0]=d[0]!==!1?s-d[0]:0,m[1]=d[1]!==!1?i-d[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(m);const h=n.offset,y=n._active&&!n._blocked||n.active;y&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=o[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=FE(r.bounds,n)),this.setup&&this.setup()),n.movement=m,this.computeOffset()));const[v,x]=n.offset,[[S,T],[C,_]]=n._bounds;n.overflow=[v<S?-1:v>T?1:0,x<C?-1:x>_?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const I=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=eMe(n._bounds,n.offset,I),n.delta=Oa.sub(n.offset,h),this.computeMovement(),y&&(!n.last||a>hMe)){n.delta=Oa.sub(n.offset,h);const P=n.delta.map(Math.abs);Oa.addTo(n.distance,P),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&a>0&&(n.velocity=[P[0]/a,P[1]/a],n.timeDelta=a)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const o=this.handler(Kr(Kr(Kr({},n),e),{},{[this.aliasKey]:e.values}));o!==void 0&&(e.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function gMe([t,e],n){const r=Math.abs(t),o=Math.abs(e);if(r>o&&r>n)return"x";if(o>r&&o>n)return"y"}class bMe extends AZ{constructor(...e){super(...e),Ka(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Oa.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Oa.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const o=typeof r.axisThreshold=="object"?r.axisThreshold[cMe(e)]:r.axisThreshold;n.axis=gMe(n._movement,o)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const yMe=t=>t,K9=.15,_Z={enabled(t=!0){return t},eventOptions(t,e,n){return Kr(Kr({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[K9,K9];case!1:return[0,0];default:return Oa.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Oa.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||yMe},threshold(t){return Oa.toVector(t,0)}},vMe=0,xv=Kr(Kr({},_Z),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=vMe){return t},bounds(t={}){if(typeof t=="function")return a=>xv.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:o=1/0}=t;return[[e,n],[r,o]]}}),Sv=typeof window<"u"&&window.document&&window.document.createElement;function kZ(){return Sv&&"ontouchstart"in window}function xMe(){return kZ()||Sv&&window.navigator.maxTouchPoints>1}function SMe(){return Sv&&"onpointerdown"in window}function EMe(){return Sv&&"exitPointerLock"in window.document}function TMe(){try{return"constructor"in GestureEvent}catch{return!1}}const Cl={isBrowser:Sv,gesture:TMe(),touch:kZ(),touchscreen:xMe(),pointer:SMe(),pointerLock:EMe()},wMe=250,CMe=180,AMe=.5,_Me=50,kMe=250,IMe=10,W9={mouse:0,touch:0,pen:8};Kr(Kr({},xv),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&Cl.pointerLock,Cl.touch&&n?"touch":this.pointerLock?"mouse":Cl.pointer&&!o?"pointer":Cl.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?wMe:void 0,!(!Cl.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:o=void 0}){const a=Oa.toVector(t,n?r:o?1:0);return this.filterTaps=n,this.tapsThreshold=r,a},swipe({velocity:t=AMe,distance:e=_Me,duration:n=kMe}={}){return{velocity:this.transform(Oa.toVector(t)),distance:this.transform(Oa.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return CMe;case!1:return 0;default:return t}},axisThreshold(t){return t?Kr(Kr({},W9),t):W9},keyboardDisplacement(t=IMe){return t}});function IZ(t){const[e,n]=t.overflow,[r,o]=t._delta,[a,s]=t._direction;(e<0&&r>0&&a<0||e>0&&r<0&&a>0)&&(t._movement[0]=t._movementBound[0]),(n<0&&o>0&&s<0||n>0&&o<0&&s>0)&&(t._movement[1]=t._movementBound[1])}const PMe=30,OMe=100;class MMe extends AZ{constructor(...e){super(...e),Ka(this,"ingKey","pinching"),Ka(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:n,lastOffset:r}=this.state;e==="wheel"?this.state.offset=Oa.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:n}=this.state;this.state.movement=[e[0]/n[0],e[1]-n[1]]}axisIntent(){const e=this.state,[n,r]=e._movement;if(!e.axis){const o=Math.abs(n)*PMe-Math.abs(r);o<0?e.axis="angle":o>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(a=>r.has(a))||r.size<2)return;this.start(e),n._touchIds=Array.from(r).slice(0,2);const o=H9(e,n._touchIds);o&&this.pinchStart(e,o)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const n=this.state,r=n._pointerEvents,o=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(s=>o.has(s))||(r.size<2&&r.set(e.pointerId,e),n._pointerEvents.size<2))return;this.start(e);const a=OM(...Array.from(r.values()));a&&this.pinchStart(e,a)}pinchStart(e,n){const r=this.state;r.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const n=H9(e,this.state._touchIds);n&&this.pinchMove(e,n)}pointerMove(e){const n=this.state._pointerEvents;if(n.has(e.pointerId)&&n.set(e.pointerId,e),!this.state._active)return;const r=OM(...Array.from(n.values()));r&&this.pinchMove(e,r)}pinchMove(e,n){const r=this.state,o=r._values[1],a=n.angle-o;let s=0;Math.abs(a)>270&&(s+=Math.sign(a)),this.computeValues([n.distance,n.angle-360*s]),r.origin=n.origin,r.turns=s,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const n=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}n._pointerEvents.has(e.pointerId)&&n._pointerEvents.delete(e.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const n=this.state;n._active||(this.start(e),this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY];const r=n._movement;n._movement=[e.scale-1,e.rotation],n._delta=Oa.sub(n._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const n=this.config.modifierKey;n&&(Array.isArray(n)?!n.find(r=>e[r]):!e[n])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-CZ(e)[1]/OMe*r.offset[0],0],Oa.addTo(r._movement,r._delta),IZ(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const n=this.config.device;n&&(e(n,"start",this[n+"Start"].bind(this)),e(n,"change",this[n+"Move"].bind(this)),e(n,"end",this[n+"End"].bind(this)),e(n,"cancel",this[n+"End"].bind(this)),e("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const RMe=Kr(Kr({},_Z),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Cl.touch&&Cl.gesture)return"gesture";if(Cl.touch&&r)return"touch";if(Cl.touchscreen){if(Cl.pointer)return"pointer";if(Cl.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const o=s=>{const i=G9(FE(n,s),{min:-1/0,max:1/0});return[i.min,i.max]},a=s=>{const i=G9(FE(r,s),{min:-1/0,max:1/0});return[i.min,i.max]};return typeof n!="function"&&typeof r!="function"?[o(),a()]:s=>[o(s),a(s)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Oa.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Kr(Kr({},xv),{},{mouseOnly:(t=!0)=>t});class DMe extends bMe{constructor(...e){super(...e),Ka(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const n=this.state;n._delta=CZ(e),Oa.addTo(n._movement,n._delta),IZ(n),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const NMe=xv;Kr(Kr({},xv),{},{mouseOnly:(t=!0)=>t});const KN=new Map,MM=new Map;function LMe(t){KN.set(t.key,t.engine),MM.set(t.key,t.resolver)}const jMe={key:"pinch",engine:MMe,resolver:RMe},BMe={key:"wheel",engine:DMe,resolver:NMe};function FMe(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function zMe(t,e){if(t==null)return{};var n=FMe(t,e),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)r=a[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const UMe={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Cl.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},qMe=["target","eventOptions","window","enabled","transform"];function T1(t={},e){const n={};for(const[r,o]of Object.entries(e))switch(typeof o){case"function":n[r]=o.call(n,t[r],r,t);break;case"object":n[r]=T1(t[r],o);break;case"boolean":o&&(n[r]=t[r]);break}return n}function HMe(t,e,n={}){const r=t,{target:o,eventOptions:a,window:s,enabled:i,transform:l}=r,c=zMe(r,qMe);if(n.shared=T1({target:o,eventOptions:a,window:s,enabled:i,transform:l},UMe),e){const d=MM.get(e);n[e]=T1(Kr({shared:n.shared},c),d)}else for(const d in c){const u=MM.get(d);u&&(n[d]=T1(Kr({shared:n.shared},c[d]),u))}return n}class PZ{constructor(e,n){Ka(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,o,a){const s=this._listeners,i=lMe(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Kr(Kr({},l),a);e.addEventListener(i,o,c);const d=()=>{e.removeEventListener(i,o,c),s.delete(d)};return s.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class $Me{constructor(){Ka(this,"_timeouts",new Map)}add(e,n,r=140,...o){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...o))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class VMe{constructor(e){Ka(this,"gestures",new Set),Ka(this,"_targetEventStore",new PZ(this)),Ka(this,"gestureEventStores",{}),Ka(this,"gestureTimeoutStores",{}),Ka(this,"handlers",{}),Ka(this,"config",{}),Ka(this,"pointerIds",new Set),Ka(this,"touchIds",new Set),Ka(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),GMe(this,e)}setEventIds(e){if(wZ(e))return this.touchIds=new Set(dMe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=HMe(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let o;if(!(n.target&&(o=n.target(),!o))){if(n.enabled){for(const s of this.gestures){const i=this.config[s],l=Y9(r,i.eventOptions,!!o);if(i.enabled){const c=KN.get(s);new c(this,e,s).bind(l)}}const a=Y9(r,n.eventOptions,!!o);for(const s in this.nativeHandlers)a(s,"",i=>this.nativeHandlers[s](Kr(Kr({},this.state.shared),{},{event:i,args:e})),void 0,!0)}for(const a in r)r[a]=mMe(...r[a]);if(!o)return r;for(const a in r){const{device:s,capture:i,passive:l}=iMe(a);this._targetEventStore.add(o,s,"",r[a],{capture:i,passive:l})}}}}function Jm(t,e){t.gestures.add(e),t.gestureEventStores[e]=new PZ(t,e),t.gestureTimeoutStores[e]=new $Me}function GMe(t,e){e.drag&&Jm(t,"drag"),e.wheel&&Jm(t,"wheel"),e.scroll&&Jm(t,"scroll"),e.move&&Jm(t,"move"),e.pinch&&Jm(t,"pinch"),e.hover&&Jm(t,"hover")}const Y9=(t,e,n)=>(r,o,a,s={},i=!1)=>{var l,c;const d=(l=s.capture)!==null&&l!==void 0?l:e.capture,u=(c=s.passive)!==null&&c!==void 0?c:e.passive;let m=i?r:aMe(r,o,d);n&&u&&(m+="Passive"),t[m]=t[m]||[],t[m].push(a)},KMe=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function WMe(t){const e={},n={},r=new Set;for(let o in t)KMe.test(o)?(r.add(RegExp.lastMatch),n[o]=t[o]):e[o]=t[o];return[n,e,r]}function Qm(t,e,n,r,o,a){if(!t.has(n)||!KN.has(r))return;const s=n+"Start",i=n+"End",l=c=>{let d;return c.first&&s in e&&e[s](c),n in e&&(d=e[n](c)),c.last&&i in e&&e[i](c),d};o[r]=l,a[r]=a[r]||{}}function YMe(t,e){const[n,r,o]=WMe(t),a={};return Qm(o,n,"onDrag","drag",a,e),Qm(o,n,"onWheel","wheel",a,e),Qm(o,n,"onScroll","scroll",a,e),Qm(o,n,"onPinch","pinch",a,e),Qm(o,n,"onMove","move",a,e),Qm(o,n,"onHover","hover",a,e),{handlers:a,config:e,nativeHandlers:r}}function XMe(t,e={},n,r){const o=bt.useMemo(()=>new VMe(t),[]);if(o.applyHandlers(t,r),o.applyConfig(e,n),bt.useEffect(o.effect.bind(o)),bt.useEffect(()=>o.clean.bind(o),[]),e.target===void 0)return o.bind.bind(o)}function JMe(t){return t.forEach(LMe),function(n,r){const{handlers:o,nativeHandlers:a,config:s}=YMe(n,r||{});return XMe(o,s,void 0,a)}}const X9=10,QMe=/Mac|iPod|iPhone|iPad/.test(typeof window>"u"?"node":window.navigator.platform);function OZ(t){let{deltaY:e,deltaX:n}=t,r=0;return t.ctrlKey||t.altKey||t.metaKey?r=(Math.abs(e)>X9?X9*Math.sign(e):e)/100:t.shiftKey&&!QMe&&(n=e,e=0),{x:-n,y:-e,z:-r}}const ZMe=JMe([BMe,jMe]);let Zm;const eRe=t=>Zm===void 0?(Zm=t,!1):t-Zm>120&&t-Zm<160?(Zm=t,!0):(Zm=t,!1);function tRe(t){const e=ue(),n=w.useMemo(()=>{let r="not sure";const o=({event:y})=>{if(!e.getInstanceState().isFocused||(r="not sure",eRe(Date.now())))return;const v=e.getEditingShapeId();if(v){const T=e.getShape(v);if(T&&e.getShapeUtil(T).canScroll(T)){const _=e.getShapePageBounds(v);if(_!=null&&_.containsPoint(e.inputs.currentPagePoint))return}}Nt(y),y.stopPropagation();const x=OZ(y);if(x.x===0&&x.y===0)return;const S={type:"wheel",name:"wheel",delta:x,point:new R(y.clientX,y.clientY),shiftKey:y.shiftKey,altKey:y.altKey,ctrlKey:y.metaKey||y.ctrlKey,metaKey:y.metaKey,accelKey:Pr(y)};e.dispatch(S)};let a=1,s=1,i=0;const l=new R,c=new R,d=y=>{const v=t.current;r="not sure";const{event:x,origin:S,da:T}=y;x instanceof WheelEvent||(x.target===v||v!=null&&v.contains(x.target))&&(c.x=S[0],c.y=S[1],l.x=S[0],l.y=S[1],a=T[0],s=e.getZoomLevel(),e.dispatch({type:"pinch",name:"pinch_start",point:{x:S[0],y:S[1],z:e.getZoomLevel()},delta:{x:0,y:0},shiftKey:x.shiftKey,altKey:x.altKey,ctrlKey:x.metaKey||x.ctrlKey,metaKey:x.metaKey,accelKey:Pr(x)}))},u=y=>{if(y&&(r="zooming"),r==="zooming")return;const v=Math.abs(i-a),x=R.Dist(l,c);switch(r){case"not sure":{v>24?r="zooming":x>16&&(r="panning");break}case"panning":{v>64&&(r="zooming");break}}};return{onWheel:o,onPinchStart:d,onPinchEnd:y=>{const v=t.current,{event:x,origin:S,offset:T}=y;if(x instanceof WheelEvent||!(x.target===v||v!=null&&v.contains(x.target)))return;const C=T[0]**e.getCameraOptions().zoomSpeed;r="not sure",e.timers.requestAnimationFrame(()=>{e.dispatch({type:"pinch",name:"pinch_end",point:{x:S[0],y:S[1],z:C},delta:{x:S[0],y:S[1]},shiftKey:x.shiftKey,altKey:x.altKey,ctrlKey:x.metaKey||x.ctrlKey,metaKey:x.metaKey,accelKey:Pr(x)})})},onPinch:y=>{const v=t.current,{event:x,origin:S,offset:T,da:C}=y;if(x instanceof WheelEvent||!(x.target===v||v!=null&&v.contains(x.target)))return;const _=y.type==="gesturechange"||y.type==="gestureend";i=C[0];const I=S[0]-c.x,P=S[1]-c.y;switch(c.x=S[0],c.y=S[1],u(_),r){case"zooming":{const M=T[0]**e.getCameraOptions().zoomSpeed;e.dispatch({type:"pinch",name:"pinch",point:{x:S[0],y:S[1],z:M},delta:{x:I,y:P},shiftKey:x.shiftKey,altKey:x.altKey,ctrlKey:x.metaKey||x.ctrlKey,metaKey:x.metaKey,accelKey:Pr(x)});break}case"panning":{e.dispatch({type:"pinch",name:"pinch",point:{x:S[0],y:S[1],z:s},delta:{x:I,y:P},shiftKey:x.shiftKey,altKey:x.altKey,ctrlKey:x.metaKey||x.ctrlKey,metaKey:x.metaKey,accelKey:Pr(x)});break}}}}},[e,t]);ZMe(n,{target:t,eventOptions:{passive:!1},pinch:{from:()=>{const{zoomSpeed:r}=e.getCameraOptions();return[e.getZoomLevel()**(1/r),0]},scaleBounds:()=>{const r=e.getBaseZoom(),{zoomSteps:o,zoomSpeed:a}=e.getCameraOptions(),s=o[0]*r;return{max:(o[o.length-1]*r)**(1/a),min:s**(1/a)}}}})}function cP(t,e,n){const r=t.getShape(e),o=t.getShapeHandles(r);return{shape:r,handle:o.find(a=>a.id===n)}}function nRe(t,e){const n=ue();return w.useMemo(()=>{const r=l=>{if(n.wasEventAlreadyHandled(l))return;const c=RE(l.currentTarget);uv(c,l);const{shape:d,handle:u}=cP(n,t,e);u&&n.dispatch({type:"pointer",target:"handle",handle:u,shape:d,name:"pointer_down",...Pa(n,l)})};let o,a;return{onPointerDown:r,onPointerMove:l=>{if(n.wasEventAlreadyHandled(l)||l.clientX===o&&l.clientY===a)return;o=l.clientX,a=l.clientY;const{shape:c,handle:d}=cP(n,t,e);d&&n.dispatch({type:"pointer",target:"handle",handle:d,shape:c,name:"pointer_move",...Pa(n,l)})},onPointerUp:l=>{if(n.wasEventAlreadyHandled(l))return;const c=RE(l.currentTarget);dv(c,l);const{shape:d,handle:u}=cP(n,t,e);u&&n.dispatch({type:"pointer",target:"handle",handle:u,shape:d,name:"pointer_up",...Pa(n,l)})}}},[n,t,e])}function rRe(t){const e=ue();w.useLayoutEffect(()=>{const n=OK(()=>{t.current&&e.updateViewportScreenBounds(t.current)},200,{trailing:!0}),r=e.timers.setInterval(n,1e3);window.addEventListener("resize",n);const o=new ResizeObserver(i=>{i[0].contentRect&&n()}),a=t.current;let s=null;return a&&(o.observe(a),s=oRe(a),s.addEventListener("scroll",n)),()=>{clearInterval(r),window.removeEventListener("resize",n),o.disconnect(),s==null||s.removeEventListener("scroll",n),n.cancel()}},[e,t])}/*!
 * Author: excalidraw
 * MIT License: https://github.com/excalidraw/excalidraw/blob/master/LICENSE
 * https://github.com/excalidraw/excalidraw/blob/48c3465b19f10ec755b3eb84e21a01a468e96e43/packages/excalidraw/utils.ts#L600
 */const oRe=t=>{let e=t.parentElement;for(;e;){if(e===document.body)return document;const{overflowY:n}=window.getComputedStyle(e);if(e.scrollHeight>e.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return e;e=e.parentElement}return document};function aRe(t=!0){const[e,n]=w.useState(0),r=ue();w.useEffect(()=>{if(!t)return;const o=()=>n(a=>a+1);return r.on("tick",o),()=>{r.off("tick",o)}},[r,t])}const sRe=Co(function({showStroke:e=!0,showVertices:n=!0,showClosestPointOnOutline:r=!0}){const o=ue();aRe(r);const a=o.getZoomLevel(),s=o.getRenderingShapes(),{inputs:{currentPagePoint:i}}=o;return g.jsx("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:s.map(l=>{const c=o.getShape(l.id);if(c.type==="group")return null;const d=o.getShapeGeometry(c),u=o.getShapePageTransform(c),m=o.getPointInShapeSpace(c,i),h=d.nearestPoint(m),y=d.distanceToPoint(m,!0),v=Math.abs(y)*a,x=y<0,{vertices:S}=d;return g.jsxs("g",{transform:u.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[e&&g.jsx("g",{stroke:d.debugColor??"red",opacity:"1",strokeWidth:2/a,fill:"none",children:g.jsx(MZ,{geometry:d})}),n&&S.map((T,C)=>g.jsx("circle",{cx:T.x,cy:T.y,r:2/a,fill:`hsl(${nc(C,[0,S.length-1],[120,200])}, 100%, 50%)`,stroke:"black",strokeWidth:1/a},`v${C}`)),r&&v<150&&g.jsx("line",{x1:h.x,y1:h.y,x2:m.x,y2:m.y,opacity:1-v/150,stroke:x?"goldenrod":"dodgerblue",strokeWidth:2/a})]},l.id+"_outline")})})});function MZ({geometry:t}){return t instanceof pi?g.jsx("g",{stroke:t.debugColor,children:[...t.children,...t.ignoredChildren].map((e,n)=>g.jsx(MZ,{geometry:e},n))}):g.jsx("path",{d:t.toSimpleSvgPath(),stroke:t.debugColor})}function RZ(t){return uwe(t)}function DZ(){const t=ue(),e=uAe("userIds",()=>RZ(t.getCollaborators().map(n=>n.userId)).sort(),{isEqual:(n,r)=>{var o;return n.join(",")===((o=r.join)==null?void 0:o.call(r,","))}},[t]);return ce(e)}function zw(t){const e=ue();return ce(`latestPresence:${t}`,()=>e.getCollaborators().find(r=>r.userId===t),[e,t])??null}const iRe=Co(function(){return DZ().map(n=>g.jsx(lRe,{collaboratorId:n},n))}),lRe=Co(function({collaboratorId:e}){const n=ue(),r=zw(e),o=uRe(n,r);if(!(r&&r.currentPageId===n.getCurrentPageId()))return null;switch(o){case"inactive":{const{followingUserId:a,highlightedUserIds:s}=n.getInstanceState();if(!(a===r.userId||s.includes(r.userId)))return null;break}case"idle":{const{highlightedUserIds:a}=n.getInstanceState();if(r.followingUserId===n.user.getId()&&!(r.chatMessage||a.includes(r.userId)))return null;break}}return g.jsx(cRe,{latestPresence:r})}),cRe=Co(function({latestPresence:e}){const n=ue(),{CollaboratorBrush:r,CollaboratorScribble:o,CollaboratorCursor:a,CollaboratorHint:s,CollaboratorShapeIndicator:i}=cr(),l=n.getZoomLevel(),c=n.getViewportPageBounds(),{userId:d,chatMessage:u,brush:m,scribbles:h,selectedShapeIds:y,userName:v,cursor:x,color:S}=e;if(!x)return null;const T=!(x.x<c.minX-12/l||x.y<c.minY-16/l||x.x>c.maxX-12/l||x.y>c.maxY-16/l);return g.jsxs(g.Fragment,{children:[m&&r?g.jsx(r,{className:"tl-collaborator__brush",userId:d,brush:m,color:S,opacity:.1},d+"_brush"):null,T&&a?g.jsx(a,{className:"tl-collaborator__cursor",userId:d,point:x,color:S,zoom:l,name:v!=="New User"?v:null,chatMessage:u??""},d+"_cursor"):s?g.jsx(s,{className:"tl-collaborator__cursor-hint",userId:d,point:x,color:S,zoom:l,viewport:c},d+"_cursor_hint"):null,o&&h.length?g.jsx(g.Fragment,{children:h.map(C=>g.jsx(o,{className:"tl-collaborator__scribble",userId:d,scribble:C,color:S,zoom:l,opacity:C.color==="laser"?.5:.1},d+"_scribble_"+C.id))}):null,i&&y.filter(C=>!n.isShapeHidden(C)).map(C=>g.jsx(i,{className:"tl-collaborator__shape-indicator",userId:d,shapeId:C,color:S,opacity:.5},d+"_"+C))]})});function J9(t,e){return e>t.options.collaboratorInactiveTimeoutMs?"inactive":e>t.options.collaboratorIdleTimeoutMs?"idle":"active"}function uRe(t,e){const n=w.useRef((e==null?void 0:e.lastActivityTimestamp)??-1),[r,o]=w.useState(()=>J9(t,Date.now()-n.current));return w.useEffect(()=>{const a=t.timers.setInterval(()=>{o(J9(t,Date.now()-n.current))},t.options.collaboratorCheckIntervalMs);return()=>clearInterval(a)},[t]),e&&(n.current=e.lastActivityTimestamp??1/0),r}function dRe(){const t=ue(),e=ce("is menu open",()=>t.menus.hasAnyOpenMenus(),[t]),[n,r]=w.useState(!1),o=e||n,a=_w(),s=w.useRef({isDown:!1,isDragging:!1,start:new R}),i=w.useCallback(u=>{u.button===0&&(r(!0),s.current={isDown:!0,isDragging:!1,start:new R(u.clientX,u.clientY)},l.current=!1),t.menus.clearOpenMenus()},[t]),l=w.useRef(!1),c=w.useCallback(u=>{var y;if(!s.current.isDown)return;const{x:m,y:h}=s.current.start;l.current||R.Dist2(s.current.start,new R(u.clientX,u.clientY))>t.options.dragDistanceSquared&&(l.current=!0,s.current={...s.current,isDown:!0,isDragging:!0},(y=a.onPointerDown)==null||y.call(a,{...u,clientX:m,clientY:h,button:0})),l.current&&t.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...Pa(t,u)})},[a,t]),d=w.useCallback(u=>{var m;(m=a.onPointerUp)==null||m.call(a,u),r(!1),s.current={isDown:!1,isDragging:!1,start:new R(u.clientX,u.clientY)},l.current=!1},[a]);return o&&g.jsx("div",{className:"tlui-menu-click-capture","data-testid":"menu-click-capture.content",...a,onPointerDown:i,onPointerMove:c,onPointerUp:d})}function pRe({className:t}){const e=ue(),{SelectionBackground:n,Background:r,SvgDefs:o,ShapeIndicators:a}=cr(),s=w.useRef(null),i=w.useRef(null),l=w.useRef(null),c=Ao();rRe(s),w2e(),T2e(),tRe(s),QOe(s);const d=w.useRef({lodDisableTextOutline:!1,allowTextOutline:!0});Rf("position layers",function(){const{x:C,y:_,z:I}=e.getCamera();if(d.current.allowTextOutline&&Nn.isSafari&&(c.style.setProperty("--tl-text-outline","none"),d.current.allowTextOutline=!1),d.current.allowTextOutline&&I<e.options.textShadowLod!==d.current.lodDisableTextOutline){const D=I<e.options.textShadowLod;c.style.setProperty("--tl-text-outline",D?"none":"var(--tl-text-outline-reference)"),d.current.lodDisableTextOutline=D}const P=I>=1?nc(I,[1,8],[.125,.5],!0):nc(I,[.1,1],[-2,.125],!0),M=`scale(${ie(I)}) translate(${ie(C+P)}px,${ie(_+P)}px)`;$a(i.current,"transform",M),$a(l.current,"transform",M)},[e,c]);const u=_w(),m=ce("shapeSvgDefs",()=>{const T=new Map;for(const C of oo(e.shapeUtils)){if(!C)return;const _=C.getCanvasSvgDefs();for(const{key:I,component:P}of _)T.has(I)||T.set(I,g.jsx(P,{},I))}return[...T.values()]},[e]),h=ce("debug_shapes",()=>Ur.hideShapes.get(),[Ur]),y=ce("debug_svg",()=>Ur.debugSvg.get(),[Ur]),v=ce("debug_geometry",()=>Ur.debugGeometry.get(),[Ur]),x=ce("isEditingAnything",()=>e.getEditingShapeId()!==null,[e]),S=ce("isSelectingAnything",()=>!!e.getSelectedShapeIds().length,[e]);return g.jsxs(g.Fragment,{children:[g.jsxs("div",{ref:s,draggable:!1,"data-iseditinganything":x,"data-isselectinganything":S,className:pt("tl-canvas",t),"data-testid":"canvas",...u,children:[g.jsx("svg",{className:"tl-svg-context","aria-hidden":"true",children:g.jsxs("defs",{children:[m,g.jsx(_Re,{}),g.jsx(kRe,{}),o&&g.jsx(o,{})]})}),r&&g.jsx("div",{className:"tl-background__wrapper",children:g.jsx(r,{})}),g.jsx(mRe,{}),g.jsxs("div",{ref:i,className:"tl-html-layer tl-shapes",draggable:!1,children:[g.jsx(MRe,{}),n&&g.jsx(ORe,{}),h?null:y?g.jsx(TRe,{}):g.jsx(CRe,{})]}),g.jsx("div",{className:"tl-overlays",children:g.jsxs("div",{ref:l,className:"tl-html-layer",children:[v?g.jsx(sRe,{}):null,g.jsx(gRe,{}),g.jsx(hRe,{}),g.jsx(bRe,{}),a&&g.jsx(a,{}),g.jsx(ARe,{}),g.jsx(yRe,{}),g.jsx(PRe,{}),g.jsx(vRe,{}),g.jsx(ERe,{}),g.jsx(iRe,{})]})}),g.jsx(RRe,{})]}),g.jsx("div",{className:"tl-canvas__in-front",onPointerDown:e.markEventAsHandled,onPointerUp:e.markEventAsHandled,onTouchStart:e.markEventAsHandled,onTouchEnd:e.markEventAsHandled,children:g.jsx(fRe,{})}),g.jsx(dRe,{})]})}function fRe(){const{InFrontOfTheCanvas:t}=cr();return t?g.jsx(t,{}):null}function mRe(){const t=ue(),e=ce("gridSize",()=>t.getDocumentSettings().gridSize,[t]),{x:n,y:r,z:o}=ce("camera",()=>t.getCamera(),[t]),a=ce("isGridMode",()=>t.getInstanceState().isGridMode,[t]),{Grid:s}=cr();return s&&a?g.jsx(s,{x:n,y:r,z:o,size:e}):null}function hRe(){const t=ue(),e=ce("scribbles",()=>t.getInstanceState().scribbles,[t]),n=ce("zoomLevel",()=>t.getZoomLevel(),[t]),{Scribble:r}=cr();return r&&e.length?e.map(o=>g.jsx(r,{className:"tl-user-scribble",scribble:o,zoom:n},o.id)):null}function gRe(){const t=ue(),e=ce("brush",()=>t.getInstanceState().brush,[t]),{Brush:n}=cr();return n&&e?g.jsx(n,{className:"tl-user-brush",brush:e}):null}function bRe(){const t=ue(),e=ce("zoomBrush",()=>t.getInstanceState().zoomBrush,[t]),{ZoomBrush:n}=cr();return n&&e?g.jsx(n,{className:"tl-user-brush tl-zoom-brush",brush:e}):null}function yRe(){const t=ue(),e=ce("snapLines",()=>t.snaps.getIndicators(),[t]),n=ce("zoomLevel",()=>t.getZoomLevel(),[t]),{SnapIndicator:r}=cr();return r&&e.length>0?e.map(o=>g.jsx(r,{className:"tl-user-snapline",line:o,zoom:n},o.id)):null}function vRe(){const t=ue(),e=ce("handles shapeIdWithHandles",()=>{const{isReadonly:n,isChangingStyle:r}=t.getInstanceState();if(n||r)return!1;const o=t.getOnlySelectedShape();return!o||!t.getShapeHandles(o)?!1:o.id},[t]);return e?g.jsx(xRe,{shapeId:e}):null}function xRe({shapeId:t}){const e=ue(),{Handles:n}=cr(),r=ce("zoomLevel",()=>e.getZoomLevel(),[e]),o=ce("coarse pointer",()=>e.getInstanceState().isCoarsePointer,[e]),a=ce("handles transform",()=>e.getShapePageTransform(t),[e,t]),s=ce("handles",()=>{const l=e.getShapeHandles(t);if(!l)return null;const c=(o?e.options.coarseHandleRadius:e.options.handleRadius)/r*2;return l.filter(d=>d.type!=="virtual"||!l.some(u=>u!==d&&u.type==="vertex"&&R.Dist(d,u)<c)).sort(d=>d.type==="vertex"?1:-1)},[e,r,o,t]),i=ce("isHidden",()=>e.isShapeHidden(t),[e,t]);return!n||!s||!a||i?null:g.jsx(n,{children:g.jsx("g",{transform:De.toCssString(a),children:s.map(l=>g.jsx(SRe,{shapeId:t,handle:l,zoom:r,isCoarse:o},l.id))})})}function SRe({shapeId:t,handle:e,zoom:n,isCoarse:r}){const o=nRe(t,e.id),{Handle:a}=cr();return a?g.jsx("g",{role:"button","aria-label":e.label||"handle",transform:`translate(${e.x}, ${e.y})`,...o,children:g.jsx(a,{shapeId:t,handle:e,zoom:n,isCoarse:r})}):null}function ERe(){const{Overlays:t}=cr();return t?g.jsx("div",{className:"tl-custom-overlays tl-overlays__item",children:g.jsx(t,{})}):null}function TRe(){const t=ue();return ce("rendering shapes",()=>t.getRenderingShapes(),[t]).map(n=>g.jsxs(w.Fragment,{children:[g.jsx(SX,{...n}),g.jsx(IRe,{id:n.id,mode:"iframe"})]},n.id+"_fragment"))}function wRe(){const t=ue(),e=w.useRef(new Set);return Rf("reflow for culled shapes",()=>{const n=t.getCulledShapes();if(e.current.size===n.size&&[...n].every(o=>e.current.has(o)))return;e.current=n;const r=document.getElementsByClassName("tl-canvas");r.length!==0&&r[0].offsetHeight},[t]),null}function CRe(){const t=ue(),e=ce("rendering shapes",()=>t.getRenderingShapes(),[t]);return g.jsxs(g.Fragment,{children:[e.map(n=>g.jsx(SX,{...n},n.id+"_shape")),Nn.isSafari&&g.jsx(wRe,{})]})}function ARe(){const t=ue(),{ShapeIndicator:e}=cr(),n=ce("hinting shape ids",()=>jD(t.getHintingShapeIds()),[t]);return!n.length||!e?null:n.map(r=>g.jsx(e,{className:"tl-user-indicator__hint",shapeId:r},r+"_hinting"))}function _Re(){return g.jsxs("g",{id:Zl("cursor"),children:[g.jsxs("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[g.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),g.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),g.jsxs("g",{fill:"white",transform:"translate(-12,-12)",children:[g.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),g.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),g.jsxs("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[g.jsx("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),g.jsx("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function kRe(){const t=Zl("cursor_hint");return g.jsx("path",{id:t,fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function IRe({id:t,mode:e}){const n=ue(),[r,o]=w.useState(null),a=ce("is in root",()=>{const s=n.getShape(t);return(s==null?void 0:s.parentId)===n.getCurrentPageId()},[n,t]);return w.useEffect(()=>{if(!a)return;let s=null;const i=si("shape to svg",async()=>{const l=Math.random();s=l;const d=n.isShapeOfType(t,"frame")?0:10;let u=n.getShapePageBounds(t);if(!u)return;u=u.clone().expandBy(d);const m=await n.getSvgString([t],{padding:d});if(s!==l||!m)return;const h=`data:image/svg+xml;utf8,${encodeURIComponent(m.svg)}`;o({src:h,bounds:u})});return()=>{s=null,i()}},[n,t,a]),!a||!r?null:e==="iframe"?g.jsx("iframe",{src:r.src,width:r.bounds.width,height:r.bounds.height,referrerPolicy:"no-referrer",style:{position:"absolute",top:0,left:0,border:"none",transform:`translate(${r.bounds.x}px, ${r.bounds.maxY+12}px)`,outline:"1px solid black",maxWidth:"none"}}):g.jsx("img",{src:r.src,width:r.bounds.width,height:r.bounds.height,referrerPolicy:"no-referrer",style:{position:"absolute",top:0,left:0,transform:`translate(${r.bounds.x}px, ${r.bounds.maxY+12}px)`,outline:"1px solid black",maxWidth:"none"}})}function PRe(){const t=ue(),e=ce("selection rotation",function(){return t.getSelectionRotation()},[t]),n=ce("selection bounds",()=>t.getSelectionRotatedPageBounds(),[t]),{SelectionForeground:r}=cr();return!n||!r?null:g.jsx(r,{bounds:n,rotation:e})}function ORe(){const t=ue(),e=ce("selection rotation",()=>t.getSelectionRotation(),[t]),n=ce("selection bounds",()=>t.getSelectionRotatedPageBounds(),[t]),{SelectionBackground:r}=cr();return!n||!r?null:g.jsx(r,{bounds:n,rotation:e})}function MRe(){const{OnTheCanvas:t}=cr();return t?g.jsx(t,{}):null}function RRe(){const t=ue(),e=ce("camera state",()=>t.getCameraState(),[t]);return g.jsx("div",{className:pt("tl-hit-test-blocker",{"tl-hit-test-blocker__hidden":e==="idle"})})}function ap({children:t,className:e="",...n}){return g.jsx("div",{...n,className:pt("tl-html-container",e),children:t})}class w1{constructor(e){this.editor=e}}L(w1,"props"),L(w1,"migrations"),L(w1,"type");function Uw(t,e,n={}){const{newPoint:r,handle:o,scaleX:a,scaleY:s}=e,{minWidth:i=1,maxWidth:l=1/0,minHeight:c=1,maxHeight:d=1/0}=n;let u=t.props.w*a,m=t.props.h*s;const h=new R(0,0);if(u>0){if(u<i){switch(o){case"top_left":case"left":case"bottom_left":{h.x=u-i;break}case"top":case"bottom":{h.x=(u-i)/2;break}default:h.x=0}u=i}}else if(h.x=u,u=-u,u<i){switch(o){case"top_left":case"left":case"bottom_left":{h.x=-u;break}default:h.x=-i}u=i}if(m>0){if(m<c){switch(o){case"top_left":case"top":case"top_right":{h.y=m-c;break}case"right":case"left":{h.y=(m-c)/2;break}default:h.y=0}m=c}}else if(h.y=m,m=-m,m<c){switch(o){case"top_left":case"top":case"top_right":{h.y=-m;break}default:h.y=-c}m=c}const{x:y,y:v}=h.rot(t.rotation).add(r);return{...t,x:y,y:v,props:{w:Math.min(l,u),h:Math.min(d,m)}}}class Og extends ec{getGeometry(e){return new rc({width:e.props.w,height:e.props.h,isFilled:!0})}onResize(e,n){return Uw(e,n)}getHandleSnapGeometry(e){return{points:this.getGeometry(e).bounds.cornersAndCenter}}getInterpolatedProps(e,n,r){return{...n.props,w:qt(e.props.w,n.props.w,r),h:qt(e.props.h,n.props.h,r)}}}function NZ(t,{initialBounds:e,scaleX:n,scaleY:r,newPoint:o,handle:a}){let s;switch(a){case"bottom_left":case"bottom_right":case"top_left":case"top_right":{s=Math.max(.01,Math.max(Math.abs(n),Math.abs(r)));break}case"left":case"right":{s=Math.max(.01,Math.abs(n));break}case"bottom":case"top":{s=Math.max(.01,Math.abs(r));break}default:throw wn(a)}const i=new R(0,0);n<0&&(i.x=-(e.width*s)),r<0&&(i.y=-(e.height*s));const{x:l,y:c}=R.Add(o,i.rot(t.rotation));return{x:l,y:c,props:{scale:s*t.props.scale}}}var gO;let DRe=(gO=class extends ht{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},L(gO,"id","idle"),gO);var bO;let NRe=(bO=class extends ht{onPointerMove(e){const{editor:n}=this;if(n.inputs.isDragging){const{originPagePoint:r}=n.inputs,o=this.parent.shapeType,a=lr(),s=n.markHistoryStoppingPoint(`creating_box:${a}`),i=Gi(r,n);if(this.editor.createShapes([{id:a,type:o,x:i.x,y:i.y,props:{w:1,h:1}}]),!n.getShape(a)){this.cancel();return}n.select(a);const c=this.parent;this.editor.setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creatingMarkId:s,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id,onCreate:c.onCreate?d=>{var u;return(u=c.onCreate)==null?void 0:u.call(c,d)}:void 0})}}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}complete(){const{originPagePoint:e}=this.editor.inputs,n=this.parent.shapeType,r=lr();this.editor.markHistoryStoppingPoint(`creating_box:${r}`),this.editor.createShapes([{id:r,type:n,x:e.x,y:e.y}]);const o=this.editor.getShape(r);if(!o){this.cancel();return}let{w:a,h:s}=o.props;const i=new R(a/2,s/2),l=this.editor.getShapeParentTransform(o);l&&i.rot(-l.rotation());let c=1;this.editor.user.getIsDynamicResizeMode()&&(c=1/this.editor.getZoomLevel(),a*=c,s*=c,i.mul(c));const d=bo(o),u=Gi(new R(o.x-i.x,o.y-i.y),this.editor);d.x=u.x,d.y=u.y,d.props.w=a,d.props.h=s,"scale"in o.props&&(d.props.scale=c),this.editor.updateShape(d),this.editor.setSelectedShapes([r]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle")}},L(bO,"id","pointing"),bO);function Gi(t,e){const n=e.getInstanceState().isGridMode,r=e.getDocumentSettings().gridSize;return n?t.clone().snapToGrid(r):t.clone()}class RM extends ht{static children(){return[DRe,NRe]}}L(RM,"id","box"),L(RM,"initial","idle");function LRe(t,e,n){const r=w.useRef(!1),o=w.useCallback(s=>{r.current=s,s?vs.addOpenMenu(t):vs.deleteOpenMenu(t),e==null||e(s)},[t,e]),a=ce("is menu open",()=>vs.getOpenMenus().includes(t),[t]);return w.useEffect(()=>(r.current&&(n==null||n("open-menu"),vs.addOpenMenu(t)),()=>{r.current&&(vs.deleteOpenMenu(t),vs.getOpenMenus().forEach(s=>{s.startsWith(t)&&(n==null||n("close-menu"),vs.deleteOpenMenu(s))}),r.current=!1)}),[t,n]),[a,o]}function Ev(t){const e=ue();return ce("isEditing",()=>e.getEditingShapeId()===t,[e,t])}function jRe(t){if(!t)throw Error("usePassThroughWheelEvents must be passed a ref");const e=Ao(),n=lo();w.useEffect(()=>{function r(a){if(!(n!=null&&n.getInstanceState().isFocused)||a.isSpecialRedispatchedEvent)return;Nt(a);const s=e.querySelector(".tl-canvas");if(!s)return;const i=new PointerEvent(a.type,a);i.isSpecialRedispatchedEvent=!0,s.dispatchEvent(i)}const o=t.current;if(o)return o.addEventListener("mouseover",r,{passive:!1}),()=>{o.removeEventListener("mouseover",r)}},[e,n,t])}function kc(t){const e=ue();return w.useMemo(function(){const o=c=>{if(e.wasEventAlreadyHandled(c))return;if(c.button===_N){e.dispatch({type:"pointer",target:"selection",handle:t,name:"right_click",...Pa(e,c)});return}if(c.button!==0)return;const d=RE(c.currentTarget);function u(){d.removeEventListener("pointerup",u),dv(d,c)}uv(d,c),d.addEventListener("pointerup",u),e.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:t,...Pa(e,c)}),e.markEventAsHandled(c)};let a,s;function i(c){e.wasEventAlreadyHandled(c)||c.button===0&&(c.clientX===a&&c.clientY===s||(a=c.clientX,s=c.clientY,e.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:t,...Pa(e,c)})))}return{onPointerDown:o,onPointerMove:i,onPointerUp:c=>{e.wasEventAlreadyHandled(c)||c.button===0&&e.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:t,...Pa(e,c)})}}},[e,t])}function BRe(t){const[e,n]=w.useState(()=>({store:jE(t),opts:t}));if(!zK(e.opts,t)){const r={store:jE(t),opts:t};return n(r),r.store}return e.store}const FRe=20,zRe=8;function qw(t,e=FRe){return Math.max(zRe,Math.ceil(t/e))}class LZ extends Mp{constructor(n){super({...n,isFilled:!1,isClosed:!1});L(this,"_center");L(this,"_radius");L(this,"_start");L(this,"_end");L(this,"_largeArcFlag");L(this,"_sweepFlag");L(this,"_measure");L(this,"_angleStart");L(this,"_angleEnd");const{center:r,sweepFlag:o,largeArcFlag:a,start:s,end:i}=n;if(s.equals(i))throw Error("Arc must have different start and end points.");this._angleStart=R.Angle(r,s),this._angleEnd=R.Angle(r,i),this._radius=R.Dist(r,s),this._measure=f2e(this._angleStart,this._angleEnd,o,a),this._start=s,this._end=i,this._sweepFlag=o,this._largeArcFlag=a,this._center=r}nearestPoint(n){const{_center:r,_measure:o,_radius:a,_angleEnd:s,_angleStart:i,_start:l,_end:c}=this,d=Z8(o,i,s,r.angle(n));if(d<=0)return l;if(d>=1)return c;const u=R.Sub(n,r).uni().mul(a).add(r);let m,h=1/0,y;for(const v of[l,c,u])y=R.Dist2(n,v),y<h&&(m=v,h=y);if(!m)throw Error("nearest point not found");return m}hitTestLineSegment(n,r){const{_center:o,_radius:a,_measure:s,_angleStart:i,_angleEnd:l}=this,c=fv(n,r,o,a);return c===null?!1:c.some(d=>{const u=Z8(s,i,l,o.angle(d));return u>=0&&u<=1})}getVertices(){const{_center:n,_measure:r,length:o,_radius:a,_angleStart:s}=this,i=[];for(let l=0,c=qw(Math.abs(o));l<c+1;l++){const d=l/c*r,u=s+d;i.push(AN(n,a,u))}return i}getSvgPathData(n=!0){const{_start:r,_end:o,_radius:a,_largeArcFlag:s,_sweepFlag:i}=this;return`${n?`M${r.toFixed()}`:""} A${a} ${a} 0 ${s} ${i} ${o.toFixed()}`}getLength(){return Math.abs(this._measure*this._radius)}}class zE extends Mp{constructor(n){super({isClosed:!0,...n});L(this,"_center");L(this,"_radius");L(this,"_x");L(this,"_y");this.config=n;const{x:r=0,y:o=0,radius:a}=n;this._x=r,this._y=o,this._center=new R(a+r,a+o),this._radius=a}getBounds(){return new Be(this._x,this._y,this._radius*2,this._radius*2)}getVertices(){const{_center:n,_radius:r}=this,o=mr*r,a=[];for(let s=0,i=qw(o);s<i;s++){const l=s/i*mr;a.push(AN(n,r,l))}return a}nearestPoint(n){const{_center:r,_radius:o}=this;return r.equals(n)?R.AddXY(r,o,0):R.Sub(n,r).uni().mul(o).add(r)}hitTestLineSegment(n,r,o=0){const{_center:a,_radius:s}=this;return fv(n,r,a,s+o)!==null}getSvgPathData(){const{_center:n,_radius:r}=this;return`M${n.x+r},${n.y} a${r},${r} 0 1,0 ${r*2},0a${r},${r} 0 1,0 -${r*2},0`}}class WN extends mv{constructor(n){const{start:r,cp1:o,cp2:a,end:s}=n;super({...n,points:[r,s]});L(this,"_a");L(this,"_b");L(this,"_c");L(this,"_d");L(this,"_resolution");this._a=r,this._b=o,this._c=a,this._d=s,this._resolution=n.resolution??10}getVertices(){const n=[],{_a:r,_b:o,_c:a,_d:s}=this;for(let i=0,l=this._resolution;i<=l;i++){const c=i/l;n.push(new R((1-c)*(1-c)*(1-c)*r.x+3*((1-c)*(1-c))*c*o.x+3*(1-c)*(c*c)*a.x+c*c*c*s.x,(1-c)*(1-c)*(1-c)*r.y+3*((1-c)*(1-c))*c*o.y+3*(1-c)*(c*c)*a.y+c*c*c*s.y))}return n}nearestPoint(n){let r,o=1/0,a,s;for(const i of this.segments)s=i.nearestPoint(n),a=R.Dist2(s,n),a<o&&(r=s,o=a);if(!r)throw Error("nearest point not found");return r}getSvgPathData(n=!0){const{_a:r,_b:o,_c:a,_d:s}=this;return`${n?`M ${r.toFixed()} `:""} C${o.toFixed()} ${a.toFixed()} ${s.toFixed()}`}static GetAtT(n,r){const{_a:o,_b:a,_c:s,_d:i}=n;return new R((1-r)*(1-r)*(1-r)*o.x+3*((1-r)*(1-r))*r*a.x+3*(1-r)*(r*r)*s.x+r*r*r*i.x,(1-r)*(1-r)*(1-r)*o.y+3*((1-r)*(1-r))*r*a.y+3*(1-r)*(r*r)*s.y+r*r*r*i.y)}getLength(n,r=32){let o,a=this._a,s=0;for(let i=1;i<=r;i++)o=WN.GetAtT(this,i/r),s+=R.Dist(a,o),a=o;return s}}class URe extends Mp{constructor(n){super({...n,isClosed:!0});L(this,"_w");L(this,"_h");L(this,"_edges");this.config=n;const{width:r,height:o}=n;this._w=r,this._h=o}get edges(){if(!this._edges){const{vertices:n}=this;this._edges=[];for(let r=0,o=n.length;r<o;r++){const a=n[r],s=n[(r+1)%o];this._edges.push(new Yh({start:a,end:s}))}}return this._edges}getVertices(){const n=Math.max(1,this._w),r=Math.max(1,this._h),o=n/2,a=r/2,s=Math.pow(o-a,2)/Math.pow(o+a,2),i=Un*(o+a)*(1+3*s/(10+Math.sqrt(4-3*s))),l=qw(i),c=mr/l,d=Math.cos(c),u=Math.sin(c);let m=0,h=1,y=0,v=1;const x=Array(l);for(let S=0;S<l;S++)x[S]=new R(Lt(o+o*h,0,n),Lt(a+a*m,0,r)),y=u*h+d*m,v=d*h-u*m,m=y,h=v;return x}nearestPoint(n){let r,o=1/0,a,s;for(const i of this.edges)s=i.nearestPoint(n),a=R.Dist2(s,n),a<o&&(r=s,o=a);if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(n,r){return this.edges.some(o=>o.hitTestLineSegment(n,r))}getBounds(){return new Be(0,0,this._w,this._h)}getLength(){const{_w:n,_h:r}=this,o=n/2,a=r/2,s=Math.max(0,o),i=Math.max(0,a);return c2e(s,i)}getSvgPathData(n=!1){const{_w:r,_h:o}=this,a=r/2,s=o/2,i=Math.max(0,a),l=Math.max(0,s);return`${n?`M${a-i},${s}`:""} a${i},${l},0,1,1,${i*2},0a${i},${l},0,1,1,-${i*2},0`}}function er(t,e,n){var i;const r=new Set;for(const l of e){const c=t.getShape(l);if(!c)continue;r.add(c);const d=t.getShape(c.parentId);d&&r.add(d)}const o=new Map;for(const l of r){const c=t.getSortedChildIdsForParent(l);if(n!=null&&n.filter&&!n.filter(l))o.set(l,c);else{const d=qRe(t,l.id,c);d.length<c.length&&o.set(l,c.filter(u=>!d.includes(u)))}}const a=t.getCurrentPageShapesSorted().map(l=>l.id),s={};for(const[l,c]of o){const d=Dt(c.map(h=>t.getShape(h))),{reparenting:u,remainingShapesToReparent:m}=HRe(t,d,(h,y)=>n!=null&&n.filter&&!n.filter(y)?!1:y.id!==l.id&&a.indexOf(y.id)<a.indexOf(h.id));if(u.forEach((h,y)=>{h.length!==0&&(s[y]||(s[y]={parentId:y,shapeIds:[]}),s[y].shapeIds.push(...h.map(v=>v.id)))}),m.size>0){const h=((i=t.findShapeAncestor(l,y=>t.isShapeOfType(y,"group")))==null?void 0:i.id)??t.getCurrentPageId();m.forEach(y=>{if(!s[h]){let v;const x=t.getSortedChildIdsForParent(h),S=x.indexOf(l.id);if(S>-1){const T=x[S+1],C=T?t.getShape(T).index:_l(l.index);v=Vh(l.index,C)}s[h]={parentId:h,shapeIds:[],index:v}}s[h].shapeIds.push(y.id)})}}t.run(()=>{Object.values(s).forEach(({parentId:l,shapeIds:c,index:d})=>{c.length!==0&&(c.sort((u,m)=>a.indexOf(u)<a.indexOf(m)?-1:1),t.reparentShapes(c,l,d))})})}function qRe(t,e,n){var m,h;if(n.length===0)return io;const r=t.getShapePageBounds(e);if(!r)return io;const o=t.getShapeGeometry(e),s=t.getShapePageTransform(e).applyToPoints(o.vertices),i=t.getShape(e);if(!i)return io;const l=t.getShapePageTransform(e),c=(h=(m=t.getShapeUtil(i.type)).getClipPath)==null?void 0:h.call(m,i),d=c?l.applyToPoints(c):void 0,u=d?NE(d,s):s;return u?n.filter(y=>{const v=t.getShapePageBounds(y);if(!v||!r.includes(v))return!1;const x=t.getShapePageTransform(y).clone().invert().applyToPoints(u);return t.getShapeGeometry(y).overlapsPolygon(x)}):io}function HRe(t,e,n){var c,d,u,m;const r=new Set(e),o=new Set;for(const h of e){const y=t.getShapeParent(h);y&&t.isShapeOfType(y,"group")&&(o.has(y)||o.add(y))}for(const h of o){const y=Dt(t.getSortedChildIdsForParent(h).map(v=>t.getShape(v)));for(const v of y)r.delete(v);r.add(h)}const a=new Map,s=new Map,i=new Set(r),l=t.getCurrentPageShapesSorted().filter(h=>{var y,v;return((v=(y=t.getShapeUtil(h)).canReceiveNewChildrenOfType)==null?void 0:v.call(y,h,h.type))&&!i.has(h)});e:for(let h=l.length-1;h>=0;h--){const y=l[h],v=(c=t.findShapeAncestor(y,P=>t.isShapeOfType(P,"group")))==null?void 0:c.id,x=t.getShapeGeometry(y),S=t.getShapePageTransform(y),T=t.getShapeMask(y),C=S.applyToPoints(x.vertices),_=T?NE(T,C):C;if(!_)continue e;const I=[];t:for(const P of i){if(y.id===P.id||n&&!n(P,y)||(a.has(P.id)||a.set(P.id,(d=t.findShapeAncestor(P,F=>t.isShapeOfType(F,"group")))==null?void 0:d.id),a.get(P.id)!==v)||t.findShapeAncestor(y,F=>P.id===F.id))continue t;const D=t.getShapePageTransform(P).clone().invert().applyToPoints(_);if(t.getShapeGeometry(P).overlapsPolygon(D)){if(!((m=(u=t.getShapeUtil(y)).canReceiveNewChildrenOfType)!=null&&m.call(u,y,P.type)))continue t;P.parentId!==y.id&&I.push(P),i.delete(P);continue t}}I.length&&s.set(y.id,I)}return{reparenting:s,remainingShapesToReparent:i}}function Ta(t){this.content=t}Ta.prototype={constructor:Ta,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),a=r.content.slice();return o==-1?a.push(n||t,e):(a[o+1]=e,n&&(a[o]=n)),new Ta(a)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ta(n)},addToStart:function(t,e){return new Ta([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ta(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),a=r.find(t);return o.splice(a==-1?o.length:a,0,e,n),new Ta(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ta.from(t),t.size?new Ta(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ta.from(t),t.size?new Ta(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ta.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ta.from=function(t){if(t instanceof Ta)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ta(e)};function jZ(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),a=e.child(r);if(o==a){n+=o.nodeSize;continue}if(!o.sameMarkup(a))return n;if(o.isText&&o.text!=a.text){for(let s=0;o.text[s]==a.text[s];s++)n++;return n}if(o.content.size||a.content.size){let s=jZ(o.content,a.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function BZ(t,e,n,r){for(let o=t.childCount,a=e.childCount;;){if(o==0||a==0)return o==a?null:{a:n,b:r};let s=t.child(--o),i=e.child(--a),l=s.nodeSize;if(s==i){n-=l,r-=l;continue}if(!s.sameMarkup(i))return{a:n,b:r};if(s.isText&&s.text!=i.text){let c=0,d=Math.min(s.text.length,i.text.length);for(;c<d&&s.text[s.text.length-c-1]==i.text[i.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||i.content.size){let c=BZ(s.content,i.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Le{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,a){for(let s=0,i=0;i<n;s++){let l=this.content[s],c=i+l.nodeSize;if(c>e&&r(l,o+i,a||null,s)!==!1&&l.content.size){let d=i+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,o+d)}i=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let a="",s=!0;return this.nodesBetween(e,n,(i,l)=>{let c=i.isText?i.text.slice(Math.max(e,l)-l,n-l):i.isLeaf?o?typeof o=="function"?o(i):o:i.type.spec.leafText?i.type.spec.leafText(i):"":"";i.isBlock&&(i.isLeaf&&c||i.isTextblock)&&r&&(s?s=!1:a+=r),a+=c},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),a=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),a=1);a<e.content.length;a++)o.push(e.content[a]);return new Le(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let a=0,s=0;s<n;a++){let i=this.content[a],l=s+i.nodeSize;l>e&&((s<e||l>n)&&(i.isText?i=i.cut(Math.max(0,e-s),Math.min(i.text.length,n-s)):i=i.cut(Math.max(0,e-s-1),Math.min(i.content.size,n-s-1))),r.push(i),o+=i.nodeSize),s=l}return new Le(r,o)}cutByIndex(e,n){return e==n?Le.empty:e==0&&n==this.content.length?this:new Le(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),a=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new Le(o,a)}addToStart(e){return new Le([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Le(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return jZ(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return BZ(this,e,n,r)}findIndex(e){if(e==0)return TS(0,e);if(e==this.size)return TS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),a=r+o.nodeSize;if(a>=e)return a==e?TS(n+1,a):TS(n,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Le.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Le(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Le.empty;let n,r=0;for(let o=0;o<e.length;o++){let a=e[o];r+=a.nodeSize,o&&a.isText&&e[o-1].sameMarkup(a)?(n||(n=e.slice(0,o)),n[n.length-1]=a.withText(n[n.length-1].text+a.text)):n&&n.push(a)}return new Le(n||e,r)}static from(e){if(!e)return Le.empty;if(e instanceof Le)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Le([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Le.empty=new Le([],0);const uP={index:0,offset:0};function TS(t,e){return uP.index=t,uP.offset=e,uP}function UE(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!UE(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!UE(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let fr=class DM{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let a=e[o];if(this.eq(a))return e;if(this.type.excludes(a.type))n||(n=e.slice(0,o));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(a)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&UE(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return DM.none;if(e instanceof DM)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};fr.none=[];class qE extends Error{}class at{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=zZ(this.content,e+this.openStart,n);return r&&new at(r,this.openStart,this.openEnd)}removeBetween(e,n){return new at(FZ(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return at.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new at(Le.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let a=e.firstChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=e.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)o++;return new at(e,r,o)}}at.empty=new at(Le.empty,0,0);function FZ(t,e,n){let{index:r,offset:o}=t.findIndex(e),a=t.maybeChild(r),{index:s,offset:i}=t.findIndex(n);if(o==e||a.isText){if(i!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,a.copy(FZ(a.content,e-o-1,n-o-1)))}function zZ(t,e,n,r){let{index:o,offset:a}=t.findIndex(e),s=t.maybeChild(o);if(a==e||s.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let i=zZ(s.content,e-a-1,n,s);return i&&t.replaceChild(o,s.copy(i))}function $Re(t,e,n){if(n.openStart>t.depth)throw new qE("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new qE("Inconsistent open depths");return UZ(t,e,n,0)}function UZ(t,e,n,r){let o=t.index(r),a=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=UZ(t,e,n,r+1);return a.copy(a.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,i=s.content;return Af(s,i.cut(0,t.parentOffset).append(n.content).append(i.cut(e.parentOffset)))}else{let{start:s,end:i}=VRe(n,t);return Af(a,HZ(t,s,i,e,r))}else return Af(a,HE(t,e,r))}function qZ(t,e){if(!e.type.compatibleContent(t.type))throw new qE("Cannot join "+e.type.name+" onto "+t.type.name)}function NM(t,e,n){let r=t.node(n);return qZ(r,e.node(n)),r}function Cf(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Uy(t,e,n,r){let o=(e||t).node(n),a=0,s=e?e.index(n):o.childCount;t&&(a=t.index(n),t.depth>n?a++:t.textOffset&&(Cf(t.nodeAfter,r),a++));for(let i=a;i<s;i++)Cf(o.child(i),r);e&&e.depth==n&&e.textOffset&&Cf(e.nodeBefore,r)}function Af(t,e){return t.type.checkContent(e),t.copy(e)}function HZ(t,e,n,r,o){let a=t.depth>o&&NM(t,e,o+1),s=r.depth>o&&NM(n,r,o+1),i=[];return Uy(null,t,o,i),a&&s&&e.index(o)==n.index(o)?(qZ(a,s),Cf(Af(a,HZ(t,e,n,r,o+1)),i)):(a&&Cf(Af(a,HE(t,e,o+1)),i),Uy(e,n,o,i),s&&Cf(Af(s,HE(n,r,o+1)),i)),Uy(r,null,o,i),new Le(i)}function HE(t,e,n){let r=[];if(Uy(null,t,n,r),t.depth>n){let o=NM(t,e,n+1);Cf(Af(o,HE(t,e,n+1)),r)}return Uy(e,null,n,r),new Le(r)}function VRe(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let a=n-1;a>=0;a--)o=e.node(a).copy(Le.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class g0{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let a=0;a<e;a++)o+=r.child(a).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return fr.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let i=r;r=o,o=i}let a=r.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!o||!a[s].isInSet(o.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!o||!r[a].isInSet(o.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new $E(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,a=n;for(let s=e;;){let{index:i,offset:l}=s.content.findIndex(a),c=a-l;if(r.push(s,i,o+l),!c||(s=s.child(i),s.isText))break;a=c-1,o+=l+1}return new g0(n,r,a)}static resolveCached(e,n){let r=Q9.get(e);if(r)for(let a=0;a<r.elts.length;a++){let s=r.elts[a];if(s.pos==n)return s}else Q9.set(e,r=new GRe);let o=r.elts[r.i]=g0.resolve(e,n);return r.i=(r.i+1)%KRe,o}}class GRe{constructor(){this.elts=[],this.i=0}}const KRe=12,Q9=new WeakMap;class $E{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const WRe=Object.create(null);let Hi=class LM{constructor(e,n,r,o=fr.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||Le.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&UE(this.attrs,n||e.defaultAttrs||WRe)&&fr.sameSet(this.marks,r||fr.none)}copy(e=null){return e==this.content?this:new LM(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new LM(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return at.empty;let o=this.resolve(e),a=this.resolve(n),s=r?0:o.sharedDepth(n),i=o.start(s),c=o.node(s).content.cut(o.pos-i,a.pos-i);return new at(c,o.depth-s,a.depth-s)}replace(e,n,r){return $Re(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return g0.resolveCached(this,e)}resolveNoCache(e){return g0.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,a=>(r.isInSet(a.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),$Z(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Le.empty,o=0,a=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,a),i=s&&s.matchFragment(this.content,n);if(!i||!i.validEnd)return!1;for(let l=o;l<a;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let a=this.contentMatchAt(e).matchType(r),s=a&&a.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=fr.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!fr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=Le.fromJSON(e,n.content),a=e.nodeType(n.type).create(n.attrs,o,r);return a.type.checkAttrs(a.attrs),a}};Hi.prototype.text=void 0;class VE extends Hi{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):$Z(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new VE(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new VE(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function $Z(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ff{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new YRe(e,n);if(r.next==null)return Ff.empty;let o=VZ(r);r.next&&r.err("Unexpected trailing text");let a=nDe(tDe(o));return rDe(a,r),a}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let a=n;o&&a<r;a++)o=o.matchType(e.child(a).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function a(s,i){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return Le.from(i.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:u}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(u)==-1){o.push(u);let m=a(u,i.concat(d));if(m)return m}}return null}return a(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),a=o.match;if(a.matchType(e)){let s=[];for(let i=o;i.type;i=i.via)s.push(i.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:i,next:l}=a.next[s];!i.isLeaf&&!i.hasRequiredAttrs()&&!(i.name in n)&&(!o.type||l.validEnd)&&(r.push({match:i.contentMatch,type:i,via:o}),n[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let a=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)a+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return a}).join(`
`)}}Ff.empty=new Ff(!0);class YRe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function VZ(t){let e=[];do e.push(XRe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function XRe(t){let e=[];do e.push(JRe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function JRe(t){let e=eDe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=QRe(t,e);else break;return e}function Z9(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function QRe(t,e){let n=Z9(t),r=n;return t.eat(",")&&(t.next!="}"?r=Z9(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ZRe(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let a in n){let s=n[a];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function eDe(t){if(t.eat("(")){let e=VZ(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=ZRe(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function tDe(t){let e=[[]];return o(a(t,0),n()),e;function n(){return e.push([])-1}function r(s,i,l){let c={term:l,to:i};return e[s].push(c),c}function o(s,i){s.forEach(l=>l.to=i)}function a(s,i){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(a(c,i)),[]);if(s.type=="seq")for(let l=0;;l++){let c=a(s.exprs[l],i);if(l==s.exprs.length-1)return c;o(c,i=n())}else if(s.type=="star"){let l=n();return r(i,l),o(a(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(a(s.expr,i),l),o(a(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(i)].concat(a(s.expr,i));if(s.type=="range"){let l=i;for(let c=0;c<s.min;c++){let d=n();o(a(s.expr,l),d),l=d}if(s.max==-1)o(a(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let d=n();r(l,d),o(a(s.expr,l),d),l=d}return[r(l)]}else{if(s.type=="name")return[r(i,void 0,s.value)];throw new Error("Unknown expr type")}}}}function GZ(t,e){return e-t}function eq(t,e){let n=[];return r(e),n.sort(GZ);function r(o){let a=t[o];if(a.length==1&&!a[0].term)return r(a[0].to);n.push(o);for(let s=0;s<a.length;s++){let{term:i,to:l}=a[s];!i&&n.indexOf(l)==-1&&r(l)}}}function nDe(t){let e=Object.create(null);return n(eq(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:i,to:l})=>{if(!i)return;let c;for(let d=0;d<o.length;d++)o[d][0]==i&&(c=o[d][1]);eq(t,l).forEach(d=>{c||o.push([i,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let a=e[r.join(",")]=new Ff(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let i=o[s][1].sort(GZ);a.next.push({type:o[s][0],next:e[i.join(",")]||n(i)})}return a}}function rDe(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],a=!o.validEnd,s=[];for(let i=0;i<o.next.length;i++){let{type:l,next:c}=o.next[i];s.push(l.name),a&&!(l.isText||l.hasRequiredAttrs())&&(a=!1),r.indexOf(c)==-1&&r.push(c)}a&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function KZ(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function WZ(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let a=t[r];if(a.hasDefault)o=a.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function YZ(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let a=t[o];a.validate&&a.validate(e[o])}}function XZ(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new aDe(t,r,e[r]);return n}let tq=class JZ{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=XZ(e,r.attrs),this.defaultAttrs=KZ(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ff.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:WZ(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Hi(this,this.computeAttrs(e),Le.from(n),fr.setFrom(r))}createChecked(e=null,n,r){return n=Le.from(n),this.checkContent(n),new Hi(this,this.computeAttrs(e),n,fr.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Le.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),a=o&&o.fillBefore(Le.empty,!0);return a?new Hi(this,e,n.append(a),fr.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){YZ(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:fr.none:e}static compile(e,n){let r=Object.create(null);e.forEach((a,s)=>r[a]=new JZ(a,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function oDe(t,e,n){let r=n.split("|");return o=>{let a=o===null?"null":typeof o;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${a}`)}}class aDe{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?oDe(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Hw{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=XZ(e,o.attrs),this.excluded=null;let a=KZ(this.attrs);this.instance=a?new fr(this,a):null}create(e=null){return!e&&this.instance?this.instance:new fr(this,WZ(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((a,s)=>r[a]=new Hw(a,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){YZ(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Mg{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Ta.from(e.nodes),n.marks=Ta.from(e.marks||{}),this.nodes=tq.compile(this.spec.nodes,this),this.marks=Hw.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let a=this.nodes[o],s=a.spec.content||"",i=a.spec.marks;if(a.contentMatch=r[s]||(r[s]=Ff.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=i=="_"?null:i?nq(this,i.split(" ")):i==""||!a.inlineContent?[]:null}for(let o in this.marks){let a=this.marks[o],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:nq(this,s.split(" "))}this.nodeFromJSON=o=>Hi.fromJSON(this,o),this.markFromJSON=o=>fr.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof tq){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new VE(r,r.defaultAttrs,e,fr.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function nq(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],a=t.marks[o],s=a;if(a)n.push(a);else for(let i in t.marks){let l=t.marks[i];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function sDe(t){return t.tag!=null}function iDe(t){return t.style!=null}let Pl=class jM{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(sDe(o))this.tags.push(o);else if(iDe(o)){let a=/[^=]*/.exec(o.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let a=e.nodes[o.node];return a.contentMatch.matchType(a)})}parse(e,n={}){let r=new oq(this,n,!1);return r.addAll(e,fr.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new oq(this,n,!0);return r.addAll(e,fr.none,n.from,n.to),at.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let a=this.tags[o];if(uDe(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||n.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(e);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(e,n,r,o){for(let a=o?this.styles.indexOf(o)+1:0;a<this.styles.length;a++){let s=this.styles[a],i=s.style;if(!(i.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||i.length>e.length&&(i.charCodeAt(e.length)!=61||i.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let a=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let i=n[s];if((i.priority==null?50:i.priority)<a)break}n.splice(s,0,o)}for(let o in e.marks){let a=e.marks[o].spec.parseDOM;a&&a.forEach(s=>{r(s=aq(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let a=e.nodes[o].spec.parseDOM;a&&a.forEach(s=>{r(s=aq(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new jM(e,jM.schemaRules(e)))}};const QZ={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},lDe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ZZ={ol:!0,ul:!0},b0=1,BM=2,qy=4;function rq(t,e,n){return e!=null?(e?b0:0)|(e==="full"?BM:0):t&&t.whitespace=="pre"?b0|BM:n&~qy}class wS{constructor(e,n,r,o,a,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=fr.none,this.match=a||(s&qy?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Le.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&b0)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-o[0].length))}}let n=Le.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Le.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!QZ.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class oq{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,a,s=rq(null,n.preserveWhitespace,0)|(r?qy:0);o?a=new wS(o.type,o.attrs,fr.none,!0,n.topMatch||o.type.contentMatch,s):r?a=new wS(null,null,fr.none,!0,null,s):a=new wS(e.schema.topNodeType,null,fr.none,!0,null,s),this.nodes=[a],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,a=o.options&BM?"full":this.localPreserveWS||(o.options&b0)>0,{schema:s}=this.parser;if(a==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(a)if(a==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let i=r.split(/\r?\n|\r/);for(let l=0;l<i.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),n,!0),i[l]&&this.insertNode(s.text(i[l]),n,!/\S/.test(i[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],l=e.previousSibling;(!i||l&&l.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),i;ZZ.hasOwnProperty(s)&&this.parser.normalizeLists&&cDe(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,r));e:if(l?l.ignore:lDe.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(QZ.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),c=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let u=l&&l.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),c&&this.sync(a),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?i:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let a=this.parser.matchedStyles[o],s=r.getPropertyValue(a);if(s)for(let i=void 0;;){let l=this.parser.matchStyle(a,s,this,i);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)i=l;else break}}return n}addElementByRule(e,n,r,o){let a,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(a=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let i=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}a&&this.sync(i)&&this.open--}addAll(e,n,r,o){let a=r||0;for(let s=r?e.childNodes[r]:e.firstChild,i=o==null?null:e.childNodes[o];s!=i;s=s.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(s,n);this.findAtPoint(e,a)}findPlace(e,n,r){let o,a;for(let s=this.open,i=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+i)&&(o=c,a=l,!c.length))break;if(l.solid){if(r)break;i+=2}}if(!o)return null;this.sync(a);for(let s=0;s<o.length;s++)n=this.enterInner(o[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(n=this.enterInner(a,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let s=fr.none;for(let i of o.concat(e.marks))(a.type?a.type.allowsMarkType(i.type):sq(i.type,e.type))&&(s=i.addToSet(s));return a.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let a=this.findPlace(e.create(n),r,!1);return a&&(a=this.enterInner(e,n,r,!0,o)),a}enterInner(e,n,r,o=!1,a){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let i=rq(e,a,s.options);s.options&qy&&s.content.length==0&&(i|=qy);let l=fr.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):sq(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new wS(e,n,l,o,null,i)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=b0)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(o?0:1),s=(i,l)=>{for(;i>=0;i--){let c=n[i];if(c==""){if(i==n.length-1||i==0)continue;for(;l>=a;l--)if(s(i-1,l))return!0;return!1}else{let d=l>0||l==0&&o?this.nodes[l].type:r&&l>=a?r.node(l-a).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function cDe(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ZZ.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function uDe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function aq(t){let e={};for(let n in t)e[n]=t[n];return e}function sq(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let a=[],s=i=>{a.push(i);for(let l=0;l<i.edgeCount;l++){let{type:c,next:d}=i.edge(l);if(c==e||a.indexOf(d)<0&&s(d))return!0}};if(s(o.contentMatch))return!0}}class Rp{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=dP(n).createDocumentFragment());let o=r,a=[];return e.forEach(s=>{if(a.length||s.marks.length){let i=0,l=0;for(;i<a.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(a[i][0])||c.type.spec.spanning===!1)break;i++,l++}for(;i<a.length;)o=a.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],d=this.serializeMark(c,s.isInline,n);d&&(a.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=C1(dP(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let a=this.serializeMark(e.marks[o],e.isInline,n);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&C1(dP(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return C1(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Rp(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=iq(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return iq(e.marks)}}function iq(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function dP(t){return t.document||window.document}const lq=new WeakMap;function dDe(t){let e=lq.get(t);return e===void 0&&lq.set(t,e=pDe(t)),e}function pDe(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function C1(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],a;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=dDe(r))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let i,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let u in c)if(c[u]!=null){let m=u.indexOf(" ");m>0?l.setAttributeNS(u.slice(0,m),u.slice(m+1),c[u]):u=="style"&&l.style?l.style.cssText=c[u]:l.setAttribute(u,c[u])}}for(let u=d;u<e.length;u++){let m=e[u];if(m===0){if(u<e.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:y}=C1(t,m,n,r);if(l.appendChild(h),y){if(i)throw new RangeError("Multiple content holes");i=y}}}return{dom:l,contentDOM:i}}const eee=65535,tee=Math.pow(2,16);function fDe(t,e){return t+e*tee}function cq(t){return t&eee}function mDe(t){return(t-(t&eee))/tee}const nee=1,ree=2,A1=4,oee=8;class FM{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&oee)>0}get deletedBefore(){return(this.delInfo&(nee|A1))>0}get deletedAfter(){return(this.delInfo&(ree|A1))>0}get deletedAcross(){return(this.delInfo&A1)>0}}class Ni{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Ni.empty)return Ni.empty}recover(e){let n=0,r=cq(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+mDe(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let i=0;i<this.ranges.length;i+=3){let l=this.ranges[i]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[i+a],d=this.ranges[i+s],u=l+c;if(e<=u){let m=c?e==l?-1:e==u?1:n:n,h=l+o+(m<0?0:d);if(r)return h;let y=e==(n<0?l:u)?null:fDe(i/3,e-l),v=e==l?ree:e==u?nee:A1;return(n<0?e!=l:e!=u)&&(v|=oee),new FM(h,v,y)}o+=d-c}return r?e+o:new FM(e+o,0,null)}touches(e,n){let r=0,o=cq(n),a=this.inverted?2:1,s=this.inverted?1:2;for(let i=0;i<this.ranges.length;i+=3){let l=this.ranges[i]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[i+a],d=l+c;if(e<=d&&i==o*3)return!0;r+=this.ranges[i+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,a=0;o<this.ranges.length;o+=3){let s=this.ranges[o],i=s-(this.inverted?a:0),l=s+(this.inverted?0:a),c=this.ranges[o+n],d=this.ranges[o+r];e(i,i+c,l,l+d),a+=d-c}}invert(){return new Ni(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ni.empty:new Ni(e<0?[0,-e,0]:[0,0,e])}}Ni.empty=new Ni([]);class y0{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new y0(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new y0;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let a=this.from;a<this.to;a++){let s=this._maps[a],i=s.mapResult(e,n);if(i.recover!=null){let l=this.getMirror(a);if(l!=null&&l>a&&l<this.to){a=l,e=this._maps[l].recover(i.recover);continue}}o|=i.delInfo,e=i.pos}return r?e:new FM(e,o,null)}}const pP=Object.create(null);class cs{getMap(){return Ni.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=pP[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in pP)throw new RangeError("Duplicate use of step JSON ID "+e);return pP[e]=n,n.prototype.jsonID=e,n}}class $o{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new $o(e,null)}static fail(e){return new $o(null,e)}static fromReplace(e,n,r,o){try{return $o.ok(e.replace(n,r,o))}catch(a){if(a instanceof qE)return $o.fail(a.message);throw a}}}function YN(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let a=t.child(o);a.content.size&&(a=a.copy(YN(a.content,e,a))),a.isInline&&(a=e(a,n,o)),r.push(a)}return Le.fromArray(r)}class tp extends cs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),a=new at(YN(n.content,(s,i)=>!s.isAtom||!i.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return $o.fromReplace(e,this.from,this.to,a)}invert(){return new ji(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new tp(n.pos,r.pos,this.mark)}merge(e){return e instanceof tp&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new tp(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new tp(n.from,n.to,e.markFromJSON(n.mark))}}cs.jsonID("addMark",tp);class ji extends cs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new at(YN(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return $o.fromReplace(e,this.from,this.to,r)}invert(){return new tp(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ji(n.pos,r.pos,this.mark)}merge(e){return e instanceof ji&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ji(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ji(n.from,n.to,e.markFromJSON(n.mark))}}cs.jsonID("removeMark",ji);class np extends cs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return $o.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return $o.fromReplace(e,this.pos,this.pos+1,new at(Le.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new np(this.pos,n.marks[o]);return new np(this.pos,this.mark)}}return new zf(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new np(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new np(n.pos,e.markFromJSON(n.mark))}}cs.jsonID("addNodeMark",np);class zf extends cs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return $o.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return $o.fromReplace(e,this.pos,this.pos+1,new at(Le.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new np(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new zf(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new zf(n.pos,e.markFromJSON(n.mark))}}cs.jsonID("removeNodeMark",zf);class Ho extends cs{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&zM(e,this.from,this.to)?$o.fail("Structure replace would overwrite content"):$o.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ni([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ho(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ho(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ho)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?at.empty:new at(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ho(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?at.empty:new at(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ho(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ho(n.from,n.to,at.fromJSON(e,n.slice),!!n.structure)}}cs.jsonID("replace",Ho);class Vo extends cs{constructor(e,n,r,o,a,s,i=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=a,this.insert=s,this.structure=i}apply(e){if(this.structure&&(zM(e,this.from,this.gapFrom)||zM(e,this.gapTo,this.to)))return $o.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return $o.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?$o.fromReplace(e,this.from,this.to,r):$o.fail("Content does not fit in gap")}getMap(){return new Ni([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Vo(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||a>r.pos?null:new Vo(n.pos,r.pos,o,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Vo(n.from,n.to,n.gapFrom,n.gapTo,at.fromJSON(e,n.slice),n.insert,!!n.structure)}}cs.jsonID("replaceAround",Vo);function zM(t,e,n){let r=t.resolve(e),o=n-e,a=r.depth;for(;o>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,o--;if(o>0){let s=r.node(a).maybeChild(r.indexAfter(a));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function hDe(t,e,n,r){let o=[],a=[],s,i;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let u=l.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let m=Math.max(c,e),h=Math.min(c+l.nodeSize,n),y=r.addToSet(u);for(let v=0;v<u.length;v++)u[v].isInSet(y)||(s&&s.to==m&&s.mark.eq(u[v])?s.to=h:o.push(s=new ji(m,h,u[v])));i&&i.to==m?i.to=h:a.push(i=new tp(m,h,r))}}),o.forEach(l=>t.step(l)),a.forEach(l=>t.step(l))}function gDe(t,e,n,r){let o=[],a=0;t.doc.nodesBetween(e,n,(s,i)=>{if(!s.isInline)return;a++;let l=null;if(r instanceof Hw){let c=s.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(i+s.nodeSize,n);for(let d=0;d<l.length;d++){let u=l[d],m;for(let h=0;h<o.length;h++){let y=o[h];y.step==a-1&&u.eq(o[h].style)&&(m=y)}m?(m.to=c,m.step=a):o.push({style:u,from:Math.max(i,e),to:c,step:a})}}}),o.forEach(s=>t.step(new ji(s.from,s.to,s.style)))}function XN(t,e,n,r=n.contentMatch,o=!0){let a=t.doc.nodeAt(e),s=[],i=e+1;for(let l=0;l<a.childCount;l++){let c=a.child(l),d=i+c.nodeSize,u=r.matchType(c.type);if(!u)s.push(new Ho(i,d,at.empty));else{r=u;for(let m=0;m<c.marks.length;m++)n.allowsMarkType(c.marks[m].type)||t.step(new ji(i,d,c.marks[m]));if(o&&c.isText&&n.whitespace!="pre"){let m,h=/\r?\n|\r/g,y;for(;m=h.exec(c.text);)y||(y=new at(Le.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Ho(i+m.index,i+m.index+m[0].length,y))}}i=d}if(!r.validEnd){let l=r.fillBefore(Le.empty,!0);t.replace(i,i,new at(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function bDe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Dp(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,o=0,a=0;;--r){let s=t.$from.node(r),i=t.$from.index(r)+o,l=t.$to.indexAfter(r)-a;if(r<t.depth&&s.canReplace(i,l,n))return r;if(r==0||s.type.spec.isolating||!bDe(s,i,l))break;i&&(o=1),l<s.childCount&&(a=1)}return null}function yDe(t,e,n){let{$from:r,$to:o,depth:a}=e,s=r.before(a+1),i=o.after(a+1),l=s,c=i,d=Le.empty,u=0;for(let y=a,v=!1;y>n;y--)v||r.index(y)>0?(v=!0,d=Le.from(r.node(y).copy(d)),u++):l--;let m=Le.empty,h=0;for(let y=a,v=!1;y>n;y--)v||o.after(y+1)<o.end(y)?(v=!0,m=Le.from(o.node(y).copy(m)),h++):c++;t.step(new Vo(l,c,s,i,new at(d.append(m),u,h),d.size-u,!0))}function JN(t,e,n=null,r=t){let o=vDe(t,e),a=o&&xDe(r,e);return a?o.map(uq).concat({type:e,attrs:n}).concat(a.map(uq)):null}function uq(t){return{type:t,attrs:null}}function vDe(t,e){let{parent:n,startIndex:r,endIndex:o}=t,a=n.contentMatchAt(r).findWrapping(e);if(!a)return null;let s=a.length?a[0]:e;return n.canReplaceWith(r,o,s)?a:null}function xDe(t,e){let{parent:n,startIndex:r,endIndex:o}=t,a=n.child(r),s=e.contentMatch.findWrapping(a.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function SDe(t,e,n){let r=Le.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let i=n[s].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Le.from(n[s].type.create(n[s].attrs,r))}let o=e.start,a=e.end;t.step(new Vo(o,a,o,a,new at(r,0,0),n.length,!0))}function EDe(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,n,(s,i)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&TDe(t.doc,t.mapping.slice(a).map(i),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!y?c=!1:!h&&y&&(c=!0)}c===!1&&see(t,s,i,a),XN(t,t.mapping.slice(a).map(i,1),r,void 0,c===null);let d=t.mapping.slice(a),u=d.map(i,1),m=d.map(i+s.nodeSize,1);return t.step(new Vo(u,m,u+1,m-1,new at(Le.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&aee(t,s,i,a),!1}})}function aee(t,e,n,r){e.forEach((o,a)=>{if(o.isText){let s,i=/\r?\n|\r/g;for(;s=i.exec(o.text);){let l=t.mapping.slice(r).map(n+1+a+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function see(t,e,n,r){e.forEach((o,a)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+a);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function TDe(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function wDe(t,e,n,r,o){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");n||(n=a.type);let s=n.create(r,null,o||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,s);if(!n.validContent(a.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Vo(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new at(Le.from(s),0,0),1,!0))}function Ra(t,e,n=1,r){let o=t.resolve(e),a=o.depth-n,s=r&&r[r.length-1]||o.parent;if(a<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=n-2;c>a;c--,d--){let u=o.node(c),m=o.index(c);if(u.type.spec.isolating)return!1;let h=u.content.cutByIndex(m,u.childCount),y=r&&r[d+1];y&&(h=h.replaceChild(0,y.type.create(y.attrs)));let v=r&&r[d]||u;if(!u.canReplace(m+1,u.childCount)||!v.type.validContent(h))return!1}let i=o.indexAfter(a),l=r&&r[0];return o.node(a).canReplaceWith(i,i,l?l.type:o.node(a+1).type)}function CDe(t,e,n=1,r){let o=t.doc.resolve(e),a=Le.empty,s=Le.empty;for(let i=o.depth,l=o.depth-n,c=n-1;i>l;i--,c--){a=Le.from(o.node(i).copy(a));let d=r&&r[c];s=Le.from(d?d.type.create(d.attrs,s):o.node(i).copy(s))}t.step(new Ho(e,e,new at(a.append(s),n,n),!0))}function Ll(t,e){let n=t.resolve(e),r=n.index();return iee(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ADe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let a=e.child(o),s=a.type==r?t.type.schema.nodes.text:a.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(a.marks))return!1}return n.validEnd}function iee(t,e){return!!(t&&e&&!t.isLeaf&&ADe(t,e))}function Np(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let a,s,i=r.index(o);if(o==r.depth?(a=r.nodeBefore,s=r.nodeAfter):n>0?(a=r.node(o+1),i++,s=r.node(o).maybeChild(i)):(a=r.node(o).maybeChild(i-1),s=r.node(o+1)),a&&!a.isTextblock&&iee(a,s)&&r.node(o).canReplace(i,i+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function _De(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,a=t.doc.resolve(e-n),s=a.node().type;if(o&&s.inlineContent){let d=s.whitespace=="pre",u=!!s.contentMatch.matchType(o);d&&!u?r=!1:!d&&u&&(r=!0)}let i=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);see(t,d.node(),d.before(),i)}s.inlineContent&&XN(t,e+n-1,s,a.node().contentMatchAt(a.index()),r==null);let l=t.mapping.slice(i),c=l.map(e-n);if(t.step(new Ho(c,l.map(e+n,-1),at.empty,!0)),r===!0){let d=t.doc.resolve(c);aee(t,d.node(),d.before(),t.steps.length)}return t}function kDe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let a=r.index(o);if(r.node(o).canReplaceWith(a,a,n))return r.before(o+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let a=r.indexAfter(o);if(r.node(o).canReplaceWith(a,a,n))return r.after(o+1);if(a<r.node(o).childCount)return null}return null}function lee(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let a=0;a<n.openStart;a++)o=o.firstChild.content;for(let a=1;a<=(n.openStart==0&&n.size?2:1);a++)for(let s=r.depth;s>=0;s--){let i=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(i>0?1:0),c=r.node(s),d=!1;if(a==1)d=c.canReplace(l,l,o);else{let u=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=u&&c.canReplaceWith(l,l,u[0])}if(d)return i==0?r.pos:i<0?r.before(s+1):r.after(s+1)}return null}function $w(t,e,n=e,r=at.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),a=t.resolve(n);return cee(o,a,r)?new Ho(e,n,r):new IDe(o,a,r).fit()}function cee(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class IDe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Le.empty;for(let o=0;o<=e.depth;o++){let a=e.node(o);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=Le.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let a=this.placed,s=r.depth,i=o.depth;for(;s&&i&&a.childCount==1;)a=a.firstChild.content,s--,i--;let l=new at(a,s,i);return e>-1?new Vo(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ho(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let a=n.firstChild;if(n.childCount>1&&(o=0),a.type.spec.isolating&&o<=r){e=r;break}n=a.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,a=null;r?(a=fP(this.unplaced.content,r-1).firstChild,o=a.content):o=this.unplaced.content;let s=o.firstChild;for(let i=this.depth;i>=0;i--){let{type:l,match:c}=this.frontier[i],d,u=null;if(n==1&&(s?c.matchType(s.type)||(u=c.fillBefore(Le.from(s),!1)):a&&l.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:i,parent:a,inject:u};if(n==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:i,parent:a,wrap:d};if(a&&c.matchType(a.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=fP(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new at(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=fP(e,n);if(o.childCount<=1&&n>0){let a=e.size-n<=n+o.size;this.unplaced=new at(uy(e,n-1,1),n-1,a?n-1:r)}else this.unplaced=new at(uy(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:a}){for(;this.depth>n;)this.closeFrontierNode();if(a)for(let v=0;v<a.length;v++)this.openFrontierNode(a[v]);let s=this.unplaced,i=r?r.content:s.content,l=s.openStart-e,c=0,d=[],{match:u,type:m}=this.frontier[n];if(o){for(let v=0;v<o.childCount;v++)d.push(o.child(v));u=u.matchFragment(o)}let h=i.size+e-(s.content.size-s.openEnd);for(;c<i.childCount;){let v=i.child(c),x=u.matchType(v.type);if(!x)break;c++,(c>1||l==0||v.content.size)&&(u=x,d.push(uee(v.mark(m.allowedMarks(v.marks)),c==1?l:0,c==i.childCount?h:-1)))}let y=c==i.childCount;y||(h=-1),this.placed=dy(this.placed,n,Le.from(d)),this.frontier[n].match=u,y&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,x=i;v<h;v++){let S=x.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),x=S.content}this.unplaced=y?e==0?at.empty:new at(uy(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new at(uy(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!mP(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],a=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=mP(e,n,o,r,a);if(s){for(let i=n-1;i>=0;i--){let{match:l,type:c}=this.frontier[i],d=mP(e,i,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:s,move:a?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=dy(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),a=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,a)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=dy(this.placed,this.depth,Le.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Le.empty,!0);n.childCount&&(this.placed=dy(this.placed,this.frontier.length,n))}}function uy(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(uy(t.firstChild.content,e-1,n)))}function dy(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(dy(t.lastChild.content,e-1,n)))}function fP(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function uee(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,uee(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Le.empty,!0)))),t.copy(r)}function mP(t,e,n,r,o){let a=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==a.childCount&&!n.compatibleContent(a.type))return null;let i=r.fillBefore(a.content,!0,s);return i&&!PDe(n,a.content,s)?i:null}function PDe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function ODe(t){return t.spec.defining||t.spec.definingForContent}function MDe(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),a=t.doc.resolve(n);if(cee(o,a,r))return t.step(new Ho(e,n,r));let s=pee(o,a);s[s.length-1]==0&&s.pop();let i=-(o.depth+1);s.unshift(i);for(let m=o.depth,h=o.pos-1;m>0;m--,h--){let y=o.node(m).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;s.indexOf(m)>-1?i=m:o.before(m)==h&&s.splice(1,0,-m)}let l=s.indexOf(i),c=[],d=r.openStart;for(let m=r.content,h=0;;h++){let y=m.firstChild;if(c.push(y),h==r.openStart)break;m=y.content}for(let m=d-1;m>=0;m--){let h=c[m],y=ODe(h.type);if(y&&!h.sameMarkup(o.node(Math.abs(i)-1)))d=m;else if(y||!h.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let h=(m+d+1)%(r.openStart+1),y=c[h];if(y)for(let v=0;v<s.length;v++){let x=s[(v+l)%s.length],S=!0;x<0&&(S=!1,x=-x);let T=o.node(x-1),C=o.index(x-1);if(T.canReplaceWith(C,C,y.type,y.marks))return t.replace(o.before(x),S?a.after(x):n,new at(dee(r.content,0,r.openStart,h),h,r.openEnd))}}let u=t.steps.length;for(let m=s.length-1;m>=0&&(t.replace(e,n,r),!(t.steps.length>u));m--){let h=s[m];h<0||(e=o.before(h),n=a.after(h))}}function dee(t,e,n,r,o){if(e<n){let a=t.firstChild;t=t.replaceChild(0,a.copy(dee(a.content,e+1,n,r,a)))}if(e>r){let a=o.contentMatchAt(0),s=a.fillBefore(t).append(t);t=s.append(a.matchFragment(s).fillBefore(Le.empty,!0))}return t}function RDe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=kDe(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new at(Le.from(r),0,0))}function DDe(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),a=pee(r,o);for(let s=0;s<a.length;s++){let i=a[s],l=s==a.length-1;if(l&&i==0||r.node(i).type.contentMatch.validEnd)return t.delete(r.start(i),o.end(i));if(i>0&&(l||r.node(i-1).canReplace(r.index(i-1),o.indexAfter(i-1))))return t.delete(r.before(i),o.after(i))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function pee(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let a=t.start(o);if(a<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(a==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==a-1)&&n.push(o)}return n}class jh extends cs{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return $o.fail("No node at attribute step's position");let r=Object.create(null);for(let a in n.attrs)r[a]=n.attrs[a];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return $o.fromReplace(e,this.pos,this.pos+1,new at(Le.from(o),0,n.isLeaf?0:1))}getMap(){return Ni.empty}invert(e){return new jh(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jh(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new jh(n.pos,n.attr,n.value)}}cs.jsonID("attr",jh);class v0 extends cs{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return $o.ok(r)}getMap(){return Ni.empty}invert(e){return new v0(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new v0(n.attr,n.value)}}cs.jsonID("docAttr",v0);let Jh=class extends Error{};Jh=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Jh.prototype=Object.create(Error.prototype);Jh.prototype.constructor=Jh;Jh.prototype.name="TransformError";class Vw{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new y0}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Jh(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=at.empty){let o=$w(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new at(Le.from(r),0,0))}delete(e,n){return this.replace(e,n,at.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return MDe(this,e,n,r),this}replaceRangeWith(e,n,r){return RDe(this,e,n,r),this}deleteRange(e,n){return DDe(this,e,n),this}lift(e,n){return yDe(this,e,n),this}join(e,n=1){return _De(this,e,n),this}wrap(e,n){return SDe(this,e,n),this}setBlockType(e,n=e,r,o=null){return EDe(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return wDe(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new jh(e,n,r)),this}setDocAttribute(e,n){return this.step(new v0(e,n)),this}addNodeMark(e,n){return this.step(new np(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof fr)n.isInSet(r.marks)&&this.step(new zf(e,n));else{let o=r.marks,a,s=[];for(;a=n.isInSet(o);)s.push(new zf(e,a)),o=a.removeFromSet(o);for(let i=s.length-1;i>=0;i--)this.step(s[i])}return this}split(e,n=1,r){return CDe(this,e,n,r),this}addMark(e,n,r){return hDe(this,e,n,r),this}removeMark(e,n,r){return gDe(this,e,n,r),this}clearIncompatible(e,n,r){return XN(this,e,n,r),this}}const hP=Object.create(null);class Mt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new NDe(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=at.empty){let r=n.content.lastChild,o=null;for(let i=0;i<n.openEnd;i++)o=r,r=r.lastChild;let a=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:l,$to:c}=s[i],d=e.mapping.slice(a);e.replaceRange(d.map(l.pos),d.map(c.pos),i?at.empty:n),i==0&&fq(e,a,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:s,$to:i}=o[a],l=e.mapping.slice(r),c=l.map(s.pos),d=l.map(i.pos);a?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),fq(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new ft(e):hh(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let a=e.depth-1;a>=0;a--){let s=n<0?hh(e.node(0),e.node(a),e.before(a+1),e.index(a),n,r):hh(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new As(e.node(0))}static atStart(e){return hh(e,e,0,0,1)||new As(e)}static atEnd(e){return hh(e,e,e.content.size,e.childCount,-1)||new As(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=hP[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in hP)throw new RangeError("Duplicate use of selection JSON ID "+e);return hP[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ft.between(this.$anchor,this.$head).getBookmark()}}Mt.prototype.visible=!0;class NDe{constructor(e,n){this.$from=e,this.$to=n}}let dq=!1;function pq(t){!dq&&!t.parent.inlineContent&&(dq=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ft extends Mt{constructor(e,n=e){pq(e),pq(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Mt.near(r);let o=e.resolve(n.map(this.anchor));return new ft(o.parent.inlineContent?o:r,r)}replace(e,n=at.empty){if(super.replace(e,n),n==at.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ft&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Gw(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ft(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let a=Mt.findFrom(n,r,!0)||Mt.findFrom(n,-r,!0);if(a)n=a.$head;else return Mt.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Mt.findFrom(e,-r,!0)||Mt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new ft(e,n)}}Mt.jsonID("text",ft);class Gw{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Gw(e.map(this.anchor),e.map(this.head))}resolve(e){return ft.between(e.resolve(this.anchor),e.resolve(this.head))}}class Tt extends Mt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),a=e.resolve(o);return r?Mt.near(a):new Tt(a)}content(){return new at(Le.from(this.node),0,0)}eq(e){return e instanceof Tt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new QN(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Tt(e.resolve(n.anchor))}static create(e,n){return new Tt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Tt.prototype.visible=!1;Mt.jsonID("node",Tt);class QN{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Gw(r,r):new QN(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Tt.isSelectable(r)?new Tt(n):Mt.near(n)}}class As extends Mt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=at.empty){if(n==at.empty){e.delete(0,e.doc.content.size);let r=Mt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new As(e)}map(e){return new As(e)}eq(e){return e instanceof As}getBookmark(){return LDe}}Mt.jsonID("all",As);const LDe={map(){return this},resolve(t){return new As(t)}};function hh(t,e,n,r,o,a=!1){if(e.inlineContent)return ft.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let i=e.child(s);if(i.isAtom){if(!a&&Tt.isSelectable(i))return Tt.create(t,n-(o<0?i.nodeSize:0))}else{let l=hh(t,i,n+o,o<0?i.childCount:0,o,a);if(l)return l}n+=i.nodeSize*o}return null}function fq(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof Ho||o instanceof Vo))return;let a=t.mapping.maps[r],s;a.forEach((i,l,c,d)=>{s==null&&(s=d)}),t.setSelection(Mt.near(t.doc.resolve(s),n))}const mq=1,CS=2,hq=4;class jDe extends Vw{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|mq)&~CS,this.storedMarks=null,this}get selectionSet(){return(this.updated&mq)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=CS,this}ensureMarks(e){return fr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&CS)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~CS,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||fr.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let a=this.storedMarks;if(!a){let s=this.doc.resolve(n);a=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,a)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Mt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=hq,this}get scrolledIntoView(){return(this.updated&hq)>0}}function gq(t,e){return!e||!t?t:t.bind(e)}class py{constructor(e,n,r){this.name=e,this.init=gq(n.init,r),this.apply=gq(n.apply,r)}}const BDe=[new py("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new py("selection",{init(t,e){return t.selection||Mt.atStart(e.doc)},apply(t){return t.selection}}),new py("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new py("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class gP{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=BDe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new py(r.key,r.spec.state,r))})}}class Ah{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let i=this.config.plugins[s];if(i.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,d=l<n.length&&i.spec.appendTransaction.call(i,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let u=0;u<this.config.plugins.length;u++)o.push(u<s?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),a=!0}o&&(o[s]={state:r,n:n.length})}}if(!a)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ah(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let a=r[o];n[a.name]=a.apply(e,this[a.name],this,n)}return n}get tr(){return new jDe(this)}static create(e){let n=new gP(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ah(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new gP(this.schema,e.plugins),r=n.fields,o=new Ah(n);for(let a=0;a<r.length;a++){let s=r[a].name;o[s]=this.hasOwnProperty(s)?this[s]:r[a].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],a=o.spec.state;a&&a.toJSON&&(n[r]=a.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new gP(e.schema,e.plugins),a=new Ah(o);return o.fields.forEach(s=>{if(s.name=="doc")a.doc=Hi.fromJSON(e.schema,n.doc);else if(s.name=="selection")a.selection=Mt.fromJSON(a.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(a.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let i in r){let l=r[i],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,i)){a[s.name]=c.fromJSON.call(l,e,n[i],a);return}}a[s.name]=s.init(e,a)}}),a}}function fee(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=fee(o,e,{})),n[r]=o}return n}class xn{constructor(e){this.spec=e,this.props={},e.props&&fee(e.props,this,this.props),this.key=e.key?e.key.key:mee("plugin")}getState(e){return e[this.key]}}const bP=Object.create(null);function mee(t){return t in bP?t+"$"+ ++bP[t]:(bP[t]=0,t+"$")}class jn{constructor(e="key"){this.key=mee(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const _a=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Qh=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let UM=null;const Ru=function(t,e,n){let r=UM||(UM=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},FDe=function(){UM=null},Uf=function(t,e,n,r){return n&&(bq(t,e,n,r,-1)||bq(t,e,n,r,1))},zDe=/^(img|br|input|textarea|hr)$/i;function bq(t,e,n,r,o){for(var a;;){if(t==n&&e==r)return!0;if(e==(o<0?0:kl(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Tv(t)||zDe.test(t.nodeName)||t.contentEditable=="false")return!1;e=_a(t)+(o<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((a=s.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=o;else return!1;else t=s,e=o<0?kl(t):0}else return!1}}function kl(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function UDe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=kl(t)}else if(t.parentNode&&!Tv(t))e=_a(t),t=t.parentNode;else return null}}function qDe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Tv(t))e=_a(t)+1,t=t.parentNode;else return null}}function HDe(t,e,n){for(let r=e==0,o=e==kl(t);r||o;){if(t==n)return!0;let a=_a(t);if(t=t.parentNode,!t)return!1;r=r&&a==0,o=o&&a==kl(t)}}function Tv(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Kw=function(t){return t.focusNode&&Uf(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function df(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function $De(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function VDe(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(kl(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(kl(r.startContainer),r.startOffset)}}}const Vc=typeof navigator<"u"?navigator:null,yq=typeof document<"u"?document:null,Lp=Vc&&Vc.userAgent||"",qM=/Edge\/(\d+)/.exec(Lp),hee=/MSIE \d/.exec(Lp),HM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Lp),li=!!(hee||HM||qM),sp=hee?document.documentMode:HM?+HM[1]:qM?+qM[1]:0,Ol=!li&&/gecko\/(\d+)/i.test(Lp);Ol&&+(/Firefox\/(\d+)/.exec(Lp)||[0,0])[1];const $M=!li&&/Chrome\/(\d+)/.exec(Lp),Qa=!!$M,gee=$M?+$M[1]:0,Is=!li&&!!Vc&&/Apple Computer/.test(Vc.vendor),Zh=Is&&(/Mobile\/\w+/.test(Lp)||!!Vc&&Vc.maxTouchPoints>2),Sl=Zh||(Vc?/Mac/.test(Vc.platform):!1),GDe=Vc?/Win/.test(Vc.platform):!1,ju=/Android \d/.test(Lp),wv=!!yq&&"webkitFontSmoothing"in yq.documentElement.style,KDe=wv?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function WDe(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Au(t,e){return typeof t=="number"?t:t[e]}function YDe(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function vq(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,a=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Qh(s);continue}let i=s,l=i==a.body,c=l?WDe(a):YDe(i),d=0,u=0;if(e.top<c.top+Au(r,"top")?u=-(c.top-e.top+Au(o,"top")):e.bottom>c.bottom-Au(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+Au(o,"top")-c.top:e.bottom-c.bottom+Au(o,"bottom")),e.left<c.left+Au(r,"left")?d=-(c.left-e.left+Au(o,"left")):e.right>c.right-Au(r,"right")&&(d=e.right-c.right+Au(o,"right")),d||u)if(l)a.defaultView.scrollBy(d,u);else{let h=i.scrollLeft,y=i.scrollTop;u&&(i.scrollTop+=u),d&&(i.scrollLeft+=d);let v=i.scrollLeft-h,x=i.scrollTop-y;e={left:e.left-v,top:e.top-x,right:e.right-v,bottom:e.bottom-x}}let m=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(m))break;s=m=="absolute"?s.offsetParent:Qh(s)}}function XDe(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let a=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let i=t.root.elementFromPoint(a,s);if(!i||i==t.dom||!t.dom.contains(i))continue;let l=i.getBoundingClientRect();if(l.top>=n-20){r=i,o=l.top;break}}return{refDOM:r,refTop:o,stack:bee(t.dom)}}function bee(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Qh(r));return e}function JDe({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;yee(n,r==0?0:r-e)}function yee(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:a}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=a&&(r.scrollLeft=a)}}let eh=null;function QDe(t){if(t.setActive)return t.setActive();if(eh)return t.focus(eh);let e=bee(t);t.focus(eh==null?{get preventScroll(){return eh={preventScroll:!0},!0}}:void 0),eh||(eh=!1,yee(e,0))}function vee(t,e){let n,r=2e8,o,a=0,s=e.top,i=e.top,l,c;for(let d=t.firstChild,u=0;d;d=d.nextSibling,u++){let m;if(d.nodeType==1)m=d.getClientRects();else if(d.nodeType==3)m=Ru(d).getClientRects();else continue;for(let h=0;h<m.length;h++){let y=m[h];if(y.top<=s&&y.bottom>=i){s=Math.max(y.bottom,s),i=Math.min(y.top,i);let v=y.left>e.left?y.left-e.left:y.right<e.left?e.left-y.right:0;if(v<r){n=d,r=v,o=v&&n.nodeType==3?{left:y.right<e.left?y.right:y.left,top:e.top}:e,d.nodeType==1&&v&&(a=u+(e.left>=(y.left+y.right)/2?1:0));continue}}else y.top>e.top&&!l&&y.left<=e.left&&y.right>=e.left&&(l=d,c={left:Math.max(y.left,Math.min(y.right,e.left)),top:y.top});!n&&(e.left>=y.right&&e.top>=y.top||e.left>=y.left&&e.top>=y.bottom)&&(a=u+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?ZDe(n,o):!n||r&&n.nodeType==1?{node:t,offset:a}:vee(n,o)}function ZDe(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let a=Ud(r,1);if(a.top!=a.bottom&&ZN(e,a))return{node:t,offset:o+(e.left>=(a.left+a.right)/2?1:0)}}return{node:t,offset:0}}function ZN(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eNe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tNe(t,e,n){let{node:r,offset:o}=vee(e,n),a=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,a)}function nNe(t,e,n,r){let o=-1;for(let a=e,s=!1;a!=t.dom;){let i=t.docView.nearestDesc(a,!0),l;if(!i)return null;if(i.dom.nodeType==1&&(i.node.isBlock&&i.parent||!i.contentDOM)&&((l=i.dom.getBoundingClientRect()).width||l.height)&&(i.node.isBlock&&i.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(i.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?o=i.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=i.posAfter),s=!0),!i.contentDOM&&o<0&&!i.node.isText))return(i.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?i.posBefore:i.posAfter;a=i.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function xee(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),a=o;;){let s=t.childNodes[a];if(s.nodeType==1){let i=s.getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(ZN(e,c))return xee(s,e,c)}}if((a=(a+1)%r)==o)break}return t}function rNe(t,e){let n=t.dom.ownerDocument,r,o=0,a=VDe(n,e.left,e.top);a&&({node:r,offset:o}=a);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),i;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!ZN(e,c)||(s=xee(t.dom,e,c),!s))return null}if(Is)for(let c=s;r&&c;c=Qh(c))c.draggable&&(r=void 0);if(s=eNe(s,e),r){if(Ol&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}let c;wv&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?i=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(i=nNe(t,r,o,e))}i==null&&(i=tNe(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:i,inside:l?l.posAtStart-l.border:-1}}function xq(t){return t.top<t.bottom||t.left<t.right}function Ud(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(xq(r))return r}return Array.prototype.find.call(n,xq)||t.getBoundingClientRect()}const oNe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function See(t,e,n){let{node:r,offset:o,atom:a}=t.docView.domFromPos(e,n<0?-1:1),s=wv||Ol;if(r.nodeType==3)if(s&&(oNe.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Ud(Ru(r,o,o),n);if(Ol&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Ud(Ru(r,o-1,o-1),-1);if(c.top==l.top){let d=Ud(Ru(r,o,o+1),-1);if(d.top!=l.top)return Gb(d,d.left<c.left)}}return l}else{let l=o,c=o,d=n<0?1:-1;return n<0&&!o?(c++,d=-1):n>=0&&o==r.nodeValue.length?(l--,d=1):n<0?l--:c++,Gb(Ud(Ru(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&o&&(n<0||o==kl(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return yP(l.getBoundingClientRect(),!1)}if(a==null&&o<kl(r)){let l=r.childNodes[o];if(l.nodeType==1)return yP(l.getBoundingClientRect(),!0)}return yP(r.getBoundingClientRect(),n>=0)}if(a==null&&o&&(n<0||o==kl(r))){let l=r.childNodes[o-1],c=l.nodeType==3?Ru(l,kl(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Gb(Ud(c,1),!1)}if(a==null&&o<kl(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Ru(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Gb(Ud(c,-1),!0)}return Gb(Ud(r.nodeType==3?Ru(r):r,-n),n>=0)}function Gb(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function yP(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Eee(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function aNe(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return Eee(t,e,()=>{let{node:a}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let i=t.docView.nearestDesc(a,!0);if(!i)break;if(i.node.isBlock){a=i.contentDOM||i.dom;break}a=i.dom.parentNode}let s=See(t,o.pos,1);for(let i=a.firstChild;i;i=i.nextSibling){let l;if(i.nodeType==1)l=i.getClientRects();else if(i.nodeType==3)l=Ru(i,0,i.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const sNe=/[\u0590-\u08ac]/;function iNe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,a=!o,s=o==r.parent.content.size,i=t.domSelection();return i?!sNe.test(r.parent.textContent)||!i.modify?n=="left"||n=="backward"?a:s:Eee(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:u}=t.domSelectionRange(),m=i.caretBidiLevel;i.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:y,focusOffset:v}=t.domSelectionRange(),x=y&&!h.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==v;try{i.collapse(d,u),l&&(l!=d||c!=u)&&i.extend&&i.extend(l,c)}catch{}return m!=null&&(i.caretBidiLevel=m),x}):r.pos==r.start()||r.pos==r.end()}let Sq=null,Eq=null,Tq=!1;function lNe(t,e,n){return Sq==e&&Eq==n?Tq:(Sq=e,Eq=n,Tq=n=="up"||n=="down"?aNe(t,e,n):iNe(t,e,n))}const Ml=0,wq=1,mf=2,Gc=3;class Cv{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Ml,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let a,s;if(e==this.contentDOM)a=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(e==this.contentDOM)a=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>_a(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let a=e;;a=a.parentNode){if(a==this.dom){o=!1;break}if(a.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){o=!0;break}if(a.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let a=this.getDesc(o),s;if(a&&(!n||a.node))if(r&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return a}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let a=this.getDesc(o);if(a)return a.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],a=r+o.size;if(r==e&&a!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let i=o.children[s];if(i.size){o=i;break}}return o}if(e<a)return o.descAt(e-r-o.border);r=a}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let a=0;r<this.children.length;r++){let s=this.children[r],i=a+s.size;if(i>e||s instanceof wee){o=e-a;break}a=i}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof Tee&&a.side>=0;r--);if(n<=0){let a,s=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,s=!1);return a&&n&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,n):{node:this.contentDOM,offset:a?_a(a.dom)+1:0}}else{let a,s=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,n):{node:this.contentDOM,offset:a?_a(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,a=-1;for(let s=r,i=0;;i++){let l=this.children[i],c=s+l.size;if(o==-1&&e<=c){let d=s+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=s;for(let u=i;u>0;u--){let m=this.children[u-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){o=_a(m.dom)+1;break}e-=m.size}o==-1&&(o=0)}if(o>-1&&(c>n||i==this.children.length-1)){n=c;for(let d=i+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){a=_a(u.dom);break}n+=u.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let a=Math.min(e,n),s=Math.max(e,n);for(let h=0,y=0;h<this.children.length;h++){let v=this.children[h],x=y+v.size;if(a>y&&s<x)return v.setSelection(e-y-v.border,n-y-v.border,r,o);y=x}let i=this.domFromPos(e,e?-1:1),l=n==e?i:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),u=!1;if((Ol||Is)&&e==n){let{node:h,offset:y}=i;if(h.nodeType==3){if(u=!!(y&&h.nodeValue[y-1]==`
`),u&&y==h.nodeValue.length)for(let v=h,x;v;v=v.parentNode){if(x=v.nextSibling){x.nodeName=="BR"&&(i=l={node:x.parentNode,offset:_a(x)+1});break}let S=v.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let v=h.childNodes[y-1];u=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Ol&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let h=d.focusNode.childNodes[d.focusOffset];h&&h.contentEditable=="false"&&(o=!0)}if(!(o||u&&Is)&&Uf(i.node,i.offset,d.anchorNode,d.anchorOffset)&&Uf(l.node,l.offset,d.focusNode,d.focusOffset))return;let m=!1;if((c.extend||e==n)&&!(u&&Ol)){c.collapse(i.node,i.offset);try{e!=n&&c.extend(l.node,l.offset),m=!0}catch{}}if(!m){if(e>n){let y=i;i=l,l=y}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(i.node,i.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let a=this.children[o],s=r+a.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let i=r+a.border,l=s-a.border;if(e>=i&&n<=l){this.dirty=e==r||n==s?mf:wq,e==i&&n==l&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Gc:a.markDirty(e-i,n-i);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?mf:Gc}r=s}this.dirty=mf}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?mf:wq;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Tee extends Cv{constructor(e,n,r,o){let a,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)})),!n.type.spec.raw){if(s.nodeType!=1){let i=document.createElement("span");i.appendChild(s),s=i}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,a=this}matchesWidget(e){return this.dirty==Ml&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class cNe extends Cv{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class qf extends Cv{constructor(e,n,r,o,a){super(e,[],r,o),this.mark=n,this.spec=a}static create(e,n,r,o){let a=o.nodeViews[n.type.name],s=a&&a(n,o,r);return(!s||!s.dom)&&(s=Rp.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new qf(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Gc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Gc&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ml){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ml}}slice(e,n,r){let o=qf.create(this.parent,this.mark,!0,r),a=this.children,s=this.size;n<s&&(a=GM(a,n,s,r)),e>0&&(a=GM(a,0,e,r));for(let i=0;i<a.length;i++)a[i].parent=o;return o.children=a,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ip extends Cv{constructor(e,n,r,o,a,s,i,l,c){super(e,[],a,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=i}static create(e,n,r,o,a,s){let i=a.nodeViews[n.type.name],l,c=i&&i(n,a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),d=c&&c.dom,u=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=Rp.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!u&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let m=d;return d=_ee(d,r,n),c?l=new uNe(e,n,r,o,d,u||null,m,c,a,s+1):n.isText?new Ww(e,n,r,o,d,m,a):new ip(e,n,r,o,d,u||null,m,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Le.empty)}return e}matchesNode(e,n,r){return this.dirty==Ml&&e.eq(this.node)&&GE(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,a=e.composing?this.localCompositionInfo(e,n):null,s=a&&a.pos>-1?a:null,i=a&&a.pos<0,l=new pNe(this,s&&s.node,e);hNe(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&l.syncToMarks(d==this.node.childCount?fr.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,o)},(c,d,u,m)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,d,u,m)||i&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(h=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(c,d,u,h,e)||l.updateNextNode(c,d,u,e,m,o)||l.addNode(c,d,u,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==mf)&&(s&&this.protectLocalComposition(e,s),Cee(this.contentDOM,this.children,e),Zh&&gNe(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ft)||r<n||o>n+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,i=bNe(this.node.content,s,r-n,o-n);return i<0?null:{node:a,pos:i,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new cNe(this,a,n,o);e.input.compositionNodes.push(s),this.children=GM(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==Gc||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Ml}updateOuterDeco(e){if(GE(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Aee(this.dom,this.nodeDOM,VM(this.outerDeco,this.node,n),VM(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Cq(t,e,n,r,o){_ee(r,e,t);let a=new ip(void 0,t,e,n,r,r,r,o,0);return a.contentDOM&&a.updateChildren(o,0),a}class Ww extends ip{constructor(e,n,r,o,a,s,i){super(e,n,r,o,a,null,s,i,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Gc||this.dirty!=Ml&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ml||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Ml,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),a=document.createTextNode(o.text);return new Ww(this.parent,o,this.outerDeco,this.innerDeco,a,a,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Gc)}get domAtom(){return!1}isText(e){return this.node.text==e}}class wee extends Cv{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ml&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uNe extends ip{constructor(e,n,r,o,a,s,i,l,c,d){super(e,n,r,o,a,s,i,c,d),this.spec=l}update(e,n,r,o){if(this.dirty==Gc)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,n,r);return a&&this.updateInner(e,n,r,o),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Cee(t,e,n){let r=t.firstChild,o=!1;for(let a=0;a<e.length;a++){let s=e[a],i=s.dom;if(i.parentNode==t){for(;i!=r;)r=Aq(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(i,r);if(s instanceof qf){let l=r?r.previousSibling:t.lastChild;Cee(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Aq(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const Hy=function(t){t&&(this.nodeName=t)};Hy.prototype=Object.create(null);const hf=[new Hy];function VM(t,e,n){if(t.length==0)return hf;let r=n?hf[0]:new Hy,o=[r];for(let a=0;a<t.length;a++){let s=t[a].type.attrs;if(s){s.nodeName&&o.push(r=new Hy(s.nodeName));for(let i in s){let l=s[i];l!=null&&(n&&o.length==1&&o.push(r=new Hy(e.isInline?"span":"div")),i=="class"?r.class=(r.class?r.class+" ":"")+l:i=="style"?r.style=(r.style?r.style+";":"")+l:i!="nodeName"&&(r[i]=l))}}}return o}function Aee(t,e,n,r){if(n==hf&&r==hf)return e;let o=e;for(let a=0;a<r.length;a++){let s=r[a],i=n[a];if(a){let l;i&&i.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),i=hf[0]),o=l}dNe(o,i||hf[0],s)}return o}function dNe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)o.indexOf(r[a])==-1&&t.classList.remove(r[a]);for(let a=0;a<o.length;a++)r.indexOf(o[a])==-1&&t.classList.add(o[a]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function _ee(t,e,n){return Aee(t,t,hf,VM(e,n,t.nodeType!=1))}function GE(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Aq(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class pNe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fNe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,a=this.stack.length>>1,s=Math.min(a,e.length);for(;o<s&&(o==a-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<a;)this.destroyRest(),this.top.dirty=Ml,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[a])&&!this.isLocked(c.dom)){i=l;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let l=qf.create(this.top,e[a],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,a++}}findNodeMatch(e,n,r,o){let a=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))a=this.top.children.indexOf(s,this.index);else for(let i=this.index,l=Math.min(this.top.children.length,i+5);i<l;i++){let c=this.top.children[i];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){a=i;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,n,r,o,a){let s=this.top.children[o];return s.dirty==Gc&&s.dom==s.contentDOM&&(s.dirty=mf),s.update(e,n,r,a)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,a,s){for(let i=this.index;i<this.top.children.length;i++){let l=this.top.children[i];if(l instanceof ip){let c=this.preMatch.matched.get(l);if(c!=null&&c!=a)return!1;let d=l.dom,u,m=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Gc&&GE(n,l.outerDeco));if(!m&&l.update(e,n,r,o))return this.destroyBetween(this.index,i),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!m&&(u=this.recreateWrapper(l,e,n,r,o,s)))return this.destroyBetween(this.index,i),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=mf,u.updateChildren(o,s+1),u.dirty=Ml),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,a,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!GE(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let i=ip.create(this.top,n,r,o,a,s);if(i.contentDOM){i.children=e.children,e.children=[];for(let l of i.children)l.parent=i}return e.destroy(),i}addNode(e,n,r,o,a){let s=ip.create(this.top,e,n,r,o,a);s.contentDOM&&s.updateChildren(o,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let a=new Tee(this.top,e,n,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof qf;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ww)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Is||Qa)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new wee(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fNe(t,e){let n=e,r=n.children.length,o=t.childCount,a=new Map,s=[];e:for(;o>0;){let i;for(;;)if(r){let c=n.children[r-1];if(c instanceof qf)n=c,r=c.children.length;else{i=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=i.node;if(l){if(l!=t.child(o-1))break;--o,a.set(i,o),s.push(i)}}return{index:o,matched:a,matches:s.reverse()}}function mNe(t,e){return t.type.side-e.type.side}function hNe(t,e,n,r){let o=e.locals(t),a=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,o,e.forChild(a,d),c),a+=d.nodeSize}return}let s=0,i=[],l=null;for(let c=0;;){let d,u;for(;s<o.length&&o[s].to==a;){let x=o[s++];x.widget&&(d?(u||(u=[d])).push(x):d=x)}if(d)if(u){u.sort(mNe);for(let x=0;x<u.length;x++)n(u[x],c,!!l)}else n(d,c,!!l);let m,h;if(l)h=-1,m=l,l=null;else if(c<t.childCount)h=c,m=t.child(c++);else break;for(let x=0;x<i.length;x++)i[x].to<=a&&i.splice(x--,1);for(;s<o.length&&o[s].from<=a&&o[s].to>a;)i.push(o[s++]);let y=a+m.nodeSize;if(m.isText){let x=y;s<o.length&&o[s].from<x&&(x=o[s].from);for(let S=0;S<i.length;S++)i[S].to<x&&(x=i[S].to);x<y&&(l=m.cut(x-a),m=m.cut(0,x-a),y=x,h=-1)}else for(;s<o.length&&o[s].to<y;)s++;let v=m.isInline&&!m.isLeaf?i.filter(x=>!x.inline):i.slice();r(m,v,e.forChild(a,m),h),a=y}}function gNe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function bNe(t,e,n,r){for(let o=0,a=0;o<t.childCount&&a<=r;){let s=t.child(o++),i=a;if(a+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<t.childCount;){let c=t.child(o++);if(a+=c.nodeSize,!c.isText)break;l+=c.text}if(a>=n){if(a>=r&&l.slice(r-e.length-i,r-i)==e)return r-e.length;let c=i<r?l.lastIndexOf(e,r-i-1):-1;if(c>=0&&c+e.length+i>=n)return i+c;if(n==r&&l.length>=r+e.length-i&&l.slice(r-i,r-i+e.length)==e)return r}}return-1}function GM(t,e,n,r,o){let a=[];for(let s=0,i=0;s<t.length;s++){let l=t[s],c=i,d=i+=l.size;c>=n||d<=e?a.push(l):(c<e&&a.push(l.slice(0,e-c,r)),o&&(a.push(o),o=void 0),d>n&&a.push(l.slice(n-c,l.size,r)))}return a}function e3(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),a=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let i=r.resolve(s),l,c;if(Kw(n)){for(l=s;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&Tt.isSelectable(u)&&o.parent&&!(u.isInline&&HDe(n.focusNode,n.focusOffset,o.dom))){let m=o.posBefore;c=new Tt(s==m?i:r.resolve(m))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let u=s,m=s;for(let h=0;h<n.rangeCount;h++){let y=n.getRangeAt(h);u=Math.min(u,t.docView.posFromDOM(y.startContainer,y.startOffset,1)),m=Math.max(m,t.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(u<0)return null;[l,s]=m==t.state.selection.anchor?[m,u]:[u,m],i=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let u=e=="pointer"||t.state.selection.head<i.pos&&!a?1:-1;c=t3(t,d,i,u)}return c}function kee(t){return t.editable?t.hasFocus():Pee(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qu(t,e=!1){let n=t.state.selection;if(Iee(t,n),!!kee(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Qa){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Uf(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)vNe(t);else{let{anchor:r,head:o}=n,a,s;_q&&!(n instanceof ft)&&(n.$from.parent.inlineContent||(a=kq(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=kq(t,n.to))),t.docView.setSelection(r,o,t,e),_q&&(a&&Iq(a),s&&Iq(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yNe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const _q=Is||Qa&&gee<63;function kq(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(Is&&o&&o.contentEditable=="false")return vP(o);if((!o||o.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(o)return vP(o);if(a)return vP(a)}}function vP(t){return t.contentEditable="true",Is&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Iq(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function yNe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!kee(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function vNe(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,_a(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&li&&sp<=11&&(n.disabled=!0,n.disabled=!1)}function Iee(t,e){if(e instanceof Tt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Pq(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Pq(t)}function Pq(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function t3(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||ft.between(e,n,r)}function Oq(t){return t.editable&&!t.hasFocus()?!1:Pee(t)}function Pee(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xNe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Uf(e.node,e.offset,n.anchorNode,n.anchorOffset)}function KM(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),a=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return a&&Mt.findFrom(a,e)}function Vd(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Mq(t,e,n){let r=t.state.selection;if(r instanceof ft)if(n.indexOf("s")>-1){let{$head:o}=r,a=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+a.nodeSize*(e<0?-1:1));return Vd(t,new ft(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=KM(t.state,e);return o&&o instanceof Tt?Vd(t,o):!1}else if(!(Sl&&n.indexOf("m")>-1)){let o=r.$head,a=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!a||a.isText)return!1;let i=e<0?o.pos-a.nodeSize:o.pos;return a.isAtom||(s=t.docView.descAt(i))&&!s.contentDOM?Tt.isSelectable(a)?Vd(t,new Tt(e<0?t.state.doc.resolve(o.pos-a.nodeSize):o)):wv?Vd(t,new ft(t.state.doc.resolve(e<0?i:i+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Tt&&r.node.isInline)return Vd(t,new ft(e>0?r.$to:r.$from));{let o=KM(t.state,e);return o?Vd(t,o):!1}}}function KE(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function $y(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function th(t,e){return e<0?SNe(t):ENe(t)}function SNe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,a,s=!1;for(Ol&&n.nodeType==1&&r<KE(n)&&$y(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let i=n.childNodes[r-1];if($y(i,-1))o=n,a=--r;else if(i.nodeType==3)n=i,r=n.nodeValue.length;else break}}else{if(Oee(n))break;{let i=n.previousSibling;for(;i&&$y(i,-1);)o=n.parentNode,a=_a(i),i=i.previousSibling;if(i)n=i,r=KE(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?WM(t,n,r):o&&WM(t,o,a)}function ENe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=KE(n),a,s;for(;;)if(r<o){if(n.nodeType!=1)break;let i=n.childNodes[r];if($y(i,1))a=n,s=++r;else break}else{if(Oee(n))break;{let i=n.nextSibling;for(;i&&$y(i,1);)a=i.parentNode,s=_a(i)+1,i=i.nextSibling;if(i)n=i,r=0,o=KE(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}a&&WM(t,a,s)}function Oee(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function TNe(t,e){for(;t&&e==t.childNodes.length&&!Tv(t);)e=_a(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function wNe(t,e){for(;t&&!e&&!Tv(t);)e=_a(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function WM(t,e,n){if(e.nodeType!=3){let a,s;(s=TNe(e,n))?(e=s,n=0):(a=wNe(e,n))&&(e=a,n=a.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Kw(r)){let a=document.createRange();a.setEnd(e,n),a.setStart(e,n),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&qu(t)},50)}function Rq(t,e){let n=t.state.doc.resolve(e);if(!(Qa||GDe)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let a=t.coordsAtPos(e-1),s=(a.top+a.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(a.left-o.left)>1)return a.left<o.left?"ltr":"rtl"}if(e<n.end()){let a=t.coordsAtPos(e+1),s=(a.top+a.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(a.left-o.left)>1)return a.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Dq(t,e,n){let r=t.state.selection;if(r instanceof ft&&!r.empty||n.indexOf("s")>-1||Sl&&n.indexOf("m")>-1)return!1;let{$from:o,$to:a}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=KM(t.state,e);if(s&&s instanceof Tt)return Vd(t,s)}if(!o.parent.inlineContent){let s=e<0?o:a,i=r instanceof As?Mt.near(s,e):Mt.findFrom(s,e);return i?Vd(t,i):!1}return!1}function Nq(t,e){if(!(t.state.selection instanceof ft))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){let s=t.state.tr;return e<0?s.delete(n.pos-a.nodeSize,n.pos):s.delete(n.pos,n.pos+a.nodeSize),t.dispatch(s),!0}return!1}function Lq(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function CNe(t){if(!Is||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Lq(t,r,"true"),setTimeout(()=>Lq(t,r,"false"),20)}return!1}function ANe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function _Ne(t,e){let n=e.keyCode,r=ANe(e);if(n==8||Sl&&n==72&&r=="c")return Nq(t,-1)||th(t,-1);if(n==46&&!e.shiftKey||Sl&&n==68&&r=="c")return Nq(t,1)||th(t,1);if(n==13||n==27)return!0;if(n==37||Sl&&n==66&&r=="c"){let o=n==37?Rq(t,t.state.selection.from)=="ltr"?-1:1:-1;return Mq(t,o,r)||th(t,o)}else if(n==39||Sl&&n==70&&r=="c"){let o=n==39?Rq(t,t.state.selection.from)=="ltr"?1:-1:1;return Mq(t,o,r)||th(t,o)}else{if(n==38||Sl&&n==80&&r=="c")return Dq(t,-1,r)||th(t,-1);if(n==40||Sl&&n==78&&r=="c")return CNe(t)||Dq(t,1,r)||th(t,1);if(r==(Sl?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function n3(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:o,openEnd:a}=e;for(;o>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,a--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||Rp.fromSchema(t.state.schema),i=jee(),l=i.createElement("div");l.appendChild(s.serializeFragment(r,{document:i}));let c=l.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=Lee[c.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let y=i.createElement(d[h]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${a}${u?` -${u}`:""} ${JSON.stringify(n)}`);let m=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:m,slice:e}}function Mee(t,e,n,r,o){let a=o.parent.type.spec.code,s,i;if(!n&&!e)return null;let l=!!e&&(r||a||!n);if(l){if(t.someProp("transformPastedText",m=>{e=m(e,a||r,t)}),a)return i=new at(Le.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",m=>{i=m(i,t,!0)}),i;let u=t.someProp("clipboardTextParser",m=>m(e,o,r,t));if(u)i=u;else{let m=o.marks(),{schema:h}=t.state,y=Rp.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let x=s.appendChild(document.createElement("p"));v&&x.appendChild(y.serializeNode(h.text(v,m)))})}}else t.someProp("transformPastedHTML",u=>{n=u(n,t)}),s=ONe(n),wv&&MNe(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let m=s.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;s=m}if(i||(i=(t.someProp("clipboardParser")||t.someProp("domParser")||Pl.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||d),context:o,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!kNe.test(m.parentNode.nodeName)?{ignore:!0}:null}})),d)i=RNe(jq(i,+d[1],+d[2]),d[4]);else if(i=at.maxOpen(INe(i.content,o),!0),i.openStart||i.openEnd){let u=0,m=0;for(let h=i.content.firstChild;u<i.openStart&&!h.type.spec.isolating;u++,h=h.firstChild);for(let h=i.content.lastChild;m<i.openEnd&&!h.type.spec.isolating;m++,h=h.lastChild);i=jq(i,u,m)}return t.someProp("transformPasted",u=>{i=u(i,t,l)}),i}const kNe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function INe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),a,s=[];if(t.forEach(i=>{if(!s)return;let l=o.findWrapping(i.type),c;if(!l)return s=null;if(c=s.length&&a.length&&Dee(l,a,i,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Nee(s[s.length-1],a.length));let d=Ree(i,l);s.push(d),o=o.matchType(d.type),a=l}}),s)return Le.from(s)}return t}function Ree(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Le.from(t));return t}function Dee(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let a=Dee(t,e,n,r.lastChild,o+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(Le.from(Ree(n,t,o+1))))}}function Nee(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Nee(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Le.empty,!0);return t.copy(n.append(r))}function YM(t,e,n,r,o,a){let s=e<0?t.firstChild:t.lastChild,i=s.content;return t.childCount>1&&(a=0),o<r-1&&(i=YM(i,e,n,r,o+1,a)),o>=n&&(i=e<0?s.contentMatchAt(0).fillBefore(i,a<=o).append(i):i.append(s.contentMatchAt(s.childCount).fillBefore(Le.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(i))}function jq(t,e,n){return e<t.openStart&&(t=new at(YM(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new at(YM(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Lee={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Bq=null;function jee(){return Bq||(Bq=document.implementation.createHTMLDocument("title"))}let xP=null;function PNe(t){let e=window.trustedTypes;return e?(xP||(xP=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),xP.createHTML(t)):t}function ONe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=jee().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&Lee[r[1].toLowerCase()])&&(t=o.map(a=>"<"+a+">").join("")+t+o.map(a=>"</"+a+">").reverse().join("")),n.innerHTML=PNe(t),o)for(let a=0;a<o.length;a++)n=n.querySelector(o[a])||n;return n}function MNe(t){let e=t.querySelectorAll(Qa?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function RNe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:a,openEnd:s}=t;for(let i=r.length-2;i>=0;i-=2){let l=n.nodes[r[i]];if(!l||l.hasRequiredAttrs())break;o=Le.from(l.create(r[i+1],o)),a++,s++}return new at(o,a,s)}const Ps={},Os={},DNe={touchstart:!0,touchmove:!0};class NNe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LNe(t){for(let e in Ps){let n=Ps[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{BNe(t,r)&&!r3(t,r)&&(t.editable||!(r.type in Os))&&n(t,r)},DNe[e]?{passive:!0}:void 0)}Is&&t.dom.addEventListener("input",()=>null),XM(t)}function rp(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function jNe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function XM(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>r3(t,r))})}function r3(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function BNe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function FNe(t,e){!r3(t,e)&&Ps[e.type]&&(t.editable||!(e.type in Os))&&Ps[e.type](t,e)}Os.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Fee(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ju&&Qa&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Zh&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,df(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||_Ne(t,n)?n.preventDefault():rp(t,"key")};Os.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Os.keypress=(t,e)=>{let n=e;if(Fee(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Sl&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ft)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),a=()=>t.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o,a))&&t.dispatch(a()),n.preventDefault()}};function Yw(t){return{left:t.clientX,top:t.clientY}}function zNe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function o3(t,e,n,r,o){if(r==-1)return!1;let a=t.state.doc.resolve(r);for(let s=a.depth+1;s>0;s--)if(t.someProp(e,i=>s>a.depth?i(t,n,a.nodeAfter,a.before(s),o,!0):i(t,n,a.node(s),a.before(s),o,!1)))return!0;return!1}function Bh(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function UNe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Tt.isSelectable(r)?(Bh(t,new Tt(n)),!0):!1}function qNe(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof Tt&&(r=n.node);let a=t.state.doc.resolve(e);for(let s=a.depth+1;s>0;s--){let i=s>a.depth?a.nodeAfter:a.node(s);if(Tt.isSelectable(i)){r&&n.$from.depth>0&&s>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?o=a.before(n.$from.depth):o=a.before(s);break}}return o!=null?(Bh(t,Tt.create(t.state.doc,o)),!0):!1}function HNe(t,e,n,r,o){return o3(t,"handleClickOn",e,n,r)||t.someProp("handleClick",a=>a(t,e,r))||(o?qNe(t,n):UNe(t,n))}function $Ne(t,e,n,r){return o3(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function VNe(t,e,n,r){return o3(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||GNe(t,n,r)}function GNe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Bh(t,ft.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let a=o.depth+1;a>0;a--){let s=a>o.depth?o.nodeAfter:o.node(a),i=o.before(a);if(s.inlineContent)Bh(t,ft.create(r,i+1,i+1+s.content.size));else if(Tt.isSelectable(s))Bh(t,Tt.create(r,i));else continue;return!0}}function a3(t){return WE(t)}const Bee=Sl?"metaKey":"ctrlKey";Ps.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=a3(t),o=Date.now(),a="singleClick";o-t.input.lastClick.time<500&&zNe(n,t.input.lastClick)&&!n[Bee]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?a="doubleClick":t.input.lastClick.type=="doubleClick"&&(a="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:a,button:n.button};let s=t.posAtCoords(Yw(n));s&&(a=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new KNe(t,s,n,!!r)):(a=="doubleClick"?$Ne:VNe)(t,s.pos,s.inside,n)?n.preventDefault():rp(t,"pointer"))};class KNe{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Bee],this.allowDefault=r.shiftKey;let a,s;if(n.inside>-1)a=e.state.doc.nodeAt(n.inside),s=n.inside;else{let d=e.state.doc.resolve(n.pos);a=d.parent,s=d.depth?d.before():0}const i=o?null:r.target,l=i?e.docView.nearestDesc(i,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||c instanceof Tt&&c.from<=s&&c.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ol&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),rp(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qu(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Yw(e))),this.updateAllowDefault(e),this.allowDefault||!n?rp(this.view,"pointer"):HNe(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Is&&this.mightDrag&&!this.mightDrag.node.isAtom||Qa&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Bh(this.view,Mt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):rp(this.view,"pointer")}move(e){this.updateAllowDefault(e),rp(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ps.touchstart=t=>{t.input.lastTouch=Date.now(),a3(t),rp(t,"pointer")};Ps.touchmove=t=>{t.input.lastTouch=Date.now(),rp(t,"pointer")};Ps.contextmenu=t=>a3(t);function Fee(t,e){return t.composing?!0:Is&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const WNe=ju?5e3:-1;Os.compositionstart=Os.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ft&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),WE(t,!0),t.markCursor=null;else if(WE(t,!e.selection.empty),Ol&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,a=r.focusOffset;o&&o.nodeType==1&&a!=0;){let s=a<0?o.lastChild:o.childNodes[a-1];if(!s)break;if(s.nodeType==3){let i=t.domSelection();i&&i.collapse(s,s.nodeValue.length);break}else o=s,a=-1}}t.input.composing=!0}zee(t,WNe)};Os.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,zee(t,20))};function zee(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>WE(t),e))}function Uee(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=XNe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function YNe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=UDe(e.focusNode,e.focusOffset),r=qDe(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,a=t.domObserver.lastChangedTextNode;if(n==a||r==a)return a;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function XNe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function WE(t,e=!1){if(!(ju&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Uee(t),e||t.docView&&t.docView.dirty){let n=e3(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function JNe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const x0=li&&sp<15||Zh&&KDe<604;Ps.copy=Os.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let a=x0?null:n.clipboardData,s=r.content(),{dom:i,text:l}=n3(t,s);a?(n.preventDefault(),a.clearData(),a.setData("text/html",i.innerHTML),a.setData("text/plain",l)):JNe(t,i),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QNe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function ZNe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?S0(t,r.value,null,o,e):S0(t,r.textContent,r.innerHTML,o,e)},50)}function S0(t,e,n,r,o){let a=Mee(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,a||at.empty)))return!0;if(!a)return!1;let s=QNe(a),i=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(a);return t.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function qee(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Os.paste=(t,e)=>{let n=e;if(t.composing&&!ju)return;let r=x0?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&S0(t,qee(r),r.getData("text/html"),o,n)?n.preventDefault():ZNe(t,n)};let Hee=class{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}};const e3e=Sl?"altKey":"ctrlKey";function $ee(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[e3e]}Ps.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,a=o.empty?null:t.posAtCoords(Yw(n)),s;if(!(a&&a.pos>=o.from&&a.pos<=(o instanceof Tt?o.to-1:o.to))){if(r&&r.mightDrag)s=Tt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(s=Tt.create(t.state.doc,u.posBefore))}}let i=(s||t.state.selection).content(),{dom:l,text:c,slice:d}=n3(t,i);(!n.dataTransfer.files.length||!Qa||gee>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(x0?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",x0||n.dataTransfer.setData("text/plain",c),t.dragging=new Hee(d,$ee(t,n),s)};Ps.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Os.dragover=Os.dragenter=(t,e)=>e.preventDefault();Os.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Yw(n));if(!o)return;let a=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",y=>{s=y(s,t,!1)}):s=Mee(t,qee(n.dataTransfer),x0?null:n.dataTransfer.getData("text/html"),!1,a);let i=!!(r&&$ee(t,n));if(t.someProp("handleDrop",y=>y(t,n,s||at.empty,i))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?lee(t.state.doc,a.pos,s):a.pos;l==null&&(l=a.pos);let c=t.state.tr;if(i){let{node:y}=r;y?y.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,m=c.doc;if(u?c.replaceRangeWith(d,d,s.content.firstChild):c.replaceRange(d,d,s),c.doc.eq(m))return;let h=c.doc.resolve(d);if(u&&Tt.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Tt(h));else{let y=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((v,x,S,T)=>y=T),c.setSelection(t3(t,h,c.doc.resolve(y)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Ps.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&qu(t)},20))};Ps.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ps.beforeinput=(t,e)=>{if(Qa&&ju&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",a=>a(t,df(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Os)Ps[t]=Os[t];function E0(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class YE{constructor(e,n){this.toDOM=e,this.spec=n||_f,this.side=this.spec.side||0}map(e,n,r,o){let{pos:a,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new ws(a-r,a-r,this)}valid(){return!0}eq(e){return this==e||e instanceof YE&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&E0(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class lp{constructor(e,n){this.attrs=e,this.spec=n||_f}map(e,n,r,o){let a=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return a>=s?null:new ws(a,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof lp&&E0(this.attrs,e.attrs)&&E0(this.spec,e.spec)}static is(e){return e.type instanceof lp}destroy(){}}class s3{constructor(e,n){this.attrs=e,this.spec=n||_f}map(e,n,r,o){let a=e.mapResult(n.from+o,1);if(a.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=a.pos?null:new ws(a.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),a;return o==n.from&&!(a=e.child(r)).isText&&o+a.nodeSize==n.to}eq(e){return this==e||e instanceof s3&&E0(this.attrs,e.attrs)&&E0(this.spec,e.spec)}destroy(){}}class ws{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ws(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ws(e,e,new YE(n,r))}static inline(e,n,r,o){return new ws(e,n,new lp(r,o))}static node(e,n,r,o){return new ws(e,n,new s3(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof lp}get widget(){return this.type instanceof YE}}const gh=[],_f={};class Gr{constructor(e,n){this.local=e.length?e:gh,this.children=n.length?n:gh}static create(e,n){return n.length?XE(n,e,0,_f):Ga}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,a){for(let s=0;s<this.local.length;s++){let i=this.local[s];i.from<=n&&i.to>=e&&(!a||a(i.spec))&&r.push(i.copy(i.from+o,i.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let i=this.children[s]+1;this.children[s+2].findInner(e-i,n-i,r,o+i,a)}}map(e,n,r){return this==Ga||e.maps.length==0?this:this.mapInner(e,n,0,0,r||_f)}mapInner(e,n,r,o,a){let s;for(let i=0;i<this.local.length;i++){let l=this.local[i].map(e,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):a.onRemove&&a.onRemove(this.local[i].spec)}return this.children.length?t3e(this.children,s||[],e,n,r,o,a):s?new Gr(s.sort(kf),gh):Ga}add(e,n){return n.length?this==Ga?Gr.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,a=0;e.forEach((i,l)=>{let c=l+r,d;if(d=Gee(n,i,c)){for(o||(o=this.children.slice());a<o.length&&o[a]<l;)a+=3;o[a]==l?o[a+2]=o[a+2].addInner(i,d,c+1):o.splice(a,0,l,l+i.nodeSize,XE(d,i,c+1,_f)),a+=3}});let s=Vee(a?Kee(n):n,-r);for(let i=0;i<s.length;i++)s[i].type.valid(e,s[i])||s.splice(i--,1);return new Gr(s.length?this.local.concat(s).sort(kf):this.local,o||this.children)}remove(e){return e.length==0||this==Ga?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let a=0;a<r.length;a+=3){let s,i=r[a]+n,l=r[a+1]+n;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>i&&u.to<l&&(e[d]=null,(s||(s=[])).push(u));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[a+2].removeInner(s,i+1);c!=Ga?r[a+2]=c:(r.splice(a,3),a-=3)}if(o.length){for(let a=0,s;a<e.length;a++)if(s=e[a])for(let i=0;i<o.length;i++)o[i].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(i--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Gr(o,r):Ga}forChild(e,n){if(this==Ga)return this;if(n.isLeaf)return Gr.empty;let r,o;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(r=this.children[i+2]);break}let a=e+1,s=a+n.content.size;for(let i=0;i<this.local.length;i++){let l=this.local[i];if(l.from<s&&l.to>a&&l.type instanceof lp){let c=Math.max(a,l.from)-a,d=Math.min(s,l.to)-a;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){let i=new Gr(o.sort(kf),gh);return r?new Xd([i,r]):i}return r||Ga}eq(e){if(this==e)return!0;if(!(e instanceof Gr)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return i3(this.localsInner(e))}localsInner(e){if(this==Ga)return gh;if(e.inlineContent||!this.local.some(lp.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof lp||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Gr.empty=new Gr([],[]);Gr.removeOverlap=i3;const Ga=Gr.empty;class Xd{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,_f));return Xd.from(r)}forChild(e,n){if(n.isLeaf)return Gr.empty;let r=[];for(let o=0;o<this.members.length;o++){let a=this.members[o].forChild(e,n);a!=Ga&&(a instanceof Xd?r=r.concat(a.members):r.push(a))}return Xd.from(r)}eq(e){if(!(e instanceof Xd)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let a=this.members[o].localsInner(e);if(a.length)if(!n)n=a;else{r&&(n=n.slice(),r=!1);for(let s=0;s<a.length;s++)n.push(a[s])}}return n?i3(r?n:n.sort(kf)):gh}static from(e){switch(e.length){case 0:return Ga;case 1:return e[0];default:return new Xd(e.every(n=>n instanceof Gr)?e:e.reduce((n,r)=>n.concat(r instanceof Gr?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function t3e(t,e,n,r,o,a,s){let i=t.slice();for(let c=0,d=a;c<n.maps.length;c++){let u=0;n.maps[c].forEach((m,h,y,v)=>{let x=v-y-(h-m);for(let S=0;S<i.length;S+=3){let T=i[S+1];if(T<0||m>T+d-u)continue;let C=i[S]+d-u;h>=C?i[S+1]=m<=C?-2:-1:m>=d&&x&&(i[S]+=x,i[S+1]+=x)}u+=x}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<i.length;c+=3)if(i[c+1]<0){if(i[c+1]==-2){l=!0,i[c+1]=-1;continue}let d=n.map(t[c]+a),u=d-o;if(u<0||u>=r.content.size){l=!0;continue}let m=n.map(t[c+1]+a,-1),h=m-o,{index:y,offset:v}=r.content.findIndex(u),x=r.maybeChild(y);if(x&&v==u&&v+x.nodeSize==h){let S=i[c+2].mapInner(n,x,d+1,t[c]+a+1,s);S!=Ga?(i[c]=u,i[c+1]=h,i[c+2]=S):(i[c+1]=-2,l=!0)}else l=!0}if(l){let c=n3e(i,t,e,n,o,a,s),d=XE(c,r,0,s);e=d.local;for(let u=0;u<i.length;u+=3)i[u+1]<0&&(i.splice(u,3),u-=3);for(let u=0,m=0;u<d.children.length;u+=3){let h=d.children[u];for(;m<i.length&&i[m]<h;)m+=3;i.splice(m,0,d.children[u],d.children[u+1],d.children[u+2])}}return new Gr(e.sort(kf),i)}function Vee(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new ws(o.from+e,o.to+e,o.type))}return n}function n3e(t,e,n,r,o,a,s){function i(l,c){for(let d=0;d<l.local.length;d++){let u=l.local[d].map(r,o,c);u?n.push(u):s.onRemove&&s.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)i(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&i(t[l+2],e[l]+a+1);return n}function Gee(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let a=0,s;a<t.length;a++)(s=t[a])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[a]=null);return o}function Kee(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function XE(t,e,n,r){let o=[],a=!1;e.forEach((i,l)=>{let c=Gee(t,i,l+n);if(c){a=!0;let d=XE(c,i,n+l+1,r);d!=Ga&&o.push(l,l+i.nodeSize,d)}});let s=Vee(a?Kee(t):t,-n).sort(kf);for(let i=0;i<s.length;i++)s[i].type.valid(e,s[i])||(r.onRemove&&r.onRemove(s[i].spec),s.splice(i--,1));return s.length||o.length?new Gr(s,o):Ga}function kf(t,e){return t.from-e.from||t.to-e.to}function i3(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let a=e[o];if(a.from==r.from){a.to!=r.to&&(e==t&&(e=t.slice()),e[o]=a.copy(a.from,r.to),Fq(e,o+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,a.from),Fq(e,o,r.copy(a.from,r.to)));break}}}return e}function Fq(t,e,n){for(;e<t.length&&kf(n,t[e])>0;)e++;t.splice(e,0,n)}function SP(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ga&&e.push(r)}),t.cursorWrapper&&e.push(Gr.create(t.state.doc,[t.cursorWrapper.deco])),Xd.from(e)}const r3e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},o3e=li&&sp<=11;class a3e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class s3e{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new a3e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);li&&sp<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),o3e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,r3e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Oq(this.view)){if(this.suppressingSelectionUpdates)return qu(this.view);if(li&&sp<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Uf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let a=e.focusNode;a;a=Qh(a))n.add(a);for(let a=e.anchorNode;a;a=Qh(a))if(n.has(a)){r=a;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Oq(e)&&!this.ignoreSelectionChange(r),a=-1,s=-1,i=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let u=this.registerMutation(n[d],l);u&&(a=a<0?u.from:Math.min(u.from,a),s=s<0?u.to:Math.max(u.to,s),u.typeOver&&(i=!0))}if(Ol&&l.length){let d=l.filter(u=>u.nodeName=="BR");if(d.length==2){let[u,m]=d;u.parentNode&&u.parentNode.parentNode==m.parentNode?m.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let m of d){let h=m.parentNode;h&&h.nodeName=="LI"&&(!u||c3e(e,u)!=h)&&m.remove()}}}let c=null;a<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Kw(r)&&(c=e3(e))&&c.eq(Mt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,qu(e),this.currentSelection.set(r),e.scrollToSelection()):(a>-1||o)&&(a>-1&&(e.docView.markDirty(a,s),i3e(e)),this.handleDOMChange(a,s,i,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||qu(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let u=e.addedNodes[d];n.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,a=e.nextSibling;if(li&&sp<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:m}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(a=m)}let s=o&&o.parentNode==e.target?_a(o)+1:0,i=r.localPosFromDOM(e.target,s,-1),l=a&&a.parentNode==e.target?_a(a):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:i,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let zq=new WeakMap,Uq=!1;function i3e(t){if(!zq.has(t)&&(zq.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ol,Uq)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Uq=!0}}function qq(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,a=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Uf(s.node,s.offset,o,a)&&([n,r,o,a]=[o,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:a}}function l3e(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return qq(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?qq(t,n):null}function c3e(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function u3e(t,e,n){let{node:r,fromOffset:o,toOffset:a,from:s,to:i}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],Kw(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Qa&&t.input.lastKeyCode===8)for(let x=a;x>o;x--){let S=r.childNodes[x-1],T=S.pmViewDesc;if(S.nodeName=="BR"&&!T){a=x;break}if(!T||T.size)break}let u=t.state.doc,m=t.someProp("domParser")||Pl.fromSchema(t.state.schema),h=u.resolve(s),y=null,v=m.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:a,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:d3e,context:h});if(c&&c[0].pos!=null){let x=c[0].pos,S=c[1]&&c[1].pos;S==null&&(S=x),y={anchor:x+s,head:S+s}}return{doc:v,sel:y,from:s,to:i}}function d3e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Is&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Is&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const p3e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function f3e(t,e,n,r,o){let a=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let M=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,D=e3(t,M);if(D&&!t.state.selection.eq(D)){if(Qa&&ju&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",B=>B(t,df(13,"Enter"))))return;let F=t.state.tr.setSelection(D);M=="pointer"?F.setMeta("pointer",!0):M=="key"&&F.scrollIntoView(),a&&F.setMeta("composition",a),t.dispatch(F)}return}let s=t.state.doc.resolve(e),i=s.sharedDepth(n);e=s.before(i+1),n=t.state.doc.resolve(n).after(i+1);let l=t.state.selection,c=u3e(t,e,n),d=t.state.doc,u=d.slice(c.from,c.to),m,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(m=t.state.selection.to,h="end"):(m=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let y=g3e(u.content,c.doc.content,c.from,m,h);if(y&&t.input.domChangeCount++,(Zh&&t.input.lastIOSEnter>Date.now()-225||ju)&&o.some(M=>M.nodeType==1&&!p3e.test(M.nodeName))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",M=>M(t,df(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof ft&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let M=Hq(t,t.state.doc,c.sel);if(M&&!M.eq(t.state.selection)){let D=t.state.tr.setSelection(M);a&&D.setMeta("composition",a),t.dispatch(D)}}return}t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof ft&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),li&&sp<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)==" "&&(y.start--,y.endA--,y.endB--);let v=c.doc.resolveNoCache(y.start-c.from),x=c.doc.resolveNoCache(y.endB-c.from),S=d.resolve(y.start),T=v.sameParent(x)&&v.parent.inlineContent&&S.end()>=y.endA;if((Zh&&t.input.lastIOSEnter>Date.now()-225&&(!T||o.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!T&&v.pos<c.doc.content.size&&(!v.sameParent(x)||!v.parent.inlineContent)&&v.pos<x.pos&&!/\S/.test(c.doc.textBetween(v.pos,x.pos,"","")))&&t.someProp("handleKeyDown",M=>M(t,df(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>y.start&&h3e(d,y.start,y.endA,v,x)&&t.someProp("handleKeyDown",M=>M(t,df(8,"Backspace")))){ju&&Qa&&t.domObserver.suppressSelectionUpdates();return}Qa&&y.endB==y.start&&(t.input.lastChromeDelete=Date.now()),ju&&!T&&v.start()!=x.start()&&x.parentOffset==0&&v.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,x=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(M){return M(t,df(13,"Enter"))})},20));let C=y.start,_=y.endA,I=M=>{let D=M||t.state.tr.replace(C,_,c.doc.slice(y.start-c.from,y.endB-c.from));if(c.sel){let F=Hq(t,D.doc,c.sel);F&&!(Qa&&t.composing&&F.empty&&(y.start!=y.endB||t.input.lastChromeDelete<Date.now()-100)&&(F.head==C||F.head==D.mapping.map(_)-1)||li&&F.empty&&F.head==C)&&D.setSelection(F)}return a&&D.setMeta("composition",a),D.scrollIntoView()},P;if(T)if(v.pos==x.pos){li&&sp<=11&&v.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qu(t),20));let M=I(t.state.tr.delete(C,_)),D=d.resolve(y.start).marksAcross(d.resolve(y.endA));D&&M.ensureMarks(D),t.dispatch(M)}else if(y.endA==y.endB&&(P=m3e(v.parent.content.cut(v.parentOffset,x.parentOffset),S.parent.content.cut(S.parentOffset,y.endA-S.start())))){let M=I(t.state.tr);P.type=="add"?M.addMark(C,_,P.mark):M.removeMark(C,_,P.mark),t.dispatch(M)}else if(v.parent.child(v.index()).isText&&v.index()==x.index()-(x.textOffset?0:1)){let M=v.parent.textBetween(v.parentOffset,x.parentOffset),D=()=>I(t.state.tr.insertText(M,C,_));t.someProp("handleTextInput",F=>F(t,C,_,M,D))||t.dispatch(D())}else t.dispatch(I());else t.dispatch(I())}function Hq(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:t3(t,e.resolve(n.anchor),e.resolve(n.head))}function m3e(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,a=r,s,i,l;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<n.length;d++)a=n[d].removeFromSet(a);if(o.length==1&&a.length==0)i=o[0],s="add",l=d=>d.mark(i.addToSet(d.marks));else if(o.length==0&&a.length==1)i=a[0],s="remove",l=d=>d.mark(i.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(Le.from(c).eq(t))return{mark:i,type:s}}function h3e(t,e,n,r,o){if(n-e<=o.pos-r.pos||EP(r,!0,!1)<o.pos)return!1;let a=t.resolve(e);if(!r.parent.isTextblock){let i=a.nodeAfter;return i!=null&&n==e+i.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=t.resolve(EP(a,!0,!0));return!s.parent.isTextblock||s.pos>n||EP(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function EP(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let a=t.node(r).maybeChild(t.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,o++}return o}function g3e(t,e,n,r,o){let a=t.findDiffStart(e,n);if(a==null)return null;let{a:s,b:i}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,a-Math.min(s,i));r-=s+l-a}if(s<a&&t.size<e.size){let l=r<=a&&r>=s?a-r:0;a-=l,a&&a<e.size&&$q(e.textBetween(a-1,a+1))&&(a+=l?1:-1),i=a+(i-s),s=a}else if(i<a){let l=r<=a&&r>=i?a-r:0;a-=l,a&&a<t.size&&$q(t.textBetween(a-1,a+1))&&(a+=l?1:-1),s=a+(s-i),i=a}return{start:a,endA:s,endB:i}}function $q(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Wee{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new NNe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Yq),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Kq(this),Gq(this),this.nodeViews=Wq(this),this.docView=Cq(this.state.doc,Vq(this),SP(this),this.dom,this),this.domObserver=new s3e(this,(r,o,a,s)=>f3e(this,r,o,a,s)),this.domObserver.start(),LNe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&XM(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Yq),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,a=!1,s=!1;e.storedMarks&&this.composing&&(Uee(this),s=!0),this.state=e;let i=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(i||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Wq(this);y3e(h,this.nodeViews)&&(this.nodeViews=h,a=!0)}(i||n.handleDOMEvents!=this._props.handleDOMEvents)&&XM(this),this.editable=Kq(this),Gq(this);let l=SP(this),c=Vq(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=a||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(o.selection))&&(s=!0);let m=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&XDe(this);if(s){this.domObserver.stop();let h=u&&(li||Qa)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&b3e(o.selection,e.selection);if(u){let y=Qa?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=YNe(this)),(a||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Cq(e.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xNe(this))?qu(this,h):(Iee(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():m&&JDe(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Tt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&vq(this,n.getBoundingClientRect(),e)}else vq(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let a=r.from+(this.state.doc.content.size-n.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(o=a)}this.dragging=new Hee(e.slice,e.move,o<0?void 0:Tt.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let i=this.directPlugins[s].props[e];if(i!=null&&(o=n?n(i):i))return o}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let i=a[s].props[e];if(i!=null&&(o=n?n(i):i))return o}}hasFocus(){if(li){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&QDe(this.dom),qu(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rNe(this,e)}coordsAtPos(e,n=1){return See(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return lNe(this,n||this.state,e)}pasteHTML(e,n){return S0(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return S0(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return n3(this,e)}destroy(){this.docView&&(jNe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],SP(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,FDe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return FNe(this,e)}domSelectionRange(){let e=this.domSelection();return e?Is&&this.root.nodeType===11&&$De(this.dom.ownerDocument)==this.dom&&l3e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Wee.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Vq(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ws.node(0,t.state.doc.content.size,e)]}function Gq(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ws.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Kq(t){return!t.someProp("editable",e=>e(t.state)===!1)}function b3e(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Wq(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function y3e(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function Yq(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var mp={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},JE={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},v3e=typeof navigator<"u"&&/Mac/.test(navigator.platform),x3e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ka=0;ka<10;ka++)mp[48+ka]=mp[96+ka]=String(ka);for(var ka=1;ka<=24;ka++)mp[ka+111]="F"+ka;for(var ka=65;ka<=90;ka++)mp[ka]=String.fromCharCode(ka+32),JE[ka]=String.fromCharCode(ka);for(var TP in mp)JE.hasOwnProperty(TP)||(JE[TP]=mp[TP]);function S3e(t){var e=v3e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||x3e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?JE:mp)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const E3e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),T3e=typeof navigator<"u"&&/Win/.test(navigator.platform);function w3e(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,a,s;for(let i=0;i<e.length-1;i++){let l=e[i];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))E3e?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function C3e(t){let e=Object.create(null);for(let n in t)e[w3e(n)]=t[n];return e}function wP(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function A3e(t){return new xn({props:{handleKeyDown:Yee(t)}})}function Yee(t){let e=C3e(t);return function(n,r){let o=S3e(r),a,s=e[wP(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let i=e[wP(o,r,!1)];if(i&&i(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(T3e&&r.ctrlKey&&r.altKey)&&(a=mp[r.keyCode])&&a!=o){let i=e[wP(a,r)];if(i&&i(n.state,n.dispatch,n))return!0}}return!1}}const Av=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Xee(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Xw=(t,e,n)=>{let r=Xee(t,n);if(!r)return!1;let o=u3(r);if(!o){let s=r.blockRange(),i=s&&Dp(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)}let a=o.nodeBefore;if(Zee(t,o,e,-1))return!0;if(r.parent.content.size==0&&(eg(a,"end")||Tt.isSelectable(a)))for(let s=r.depth;;s--){let i=$w(t.doc,r.before(s),r.after(s),at.empty);if(i&&i.slice.size<i.to-i.from){if(e){let l=t.tr.step(i);l.setSelection(eg(a,"end")?Mt.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):Tt.create(l.doc,o.pos-a.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return a.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),!0):!1},l3=(t,e,n)=>{let r=Xee(t,n);if(!r)return!1;let o=u3(r);return o?Jee(t,o,e):!1},c3=(t,e,n)=>{let r=Qee(t,n);if(!r)return!1;let o=d3(r);return o?Jee(t,o,e):!1};function Jee(t,e,n){let r=e.nodeBefore,o=r,a=e.pos-1;for(;!o.isTextblock;a--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let s=e.nodeAfter,i=s,l=e.pos+1;for(;!i.isTextblock;l++){if(i.type.spec.isolating)return!1;let d=i.firstChild;if(!d)return!1;i=d}let c=$w(t.doc,a,l,at.empty);if(!c||c.from!=a||c instanceof Ho&&c.slice.size>=l-a)return!1;if(n){let d=t.tr.step(c);d.setSelection(ft.create(d.doc,a)),n(d.scrollIntoView())}return!0}function eg(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Jw=(t,e,n)=>{let{$head:r,empty:o}=t.selection,a=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;a=u3(r)}let s=a&&a.nodeBefore;return!s||!Tt.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Tt.create(t.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function u3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Qee(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Qw=(t,e,n)=>{let r=Qee(t,n);if(!r)return!1;let o=d3(r);if(!o)return!1;let a=o.nodeAfter;if(Zee(t,o,e,1))return!0;if(r.parent.content.size==0&&(eg(a,"start")||Tt.isSelectable(a))){let s=$w(t.doc,r.before(),r.after(),at.empty);if(s&&s.slice.size<s.to-s.from){if(e){let i=t.tr.step(s);i.setSelection(eg(a,"start")?Mt.findFrom(i.doc.resolve(i.mapping.map(o.pos)),1):Tt.create(i.doc,i.mapping.map(o.pos))),e(i.scrollIntoView())}return!0}}return a.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+a.nodeSize).scrollIntoView()),!0):!1},Zw=(t,e,n)=>{let{$head:r,empty:o}=t.selection,a=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;a=d3(r)}let s=a&&a.nodeAfter;return!s||!Tt.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Tt.create(t.doc,a.pos)).scrollIntoView()),!0)};function d3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const p3=(t,e)=>{let n=t.selection,r=n instanceof Tt,o;if(r){if(n.node.isTextblock||!Ll(t.doc,n.from))return!1;o=n.from}else if(o=Np(t.doc,n.from,-1),o==null)return!1;if(e){let a=t.tr.join(o);r&&a.setSelection(Tt.create(a.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},f3=(t,e)=>{let n=t.selection,r;if(n instanceof Tt){if(n.node.isTextblock||!Ll(t.doc,n.to))return!1;r=n.to}else if(r=Np(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},m3=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),a=o&&Dp(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)},eC=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function h3(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const g3=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),a=n.indexAfter(-1),s=h3(o.contentMatchAt(a));if(!s||!o.canReplaceWith(a,a,s))return!1;if(e){let i=n.after(),l=t.tr.replaceWith(i,i,s.createAndFill());l.setSelection(Mt.near(l.doc.resolve(i),1)),e(l.scrollIntoView())}return!0},tC=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof As||r.parent.inlineContent||o.parent.inlineContent)return!1;let a=h3(o.parent.contentMatchAt(o.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,i=t.tr.insert(s,a.createAndFill());i.setSelection(ft.create(i.doc,s+1)),e(i.scrollIntoView())}return!0},nC=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let a=n.before();if(Ra(t.doc,a))return e&&e(t.tr.split(a).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Dp(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function _3e(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof Tt&&e.selection.node.isBlock)return!r.parentOffset||!Ra(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],s,i,l=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),i=h3(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),a.unshift(l&&i?{type:i}:null),s=h;break}else{if(h==1)return!1;a.unshift(null)}let d=e.tr;(e.selection instanceof ft||e.selection instanceof As)&&d.deleteSelection();let u=d.mapping.map(r.pos),m=Ra(d.doc,u,a.length,a);if(m||(a[0]=i?{type:i}:null,m=Ra(d.doc,u,a.length,a)),!m)return!1;if(d.split(u,a.length,a),!l&&c&&r.node(s).type!=i){let h=d.mapping.map(r.before(s)),y=d.doc.resolve(h);i&&r.node(s-1).canReplaceWith(y.index(),y.index()+1,i)&&d.setNodeMarkup(d.mapping.map(r.before(s)),i)}return n&&n(d.scrollIntoView()),!0}}const k3e=_3e(),b3=(t,e)=>{let{$from:n,to:r}=t.selection,o,a=n.sharedDepth(r);return a==0?!1:(o=n.before(a),e&&e(t.tr.setSelection(Tt.create(t.doc,o))),!0)};function I3e(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,a=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(a-1,a)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(o.isTextblock||Ll(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Zee(t,e,n,r){let o=e.nodeBefore,a=e.nodeAfter,s,i,l=o.type.spec.isolating||a.type.spec.isolating;if(!l&&I3e(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(i=o.contentMatchAt(o.childCount)).findWrapping(a.type))&&i.matchType(s[0]||a.type).validEnd){if(n){let h=e.pos+a.nodeSize,y=Le.empty;for(let S=s.length-1;S>=0;S--)y=Le.from(s[S].create(null,y));y=Le.from(o.copy(y));let v=t.tr.step(new Vo(e.pos-1,h,e.pos,h,new at(y,1,0),s.length,!0)),x=v.doc.resolve(h+2*s.length);x.nodeAfter&&x.nodeAfter.type==o.type&&Ll(v.doc,x.pos)&&v.join(x.pos),n(v.scrollIntoView())}return!0}let d=a.type.spec.isolating||r>0&&l?null:Mt.findFrom(e,1),u=d&&d.$from.blockRange(d.$to),m=u&&Dp(u);if(m!=null&&m>=e.depth)return n&&n(t.tr.lift(u,m).scrollIntoView()),!0;if(c&&eg(a,"start",!0)&&eg(o,"end")){let h=o,y=[];for(;y.push(h),!h.isTextblock;)h=h.lastChild;let v=a,x=1;for(;!v.isTextblock;v=v.firstChild)x++;if(h.canReplace(h.childCount,h.childCount,v.content)){if(n){let S=Le.empty;for(let C=y.length-1;C>=0;C--)S=Le.from(y[C].copy(S));let T=t.tr.step(new Vo(e.pos-y.length,e.pos+a.nodeSize,e.pos+x,e.pos+a.nodeSize-x,new at(S,y.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function ete(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,a=o.depth;for(;o.node(a).isInline;){if(!a)return!1;a--}return o.node(a).isTextblock?(n&&n(e.tr.setSelection(ft.create(e.doc,t<0?o.start(a):o.end(a)))),!0):!1}}const y3=ete(-1),v3=ete(1);function x3(t,e=null){return function(n,r){let{$from:o,$to:a}=n.selection,s=o.blockRange(a),i=s&&JN(s,t,e);return i?(r&&r(n.tr.wrap(s,i).scrollIntoView()),!0):!1}}function tg(t,e=null){return function(n,r){let o=!1;for(let a=0;a<n.selection.ranges.length&&!o;a++){let{$from:{pos:s},$to:{pos:i}}=n.selection.ranges[a];n.doc.nodesBetween(s,i,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let d=n.doc.resolve(c),u=d.index();o=d.parent.canReplaceWith(u,u+1,t)}})}if(!o)return!1;if(r){let a=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:i},$to:{pos:l}}=n.selection.ranges[s];a.setBlockType(i,l,t,e)}r(a.scrollIntoView())}return!0}}function S3(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}S3(Av,Xw,Jw);S3(Av,Qw,Zw);S3(eC,tC,nC,k3e);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function E3(t,e=null){return function(n,r){let{$from:o,$to:a}=n.selection,s=o.blockRange(a);if(!s)return!1;let i=r?n.tr:null;return P3e(i,s,t,e)?(r&&r(i.scrollIntoView()),!0):!1}}function P3e(t,e,n,r=null){let o=!1,a=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);a=new $E(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new $E(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let i=JN(a,n,r,e);return i?(t&&O3e(t,e,i,o,n),!0):!1}function O3e(t,e,n,r,o){let a=Le.empty;for(let d=n.length-1;d>=0;d--)a=Le.from(n[d].type.create(n[d].attrs,a));t.step(new Vo(e.start-(r?2:0),e.end,e.start,e.end,new at(a,0,0),n.length,!0));let s=0;for(let d=0;d<n.length;d++)n[d].type==o&&(s=d+1);let i=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,m=!0;d<u;d++,m=!1)!m&&Ra(t.doc,l,i)&&(t.split(l,i),l+=2*i),l+=c.child(d).nodeSize;return t}function T3(t){return function(e,n){let{$from:r,$to:o}=e.selection,a=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return a?n?r.node(a.depth-1).type==t?M3e(e,n,t,a):R3e(e,n,a):!0:!1}}function M3e(t,e,n,r){let o=t.tr,a=r.end,s=r.$to.end(r.depth);a<s&&(o.step(new Vo(a-1,s,a,s,new at(Le.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new $E(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const i=Dp(r);if(i==null)return!1;o.lift(r,i);let l=o.doc.resolve(o.mapping.map(a,-1)-1);return Ll(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function R3e(t,e,n){let r=t.tr,o=n.parent;for(let h=n.end,y=n.endIndex-1,v=n.startIndex;y>v;y--)h-=o.child(y).nodeSize,r.delete(h-1,h+1);let a=r.doc.resolve(n.start),s=a.nodeAfter;if(r.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let i=n.startIndex==0,l=n.endIndex==o.childCount,c=a.node(-1),d=a.index(-1);if(!c.canReplace(d+(i?0:1),d+1,s.content.append(l?Le.empty:Le.from(o))))return!1;let u=a.pos,m=u+s.nodeSize;return r.step(new Vo(u-(i?1:0),m+(l?1:0),u+1,m-1,new at((i?Le.empty:Le.from(o.copy(Le.empty))).append(l?Le.empty:Le.from(o.copy(Le.empty))),i?0:1,l?0:1),i?0:1)),e(r.scrollIntoView()),!0}function w3(t){return function(e,n){let{$from:r,$to:o}=e.selection,a=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let i=a.parent,l=i.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==i.type,d=Le.from(c?t.create():null),u=new at(Le.from(t.create(null,Le.from(i.type.create(null,d)))),c?3:1,0),m=a.start,h=a.end;n(e.tr.step(new Vo(m-(c?3:1),h,m,h,u,1,!0)).scrollIntoView())}return!0}}var D3e=Object.defineProperty,tte=(t,e)=>{for(var n in e)D3e(t,n,{get:e[n],enumerable:!0})};function nte(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:a}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,a=n.storedMarks,n}}}var N3e=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:a}=r,s=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([i,l])=>[i,(...d)=>{const u=l(...d)(s);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(a),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:a}=this,{view:s}=o,i=[],l=!!e,c=e||a.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),i.every(m=>m===!0)),u={...Object.fromEntries(Object.entries(r).map(([m,h])=>[m,(...v)=>{const x=this.buildProps(c,n),S=h(...v)(x);return i.push(S),u}])),run:d};return u}createCan(e){const{rawCommands:n,state:r}=this,o=!1,a=e||r.tr,s=this.buildProps(a,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(a,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:a}=this,{view:s}=o,i={tr:e,editor:o,view:s,state:nte({state:a,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(i)]))}};return i}};function L3e(t,e){const n=new Vw(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}var rte=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&rte(r)}return t};function AS(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return rte(n)}function T0(t,e,n){if(t instanceof Hi||t instanceof Le)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Le.fromArray(t.map(i=>e.nodeFromJSON(i)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(a){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),T0("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,i="";const l=new Mg({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,i=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Pl.fromSchema(l).parseSlice(AS(t),n.parseOptions):Pl.fromSchema(l).parse(AS(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${i}`)})}const a=Pl.fromSchema(e);return n.slice?a.parseSlice(AS(t),n.parseOptions).content:a.parse(AS(t),n.parseOptions)}return T0("",e,n)}function j3e(t,e,n={},r={}){return T0(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function B3e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function F3e(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function C3(t){return e=>F3e(e.$from,t)}function An(t,e,n){return t.config[e]===void 0&&t.parent?An(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?An(t.parent,e,n):null}):t.config[e]}function ote(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=An(e,"addExtensions",n);return r?[e,...ote(r())]:e}).flat(10)}function z3e(t){return typeof t=="function"}function no(t,e=void 0,...n){return z3e(t)?e?t.bind(e)(...n):t(...n):t}function U3e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function A3(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function q3e(t){const e=[],{nodeExtensions:n,markExtensions:r}=A3(t),o=[...n,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const i={name:s.name,options:s.options,storage:s.storage,extensions:o},l=An(s,"addGlobalAttributes",i);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([m,h])=>{e.push({type:u,name:m,attribute:{...a,...h}})})})})}),o.forEach(s=>{const i={name:s.name,options:s.options,storage:s.storage},l=An(s,"addAttributes",i);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const m={...a,...u};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,e.push({type:s.name,name:d,attribute:m})})}),e}function H3e(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,a])=>{if(!r[o]){r[o]=a;return}if(o==="class"){const i=a?String(a).split(" "):[],l=r[o]?r[o].split(" "):[],c=i.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const i=a?a.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,m]=d.split(":").map(h=>h.trim());c.set(u,m)}),i.forEach(d=>{const[u,m]=d.split(":").map(h=>h.trim());c.set(u,m)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=a}),r},{})}function Xq(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>H3e(n,r),{})}function $3e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Jq(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((a,s)=>{const i=s.attribute.parseHTML?s.attribute.parseHTML(n):$3e(n.getAttribute(s.name));return i==null?a:{...a,[s.name]:i}},{});return{...r,...o}}}}function Qq(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&U3e(n)?!1:n!=null))}function V3e(t,e){var n;const r=q3e(t),{nodeExtensions:o,markExtensions:a}=A3(t),s=(n=o.find(c=>An(c,"topNode")))==null?void 0:n.name,i=Object.fromEntries(o.map(c=>{const d=r.filter(S=>S.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},m=t.reduce((S,T)=>{const C=An(T,"extendNodeSchema",u);return{...S,...C?C(c):{}}},{}),h=Qq({...m,content:no(An(c,"content",u)),marks:no(An(c,"marks",u)),group:no(An(c,"group",u)),inline:no(An(c,"inline",u)),atom:no(An(c,"atom",u)),selectable:no(An(c,"selectable",u)),draggable:no(An(c,"draggable",u)),code:no(An(c,"code",u)),whitespace:no(An(c,"whitespace",u)),linebreakReplacement:no(An(c,"linebreakReplacement",u)),defining:no(An(c,"defining",u)),isolating:no(An(c,"isolating",u)),attrs:Object.fromEntries(d.map(S=>{var T,C;return[S.name,{default:(T=S==null?void 0:S.attribute)==null?void 0:T.default,validate:(C=S==null?void 0:S.attribute)==null?void 0:C.validate}]}))}),y=no(An(c,"parseHTML",u));y&&(h.parseDOM=y.map(S=>Jq(S,d)));const v=An(c,"renderHTML",u);v&&(h.toDOM=S=>v({node:S,HTMLAttributes:Xq(S,d)}));const x=An(c,"renderText",u);return x&&(h.toText=x),[c.name,h]})),l=Object.fromEntries(a.map(c=>{const d=r.filter(x=>x.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},m=t.reduce((x,S)=>{const T=An(S,"extendMarkSchema",u);return{...x,...T?T(c):{}}},{}),h=Qq({...m,inclusive:no(An(c,"inclusive",u)),excludes:no(An(c,"excludes",u)),group:no(An(c,"group",u)),spanning:no(An(c,"spanning",u)),code:no(An(c,"code",u)),attrs:Object.fromEntries(d.map(x=>{var S,T;return[x.name,{default:(S=x==null?void 0:x.attribute)==null?void 0:S.default,validate:(T=x==null?void 0:x.attribute)==null?void 0:T.validate}]}))}),y=no(An(c,"parseHTML",u));y&&(h.parseDOM=y.map(x=>Jq(x,d)));const v=An(c,"renderHTML",u);return v&&(h.toDOM=x=>v({mark:x,HTMLAttributes:Xq(x,d)})),[c.name,h]}));return new Mg({topNode:s,nodes:i,marks:l})}function G3e(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function K3e(t){return t.sort((n,r)=>{const o=An(n,"priority")||100,a=An(r,"priority")||100;return o>a?-1:o<a?1:0})}function W3e(t){const e=K3e(ote(t)),n=G3e(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function Y3e(t,e){const n=W3e(t);return V3e(n,e)}function X3e(t,e,n){const{from:r,to:o}=e,{blockSeparator:a=`

`,textSerializers:s={}}=n||{};let i="";return t.nodesBetween(r,o,(l,c,d,u)=>{var m;l.isBlock&&c>r&&(i+=a);const h=s==null?void 0:s[l.type.name];if(h)return d&&(i+=h({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(i+=(m=l==null?void 0:l.text)==null?void 0:m.slice(Math.max(r,c)-c,o-c))}),i}function J3e(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function jp(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function Q3e(t,e){const n=jp(e,t.schema),{from:r,to:o,empty:a}=t.selection,s=[];a?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const i=s.find(l=>l.type.name===n.name);return i?{...i.attrs}:{}}function es(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function ate(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Z3e(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function eLe(t){const e=Z3e(t);return e.length===1?e:e.filter((n,r)=>!e.filter((a,s)=>s!==r).some(a=>n.oldRange.from>=a.oldRange.from&&n.oldRange.to<=a.oldRange.to&&n.newRange.from>=a.newRange.from&&n.newRange.to<=a.newRange.to))}function tLe(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,a)=>{const s=[];if(o.ranges.length)o.forEach((i,l)=>{s.push({from:i,to:l})});else{const{from:i,to:l}=n[a];if(i===void 0||l===void 0)return;s.push({from:i,to:l})}s.forEach(({from:i,to:l})=>{const c=e.slice(a).map(i,-1),d=e.slice(a).map(l),u=e.invert().map(c,-1),m=e.invert().map(d);r.push({oldRange:{from:u,to:m},newRange:{from:c,to:d}})})}),eLe(r)}function nLe(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function QE(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:nLe(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function ste(t,e,n={}){return t.find(r=>r.type===e&&QE(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function Zq(t,e,n={}){return!!ste(t,e,n)}function ite(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])==null?void 0:r.attrs),!ste([...o.node.marks],e,n)))return;let s=o.index,i=t.start()+o.offset,l=s+1,c=i+o.node.nodeSize;for(;s>0&&Zq([...t.parent.child(s-1).marks],e,n);)s-=1,i-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&Zq([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:i,to:c}}function _1(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(a=>a.type===e&&a.name===r);return o?o.attribute.keepOnSplit:!1}))}function rLe(t,e,n={}){const{empty:r,ranges:o}=t.selection,a=e?jp(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>a?a.name===u.type.name:!0).find(u=>QE(u.attrs,n,{strict:!1}));let s=0;const i=[];if(o.forEach(({$from:u,$to:m})=>{const h=u.pos,y=m.pos;t.doc.nodesBetween(h,y,(v,x)=>{if(!v.isText&&!v.marks.length)return;const S=Math.max(h,x),T=Math.min(y,x+v.nodeSize),C=T-S;s+=C,i.push(...v.marks.map(_=>({mark:_,from:S,to:T})))})}),s===0)return!1;const l=i.filter(u=>a?a.name===u.mark.type.name:!0).filter(u=>QE(u.mark.attrs,n,{strict:!1})).reduce((u,m)=>u+m.to-m.from,0),c=i.filter(u=>a?u.mark.type!==a&&u.mark.type.excludes(a):!0).reduce((u,m)=>u+m.to-m.from,0);return(l>0?l+c:l)>=s}function _3(t,e,n={}){const{from:r,to:o,empty:a}=t.selection,s=e?es(e,t.schema):null,i=[];t.doc.nodesBetween(r,o,(u,m)=>{if(u.isText)return;const h=Math.max(r,m),y=Math.min(o,m+u.nodeSize);i.push({node:u,from:h,to:y})});const l=o-r,c=i.filter(u=>s?s.name===u.node.type.name:!0).filter(u=>QE(u.node.attrs,n,{strict:!1}));return a?!!c.length:c.reduce((u,m)=>u+m.to-m.from,0)>=l}function e7(t,e){const{nodeExtensions:n}=A3(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},a=no(An(r,"group",o));return typeof a!="string"?!1:a.split(" ").includes("list")}function lte(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(a=>{o!==!1&&(lte(a,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function cte(t){return t instanceof ft}function gf(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function oLe(t,e=null){if(!e)return null;const n=Mt.atStart(t),r=Mt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,a=r.to;return e==="all"?ft.create(t,gf(0,o,a),gf(t.content.size,o,a)):ft.create(t,gf(e,o,a),gf(e,o,a))}function aLe(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof Ho||o instanceof Vo))return;const a=t.mapping.maps[r];let s=0;a.forEach((i,l,c,d)=>{s===0&&(s=d)}),t.setSelection(Mt.near(t.doc.resolve(s),n))}function sLe(t){return Object.prototype.toString.call(t).slice(8,-1)}function _S(t){return sLe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ute(t,e){const n={...t};return _S(t)&&_S(e)&&Object.keys(e).forEach(r=>{_S(e[r])&&_S(t[r])?n[r]=ute(t[r],e[r]):n[r]=e[r]}),n}var iLe=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...no(An(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...no(An(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ute(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new this.constructor({...this.config,...e});return n.parent=this,this.child=n,n.name="name"in e?e.name:n.parent.name,n}},lLe={};tte(lLe,{ClipboardTextSerializer:()=>cLe,Commands:()=>yje,Delete:()=>vje,Drop:()=>xje,Editable:()=>Sje,FocusEvents:()=>Eje,Keymap:()=>Tje,Paste:()=>wje,Tabindex:()=>Cje,focusEventsPluginKey:()=>mte});var ed=class dte extends iLe{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new dte(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},cLe=ed.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new xn({key:new jn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:a}=o,s=Math.min(...a.map(d=>d.$from.pos)),i=Math.max(...a.map(d=>d.$to.pos)),l=J3e(n);return X3e(r,{from:s,to:i},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),pte={};tte(pte,{blur:()=>uLe,clearContent:()=>dLe,clearNodes:()=>pLe,command:()=>fLe,createParagraphNear:()=>mLe,cut:()=>hLe,deleteCurrentNode:()=>gLe,deleteNode:()=>bLe,deleteRange:()=>yLe,deleteSelection:()=>vLe,enter:()=>xLe,exitCode:()=>SLe,extendMarkRange:()=>ELe,first:()=>TLe,focus:()=>CLe,forEach:()=>ALe,insertContent:()=>_Le,insertContentAt:()=>ILe,joinBackward:()=>MLe,joinDown:()=>OLe,joinForward:()=>RLe,joinItemBackward:()=>DLe,joinItemForward:()=>NLe,joinTextblockBackward:()=>LLe,joinTextblockForward:()=>jLe,joinUp:()=>PLe,keyboardShortcut:()=>FLe,lift:()=>zLe,liftEmptyBlock:()=>ULe,liftListItem:()=>qLe,newlineInCode:()=>HLe,resetAttributes:()=>$Le,scrollIntoView:()=>VLe,selectAll:()=>GLe,selectNodeBackward:()=>KLe,selectNodeForward:()=>WLe,selectParentNode:()=>YLe,selectTextblockEnd:()=>XLe,selectTextblockStart:()=>JLe,setContent:()=>QLe,setMark:()=>eje,setMeta:()=>tje,setNode:()=>nje,setNodeSelection:()=>rje,setTextSelection:()=>oje,sinkListItem:()=>aje,splitBlock:()=>sje,splitListItem:()=>ije,toggleList:()=>lje,toggleMark:()=>cje,toggleNode:()=>uje,toggleWrap:()=>dje,undoInputRule:()=>pje,unsetAllMarks:()=>fje,unsetMark:()=>mje,updateAttributes:()=>hje,wrapIn:()=>gje,wrapInList:()=>bje});var uLe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),dLe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),pLe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:a,$to:s})=>{t.doc.nodesBetween(a.pos,s.pos,(i,l)=>{if(i.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),m=c.resolve(d.map(l+i.nodeSize)),h=u.blockRange(m);if(!h)return;const y=Dp(h);if(i.type.isTextblock){const{defaultType:v}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,v)}(y||y===0)&&e.lift(h,y)})}),!0},fLe=t=>e=>t(e),mLe=()=>({state:t,dispatch:e})=>tC(t,e),hLe=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,a=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,a.content),r.setSelection(new ft(r.doc.resolve(Math.max(s-1,0)))),!0},gLe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===r.type){if(e){const i=o.before(a),l=o.after(a);t.delete(i,l).scrollIntoView()}return!0}return!1},bLe=t=>({tr:e,state:n,dispatch:r})=>{const o=es(t,n.schema),a=e.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===o){if(r){const l=a.before(s),c=a.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},yLe=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},vLe=()=>({state:t,dispatch:e})=>Av(t,e),xLe=()=>({commands:t})=>t.keyboardShortcut("Enter"),SLe=()=>({state:t,dispatch:e})=>g3(t,e),ELe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const a=jp(t,r.schema),{doc:s,selection:i}=n,{$from:l,from:c,to:d}=i;if(o){const u=ite(l,a,e);if(u&&u.from<=c&&u.to>=d){const m=ft.create(s,u.from,u.to);n.setSelection(m)}}return!0},TLe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function wLe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function k3(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var CLe=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:a})=>{e={scrollIntoView:!0,...e};const s=()=>{(k3()||wLe())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(a&&t===null&&!cte(n.state.selection))return s(),!0;const i=oLe(o.doc,t)||n.state.selection,l=n.state.selection.eq(i);return a&&(l||o.setSelection(i),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},ALe=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),_Le=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),kLe=t=>!("type"in t),ILe=(t,e,n)=>({tr:r,dispatch:o,editor:a})=>{var s;if(o){n={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let i;const l=x=>{a.emit("contentError",{editor:a,error:x,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{T0(e,a.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{i=T0(e,a.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(x){return l(x),!1}let{from:d,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,h=!0;if((kLe(i)?i:[i]).forEach(x=>{x.check(),m=m?x.isText&&x.marks.length===0:!1,h=h?x.isBlock:!1}),d===u&&h){const{parent:x}=r.doc.resolve(d);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(d-=1,u+=1)}let v;if(m){if(Array.isArray(e))v=e.map(x=>x.text||"").join("");else if(e instanceof Le){let x="";e.forEach(S=>{S.text&&(x+=S.text)}),v=x}else typeof e=="object"&&e&&e.text?v=e.text:v=e;r.insertText(v,d,u)}else{v=i;const x=r.doc.resolve(d),S=x.node(),T=x.parentOffset===0,C=S.isText||S.isTextblock,_=S.content.size>0;T&&C&&_&&(d=Math.max(0,d-1)),r.replaceWith(d,u,v)}n.updateSelection&&aLe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:v})}return!0},PLe=()=>({state:t,dispatch:e})=>p3(t,e),OLe=()=>({state:t,dispatch:e})=>f3(t,e),MLe=()=>({state:t,dispatch:e})=>Xw(t,e),RLe=()=>({state:t,dispatch:e})=>Qw(t,e),DLe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Np(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},NLe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Np(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},LLe=()=>({state:t,dispatch:e})=>l3(t,e),jLe=()=>({state:t,dispatch:e})=>c3(t,e);function fte(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function BLe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,a,s;for(let i=0;i<e.length-1;i+=1){const l=e[i];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))k3()||fte()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}var FLe=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const a=BLe(t).split(/-(?!$)/),s=a.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),i=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,i))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0},zLe=(t,e={})=>({state:n,dispatch:r})=>{const o=es(t,n.schema);return _3(n,o,e)?m3(n,r):!1},ULe=()=>({state:t,dispatch:e})=>nC(t,e),qLe=t=>({state:e,dispatch:n})=>{const r=es(t,e.schema);return T3(r)(e,n)},HLe=()=>({state:t,dispatch:e})=>eC(t,e);function t7(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}var $Le=(t,e)=>({tr:n,state:r,dispatch:o})=>{let a=null,s=null;const i=ate(typeof t=="string"?t:t.name,r.schema);return i?(i==="node"&&(a=es(t,r.schema)),i==="mark"&&(s=jp(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{a&&a===c.type&&n.setNodeMarkup(d,void 0,t7(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(u=>{s===u.type&&n.addMark(d,d+c.nodeSize,s.create(t7(u.attrs,e)))})})}),!0):!1},VLe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),GLe=()=>({tr:t,dispatch:e})=>{if(e){const n=new As(t.doc);t.setSelection(n)}return!0},KLe=()=>({state:t,dispatch:e})=>Jw(t,e),WLe=()=>({state:t,dispatch:e})=>Zw(t,e),YLe=()=>({state:t,dispatch:e})=>b3(t,e),XLe=()=>({state:t,dispatch:e})=>v3(t,e),JLe=()=>({state:t,dispatch:e})=>y3(t,e),QLe=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:o,tr:a,dispatch:s,commands:i})=>{const{doc:l}=a;if(r.preserveWhitespace!=="full"){const c=j3e(t,o.schema,r,{errorOnInvalidContent:e??o.options.enableContentCheck});return s&&a.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return s&&a.setMeta("preventUpdate",!n),i.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??o.options.enableContentCheck})};function ZLe(t,e,n){var r;const{selection:o}=e;let a=null;if(cte(o)&&(a=o.$cursor),a){const i=(r=t.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(n)&&(!!n.isInSet(i)||!i.some(c=>c.type.excludes(n)))}const{ranges:s}=o;return s.some(({$from:i,$to:l})=>{let c=i.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(i.pos,l.pos,(d,u,m)=>{if(c)return!1;if(d.isInline){const h=!m||m.type.allowsMarkType(n),y=!!n.isInSet(d.marks)||!d.marks.some(v=>v.type.excludes(n));c=h&&y}return!c}),c})}var eje=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:a}=n,{empty:s,ranges:i}=a,l=jp(t,r.schema);if(o)if(s){const c=Q3e(r,l);n.addStoredMark(l.create({...c,...e}))}else i.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(m,h)=>{const y=Math.max(h,d),v=Math.min(h+m.nodeSize,u);m.marks.find(S=>S.type===l)?m.marks.forEach(S=>{l===S.type&&n.addMark(y,v,l.create({...S.attrs,...e}))}):n.addMark(y,v,l.create(e))})});return ZLe(r,n,l)},tje=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),nje=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const a=es(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),a.isTextblock?o().command(({commands:i})=>tg(a,{...s,...e})(n)?!0:i.clearNodes()).command(({state:i})=>tg(a,{...s,...e})(i,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},rje=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=gf(t,0,r.content.size),a=Tt.create(r,o);e.setSelection(a)}return!0},oje=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:a}=typeof t=="number"?{from:t,to:t}:t,s=ft.atStart(r).from,i=ft.atEnd(r).to,l=gf(o,s,i),c=gf(a,s,i),d=ft.create(r,l,c);e.setSelection(d)}return!0},aje=t=>({state:e,dispatch:n})=>{const r=es(t,e.schema);return w3(r)(e,n)};function n7(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}var sje=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:a,doc:s}=e,{$from:i,$to:l}=a,c=o.extensionManager.attributes,d=_1(c,i.node().type.name,i.node().attrs);if(a instanceof Tt&&a.node.isBlock)return!i.parentOffset||!Ra(s,i.pos)?!1:(r&&(t&&n7(n,o.extensionManager.splittableMarks),e.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,m=i.depth===0?void 0:B3e(i.node(-1).contentMatchAt(i.indexAfter(-1)));let h=u&&m?[{type:m,attrs:d}]:void 0,y=Ra(e.doc,e.mapping.map(i.pos),1,h);if(!h&&!y&&Ra(e.doc,e.mapping.map(i.pos),1,m?[{type:m}]:void 0)&&(y=!0,h=m?[{type:m,attrs:d}]:void 0),r){if(y&&(a instanceof ft&&e.deleteSelection(),e.split(e.mapping.map(i.pos),1,h),m&&!u&&!i.parentOffset&&i.parent.type!==m)){const v=e.mapping.map(i.before()),x=e.doc.resolve(v);i.node(-1).canReplaceWith(x.index(),x.index()+1,m)&&e.setNodeMarkup(e.mapping.map(i.before()),m)}t&&n7(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return y},ije=(t,e={})=>({tr:n,state:r,dispatch:o,editor:a})=>{var s;const i=es(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==i)return!1;const m=a.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==i||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let S=Le.empty;const T=l.index(-1)?1:l.index(-2)?2:3;for(let D=l.depth-T;D>=l.depth-3;D-=1)S=Le.from(l.node(D).copy(S));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,_={..._1(m,l.node().type.name,l.node().attrs),...e},I=((s=i.contentMatch.defaultType)==null?void 0:s.createAndFill(_))||void 0;S=S.append(Le.from(i.createAndFill(null,I)||void 0));const P=l.before(l.depth-(T-1));n.replace(P,l.after(-C),new at(S,4-T,0));let M=-1;n.doc.nodesBetween(P,n.doc.content.size,(D,F)=>{if(M>-1)return!1;D.isTextblock&&D.content.size===0&&(M=F+1)}),M>-1&&n.setSelection(ft.near(n.doc.resolve(M))),n.scrollIntoView()}return!0}const h=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,y={..._1(m,u.type.name,u.attrs),...e},v={..._1(m,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=h?[{type:i,attrs:y},{type:h,attrs:v}]:[{type:i,attrs:y}];if(!Ra(n.doc,l.pos,2))return!1;if(o){const{selection:S,storedMarks:T}=r,{splittableMarks:C}=a.extensionManager,_=T||S.$to.parentOffset&&S.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!_||!o)return!0;const I=_.filter(P=>C.includes(P.type.name));n.ensureMarks(I)}return!0},CP=(t,e)=>{const n=C3(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Ll(t.doc,n.pos)&&t.join(n.pos),!0},AP=(t,e)=>{const n=C3(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Ll(t.doc,r)&&t.join(r),!0},lje=(t,e,n,r={})=>({editor:o,tr:a,state:s,dispatch:i,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:m}=o.extensionManager,h=es(t,s.schema),y=es(e,s.schema),{selection:v,storedMarks:x}=s,{$from:S,$to:T}=v,C=S.blockRange(T),_=x||v.$to.parentOffset&&v.$from.marks();if(!C)return!1;const I=C3(P=>e7(P.type.name,u))(v);if(C.depth>=1&&I&&C.depth-I.depth<=1){if(I.node.type===h)return c.liftListItem(y);if(e7(I.node.type.name,u)&&h.validContent(I.node.content)&&i)return l().command(()=>(a.setNodeMarkup(I.pos,h),!0)).command(()=>CP(a,h)).command(()=>AP(a,h)).run()}return!n||!_||!i?l().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>CP(a,h)).command(()=>AP(a,h)).run():l().command(()=>{const P=d().wrapInList(h,r),M=_.filter(D=>m.includes(D.type.name));return a.ensureMarks(M),P?!0:c.clearNodes()}).wrapInList(h,r).command(()=>CP(a,h)).command(()=>AP(a,h)).run()},cje=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:a=!1}=n,s=jp(t,r.schema);return rLe(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:a}):o.setMark(s,e)},uje=(t,e,n={})=>({state:r,commands:o})=>{const a=es(t,r.schema),s=es(e,r.schema),i=_3(r,a,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),i?o.setNode(s,l):o.setNode(a,{...l,...n})},dje=(t,e={})=>({state:n,commands:r})=>{const o=es(t,n.schema);return _3(n,o,e)?r.lift(o):r.wrapIn(o,e)},pje=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let a;if(o.spec.isInputRules&&(a=o.getState(t))){if(e){const s=t.tr,i=a.transform;for(let l=i.steps.length-1;l>=0;l-=1)s.step(i.steps[l].invert(i.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},fje=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},mje=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var a;const{extendEmptyMarkRange:s=!1}=e,{selection:i}=n,l=jp(t,r.schema),{$from:c,empty:d,ranges:u}=i;if(!o)return!0;if(d&&s){let{from:m,to:h}=i;const y=(a=c.marks().find(x=>x.type===l))==null?void 0:a.attrs,v=ite(c,l,y);v&&(m=v.from,h=v.to),n.removeMark(m,h,l)}else u.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,l)});return n.removeStoredMark(l),!0},hje=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let a=null,s=null;const i=ate(typeof t=="string"?t:t.name,r.schema);return i?(i==="node"&&(a=es(t,r.schema)),i==="mark"&&(s=jp(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let u,m,h,y;n.selection.empty?r.doc.nodesBetween(c,d,(v,x)=>{a&&a===v.type&&(h=Math.max(x,c),y=Math.min(x+v.nodeSize,d),u=x,m=v)}):r.doc.nodesBetween(c,d,(v,x)=>{x<c&&a&&a===v.type&&(h=Math.max(x,c),y=Math.min(x+v.nodeSize,d),u=x,m=v),x>=c&&x<=d&&(a&&a===v.type&&n.setNodeMarkup(x,void 0,{...v.attrs,...e}),s&&v.marks.length&&v.marks.forEach(S=>{if(s===S.type){const T=Math.max(x,c),C=Math.min(x+v.nodeSize,d);n.addMark(T,C,s.create({...S.attrs,...e}))}}))}),m&&(u!==void 0&&n.setNodeMarkup(u,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(v=>{s===v.type&&n.addMark(h,y,s.create({...v.attrs,...e}))}))}),!0):!1},gje=(t,e={})=>({state:n,dispatch:r})=>{const o=es(t,n.schema);return x3(o,e)(n,r)},bje=(t,e={})=>({state:n,dispatch:r})=>{const o=es(t,n.schema);return E3(o,e)(n,r)},yje=ed.create({name:"commands",addCommands(){return{...pte}}}),vje=ed.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,o;const a=()=>{var s,i,l,c;if((c=(l=(i=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:i.filterTransaction)==null?void 0:l.call(i,t))!=null?c:t.getMeta("y-sync$"))return;const d=L3e(t.before,[t,...e]);tLe(d).forEach(h=>{d.mapping.mapResult(h.oldRange.from).deletedAfter&&d.mapping.mapResult(h.oldRange.to).deletedBefore&&d.before.nodesBetween(h.oldRange.from,h.oldRange.to,(y,v)=>{const x=v+y.nodeSize-2,S=h.oldRange.from<=v&&x<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:v,to:x,newFrom:d.mapping.map(v),newTo:d.mapping.map(x),deletedRange:h.oldRange,newRange:h.newRange,partial:!S,editor:this.editor,transaction:t,combinedTransform:d})})});const m=d.mapping;d.steps.forEach((h,y)=>{var v,x;if(h instanceof ji){const S=m.slice(y).map(h.from,-1),T=m.slice(y).map(h.to),C=m.invert().map(S,-1),_=m.invert().map(T),I=(v=d.doc.nodeAt(S-1))==null?void 0:v.marks.some(M=>M.eq(h.mark)),P=(x=d.doc.nodeAt(T))==null?void 0:x.marks.some(M=>M.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:C,to:_},newRange:{from:S,to:T},partial:!!(P||I),editor:this.editor,transaction:t,combinedTransform:d})}})};(o=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||o?setTimeout(a,0):a()}}),xje=ed.create({name:"drop",addProseMirrorPlugins(){return[new xn({key:new jn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Sje=ed.create({name:"editable",addProseMirrorPlugins(){return[new xn({key:new jn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),mte=new jn("focusEvents"),Eje=ed.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new xn({key:mte,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Tje=ed.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:i})=>{const{selection:l,doc:c}=i,{empty:d,$anchor:u}=l,{pos:m,parent:h}=u,y=u.parent.isTextblock&&m>0?i.doc.resolve(m-1):u,v=y.parent.type.spec.isolating,x=u.pos-u.parentOffset,S=v&&y.parent.childCount===1?x===u.pos:Mt.atStart(c).from===m;return!d||!h.type.isTextblock||h.textContent.length||!S||S&&u.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},a={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return k3()||fte()?a:o},addProseMirrorPlugins(){return[new xn({key:new jn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(v=>v.getMeta("composition")))return;const r=t.some(v=>v.docChanged)&&!e.doc.eq(n.doc),o=t.some(v=>v.getMeta("preventClearDocument"));if(!r||o)return;const{empty:a,from:s,to:i}=e.selection,l=Mt.atStart(e.doc).from,c=Mt.atEnd(e.doc).to;if(a||!(s===l&&i===c)||!lte(n.doc))return;const m=n.tr,h=nte({state:n,transaction:m}),{commands:y}=new N3e({editor:this.editor,state:h});if(y.clearNodes(),!!m.steps.length)return m}})]}}),wje=ed.create({name:"paste",addProseMirrorPlugins(){return[new xn({key:new jn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),Cje=ed.create({name:"tabindex",addProseMirrorPlugins(){return[new xn({key:new jn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});const Aje=new as;function _je(t){return Aje.get(t,()=>Y3e(t.extensions??[]))}function rC(t,e,n){const{tipTapConfig:r,addFontsFromNode:o}=t.getTextOptions();dt(r,"textOptions.tipTapConfig must be set to use rich text"),dt(o,"textOptions.addFontsFromNode must be set to use rich text");const a=_je(r),s=Hi.fromJSON(a,e),i=new Set;function l(d){i.add(d)}function c(d,u){u=o(d,u,l);for(const m of d.children)c(m,u)}return c(s,n),Array.from(i)}async function kje({shouldReload:t=!0}={}){Lwe();for(const e of BE.connectedInstances)await e.close();await Promise.all(GN().map(e=>uZ(e))),Nwe(),t&&window.location.reload()}typeof window<"u"&&(window.__tldraw__hardReset=kje);function I3(t,e="_blank",n){return pv.openWindow(t,e,n)}Cp("@tldraw/editor","4.2.0","esm");class Dn{constructor(){L(this,"commands",[]);L(this,"lastMoveTo",null)}static lineThroughPoints(e,n){const r=new Dn;r.moveTo(e[0].x,e[0].y,{...n,offset:(n==null?void 0:n.endOffsets)??(n==null?void 0:n.offset)});for(let o=1;o<e.length;o++){const a=o===e.length-1;r.lineTo(e[o].x,e[o].y,a?{offset:n==null?void 0:n.endOffsets}:void 0)}return r}static cubicSplineThroughPoints(e,n){const r=new Dn,o=e.length,a=o-2,s=1.25;r.moveTo(e[0].x,e[0].y,{...n,offset:(n==null?void 0:n.endOffsets)??(n==null?void 0:n.offset)});for(let i=0;i<o-1;i++){const l=i===0?e[0]:e[i-1],c=e[i],d=e[i+1],u=i===a?d:e[i+2];let m,h,y,v;i===0?(m=l.x,h=l.y):(m=c.x+(d.x-l.x)/6*s,h=c.y+(d.y-l.y)/6*s);let x;i===a?(y=d.x,v=d.y,x={offset:n==null?void 0:n.endOffsets}):(y=d.x-(u.x-c.x)/6*s,v=d.y-(u.y-c.y)/6*s),r.cubicBezierTo(d.x,d.y,m,h,y,v,x)}return r}assertHasMoveTo(){return dt(this.lastMoveTo,"Start an SVGPathBuilder with `.moveTo()`"),this.lastMoveTo}moveTo(e,n,r){return this.lastMoveTo={type:"move",x:e,y:n,closeIdx:null,isClose:!1,opts:r},this.commands.push(this.lastMoveTo),this}lineTo(e,n,r){return this.assertHasMoveTo(),this.commands.push({type:"line",x:e,y:n,isClose:!1,opts:r}),this}circularArcTo(e,n,r,o,a,s){return this.arcTo(e,e,n,r,0,o,a,s)}arcTo(e,n,r,o,a,s,i,l){this.assertHasMoveTo();const c=this.commands[this.commands.length-1].x,d=this.commands[this.commands.length-1].y;if(c===s&&d===i)return this;if(e===0||n===0)return this.lineTo(s,i,l);const u=a,m=Math.sin(u),h=Math.cos(u);let y=Math.abs(e),v=Math.abs(n);const x=(c-s)/2,S=(d-i)/2,T=h*x+m*S,C=-m*x+h*S,_=T*T/(y*y)+C*C/(v*v);if(_>1){const Ne=Math.sqrt(_);y*=Ne,v*=Ne}const I=r!==o?1:-1,P=y*y*v*v-y*y*C*C-v*v*T*T,M=y*y*C*C+v*v*T*T;let D=P/M;D=D<0?0:D;const F=I*Math.sqrt(D),B=F*(y*C/v),V=F*(-(v*T)/y),z=h*B-m*V+(c+s)/2,H=m*B+h*V+(d+i)/2,j=(T-B)/y,q=(C-V)/v,U=(-T-B)/y,Y=(-C-V)/v,X=Math.atan2(q,j);let ee=Math.atan2(Y,U);!o&&ee>X?ee-=2*Math.PI:o&&ee<X&&(ee+=2*Math.PI);const $=ee-X,G=Math.max(y,v)*Math.abs($),re=Math.min(4,Math.ceil(Math.abs($)/(Math.PI/2))),K=Math.ceil(qw(G)/re),ve=$/re,xe=Ne=>({x:z+y*Math.cos(Ne)*h-v*Math.sin(Ne)*m,y:H+y*Math.cos(Ne)*m+v*Math.sin(Ne)*h}),Oe=Ne=>({x:-y*Math.sin(Ne)*h-v*Math.cos(Ne)*m,y:-y*Math.sin(Ne)*m+v*Math.cos(Ne)*h});for(let Ne=0;Ne<re;Ne++){const Fe=X+Ne*ve,Ke=X+(Ne+1)*ve,Qe=Ke-Fe,Wt=xe(Fe),hn=xe(Ke),Yt=Oe(Fe),Ut=Oe(Ke),an=4/3*Math.tan(Qe/4),wt=Wt.x+an*Yt.x,qn=Wt.y+an*Yt.y,Gn=hn.x-an*Ut.x,Wn=hn.y-an*Ut.y,Yr=Ne===0?l:{...l,mergeWithPrevious:!0};this.cubicBezierToWithResolution(hn.x,hn.y,wt,qn,Gn,Wn,Yr,K)}return this}cubicBezierTo(e,n,r,o,a,s,i){return this.cubicBezierToWithResolution(e,n,r,o,a,s,i)}cubicBezierToWithResolution(e,n,r,o,a,s,i,l){return this.assertHasMoveTo(),this.commands.push({type:"cubic",x:e,y:n,cp1:{x:r,y:o},cp2:{x:a,y:s},isClose:!1,opts:i,resolution:l}),this}close(){const e=this.assertHasMoveTo(),n=this.commands[this.commands.length-1];return Eo(e.x,n.x)&&Eo(e.y,n.y)?n.isClose=!0:this.commands.push({type:"line",x:e.x,y:e.y,isClose:!0}),e.closeIdx=this.commands.length-1,this.lastMoveTo=null,this}toD(e={}){var d,u,m;const{startIdx:n=0,endIdx:r=this.commands.length,onlyFilled:o=!1}=e,a=[];let s=!1,i=!1,l=!1;const c=h=>{if(i||h===0)return;i=!0;const y=this.commands[h-1];a.push("M",ie(y.x),ie(y.y))};for(let h=n;h<r;h++){const y=this.commands[h];switch(y.type){case"move":{const v=((d=y.opts)==null?void 0:d.geometry)===!1?!1:((m=(u=y.opts)==null?void 0:u.geometry)==null?void 0:m.isFilled)??!1;o&&!v?s=!0:(s=!1,i=!0,l=!0,a.push("M",ie(y.x),ie(y.y)));break}case"line":if(s)break;c(h),y.isClose&&l?a.push("Z"):a.push("L",ie(y.x),ie(y.y));break;case"cubic":if(s)break;c(h),a.push("C",ie(y.cp1.x),ie(y.cp1.y),ie(y.cp2.x),ie(y.cp2.y),ie(y.x),ie(y.y));break;default:wn(y,"type")}}return a.join(" ")}toSvg(e){if(e.forceSolid)return this.toSolidSvg(e);switch(e.style){case"solid":return this.toSolidSvg(e);case"dashed":case"dotted":return this.toDashedSvg(e);case"draw":return this.toDrawSvg(e);default:wn(e,"style")}}toGeometry(){var r,o,a,s,i,l,c,d;const e=[];let n=null;for(let u=0;u<this.commands.length;u++){const m=this.commands[u];m.type==="move"&&(n&&((r=n.opts)==null?void 0:r.geometry)!==!1&&e.push(new JM(this,n.startIdx,u,{...(o=n.opts)==null?void 0:o.geometry,isFilled:((s=(a=n.opts)==null?void 0:a.geometry)==null?void 0:s.isFilled)??!1,isClosed:n.moveCommand.closeIdx!==null})),n={startIdx:u,moveCommand:m,opts:m.opts,isClosed:!1}),m.isClose&&(dt(n,"No current move command"),n.isClosed=!0)}return n&&((i=n.opts)==null?void 0:i.geometry)!==!1&&e.push(new JM(this,n.startIdx,this.commands.length,{...(l=n.opts)==null?void 0:l.geometry,isFilled:((d=(c=n.opts)==null?void 0:c.geometry)==null?void 0:d.isFilled)??!1,isClosed:n.moveCommand.closeIdx!==null})),dt(e.length>0),e.length===1?e[0]:new pi({children:e})}toSolidSvg(e){const{strokeWidth:n,props:r}=e;return g.jsx("path",{strokeWidth:n,d:this.toD({onlyFilled:e.onlyFilled}),...r})}toDashedSvg(e){var v,x,S,T,C;const{style:n,strokeWidth:r,snap:o,lengthRatio:a,props:{markerStart:s,markerEnd:i,...l}={}}=e,c=[];let d=!1,u=!1,m,h=null;const y=()=>{if(!h)return;const{startIdx:_,endIdx:I,isFirst:P,isLast:M,length:D,lineOpts:F,pathIsClosed:B}=h;if(h=null,_===I&&this.commands[_].type==="move")return;const V=(F==null?void 0:F.dashStart)??e.start,z=(F==null?void 0:F.dashEnd)??e.end,{strokeDasharray:H,strokeDashoffset:j}=rX(D,r,{style:n,snap:o,lengthRatio:a,start:P?V??(B?"outset":"none"):"outset",end:M?z??(B?"outset":"none"):"outset"}),q=this.toD({startIdx:_,endIdx:I+1});c.push(g.jsx("path",{d:q,strokeDasharray:H,strokeDashoffset:j,markerStart:P?s:void 0,markerEnd:M?i:void 0},c.length))};for(let _=0;_<this.commands.length;_++){const I=this.commands[_],P=this.commands[_-1];if(I.type==="move"){d=I.closeIdx!==null;const B=((v=I.opts)==null?void 0:v.geometry)===!1?!1:((S=(x=I.opts)==null?void 0:x.geometry)==null?void 0:S.isFilled)??!1;e.onlyFilled&&!B?u=!0:(u=!1,m=I.opts);continue}if(u)continue;const M=this.calculateSegmentLength(P,I),D=P.type==="move",F=I.isClose||_===this.commands.length-1||((T=this.commands[_+1])==null?void 0:T.type)==="move";h&&((C=I.opts)!=null&&C.mergeWithPrevious)?(h.length+=M,h.endIdx=_,h.isLast=F):(y(),h={startIdx:_,endIdx:_,isFirst:D,isLast:F,length:M,lineOpts:m,pathIsClosed:d})}return y(),g.jsx("g",{strokeWidth:r,...l,children:c})}toDrawSvg(e){return g.jsx("path",{strokeWidth:e.strokeWidth,d:this.toDrawD(e),...e.props})}toDrawD(e){var m,h,y,v,x,S,T;const{strokeWidth:n,randomSeed:r,offset:o=n/3,roundness:a=n*2,passes:s=2,onlyFilled:i=!1}=e,l=[],c=this.getCommandInfo(),d=[];let u=null;for(let C=0;C<this.commands.length;C++){const _=this.commands[C],I=((m=_.opts)==null?void 0:m.offset)??o,P=((h=_.opts)==null?void 0:h.roundness)??a;_.type==="move"&&(u=C);const M=_.isClose?ra(u)+1:!this.commands[C+1]||this.commands[C+1].type==="move"?void 0:C+1,D=M!==void 0&&this.commands[M]&&((y=this.commands[M])==null?void 0:y.type)!=="move"?c[M]:void 0,F=r7[_.type],B=M!==void 0?r7[this.commands[M].type]:!1,V=c[C],z=V==null?void 0:V.tangentEnd,H=D==null?void 0:D.tangentStart,j=F&&B&&z&&H&&R.Len2(z)>.01&&R.Len2(H)>.01?nc(Math.abs(R.AngleBetween(z,H)),[Math.PI/2,Math.PI],[P,0],!0):0,U=Math.min((V==null?void 0:V.length)??1/0,(D==null?void 0:D.length)??1/0)-j*2,Y=Lt(I,0,U/4),X=Math.min(j,((V==null?void 0:V.length)??1/0)/4),ee=Math.min(j,((D==null?void 0:D.length)??1/0)/4),$={command:_,offsetAmount:Y,roundnessBefore:X,roundnessAfter:ee,tangentToPrev:(v=c[C])==null?void 0:v.tangentEnd,tangentToNext:D==null?void 0:D.tangentStart,moveDidClose:!1};if(d.push($),_.isClose&&u!==null){const G=d[u];G.moveDidClose=!0,G.roundnessAfter=ee}else _.type==="move"&&(u=C)}for(let C=0;C<s;C++){const _=rm(r+C);let I={x:0,y:0},P=!1;for(const{command:M,offsetAmount:D,roundnessBefore:F,roundnessAfter:B,tangentToNext:V,tangentToPrev:z}of d){const H=M.isClose?I:{x:_()*D,y:_()*D};if(M.type==="move"){I=H;const Y=((x=M.opts)==null?void 0:x.geometry)===!1?!1:((T=(S=M.opts)==null?void 0:S.geometry)==null?void 0:T.isFilled)??!1;i&&!Y?P=!0:P=!1}if(P)continue;const j=R.Add(M,H),q=V&&B>0?R.Mul(V,-B).add(j):j,U=z&&F>0?R.Mul(z,F).add(j):j;if(q===j||U===j)switch(M.type){case"move":l.push("M",ie(q.x),ie(q.y));break;case"line":l.push("L",ie(q.x),ie(q.y));break;case"cubic":{const Y=R.Add(M.cp1,H),X=R.Add(M.cp2,H);l.push("C",ie(Y.x),ie(Y.y),ie(X.x),ie(X.y),ie(q.x),ie(q.y));break}default:wn(M,"type")}else switch(M.type){case"move":l.push("M",ie(q.x),ie(q.y));break;case"line":l.push("L",ie(U.x),ie(U.y),"Q",ie(j.x),ie(j.y),ie(q.x),ie(q.y));break;case"cubic":{const Y=R.Add(M.cp1,H),X=R.Add(M.cp2,H);l.push("C",ie(Y.x),ie(Y.y),ie(X.x),ie(X.y),ie(j.x),ie(j.y));break}default:wn(M,"type")}}}return l.join(" ")}calculateSegmentLength(e,n){switch(n.type){case"move":return 0;case"line":return R.Dist(e,n);case"cubic":return fy.length(e.x,e.y,n.cp1.x,n.cp1.y,n.cp2.x,n.cp2.y,n.x,n.y);default:wn(n,"type")}}getCommands(){return this.commands}getCommandInfo(){const e=[];for(let n=1;n<this.commands.length;n++){const r=this.commands[n-1],o=this.commands[n];if(o._info){e[n]=o._info;continue}if(o.type==="move")continue;let a,s;switch(o.type){case"line":a=s=R.Sub(r,o).uni();break;case"cubic":{a=R.Sub(o.cp1,r).uni(),s=R.Sub(o.cp2,o).uni();break}default:wn(o,"type")}o._info={tangentStart:a,tangentEnd:s,length:this.calculateSegmentLength(r,o)},e[n]=o._info}return e}}const r7={line:!0,move:!0,cubic:!1};class JM extends Mp{constructor(n,r,o,a){super(a);L(this,"_segments",null);this.path=n,this.startIdx=r,this.endIdx=o}getSegments(){if(this._segments)return this._segments;this._segments=[];let n=this.path.commands[this.startIdx];dt(n.type==="move");for(let r=this.startIdx+1;r<this.endIdx;r++){const o=this.path.commands[r];switch(dt(o.type!=="move"),o.type){case"line":this._segments.push(new Yh({start:R.From(n),end:R.From(o)}));break;case"cubic":{this._segments.push(new WN({start:R.From(n),cp1:R.From(o.cp1),cp2:R.From(o.cp2),end:R.From(o),resolution:o.resolution}));break}default:wn(o,"type")}n=o}return this._segments}getVertices(n){const r=this.getSegments().flatMap(o=>o.getVertices(n)).filter((o,a,s)=>{const i=s[a-1];return i?!R.Equals(i,o):!0});if(this.isClosed){const o=r[r.length-1],a=r[0];R.Equals(o,a)||r.push(a)}return r}nearestPoint(n,r){let o=null,a=1/0;for(const s of this.getSegments()){const i=s.nearestPoint(n),l=R.Dist2(n,i);l<a&&(a=l,o=i)}return dt(o,"No nearest point found"),o}hitTestLineSegment(n,r,o=0,a){return super.hitTestLineSegment(n,r,o,a)}getSvgPathData(){return this.path.toD({startIdx:this.startIdx,endIdx:this.endIdx})}}/*!
 * Adapted from https://github.com/adobe-webplatform/Snap.svg/tree/master
 * Apache License: https://github.com/adobe-webplatform/Snap.svg/blob/master/LICENSE
 * https://github.com/adobe-webplatform/Snap.svg/blob/c8e483c9694517e24b282f8f59f985629f4994ce/dist/snap.svg.js#L5786
 */const fy={base3(t,e,n,r,o){const a=-3*e+9*n-9*r+3*o,s=t*a+6*e-12*n+6*r;return t*s-3*e+3*n},length(t,e,n,r,o,a,s,i,l=1){l=l>1?1:l<0?0:l;const c=l/2,d=12;let u=0;u=0;for(let m=0;m<d;m++){const h=c*fy.Tvalues[m]+c,y=fy.base3(h,t,n,o,s),v=fy.base3(h,e,r,a,i),x=y*y+v*v;u+=fy.Cvalues[m]*Math.sqrt(x)}return c*u},Tvalues:[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Cvalues:[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472]};function hte(){const t=lo(),e=ce("animationSpeed",()=>t==null?void 0:t.user.getAnimationSpeed(),[t]),[n,r]=w.useState(!1);return w.useEffect(()=>{if(e!==void 0){r(e===0);return}if(typeof window>"u"||!("matchMedia"in window))return;const o=window.matchMedia("(prefers-reduced-motion: reduce)"),a=()=>{r(o.matches)};return a(),o.addEventListener("change",a),()=>o.removeEventListener("change",a)},[e]),n}const QM=w.createContext(null);function Ije({children:t}){const e=iv("a11y",{msg:"",priority:"assertive"}),n=w.useContext(QM),r=w.useMemo(()=>({currentMsg:e,announce(o){o&&e.set(o)}}),[e]);return n?g.jsx(g.Fragment,{children:t}):g.jsx(QM.Provider,{value:r,children:t})}function oC(){const t=w.useContext(QM);if(!t)throw new Error("useA11y must be used within a A11yContext.Provider");return t}const gte=w.createContext(null);function bte({assetUrls:t,children:e}){return w.useEffect(()=>{for(const n of Object.values(t.icons)){if(!n)continue;const r=c0();r.crossOrigin="anonymous",r.src=n,r.decode()}for(const n of Object.values(t.embedIcons)){if(!n)continue;const r=c0();r.crossOrigin="anonymous",r.src=n,r.decode()}},[t]),g.jsx(gte.Provider,{value:t,children:e})}function P3(){const t=w.useContext(gte);if(!t)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return t}const ZM={"action.toggle-auto-pan":"Auto (trackpad)","action.toggle-auto-zoom":"Auto (mouse)","action.toggle-auto-none":"Auto","action.toggle-mouse":"Mouse","action.toggle-trackpad":"Trackpad","action.convert-to-bookmark":"Convert to bookmark","action.convert-to-embed":"Convert to embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.download-original":"Download original","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.export-all-as-png.short":"PNG","action.export-all-as-png":"Export as PNG","action.export-all-as-svg.short":"SVG","action.export-all-as-svg":"Export as SVG","action.fit-frame-to-content":"Fit to content","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.fork-project-on-tldraw":"Fork project on tldraw","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-kbd-shortcuts":"Open keyboard shortcuts","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.paste-error-title":"Pasting failed","action.paste-error-description":"Could not paste due to missing clipboard permissions. Please enable the permissions and try again.","action.print":"Print","action.redo":"Redo","action.remove-frame":"Remove frame","action.rename":"Rename","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-paste-at-cursor.menu":"Paste at cursor","action.toggle-paste-at-cursor":"Toggle paste at cursor","action.toggle-wrap-mode.menu":"Select on wrap","action.toggle-wrap-mode":"Toggle select on wrap","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-keyboard-shortcuts.menu":"Enable keyboard shortcuts","action.toggle-keyboard-shortcuts":"Toggle keyboard shortcuts","action.enhanced-a11y-mode.menu":"Enhanced accessibility mode","action.enhanced-a11y-mode":"Toggle enhanced accessibility mode","action.toggle-edge-scrolling.menu":"Edge scrolling","action.toggle-edge-scrolling":"Toggle edge scrolling","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-dynamic-size-mode.menu":"Dynamic size","action.toggle-dynamic-size-mode":"Toggle dynamic size","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.flatten-to-image":"Flatten","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","assets.files.size-too-big":"File size is too big","assets.files.maximum-size":"Maximum file size is {size}","assets.files.type-not-allowed":"File type is not allowed","assets.files.upload-failed":"Upload failed","assets.files.amount-too-many":"Too many files","assets.url.failed":"Couldnt load URL preview","theme.dark":"Dark","theme.light":"Light","theme.system":"System","color-style.white":"White","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","document.default-name":"Untitled","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","fill-style.fill":"Fill","fill-style.lined-fill":"Lined fill","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","verticalAlign-style.start":"Top","verticalAlign-style.middle":"Middle","verticalAlign-style.end":"Bottom","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.cloud":"Cloud","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.heart":"Heart","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus":"Rhombus","geo-style.rhombus-2":"Rhombus left","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","arrow-kind-style.arc":"Arc","arrow-kind-style.elbow":"Elbow","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.heart":"Heart","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.media":"Media","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","tool.pointer-down":"Pointer down","tool.image-zoom":"Zoom","tool.replace-media":"Replace media","tool.flip-horz":"Flip horizontally","tool.flip-vert":"Flip vertically","tool.rotate-cw":"Rotate","tool.aspect-ratio":"Aspect ratio","tool.aspect-ratio.original":"Original","tool.aspect-ratio.square":"Square (1:1)","tool.aspect-ratio.circle":"Circle (1:1)","tool.aspect-ratio.landscape":"Landscape (4:3)","tool.aspect-ratio.portrait":"Portrait (3:4)","tool.aspect-ratio.wide":"Wide (16:9)","tool.image-toolbar-title":"Image tools","tool.image-crop":"Crop image","tool.image-crop-confirm":"Confirm","tool.media-alt-text":"Alternative text","tool.media-alt-text-desc":"Give a description","tool.media-alt-text-confirm":"Confirm","tool.rich-text-bold":"Bold","tool.rich-text-italic":"Italic","tool.rich-text-code":"Code","tool.rich-text-highlight":"Highlight","tool.rich-text-strikethrough":"Strikethrough","tool.rich-text-link":"Link","tool.rich-text-link-visit":"Visit link","tool.rich-text-link-remove":"Remove link","tool.rich-text-header":"Header","tool.rich-text-bulletList":"Bulleted list","tool.rich-text-toolbar-title":"Text formatting","tool.rich-text-orderedList":"Ordered list","tool.bookmark":"Bookmark","a11y.status":"Status","a11y.skip-to-main-content":"Move focus to canvas","a11y.shape-index":"{num} of {total}","a11y.shape-image":"Image","a11y.shape-video":"Video","a11y.multiple-shapes":"{num} shapes selected","a11y.select-shape":"Select next shape","a11y.select-shape-direction":"Select shape in direction","a11y.enter-leave-container":"Enter/leave container","a11y.repeat-shape":"Repeat shape","a11y.move-shape":"Move shape","a11y.move-shape-faster":"Move shape faster","a11y.rotate-shape-cw":"Rotate shape clockwise","a11y.rotate-shape-ccw":"Rotate shape counterclockwise","a11y.rotate-shape-cw-fine":"Rotate shape clockwise (fine)","a11y.rotate-shape-ccw-fine":"Rotate shape counterclockwise (fine)","a11y.enlarge-shape":"Enlarge shape","a11y.shrink-shape":"Shrink shape","a11y.pan-camera":"Pan camera","a11y.adjust-shape-styles":"Adjust shape styles","a11y.open-context-menu":"Open context menu","a11y.open-keyboard-shortcuts":"Open keyboard shortcuts","menu.title":"Menu","menu.theme":"Theme","menu.accessibility":"Accessibility","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","menu.input-mode":"Input mode","context-menu.title":"Context menu","context-menu.edit":"Edit","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.export-all-as":"Export","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.copy-link":"Copy editor link","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy viewer link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to access this project.","share-menu.project-too-large":"Sorry, this project cant be shared because its too large. Were working on it!","share-menu.upload-failed":"Sorry, we couldnt upload your project at the moment. Please try again or let us know if the problem persists.","share-menu.creating-project":"Creating the new project","share-menu.copied":"Copied link","document-name-menu.copy-link":"Copy link","status.offline":"Offline","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.avatar-color":"Avatar color","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following you","people-menu.user":"(You)","people-menu.invite":"Invite others","people-menu.anonymous-user":"New user","help-menu.import-tldr-file":"Import file","help-menu.title":"Help and resources","help-menu.about":"About tldraw","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","help-menu.terms":"Terms of service","help-menu.privacy":"Privacy policy","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","edit-link-dialog.external-link":"External link","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the sites URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","shortcuts-dialog.a11y":"Accessibility","shortcuts-dialog.text-formatting":"Text formatting","style-panel.title":"Styles","style-panel.align":"Align","style-panel.label-align":"Label align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrows","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.arrow-kind":"Line","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","style-panel.selected":"selected","tool-panel.title":"Tools","tool-panel.more":"More","navigation-zone.title":"Navigation","navigation-zone.minimap":"Minimap","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","toast.success":"Success","toast.error":"Error","toast.info":"Info","toast.warning":"Warning","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesnt look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Dont ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Dont ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Dont ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"Weve updated this document to work with the current version of tldraw. If youd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Dont ask again","cursor-chat.type-to-chat":"Type to chat","app.loading":"Loading tldraw","handle.resize-top":"Resize top","handle.resize-bottom":"Resize bottom","handle.resize-left":"Resize left","handle.resize-right":"Resize right","handle.resize-top-left":"Resize top left","handle.resize-top-right":"Resize top right","handle.resize-bottom-left":"Resize bottom left","handle.resize-bottom-right":"Resize bottom right","handle.rotate.top_left_rotate":"Rotate top left","handle.rotate.top_right_rotate":"Rotate top right","handle.rotate.bottom_left_rotate":"Rotate bottom left","handle.rotate.bottom_right_rotate":"Rotate bottom right","handle.rotate.mobile_rotate":"Rotate","handle.crop.top":"Crop top","handle.crop.bottom":"Crop bottom","handle.crop.left":"Crop left","handle.crop.right":"Crop right","handle.crop.top-left":"Crop top left","handle.crop.top-right":"Crop top right","handle.crop.bottom-left":"Crop bottom left","handle.crop.bottom-right":"Crop bottom right","ui.close":"Close","ui.checked":"Checked","ui.unchecked":"Unchecked"},Pje=new Set(["ar","fa","he","ur","ku"]),nh={locale:"en",label:"English",messages:ZM,dir:"ltr"};async function Oje(t,e){if(!(await Vu(e.translations.en)).ok)return console.warn("No main translations found."),nh;if(t==="en")return nh;const r=f0.find(s=>s.locale===t);if(!r)return console.warn(`No translation found for locale ${t}`),nh;const a=await(await Vu(e.translations[r.locale])).json();if(!a)return console.warn(`No messages found for locale ${t}`),nh;for(const s in nh.messages)a[s];return{locale:t,label:r.label,dir:Pje.has(r.locale)?"rtl":"ltr",messages:{...nh.messages,...a}}}const O3=w.createContext(null);function Mje(){const t=w.useContext(O3);if(!t)throw new Error("useCurrentTranslation must be used inside of <TldrawUiContextProvider />");return t}function yte({overrides:t,locale:e,children:n}){const r=P3(),[o,a]=w.useState(()=>t&&t.en?{locale:"en",label:"English",dir:"ltr",messages:{...ZM,...t.en}}:{locale:"en",label:"English",dir:"ltr",messages:ZM});return w.useEffect(()=>{let s=!1;async function i(){const l=await Oje(e,r);l&&!s&&(t&&t[e]?a({...l,messages:{...l.messages,...t[e]}}):a(l))}return i(),()=>{s=!0}},[r,e,t]),g.jsx(O3.Provider,{value:o,children:n})}function it(){const t=Mje();return w.useCallback(function(n){return t.messages[n]??n},[t])}const Rje={normal:"tlui-button__normal",primary:"tlui-button__primary",danger:"tlui-button__danger",low:"tlui-button__low",icon:"tlui-button__icon",tool:"tlui-button__tool",menu:"tlui-button__menu",help:"tlui-button__help"},nn=w.forwardRef(function({children:e,type:n,htmlButtonType:r,isActive:o,...a},s){return g.jsx("button",{ref:s,type:r||"button",draggable:!1,"data-isactive":o,...a,className:pt("tlui-button",Rje[n],a.className),children:e})});function Dje(){const t=ue(),e=it(),n=w.useRef(null),r=w.useCallback(o=>{var s;t.markEventAsHandled(o),(s=n.current)==null||s.blur();const a=t.getCurrentPageShapesInReadingOrder();a.length&&(t.setSelectedShapes([a[0].id]),t.zoomToSelectionIfOffscreen(256,{animation:{duration:t.options.animationMediumMs},inset:0}),t.timers.setTimeout(()=>t.getContainer().focus(),100))},[t]);return g.jsx(nn,{ref:n,type:"low",tabIndex:0,className:"tl-skip-to-main-content",onClick:r,children:e("a11y.skip-to-main-content")})}const Nje=w.memo(function(){const e=oC(),n=it(),r=ce("a11y-msg",()=>e.currentMsg.get(),[]);return jje(r.msg),Lje(),r.msg&&g.jsx("div",{"aria-label":n("a11y.status"),"aria-live":r.priority||"assertive",role:"status","aria-hidden":"false",style:{position:"absolute",top:"-10000px",left:"-10000px"},children:r.msg})});function vte(t){const{editor:e,selectedShapeIds:n,msg:r}=t;let o="";const a=n.length;if(a>1)o=r("a11y.multiple-shapes").replace("{num}",a.toString());else if(a===1){const s=n[0],i=e.getShape(s);if(!i)return"";const l=e.getShapeUtil(i.type),c=["image","video"].includes(i.type);let d="";i.type==="geo"?d=r(`geo-style.${i.props.geo}`):c?d=r(`a11y.shape-${i.type}`):d=r(`tool.${i.type}`);const u=e.getCurrentPageShapesInReadingOrder(),m=(u.findIndex(x=>x.id===s)+1).toString(),h=u.length.toString(),y=r("a11y.shape-index").replace("{num}",m).replace("{total}",h),v=l.getAriaDescriptor(i)||l.getText(i)||"";o=(v?`${v}, `:"")+`${d}. ${y}`}return o}const Lje=()=>{const t=lo(),e=oC(),n=it(),r=w.useRef([]);oN("announce selection",()=>{if(!t)return;if(t.isIn("select.idle")){const a=t.getSelectedShapeIds();a!==r.current&&(r.current=a,ly(()=>{const s=vte({editor:t,selectedShapeIds:a,msg:n});s&&e.announce({msg:s})}))}},[t,e,n])},jje=t=>{const e=Ao();w.useEffect(()=>{if(Ur.a11y.get()){const n=o=>{console.debug(`%ca11y%c: ${o}`,"color: white; background: #40C057; padding: 2px;border-radius: 3px;","font-weight: normal")},r=o=>{const a=document.activeElement;if(o.key==="Tab"&&a&&a!==document.body&&!a.classList.contains("tl-container")){const s=a.getAttribute("aria-label")||a.getAttribute("title")||a.textContent;s&&n(s)}};return t&&n(t),document.addEventListener("keyup",r),()=>document.removeEventListener("keyup",r)}},[e,t])},w0=300,M3=320,eR=46,Bje=101;function xte(t,e){const n=e?t.getAsset(e):null;return n&&!n.props.image?n.props.title?Bje:eR:M3}function o7(t,e){return{...e,props:{...e.props,h:xte(t,e.props.assetId)}}}const Fje=t=>{try{return new URL(t).hostname.replace(/^www\./,"")}catch{return t}};function zje(t,e){const{url:n}=e.props,r=lm.createId(DK(n));t.getAsset(r)?e.props.assetId!==r&&t.updateShapes([{id:e.id,type:e.type,props:{assetId:r}}]):(t.updateShapes([{id:e.id,type:e.type,props:{assetId:null}}]),Uje(t,e))}const Uje=pw(async(t,e)=>{if(t.isDisposed)return;const{url:n}=e.props,r=await t.getAssetForExternalContent({type:"url",url:n});r&&t.run(()=>{t.createAssets([r]),t.updateShapes([{id:e.id,type:e.type,props:{assetId:r.id}}])})},500);async function Ste(t,{url:e,center:n=t.getViewportPageBounds().center}){try{const r=await t.getAssetForExternalContent({type:"url",url:e}),o=lr(),a={id:o,type:"bookmark",x:n.x-w0/2,y:n.y-M3/2,rotation:0,opacity:1,props:{url:e,assetId:(r==null?void 0:r.id)||null,w:w0,h:xte(t,r==null?void 0:r.id)}};t.run(()=>{r&&t.createAssets([r]),t.createShapes([a])});const s=t.getShape(o);return zc.ok(s)}catch(r){return zc.err(r instanceof Error?r.message:"Failed to create bookmark")}}function qje(t,e){const n=Dt(e.map(o=>t.getShape(o)).filter(o=>o&&t.isShapeOfType(o,"frame")));if(!n.length)return;const r=[];t.run(()=>{n.map(o=>{const a=t.getSortedChildIdsForParent(o.id);a.length&&(er(t,a,{filter:s=>!n.find(i=>i.id===s.id)}),r.push(...a))}),t.setSelectedShapes(r),t.deleteShapes(e)})}const a7=50;function Ete(t,e,n={padding:a7}){const r=Be.FromPoints(t.flatMap(c=>{if(!c)return[];const d=e.getShapeGeometry(c.id),u=e.getShapeLocalTransform(c);return(u==null?void 0:u.applyToPoints(d.vertices))??[]})),o=n.padding??a7,a=r.w+2*o,s=r.h+2*o,i=o-r.minX,l=o-r.minY;return{w:a,h:s,dx:i,dy:l}}function Tte(t,e,n={}){const r=t.getShape(e);if(!r)return;const o=t.getSortedChildIdsForParent(r.id),a=Dt(o.map(u=>t.getShape(u)));if(!a.length)return;const{w:s,h:i,dx:l,dy:c}=Ete(a,t,n);if(l===0&&c===0&&r.props.w===s&&r.props.h===i)return;const d=new R(l,c).rot(r.rotation);t.run(()=>{const u=o.map(m=>{const h=t.getShape(m);return{id:h.id,type:h.type,x:h.x+l,y:h.y+c}});u.push({id:r.id,type:r.type,x:r.x-d.x,y:r.y-d.y,props:{w:s,h:i}}),t.updateShapes(u)})}function xo({children:t}){return g.jsx("span",{className:"tlui-button__label",children:t})}function s7(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function aC(...t){return e=>{let n=!1;const r=t.map(o=>{const a=s7(o,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let o=0;o<r.length;o++){const a=r[o];typeof a=="function"?a():s7(t[o],null)}}}}function tr(...t){return w.useCallback(aC(...t),t)}function Hf(t){const e=Hje(t),n=w.forwardRef((r,o)=>{const{children:a,...s}=r,i=w.Children.toArray(a),l=i.find(Vje);if(l){const c=l.props.children,d=i.map(u=>u===l?w.Children.count(c)>1?w.Children.only(null):w.isValidElement(c)?c.props.children:null:u);return g.jsx(e,{...s,ref:o,children:w.isValidElement(c)?w.cloneElement(c,void 0,d):null})}return g.jsx(e,{...s,ref:o,children:a})});return n.displayName=`${t}.Slot`,n}var R3=Hf("Slot");function Hje(t){const e=w.forwardRef((n,r)=>{const{children:o,...a}=n;if(w.isValidElement(o)){const s=Kje(o),i=Gje(a,o.props);return o.type!==w.Fragment&&(i.ref=r?aC(r,s):s),w.cloneElement(o,i)}return w.Children.count(o)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var wte=Symbol("radix.slottable");function $je(t){const e=({children:n})=>g.jsx(g.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=wte,e}function Vje(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===wte}function Gje(t,e){const n={...e};for(const r in e){const o=t[r],a=e[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...i)=>{const l=a(...i);return o(...i),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...t,...n}}function Kje(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Wje=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kt=Wje.reduce((t,e)=>{const n=Hf(`Primitive.${e}`),r=w.forwardRef((o,a)=>{const{asChild:s,...i}=o,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function D3(t,e){t&&Qf.flushSync(()=>t.dispatchEvent(e))}var Yje=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Xje="VisuallyHidden",sC=w.forwardRef((t,e)=>g.jsx(Kt.span,{...t,ref:e,style:{...Yje,...t.style}}));sC.displayName=Xje;var Jje=sC;function Qje(t,e){const n=w.createContext(e),r=a=>{const{children:s,...i}=a,l=w.useMemo(()=>i,Object.values(i));return g.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function o(a){const s=w.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,o]}function Ji(t,e=[]){let n=[];function r(a,s){const i=w.createContext(s),l=n.length;n=[...n,s];const c=u=>{var S;const{scope:m,children:h,...y}=u,v=((S=m==null?void 0:m[t])==null?void 0:S[l])||i,x=w.useMemo(()=>y,Object.values(y));return g.jsx(v.Provider,{value:x,children:h})};c.displayName=a+"Provider";function d(u,m){var v;const h=((v=m==null?void 0:m[t])==null?void 0:v[l])||i,y=w.useContext(h);if(y)return y;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[c,d]}const o=()=>{const a=n.map(s=>w.createContext(s));return function(i){const l=(i==null?void 0:i[t])||a;return w.useMemo(()=>({[`__scope${t}`]:{...i,[t]:l}}),[i,l])}};return o.scopeName=t,[r,Zje(o,...e)]}function Zje(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const s=r.reduce((i,{useScope:l,scopeName:c})=>{const u=l(a)[`__scope${c}`];return{...i,...u}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function iC(t){const e=t+"CollectionProvider",[n,r]=Ji(e),[o,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=v=>{const{scope:x,children:S}=v,T=bt.useRef(null),C=bt.useRef(new Map).current;return g.jsx(o,{scope:x,itemMap:C,collectionRef:T,children:S})};s.displayName=e;const i=t+"CollectionSlot",l=Hf(i),c=bt.forwardRef((v,x)=>{const{scope:S,children:T}=v,C=a(i,S),_=tr(x,C.collectionRef);return g.jsx(l,{ref:_,children:T})});c.displayName=i;const d=t+"CollectionItemSlot",u="data-radix-collection-item",m=Hf(d),h=bt.forwardRef((v,x)=>{const{scope:S,children:T,...C}=v,_=bt.useRef(null),I=tr(x,_),P=a(d,S);return bt.useEffect(()=>(P.itemMap.set(_,{ref:_,...C}),()=>void P.itemMap.delete(_))),g.jsx(m,{[u]:"",ref:I,children:T})});h.displayName=d;function y(v){const x=a(t+"CollectionConsumer",v);return bt.useCallback(()=>{const T=x.collectionRef.current;if(!T)return[];const C=Array.from(T.querySelectorAll(`[${u}]`));return Array.from(x.itemMap.values()).sort((P,M)=>C.indexOf(P.ref.current)-C.indexOf(M.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:s,Slot:c,ItemSlot:h},y,r]}function rt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}var Ku=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},e4e=j$[" useInsertionEffect ".trim().toString()]||Ku;function jl({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[o,a,s]=t4e({defaultProp:e,onChange:n}),i=t!==void 0,l=i?t:o;{const d=w.useRef(t!==void 0);w.useEffect(()=>{const u=d.current;u!==i&&console.warn(`${r} is changing from ${u?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=i},[i,r])}const c=w.useCallback(d=>{var u;if(i){const m=n4e(d)?d(t):d;m!==t&&((u=s.current)==null||u.call(s,m))}else a(d)},[i,t,a,s]);return[l,c]}function t4e({defaultProp:t,onChange:e}){const[n,r]=w.useState(t),o=w.useRef(n),a=w.useRef(e);return e4e(()=>{a.current=e},[e]),w.useEffect(()=>{var s;o.current!==n&&((s=a.current)==null||s.call(a,n),o.current=n)},[n,o]),[n,r,a]}function n4e(t){return typeof t=="function"}function r4e(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var Bl=t=>{const{present:e,children:n}=t,r=o4e(e),o=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),a=tr(r.ref,a4e(o));return typeof n=="function"||r.isPresent?w.cloneElement(o,{ref:a}):null};Bl.displayName="Presence";function o4e(t){const[e,n]=w.useState(),r=w.useRef(null),o=w.useRef(t),a=w.useRef("none"),s=t?"mounted":"unmounted",[i,l]=r4e(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const c=kS(r.current);a.current=i==="mounted"?c:"none"},[i]),Ku(()=>{const c=r.current,d=o.current;if(d!==t){const m=a.current,h=kS(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&m!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Ku(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,u=h=>{const v=kS(r.current).includes(CSS.escape(h.animationName));if(h.target===e&&v&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=h=>{h.target===e&&(a.current=kS(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:w.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function kS(t){return(t==null?void 0:t.animationName)||"none"}function a4e(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var s4e=j$[" useId ".trim().toString()]||(()=>{}),i4e=0;function qc(t){const[e,n]=w.useState(s4e());return Ku(()=>{n(r=>r??String(i4e++))},[t]),e?`radix-${e}`:""}var l4e=w.createContext(void 0);function _v(t){const e=w.useContext(l4e);return t||e||"ltr"}function Ms(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function c4e(t,e=globalThis==null?void 0:globalThis.document){const n=Ms(t);w.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var u4e="DismissableLayer",tR="dismissableLayer.update",d4e="dismissableLayer.pointerDownOutside",p4e="dismissableLayer.focusOutside",i7,Cte=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Rg=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:s,onDismiss:i,...l}=t,c=w.useContext(Cte),[d,u]=w.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=w.useState({}),y=tr(e,M=>u(M)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=v.indexOf(x),T=d?v.indexOf(d):-1,C=c.layersWithOutsidePointerEventsDisabled.size>0,_=T>=S,I=m4e(M=>{const D=M.target,F=[...c.branches].some(B=>B.contains(D));!_||F||(o==null||o(M),s==null||s(M),M.defaultPrevented||i==null||i())},m),P=h4e(M=>{const D=M.target;[...c.branches].some(B=>B.contains(D))||(a==null||a(M),s==null||s(M),M.defaultPrevented||i==null||i())},m);return c4e(M=>{T===c.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&i&&(M.preventDefault(),i()))},m),w.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(i7=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),l7(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=i7)}},[d,m,n,c]),w.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),l7())},[d,c]),w.useEffect(()=>{const M=()=>h({});return document.addEventListener(tR,M),()=>document.removeEventListener(tR,M)},[]),g.jsx(Kt.div,{...l,ref:y,style:{pointerEvents:C?_?"auto":"none":void 0,...t.style},onFocusCapture:rt(t.onFocusCapture,P.onFocusCapture),onBlurCapture:rt(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:rt(t.onPointerDownCapture,I.onPointerDownCapture)})});Rg.displayName=u4e;var f4e="DismissableLayerBranch",Ate=w.forwardRef((t,e)=>{const n=w.useContext(Cte),r=w.useRef(null),o=tr(e,r);return w.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),g.jsx(Kt.div,{...t,ref:o})});Ate.displayName=f4e;function m4e(t,e=globalThis==null?void 0:globalThis.document){const n=Ms(t),r=w.useRef(!1),o=w.useRef(()=>{});return w.useEffect(()=>{const a=i=>{if(i.target&&!r.current){let l=function(){_te(d4e,n,c,{discrete:!0})};const c={originalEvent:i};i.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function h4e(t,e=globalThis==null?void 0:globalThis.document){const n=Ms(t),r=w.useRef(!1);return w.useEffect(()=>{const o=a=>{a.target&&!r.current&&_te(p4e,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function l7(){const t=new CustomEvent(tR);document.dispatchEvent(t)}function _te(t,e,n,{discrete:r}){const o=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?D3(o,a):o.dispatchEvent(a)}var g4e=Rg,b4e=Ate,_P="focusScope.autoFocusOnMount",kP="focusScope.autoFocusOnUnmount",c7={bubbles:!1,cancelable:!0},y4e="FocusScope",lC=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...s}=t,[i,l]=w.useState(null),c=Ms(o),d=Ms(a),u=w.useRef(null),m=tr(e,v=>l(v)),h=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let v=function(C){if(h.paused||!i)return;const _=C.target;i.contains(_)?u.current=_:qd(u.current,{select:!0})},x=function(C){if(h.paused||!i)return;const _=C.relatedTarget;_!==null&&(i.contains(_)||qd(u.current,{select:!0}))},S=function(C){if(document.activeElement===document.body)for(const I of C)I.removedNodes.length>0&&qd(i)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const T=new MutationObserver(S);return i&&T.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),T.disconnect()}}},[r,i,h.paused]),w.useEffect(()=>{if(i){d7.add(h);const v=document.activeElement;if(!i.contains(v)){const S=new CustomEvent(_P,c7);i.addEventListener(_P,c),i.dispatchEvent(S),S.defaultPrevented||(v4e(w4e(kte(i)),{select:!0}),document.activeElement===v&&qd(i))}return()=>{i.removeEventListener(_P,c),setTimeout(()=>{const S=new CustomEvent(kP,c7);i.addEventListener(kP,d),i.dispatchEvent(S),S.defaultPrevented||qd(v??document.body,{select:!0}),i.removeEventListener(kP,d),d7.remove(h)},0)}}},[i,c,d,h]);const y=w.useCallback(v=>{if(!n&&!r||h.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,S=document.activeElement;if(x&&S){const T=v.currentTarget,[C,_]=x4e(T);C&&_?!v.shiftKey&&S===_?(v.preventDefault(),n&&qd(C,{select:!0})):v.shiftKey&&S===C&&(v.preventDefault(),n&&qd(_,{select:!0})):S===T&&v.preventDefault()}},[n,r,h.paused]);return g.jsx(Kt.div,{tabIndex:-1,...s,ref:m,onKeyDown:y})});lC.displayName=y4e;function v4e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(qd(r,{select:e}),document.activeElement!==n)return}function x4e(t){const e=kte(t),n=u7(e,t),r=u7(e.reverse(),t);return[n,r]}function kte(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function u7(t,e){for(const n of t)if(!S4e(n,{upTo:e}))return n}function S4e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function E4e(t){return t instanceof HTMLInputElement&&"select"in t}function qd(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&E4e(t)&&e&&t.select()}}var d7=T4e();function T4e(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=p7(t,e),t.unshift(e)},remove(e){var n;t=p7(t,e),(n=t[0])==null||n.resume()}}}function p7(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function w4e(t){return t.filter(e=>e.tagName!=="A")}var C4e="Portal",kv=w.forwardRef((t,e)=>{var i;const{container:n,...r}=t,[o,a]=w.useState(!1);Ku(()=>a(!0),[]);const s=n||o&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return s?ife.createPortal(g.jsx(Kt.div,{...r,ref:e}),s):null});kv.displayName=C4e;var IP=0;function N3(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??f7()),document.body.insertAdjacentElement("beforeend",t[1]??f7()),IP++,()=>{IP===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),IP--}},[])}function f7(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Nc=function(){return Nc=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nc.apply(this,arguments)};function Ite(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function A4e(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var k1="right-scroll-bar-position",I1="width-before-scroll-bar",_4e="with-scroll-bars-hidden",k4e="--removed-body-scroll-bar-size";function PP(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function I4e(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var P4e=typeof window<"u"?w.useLayoutEffect:w.useEffect,m7=new WeakMap;function O4e(t,e){var n=I4e(null,function(r){return t.forEach(function(o){return PP(o,r)})});return P4e(function(){var r=m7.get(n);if(r){var o=new Set(r),a=new Set(t),s=n.current;o.forEach(function(i){a.has(i)||PP(i,null)}),a.forEach(function(i){o.has(i)||PP(i,s)})}m7.set(n,t)},[t]),n}function M4e(t){return t}function R4e(t,e){e===void 0&&(e=M4e);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var s=e(a,r);return n.push(s),function(){n=n.filter(function(i){return i!==s})}},assignSyncMedium:function(a){for(r=!0;n.length;){var s=n;n=[],s.forEach(a)}n={push:function(i){return a(i)},filter:function(){return n}}},assignMedium:function(a){r=!0;var s=[];if(n.length){var i=n;n=[],i.forEach(a),s=n}var l=function(){var d=s;s=[],d.forEach(a)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){s.push(d),c()},filter:function(d){return s=s.filter(d),n}}}};return o}function D4e(t){t===void 0&&(t={});var e=R4e(null);return e.options=Nc({async:!0,ssr:!1},t),e}var Pte=function(t){var e=t.sideCar,n=Ite(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,Nc({},n))};Pte.isSideCarExport=!0;function N4e(t,e){return t.useMedium(e),Pte}var Ote=D4e(),OP=function(){},cC=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:OP,onWheelCapture:OP,onTouchMoveCapture:OP}),o=r[0],a=r[1],s=t.forwardProps,i=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,u=t.shards,m=t.sideCar,h=t.noRelative,y=t.noIsolation,v=t.inert,x=t.allowPinchZoom,S=t.as,T=S===void 0?"div":S,C=t.gapMode,_=Ite(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,P=O4e([n,e]),M=Nc(Nc({},_),o);return w.createElement(w.Fragment,null,d&&w.createElement(I,{sideCar:Ote,removeScrollBar:c,shards:u,noRelative:h,noIsolation:y,inert:v,setCallbacks:a,allowPinchZoom:!!x,lockRef:n,gapMode:C}),s?w.cloneElement(w.Children.only(i),Nc(Nc({},M),{ref:P})):w.createElement(T,Nc({},M,{className:l,ref:P}),i))});cC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cC.classNames={fullWidth:I1,zeroRight:k1};var L4e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function j4e(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=L4e();return e&&t.setAttribute("nonce",e),t}function B4e(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function F4e(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var z4e=function(){var t=0,e=null;return{add:function(n){t==0&&(e=j4e())&&(B4e(e,n),F4e(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},U4e=function(){var t=z4e();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Mte=function(){var t=U4e(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},q4e={left:0,top:0,right:0,gap:0},MP=function(t){return parseInt(t||"",10)||0},H4e=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[MP(n),MP(r),MP(o)]},$4e=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return q4e;var e=H4e(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},V4e=Mte(),Fh="data-scroll-locked",G4e=function(t,e,n,r){var o=t.left,a=t.top,s=t.right,i=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(_4e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(i,"px ").concat(r,`;
  }
  body[`).concat(Fh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(k1,` {
    right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(I1,` {
    margin-right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(k1," .").concat(k1,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(I1," .").concat(I1,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fh,`] {
    `).concat(k4e,": ").concat(i,`px;
  }
`)},h7=function(){var t=parseInt(document.body.getAttribute(Fh)||"0",10);return isFinite(t)?t:0},K4e=function(){w.useEffect(function(){return document.body.setAttribute(Fh,(h7()+1).toString()),function(){var t=h7()-1;t<=0?document.body.removeAttribute(Fh):document.body.setAttribute(Fh,t.toString())}},[])},W4e=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;K4e();var a=w.useMemo(function(){return $4e(o)},[o]);return w.createElement(V4e,{styles:G4e(a,!e,o,n?"":"!important")})},nR=!1;if(typeof window<"u")try{var IS=Object.defineProperty({},"passive",{get:function(){return nR=!0,!0}});window.addEventListener("test",IS,IS),window.removeEventListener("test",IS,IS)}catch{nR=!1}var rh=nR?{passive:!1}:!1,Y4e=function(t){return t.tagName==="TEXTAREA"},Rte=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Y4e(t)&&n[e]==="visible")},X4e=function(t){return Rte(t,"overflowY")},J4e=function(t){return Rte(t,"overflowX")},g7=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Dte(t,r);if(o){var a=Nte(t,r),s=a[1],i=a[2];if(s>i)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Q4e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Z4e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Dte=function(t,e){return t==="v"?X4e(e):J4e(e)},Nte=function(t,e){return t==="v"?Q4e(e):Z4e(e)},e6e=function(t,e){return t==="h"&&e==="rtl"?-1:1},t6e=function(t,e,n,r,o){var a=e6e(t,window.getComputedStyle(e).direction),s=a*r,i=n.target,l=e.contains(i),c=!1,d=s>0,u=0,m=0;do{if(!i)break;var h=Nte(t,i),y=h[0],v=h[1],x=h[2],S=v-x-a*y;(y||S)&&Dte(t,i)&&(u+=S,m+=y);var T=i.parentNode;i=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!l&&i!==document.body||l&&(e.contains(i)||e===i));return(d&&Math.abs(u)<1||!d&&Math.abs(m)<1)&&(c=!0),c},PS=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},b7=function(t){return[t.deltaX,t.deltaY]},y7=function(t){return t&&"current"in t?t.current:t},n6e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r6e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},o6e=0,oh=[];function a6e(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),o=w.useState(o6e++)[0],a=w.useState(Mte)[0],s=w.useRef(t);w.useEffect(function(){s.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var v=A4e([t.lockRef.current],(t.shards||[]).map(y7),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var i=w.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!s.current.allowPinchZoom;var S=PS(v),T=n.current,C="deltaX"in v?v.deltaX:T[0]-S[0],_="deltaY"in v?v.deltaY:T[1]-S[1],I,P=v.target,M=Math.abs(C)>Math.abs(_)?"h":"v";if("touches"in v&&M==="h"&&P.type==="range")return!1;var D=g7(M,P);if(!D)return!0;if(D?I=M:(I=M==="v"?"h":"v",D=g7(M,P)),!D)return!1;if(!r.current&&"changedTouches"in v&&(C||_)&&(r.current=I),!I)return!0;var F=r.current||I;return t6e(F,x,v,F==="h"?C:_)},[]),l=w.useCallback(function(v){var x=v;if(!(!oh.length||oh[oh.length-1]!==a)){var S="deltaY"in x?b7(x):PS(x),T=e.current.filter(function(I){return I.name===x.type&&(I.target===x.target||x.target===I.shadowParent)&&n6e(I.delta,S)})[0];if(T&&T.should){x.cancelable&&x.preventDefault();return}if(!T){var C=(s.current.shards||[]).map(y7).filter(Boolean).filter(function(I){return I.contains(x.target)}),_=C.length>0?i(x,C[0]):!s.current.noIsolation;_&&x.cancelable&&x.preventDefault()}}},[]),c=w.useCallback(function(v,x,S,T){var C={name:v,delta:x,target:S,should:T,shadowParent:s6e(S)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(_){return _!==C})},1)},[]),d=w.useCallback(function(v){n.current=PS(v),r.current=void 0},[]),u=w.useCallback(function(v){c(v.type,b7(v),v.target,i(v,t.lockRef.current))},[]),m=w.useCallback(function(v){c(v.type,PS(v),v.target,i(v,t.lockRef.current))},[]);w.useEffect(function(){return oh.push(a),t.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",l,rh),document.addEventListener("touchmove",l,rh),document.addEventListener("touchstart",d,rh),function(){oh=oh.filter(function(v){return v!==a}),document.removeEventListener("wheel",l,rh),document.removeEventListener("touchmove",l,rh),document.removeEventListener("touchstart",d,rh)}},[]);var h=t.removeScrollBar,y=t.inert;return w.createElement(w.Fragment,null,y?w.createElement(a,{styles:r6e(o)}):null,h?w.createElement(W4e,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function s6e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const i6e=N4e(Ote,a6e);var uC=w.forwardRef(function(t,e){return w.createElement(cC,Nc({},t,{ref:e,sideCar:i6e}))});uC.classNames=cC.classNames;var l6e=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ah=new WeakMap,OS=new WeakMap,MS={},RP=0,Lte=function(t){return t&&(t.host||Lte(t.parentNode))},c6e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Lte(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},u6e=function(t,e,n,r){var o=c6e(e,Array.isArray(t)?t:[t]);MS[n]||(MS[n]=new WeakMap);var a=MS[n],s=[],i=new Set,l=new Set(o),c=function(u){!u||i.has(u)||(i.add(u),c(u.parentNode))};o.forEach(c);var d=function(u){!u||l.has(u)||Array.prototype.forEach.call(u.children,function(m){if(i.has(m))d(m);else try{var h=m.getAttribute(r),y=h!==null&&h!=="false",v=(ah.get(m)||0)+1,x=(a.get(m)||0)+1;ah.set(m,v),a.set(m,x),s.push(m),v===1&&y&&OS.set(m,!0),x===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",m,S)}})};return d(e),i.clear(),RP++,function(){s.forEach(function(u){var m=ah.get(u)-1,h=a.get(u)-1;ah.set(u,m),a.set(u,h),m||(OS.has(u)||u.removeAttribute(r),OS.delete(u)),h||u.removeAttribute(n)}),RP--,RP||(ah=new WeakMap,ah=new WeakMap,OS=new WeakMap,MS={})}},L3=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=l6e(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),u6e(r,o,n,"aria-hidden")):function(){return null}},dC="Dialog",[jte]=Ji(dC),[d6e,cc]=jte(dC),Bte=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:s=!0}=t,i=w.useRef(null),l=w.useRef(null),[c,d]=jl({prop:r,defaultProp:o??!1,onChange:a,caller:dC});return g.jsx(d6e,{scope:e,triggerRef:i,contentRef:l,contentId:qc(),titleId:qc(),descriptionId:qc(),open:c,onOpenChange:d,onOpenToggle:w.useCallback(()=>d(u=>!u),[d]),modal:s,children:n})};Bte.displayName=dC;var Fte="DialogTrigger",p6e=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=cc(Fte,n),a=tr(e,o.triggerRef);return g.jsx(Kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":F3(o.open),...r,ref:a,onClick:rt(t.onClick,o.onOpenToggle)})});p6e.displayName=Fte;var j3="DialogPortal",[f6e,zte]=jte(j3,{forceMount:void 0}),Ute=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,a=cc(j3,e);return g.jsx(f6e,{scope:e,forceMount:n,children:w.Children.map(r,s=>g.jsx(Bl,{present:n||a.open,children:g.jsx(kv,{asChild:!0,container:o,children:s})}))})};Ute.displayName=j3;var ZE="DialogOverlay",qte=w.forwardRef((t,e)=>{const n=zte(ZE,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,a=cc(ZE,t.__scopeDialog);return a.modal?g.jsx(Bl,{present:r||a.open,children:g.jsx(h6e,{...o,ref:e})}):null});qte.displayName=ZE;var m6e=Hf("DialogOverlay.RemoveScroll"),h6e=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=cc(ZE,n);return g.jsx(uC,{as:m6e,allowPinchZoom:!0,shards:[o.contentRef],children:g.jsx(Kt.div,{"data-state":F3(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),$f="DialogContent",Hte=w.forwardRef((t,e)=>{const n=zte($f,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,a=cc($f,t.__scopeDialog);return g.jsx(Bl,{present:r||a.open,children:a.modal?g.jsx(g6e,{...o,ref:e}):g.jsx(b6e,{...o,ref:e})})});Hte.displayName=$f;var g6e=w.forwardRef((t,e)=>{const n=cc($f,t.__scopeDialog),r=w.useRef(null),o=tr(e,n.contentRef,r);return w.useEffect(()=>{const a=r.current;if(a)return L3(a)},[]),g.jsx($te,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rt(t.onCloseAutoFocus,a=>{var s;a.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:rt(t.onPointerDownOutside,a=>{const s=a.detail.originalEvent,i=s.button===0&&s.ctrlKey===!0;(s.button===2||i)&&a.preventDefault()}),onFocusOutside:rt(t.onFocusOutside,a=>a.preventDefault())})}),b6e=w.forwardRef((t,e)=>{const n=cc($f,t.__scopeDialog),r=w.useRef(!1),o=w.useRef(!1);return g.jsx($te,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,i;(s=t.onCloseAutoFocus)==null||s.call(t,a),a.defaultPrevented||(r.current||(i=n.triggerRef.current)==null||i.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=a.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),$te=w.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...s}=t,i=cc($f,n),l=w.useRef(null),c=tr(e,l);return N3(),g.jsxs(g.Fragment,{children:[g.jsx(lC,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:g.jsx(Rg,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":F3(i.open),...s,ref:c,onDismiss:()=>i.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(v6e,{titleId:i.titleId}),g.jsx(S6e,{contentRef:l,descriptionId:i.descriptionId})]})]})}),B3="DialogTitle",Vte=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=cc(B3,n);return g.jsx(Kt.h2,{id:o.titleId,...r,ref:e})});Vte.displayName=B3;var Gte="DialogDescription",y6e=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=cc(Gte,n);return g.jsx(Kt.p,{id:o.descriptionId,...r,ref:e})});y6e.displayName=Gte;var Kte="DialogClose",Wte=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=cc(Kte,n);return g.jsx(Kt.button,{type:"button",...r,ref:e,onClick:rt(t.onClick,()=>o.onOpenChange(!1))})});Wte.displayName=Kte;function F3(t){return t?"open":"closed"}var Yte="DialogTitleWarning",[Vot,Xte]=Qje(Yte,{contentName:$f,titleName:B3,docsSlug:"dialog"}),v6e=({titleId:t})=>{const e=Xte(Yte),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},x6e="DialogDescriptionWarning",S6e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Xte(x6e).contentName}}.`;return w.useEffect(()=>{var a;const o=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},E6e=Bte,T6e=Ute,w6e=qte,C6e=Hte,A6e=Vte;function _6e(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Jte(t){const[e,n]=w.useState(void 0);return Ku(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let s,i;if("borderBoxSize"in a){const l=a.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,i=c.blockSize}else s=t.offsetWidth,i=t.offsetHeight;n({width:s,height:i})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const k6e=["top","right","bottom","left"],hp=Math.min,Di=Math.max,eT=Math.round,RS=Math.floor,Hc=t=>({x:t,y:t}),I6e={left:"right",right:"left",bottom:"top",top:"bottom"},P6e={start:"end",end:"start"};function rR(t,e,n){return Di(t,hp(e,n))}function Wu(t,e){return typeof t=="function"?t(e):t}function Yu(t){return t.split("-")[0]}function Dg(t){return t.split("-")[1]}function z3(t){return t==="x"?"y":"x"}function U3(t){return t==="y"?"height":"width"}const O6e=new Set(["top","bottom"]);function Fc(t){return O6e.has(Yu(t))?"y":"x"}function q3(t){return z3(Fc(t))}function M6e(t,e,n){n===void 0&&(n=!1);const r=Dg(t),o=q3(t),a=U3(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=tT(s)),[s,tT(s)]}function R6e(t){const e=tT(t);return[oR(t),e,oR(e)]}function oR(t){return t.replace(/start|end/g,e=>P6e[e])}const v7=["left","right"],x7=["right","left"],D6e=["top","bottom"],N6e=["bottom","top"];function L6e(t,e,n){switch(t){case"top":case"bottom":return n?e?x7:v7:e?v7:x7;case"left":case"right":return e?D6e:N6e;default:return[]}}function j6e(t,e,n,r){const o=Dg(t);let a=L6e(Yu(t),n==="start",r);return o&&(a=a.map(s=>s+"-"+o),e&&(a=a.concat(a.map(oR)))),a}function tT(t){return t.replace(/left|right|bottom|top/g,e=>I6e[e])}function B6e(t){return{top:0,right:0,bottom:0,left:0,...t}}function Qte(t){return typeof t!="number"?B6e(t):{top:t,right:t,bottom:t,left:t}}function nT(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function S7(t,e,n){let{reference:r,floating:o}=t;const a=Fc(e),s=q3(e),i=U3(s),l=Yu(e),c=a==="y",d=r.x+r.width/2-o.width/2,u=r.y+r.height/2-o.height/2,m=r[i]/2-o[i]/2;let h;switch(l){case"top":h={x:d,y:r.y-o.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:u};break;case"left":h={x:r.x-o.width,y:u};break;default:h={x:r.x,y:r.y}}switch(Dg(e)){case"start":h[s]-=m*(n&&c?-1:1);break;case"end":h[s]+=m*(n&&c?-1:1);break}return h}const F6e=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:s}=n,i=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:d,y:u}=S7(c,r,l),m=r,h={},y=0;for(let v=0;v<i.length;v++){const{name:x,fn:S}=i[v],{x:T,y:C,data:_,reset:I}=await S({x:d,y:u,initialPlacement:r,placement:m,strategy:o,middlewareData:h,rects:c,platform:s,elements:{reference:t,floating:e}});d=T??d,u=C??u,h={...h,[x]:{...h[x],..._}},I&&y<=50&&(y++,typeof I=="object"&&(I.placement&&(m=I.placement),I.rects&&(c=I.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):I.rects),{x:d,y:u}=S7(c,m,l)),v=-1)}return{x:d,y:u,placement:m,strategy:o,middlewareData:h}};async function C0(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:a,rects:s,elements:i,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:h=0}=Wu(e,t),y=Qte(h),x=i[m?u==="floating"?"reference":"floating":u],S=nT(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(x)))==null||n?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(i.floating)),boundary:c,rootBoundary:d,strategy:l})),T=u==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(i.floating)),_=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},I=nT(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:T,offsetParent:C,strategy:l}):T);return{top:(S.top-I.top+y.top)/_.y,bottom:(I.bottom-S.bottom+y.bottom)/_.y,left:(S.left-I.left+y.left)/_.x,right:(I.right-S.right+y.right)/_.x}}const z6e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:a,platform:s,elements:i,middlewareData:l}=e,{element:c,padding:d=0}=Wu(t,e)||{};if(c==null)return{};const u=Qte(d),m={x:n,y:r},h=q3(o),y=U3(h),v=await s.getDimensions(c),x=h==="y",S=x?"top":"left",T=x?"bottom":"right",C=x?"clientHeight":"clientWidth",_=a.reference[y]+a.reference[h]-m[h]-a.floating[y],I=m[h]-a.reference[h],P=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let M=P?P[C]:0;(!M||!await(s.isElement==null?void 0:s.isElement(P)))&&(M=i.floating[C]||a.floating[y]);const D=_/2-I/2,F=M/2-v[y]/2-1,B=hp(u[S],F),V=hp(u[T],F),z=B,H=M-v[y]-V,j=M/2-v[y]/2+D,q=rR(z,j,H),U=!l.arrow&&Dg(o)!=null&&j!==q&&a.reference[y]/2-(j<z?B:V)-v[y]/2<0,Y=U?j<z?j-z:j-H:0;return{[h]:m[h]+Y,data:{[h]:q,centerOffset:j-q-Y,...U&&{alignmentOffset:Y}},reset:U}}}),U6e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:a,rects:s,initialPlacement:i,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...x}=Wu(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const S=Yu(o),T=Fc(i),C=Yu(i)===i,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),I=m||(C||!v?[tT(i)]:R6e(i)),P=y!=="none";!m&&P&&I.push(...j6e(i,v,y,_));const M=[i,...I],D=await C0(e,x),F=[];let B=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&F.push(D[S]),u){const j=M6e(o,s,_);F.push(D[j[0]],D[j[1]])}if(B=[...B,{placement:o,overflows:F}],!F.every(j=>j<=0)){var V,z;const j=(((V=a.flip)==null?void 0:V.index)||0)+1,q=M[j];if(q&&(!(u==="alignment"?T!==Fc(q):!1)||B.every(X=>Fc(X.placement)===T?X.overflows[0]>0:!0)))return{data:{index:j,overflows:B},reset:{placement:q}};let U=(z=B.filter(Y=>Y.overflows[0]<=0).sort((Y,X)=>Y.overflows[1]-X.overflows[1])[0])==null?void 0:z.placement;if(!U)switch(h){case"bestFit":{var H;const Y=(H=B.filter(X=>{if(P){const ee=Fc(X.placement);return ee===T||ee==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ee=>ee>0).reduce((ee,$)=>ee+$,0)]).sort((X,ee)=>X[1]-ee[1])[0])==null?void 0:H[0];Y&&(U=Y);break}case"initialPlacement":U=i;break}if(o!==U)return{reset:{placement:U}}}return{}}}};function E7(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function T7(t){return k6e.some(e=>t[e]>=0)}const q6e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Wu(t,e);switch(r){case"referenceHidden":{const a=await C0(e,{...o,elementContext:"reference"}),s=E7(a,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:T7(s)}}}case"escaped":{const a=await C0(e,{...o,altBoundary:!0}),s=E7(a,n.floating);return{data:{escapedOffsets:s,escaped:T7(s)}}}default:return{}}}}},Zte=new Set(["left","top"]);async function H6e(t,e){const{placement:n,platform:r,elements:o}=t,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=Yu(n),i=Dg(n),l=Fc(n)==="y",c=Zte.has(s)?-1:1,d=a&&l?-1:1,u=Wu(e,t);let{mainAxis:m,crossAxis:h,alignmentAxis:y}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return i&&typeof y=="number"&&(h=i==="end"?y*-1:y),l?{x:h*d,y:m*c}:{x:m*c,y:h*d}}const $6e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:a,placement:s,middlewareData:i}=e,l=await H6e(e,t);return s===((n=i.offset)==null?void 0:n.placement)&&(r=i.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:a+l.y,data:{...l,placement:s}}}}},V6e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:i={fn:x=>{let{x:S,y:T}=x;return{x:S,y:T}}},...l}=Wu(t,e),c={x:n,y:r},d=await C0(e,l),u=Fc(Yu(o)),m=z3(u);let h=c[m],y=c[u];if(a){const x=m==="y"?"top":"left",S=m==="y"?"bottom":"right",T=h+d[x],C=h-d[S];h=rR(T,h,C)}if(s){const x=u==="y"?"top":"left",S=u==="y"?"bottom":"right",T=y+d[x],C=y-d[S];y=rR(T,y,C)}const v=i.fn({...e,[m]:h,[u]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:a,[u]:s}}}}}},G6e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:a,middlewareData:s}=e,{offset:i=0,mainAxis:l=!0,crossAxis:c=!0}=Wu(t,e),d={x:n,y:r},u=Fc(o),m=z3(u);let h=d[m],y=d[u];const v=Wu(i,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const C=m==="y"?"height":"width",_=a.reference[m]-a.floating[C]+x.mainAxis,I=a.reference[m]+a.reference[C]-x.mainAxis;h<_?h=_:h>I&&(h=I)}if(c){var S,T;const C=m==="y"?"width":"height",_=Zte.has(Yu(o)),I=a.reference[u]-a.floating[C]+(_&&((S=s.offset)==null?void 0:S[u])||0)+(_?0:x.crossAxis),P=a.reference[u]+a.reference[C]+(_?0:((T=s.offset)==null?void 0:T[u])||0)-(_?x.crossAxis:0);y<I?y=I:y>P&&(y=P)}return{[m]:h,[u]:y}}}},K6e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:a,platform:s,elements:i}=e,{apply:l=()=>{},...c}=Wu(t,e),d=await C0(e,c),u=Yu(o),m=Dg(o),h=Fc(o)==="y",{width:y,height:v}=a.floating;let x,S;u==="top"||u==="bottom"?(x=u,S=m===(await(s.isRTL==null?void 0:s.isRTL(i.floating))?"start":"end")?"left":"right"):(S=u,x=m==="end"?"top":"bottom");const T=v-d.top-d.bottom,C=y-d.left-d.right,_=hp(v-d[x],T),I=hp(y-d[S],C),P=!e.middlewareData.shift;let M=_,D=I;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(D=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(M=T),P&&!m){const B=Di(d.left,0),V=Di(d.right,0),z=Di(d.top,0),H=Di(d.bottom,0);h?D=y-2*(B!==0||V!==0?B+V:Di(d.left,d.right)):M=v-2*(z!==0||H!==0?z+H:Di(d.top,d.bottom))}await l({...e,availableWidth:D,availableHeight:M});const F=await s.getDimensions(i.floating);return y!==F.width||v!==F.height?{reset:{rects:!0}}:{}}}};function pC(){return typeof window<"u"}function Ng(t){return ene(t)?(t.nodeName||"").toLowerCase():"#document"}function $i(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function tu(t){var e;return(e=(ene(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ene(t){return pC()?t instanceof Node||t instanceof $i(t).Node:!1}function oc(t){return pC()?t instanceof Element||t instanceof $i(t).Element:!1}function Kc(t){return pC()?t instanceof HTMLElement||t instanceof $i(t).HTMLElement:!1}function w7(t){return!pC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $i(t).ShadowRoot}const W6e=new Set(["inline","contents"]);function Iv(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=ac(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!W6e.has(o)}const Y6e=new Set(["table","td","th"]);function X6e(t){return Y6e.has(Ng(t))}const J6e=[":popover-open",":modal"];function fC(t){return J6e.some(e=>{try{return t.matches(e)}catch{return!1}})}const Q6e=["transform","translate","scale","rotate","perspective"],Z6e=["transform","translate","scale","rotate","perspective","filter"],e5e=["paint","layout","strict","content"];function H3(t){const e=$3(),n=oc(t)?ac(t):t;return Q6e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Z6e.some(r=>(n.willChange||"").includes(r))||e5e.some(r=>(n.contain||"").includes(r))}function t5e(t){let e=gp(t);for(;Kc(e)&&!ng(e);){if(H3(e))return e;if(fC(e))return null;e=gp(e)}return null}function $3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const n5e=new Set(["html","body","#document"]);function ng(t){return n5e.has(Ng(t))}function ac(t){return $i(t).getComputedStyle(t)}function mC(t){return oc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function gp(t){if(Ng(t)==="html")return t;const e=t.assignedSlot||t.parentNode||w7(t)&&t.host||tu(t);return w7(e)?e.host:e}function tne(t){const e=gp(t);return ng(e)?t.ownerDocument?t.ownerDocument.body:t.body:Kc(e)&&Iv(e)?e:tne(e)}function A0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=tne(t),a=o===((r=t.ownerDocument)==null?void 0:r.body),s=$i(o);if(a){const i=aR(s);return e.concat(s,s.visualViewport||[],Iv(o)?o:[],i&&n?A0(i):[])}return e.concat(o,A0(o,[],n))}function aR(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function nne(t){const e=ac(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Kc(t),a=o?t.offsetWidth:n,s=o?t.offsetHeight:r,i=eT(n)!==a||eT(r)!==s;return i&&(n=a,r=s),{width:n,height:r,$:i}}function V3(t){return oc(t)?t:t.contextElement}function zh(t){const e=V3(t);if(!Kc(e))return Hc(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:a}=nne(e);let s=(a?eT(n.width):n.width)/r,i=(a?eT(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!i||!Number.isFinite(i))&&(i=1),{x:s,y:i}}const r5e=Hc(0);function rne(t){const e=$i(t);return!$3()||!e.visualViewport?r5e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function o5e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$i(t)?!1:e}function Vf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),a=V3(t);let s=Hc(1);e&&(r?oc(r)&&(s=zh(r)):s=zh(t));const i=o5e(a,n,r)?rne(a):Hc(0);let l=(o.left+i.x)/s.x,c=(o.top+i.y)/s.y,d=o.width/s.x,u=o.height/s.y;if(a){const m=$i(a),h=r&&oc(r)?$i(r):r;let y=m,v=aR(y);for(;v&&r&&h!==y;){const x=zh(v),S=v.getBoundingClientRect(),T=ac(v),C=S.left+(v.clientLeft+parseFloat(T.paddingLeft))*x.x,_=S.top+(v.clientTop+parseFloat(T.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,u*=x.y,l+=C,c+=_,y=$i(v),v=aR(y)}}return nT({width:d,height:u,x:l,y:c})}function hC(t,e){const n=mC(t).scrollLeft;return e?e.left+n:Vf(tu(t)).left+n}function one(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-hC(t,n),o=n.top+e.scrollTop;return{x:r,y:o}}function a5e(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const a=o==="fixed",s=tu(r),i=e?fC(e.floating):!1;if(r===s||i&&a)return n;let l={scrollLeft:0,scrollTop:0},c=Hc(1);const d=Hc(0),u=Kc(r);if((u||!u&&!a)&&((Ng(r)!=="body"||Iv(s))&&(l=mC(r)),Kc(r))){const h=Vf(r);c=zh(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const m=s&&!u&&!a?one(s,l):Hc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+m.x,y:n.y*c.y-l.scrollTop*c.y+d.y+m.y}}function s5e(t){return Array.from(t.getClientRects())}function i5e(t){const e=tu(t),n=mC(t),r=t.ownerDocument.body,o=Di(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Di(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+hC(t);const i=-n.scrollTop;return ac(r).direction==="rtl"&&(s+=Di(e.clientWidth,r.clientWidth)-o),{width:o,height:a,x:s,y:i}}const C7=25;function l5e(t,e){const n=$i(t),r=tu(t),o=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,i=0,l=0;if(o){a=o.width,s=o.height;const d=$3();(!d||d&&e==="fixed")&&(i=o.offsetLeft,l=o.offsetTop)}const c=hC(r);if(c<=0){const d=r.ownerDocument,u=d.body,m=getComputedStyle(u),h=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(r.clientWidth-u.clientWidth-h);y<=C7&&(a-=y)}else c<=C7&&(a+=c);return{width:a,height:s,x:i,y:l}}const c5e=new Set(["absolute","fixed"]);function u5e(t,e){const n=Vf(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,a=Kc(t)?zh(t):Hc(1),s=t.clientWidth*a.x,i=t.clientHeight*a.y,l=o*a.x,c=r*a.y;return{width:s,height:i,x:l,y:c}}function A7(t,e,n){let r;if(e==="viewport")r=l5e(t,n);else if(e==="document")r=i5e(tu(t));else if(oc(e))r=u5e(e,n);else{const o=rne(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return nT(r)}function ane(t,e){const n=gp(t);return n===e||!oc(n)||ng(n)?!1:ac(n).position==="fixed"||ane(n,e)}function d5e(t,e){const n=e.get(t);if(n)return n;let r=A0(t,[],!1).filter(i=>oc(i)&&Ng(i)!=="body"),o=null;const a=ac(t).position==="fixed";let s=a?gp(t):t;for(;oc(s)&&!ng(s);){const i=ac(s),l=H3(s);!l&&i.position==="fixed"&&(o=null),(a?!l&&!o:!l&&i.position==="static"&&!!o&&c5e.has(o.position)||Iv(s)&&!l&&ane(t,s))?r=r.filter(d=>d!==s):o=i,s=gp(s)}return e.set(t,r),r}function p5e(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const s=[...n==="clippingAncestors"?fC(e)?[]:d5e(e,this._c):[].concat(n),r],i=s[0],l=s.reduce((c,d)=>{const u=A7(e,d,o);return c.top=Di(u.top,c.top),c.right=hp(u.right,c.right),c.bottom=hp(u.bottom,c.bottom),c.left=Di(u.left,c.left),c},A7(e,i,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function f5e(t){const{width:e,height:n}=nne(t);return{width:e,height:n}}function m5e(t,e,n){const r=Kc(e),o=tu(e),a=n==="fixed",s=Vf(t,!0,a,e);let i={scrollLeft:0,scrollTop:0};const l=Hc(0);function c(){l.x=hC(o)}if(r||!r&&!a)if((Ng(e)!=="body"||Iv(o))&&(i=mC(e)),r){const h=Vf(e,!0,a,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else o&&c();a&&!r&&o&&c();const d=o&&!r&&!a?one(o,i):Hc(0),u=s.left+i.scrollLeft-l.x-d.x,m=s.top+i.scrollTop-l.y-d.y;return{x:u,y:m,width:s.width,height:s.height}}function DP(t){return ac(t).position==="static"}function _7(t,e){if(!Kc(t)||ac(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return tu(t)===n&&(n=n.ownerDocument.body),n}function sne(t,e){const n=$i(t);if(fC(t))return n;if(!Kc(t)){let o=gp(t);for(;o&&!ng(o);){if(oc(o)&&!DP(o))return o;o=gp(o)}return n}let r=_7(t,e);for(;r&&X6e(r)&&DP(r);)r=_7(r,e);return r&&ng(r)&&DP(r)&&!H3(r)?n:r||t5e(t)||n}const h5e=async function(t){const e=this.getOffsetParent||sne,n=this.getDimensions,r=await n(t.floating);return{reference:m5e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function g5e(t){return ac(t).direction==="rtl"}const b5e={convertOffsetParentRelativeRectToViewportRelativeRect:a5e,getDocumentElement:tu,getClippingRect:p5e,getOffsetParent:sne,getElementRects:h5e,getClientRects:s5e,getDimensions:f5e,getScale:zh,isElement:oc,isRTL:g5e};function ine(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function y5e(t,e){let n=null,r;const o=tu(t);function a(){var i;clearTimeout(r),(i=n)==null||i.disconnect(),n=null}function s(i,l){i===void 0&&(i=!1),l===void 0&&(l=1),a();const c=t.getBoundingClientRect(),{left:d,top:u,width:m,height:h}=c;if(i||e(),!m||!h)return;const y=RS(u),v=RS(o.clientWidth-(d+m)),x=RS(o.clientHeight-(u+h)),S=RS(d),C={rootMargin:-y+"px "+-v+"px "+-x+"px "+-S+"px",threshold:Di(0,hp(1,l))||1};let _=!0;function I(P){const M=P[0].intersectionRatio;if(M!==l){if(!_)return s();M?s(!1,M):r=setTimeout(()=>{s(!1,1e-7)},1e3)}M===1&&!ine(c,t.getBoundingClientRect())&&s(),_=!1}try{n=new IntersectionObserver(I,{...C,root:o.ownerDocument})}catch{n=new IntersectionObserver(I,C)}n.observe(t)}return s(!0),a}function v5e(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=V3(t),d=o||a?[...c?A0(c):[],...A0(e)]:[];d.forEach(S=>{o&&S.addEventListener("scroll",n,{passive:!0}),a&&S.addEventListener("resize",n)});const u=c&&i?y5e(c,n):null;let m=-1,h=null;s&&(h=new ResizeObserver(S=>{let[T]=S;T&&T.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=h)==null||C.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let y,v=l?Vf(t):null;l&&x();function x(){const S=Vf(t);v&&!ine(v,S)&&n(),v=S,y=requestAnimationFrame(x)}return n(),()=>{var S;d.forEach(T=>{o&&T.removeEventListener("scroll",n),a&&T.removeEventListener("resize",n)}),u==null||u(),(S=h)==null||S.disconnect(),h=null,l&&cancelAnimationFrame(y)}}const x5e=$6e,S5e=V6e,E5e=U6e,T5e=K6e,w5e=q6e,k7=z6e,C5e=G6e,A5e=(t,e,n)=>{const r=new Map,o={platform:b5e,...n},a={...o.platform,_c:r};return F6e(t,e,{...o,platform:a})};var _5e=typeof document<"u",k5e=function(){},P1=_5e?w.useLayoutEffect:k5e;function rT(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!rT(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&t.$$typeof)&&!rT(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function lne(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function I7(t,e){const n=lne(t);return Math.round(e*n)/n}function NP(t){const e=w.useRef(t);return P1(()=>{e.current=t}),e}function I5e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:s}={},transform:i=!0,whileElementsMounted:l,open:c}=t,[d,u]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,h]=w.useState(r);rT(m,r)||h(r);const[y,v]=w.useState(null),[x,S]=w.useState(null),T=w.useCallback(X=>{X!==P.current&&(P.current=X,v(X))},[]),C=w.useCallback(X=>{X!==M.current&&(M.current=X,S(X))},[]),_=a||y,I=s||x,P=w.useRef(null),M=w.useRef(null),D=w.useRef(d),F=l!=null,B=NP(l),V=NP(o),z=NP(c),H=w.useCallback(()=>{if(!P.current||!M.current)return;const X={placement:e,strategy:n,middleware:m};V.current&&(X.platform=V.current),A5e(P.current,M.current,X).then(ee=>{const $={...ee,isPositioned:z.current!==!1};j.current&&!rT(D.current,$)&&(D.current=$,Qf.flushSync(()=>{u($)}))})},[m,e,n,V,z]);P1(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,u(X=>({...X,isPositioned:!1})))},[c]);const j=w.useRef(!1);P1(()=>(j.current=!0,()=>{j.current=!1}),[]),P1(()=>{if(_&&(P.current=_),I&&(M.current=I),_&&I){if(B.current)return B.current(_,I,H);H()}},[_,I,H,B,F]);const q=w.useMemo(()=>({reference:P,floating:M,setReference:T,setFloating:C}),[T,C]),U=w.useMemo(()=>({reference:_,floating:I}),[_,I]),Y=w.useMemo(()=>{const X={position:n,left:0,top:0};if(!U.floating)return X;const ee=I7(U.floating,d.x),$=I7(U.floating,d.y);return i?{...X,transform:"translate("+ee+"px, "+$+"px)",...lne(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ee,top:$}},[n,i,U.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:H,refs:q,elements:U,floatingStyles:Y}),[d,H,q,U,Y])}const P5e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?k7({element:r.current,padding:o}).fn(n):{}:r?k7({element:r,padding:o}).fn(n):{}}}},O5e=(t,e)=>({...x5e(t),options:[t,e]}),M5e=(t,e)=>({...S5e(t),options:[t,e]}),R5e=(t,e)=>({...C5e(t),options:[t,e]}),D5e=(t,e)=>({...E5e(t),options:[t,e]}),N5e=(t,e)=>({...T5e(t),options:[t,e]}),L5e=(t,e)=>({...w5e(t),options:[t,e]}),j5e=(t,e)=>({...P5e(t),options:[t,e]});var B5e="Arrow",cne=w.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...a}=t;return g.jsx(Kt.svg,{...a,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});cne.displayName=B5e;var F5e=cne,G3="Popper",[une,Lg]=Ji(G3),[z5e,dne]=une(G3),pne=t=>{const{__scopePopper:e,children:n}=t,[r,o]=w.useState(null);return g.jsx(z5e,{scope:e,anchor:r,onAnchorChange:o,children:n})};pne.displayName=G3;var fne="PopperAnchor",mne=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,a=dne(fne,n),s=w.useRef(null),i=tr(e,s),l=w.useRef(null);return w.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||s.current,c!==l.current&&a.onAnchorChange(l.current)}),r?null:g.jsx(Kt.div,{...o,ref:i})});mne.displayName=fne;var K3="PopperContent",[U5e,q5e]=une(K3),hne=w.forwardRef((t,e)=>{var Ne,Fe,Ke,Qe,Wt,hn;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:s=0,arrowPadding:i=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:y,...v}=t,x=dne(K3,n),[S,T]=w.useState(null),C=tr(e,Yt=>T(Yt)),[_,I]=w.useState(null),P=Jte(_),M=(P==null?void 0:P.width)??0,D=(P==null?void 0:P.height)??0,F=r+(a!=="center"?"-"+a:""),B=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},V=Array.isArray(c)?c:[c],z=V.length>0,H={padding:B,boundary:V.filter($5e),altBoundary:z},{refs:j,floatingStyles:q,placement:U,isPositioned:Y,middlewareData:X}=I5e({strategy:"fixed",placement:F,whileElementsMounted:(...Yt)=>v5e(...Yt,{animationFrame:h==="always"}),elements:{reference:x.anchor},middleware:[O5e({mainAxis:o+D,alignmentAxis:s}),l&&M5e({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?R5e():void 0,...H}),l&&D5e({...H}),N5e({...H,apply:({elements:Yt,rects:Ut,availableWidth:an,availableHeight:wt})=>{const{width:qn,height:Gn}=Ut.reference,Wn=Yt.floating.style;Wn.setProperty("--radix-popper-available-width",`${an}px`),Wn.setProperty("--radix-popper-available-height",`${wt}px`),Wn.setProperty("--radix-popper-anchor-width",`${qn}px`),Wn.setProperty("--radix-popper-anchor-height",`${Gn}px`)}}),_&&j5e({element:_,padding:i}),V5e({arrowWidth:M,arrowHeight:D}),m&&L5e({strategy:"referenceHidden",...H})]}),[ee,$]=yne(U),G=Ms(y);Ku(()=>{Y&&(G==null||G())},[Y,G]);const re=(Ne=X.arrow)==null?void 0:Ne.x,K=(Fe=X.arrow)==null?void 0:Fe.y,ve=((Ke=X.arrow)==null?void 0:Ke.centerOffset)!==0,[xe,Oe]=w.useState();return Ku(()=>{S&&Oe(window.getComputedStyle(S).zIndex)},[S]),g.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:Y?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(Qe=X.transformOrigin)==null?void 0:Qe.x,(Wt=X.transformOrigin)==null?void 0:Wt.y].join(" "),...((hn=X.hide)==null?void 0:hn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(U5e,{scope:n,placedSide:ee,onArrowChange:I,arrowX:re,arrowY:K,shouldHideArrow:ve,children:g.jsx(Kt.div,{"data-side":ee,"data-align":$,...v,ref:C,style:{...v.style,animation:Y?void 0:"none"}})})})});hne.displayName=K3;var gne="PopperArrow",H5e={top:"bottom",right:"left",bottom:"top",left:"right"},bne=w.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,a=q5e(gne,r),s=H5e[a.placedSide];return g.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:g.jsx(F5e,{...o,ref:n,style:{...o.style,display:"block"}})})});bne.displayName=gne;function $5e(t){return t!==null}var V5e=t=>({name:"transformOrigin",options:t,fn(e){var x,S,T;const{placement:n,rects:r,middlewareData:o}=e,s=((x=o.arrow)==null?void 0:x.centerOffset)!==0,i=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,d]=yne(n),u={start:"0%",center:"50%",end:"100%"}[d],m=(((S=o.arrow)==null?void 0:S.x)??0)+i/2,h=(((T=o.arrow)==null?void 0:T.y)??0)+l/2;let y="",v="";return c==="bottom"?(y=s?u:`${m}px`,v=`${-l}px`):c==="top"?(y=s?u:`${m}px`,v=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,v=s?u:`${h}px`):c==="left"&&(y=`${r.floating.width+l}px`,v=s?u:`${h}px`),{data:{x:y,y:v}}}});function yne(t){const[e,n="center"]=t.split("-");return[e,n]}var gC=pne,bC=mne,W3=hne,Y3=bne,LP="rovingFocusGroup.onEntryFocus",G5e={bubbles:!1,cancelable:!0},Pv="RovingFocusGroup",[sR,vne,K5e]=iC(Pv),[W5e,jg]=Ji(Pv,[K5e]),[Y5e,X5e]=W5e(Pv),xne=w.forwardRef((t,e)=>g.jsx(sR.Provider,{scope:t.__scopeRovingFocusGroup,children:g.jsx(sR.Slot,{scope:t.__scopeRovingFocusGroup,children:g.jsx(J5e,{...t,ref:e})})}));xne.displayName=Pv;var J5e=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=t,m=w.useRef(null),h=tr(e,m),y=_v(a),[v,x]=jl({prop:s,defaultProp:i??null,onChange:l,caller:Pv}),[S,T]=w.useState(!1),C=Ms(c),_=vne(n),I=w.useRef(!1),[P,M]=w.useState(0);return w.useEffect(()=>{const D=m.current;if(D)return D.addEventListener(LP,C),()=>D.removeEventListener(LP,C)},[C]),g.jsx(Y5e,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:v,onItemFocus:w.useCallback(D=>x(D),[x]),onItemShiftTab:w.useCallback(()=>T(!0),[]),onFocusableItemAdd:w.useCallback(()=>M(D=>D+1),[]),onFocusableItemRemove:w.useCallback(()=>M(D=>D-1),[]),children:g.jsx(Kt.div,{tabIndex:S||P===0?-1:0,"data-orientation":r,...u,ref:h,style:{outline:"none",...t.style},onMouseDown:rt(t.onMouseDown,()=>{I.current=!0}),onFocus:rt(t.onFocus,D=>{const F=!I.current;if(D.target===D.currentTarget&&F&&!S){const B=new CustomEvent(LP,G5e);if(D.currentTarget.dispatchEvent(B),!B.defaultPrevented){const V=_().filter(U=>U.focusable),z=V.find(U=>U.active),H=V.find(U=>U.id===v),q=[z,H,...V].filter(Boolean).map(U=>U.ref.current);Tne(q,d)}}I.current=!1}),onBlur:rt(t.onBlur,()=>T(!1))})})}),Sne="RovingFocusGroupItem",Ene=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,children:s,...i}=t,l=qc(),c=a||l,d=X5e(Sne,n),u=d.currentTabStopId===c,m=vne(n),{onFocusableItemAdd:h,onFocusableItemRemove:y,currentTabStopId:v}=d;return w.useEffect(()=>{if(r)return h(),()=>y()},[r,h,y]),g.jsx(sR.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:g.jsx(Kt.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...i,ref:e,onMouseDown:rt(t.onMouseDown,x=>{r?d.onItemFocus(c):x.preventDefault()}),onFocus:rt(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:rt(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const S=eBe(x,d.orientation,d.dir);if(S!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let C=m().filter(_=>_.focusable).map(_=>_.ref.current);if(S==="last")C.reverse();else if(S==="prev"||S==="next"){S==="prev"&&C.reverse();const _=C.indexOf(x.currentTarget);C=d.loop?tBe(C,_+1):C.slice(_+1)}setTimeout(()=>Tne(C))}}),children:typeof s=="function"?s({isCurrentTabStop:u,hasTabStop:v!=null}):s})})});Ene.displayName=Sne;var Q5e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Z5e(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function eBe(t,e,n){const r=Z5e(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Q5e[r]}function Tne(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function tBe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var X3=xne,yC=Ene,iR=["Enter"," "],nBe=["ArrowDown","PageUp","Home"],wne=["ArrowUp","PageDown","End"],rBe=[...nBe,...wne],oBe={ltr:[...iR,"ArrowRight"],rtl:[...iR,"ArrowLeft"]},aBe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ov="Menu",[_0,sBe,iBe]=iC(Ov),[dm,vC]=Ji(Ov,[iBe,Lg,jg]),Mv=Lg(),Cne=jg(),[Ane,Bp]=dm(Ov),[lBe,Rv]=dm(Ov),_ne=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:a,modal:s=!0}=t,i=Mv(e),[l,c]=w.useState(null),d=w.useRef(!1),u=Ms(a),m=_v(o);return w.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),g.jsx(gC,{...i,children:g.jsx(Ane,{scope:e,open:n,onOpenChange:u,content:l,onContentChange:c,children:g.jsx(lBe,{scope:e,onClose:w.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:d,dir:m,modal:s,children:r})})})};_ne.displayName=Ov;var cBe="MenuAnchor",J3=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Mv(n);return g.jsx(bC,{...o,...r,ref:e})});J3.displayName=cBe;var Q3="MenuPortal",[uBe,kne]=dm(Q3,{forceMount:void 0}),Ine=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,a=Bp(Q3,e);return g.jsx(uBe,{scope:e,forceMount:n,children:g.jsx(Bl,{present:n||a.open,children:g.jsx(kv,{asChild:!0,container:o,children:r})})})};Ine.displayName=Q3;var Rl="MenuContent",[dBe,Z3]=dm(Rl),Pne=w.forwardRef((t,e)=>{const n=kne(Rl,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,a=Bp(Rl,t.__scopeMenu),s=Rv(Rl,t.__scopeMenu);return g.jsx(_0.Provider,{scope:t.__scopeMenu,children:g.jsx(Bl,{present:r||a.open,children:g.jsx(_0.Slot,{scope:t.__scopeMenu,children:s.modal?g.jsx(pBe,{...o,ref:e}):g.jsx(fBe,{...o,ref:e})})})})}),pBe=w.forwardRef((t,e)=>{const n=Bp(Rl,t.__scopeMenu),r=w.useRef(null),o=tr(e,r);return w.useEffect(()=>{const a=r.current;if(a)return L3(a)},[]),g.jsx(eL,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:rt(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),fBe=w.forwardRef((t,e)=>{const n=Bp(Rl,t.__scopeMenu);return g.jsx(eL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),mBe=Hf("MenuContent.ScrollLock"),eL=w.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:m,onDismiss:h,disableOutsideScroll:y,...v}=t,x=Bp(Rl,n),S=Rv(Rl,n),T=Mv(n),C=Cne(n),_=sBe(n),[I,P]=w.useState(null),M=w.useRef(null),D=tr(e,M,x.onContentChange),F=w.useRef(0),B=w.useRef(""),V=w.useRef(0),z=w.useRef(null),H=w.useRef("right"),j=w.useRef(0),q=y?uC:w.Fragment,U=y?{as:mBe,allowPinchZoom:!0}:void 0,Y=ee=>{var Ne,Fe;const $=B.current+ee,G=_().filter(Ke=>!Ke.disabled),re=document.activeElement,K=(Ne=G.find(Ke=>Ke.ref.current===re))==null?void 0:Ne.textValue,ve=G.map(Ke=>Ke.textValue),xe=ABe(ve,$,K),Oe=(Fe=G.find(Ke=>Ke.textValue===xe))==null?void 0:Fe.ref.current;(function Ke(Qe){B.current=Qe,window.clearTimeout(F.current),Qe!==""&&(F.current=window.setTimeout(()=>Ke(""),1e3))})($),Oe&&setTimeout(()=>Oe.focus())};w.useEffect(()=>()=>window.clearTimeout(F.current),[]),N3();const X=w.useCallback(ee=>{var G,re;return H.current===((G=z.current)==null?void 0:G.side)&&kBe(ee,(re=z.current)==null?void 0:re.area)},[]);return g.jsx(dBe,{scope:n,searchRef:B,onItemEnter:w.useCallback(ee=>{X(ee)&&ee.preventDefault()},[X]),onItemLeave:w.useCallback(ee=>{var $;X(ee)||(($=M.current)==null||$.focus(),P(null))},[X]),onTriggerLeave:w.useCallback(ee=>{X(ee)&&ee.preventDefault()},[X]),pointerGraceTimerRef:V,onPointerGraceIntentChange:w.useCallback(ee=>{z.current=ee},[]),children:g.jsx(q,{...U,children:g.jsx(lC,{asChild:!0,trapped:o,onMountAutoFocus:rt(a,ee=>{var $;ee.preventDefault(),($=M.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:g.jsx(Rg,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:m,onDismiss:h,children:g.jsx(X3,{asChild:!0,...C,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:I,onCurrentTabStopIdChange:P,onEntryFocus:rt(l,ee=>{S.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(W3,{role:"menu","aria-orientation":"vertical","data-state":Kne(x.open),"data-radix-menu-content":"",dir:S.dir,...T,...v,ref:D,style:{outline:"none",...v.style},onKeyDown:rt(v.onKeyDown,ee=>{const G=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,re=ee.ctrlKey||ee.altKey||ee.metaKey,K=ee.key.length===1;G&&(ee.key==="Tab"&&ee.preventDefault(),!re&&K&&Y(ee.key));const ve=M.current;if(ee.target!==ve||!rBe.includes(ee.key))return;ee.preventDefault();const Oe=_().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);wne.includes(ee.key)&&Oe.reverse(),wBe(Oe)}),onBlur:rt(t.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(F.current),B.current="")}),onPointerMove:rt(t.onPointerMove,k0(ee=>{const $=ee.target,G=j.current!==ee.clientX;if(ee.currentTarget.contains($)&&G){const re=ee.clientX>j.current?"right":"left";H.current=re,j.current=ee.clientX}}))})})})})})})});Pne.displayName=Rl;var hBe="MenuGroup",tL=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.jsx(Kt.div,{role:"group",...r,ref:e})});tL.displayName=hBe;var gBe="MenuLabel",One=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.jsx(Kt.div,{...r,ref:e})});One.displayName=gBe;var oT="MenuItem",P7="menu.itemSelect",xC=w.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,a=w.useRef(null),s=Rv(oT,t.__scopeMenu),i=Z3(oT,t.__scopeMenu),l=tr(e,a),c=w.useRef(!1),d=()=>{const u=a.current;if(!n&&u){const m=new CustomEvent(P7,{bubbles:!0,cancelable:!0});u.addEventListener(P7,h=>r==null?void 0:r(h),{once:!0}),D3(u,m),m.defaultPrevented?c.current=!1:s.onClose()}};return g.jsx(Mne,{...o,ref:l,disabled:n,onClick:rt(t.onClick,d),onPointerDown:u=>{var m;(m=t.onPointerDown)==null||m.call(t,u),c.current=!0},onPointerUp:rt(t.onPointerUp,u=>{var m;c.current||(m=u.currentTarget)==null||m.click()}),onKeyDown:rt(t.onKeyDown,u=>{const m=i.searchRef.current!=="";n||m&&u.key===" "||iR.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});xC.displayName=oT;var Mne=w.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=t,s=Z3(oT,n),i=Cne(n),l=w.useRef(null),c=tr(e,l),[d,u]=w.useState(!1),[m,h]=w.useState("");return w.useEffect(()=>{const y=l.current;y&&h((y.textContent??"").trim())},[a.children]),g.jsx(_0.ItemSlot,{scope:n,disabled:r,textValue:o??m,children:g.jsx(yC,{asChild:!0,...i,focusable:!r,children:g.jsx(Kt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:c,onPointerMove:rt(t.onPointerMove,k0(y=>{r?s.onItemLeave(y):(s.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:rt(t.onPointerLeave,k0(y=>s.onItemLeave(y))),onFocus:rt(t.onFocus,()=>u(!0)),onBlur:rt(t.onBlur,()=>u(!1))})})})}),bBe="MenuCheckboxItem",Rne=w.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return g.jsx(Bne,{scope:t.__scopeMenu,checked:n,children:g.jsx(xC,{role:"menuitemcheckbox","aria-checked":aT(n)?"mixed":n,...o,ref:e,"data-state":oL(n),onSelect:rt(o.onSelect,()=>r==null?void 0:r(aT(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Rne.displayName=bBe;var Dne="MenuRadioGroup",[yBe,vBe]=dm(Dne,{value:void 0,onValueChange:()=>{}}),Nne=w.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,a=Ms(r);return g.jsx(yBe,{scope:t.__scopeMenu,value:n,onValueChange:a,children:g.jsx(tL,{...o,ref:e})})});Nne.displayName=Dne;var Lne="MenuRadioItem",jne=w.forwardRef((t,e)=>{const{value:n,...r}=t,o=vBe(Lne,t.__scopeMenu),a=n===o.value;return g.jsx(Bne,{scope:t.__scopeMenu,checked:a,children:g.jsx(xC,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":oL(a),onSelect:rt(r.onSelect,()=>{var s;return(s=o.onValueChange)==null?void 0:s.call(o,n)},{checkForDefaultPrevented:!1})})})});jne.displayName=Lne;var nL="MenuItemIndicator",[Bne,xBe]=dm(nL,{checked:!1}),Fne=w.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,a=xBe(nL,n);return g.jsx(Bl,{present:r||aT(a.checked)||a.checked===!0,children:g.jsx(Kt.span,{...o,ref:e,"data-state":oL(a.checked)})})});Fne.displayName=nL;var SBe="MenuSeparator",zne=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.jsx(Kt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});zne.displayName=SBe;var EBe="MenuArrow",Une=w.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Mv(n);return g.jsx(Y3,{...o,...r,ref:e})});Une.displayName=EBe;var rL="MenuSub",[TBe,qne]=dm(rL),Hne=t=>{const{__scopeMenu:e,children:n,open:r=!1,onOpenChange:o}=t,a=Bp(rL,e),s=Mv(e),[i,l]=w.useState(null),[c,d]=w.useState(null),u=Ms(o);return w.useEffect(()=>(a.open===!1&&u(!1),()=>u(!1)),[a.open,u]),g.jsx(gC,{...s,children:g.jsx(Ane,{scope:e,open:r,onOpenChange:u,content:c,onContentChange:d,children:g.jsx(TBe,{scope:e,contentId:qc(),triggerId:qc(),trigger:i,onTriggerChange:l,children:n})})})};Hne.displayName=rL;var my="MenuSubTrigger",$ne=w.forwardRef((t,e)=>{const n=Bp(my,t.__scopeMenu),r=Rv(my,t.__scopeMenu),o=qne(my,t.__scopeMenu),a=Z3(my,t.__scopeMenu),s=w.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:l}=a,c={__scopeMenu:t.__scopeMenu},d=w.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return w.useEffect(()=>d,[d]),w.useEffect(()=>{const u=i.current;return()=>{window.clearTimeout(u),l(null)}},[i,l]),g.jsx(J3,{asChild:!0,...c,children:g.jsx(Mne,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Kne(n.open),...t,ref:aC(e,o.onTriggerChange),onClick:u=>{var m;(m=t.onClick)==null||m.call(t,u),!(t.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:rt(t.onPointerMove,k0(u=>{a.onItemEnter(u),!u.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(a.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:rt(t.onPointerLeave,k0(u=>{var h,y;d();const m=(h=n.content)==null?void 0:h.getBoundingClientRect();if(m){const v=(y=n.content)==null?void 0:y.dataset.side,x=v==="right",S=x?-5:5,T=m[x?"left":"right"],C=m[x?"right":"left"];a.onPointerGraceIntentChange({area:[{x:u.clientX+S,y:u.clientY},{x:T,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:T,y:m.bottom}],side:v}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(u),u.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:rt(t.onKeyDown,u=>{var h;const m=a.searchRef.current!=="";t.disabled||m&&u.key===" "||oBe[r.dir].includes(u.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),u.preventDefault())})})})});$ne.displayName=my;var Vne="MenuSubContent",Gne=w.forwardRef((t,e)=>{const n=kne(Rl,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,a=Bp(Rl,t.__scopeMenu),s=Rv(Rl,t.__scopeMenu),i=qne(Vne,t.__scopeMenu),l=w.useRef(null),c=tr(e,l);return g.jsx(_0.Provider,{scope:t.__scopeMenu,children:g.jsx(Bl,{present:r||a.open,children:g.jsx(_0.Slot,{scope:t.__scopeMenu,children:g.jsx(eL,{id:i.contentId,"aria-labelledby":i.triggerId,...o,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var u;s.isUsingKeyboardRef.current&&((u=l.current)==null||u.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:rt(t.onFocusOutside,d=>{d.target!==i.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:rt(t.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:rt(t.onKeyDown,d=>{var h;const u=d.currentTarget.contains(d.target),m=aBe[s.dir].includes(d.key);u&&m&&(a.onOpenChange(!1),(h=i.trigger)==null||h.focus(),d.preventDefault())})})})})})});Gne.displayName=Vne;function Kne(t){return t?"open":"closed"}function aT(t){return t==="indeterminate"}function oL(t){return aT(t)?"indeterminate":t?"checked":"unchecked"}function wBe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function CBe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function ABe(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let s=CBe(t,Math.max(a,0));o.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function _Be(t,e){const{x:n,y:r}=t;let o=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const i=e[a],l=e[s],c=i.x,d=i.y,u=l.x,m=l.y;d>r!=m>r&&n<(u-c)*(r-d)/(m-d)+c&&(o=!o)}return o}function kBe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return _Be(n,e)}function k0(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Wne=_ne,Yne=J3,Xne=Ine,Jne=Pne,Qne=tL,Zne=One,ere=xC,tre=Rne,nre=Nne,rre=jne,ore=Fne,are=zne,sre=Une,ire=Hne,lre=$ne,cre=Gne,aL="ContextMenu",[IBe]=Ji(aL,[vC]),us=vC(),[PBe,ure]=IBe(aL),dre=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:o,modal:a=!0}=t,[s,i]=w.useState(!1),l=us(e),c=Ms(r),d=w.useCallback(u=>{i(u),c(u)},[c]);return g.jsx(PBe,{scope:e,open:s,onOpenChange:d,modal:a,children:g.jsx(Wne,{...l,dir:o,open:s,onOpenChange:d,modal:a,children:n})})};dre.displayName=aL;var pre="ContextMenuTrigger",fre=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=t,a=ure(pre,n),s=us(n),i=w.useRef({x:0,y:0}),l=w.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...i.current})}),c=w.useRef(0),d=w.useCallback(()=>window.clearTimeout(c.current),[]),u=m=>{i.current={x:m.clientX,y:m.clientY},a.onOpenChange(!0)};return w.useEffect(()=>d,[d]),w.useEffect(()=>void(r&&d()),[r,d]),g.jsxs(g.Fragment,{children:[g.jsx(Yne,{...s,virtualRef:l}),g.jsx(Kt.span,{"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:rt(t.onContextMenu,m=>{d(),u(m),m.preventDefault()}),onPointerDown:r?t.onPointerDown:rt(t.onPointerDown,DS(m=>{d(),c.current=window.setTimeout(()=>u(m),700)})),onPointerMove:r?t.onPointerMove:rt(t.onPointerMove,DS(d)),onPointerCancel:r?t.onPointerCancel:rt(t.onPointerCancel,DS(d)),onPointerUp:r?t.onPointerUp:rt(t.onPointerUp,DS(d))})]})});fre.displayName=pre;var OBe="ContextMenuPortal",sL=t=>{const{__scopeContextMenu:e,...n}=t,r=us(e);return g.jsx(Xne,{...r,...n})};sL.displayName=OBe;var mre="ContextMenuContent",hre=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=ure(mre,n),a=us(n),s=w.useRef(!1);return g.jsx(Jne,{...a,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:i=>{var l;(l=t.onCloseAutoFocus)==null||l.call(t,i),!i.defaultPrevented&&s.current&&i.preventDefault(),s.current=!1},onInteractOutside:i=>{var l;(l=t.onInteractOutside)==null||l.call(t,i),!i.defaultPrevented&&!o.modal&&(s.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hre.displayName=mre;var MBe="ContextMenuGroup",RBe=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(Qne,{...o,...r,ref:e})});RBe.displayName=MBe;var DBe="ContextMenuLabel",NBe=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(Zne,{...o,...r,ref:e})});NBe.displayName=DBe;var LBe="ContextMenuItem",gre=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(ere,{...o,...r,ref:e})});gre.displayName=LBe;var jBe="ContextMenuCheckboxItem",bre=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(tre,{...o,...r,ref:e})});bre.displayName=jBe;var BBe="ContextMenuRadioGroup",FBe=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(nre,{...o,...r,ref:e})});FBe.displayName=BBe;var zBe="ContextMenuRadioItem",UBe=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(rre,{...o,...r,ref:e})});UBe.displayName=zBe;var qBe="ContextMenuItemIndicator",HBe=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(ore,{...o,...r,ref:e})});HBe.displayName=qBe;var $Be="ContextMenuSeparator",VBe=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(are,{...o,...r,ref:e})});VBe.displayName=$Be;var GBe="ContextMenuArrow",KBe=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(sre,{...o,...r,ref:e})});KBe.displayName=GBe;var yre="ContextMenuSub",vre=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,open:o,defaultOpen:a}=t,s=us(e),[i,l]=jl({prop:o,defaultProp:a??!1,onChange:r,caller:yre});return g.jsx(ire,{...s,open:i,onOpenChange:l,children:n})};vre.displayName=yre;var WBe="ContextMenuSubTrigger",xre=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(lre,{...o,...r,ref:e})});xre.displayName=WBe;var YBe="ContextMenuSubContent",Sre=w.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=us(n);return g.jsx(cre,{...o,...r,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Sre.displayName=YBe;function DS(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var XBe=dre,JBe=fre,QBe=sL,ZBe=hre,eFe=gre,tFe=bre,SC="DropdownMenu",[nFe]=Ji(SC,[vC]),ds=vC(),[rFe,Ere]=nFe(SC),Tre=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:s,modal:i=!0}=t,l=ds(e),c=w.useRef(null),[d,u]=jl({prop:o,defaultProp:a??!1,onChange:s,caller:SC});return g.jsx(rFe,{scope:e,triggerId:qc(),triggerRef:c,contentId:qc(),open:d,onOpenChange:u,onOpenToggle:w.useCallback(()=>u(m=>!m),[u]),modal:i,children:g.jsx(Wne,{...l,open:d,onOpenChange:u,dir:r,modal:i,children:n})})};Tre.displayName=SC;var wre="DropdownMenuTrigger",Cre=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,a=Ere(wre,n),s=ds(n);return g.jsx(Yne,{asChild:!0,...s,children:g.jsx(Kt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:aC(e,a.triggerRef),onPointerDown:rt(t.onPointerDown,i=>{!r&&i.button===0&&i.ctrlKey===!1&&(a.onOpenToggle(),a.open||i.preventDefault())}),onKeyDown:rt(t.onKeyDown,i=>{r||(["Enter"," "].includes(i.key)&&a.onOpenToggle(),i.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});Cre.displayName=wre;var oFe="DropdownMenuPortal",Are=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ds(e);return g.jsx(Xne,{...r,...n})};Are.displayName=oFe;var _re="DropdownMenuContent",kre=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ere(_re,n),a=ds(n),s=w.useRef(!1);return g.jsx(Jne,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:e,onCloseAutoFocus:rt(t.onCloseAutoFocus,i=>{var l;s.current||(l=o.triggerRef.current)==null||l.focus(),s.current=!1,i.preventDefault()}),onInteractOutside:rt(t.onInteractOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!o.modal||d)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kre.displayName=_re;var aFe="DropdownMenuGroup",sFe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(Qne,{...o,...r,ref:e})});sFe.displayName=aFe;var iFe="DropdownMenuLabel",lFe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(Zne,{...o,...r,ref:e})});lFe.displayName=iFe;var cFe="DropdownMenuItem",Ire=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(ere,{...o,...r,ref:e})});Ire.displayName=cFe;var uFe="DropdownMenuCheckboxItem",Pre=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(tre,{...o,...r,ref:e})});Pre.displayName=uFe;var dFe="DropdownMenuRadioGroup",pFe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(nre,{...o,...r,ref:e})});pFe.displayName=dFe;var fFe="DropdownMenuRadioItem",mFe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(rre,{...o,...r,ref:e})});mFe.displayName=fFe;var hFe="DropdownMenuItemIndicator",Ore=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(ore,{...o,...r,ref:e})});Ore.displayName=hFe;var gFe="DropdownMenuSeparator",bFe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(are,{...o,...r,ref:e})});bFe.displayName=gFe;var yFe="DropdownMenuArrow",vFe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(sre,{...o,...r,ref:e})});vFe.displayName=yFe;var xFe=t=>{const{__scopeDropdownMenu:e,children:n,open:r,onOpenChange:o,defaultOpen:a}=t,s=ds(e),[i,l]=jl({prop:r,defaultProp:a??!1,onChange:o,caller:"DropdownMenuSub"});return g.jsx(ire,{...s,open:i,onOpenChange:l,children:n})},SFe="DropdownMenuSubTrigger",Mre=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(lre,{...o,...r,ref:e})});Mre.displayName=SFe;var EFe="DropdownMenuSubContent",Rre=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ds(n);return g.jsx(cre,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Rre.displayName=EFe;var iL=Tre,lL=Cre,EC=Are,cL=kre,TFe=Ire,Dre=Pre,wFe=Ore,CFe=xFe,AFe=Mre,_Fe=Rre;function Nre(t,[e,n]){return Math.min(n,Math.max(e,t))}var TC="Popover",[Lre]=Ji(TC,[Lg]),Dv=Lg(),[kFe,Fp]=Lre(TC),jre=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:s=!1}=t,i=Dv(e),l=w.useRef(null),[c,d]=w.useState(!1),[u,m]=jl({prop:r,defaultProp:o??!1,onChange:a,caller:TC});return g.jsx(gC,{...i,children:g.jsx(kFe,{scope:e,contentId:qc(),triggerRef:l,open:u,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(h=>!h),[m]),hasCustomAnchor:c,onCustomAnchorAdd:w.useCallback(()=>d(!0),[]),onCustomAnchorRemove:w.useCallback(()=>d(!1),[]),modal:s,children:n})})};jre.displayName=TC;var Bre="PopoverAnchor",IFe=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Fp(Bre,n),a=Dv(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:i}=o;return w.useEffect(()=>(s(),()=>i()),[s,i]),g.jsx(bC,{...a,...r,ref:e})});IFe.displayName=Bre;var Fre="PopoverTrigger",zre=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Fp(Fre,n),a=Dv(n),s=tr(e,o.triggerRef),i=g.jsx(Kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Vre(o.open),...r,ref:s,onClick:rt(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?i:g.jsx(bC,{asChild:!0,...a,children:i})});zre.displayName=Fre;var uL="PopoverPortal",[PFe,OFe]=Lre(uL,{forceMount:void 0}),Ure=t=>{const{__scopePopover:e,forceMount:n,children:r,container:o}=t,a=Fp(uL,e);return g.jsx(PFe,{scope:e,forceMount:n,children:g.jsx(Bl,{present:n||a.open,children:g.jsx(kv,{asChild:!0,container:o,children:r})})})};Ure.displayName=uL;var rg="PopoverContent",qre=w.forwardRef((t,e)=>{const n=OFe(rg,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,a=Fp(rg,t.__scopePopover);return g.jsx(Bl,{present:r||a.open,children:a.modal?g.jsx(RFe,{...o,ref:e}):g.jsx(DFe,{...o,ref:e})})});qre.displayName=rg;var MFe=Hf("PopoverContent.RemoveScroll"),RFe=w.forwardRef((t,e)=>{const n=Fp(rg,t.__scopePopover),r=w.useRef(null),o=tr(e,r),a=w.useRef(!1);return w.useEffect(()=>{const s=r.current;if(s)return L3(s)},[]),g.jsx(uC,{as:MFe,allowPinchZoom:!0,children:g.jsx(Hre,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rt(t.onCloseAutoFocus,s=>{var i;s.preventDefault(),a.current||(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:rt(t.onPointerDownOutside,s=>{const i=s.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0,c=i.button===2||l;a.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:rt(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),DFe=w.forwardRef((t,e)=>{const n=Fp(rg,t.__scopePopover),r=w.useRef(!1),o=w.useRef(!1);return g.jsx(Hre,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,i;(s=t.onCloseAutoFocus)==null||s.call(t,a),a.defaultPrevented||(r.current||(i=n.triggerRef.current)==null||i.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=a.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),Hre=w.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=t,m=Fp(rg,n),h=Dv(n);return N3(),g.jsx(lC,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:g.jsx(Rg,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:g.jsx(W3,{"data-state":Vre(m.open),role:"dialog",id:m.contentId,...h,...u,ref:e,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$re="PopoverClose",NFe=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Fp($re,n);return g.jsx(Kt.button,{type:"button",...r,ref:e,onClick:rt(t.onClick,()=>o.onOpenChange(!1))})});NFe.displayName=$re;var LFe="PopoverArrow",jFe=w.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Dv(n);return g.jsx(Y3,{...o,...r,ref:e})});jFe.displayName=LFe;function Vre(t){return t?"open":"closed"}var dL=jre,pL=zre,fL=Ure,mL=qre,BFe="Separator",O7="horizontal",FFe=["horizontal","vertical"],Gre=w.forwardRef((t,e)=>{const{decorative:n,orientation:r=O7,...o}=t,a=zFe(r)?r:O7,i=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return g.jsx(Kt.div,{"data-orientation":a,...i,...o,ref:e})});Gre.displayName=BFe;function zFe(t){return FFe.includes(t)}var UFe=Gre,Kre=["PageUp","PageDown"],Wre=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Yre={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Bg="Slider",[lR,qFe,HFe]=iC(Bg),[Xre]=Ji(Bg,[HFe]),[$Fe,wC]=Xre(Bg),Jre=w.forwardRef((t,e)=>{const{name:n,min:r=0,max:o=100,step:a=1,orientation:s="horizontal",disabled:i=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:u=()=>{},onValueCommit:m=()=>{},inverted:h=!1,form:y,...v}=t,x=w.useRef(new Set),S=w.useRef(0),C=s==="horizontal"?VFe:GFe,[_=[],I]=jl({prop:d,defaultProp:c,onChange:V=>{var H;(H=[...x.current][S.current])==null||H.focus(),u(V)}}),P=w.useRef(_);function M(V){const z=JFe(_,V);B(V,z)}function D(V){B(V,S.current)}function F(){const V=P.current[S.current];_[S.current]!==V&&m(_)}function B(V,z,{commit:H}={commit:!1}){const j=tze(a),q=nze(Math.round((V-r)/a)*a+r,j),U=Nre(q,[r,o]);I((Y=[])=>{const X=YFe(Y,U,z);if(eze(X,l*a)){S.current=X.indexOf(U);const ee=String(X)!==String(Y);return ee&&H&&m(X),ee?X:Y}else return Y})}return g.jsx($Fe,{scope:t.__scopeSlider,name:n,disabled:i,min:r,max:o,valueIndexToChangeRef:S,thumbs:x.current,values:_,orientation:s,form:y,children:g.jsx(lR.Provider,{scope:t.__scopeSlider,children:g.jsx(lR.Slot,{scope:t.__scopeSlider,children:g.jsx(C,{"aria-disabled":i,"data-disabled":i?"":void 0,...v,ref:e,onPointerDown:rt(v.onPointerDown,()=>{i||(P.current=_)}),min:r,max:o,inverted:h,onSlideStart:i?void 0:M,onSlideMove:i?void 0:D,onSlideEnd:i?void 0:F,onHomeKeyDown:()=>!i&&B(r,0,{commit:!0}),onEndKeyDown:()=>!i&&B(o,_.length-1,{commit:!0}),onStepKeyDown:({event:V,direction:z})=>{if(!i){const q=Kre.includes(V.key)||V.shiftKey&&Wre.includes(V.key)?10:1,U=S.current,Y=_[U],X=a*q*z;B(Y+X,U,{commit:!0})}}})})})})});Jre.displayName=Bg;var[Qre,Zre]=Xre(Bg,{startEdge:"left",endEdge:"right",size:"width",direction:1}),VFe=w.forwardRef((t,e)=>{const{min:n,max:r,dir:o,inverted:a,onSlideStart:s,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...d}=t,[u,m]=w.useState(null),h=tr(e,C=>m(C)),y=w.useRef(void 0),v=_v(o),x=v==="ltr",S=x&&!a||!x&&a;function T(C){const _=y.current||u.getBoundingClientRect(),I=[0,_.width],M=hL(I,S?[n,r]:[r,n]);return y.current=_,M(C-_.left)}return g.jsx(Qre,{scope:t.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:g.jsx(eoe,{dir:v,"data-orientation":"horizontal",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const _=T(C.clientX);s==null||s(_)},onSlideMove:C=>{const _=T(C.clientX);i==null||i(_)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:C=>{const I=Yre[S?"from-left":"from-right"].includes(C.key);c==null||c({event:C,direction:I?-1:1})}})})}),GFe=w.forwardRef((t,e)=>{const{min:n,max:r,inverted:o,onSlideStart:a,onSlideMove:s,onSlideEnd:i,onStepKeyDown:l,...c}=t,d=w.useRef(null),u=tr(e,d),m=w.useRef(void 0),h=!o;function y(v){const x=m.current||d.current.getBoundingClientRect(),S=[0,x.height],C=hL(S,h?[r,n]:[n,r]);return m.current=x,C(v-x.top)}return g.jsx(Qre,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:g.jsx(eoe,{"data-orientation":"vertical",...c,ref:u,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const x=y(v.clientY);a==null||a(x)},onSlideMove:v=>{const x=y(v.clientY);s==null||s(x)},onSlideEnd:()=>{m.current=void 0,i==null||i()},onStepKeyDown:v=>{const S=Yre[h?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:S?-1:1})}})})}),eoe=w.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:s,onEndKeyDown:i,onStepKeyDown:l,...c}=t,d=wC(Bg,n);return g.jsx(Kt.span,{...c,ref:e,onKeyDown:rt(t.onKeyDown,u=>{u.key==="Home"?(s(u),u.preventDefault()):u.key==="End"?(i(u),u.preventDefault()):Kre.concat(Wre).includes(u.key)&&(l(u),u.preventDefault())}),onPointerDown:rt(t.onPointerDown,u=>{const m=u.target;m.setPointerCapture(u.pointerId),u.preventDefault(),d.thumbs.has(m)?m.focus():r(u)}),onPointerMove:rt(t.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&o(u)}),onPointerUp:rt(t.onPointerUp,u=>{const m=u.target;m.hasPointerCapture(u.pointerId)&&(m.releasePointerCapture(u.pointerId),a(u))})})}),toe="SliderTrack",noe=w.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,o=wC(toe,n);return g.jsx(Kt.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:e})});noe.displayName=toe;var cR="SliderRange",roe=w.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,o=wC(cR,n),a=Zre(cR,n),s=w.useRef(null),i=tr(e,s),l=o.values.length,c=o.values.map(m=>soe(m,o.min,o.max)),d=l>1?Math.min(...c):0,u=100-Math.max(...c);return g.jsx(Kt.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:i,style:{...t.style,[a.startEdge]:d+"%",[a.endEdge]:u+"%"}})});roe.displayName=cR;var uR="SliderThumb",ooe=w.forwardRef((t,e)=>{const n=qFe(t.__scopeSlider),[r,o]=w.useState(null),a=tr(e,i=>o(i)),s=w.useMemo(()=>r?n().findIndex(i=>i.ref.current===r):-1,[n,r]);return g.jsx(KFe,{...t,ref:a,index:s})}),KFe=w.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:o,...a}=t,s=wC(uR,n),i=Zre(uR,n),[l,c]=w.useState(null),d=tr(e,T=>c(T)),u=l?s.form||!!l.closest("form"):!0,m=Jte(l),h=s.values[r],y=h===void 0?0:soe(h,s.min,s.max),v=XFe(r,s.values.length),x=m==null?void 0:m[i.size],S=x?QFe(x,y,i.direction):0;return w.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${y}% + ${S}px)`},children:[g.jsx(lR.ItemSlot,{scope:t.__scopeSlider,children:g.jsx(Kt.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":s.min,"aria-valuenow":h,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...a,ref:d,style:h===void 0?{display:"none"}:t.style,onFocus:rt(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),u&&g.jsx(aoe,{name:o??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:h},r)]})});ooe.displayName=uR;var WFe="RadioBubbleInput",aoe=w.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const o=w.useRef(null),a=tr(o,r),s=_6e(e);return w.useEffect(()=>{const i=o.current;if(!i)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&d){const u=new Event("input",{bubbles:!0});d.call(i,e),i.dispatchEvent(u)}},[s,e]),g.jsx(Kt.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});aoe.displayName=WFe;function YFe(t=[],e,n){const r=[...t];return r[n]=e,r.sort((o,a)=>o-a)}function soe(t,e,n){const a=100/(n-e)*(t-e);return Nre(a,[0,100])}function XFe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function JFe(t,e){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-e)),r=Math.min(...n);return n.indexOf(r)}function QFe(t,e,n){const r=t/2,a=hL([0,50],[0,r]);return(r-a(e)*n)*n}function ZFe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function eze(t,e){if(e>0){const n=ZFe(t);return Math.min(...n)>=e}return!0}function hL(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function tze(t){return(String(t).split(".")[1]||"").length}function nze(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var rze=Jre,oze=noe,aze=roe,sze=ooe,gL="ToastProvider",[bL,ize,lze]=iC("Toast"),[ioe]=Ji("Toast",[lze]),[cze,CC]=ioe(gL),loe=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:a=50,children:s}=t,[i,l]=w.useState(null),[c,d]=w.useState(0),u=w.useRef(!1),m=w.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${gL}\`. Expected non-empty \`string\`.`),g.jsx(bL.Provider,{scope:e,children:g.jsx(cze,{scope:e,label:n,duration:r,swipeDirection:o,swipeThreshold:a,toastCount:c,viewport:i,onViewportChange:l,onToastAdd:w.useCallback(()=>d(h=>h+1),[]),onToastRemove:w.useCallback(()=>d(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:s})})};loe.displayName=gL;var coe="ToastViewport",uze=["F8"],dR="toast.viewportPause",pR="toast.viewportResume",uoe=w.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=uze,label:o="Notifications ({hotkey})",...a}=t,s=CC(coe,n),i=ize(n),l=w.useRef(null),c=w.useRef(null),d=w.useRef(null),u=w.useRef(null),m=tr(e,u,s.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=s.toastCount>0;w.useEffect(()=>{const x=S=>{var C;r.length!==0&&r.every(_=>S[_]||S.code===_)&&((C=u.current)==null||C.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),w.useEffect(()=>{const x=l.current,S=u.current;if(y&&x&&S){const T=()=>{if(!s.isClosePausedRef.current){const P=new CustomEvent(dR);S.dispatchEvent(P),s.isClosePausedRef.current=!0}},C=()=>{if(s.isClosePausedRef.current){const P=new CustomEvent(pR);S.dispatchEvent(P),s.isClosePausedRef.current=!1}},_=P=>{!x.contains(P.relatedTarget)&&C()},I=()=>{x.contains(document.activeElement)||C()};return x.addEventListener("focusin",T),x.addEventListener("focusout",_),x.addEventListener("pointermove",T),x.addEventListener("pointerleave",I),window.addEventListener("blur",T),window.addEventListener("focus",C),()=>{x.removeEventListener("focusin",T),x.removeEventListener("focusout",_),x.removeEventListener("pointermove",T),x.removeEventListener("pointerleave",I),window.removeEventListener("blur",T),window.removeEventListener("focus",C)}}},[y,s.isClosePausedRef]);const v=w.useCallback(({tabbingDirection:x})=>{const T=i().map(C=>{const _=C.ref.current,I=[_,...Tze(_)];return x==="forwards"?I:I.reverse()});return(x==="forwards"?T.reverse():T).flat()},[i]);return w.useEffect(()=>{const x=u.current;if(x){const S=T=>{var I,P,M;const C=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!C){const D=document.activeElement,F=T.shiftKey;if(T.target===x&&F){(I=c.current)==null||I.focus();return}const z=v({tabbingDirection:F?"backwards":"forwards"}),H=z.findIndex(j=>j===D);jP(z.slice(H+1))?T.preventDefault():F?(P=c.current)==null||P.focus():(M=d.current)==null||M.focus()}};return x.addEventListener("keydown",S),()=>x.removeEventListener("keydown",S)}},[i,v]),g.jsxs(b4e,{ref:l,role:"region","aria-label":o.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&g.jsx(fR,{ref:c,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});jP(x)}}),g.jsx(bL.Slot,{scope:n,children:g.jsx(Kt.ol,{tabIndex:-1,...a,ref:m})}),y&&g.jsx(fR,{ref:d,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});jP(x)}})]})});uoe.displayName=coe;var doe="ToastFocusProxy",fR=w.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=t,a=CC(doe,n);return g.jsx(sC,{tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:s=>{var c;const i=s.relatedTarget;!((c=a.viewport)!=null&&c.contains(i))&&r()}})});fR.displayName=doe;var Nv="Toast",dze="toast.swipeStart",pze="toast.swipeMove",fze="toast.swipeCancel",mze="toast.swipeEnd",poe=w.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:a,...s}=t,[i,l]=jl({prop:r,defaultProp:o??!0,onChange:a,caller:Nv});return g.jsx(Bl,{present:n||i,children:g.jsx(bze,{open:i,...s,ref:e,onClose:()=>l(!1),onPause:Ms(t.onPause),onResume:Ms(t.onResume),onSwipeStart:rt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:rt(t.onSwipeMove,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:rt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:rt(t.onSwipeEnd,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),l(!1)})})})});poe.displayName=Nv;var[hze,gze]=ioe(Nv,{onClose(){}}),bze=w.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:a,onClose:s,onEscapeKeyDown:i,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:h,...y}=t,v=CC(Nv,n),[x,S]=w.useState(null),T=tr(e,j=>S(j)),C=w.useRef(null),_=w.useRef(null),I=o||v.duration,P=w.useRef(0),M=w.useRef(I),D=w.useRef(0),{onToastAdd:F,onToastRemove:B}=v,V=Ms(()=>{var q;(x==null?void 0:x.contains(document.activeElement))&&((q=v.viewport)==null||q.focus()),s()}),z=w.useCallback(j=>{!j||j===1/0||(window.clearTimeout(D.current),P.current=new Date().getTime(),D.current=window.setTimeout(V,j))},[V]);w.useEffect(()=>{const j=v.viewport;if(j){const q=()=>{z(M.current),c==null||c()},U=()=>{const Y=new Date().getTime()-P.current;M.current=M.current-Y,window.clearTimeout(D.current),l==null||l()};return j.addEventListener(dR,U),j.addEventListener(pR,q),()=>{j.removeEventListener(dR,U),j.removeEventListener(pR,q)}}},[v.viewport,I,l,c,z]),w.useEffect(()=>{a&&!v.isClosePausedRef.current&&z(I)},[a,I,v.isClosePausedRef,z]),w.useEffect(()=>(F(),()=>B()),[F,B]);const H=w.useMemo(()=>x?voe(x):null,[x]);return v.viewport?g.jsxs(g.Fragment,{children:[H&&g.jsx(yze,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:H}),g.jsx(hze,{scope:n,onClose:V,children:Qf.createPortal(g.jsx(bL.ItemSlot,{scope:n,children:g.jsx(g4e,{asChild:!0,onEscapeKeyDown:rt(i,()=>{v.isFocusedToastEscapeKeyDownRef.current||V(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(Kt.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:rt(t.onKeyDown,j=>{j.key==="Escape"&&(i==null||i(j.nativeEvent),j.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:rt(t.onPointerDown,j=>{j.button===0&&(C.current={x:j.clientX,y:j.clientY})}),onPointerMove:rt(t.onPointerMove,j=>{if(!C.current)return;const q=j.clientX-C.current.x,U=j.clientY-C.current.y,Y=!!_.current,X=["left","right"].includes(v.swipeDirection),ee=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,$=X?ee(0,q):0,G=X?0:ee(0,U),re=j.pointerType==="touch"?10:2,K={x:$,y:G},ve={originalEvent:j,delta:K};Y?(_.current=K,NS(pze,u,ve,{discrete:!1})):M7(K,v.swipeDirection,re)?(_.current=K,NS(dze,d,ve,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(q)>re||Math.abs(U)>re)&&(C.current=null)}),onPointerUp:rt(t.onPointerUp,j=>{const q=_.current,U=j.target;if(U.hasPointerCapture(j.pointerId)&&U.releasePointerCapture(j.pointerId),_.current=null,C.current=null,q){const Y=j.currentTarget,X={originalEvent:j,delta:q};M7(q,v.swipeDirection,v.swipeThreshold)?NS(mze,h,X,{discrete:!0}):NS(fze,m,X,{discrete:!0}),Y.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),yze=t=>{const{__scopeToast:e,children:n,...r}=t,o=CC(Nv,e),[a,s]=w.useState(!1),[i,l]=w.useState(!1);return Sze(()=>s(!0)),w.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),i?null:g.jsx(kv,{asChild:!0,children:g.jsx(sC,{...r,children:a&&g.jsxs(g.Fragment,{children:[o.label," ",n]})})})},vze="ToastTitle",foe=w.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return g.jsx(Kt.div,{...r,ref:e})});foe.displayName=vze;var xze="ToastDescription",moe=w.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return g.jsx(Kt.div,{...r,ref:e})});moe.displayName=xze;var hoe="ToastAction",goe=w.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?g.jsx(yoe,{altText:n,asChild:!0,children:g.jsx(yL,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${hoe}\`. Expected non-empty \`string\`.`),null)});goe.displayName=hoe;var boe="ToastClose",yL=w.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,o=gze(boe,n);return g.jsx(yoe,{asChild:!0,children:g.jsx(Kt.button,{type:"button",...r,ref:e,onClick:rt(t.onClick,o.onClose)})})});yL.displayName=boe;var yoe=w.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...o}=t;return g.jsx(Kt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:e})});function voe(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Eze(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!o)if(a){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...voe(r))}}),e}function NS(t,e,n,{discrete:r}){const o=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?D3(o,a):o.dispatchEvent(a)}var M7=(t,e,n=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),a=r>o;return e==="left"||e==="right"?a&&r>n:!a&&o>n};function Sze(t=()=>{}){const e=Ms(t);Ku(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Eze(t){return t.nodeType===t.ELEMENT_NODE}function Tze(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function jP(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var wze=loe,Cze=poe,Aze=foe,_ze=moe,kze=goe,R7=yL,xoe="Toggle",Soe=w.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...a}=t,[s,i]=jl({prop:n,onChange:o,defaultProp:r??!1,caller:xoe});return g.jsx(Kt.button,{type:"button","aria-pressed":s,"data-state":s?"on":"off","data-disabled":t.disabled?"":void 0,...a,ref:e,onClick:rt(t.onClick,()=>{t.disabled||i(!s)})})});Soe.displayName=xoe;var zp="ToggleGroup",[Eoe,Toe]=Ji(zp,[jg]),woe=jg(),vL=bt.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const o=r;return g.jsx(Ize,{...o,ref:e})}if(n==="multiple"){const o=r;return g.jsx(Pze,{...o,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${zp}\``)});vL.displayName=zp;var[Coe,Aoe]=Eoe(zp),Ize=bt.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=t,[s,i]=jl({prop:n,defaultProp:r??"",onChange:o,caller:zp});return g.jsx(Coe,{scope:t.__scopeToggleGroup,type:"single",value:bt.useMemo(()=>s?[s]:[],[s]),onItemActivate:i,onItemDeactivate:bt.useCallback(()=>i(""),[i]),children:g.jsx(_oe,{...a,ref:e})})}),Pze=bt.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=t,[s,i]=jl({prop:n,defaultProp:r??[],onChange:o,caller:zp}),l=bt.useCallback(d=>i((u=[])=>[...u,d]),[i]),c=bt.useCallback(d=>i((u=[])=>u.filter(m=>m!==d)),[i]);return g.jsx(Coe,{scope:t.__scopeToggleGroup,type:"multiple",value:s,onItemActivate:l,onItemDeactivate:c,children:g.jsx(_oe,{...a,ref:e})})});vL.displayName=zp;var[Oze,Mze]=Eoe(zp),_oe=bt.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:a,dir:s,loop:i=!0,...l}=t,c=woe(n),d=_v(s),u={role:"group",dir:d,...l};return g.jsx(Oze,{scope:n,rovingFocus:o,disabled:r,children:o?g.jsx(X3,{asChild:!0,...c,orientation:a,dir:d,loop:i,children:g.jsx(Kt.div,{...u,ref:e})}):g.jsx(Kt.div,{...u,ref:e})})}),sT="ToggleGroupItem",koe=bt.forwardRef((t,e)=>{const n=Aoe(sT,t.__scopeToggleGroup),r=Mze(sT,t.__scopeToggleGroup),o=woe(t.__scopeToggleGroup),a=n.value.includes(t.value),s=r.disabled||t.disabled,i={...t,pressed:a,disabled:s},l=bt.useRef(null);return r.rovingFocus?g.jsx(yC,{asChild:!0,...o,focusable:!s,active:a,ref:l,children:g.jsx(D7,{...i,ref:e})}):g.jsx(D7,{...i,ref:e})});koe.displayName=sT;var D7=bt.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...o}=t,a=Aoe(sT,n),s={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},i=a.type==="single"?s:void 0;return g.jsx(Soe,{...i,...o,ref:e,onPressedChange:l=>{l?a.onItemActivate(r):a.onItemDeactivate(r)}})}),Rze=vL,Dze=koe,xL="Toolbar",[Nze]=Ji(xL,[jg,Toe]),SL=jg(),Ioe=Toe(),[Lze,Poe]=Nze(xL),Ooe=w.forwardRef((t,e)=>{const{__scopeToolbar:n,orientation:r="horizontal",dir:o,loop:a=!0,...s}=t,i=SL(n),l=_v(o);return g.jsx(Lze,{scope:n,orientation:r,dir:l,children:g.jsx(X3,{asChild:!0,...i,orientation:r,dir:l,loop:a,children:g.jsx(Kt.div,{role:"toolbar","aria-orientation":r,dir:l,...s,ref:e})})})});Ooe.displayName=xL;var Moe="ToolbarSeparator",jze=w.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=Poe(Moe,n);return g.jsx(UFe,{orientation:o.orientation==="horizontal"?"vertical":"horizontal",...r,ref:e})});jze.displayName=Moe;var Bze="ToolbarButton",EL=w.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=SL(n);return g.jsx(yC,{asChild:!0,...o,focusable:!t.disabled,children:g.jsx(Kt.button,{type:"button",...r,ref:e})})});EL.displayName=Bze;var Fze="ToolbarLink",zze=w.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=SL(n);return g.jsx(yC,{asChild:!0,...o,focusable:!0,children:g.jsx(Kt.a,{...r,ref:e,onKeyDown:rt(t.onKeyDown,a=>{a.key===" "&&a.currentTarget.click()})})})});zze.displayName=Fze;var Roe="ToolbarToggleGroup",Doe=w.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=Poe(Roe,n),a=Ioe(n);return g.jsx(Rze,{"data-orientation":o.orientation,dir:o.dir,...a,...r,ref:e,rovingFocus:!1})});Doe.displayName=Roe;var Uze="ToolbarToggleItem",Noe=w.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=Ioe(n),a={__scopeToolbar:t.__scopeToolbar};return g.jsx(EL,{asChild:!0,...a,children:g.jsx(Dze,{...o,...r,ref:e})})});Noe.displayName=Uze;var qze=Ooe,Hze=EL,$ze=Doe,Vze=Noe,[AC]=Ji("Tooltip",[Lg]),_C=Lg(),Loe="TooltipProvider",Gze=700,mR="tooltip.open",[Kze,TL]=AC(Loe),joe=t=>{const{__scopeTooltip:e,delayDuration:n=Gze,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=t,s=w.useRef(!0),i=w.useRef(!1),l=w.useRef(0);return w.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),g.jsx(Kze,{scope:e,isOpenDelayedRef:s,delayDuration:n,onOpen:w.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:i,onPointerInTransitChange:w.useCallback(c=>{i.current=c},[]),disableHoverableContent:o,children:a})};joe.displayName=Loe;var I0="Tooltip",[Wze,kC]=AC(I0),Boe=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o,onOpenChange:a,disableHoverableContent:s,delayDuration:i}=t,l=TL(I0,t.__scopeTooltip),c=_C(e),[d,u]=w.useState(null),m=qc(),h=w.useRef(0),y=s??l.disableHoverableContent,v=i??l.delayDuration,x=w.useRef(!1),[S,T]=jl({prop:r,defaultProp:o??!1,onChange:M=>{M?(l.onOpen(),document.dispatchEvent(new CustomEvent(mR))):l.onClose(),a==null||a(M)},caller:I0}),C=w.useMemo(()=>S?x.current?"delayed-open":"instant-open":"closed",[S]),_=w.useCallback(()=>{window.clearTimeout(h.current),h.current=0,x.current=!1,T(!0)},[T]),I=w.useCallback(()=>{window.clearTimeout(h.current),h.current=0,T(!1)},[T]),P=w.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{x.current=!0,T(!0),h.current=0},v)},[v,T]);return w.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),g.jsx(gC,{...c,children:g.jsx(Wze,{scope:e,contentId:m,open:S,stateAttribute:C,trigger:d,onTriggerChange:u,onTriggerEnter:w.useCallback(()=>{l.isOpenDelayedRef.current?P():_()},[l.isOpenDelayedRef,P,_]),onTriggerLeave:w.useCallback(()=>{y?I():(window.clearTimeout(h.current),h.current=0)},[I,y]),onOpen:_,onClose:I,disableHoverableContent:y,children:n})})};Boe.displayName=I0;var hR="TooltipTrigger",Foe=w.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=kC(hR,n),a=TL(hR,n),s=_C(n),i=w.useRef(null),l=tr(e,i,o.onTriggerChange),c=w.useRef(!1),d=w.useRef(!1),u=w.useCallback(()=>c.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),g.jsx(bC,{asChild:!0,...s,children:g.jsx(Kt.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:rt(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),d.current=!0)}),onPointerLeave:rt(t.onPointerLeave,()=>{o.onTriggerLeave(),d.current=!1}),onPointerDown:rt(t.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:rt(t.onFocus,()=>{c.current||o.onOpen()}),onBlur:rt(t.onBlur,o.onClose),onClick:rt(t.onClick,o.onClose)})})});Foe.displayName=hR;var Yze="TooltipPortal",[Got,Xze]=AC(Yze,{forceMount:void 0}),og="TooltipContent",zoe=w.forwardRef((t,e)=>{const n=Xze(og,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...a}=t,s=kC(og,t.__scopeTooltip);return g.jsx(Bl,{present:r||s.open,children:s.disableHoverableContent?g.jsx(Uoe,{side:o,...a,ref:e}):g.jsx(Jze,{side:o,...a,ref:e})})}),Jze=w.forwardRef((t,e)=>{const n=kC(og,t.__scopeTooltip),r=TL(og,t.__scopeTooltip),o=w.useRef(null),a=tr(e,o),[s,i]=w.useState(null),{trigger:l,onClose:c}=n,d=o.current,{onPointerInTransitChange:u}=r,m=w.useCallback(()=>{i(null),u(!1)},[u]),h=w.useCallback((y,v)=>{const x=y.currentTarget,S={x:y.clientX,y:y.clientY},T=tUe(S,x.getBoundingClientRect()),C=nUe(S,T),_=rUe(v.getBoundingClientRect()),I=aUe([...C,..._]);i(I),u(!0)},[u]);return w.useEffect(()=>()=>m(),[m]),w.useEffect(()=>{if(l&&d){const y=x=>h(x,d),v=x=>h(x,l);return l.addEventListener("pointerleave",y),d.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",v)}}},[l,d,h,m]),w.useEffect(()=>{if(s){const y=v=>{const x=v.target,S={x:v.clientX,y:v.clientY},T=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),C=!oUe(S,s);T?m():C&&(m(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,d,s,c,m]),g.jsx(Uoe,{...t,ref:a})}),[Qze,Zze]=AC(I0,{isInside:!1}),eUe=$je("TooltipContent"),Uoe=w.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:s,...i}=t,l=kC(og,n),c=_C(n),{onClose:d}=l;return w.useEffect(()=>(document.addEventListener(mR,d),()=>document.removeEventListener(mR,d)),[d]),w.useEffect(()=>{if(l.trigger){const u=m=>{const h=m.target;h!=null&&h.contains(l.trigger)&&d()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[l.trigger,d]),g.jsx(Rg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:u=>u.preventDefault(),onDismiss:d,children:g.jsxs(W3,{"data-state":l.stateAttribute,...c,...i,ref:e,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(eUe,{children:r}),g.jsx(Qze,{scope:n,isInside:!0,children:g.jsx(Jje,{id:l.contentId,role:"tooltip",children:o||r})})]})})});zoe.displayName=og;var qoe="TooltipArrow",Hoe=w.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=_C(n);return Zze(qoe,n).isInside?null:g.jsx(Y3,{...o,...r,ref:e})});Hoe.displayName=qoe;function tUe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,o,a)){case a:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function nUe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function rUe(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function oUe(t,e){const{x:n,y:r}=t;let o=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const i=e[a],l=e[s],c=i.x,d=i.y,u=l.x,m=l.y;d>r!=m>r&&n<(u-c)*(r-d)/(m-d)+c&&(o=!o)}return o}function aUe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),sUe(e)}function sUe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(o.y-s.y)>=(a.y-s.y)*(o.x-s.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const a=n[n.length-1],s=n[n.length-2];if((a.x-s.x)*(o.y-s.y)>=(a.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var iUe=joe,$oe=Boe,Voe=Foe,Goe=zoe,Koe=Hoe;const Wc=w.memo(function({label:e,small:n,invertIcon:r,icon:o,color:a,className:s,...i}){return typeof o=="string"?g.jsx(lUe,{label:e,small:n,invertIcon:r,icon:o,color:a,className:s,...i}):w.cloneElement(o,{...i,className:pt({"tlui-icon__small":n},s,o.props.className),"aria-label":e,style:{color:a,transform:r?"scale(-1, 1)":void 0,...o.props.style}})});function lUe({label:t,small:e,invertIcon:n,icon:r,color:o,className:a,...s}){const i=P3(),l=i.icons[r]??i.icons["question-mark-circle"],c=w.useRef(null);return w.useLayoutEffect(()=>{l||console.error(`Icon not found: ${r}. Add it to the assetUrls.icons object.`),c!=null&&c.current&&(c.current.style.webkitMask=`url(${l}) center 100% / 100% no-repeat`)},[c,l,r]),r==="none"?g.jsx("div",{className:pt("tlui-icon tlui-icon__placeholder",{"tlui-icon__small":e},a),...s}):g.jsx("div",{...s,ref:c,"aria-label":t,role:"img",className:pt("tlui-icon",{"tlui-icon__small":e},a),style:{color:o,mask:`url(${l}) center 100% / 100% no-repeat`,transform:n?"scale(-1, 1)":void 0}})}function kt({icon:t,small:e,invertIcon:n}){return g.jsx(Wc,{"aria-hidden":"true",label:"",className:"tlui-button__icon",icon:t,small:e,invertIcon:n})}function IC({className:t,children:e}){return g.jsx("div",{className:pt("tlui-dialog__header",t),children:e})}function PC({className:t,children:e,style:n}){return g.jsx(A6e,{dir:"ltr",className:pt("tlui-dialog__header__title",t),style:n,children:e})}function OC(){const t=it();return g.jsx("div",{className:"tlui-dialog__header__close",children:g.jsx(Wte,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:g.jsx(nn,{type:"icon","aria-label":t("ui.close"),onTouchEnd:e=>e.target.click(),children:g.jsx(kt,{small:!0,icon:"cross-2"})})})})}function P0({className:t,children:e,style:n}){return g.jsx("div",{className:pt("tlui-dialog__body",t),style:n,tabIndex:0,children:e})}function wL({className:t,children:e}){return g.jsx("div",{className:pt("tlui-dialog__footer",t),children:e})}const Fg=w.forwardRef(function({className:e,label:n,icon:r,iconLeft:o,iconLabel:a,autoSelect:s=!1,autoFocus:i=!1,defaultValue:l,placeholder:c,onComplete:d,onValueChange:u,onCancel:m,onFocus:h,onBlur:y,shouldManuallyMaintainScrollPositionWhenFocused:v=!1,children:x,value:S,"data-testid":T,disabled:C,"aria-label":_},I){const P=lo(),M=w.useRef(null);w.useImperativeHandle(I,()=>M.current);const D=it(),F=w.useRef(l??""),B=w.useRef(l??""),V=w.useRef(!1),[z,H]=w.useState(!1),j=w.useCallback($=>{H(!0);const G=$.currentTarget;B.current=G.value,P?P.timers.requestAnimationFrame(()=>{s&&G.select()}):LE.requestAnimationFrame("anon",()=>{s&&G.select()}),h==null||h()},[s,P,h]),q=w.useCallback($=>{const G=$.currentTarget.value;B.current=G,u==null||u(G)},[u]),U=w.useCallback($=>{switch($.key){case"Enter":{if(V.current)return;$.currentTarget.blur(),$.stopPropagation(),d==null||d($.currentTarget.value);break}case"Escape":{$.currentTarget.value=F.current,m==null||m($.currentTarget.value),$.currentTarget.blur(),$.stopPropagation();break}}},[d,m]),Y=w.useCallback($=>{H(!1);const G=$.currentTarget.value;y==null||y(G)},[y]),X=w.useCallback(()=>V.current=!0,[]),ee=w.useCallback(()=>V.current=!1,[]);return w.useEffect(()=>{if(!Nn.isIos)return;const $=window.visualViewport;if(z&&v&&$){const G=()=>{var re;(re=M.current)==null||re.scrollIntoView({block:"center"})};return $.addEventListener("resize",G),$.addEventListener("scroll",G),P?P.timers.requestAnimationFrame(()=>{var re;(re=M.current)==null||re.scrollIntoView({block:"center"})}):LE.requestAnimationFrame("anon",()=>{var re;(re=M.current)==null||re.scrollIntoView({block:"center"})}),()=>{$.removeEventListener("resize",G),$.removeEventListener("scroll",G)}}},[z,P,v]),g.jsxs("div",{draggable:!1,className:"tlui-input__wrapper",children:[x,n&&g.jsx("label",{children:D(n)}),o&&g.jsx(Wc,{label:a?D(a):"",icon:o,className:"tlui-icon-left",small:!0}),g.jsx("input",{ref:M,className:pt("tlui-input",e),type:"text",defaultValue:l,onKeyDownCapture:U,onChange:q,onFocus:j,onBlur:Y,onCompositionStart:X,onCompositionEnd:ee,autoFocus:i,"aria-label":_,placeholder:c,value:S,"data-testid":T,disabled:C}),r&&g.jsx(Wc,{label:a?D(a):"",icon:r,small:!!n})]})});function N7(t){return Vi.isValid(t)?{isValid:!0,hasProtocol:!0}:Vi.isValid("https://"+t)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}const cUe=Co(function({onClose:e}){const r=ue().getOnlySelectedShape();return r&&"url"in r.props&&typeof r.props.url=="string"?g.jsx(uUe,{onClose:e,selectedShape:r}):null}),uUe=Co(function({onClose:e,selectedShape:n}){const r=ue(),o=it(),a=w.useRef(null);w.useEffect(()=>{r.timers.requestAnimationFrame(()=>{var y;return(y=a.current)==null?void 0:y.focus()})},[r]);const s=w.useRef(n.props.url),[i,l]=w.useState(()=>{const y=N7(n.props.url),v=y.isValid===!0?y.hasProtocol?n.props.url:"https://"+n.props.url:"https://";return{actual:v,safe:v,valid:!0}}),c=w.useCallback(y=>{const v=y.replace(/https?:\/\/(https?:\/\/)/,(T,C)=>C),x=N7(v),S=x.isValid===!0?x.hasProtocol?v:"https://"+v:"https://";l({actual:v,safe:S,valid:x.isValid})},[]),d=w.useCallback(()=>{const y=r.getOnlySelectedShape();y&&(r.updateShapes([{id:y.id,type:y.type,props:{url:""}}]),e())},[r,e]),u=w.useCallback(()=>{const y=r.getOnlySelectedShape();y&&(y&&"url"in y.props&&y.props.url!==i.safe&&r.updateShapes([{id:y.id,type:y.type,props:{url:i.safe}}]),e())},[r,e,i]),m=w.useCallback(()=>{e()},[e]);if(!n)return e(),null;const h=s.current&&!i.valid;return g.jsxs(g.Fragment,{children:[g.jsxs(IC,{children:[g.jsx(PC,{children:o("edit-link-dialog.title")}),g.jsx(OC,{})]}),g.jsx(P0,{children:g.jsxs("div",{className:"tlui-edit-link-dialog",children:[g.jsx(Fg,{ref:a,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autoFocus:!0,autoSelect:!0,placeholder:"https://example.com",value:i.actual,onValueChange:c,onComplete:u,onCancel:m}),g.jsx("div",{children:i.valid?o("edit-link-dialog.detail"):o("edit-link-dialog.invalid-url")})]})}),g.jsxs(wL,{className:"tlui-dialog__footer__actions",children:[g.jsx(nn,{type:"normal",onClick:m,onTouchEnd:m,children:g.jsx(xo,{children:o("edit-link-dialog.cancel")})}),h?g.jsx(nn,{type:"danger",onTouchEnd:d,onClick:d,children:g.jsx(xo,{children:o("edit-link-dialog.clear")})}):g.jsx(nn,{type:"primary",disabled:!i.valid,onTouchEnd:u,onClick:u,children:g.jsx(xo,{children:o("edit-link-dialog.save")})})]})]})});var dUe={};const L7=/(^\/[f|p|r|ro|s|v]\/[^/]+\/?$)/,CL=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,overridePermissions:{"allow-top-navigation":!0},toEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(L7))return e.searchParams.append("embed","true"),t},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(L7))return e.searchParams.delete("embed"),t},embedOnPaste:!1},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,toEmbedUrl:t=>{if(t.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto|design)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!t.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${t}`},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/embed\/?$/)){const n=e.searchParams.get("url");if(n)return n}},embedOnPaste:!0},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,overridePermissions:{"allow-presentation":!0},toEmbedUrl:t=>{if(t.includes("/maps/embed?"))return t;if(t.includes("/maps/")){const e=t.match(/@(.*?),(.*?),(.*?)(z|m)/);let n;if(e){const[,r,o,a,s]=e,i=s==="z"?"roadmap":"satellite",l=i==="roadmap"?a:-Math.log2(parseInt(a)/14772321)/.8;n=`https://${new URL(t).host.replace("www.","")}/maps/embed/v1/view?key=${dUe.NEXT_PUBLIC_GC_API_KEY}&center=${r},${o}&zoom=${l}&maptype=${i}`}else n="";return n}},fromEmbedUrl:t=>{const e=zt(t);if(!e)return;if(e.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&e.searchParams.has("center")&&e.searchParams.get("zoom")){const r=e.searchParams.get("zoom")??"12",o=e.searchParams.get("maptype")??"roadmap",a=o==="roadmap"?r:14772321*Math.pow(2,parseInt(r)*-.8),[s,i]=e.searchParams.get("center").split(",");return`https://www.google.com/maps/@${s},${i},${a}${o==="roadmap"?"z":"m"}`}},embedOnPaste:!0},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,toEmbedUrl:t=>{const e=zt(t),n=e&&e.pathname.match(/\/v\/(.+)\/?/);if(n)return`https://www.val.town/embed/${n[1]}`},fromEmbedUrl:t=>{const e=zt(t),n=e&&e.pathname.match(/\/embed\/(.+)\/?/);if(n)return`https://www.val.town/v/${n[1]}`},embedOnPaste:!0},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:t=>{const e=zt(t),n=e&&e.pathname.match(/\/s\/([^/]+)\/?/);if(n)return`https://codesandbox.io/embed/${n[1]}`},fromEmbedUrl:t=>{const e=zt(t),n=e&&e.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return`https://codesandbox.io/s/${n[1]}`},embedOnPaste:!0},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,toEmbedUrl:t=>{const e=/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/,n=t.match(e);if(n){const[r,o,a]=n;return`https://codepen.io/${o}/embed/${a}`}},fromEmbedUrl:t=>{const e=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,n=t.match(e);if(n){const[r,o,a]=n;return`https://codepen.io/${o}/pen/${a}`}},embedOnPaste:!0},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,embedOnPaste:!0,toEmbedUrl:t=>{const e=/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/,n=t.match(e);if(n){const[r,o]=n;return`https://scratch.mit.edu/projects/embed/${o}`}},fromEmbedUrl:t=>{const e=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,n=t.match(e);if(n){const[r,o]=n;return`https://scratch.mit.edu/projects/${o}`}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,overridePermissions:{"allow-presentation":!0,"allow-popups-to-escape-sandbox":!0},isAspectRatioLocked:!0,embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(!e)return;const n=e.hostname.replace(/^www./,"");if(n==="youtu.be"){const r=e.pathname.split("/").filter(Boolean)[0],o=new URLSearchParams(e.search),a=o.get("t");a&&(o.set("start",a),o.delete("t"));const s=o.toString()?"?"+o.toString():"";return`https://www.youtube.com/embed/${r}${s}`}else if((n==="youtube.com"||n==="m.youtube.com")&&e.pathname.match(/^\/watch/)){const r=e.searchParams.get("v"),o=new URLSearchParams(e.search);o.delete("v");const a=o.get("t");a&&(o.set("start",a),o.delete("t"));const s=o.toString()?"?"+o.toString():"";return`https://www.youtube.com/embed/${r}${s}`}},fromEmbedUrl:t=>{const e=zt(t);if(!e)return;if(e.hostname.replace(/^www./,"")==="youtube.com"){const r=e.pathname.match(/^\/embed\/([^/]+)\/?/);if(r){const o=new URLSearchParams(e.search);o.set("v",(r==null?void 0:r[1])??"");const a=o.get("start");return a&&(o.set("t",a),o.delete("start")),`https://www.youtube.com/watch?${o.toString()}`}}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",overridePermissions:{"allow-popups-to-escape-sandbox":!0},embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t),n=e==null?void 0:e.searchParams.get("cid");if(e!=null&&e.pathname.match(/\/calendar\/u\/0/)&&n){e.pathname="/calendar/embed";const r=Array.from(e.searchParams.keys());for(const o of r)e.searchParams.delete(o);return e.searchParams.set("src",n),e.href}},fromEmbedUrl:t=>{const e=zt(t),n=e==null?void 0:e.searchParams.get("src");if(e!=null&&e.pathname.match(/\/calendar\/embed/)&&n){e.pathname="/calendar/u/0";const r=Array.from(e.searchParams.keys());for(const o of r)e.searchParams.delete(o);return e.searchParams.set("cid",n),e.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,overridePermissions:{"allow-popups-to-escape-sandbox":!0},embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/pub\/?$/))){e.pathname=e.pathname.replace(/\/pub$/,"/embed");const n=Array.from(e.searchParams.keys());for(const r of n)e.searchParams.delete(r);return e.href}},fromEmbedUrl:t=>{const e=zt(t);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/embed\/?$/))){e.pathname=e.pathname.replace(/\/embed$/,"/pub");const n=Array.from(e.searchParams.keys());for(const r of n)e.searchParams.delete(r);return e.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/\/([^/]+)\/([0-9a-f]+)$/))return t.split("/").pop()?t:void 0},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/\/([^/]+)\/([0-9a-f]+)$/))return t.split("/").pop()?t:void 0}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/))return e.searchParams.append("embed","true"),e.href},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/)&&e.searchParams.has("embed"))return e.searchParams.delete("embed"),e.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/map\//))return e.origin+"/embed"+e.pathname},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/embed\/map\//))return e.pathname=e.pathname.replace(/^\/embed/,""),e.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/(artist|album)\//))return e.origin+"/embed"+e.pathname},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/embed\/(artist|album)\//))return e.origin+e.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,isAspectRatioLocked:!0,embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(e&&e.hostname==="vimeo.com"&&e.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+e.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.hostname==="player.vimeo.com"){const n=e.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!1,backgroundColor:"#fff",embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}/embed${e.pathname}?cell=*`;if(e&&e.pathname.match(/^\/d\/([^/]+)\/?$/)){const n=e.pathname.replace(/^\/d/,"");return`${e.origin}/embed${n}?cell=*`}},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","")}#cell-*`;if(e&&e.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","/d")}#cell-*`}},{type:"desmos",title:"Desmos",hostnames:["desmos.com"],width:700,height:450,doesResize:!0,embedOnPaste:!0,toEmbedUrl:t=>{const e=zt(t);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search===""&&e.hash==="")return`${t}?embed`},fromEmbedUrl:t=>{const e=zt(t);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search==="?embed"&&e.hash==="")return t.replace("?embed","")}}],pUe={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},fUe=CL.map(t=>t.type);function mUe(t){return fUe.includes(t)}function hUe(t){return"icon"in t}function Woe(){const t=lo();if(t&&t.hasShapeUtil("embed"))return t.getShapeUtil("embed")}function AL(){const t=Woe();return e=>t?t.getEmbedDefinition(e):void 0}function gUe(){const t=Woe();return t?t.getEmbedDefinitions():[]}const Yoe=Co(function({onClose:e}){const n=ue(),r=it(),o=P3(),[a,s]=w.useState(null),[i,l]=w.useState(""),[c,d]=w.useState(null),[u,m]=w.useState(!1),h=w.useRef(-1),y=gUe(),v=AL();return g.jsxs(g.Fragment,{children:[g.jsxs(IC,{children:[g.jsx(PC,{children:a?`${r("embed-dialog.title")}  ${a.title}`:r("embed-dialog.title")}),g.jsx(OC,{})]}),a?g.jsxs(g.Fragment,{children:[g.jsxs(P0,{className:"tlui-embed-dialog__enter",children:[g.jsx(Fg,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"https://example.com",autoFocus:!0,onValueChange:x=>{l(x);const S=v(x);d(S&&S.definition.type===a.type?S:null),m(!1),clearTimeout(h.current),h.current=n.timers.setTimeout(()=>m(!S),320)}}),i===""?g.jsxs("div",{className:"tlui-embed-dialog__instruction",children:[g.jsx("span",{children:r("embed-dialog.instruction")})," ",a.instructionLink&&g.jsxs(g.Fragment,{children:[g.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:a.instructionLink,className:"tlui-embed-dialog__instruction__link",children:"Learn more"}),"."]})]}):g.jsx("div",{className:"tlui-embed-dialog__warning",children:u?r("embed-dialog.invalid-url"):""})]}),g.jsxs(wL,{className:"tlui-dialog__footer__actions",children:[g.jsx(nn,{type:"normal",onClick:()=>{s(null),d(null),l("")},children:g.jsx(xo,{children:r("embed-dialog.back")})}),g.jsx("div",{className:"tlui-embed__spacer"}),g.jsx(nn,{type:"normal",onClick:e,children:g.jsx(xo,{children:r("embed-dialog.cancel")})}),g.jsx(nn,{type:"primary",disabled:!c,onClick:()=>{c&&(n.putExternalContent({type:"embed",url:i,point:n.getViewportPageBounds().center,embed:c.definition}),e())},children:g.jsx(xo,{children:r("embed-dialog.create")})})]})]}):g.jsx(g.Fragment,{children:g.jsx(P0,{className:"tlui-embed-dialog__list",children:y.map(x=>{const S=mUe(x.type)?o.embedIcons[x.type]:hUe(x)?x.icon:void 0;return g.jsxs(nn,{type:"menu",onClick:()=>s(x),children:[g.jsx(xo,{children:x.title}),S&&g.jsx("div",{className:"tlui-embed-dialog__item__image",style:{backgroundImage:`url(${S})`}})]},x.type)})})})]})}),O1=[0,389,436,476,580,640,840,1023];var Hr=(t=>(t[t.ZERO=0]="ZERO",t[t.MOBILE_XXS=1]="MOBILE_XXS",t[t.MOBILE_XS=2]="MOBILE_XS",t[t.MOBILE_SM=3]="MOBILE_SM",t[t.MOBILE=4]="MOBILE",t[t.TABLET_SM=5]="TABLET_SM",t[t.TABLET=6]="TABLET",t[t.DESKTOP=7]="DESKTOP",t))(Hr||{});const Xoe=bt.createContext(null);function bUe({forceMobile:t=!1,children:e}){const n=lo(),r=ce("breakpoint",()=>{const{width:o}=(n==null?void 0:n.getViewportScreenBounds())??{width:window.innerWidth},a=t?Hr.MOBILE_SM:O1.length-1;for(let s=0;s<a;s++)if(o>O1[s]&&o<=O1[s+1])return s;return a},[n]);return g.jsx(Xoe.Provider,{value:r,children:e})}function fa(){const t=w.useContext(Xoe);if(t===null)throw new Error("useBreakpoint must be used inside of the <BreakpointProvider /> component");return t}const Joe=w.createContext(null);function MC(){const t=w.useContext(Joe);if(!t)throw new Error("useTldrawUiMenuContext must be used within a TldrawUiMenuContextProvider");return t}function Rs({type:t,sourceId:e,children:n}){return g.jsx(Joe.Provider,{value:{type:t,sourceId:e},children:n})}function RC(){const t=lo();return(t==null?void 0:t.store.props.collaboration)!==void 0}function yUe(){const t=lo();return ce("sync status",()=>{var e;return(e=t==null?void 0:t.store.props.collaboration)!=null&&e.status?t.store.props.collaboration.status.get():null},[t])}function Qi(){const t=lo();return ce("isReadonlyMode",()=>!!(t!=null&&t.getIsReadonly()),[t])}const j7=Nn.isDarwin?"":"__CTRL__",vUe=Nn.isDarwin?"":"__CTRL__",B7=Nn.isDarwin?"":"__ALT__";function Qoe(t){return t===","?[","]:t.split(",")[0].split(/(\[\[[^\]]+\]\])/g).map(e=>e.startsWith("[[")?e.replace(/[[\]]/g,""):e.replace(/cmd\+/g,j7).replace(/ctrl\+/g,vUe).replace(/alt\+/g,B7).replace(/shift\+/g,"").replace(/\$/g,j7).replace(/\?/g,B7).replace(/!/g,"").match(/__CTRL__|__ALT__|./g)||[]).flat().map((e,n)=>{if(e[0]==="+")return[];let r;return e==="__CTRL__"?r="Ctrl":e==="__ALT__"?r="Alt":r=e[0].toUpperCase()+e.slice(1),Nn.isDarwin||!n?r:["+",r]}).flat()}function iT(t){return" "+Qoe(t).join("")}function Zoe(t){const e=it();return g.jsx(SZ,{"aria-label":e("app.loading"),...t})}const eae=()=>{},tae=w.createContext(null);function xUe({onEvent:t,children:e}){return g.jsx(tae.Provider,{value:t??eae,children:e})}function $r(){return w.useContext(tae)??eae}function td(t,e){const n=lo(),r=w.useCallback(s=>{s&&(n==null||n.complete()),e==null||e(s)},[n,e]),o=$r(),a=w.useCallback(s=>{o(s,{source:"unknown",id:t})},[t,o]);return LRe(n?`${t}-${n.contextId}`:t,r,a)}function DC({id:t,children:e,modal:n=!1,debugOpen:r=!1}){const[o,a]=td(t);return g.jsx(iL,{open:r||o,dir:"ltr",modal:n,onOpenChange:a,children:e})}function NC({children:t,...e}){return g.jsx(lL,{dir:"ltr",asChild:!0,onTouchEnd:n=>Nt(n),...e,children:t})}function LC({className:t,side:e="bottom",align:n="start",sideOffset:r=8,alignOffset:o=8,children:a}){const s=Ao();return g.jsx(EC,{container:s,children:g.jsx(cL,{className:pt("tlui-menu",t),side:e,sideOffset:r,align:n,alignOffset:o,collisionPadding:4,children:a})})}function SUe({id:t,children:e}){const[n,r]=td(t);return g.jsx(CFe,{open:n,onOpenChange:r,children:e})}function EUe({id:t,label:e,title:n,disabled:r}){return g.jsx(AFe,{dir:"ltr",asChild:!0,disabled:r,children:g.jsxs(nn,{"data-testid":t,type:"menu",className:"tlui-menu__submenu__trigger",disabled:r,title:n,children:[g.jsx(xo,{children:e}),g.jsx(kt,{icon:"chevron-right",small:!0})]})})}function TUe({id:t,alignOffset:e=-1,sideOffset:n=-6,size:r="small",children:o}){const a=Ao();return g.jsx(EC,{container:a,children:g.jsx(_Fe,{"data-testid":t,className:"tlui-menu tlui-menu__submenu__content",alignOffset:e,sideOffset:n,collisionPadding:4,"data-size":r,children:o})})}function wUe({className:t,children:e}){return g.jsx("div",{dir:"ltr",className:pt("tlui-menu__group",t),children:e})}function CUe({noClose:t,children:e}){return g.jsx(TFe,{dir:"ltr",asChild:!0,onClick:t?Nt:void 0,children:e})}function AUe({children:t,onSelect:e,...n}){const r=it();return g.jsxs(Dre,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",onSelect:o=>{e==null||e(o),Nt(o)},...n,children:[g.jsx("div",{className:"tlui-button__checkbox__indicator",children:g.jsx(wFe,{dir:"ltr",children:g.jsx(Wc,{label:r("ui.checked"),icon:"check",small:!0})})}),t]})}function Vy({children:t,visibleOnMobileLayout:e=!1}){const n=fa();return!e&&n<Hr.MOBILE?null:g.jsx("kbd",{className:"tlui-kbd",children:Qoe(t).map((r,o)=>g.jsx("span",{children:r},o))})}const nae=w.createContext({orientation:"horizontal",tooltipSide:"bottom"});function jC({children:t,orientation:e,tooltipSide:n}){const r=Lv(),o=n??(e===r.orientation?r.tooltipSide:e==="horizontal"?"bottom":"right");return g.jsx(nae.Provider,{value:{orientation:e,tooltipSide:o},children:t})}function Lv(){return w.useContext(nae)}const pm=w.forwardRef(({asChild:t,className:e,tooltipSide:n,...r},o)=>{const a=t?R3:"div";return g.jsx(jC,{orientation:"horizontal",tooltipSide:n,children:g.jsx(a,{ref:o,className:pt("tlui-row",e),...r})})}),_L=w.forwardRef(({asChild:t,className:e,tooltipSide:n,...r},o)=>{const a=t?R3:"div";return g.jsx(jC,{orientation:"vertical",tooltipSide:n,children:g.jsx(a,{ref:o,className:pt("tlui-column",e),...r})})}),BC=w.forwardRef(({asChild:t,className:e,tooltipSide:n,...r},o)=>{const a=t?R3:"div";return g.jsx(jC,{orientation:"horizontal",tooltipSide:n,children:g.jsx(a,{ref:o,className:pt("tlui-grid",e),...r})})}),_Ue=700,pf=class pf{constructor(){L(this,"currentTooltip",Ir("current tooltip",null));L(this,"destroyTimeoutId",null);L(this,"supportsHoverAtom",null)}static getInstance(){return pf.instance||(pf.instance=new pf),pf.instance}showTooltip(e,n,r,o,a,s,i){this.destroyTimeoutId&&(clearTimeout(this.destroyTimeoutId),this.destroyTimeoutId=null),this.currentTooltip.set({id:e,content:n,side:o,sideOffset:a,showOnMobile:s,targetElement:r,delayDuration:i})}updateCurrentTooltip(e,n){this.currentTooltip.update(r=>(r==null?void 0:r.id)===e?n(r):r)}hideTooltip(e,n,r=!1){const o=()=>{var a;((a=this.currentTooltip.get())==null?void 0:a.id)===n&&(this.currentTooltip.set(null),this.destroyTimeoutId=null)};e&&!r?this.destroyTimeoutId=e.timers.setTimeout(o,300):o()}hideAllTooltips(){this.currentTooltip.set(null),this.destroyTimeoutId=null}getCurrentTooltipData(){const e=this.currentTooltip.get();return!e||!this.supportsHover()&&!e.showOnMobile?null:e}supportsHover(){if(!this.supportsHoverAtom){const e=window.matchMedia("(hover: hover)"),n=Ir("has hover",e.matches);this.supportsHoverAtom=n,e.addEventListener("change",r=>{n.set(r.matches)})}return this.supportsHoverAtom.get()}};L(pf,"instance",null);let gR=pf;const El=gR.getInstance(),rae=w.createContext(!1);function kUe({children:t}){return g.jsx(iUe,{skipDelayDuration:700,children:g.jsxs(rae.Provider,{value:!0,children:[t,g.jsx(IUe,{})]})})}function IUe(){const[t,e]=w.useState(!1),n=w.useRef(null),r=w.useRef(!0),o=lo(),a=ce("current tooltip",()=>El.getCurrentTooltipData(),[]),s=ce("camera state",()=>o==null?void 0:o.getCameraState(),[o]);return w.useEffect(()=>{s==="moving"&&t&&a&&El.hideTooltip(o,a.id,!0)},[s,t,a,o]),w.useEffect(()=>{function i(l){l.key==="Escape"&&a&&t&&(El.hideTooltip(o,a.id),l.stopPropagation())}return document.addEventListener("keydown",i,{capture:!0}),()=>{document.removeEventListener("keydown",i,{capture:!0})}},[o,a,t]),w.useEffect(()=>{let i=null;if(a&&n.current){const l=a.targetElement.getBoundingClientRect(),c=n.current;c.style.position="fixed",c.style.left=`${l.left}px`,c.style.top=`${l.top}px`,c.style.width=`${l.width}px`,c.style.height=`${l.height}px`,c.style.pointerEvents="none",c.style.zIndex="9999",r.current?i=setTimeout(()=>{e(!0),r.current=!1},a.delayDuration):e(!0)}else e(!1),r.current=!0;return()=>{i!==null&&clearTimeout(i)}},[a]),a?g.jsxs($oe,{open:t,delayDuration:0,children:[g.jsx(Voe,{asChild:!0,children:g.jsx("div",{ref:n})}),g.jsxs(Goe,{className:"tlui-tooltip",side:a.side,sideOffset:a.sideOffset,avoidCollisions:!0,collisionPadding:8,dir:"ltr",children:[a.content,g.jsx(Koe,{className:"tlui-tooltip__arrow"})]})]}):null}const FC=w.forwardRef(({children:t,content:e,side:n,sideOffset:r=5,disabled:o=!1,showOnMobile:a=!1,delayDuration:s},i)=>{const l=lo(),c=w.useRef(Ln()),d=w.useContext(rae),u=ce("enhancedA11yMode",()=>l==null?void 0:l.user.getEnhancedA11yMode(),[l]),m=Lv(),h=n??m.tooltipSide;if(w.useEffect(()=>{const I=c.current;return()=>{d&&El.hideTooltip(l,I,!0)}},[l,d]),w.useLayoutEffect(()=>{var I;d&&((I=El.getCurrentTooltipData())==null?void 0:I.id)===c.current&&El.updateCurrentTooltip(c.current,P=>({...P,content:e,side:h,sideOffset:r,showOnMobile:a}))},[e,h,r,a,d]),o||!e)return g.jsx(g.Fragment,{children:t});let y;if(u?y=0:y=s??((l==null?void 0:l.options.tooltipDelayMs)||_Ue),!d||u)return g.jsxs($oe,{delayDuration:y,disableHoverableContent:!u,children:[g.jsx(Voe,{asChild:!0,ref:i,children:t}),g.jsxs(Goe,{className:"tlui-tooltip",side:h,sideOffset:r,avoidCollisions:!0,collisionPadding:8,dir:"ltr",children:[e,g.jsx(Koe,{className:"tlui-tooltip__arrow"})]})]});const v=bt.Children.only(t);dt(bt.isValidElement(v),"TldrawUiTooltip children must be a single element");const x=I=>{var P,M;(M=(P=v.props).onMouseEnter)==null||M.call(P,I),El.showTooltip(c.current,e,I.currentTarget,h,r,a,y)},S=I=>{var P,M;(M=(P=v.props).onMouseLeave)==null||M.call(P,I),El.hideTooltip(l,c.current)},T=I=>{var P,M;(M=(P=v.props).onFocus)==null||M.call(P,I),El.showTooltip(c.current,e,I.currentTarget,h,r,a,y)},C=I=>{var P,M;(M=(P=v.props).onBlur)==null||M.call(P,I),El.hideTooltip(l,c.current)};return bt.cloneElement(t,{onMouseEnter:x,onMouseLeave:S,onFocus:T,onBlur:C})}),PUe={horizontal:pm,vertical:_L,grid:BC},Ds=bt.forwardRef(({children:t,className:e,label:n,orientation:r="horizontal",tooltipSide:o,...a},s)=>{const i=PUe[r];return g.jsx(i,{asChild:!0,tooltipSide:o,children:g.jsx(qze,{ref:s,...a,className:pt("tlui-toolbar",e),"aria-label":n,orientation:r==="grid"?"horizontal":r,children:t})})}),pr=bt.forwardRef(({asChild:t,children:e,type:n,isActive:r,tooltip:o,...a},s)=>{const i=g.jsx(Hze,{ref:s,asChild:t,draggable:!1,"data-isactive":r,...a,"aria-label":a.title,title:void 0,className:pt("tlui-button",`tlui-button__${n}`,a.className),children:e}),l=o||a.title;return g.jsx(FC,{content:l,children:i})}),OUe=({children:t,className:e,type:n,asChild:r,...o})=>g.jsx($ze,{asChild:r,type:n,...o,role:"radiogroup",className:pt("tlui-toolbar-toggle-group",e),children:t}),MUe=({children:t,className:e,type:n,value:r,tooltip:o,...a})=>{const s=g.jsx(Vze,{...a,title:void 0,className:pt("tlui-button",`tlui-button__${n}`,"tlui-toolbar-toggle-group-item",e),value:r,children:t}),i=o||a.title;return g.jsx(FC,{content:i,children:s})};function dn({disabled:t=!1,spinner:e=!1,readonlyOk:n=!1,id:r,kbd:o,label:a,icon:s,iconLeft:i,onSelect:l,noClose:c,isSelected:d,onDragStart:u}){const{type:m,sourceId:h}=MC(),y=it(),[v,x]=w.useState(!1);if(Qi()&&!n)return null;const T=L0(a,m),C=o?iT(o):void 0,_=T?y(T):void 0,I=_&&C?`${_} ${C}`:_;switch(m){case"menu":return g.jsx(CUe,{children:g.jsxs(nn,{type:"menu","data-testid":`${h}.${r}`,disabled:t,onClick:P=>{c&&Nt(P),v?x(!1):l(h)},children:[i&&g.jsx(kt,{icon:i,small:!0}),g.jsx(xo,{children:_}),o&&g.jsx(Vy,{children:o})]})});case"context-menu":return t?null:g.jsxs(eFe,{dir:"ltr",draggable:!1,className:"tlui-button tlui-button__menu","data-testid":`${h}.${r}`,onSelect:P=>{c&&Nt(P),v?x(!1):l(h)},children:[g.jsx("span",{className:"tlui-button__label",draggable:!1,children:_}),i&&g.jsx(kt,{icon:i,small:!0}),o&&g.jsx(Vy,{children:o}),e&&g.jsx(Zoe,{})]});case"small-icons":case"icons":return g.jsx(pr,{"data-testid":`${h}.${r}`,type:"icon",title:I,disabled:t,onClick:()=>l(h),children:g.jsx(kt,{icon:s,small:!0})});case"keyboard-shortcuts":return o?g.jsxs("div",{className:"tlui-shortcuts-dialog__key-pair","data-testid":`${h}.${r}`,children:[g.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:_}),g.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:g.jsx(Vy,{visibleOnMobileLayout:!0,children:o})})]}):(console.warn(`Menu item '${a}' isn't shown in the keyboard shortcuts dialog because it doesn't have a keyboard shortcut.`),null);case"helper-buttons":return g.jsxs(nn,{type:"low",onClick:()=>l(h),children:[g.jsx(kt,{icon:s}),g.jsx(xo,{children:_})]});case"toolbar":return u?g.jsx(F7,{id:r,icon:s,onSelect:l,onDragStart:u,labelStr:_,titleStr:I,disabled:t,isSelected:d}):g.jsx(pr,{"aria-label":_,"aria-pressed":d?"true":"false","data-testid":`tools.${r}`,"data-value":r,disabled:t,onClick:()=>l("toolbar"),onTouchStart:P=>{Nt(P),l("toolbar")},title:I,type:"tool",children:g.jsx(kt,{icon:s})});case"toolbar-overflow":return u?g.jsx(F7,{id:r,icon:s,onSelect:l,onDragStart:u,labelStr:_,titleStr:I,disabled:t,isSelected:d,overflow:!0}):g.jsx(pr,{"aria-label":_,"aria-pressed":d?"true":"false",isActive:d,"data-testid":`tools.more.${r}`,"data-value":r,disabled:t,onClick:()=>l("toolbar"),title:I,type:"icon",children:g.jsx(kt,{icon:s})});default:throw wn(m)}}function RUe(t,e){const n=ue();return w.useMemo(()=>{let o={name:"idle"};function a(c){o={name:"pointing",screenSpaceStart:{x:c.clientX,y:c.clientY}},c.currentTarget.setPointerCapture(c.pointerId)}function s(c){if(!c.isSpecialRedispatchedEvent&&o.name==="pointing"&&R.Dist2(o.screenSpaceStart,{x:c.clientX,y:c.clientY})>(n.getInstanceState().isCoarsePointer?n.options.uiCoarseDragDistanceSquared:n.options.uiDragDistanceSquared)){const u=o.screenSpaceStart;o={name:"dragging",screenSpaceStart:u},n.run(()=>{n.setCurrentTool("select"),n.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...Pa(n,c),point:u}),n.selectNone(),t==null||t("toolbar",{type:"pointer",target:"canvas",name:"pointer_move",...Pa(n,c),point:u}),El.hideAllTooltips(),n.getContainer().focus()})}}function i(c){c.isSpecialRedispatchedEvent||(c.currentTarget.releasePointerCapture(c.pointerId),n.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...Pa(n,c)}))}function l(){if(o.name==="dragging"||o.name==="dragged")return o={name:"idle"},!0;o={name:"idle"},e==null||e("toolbar")}return{onPointerDown:a,onPointerMove:s,onPointerUp:i,onClick:l}},[t,n,e])}function F7({id:t,labelStr:e,titleStr:n,disabled:r,isSelected:o,icon:a,onSelect:s,onDragStart:i,overflow:l}){const c=RUe(i,s);return l?g.jsx(pr,{"aria-label":e,"aria-pressed":o?"true":"false",isActive:o,className:"tlui-button-grid__button","data-testid":`tools.more.${t}`,"data-value":t,disabled:r,title:n,type:"icon",...c,children:g.jsx(kt,{icon:a})}):g.jsx(pr,{"aria-label":e,"aria-pressed":o?"true":"false","data-testid":`tools.${t}`,"data-value":t,disabled:r,onTouchStart:d=>{Nt(d),s("toolbar")},title:n,type:"tool",...c,children:g.jsx(kt,{icon:a})})}function Ie({actionId:t="",...e}){const r=ou()[t];return r?g.jsx(dn,{...r,...e}):null}function Ht({id:t,label:e,className:n,children:r}){const o=MC(),{orientation:a}=Lv(),s=it(),i=L0(e,o.type),l=i?s(i):void 0;switch(o.type){case"menu":return g.jsx(wUe,{className:n,"data-testid":`${o.sourceId}-group.${t}`,children:r});case"context-menu":return g.jsx("div",{dir:"ltr",className:pt("tlui-menu__group",n),"data-testid":`${o.sourceId}-group.${t}`,children:r});case"keyboard-shortcuts":return g.jsxs("div",{className:"tlui-shortcuts-dialog__group","data-testid":`${o.sourceId}-group.${t}`,children:[g.jsx("h2",{className:"tlui-shortcuts-dialog__group__title",children:l}),g.jsx("div",{className:"tlui-shortcuts-dialog__group__content",children:r})]});case"toolbar":{const c=a==="horizontal"?pm:_L;return g.jsx(c,{className:"tlui-main-toolbar__group","data-testid":`${o.sourceId}-group.${t}`,children:r})}case"toolbar-overflow":return g.jsx(BC,{className:"tlui-main-toolbar__group","data-testid":`${o.sourceId}-group.${t}`,children:r});default:return r}}const bR=w.createContext(null);function DUe({context:t,children:e}){const n=w.useContext(bR),r=$r(),o=iv("dialogs",[]),a=w.useMemo(()=>({dialogs:o,addDialog(s){const i=s.id??Ln();return o.update(l=>[...l.filter(c=>c.id!==s.id),{...s,id:i}]),r("open-menu",{source:"dialog",id:i}),vs.addOpenMenu(i,t),i},removeDialog(s){var l;const i=o.get().find(c=>c.id===s);return i&&((l=i.onClose)==null||l.call(i),r("close-menu",{source:"dialog",id:s}),vs.deleteOpenMenu(s,t),o.update(c=>c.filter(d=>d!==i))),s},clearDialogs(){const s=o.get();s.length!==0&&(s.forEach(i=>{var l;(l=i.onClose)==null||l.call(i),r("close-menu",{source:"dialog",id:i.id}),vs.deleteOpenMenu(i.id,t)}),o.set([]))}}),[r,o,t]);return n?g.jsx(g.Fragment,{children:e}):g.jsx(bR.Provider,{value:a,children:e})}function jv(){const t=w.useContext(bR);if(!t)throw new Error("useDialogs must be used within a DialogsProvider");return t}const yR=w.createContext(null);function NUe({children:t}){const e=iv("toasts",[]),n=w.useContext(yR),r=w.useMemo(()=>({toasts:e,addToast(o){const a=o.id??Ln();return e.update(s=>[...s.filter(i=>i.id!==o.id),{...o,id:a}]),a},removeToast(o){return e.update(a=>a.filter(s=>s.id!==o)),o},clearToasts(){e.set([])}}),[e]);return n?g.jsx(g.Fragment,{children:t}):g.jsx(wze,{children:g.jsx(yR.Provider,{value:r,children:t})})}function nd(){const t=w.useContext(yR);if(!t)throw new Error("useToasts must be used within a ToastsProvider");return t}function z7(t){return new Promise(e=>{const{allowMultiple:n=!0,mimeTypes:r=[]}=t||{},o=document.createElement("input");o.type="file",o.accept=r==null?void 0:r.join(","),o.multiple=n,o.style.display="none";function a(){o.removeEventListener("change",s),o.removeEventListener("cancel",i),o.remove()}async function s(l){const c=l.target.files;if(!c||c.length===0){e([]),a();return}const d=Array.from(c);o.value="",e(d),a()}function i(){e([]),a()}document.body.appendChild(o),o.addEventListener("cancel",i),o.addEventListener("change",s),o==null||o.click()})}var BP={exports:{}},U7;function LUe(){return U7||(U7=1,(function(t){var e=(function(){var n=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={};function s(l,c){if(!a[l]){a[l]={};for(var d=0;d<l.length;d++)a[l][l.charAt(d)]=d}return a[l][c]}var i={compressToBase64:function(l){if(l==null)return"";var c=i._compress(l,6,function(d){return r.charAt(d)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:i._decompress(l.length,32,function(c){return s(r,l.charAt(c))})},compressToUTF16:function(l){return l==null?"":i._compress(l,15,function(c){return n(c+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:i._decompress(l.length,16384,function(c){return l.charCodeAt(c)-32})},compressToUint8Array:function(l){for(var c=i.compress(l),d=new Uint8Array(c.length*2),u=0,m=c.length;u<m;u++){var h=c.charCodeAt(u);d[u*2]=h>>>8,d[u*2+1]=h%256}return d},decompressFromUint8Array:function(l){if(l==null)return i.decompress(l);for(var c=new Array(l.length/2),d=0,u=c.length;d<u;d++)c[d]=l[d*2]*256+l[d*2+1];var m=[];return c.forEach(function(h){m.push(n(h))}),i.decompress(m.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":i._compress(l,6,function(c){return o.charAt(c)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),i._decompress(l.length,32,function(c){return s(o,l.charAt(c))}))},compress:function(l){return i._compress(l,16,function(c){return n(c)})},_compress:function(l,c,d){if(l==null)return"";var u,m,h={},y={},v="",x="",S="",T=2,C=3,_=2,I=[],P=0,M=0,D;for(D=0;D<l.length;D+=1)if(v=l.charAt(D),Object.prototype.hasOwnProperty.call(h,v)||(h[v]=C++,y[v]=!0),x=S+v,Object.prototype.hasOwnProperty.call(h,x))S=x;else{if(Object.prototype.hasOwnProperty.call(y,S)){if(S.charCodeAt(0)<256){for(u=0;u<_;u++)P=P<<1,M==c-1?(M=0,I.push(d(P)),P=0):M++;for(m=S.charCodeAt(0),u=0;u<8;u++)P=P<<1|m&1,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=m>>1}else{for(m=1,u=0;u<_;u++)P=P<<1|m,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=0;for(m=S.charCodeAt(0),u=0;u<16;u++)P=P<<1|m&1,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=m>>1}T--,T==0&&(T=Math.pow(2,_),_++),delete y[S]}else for(m=h[S],u=0;u<_;u++)P=P<<1|m&1,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=m>>1;T--,T==0&&(T=Math.pow(2,_),_++),h[x]=C++,S=String(v)}if(S!==""){if(Object.prototype.hasOwnProperty.call(y,S)){if(S.charCodeAt(0)<256){for(u=0;u<_;u++)P=P<<1,M==c-1?(M=0,I.push(d(P)),P=0):M++;for(m=S.charCodeAt(0),u=0;u<8;u++)P=P<<1|m&1,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=m>>1}else{for(m=1,u=0;u<_;u++)P=P<<1|m,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=0;for(m=S.charCodeAt(0),u=0;u<16;u++)P=P<<1|m&1,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=m>>1}T--,T==0&&(T=Math.pow(2,_),_++),delete y[S]}else for(m=h[S],u=0;u<_;u++)P=P<<1|m&1,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=m>>1;T--,T==0&&(T=Math.pow(2,_),_++)}for(m=2,u=0;u<_;u++)P=P<<1|m&1,M==c-1?(M=0,I.push(d(P)),P=0):M++,m=m>>1;for(;;)if(P=P<<1,M==c-1){I.push(d(P));break}else M++;return I.join("")},decompress:function(l){return l==null?"":l==""?null:i._decompress(l.length,32768,function(c){return l.charCodeAt(c)})},_decompress:function(l,c,d){var u=[],m=4,h=4,y=3,v="",x=[],S,T,C,_,I,P,M,D={val:d(0),position:c,index:1};for(S=0;S<3;S+=1)u[S]=S;for(C=0,I=Math.pow(2,2),P=1;P!=I;)_=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=d(D.index++)),C|=(_>0?1:0)*P,P<<=1;switch(C){case 0:for(C=0,I=Math.pow(2,8),P=1;P!=I;)_=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=d(D.index++)),C|=(_>0?1:0)*P,P<<=1;M=n(C);break;case 1:for(C=0,I=Math.pow(2,16),P=1;P!=I;)_=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=d(D.index++)),C|=(_>0?1:0)*P,P<<=1;M=n(C);break;case 2:return""}for(u[3]=M,T=M,x.push(M);;){if(D.index>l)return"";for(C=0,I=Math.pow(2,y),P=1;P!=I;)_=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=d(D.index++)),C|=(_>0?1:0)*P,P<<=1;switch(M=C){case 0:for(C=0,I=Math.pow(2,8),P=1;P!=I;)_=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=d(D.index++)),C|=(_>0?1:0)*P,P<<=1;u[h++]=n(C),M=h-1,m--;break;case 1:for(C=0,I=Math.pow(2,16),P=1;P!=I;)_=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=d(D.index++)),C|=(_>0?1:0)*P,P<<=1;u[h++]=n(C),M=h-1,m--;break;case 2:return x.join("")}if(m==0&&(m=Math.pow(2,y),y++),u[M])v=u[M];else if(M===h)v=T+T.charAt(0);else return null;x.push(v),u[h++]=T+v.charAt(0),m--,T=v,m==0&&(m=Math.pow(2,y),y++)}}};return i})();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(BP)),BP.exports}var jUe=LUe();const vR=Wi(jUe),kL="web image/vnd.tldraw+png",BUe={png:kL},FUe={[kL]:"image/png"};function zUe(t){return vo(BUe,t)??null}function UUe(t){return vo(FUe,t)??t}function qUe(t){return typeof ClipboardItem<"u"&&"supports"in ClipboardItem&&ClipboardItem.supports(t)}function HUe(t){const e=Object.entries(t);for(const[n,r]of e)r.catch(o=>console.error(o));return navigator.clipboard.write([new ClipboardItem(t)]).catch(n=>(console.error(n),Promise.all(e.map(async([r,o])=>[r,await o])).then(r=>{const o=FK(r);return navigator.clipboard.write([new ClipboardItem(o)])})))}async function $Ue(t,e,n,r){const o=e.map(a=>a instanceof File?a:new File([a],"tldrawFile",{type:a.type}));t.markHistoryStoppingPoint("paste"),await t.putExternalContent({type:"files",files:o,point:n,sources:r})}async function xR(t,e,n,r){return t.markHistoryStoppingPoint("paste"),await t.putExternalContent({type:"url",point:n,url:e,sources:r})}const VUe=[kL,"image/png","image/jpeg","image/webp","image/svg+xml"];function FP(t){const e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t.trim(),e.body.textContent||e.body.innerText||""}const GUe=t=>{try{const e=new URL(t);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},KUe=t=>{const e=t.split(/[\n\s]/);for(const n of e)try{const r=new URL(n);if(!(r.protocol==="http:"||r.protocol==="https:"))return}catch{return}return RZ(e)},WUe=t=>/^<svg/.test(t),YUe=["input","select","textarea"];function zP(t){const{activeElement:e}=document;return t.menus.hasAnyOpenMenus()||e&&(e.isContentEditable||YUe.indexOf(e.tagName.toLowerCase())>-1)}const LS=(t,e,n,r)=>{const o=KUe(e);if(o)for(const a of o)xR(t,a,n);else GUe(e)?xR(t,e,n):WUe(e)?(t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"svg-text",text:e,point:n,sources:r})):(t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"text",text:e,point:n,sources:r}))},XUe=async(t,e,n)=>{if(t.getEditingShapeId()!==null)return;if(!e)throw Error("No clipboard data");const r=[];for(const o of Object.values(e.items))switch(o.kind){case"file":{r.push({type:"file",source:new Promise(a=>a(o.getAsFile()))});break}case"string":{o.type==="text/html"?r.push({type:"html",source:new Promise(a=>o.getAsString(a))}):o.type==="text/plain"?r.push({type:"text",source:new Promise(a=>o.getAsString(a))}):r.push({type:o.type,source:new Promise(a=>o.getAsString(a))});break}}aae(t,r,n)},oae=async({editor:t,clipboardItems:e,point:n,fallbackFiles:r})=>{const o=[];for(const a of e){for(const s of VUe)if(a.types.includes(s)){const i=a.getType(s).then(l=>Xa.rewriteMimeType(l,UUe(s)));o.push({type:"blob",source:i});break}a.types.includes("text/html")&&o.push({type:"html",source:(async()=>{const s=await a.getType("text/html");return await Xa.blobToText(s)})()}),a.types.includes("text/uri-list")&&o.push({type:"url",source:(async()=>{const s=await a.getType("text/uri-list");return await Xa.blobToText(s)})()}),a.types.includes("text/plain")&&o.push({type:"text",source:(async()=>{const s=await a.getType("text/plain");return await Xa.blobToText(s)})()})}return r!=null&&r.length&&o.length===1&&o[0].type==="text"?(o.pop(),o.push(...r.map(a=>({type:"file",source:Promise.resolve(a)})))):r!=null&&r.length&&o.length===0&&o.push(...r.map(a=>({type:"file",source:Promise.resolve(a)}))),await aae(t,o,n)};async function aae(t,e,n){const r=e.filter(a=>(a.type==="file"||a.type==="blob")&&a.source!==null);if(r.length){if(r.length>t.options.maxFilesAtOnce)throw Error("Too many files");const a=Dt(await Promise.all(r.map(s=>s.source)));return await $Ue(t,a,n)}const o=await Promise.all(e.filter(a=>a.type!=="file").map(a=>new Promise(s=>{const i=a;if(i.type==="file"){s({type:"error",data:null,reason:"unexpected file"});return}i.source.then(l=>{var d;const c=(d=l.match(/<div data-tldraw[^>]*>(.*)<\/div>/))==null?void 0:d[1];if(c)try{let u;try{u=JSON.parse(c)}catch{const m=vR.decompressFromBase64(c);if(m===null){s({type:"error",data:null,reason:"found tldraw data comment but could not parse"});return}u=JSON.parse(m)}if(u.type!=="application/tldraw"){s({type:"error",data:u,reason:`found tldraw data comment but JSON was of a different type: ${u.type}`});return}if(u.version===3)try{const m=JSON.parse(vR.decompressFromBase64(u.data.otherCompressed)||"{}"),h={assets:u.data.assets||[],...m};s({type:"tldraw",data:h});return}catch(m){s({type:"error",data:u,reason:`failed to decompress version 2 clipboard data: ${m}`});return}if(u.version===2)s({type:"tldraw",data:u.data});else{if(typeof u.data=="string"){s({type:"error",data:u,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}s({type:"tldraw",data:u.data});return}}catch{s({type:"error",data:c,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}else{if(i.type==="html"){s({type:"text",data:l,subtype:"html"});return}if(i.type==="url"){s({type:"text",data:l,subtype:"url"});return}try{const u=JSON.parse(l);if(u.type==="excalidraw/clipboard"){s({type:"excalidraw",data:u});return}else{s({type:"text",data:l,subtype:"json"});return}}catch{s({type:"text",data:l,subtype:"text"});return}}s({type:"error",data:l,reason:"unhandled case"})})})));for(const a of o)if(a.type==="tldraw"){t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"tldraw",content:a.data,point:n});return}for(const a of o)if(a.type==="excalidraw"){t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"excalidraw",content:a.data,point:n});return}for(const a of o){if(a.type==="text"&&a.subtype==="html"){const i=new DOMParser().parseFromString(a.data,"text/html").querySelector("body");if(i&&Array.from(i.children).filter(c=>c.nodeType===1).length===1&&i.firstElementChild&&i.firstElementChild.tagName==="A"&&i.firstElementChild.hasAttribute("href")&&i.firstElementChild.getAttribute("href")!==""){const c=i.firstElementChild.getAttribute("href");LS(t,c,n,o);return}if(!o.some(c=>c.type==="text"&&c.subtype!=="html")&&a.data.trim()&&(FP(a.data)??"")){LS(t,FP(a.data),n,o);return}if(o.some(c=>c.type==="text"&&c.subtype!=="html")){const c=FP(a.data)??"";if(c){t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"text",text:c,html:a.data,point:n,sources:o});return}}}if(a.type==="text"&&a.subtype==="text"&&a.data.startsWith("<iframe ")){const i=new DOMParser().parseFromString(a.data,"text/html").querySelector("body");if(i&&Array.from(i.children).filter(c=>c.nodeType===1).length===1&&i.firstElementChild&&i.firstElementChild.tagName==="IFRAME"&&i.firstElementChild.hasAttribute("src")&&i.firstElementChild.getAttribute("src")!==""){const c=i.firstElementChild.getAttribute("src");LS(t,c,n,o);return}}}for(const a of o)if(a.type==="text"&&a.subtype==="url"){xR(t,a.data,n,o);return}for(const a of o)if(a.type==="text"&&a.subtype==="text"&&a.data.trim()){LS(t,a.data,n,o);return}}const lT=async t=>{var i,l,c;const e=((l=(i=t.getContainer().ownerDocument)==null?void 0:i.defaultView)==null?void 0:l.navigator)??globalThis.navigator,n=await t.resolveAssetsInContent(t.getContentFromCurrentPage(t.getSelectedShapeIds()));if(!n){e&&e.clipboard&&e.clipboard.writeText("");return}const{assets:r,...o}=n,a={type:"application/tldraw",kind:"content",version:3,data:{assets:r||[],otherCompressed:vR.compressToBase64(JSON.stringify(o))}},s=JSON.stringify(a);if(!(typeof e>"u")){const d=n.shapes.map(u=>t.getShapeUtil(u).getText(u)).filter(Fwe);if((c=e.clipboard)!=null&&c.write){const u=new Blob([`<div data-tldraw>${s}</div>`],{type:"text/html"});let m=d.join(" ");m===""&&(m=" "),e.clipboard.write([new ClipboardItem({"text/html":u,"text/plain":new Blob([m],{type:"text/plain"})})])}else e.clipboard.writeText&&e.clipboard.writeText(`<div data-tldraw>${s}</div>`)}};function JUe(){const t=lo(),e=$r(),n=w.useCallback(async function(s){dt(t,"editor is required for copy"),t.getSelectedShapeIds().length!==0&&(await lT(t),e("copy",{source:s}))},[t,e]),r=w.useCallback(async function(s){t&&t.getSelectedShapeIds().length!==0&&(await lT(t),t.deleteShapes(t.getSelectedShapeIds()),e("cut",{source:s}))},[t,e]),o=w.useCallback(async function(s,i,l){t&&t.getEditingShapeId()===null&&(Array.isArray(s)&&s[0]instanceof ClipboardItem?(oae({editor:t,clipboardItems:s,point:l}),e("paste",{source:"menu"})):navigator.clipboard.read().then(c=>{o(c,i,l)}))},[t,e]);return{copy:n,cut:r,paste:o}}function QUe(){const t=ue(),e=t.getContainer().ownerDocument,n=$r(),r=ce("editor.isFocused",()=>t.getInstanceState().isFocused,[t]);w.useEffect(()=>{if(!r)return;const o=async c=>{t.getSelectedShapeIds().length===0||t.getEditingShapeId()!==null||zP(t)||(Nt(c),await lT(t),n("copy",{source:"kbd"}))};async function a(c){t.getSelectedShapeIds().length===0||t.getEditingShapeId()!==null||zP(t)||(Nt(c),await lT(t),t.deleteShapes(t.getSelectedShapeIds()),n("cut",{source:"kbd"}))}let s=!1;const i=c=>{c.button===1&&(s=!0,t.timers.requestAnimationFrame(()=>{s=!1}))},l=c=>{var h,y;if(s){t.markEventAsHandled(c);return}if(t.getEditingShapeId()!==null||zP(t))return;let d,u=!1;t.inputs.shiftKey&&(u=!0),t.user.getIsPasteAtCursorMode()&&(u=!u),u&&(d=t.inputs.currentPagePoint);const m=()=>{c.clipboardData&&XUe(t,c.clipboardData,d)};if((h=navigator.clipboard)!=null&&h.read){const v=Array.from(((y=c.clipboardData)==null?void 0:y.files)||[]);navigator.clipboard.read().then(x=>{Array.isArray(x)&&x[0]instanceof ClipboardItem&&oae({editor:t,clipboardItems:x,point:d,fallbackFiles:v})},()=>{m()})}else m();Nt(c),n("paste",{source:"kbd"})};return e==null||e.addEventListener("copy",o),e==null||e.addEventListener("cut",a),e==null||e.addEventListener("paste",l),e==null||e.addEventListener("pointerup",i),()=>{e==null||e.removeEventListener("copy",o),e==null||e.removeEventListener("cut",a),e==null||e.removeEventListener("paste",l),e==null||e.removeEventListener("pointerup",i)}},[t,n,r,e])}const q7={jpeg:"image/jpeg",png:"image/png",webp:"image/webp",svg:"text/plain"};function ZUe(t,e,n={}){const r=e!=null&&e.length?e:[...t.getCurrentPageShapeIds()],o=n.format??"png";return{blobPromise:t.toImage(r,n).then(a=>Xa.rewriteMimeType(a.blob,q7[o])),mimeType:q7[o]}}function e8e(t,e,n){if(!navigator.clipboard)return Promise.reject(new Error("Copy not supported"));if(navigator.clipboard.write){const{blobPromise:r,mimeType:o}=ZUe(t,e,n),a={[o]:r},s=zUe(n.format);return s&&qUe(s)&&(a[s]=r.then(i=>Xa.rewriteMimeType(i,s))),HUe(a)}switch(n.format){case"svg":return t8e(async()=>{const r=await t.getSvgString(e,n);if(!r)throw new Error("Failed to copy");return r.svg});case"png":throw new Error("Copy not supported");default:wn(n.format)}}async function t8e(t){var e,n;await((n=(e=navigator.clipboard)==null?void 0:e.writeText)==null?void 0:n.call(e,await t()))}function n8e(){const t=lo(),{addToast:e}=nd(),n=it();return w.useCallback((r,o="svg")=>{dt(t,"useCopyAs: editor is required"),e8e(t,r,{format:o}).catch(()=>{e({id:"copy-fail",severity:"warning",title:n("toast.error.copy-fail.title"),description:n("toast.error.copy-fail.desc")})})},[t,e,n])}async function r8e(t,e,n){let r=n.name;if(!r&&(r=`shapes at ${H7()}`,e.length===1)){const s=t.getShape(e[0]);t.isShapeOfType(s,"frame")?r=s.props.name||"frame":r=`${Aw(s.id)} at ${H7()}`}r+=`.${n.format}`;const{blob:o}=await t.toImage(e,n),a=new File([o],r,{type:o.type});o8e(a)}function H7(){const t=new Date,e=String(t.getFullYear()).slice(2),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${e}-${n}-${r} ${o}.${a}.${s}`}function o8e(t){const e=document.createElement("a"),n=URL.createObjectURL(t);e.href=n,e.download=t.name,e.click(),URL.revokeObjectURL(n)}function a8e(){const t=lo(),{addToast:e}=nd(),n=it();return w.useCallback((r,o={})=>{dt(t,"useExportAs: editor is required");const{format:a="png",name:s,scale:i=1}=o;r8e(t,r,{format:a,name:s,scale:i}).catch(l=>{console.error(l.message),e({id:"export-fail",title:n("toast.error.export-fail.title"),description:n("toast.error.export-fail.desc"),severity:"error"})})},[t,e,n])}function s8e(){const t=lo(),e=w.useRef(null),n=w.useRef(null);return w.useCallback(async function(){dt(t,"usePrint: editor is required");const o=document.createElement("div"),a=document.createElement("style"),s=(S,T)=>{S&&(S.innerHTML=""),T&&document.head.contains(T)&&document.head.removeChild(T),S&&document.body.contains(S)&&document.body.removeChild(S)};s(e.current,n.current),e.current=o,n.current=a;const i=`tl-print-surface-${Ln()}`;o.className=i,a.innerHTML=`
			.${i} {
				display: none;
			}

			.${i} svg {
				max-width: 100%;
				height: 100%;
				display: block;
			}

			@media print {				  
				html, body {
					min-height: 100%;
					height: 100%;
					margin: 0;
				}

				body {
					position: relative;
				}

				body > * {
					display: none;
				}

				.tldraw__editor {
					display: none;
				}

				.${i} {
					display: block !important;
					background: white;
					min-height: 100%;
					height: 100%;
					max-width: 100%;
				}

				.${i}__item {
					padding: 10mm;
					display: flex;
					min-height: 100%;
					flex-direction: column;
					page-break-after: always;
					position: relative;
					overflow: hidden;
					height: 100%;
				}

				.${i}__item__main {
					flex: 1;
					display: flex;
					align-items: center;
					justify-content: center;
					max-height: 100%;
				}

				.${i}__item__header {
					display: none;
				}

				.${i}__item__footer {
					display: none;
					text-align: right;
				}

				.${i}__item__footer__hide {
					display: none;
				}

				
			}

		`;const l=()=>{document.head.appendChild(a),document.body.appendChild(o)},c=()=>{t.once("tick",()=>{s(o,a)})};window.addEventListener("beforeprint",l),window.addEventListener("afterprint",c);function d(S,T,C){try{o.innerHTML+=`<div class="${i}__item">
        <div class="${i}__item__header">
          ${S.replace(/</g,"&lt;").replace(/>/g,"&gt;")}
        </div>
        <div class="${i}__item__main">
          ${C}
        </div>
        <div class="${i}__item__footer ${i}__item__footer__${T?"":"hide"}">
          ${T??""}
        </div>
      </div>`}catch(_){console.error(_)}}function u(){Nn.isChromeForIos?(l(),window.print()):Nn.isSafari?(l(),document.execCommand("print",!1)):window.print()}const m=t.getSelectedShapeIds(),h=t.getCurrentPageId(),y=t.getPages(),x={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(t.getSelectedShapeIds().length>0){const S=await t.getSvgString(m,x);if(S){const T=y.find(C=>C.id===h);d(`tldraw  ${T==null?void 0:T.name}`,null,S.svg),u()}}else{const S=t.getCurrentPage(),T=await t.getSvgString(t.getSortedChildIdsForParent(S.id),x);T&&(d(`tldraw  ${S.name}`,null,T.svg),u())}window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",c)},[t])}const sae=w.createContext([]);function IL(){const t=lo(),{addToast:e,removeToast:n,clearToasts:r}=nd(),{addDialog:o,clearDialogs:a,removeDialog:s}=jv(),i=it(),l=s8e(),{cut:c,copy:d,paste:u}=JUe(),m=n8e(),h=a8e(),y=AL(),x=fa()<Hr.TABLET_SM,S=Yd(w.useContext(sae)),T=w.useCallback(async()=>{if(!t)return;const P=await z7({allowMultiple:!0,mimeTypes:S});P.length&&(t.markHistoryStoppingPoint("insert media"),t.putExternalContent({type:"files",files:P,point:t.getViewportPageBounds().center}))},[t,S]),C=w.useCallback(async P=>{if(!t)return;const M=await z7({allowMultiple:!1,mimeTypes:S==null?void 0:S.filter(B=>P?B.startsWith("image/"):B.startsWith("video/"))});if(!M.length)return;const D=t.getOnlySelectedShape();if(!D||P&&D.type!=="image"||!P&&D.type!=="video")return;t.markHistoryStoppingPoint("replace media");const F=M[0];t.replaceExternalContent({type:"file-replace",file:F,shapeId:D.id,isImage:P})},[t,S]),_=w.useCallback(()=>C(!0),[C]),I=w.useCallback(()=>C(!1),[C]);return w.useMemo(()=>({addToast:e,removeToast:n,clearToasts:r,addDialog:o,removeDialog:s,clearDialogs:a,msg:i,isMobile:x,insertMedia:T,replaceImage:_,replaceVideo:I,printSelectionOrPages:l,cut:c,copy:d,paste:u,copyAs:m,exportAs:h,getEmbedDefinition:y}),[e,n,r,o,s,a,i,x,T,_,I,l,c,d,u,m,h,y])}function i8e(t,e){const n={};for(const r of t)if(r.translations)for(const[o,a]of Ts(r.translations)){let s=n[o];s||(s=n[o]={}),Object.assign(s,a)}return{actions:(r,o,a)=>{for(const s of t)s.actions&&(o=s.actions(r,o,a));return o},tools:(r,o,a)=>{for(const s of t)s.tools&&(o=s.tools(r,o,{...e,...a}));return o},translations:n}}function iae(t){return w.useMemo(()=>t,t)}function lae(t){const e=iae(t==null?[]:Array.isArray(t)?t:[t]);return w.useMemo(()=>{const n={};for(const r of e)if(r.translations)for(const[o,a]of Ts(r.translations)){let s=n[o];s||(s=n[o]={}),Object.assign(s,a)}return n},[e])}function l8e(t){const e=IL(),n=iae(t==null?[]:Array.isArray(t)?t:[t]);return w.useMemo(()=>i8e(n,e),[n,e])}const cae=w.createContext(null);function c8e({overrides:t,children:e}){const n=lo(),r=$r(),o=oC(),a=it(),s=IL(),i=w.useCallback((c,d,u)=>{o.announce({msg:a(d.label)}),r("select-tool",{source:c,id:u??d.id})},[o,a,r]),l=w.useMemo(()=>{if(!n)return{};const c=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(u){if(n.isIn("select")){const m=n.root.getCurrent();m.exit({},m.id),m.enter({},m.id)}n.setCurrentTool("select"),i(u,this)}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(u){n.setCurrentTool("hand"),i(u,this)}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",onSelect(u){n.setCurrentTool("eraser"),i(u,this)}},{id:"draw",label:"tool.draw",icon:"tool-pencil",kbd:"d,b,x",onSelect(u){n.setCurrentTool("draw"),i(u,this)}},...[...Bc.values].map(u=>({id:u,label:`tool.${u}`,meta:{geo:u},kbd:u==="rectangle"?"r":u==="ellipse"?"o":void 0,icon:"geo-"+u,onSelect(m){n.run(()=>{n.setStyleForNextShapes(Bc,u),n.setCurrentTool("geo"),i(m,this,`geo-${u}`)})},onDragStart(m,h){sh(n,h,{createShape:y=>n.createShape({id:y,type:"geo",props:{w:200,h:200,geo:u}})}),r("drag-tool",{source:m,id:"geo"})}})),{id:"arrow",label:"tool.arrow",icon:"tool-arrow",kbd:"a",onSelect(u){n.setCurrentTool("arrow"),i(u,this)},onDragStart(u,m){sh(n,m,{createShape:h=>n.createShape({id:h,type:"arrow",props:{start:{x:0,y:200},end:{x:200,y:0}}})}),r("drag-tool",{source:u,id:"arrow"})}},{id:"line",label:"tool.line",icon:"tool-line",kbd:"l",onSelect(u){n.setCurrentTool("line"),i(u,this)},onDragStart(u,m){sh(n,m,{createShape:h=>{const[y,v]=Mf(null,null,2);n.createShape({id:h,type:"line",props:{points:{[y]:{id:y,index:y,x:0,y:200},[v]:{id:v,index:v,x:200,y:0}}}})}}),r("drag-tool",{source:u,id:"line"})}},{id:"frame",label:"tool.frame",icon:"tool-frame",kbd:"f",onSelect(u){n.setCurrentTool("frame"),i(u,this)},onDragStart(u,m){sh(n,m,{createShape:h=>n.createShape({id:h,type:"frame"})}),r("drag-tool",{source:u,id:"frame"})}},{id:"text",label:"tool.text",icon:"tool-text",kbd:"t",onSelect(u){n.setCurrentTool("text"),i(u,this)},onDragStart(u,m){sh(n,m,{createShape:h=>n.createShape({id:h,type:"text",props:{richText:Ma("Text")}}),onDragEnd:h=>{n.setEditingShape(h),n.emit("select-all-text",{shapeId:h})}}),r("drag-tool",{source:u,id:"text"})}},{id:"asset",label:"tool.media",icon:"tool-media",kbd:"cmd+u,ctrl+u",onSelect(u){s.insertMedia(),i(u,this,"media")}},{id:"note",label:"tool.note",icon:"tool-note",kbd:"n",onSelect(u){n.setCurrentTool("note"),i(u,this)},onDragStart(u,m){sh(n,m,{createShape:h=>n.createShape({id:h,type:"note"}),onDragEnd:h=>{n.setEditingShape(h),n.emit("select-all-text",{shapeId:h})}}),r("drag-tool",{source:u,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(u){n.setCurrentTool("laser"),i(u,this)}},{id:"embed",label:"tool.embed",icon:"dot",onSelect(u){s.addDialog({component:Yoe}),i(u,this)}},{id:"highlight",label:"tool.highlight",icon:"tool-highlight",kbd:"shift+d",onSelect(u){n.setCurrentTool("highlight"),i(u,this)}}];c.forEach(u=>u.onSelect=u.onSelect.bind(u));const d=Object.fromEntries(c.map(u=>[u.id,u]));return t?t(n,d,s):d},[t,n,s,i,r]);return g.jsx(cae.Provider,{value:l,children:e})}function PL(){const t=w.useContext(cae);if(!t)throw new Error("useTools must be used within a ToolProvider");return t}function sh(t,e,n){const{x:r,y:o}=t.inputs.currentPagePoint,a=t.markHistoryStoppingPoint("drag shape tool");t.setCurrentTool("select.translating");const s=lr();n.createShape(s);const i=ra(t.getShape(s),"Shape not found"),{w:l,h:c}=t.getShapePageBounds(s);t.updateShape({id:s,type:i.type,x:r-l/2,y:o-c/2}),t.select(s),t.setCurrentTool("select.translating",{...e,target:"shape",shape:t.getShape(s),isCreating:!0,creatingMarkId:a,onCreate(){var d;t.setCurrentTool("select.idle"),t.select(s),(d=n.onDragEnd)==null||d.call(n,s)}}),t.getCurrentTool().setCurrentToolIdMask(i.type)}function Js({toolId:t="",...e}){const r=PL()[t];return r?g.jsx(dn,{...r,...e}):null}function u8e(){const t=RC();return g.jsxs(g.Fragment,{children:[g.jsxs(Ht,{label:"shortcuts-dialog.tools",id:"tools",children:[g.jsx(Ie,{actionId:"toggle-tool-lock"}),g.jsx(Ie,{actionId:"insert-media"}),g.jsx(Js,{toolId:"select"}),g.jsx(Js,{toolId:"draw"}),g.jsx(Js,{toolId:"eraser"}),g.jsx(Js,{toolId:"hand"}),g.jsx(Js,{toolId:"rectangle"}),g.jsx(Js,{toolId:"ellipse"}),g.jsx(Js,{toolId:"arrow"}),g.jsx(Js,{toolId:"line"}),g.jsx(Js,{toolId:"text"}),g.jsx(Js,{toolId:"frame"}),g.jsx(Js,{toolId:"note"}),g.jsx(Js,{toolId:"laser"}),g.jsx(dn,{id:"pointer-down",label:"tool.pointer-down",kbd:",",onSelect:()=>{}})]}),g.jsxs(Ht,{label:"shortcuts-dialog.preferences",id:"preferences",children:[g.jsx(Ie,{actionId:"toggle-dark-mode"}),g.jsx(Ie,{actionId:"toggle-focus-mode"}),g.jsx(Ie,{actionId:"toggle-grid"})]}),g.jsxs(Ht,{label:"shortcuts-dialog.edit",id:"edit",children:[g.jsx(Ie,{actionId:"undo"}),g.jsx(Ie,{actionId:"redo"}),g.jsx(Ie,{actionId:"cut"}),g.jsx(Ie,{actionId:"copy"}),g.jsx(Ie,{actionId:"paste"}),g.jsx(Ie,{actionId:"select-all"}),g.jsx(Ie,{actionId:"delete"}),g.jsx(Ie,{actionId:"duplicate"})]}),g.jsxs(Ht,{label:"shortcuts-dialog.view",id:"view",children:[g.jsx(Ie,{actionId:"zoom-in"}),g.jsx(Ie,{actionId:"zoom-out"}),g.jsx(Ie,{actionId:"zoom-to-100"}),g.jsx(Ie,{actionId:"zoom-to-fit"}),g.jsx(Ie,{actionId:"zoom-to-selection"})]}),g.jsxs(Ht,{label:"shortcuts-dialog.transform",id:"transform",children:[g.jsx(Ie,{actionId:"bring-to-front"}),g.jsx(Ie,{actionId:"bring-forward"}),g.jsx(Ie,{actionId:"send-backward"}),g.jsx(Ie,{actionId:"send-to-back"}),g.jsx(Ie,{actionId:"group"}),g.jsx(Ie,{actionId:"ungroup"}),g.jsx(Ie,{actionId:"flip-horizontal"}),g.jsx(Ie,{actionId:"flip-vertical"}),g.jsx(Ie,{actionId:"align-top"}),g.jsx(Ie,{actionId:"align-center-vertical"}),g.jsx(Ie,{actionId:"align-bottom"}),g.jsx(Ie,{actionId:"align-left"}),g.jsx(Ie,{actionId:"align-center-horizontal"}),g.jsx(Ie,{actionId:"align-right"})]}),g.jsxs(Ht,{label:"shortcuts-dialog.text-formatting",id:"text",children:[g.jsx(dn,{id:"text-bold",label:"tool.rich-text-bold",kbd:"cmd+b",onSelect:()=>{}}),g.jsx(dn,{id:"text-italic",label:"tool.rich-text-italic",kbd:"cmd+i",onSelect:()=>{}}),g.jsx(dn,{id:"text-code",label:"tool.rich-text-code",kbd:"cmd+e",onSelect:()=>{}}),g.jsx(dn,{id:"text-highlight",label:"tool.rich-text-highlight",kbd:"cmd+shift+h",onSelect:()=>{}}),g.jsx(dn,{id:"text-strikethrough",label:"tool.rich-text-strikethrough",kbd:"cmd+shift+s",onSelect:()=>{}}),g.jsx(dn,{id:"text-link",label:"tool.rich-text-link",kbd:"cmd+shift+k",onSelect:()=>{}}),g.jsx(dn,{id:"text-header",label:"tool.rich-text-header",kbd:"cmd+alt+[[1-6]]",onSelect:()=>{}}),g.jsx(dn,{id:"text-orderedList",label:"tool.rich-text-orderedList",kbd:"cmd+shift+7",onSelect:()=>{}}),g.jsx(dn,{id:"text-bulletedlist",label:"tool.rich-text-bulletList",kbd:"cmd+shift+8",onSelect:()=>{}})]}),g.jsxs(Ht,{label:"shortcuts-dialog.a11y",id:"a11y",children:[g.jsx(dn,{id:"a11y-select-next-shape",label:"a11y.select-shape",kbd:"[[Tab]]",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-select-next-shape-direction",label:"a11y.select-shape-direction",kbd:"cmd+[[]]",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-select-next-shape-container",label:"a11y.enter-leave-container",kbd:"cmd+shift+[[]]",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-pan-camera",label:"a11y.pan-camera",kbd:"[[Space]]+[[]]",onSelect:()=>{}}),g.jsx(dn,{id:"adjust-shape-styles",label:"a11y.adjust-shape-styles",kbd:"cmd+[[Enter]]",onSelect:()=>{}}),g.jsx(dn,{id:"open-context-menu",label:"a11y.open-context-menu",kbd:"cmd+shift+[[Enter]]",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-move-shape",label:"a11y.move-shape",kbd:"[[]]",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-move-shape-faster",label:"a11y.move-shape-faster",kbd:"shift+[[]]",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-rotate-shape-cw",label:"a11y.rotate-shape-cw",kbd:"shift+",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-rotate-shape-cw-fine",label:"a11y.rotate-shape-cw-fine",kbd:"shift+alt+",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-rotate-shape-ccw",label:"a11y.rotate-shape-ccw",kbd:"shift+",onSelect:()=>{}}),g.jsx(dn,{id:"a11y-rotate-shape-ccw-fine",label:"a11y.rotate-shape-ccw-fine",kbd:"shift+alt+",onSelect:()=>{}}),g.jsx(Ie,{actionId:"enlarge-shapes"}),g.jsx(Ie,{actionId:"shrink-shapes"}),g.jsx(Ie,{actionId:"a11y-repeat-shape-announce"}),g.jsx(dn,{id:"a11y-open-keyboard-shortcuts",label:"a11y.open-keyboard-shortcuts",kbd:"cmd+alt+/",onSelect:()=>{}})]}),t&&g.jsx(Ht,{label:"shortcuts-dialog.collaboration",id:"collaboration",children:g.jsx(Ie,{actionId:"open-cursor-chat"})})]})}const uae=w.memo(function({children:e}){const n=it(),r=fa(),o=e??g.jsx(u8e,{});return g.jsxs(g.Fragment,{children:[g.jsxs(IC,{className:"tlui-shortcuts-dialog__header",children:[g.jsx(PC,{children:n("shortcuts-dialog.title")}),g.jsx(OC,{})]}),g.jsx(P0,{className:pt("tlui-shortcuts-dialog__body",{"tlui-shortcuts-dialog__body__mobile":r<=Hr.MOBILE_XS,"tlui-shortcuts-dialog__body__tablet":r<=Hr.TABLET}),children:g.jsx(Rs,{type:"keyboard-shortcuts",sourceId:"kbd",children:o})}),g.jsx("div",{className:"tlui-dialog__scrim"})]})});async function d8e(t,e,n){const r=Dt(e.map(i=>{const l=t.getShape(i);if(!(!l||t.getShapeUtil(l.type).toSvg===void 0))return l}));if(r.length===0)return;if(r.length===1){const i=r[0];if(!i||t.isShapeOfType(i,"image"))return}const o=[];if(n!==void 0){const i=r.map(l=>({shape:l,bounds:t.getShapeMaskedPageBounds(l).clone().expandBy(n)}));for(let l=0;l<i.length;l++){const c=i[l];if(l===0){o[0]={shapes:[c.shape],bounds:c.bounds};continue}let d=!1;for(const u of o)if(u.bounds.includes(c.bounds)){u.shapes.push(c.shape),u.bounds.expand(c.bounds),d=!0;break}d||o.push({shapes:[c.shape],bounds:c.bounds})}}else{const i=Be.Common(r.map(l=>t.getShapeMaskedPageBounds(l)));o.push({shapes:r,bounds:i})}const a=t.options.flattenImageBoundsPadding;for(const i of o){n!==void 0&&i.bounds.expandBy(-n);const l=await t.getSvgString(i.shapes,{padding:a,background:!1});if(!(l!=null&&l.svg))continue;const c=await t.getAssetForExternalContent({type:"file",file:new File([l.svg],"asset.svg",{type:"image/svg+xml"})});c&&(i.asset=c)}const s=[];return Ui(()=>{for(const i of o){const{asset:l,bounds:c,shapes:d}=i;if(!l)continue;const u=t.findCommonAncestor(d)??t.getCurrentPageId();if(!u)continue;let m="a1";for(const S of d)if(S.parentId===u){S.index>m&&(m=S.index);break}let h,y,v;if(bs(u)){const S=t.getShape(u);if(!S)continue;const T=t.getPointInShapeSpace(S,{x:c.x,y:c.y});v=t.getShapePageTransform(u).rotation(),T.sub(new R(a,a).rot(-v)),h=T.x,y=T.y}else h=c.x-a,y=c.y-a,v=0;t.deleteShapes(d),t.createAssets([{...l,id:l.id}]);const x=lr();t.createShape({id:x,type:"image",index:m,parentId:u,x:h,y,rotation:-v,props:{assetId:l.id,w:c.w+a*2,h:c.h+a*2}}),s.push(x)}}),s}function Gf({id:t,children:e,onOpenChange:n,open:r,className:o}){const[a,s]=td(t,n);return g.jsx(dL,{onOpenChange:s,open:r||a,children:g.jsx("div",{className:pt("tlui-popover",o),children:e})})}function Kf({children:t}){return g.jsx(pL,{asChild:!0,dir:"ltr",children:t})}function Wf({side:t,children:e,align:n="center",sideOffset:r=8,alignOffset:o=0,disableEscapeKeyDown:a=!1,autoFocusFirstButton:s=!0}){const i=Ao(),l=bt.useRef(null),c=bt.useCallback(()=>{var h;if(!s)return;const m=[...((h=l.current)==null?void 0:h.querySelectorAll("button:not([disabled])"))??[]].filter(y=>y.offsetWidth||y.offsetHeight)[0];m&&m.focus()},[s]);return g.jsx(fL,{container:i,children:g.jsx(mL,{className:"tlui-popover__content",side:t,sideOffset:r,align:n,alignOffset:o,dir:"ltr",ref:l,onOpenAutoFocus:c,onEscapeKeyDown:d=>a&&d.preventDefault(),children:e})})}function cT(t,e,n){const{arrowheadStart:r,arrowheadEnd:o}=e.props,a=kh(t,e,n),s=a.start.clone(),i=a.end.clone(),l=R.Med(s,i);if(R.Equals(s,i))return{bindings:n,type:"straight",start:{handle:s,point:s,arrowhead:e.props.arrowheadStart},end:{handle:i,point:i,arrowhead:e.props.arrowheadEnd},middle:l,isValid:!1,length:0};const c=R.Sub(i,s).uni(),d=dT(t,e,"start"),u=dT(t,e,"end"),m=t.getShapePageTransform(e);$7(i,a.start,m,u),$7(s,a.end,m,d);let h=0,y=0,v=0,x=0,S=Ih*e.props.scale;const T=d&&u&&d.shape===u.shape,C=d&&u?OL(t,d.shape.id,u.shape.id):"safe";C==="safe"&&d&&u&&!T&&!d.isExact&&!u.isExact&&(u.didIntersect&&!d.didIntersect?d.isClosed&&s.setTo(i.clone().add(c.clone().mul(Ih*e.props.scale))):u.didIntersect||u.isClosed&&i.setTo(s.clone().sub(c.clone().mul(Ih*e.props.scale))));const _=R.Sub(i,s),I=R.Len(_)?_.uni():R.From(_),P=!R.Equals(I,c);T||(C!=="start-contains-end"&&d&&r!=="none"&&!d.isExact&&(v=Bi[e.props.size]/2+("size"in d.shape.props?Bi[d.shape.props.size]/2:0),h=(M0+v)*e.props.scale,S+=v*e.props.scale),C!=="end-contains-start"&&u&&o!=="none"&&!u.isExact&&(x=Bi[e.props.size]/2+("size"in u.shape.props?Bi[u.shape.props.size]/2:0),y=(M0+x)*e.props.scale,S+=x*e.props.scale));const M=s.clone().add(I.clone().mul(h*(P?-1:1))),D=i.clone().sub(I.clone().mul(y*(P?-1:1)));R.DistMin(M,D,S)&&(h!==0&&y!==0?(h*=-1.5,y*=-1.5):h!==0?h*=-1:y!==0&&(y*=-1)),s.add(I.clone().mul(h*(P?-1:1))),i.sub(I.clone().mul(y*(P?-1:1))),P?(d&&u&&i.setTo(R.Add(s,I.clone().mul(-Ih*e.props.scale))),l.setTo(R.Med(a.start,a.end))):l.setTo(R.Med(s,i));const F=R.Dist(s,i);return{bindings:n,type:"straight",start:{handle:a.start,point:s,arrowhead:e.props.arrowheadStart},end:{handle:a.end,point:i,arrowhead:e.props.arrowheadEnd},middle:l,isValid:F>0,length:F}}function $7(t,e,n,r){if(r===void 0||r.isExact)return;const o=De.applyToPoint(n,e),a=De.applyToPoint(n,t),s=De.applyToPoint(De.Inverse(r.transform),o),i=De.applyToPoint(De.Inverse(r.transform),a),l=Array.from(r.geometry.intersectLineSegment(s,i,{includeLabels:!1,includeInternal:!1}));let c;if(l.length&&(c=l.sort((m,h)=>R.Dist2(m,s)-R.Dist2(h,s))[0]??(r.isClosed?void 0:i)),c===void 0&&(c=r.geometry.nearestPoint(i,{includeLabels:!1,includeInternal:!1}),!R.DistMin(c,i,1)))return;const d=De.applyToPoint(r.transform,c),u=De.applyToPoint(De.Inverse(n),d);t.setTo(u),r.didIntersect=!0}function p8e(t,e,n){const{arrowheadEnd:r,arrowheadStart:o}=e.props,a=e.props.bend;if(Math.abs(a)>Math.abs(e.props.bend*(N8e*e.props.scale)))return cT(t,e,n);const s=kh(t,e,n),i=R.Med(s.start,s.end),l=R.Sub(s.end,s.start),c=R.Len(l)?l.uni():R.From(l),d=R.Add(i,c.per().mul(-a)),u=dT(t,e,"start"),m=dT(t,e,"end"),h=s.start.clone(),y=s.end.clone(),v=d.clone();if(R.Equals(h,y))return{bindings:n,type:"straight",start:{handle:h,point:h,arrowhead:e.props.arrowheadStart},end:{handle:y,point:y,arrowhead:e.props.arrowheadEnd},middle:v,isValid:!1,length:0};const x=e.props.bend<0,S=x?CN:u2e,T=V7(h,y,v),C=R.Angle(T.center,h),_=R.Angle(T.center,y),I=S(C,_);if(T.length===0||T.size===0||!Q8(T.length)||!Q8(T.size))return cT(t,e,n);const P=h.clone(),M=y.clone(),D=v.clone(),F=t.getShapePageTransform(e);let B=0,V=0,z=Ih*e.props.scale;if(u&&!u.isExact){const $=De.applyToPoint(F,P),G=De.applyToPoint(F,T.center),re=De.applyToPoint(F,M),K=De.Inverse(u.transform),ve=De.applyToPoint(K,$),xe=De.applyToPoint(K,G),Oe=De.applyToPoint(K,re),{isClosed:Ne}=u;let Fe,Ke=Array.from(u.geometry.intersectCircle(xe,T.radius,{includeLabels:!1,includeInternal:!1}));if(Ke.length){const Qe=xe.angle(ve),Wt=xe.angle(Oe),hn=S(Qe,Wt);Ke=Ke.filter(Ut=>S(Qe,xe.angle(Ut))<=hn);const Yt=hn*.25;Ke.sort(Ne?(Ut,an)=>Math.abs(S(Qe,xe.angle(Ut))-Yt)<Math.abs(S(Qe,xe.angle(an))-Yt)?-1:1:(Ut,an)=>S(Qe,xe.angle(Ut))<S(Qe,xe.angle(an))?-1:1),Fe=Ke[0]}if(!Fe)if(Ne){const Qe=u.geometry.nearestPoint(ve,{includeInternal:!1,includeLabels:!1});R.DistMin(Qe,ve,1)&&(Fe=Qe)}else Fe=ve;if(Fe&&(P.setTo(t.getPointInShapeSpace(e,De.applyToPoint(u.transform,Fe))),u.didIntersect=!0,o!=="none")){const Qe=Bi[e.props.size]/2+("size"in u.shape.props?Bi[u.shape.props.size]/2:0);B=(M0+Qe)*e.props.scale,z+=Qe*e.props.scale}}if(m&&!m.isExact){const $=De.applyToPoint(F,P),G=De.applyToPoint(F,M),re=De.applyToPoint(F,T.center),K=De.Inverse(m.transform),ve=De.applyToPoint(K,$),xe=De.applyToPoint(K,re),Oe=De.applyToPoint(K,G),Ne=m.isClosed;let Fe,Ke=Array.from(m.geometry.intersectCircle(xe,T.radius,{includeLabels:!1,includeInternal:!1}));if(Ke.length){const Qe=xe.angle(ve),Wt=xe.angle(Oe),hn=S(Qe,Wt),Yt=hn*.75;Ke=Ke.filter(Ut=>S(Qe,xe.angle(Ut))<=hn),Ke.sort(Ne?(Ut,an)=>Math.abs(S(Qe,xe.angle(Ut))-Yt)<Math.abs(S(Qe,xe.angle(an))-Yt)?-1:1:(Ut,an)=>S(Qe,xe.angle(Ut))<S(Qe,xe.angle(an))?-1:1),Fe=Ke[0]}if(!Fe)if(Ne){const Qe=m.geometry.nearestPoint(Oe,{includeInternal:!1,includeLabels:!1});R.DistMin(Qe,Oe,1)&&(Fe=Qe)}else Fe=Oe;if(Fe&&(M.setTo(t.getPointInShapeSpace(e,De.applyToPoint(m.transform,Fe))),m.didIntersect=!0,r!=="none")){const Qe=Bi[e.props.size]/2+("size"in m.shape.props?Bi[m.shape.props.size]/2:0);V=(M0+Qe)*e.props.scale,z+=Qe*e.props.scale}}let H=R.Angle(T.center,P),j=R.Angle(T.center,M),q=S(H,j),U=q*T.radius;const Y=P.clone(),X=M.clone();if(B!==0&&Y.setTo(T.center).add(R.FromAngle(H+q*(B/U*(x?1:-1))).mul(T.radius)),V!==0&&X.setTo(T.center).add(R.FromAngle(j+q*(V/U*(x?-1:1))).mul(T.radius)),R.DistMin(Y,X,z)){B!==0&&V!==0?(B*=-1.5,V*=-1.5):B!==0?B*=-2:V!==0&&(V*=-2);const $=.1-S(C,H)*T.radius,G=.1-S(j,_)*T.radius;B=Math.max(B,$),V=Math.max(V,G)}if(B!==0&&P.setTo(T.center).add(R.FromAngle(H+q*(B/U*(x?1:-1))).mul(T.radius)),V!==0&&M.setTo(T.center).add(R.FromAngle(j+q*(V/U*(x?-1:1))).mul(T.radius)),u&&m&&!u.isExact&&!m.isExact){H=R.Angle(T.center,P),j=R.Angle(T.center,M),q=S(H,j),U=q*T.radius;const $=OL(t,u.shape.id,m.shape.id);$==="double-bound"&&U<30?(P.setTo(h),M.setTo(y),D.setTo(v)):$==="safe"&&(u&&!u.didIntersect&&P.setTo(h),(m&&!m.didIntersect||S(C,H)>S(C,j))&&M.setTo(T.center).add(R.FromAngle(H+q*(Math.min(.9,Ih*e.props.scale/U)*(x?1:-1))).mul(T.radius)))}f8e(T.center,T.radius,P,M,D,I,x),P.equals(M)&&(P.setTo(D.clone().addXY(1,1)),M.setTo(D.clone().subXY(1,1))),h.setTo(P),y.setTo(M),v.setTo(D);const ee=V7(h,y,v);return{bindings:n,type:"arc",start:{point:h,handle:s.start,arrowhead:e.props.arrowheadStart},end:{point:y,handle:s.end,arrowhead:e.props.arrowheadEnd},middle:v,handleArc:T,bodyArc:ee,isValid:ee.length!==0&&isFinite(ee.center.x)&&isFinite(ee.center.y)}}function V7(t,e,n){const r=MY(t,e,n)??R.Med(t,e),o=R.Dist(r,t),a=+R.Clockwise(t,n,e),s=((t.y-e.y)**2+(t.x-e.x)**2)**.5,i=((e.y-n.y)**2+(e.x-n.x)**2)**.5,l=((n.y-t.y)**2+(n.x-t.x)**2)**.5,c=Math.acos((i*i+l*l-s*s)/(2*i*l))*2,d=+(Un>c),u=(mr-c)*(a?1:-1),m=u*o;return{center:r,radius:o,size:u,length:m,largeArcFlag:d,sweepFlag:a}}function f8e(t,e,n,r,o,a,s){const i=R.Angle(t,n),l=R.Angle(t,r);let c=CN(i,l);if(s||(c=mr-c),o.setTo(t).add(R.FromAngle(i+c*(.5*(s?1:-1))).mul(e)),c>a){o.rotWith(t,Un);const d=r.clone();r.setTo(n),n.setTo(d)}}const G7=["right","bottom","left","top"],m8e={top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},h8e={left:"x",right:"x",top:"y",bottom:"y"},ih={top:"bottom",right:"left",bottom:"top",left:"right"},O0={x:{v:(t,e)=>new R(t,e),loEdge:"left",hiEdge:"right",crossMid:"midY",gap:"gapX",midRange:"midXRange",self:"x",cross:"y",size:"width"},y:{v:(t,e)=>new R(e,t),loEdge:"top",hiEdge:"bottom",crossMid:"midX",gap:"gapY",midRange:"midYRange",self:"y",cross:"x",size:"height"}};function g8e(t,e){const n={min:t.min-e,max:t.max+e};return n.min>n.max?null:n}function b8e(t,e){return dt(t.min<=t.max&&e.min<=e.max),t.min<=e.min&&e.max<=t.max?[{min:t.min,max:e.min},{min:e.max,max:t.max}]:e.max<=t.min||e.min>=t.max?[t]:e.min<=t.min&&t.max<=e.max?[]:uT(t.min,e)?[{min:e.max,max:t.max}]:uT(t.max,e)?[{min:t.min,max:e.min}]:[]}function UP(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function uT(t,e){return t>=e.min&&t<=e.max}function K7(t){return t.max-t.min}function jS(t){if(!t)return;const e=t.cross.min;t.cross.min=-t.cross.max,t.cross.max=-e,t.crossTarget=-t.crossTarget}function BS(t){t&&(t.value=-t.value,t.expanded=t.expanded===null?null:-t.expanded)}const Fo={Identity:{x:1,y:1,transpose:!1},Rotate90:{x:-1,y:1,transpose:!0},Rotate180:{x:-1,y:-1,transpose:!1},Rotate270:{x:1,y:-1,transpose:!0},FlipY:{x:1,y:-1,transpose:!1}};function y8e(t){return t.transpose?{x:t.y,y:t.x,transpose:!0}:t}function v8e(t,e){const n={...t};return e.transpose&&(op(n,"x","y"),n.transpose=!n.transpose),e.x===-1&&(n.x=-n.x),e.y===-1&&(n.y=-n.y),n}function op(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function W7(t,e){e.x=t.x*e.x,e.y=t.y*e.y,t.transpose&&op(e,"x","y")}function lh(t,e){t.x===-1&&(e.x=-(e.x+e.width)),t.y===-1&&(e.y=-(e.y+e.height)),t.transpose&&(op(e,"x","y"),op(e,"width","height"))}function Y7(t,e){t.x===-1&&(op(e,"left","right"),jS(e.top),jS(e.bottom),BS(e.left),BS(e.right)),t.y===-1&&(op(e,"top","bottom"),jS(e.left),jS(e.right),BS(e.top),BS(e.bottom)),t.transpose&&(op(e,"left","top"),op(e,"right","bottom"))}class x8e{constructor(e){L(this,"options");L(this,"A");L(this,"B");L(this,"common");L(this,"gapX");L(this,"gapY");L(this,"midX");L(this,"midY");L(this,"bias");L(this,"transform",Fo.Identity);L(this,"inverse",Fo.Identity);this.options=e.options,this.A=e.A,this.B=e.B,this.common=e.common,this.midX=e.midX,this.midY=e.midY,this.gapX=e.gapX,this.gapY=e.gapY,this.bias=new R(1,1)}apply(e){if(this.transform=v8e(e,this.transform),this.inverse=y8e(this.transform),lh(e,this.A.original),lh(e,this.B.original),lh(e,this.common.original),lh(e,this.A.expanded),lh(e,this.B.expanded),lh(e,this.common.expanded),Y7(e,this.A.edges),Y7(e,this.B.edges),W7(e,this.bias),e.x===-1&&(this.gapX=-this.gapX,this.midX=this.midX===null?null:-this.midX),e.y===-1&&(this.gapY=-this.gapY,this.midY=this.midY===null?null:-this.midY),e.transpose){let n=this.midX;this.midX=this.midY,this.midY=n,n=this.gapX,this.gapX=this.gapY,this.gapY=n}}reset(){this.apply(this.inverse)}vec(e,n){const r=new R(e,n);return W7(this.inverse,r),r}}const ch=.01;class ti{constructor(e,n){L(this,"points",[]);L(this,"_midpointHandle",null);this.info=e,this.name=n}add(e,n){return this.points.push(this.info.vec(e,n)),this}midpointHandle(e){dt(this._midpointHandle===null,"midX/midY called multiple times");const n=R.Lrp(this.points[this.points.length-2],this.points[this.points.length-1],.5);return this._midpointHandle={axis:this.info.transform.transpose?e==="x"?"y":"x":e,point:n,segmentStart:this.points[this.points.length-2].clone(),segmentEnd:this.points[this.points.length-1].clone()},this}build(){const e=[];for(let n=0;n<this.points.length;n++){const r=this.points[n],o=e[e.length-1],a=e[e.length-2];if(!o||!a)e.push(r);else{const s=Math.abs(r.x-o.x),i=Math.abs(r.y-o.y),l=Math.abs(r.x-a.x),c=Math.abs(r.y-a.y);s<ch&&i<ch||(s<ch&&l<ch?o.y=r.y:i<ch&&c<ch?o.x=r.x:e.push(r))}}return{name:this.name,points:e,distance:S8e(e),aEdgePicking:"manual",bEdgePicking:"manual",skipPointsWhenDrawing:new Set,midpointHandle:this._midpointHandle}}}function S8e(t){let e=0;for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];e+=Math.abs(o.x-r.x)+Math.abs(o.y-r.y)}return e}function FS(t){const e=t.A.edges.right,n=t.B.edges.left;if(!e||!n)return null;if(e.crossTarget>n.crossTarget&&t.apply(Fo.FlipY),t.gapX>0&&t.midX!==null)return new ti(t,"to left 1").add(e.value,e.crossTarget).add(t.midX,e.crossTarget).add(t.midX,n.crossTarget).midpointHandle("x").add(n.value,n.crossTarget).build();if(e.expanded===null||n.expanded===null)return null;if(t.midY!==null)return new ti(t,"to left 2").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.midY).add(n.expanded,t.midY).midpointHandle("y").add(n.expanded,n.crossTarget).add(n.value,n.crossTarget).build();const r=Math.abs(e.value-t.common.expanded.right)+Math.abs(e.crossTarget-t.common.expanded.bottom)+Math.abs(t.common.expanded.right-n.expanded)+Math.abs(t.common.expanded.bottom-n.crossTarget)+t.options.expandElbowLegLength+6,o=t.options.expandElbowLegLength+Math.abs(e.crossTarget-t.common.expanded.top)+Math.abs(e.expanded-t.common.expanded.left)+Math.abs(t.common.expanded.top-n.crossTarget)+Math.abs(t.common.expanded.left-n.value)+6+t.bias.y,a=t.gapX<0&&t.midX!==null?t.options.expandElbowLegLength+Math.abs(e.crossTarget-t.A.expanded.bottom)+t.common.expanded.width+Math.abs(t.A.expanded.bottom-t.B.expanded.top)+Math.abs(t.B.expanded.top-n.crossTarget)+t.options.expandElbowLegLength+8:1/0;return r<o&&r<a?new ti(t,"to left 3").add(e.value,e.crossTarget).add(t.common.expanded.right,e.crossTarget).add(t.common.expanded.right,t.common.expanded.bottom).add(n.expanded,t.common.expanded.bottom).add(n.expanded,n.crossTarget).add(n.value,n.crossTarget).build():o<a?new ti(t,"to left 4").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.common.expanded.top).add(t.common.expanded.left,t.common.expanded.top).add(t.common.expanded.left,n.crossTarget).add(n.value,n.crossTarget).build():t.midX!==null?new ti(t,"to left 5").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.A.expanded.bottom).add(t.midX,t.A.expanded.bottom).add(t.midX,t.B.expanded.top).midpointHandle("y").add(n.expanded,t.B.expanded.top).add(n.expanded,n.crossTarget).add(n.value,n.crossTarget).build():null}function hy(t){const e=t.A.edges.right,n=t.B.edges.top;if(!e||!n)return null;if(e.crossTarget<(n.expanded??n.value)&&n.crossTarget>(e.expanded??e.value)||t.A.isPoint&&t.B.expanded.containsPoint(t.A.original.center))return new ti(t,"to top 1").add(e.value,e.crossTarget).add(n.crossTarget,e.crossTarget).add(n.crossTarget,n.value).build();if(t.gapX>0&&t.midX!==null&&n.expanded!==null)return new ti(t,"to top 2").add(e.value,e.crossTarget).add(t.midX,e.crossTarget).add(t.midX,n.expanded).midpointHandle("x").add(n.crossTarget,n.expanded).add(n.crossTarget,n.value).build();if(t.gapY>0&&e.expanded!==null&&n.crossTarget<e.expanded&&t.midY!==null)return new ti(t,"to top 3").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.midY).add(n.crossTarget,t.midY).midpointHandle("y").add(n.crossTarget,n.value).build();const r=Math.abs(e.value-t.common.expanded.right)+Math.abs(e.crossTarget-t.common.expanded.top)+Math.abs(n.crossTarget-t.common.expanded.right)+Math.abs(n.value-t.common.expanded.top),o=e.expanded!==null&&t.midY!==null&&n.expanded!==null?Math.abs(e.value-e.expanded)+Math.abs(t.B.expanded.left-e.expanded)+Math.abs(t.B.expanded.left-n.crossTarget)+Math.abs(e.crossTarget-t.B.expanded.top)+Math.abs(n.value-n.expanded):1/0,a=e.expanded!==null&&t.midX!==null&&n.expanded!==null?Math.abs(e.value-t.common.expanded.right)+Math.abs(e.crossTarget-t.A.expanded.bottom)+Math.abs(e.expanded-n.crossTarget)+Math.abs(t.A.expanded.bottom-n.expanded)+Math.abs(n.expanded-n.value):1/0;return r<o&&r<a?new ti(t,"to top 4").add(e.value,e.crossTarget).add(t.common.expanded.right,e.crossTarget).add(t.common.expanded.right,t.common.expanded.top).add(n.crossTarget,t.common.expanded.top).add(n.crossTarget,n.value).build():n.expanded!==null&&e.expanded!==null&&t.midY!==null&&o<a?new ti(t,"to top 5").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.midY).add(t.B.expanded.left,t.midY).midpointHandle("y").add(t.B.expanded.left,n.expanded).add(n.crossTarget,n.expanded).add(n.crossTarget,n.value).build():n.expanded!==null&&e.expanded!==null&&t.midX!==null?new ti(t,"to top 6").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.A.expanded.bottom).add(t.midX,t.A.expanded.bottom).add(t.midX,n.expanded).midpointHandle("x").add(n.crossTarget,n.expanded).add(n.crossTarget,n.value).build():null}function zS(t){return t.apply(Fo.FlipY),hy(t)}function US(t){const e=t.A.edges.right,n=t.B.edges.right;if(!e||!n)return null;if((t.gapX<=0||e.crossTarget>t.B.expanded.bottom||e.crossTarget<t.B.expanded.top)&&(n.value>t.A.original.left||n.crossTarget>t.A.expanded.bottom||n.crossTarget<t.A.expanded.top))return new ti(t,"to right 1").add(e.value,e.crossTarget).add(t.common.expanded.right,e.crossTarget).add(t.common.expanded.right,n.crossTarget).add(n.value,n.crossTarget).build();if(t.midX===null)return null;if(n.expanded!==null&&t.gapX>=0){const r=Math.abs(n.crossTarget-t.B.expanded.bottom)+Math.abs(e.crossTarget-t.B.expanded.bottom),o=Math.abs(n.crossTarget-t.B.expanded.top)+Math.abs(e.crossTarget-t.B.expanded.top),a=r<o?"bottom":"top";return new ti(t,`to right 2 via ${a}`).add(e.value,e.crossTarget).add(t.midX,e.crossTarget).add(t.midX,t.B.expanded[a]).midpointHandle("x").add(n.expanded,t.B.expanded[a]).add(n.expanded,n.crossTarget).add(n.value,n.crossTarget).build()}if(e.expanded!==null&&t.gapX<=0){const r=Math.abs(n.crossTarget-t.A.expanded.bottom)+Math.abs(e.crossTarget-t.A.expanded.bottom),o=Math.abs(n.crossTarget-t.A.expanded.top)+Math.abs(e.crossTarget-t.A.expanded.top),a=r<o?"bottom":"top";return new ti(t,`to right 3 via ${a}`).add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.A.expanded[a]).add(t.midX,t.A.expanded[a]).add(t.midX,n.crossTarget).midpointHandle("x").add(n.value,n.crossTarget).build()}return null}const E8e={top:{top:[Fo.Rotate270,US],left:[Fo.Rotate270,hy],bottom:[Fo.Rotate270,FS],right:[Fo.Rotate270,zS]},right:{top:[Fo.Identity,hy],right:[Fo.Identity,US],bottom:[Fo.Identity,zS],left:[Fo.Identity,FS]},bottom:{top:[Fo.Rotate90,FS],left:[Fo.Rotate90,zS],bottom:[Fo.Rotate90,US],right:[Fo.Rotate90,hy]},left:{top:[Fo.Rotate180,zS],left:[Fo.Rotate180,US],bottom:[Fo.Rotate180,hy],right:[Fo.Rotate180,FS]}};function qo(t,e,n){const[r,o]=E8e[e][n];t.apply(r);const a=o(t);return t.reset(),a}function T8e(t,e){let n=null;if(Math.abs(t.gapX)+1>Math.abs(t.gapY)&&t.midX!==null)t.gapX>0?n=qo(t,"right","left"):n=qo(t,"left","right");else{const s=t.A.edges.right,i=t.A.edges.left,l=t.B.edges.top,c=t.B.edges.bottom;t.A.isPoint&&t.B.isPoint?t.gapY>0?n=qo(t,"bottom","top"):n=qo(t,"top","bottom"):s&&l&&(s.expanded??s.value)<=l.crossTarget&&s.crossTarget<=(l.expanded??l.value)?n=qo(t,"right","top"):s&&c&&(s.expanded??s.value)<=c.crossTarget&&s.crossTarget>=(c.expanded??c.value)?n=qo(t,"right","bottom"):i&&l&&(i.expanded??i.value)>=l.crossTarget&&i.crossTarget<=(l.expanded??l.value)?n=qo(t,"left","top"):i&&c&&(i.expanded??i.value)>=c.crossTarget&&i.crossTarget>=(c.expanded??c.value)?n=qo(t,"left","bottom"):t.gapY>0&&t.midY!==null?n=qo(t,"bottom","top"):t.gapY<0&&t.midY!==null&&(n=qo(t,"top","bottom"))}if(n)return n.aEdgePicking=e,n.bEdgePicking=e,n;const r=G7.filter(s=>t.A.edges[s]),o=G7.filter(s=>t.B.edges[s]),a=r.flatMap(s=>o.map(i=>[s,i,e,e]));return _h(t,a)}function w8e(t,e){let n=null;const r=t.A.edges.right,o=t.A.edges.left,a=t.B.edges.top,s=t.B.edges.bottom;switch(e){case"right":t.gapX>0&&t.gapX>Math.abs(t.gapY)&&t.midX!==null?n=qo(t,"right","left"):r&&a&&(r.expanded??r.value)<=a.crossTarget&&r.crossTarget<=(a.expanded??a.value)?n=qo(t,"right","top"):r&&s&&(r.expanded??r.value)<=s.crossTarget&&r.crossTarget>=(s.expanded??s.value)&&(n=qo(t,"right","bottom"));break;case"left":t.gapX<0&&Math.abs(t.gapX)>Math.abs(t.gapY)&&t.midX!==null?n=qo(t,"left","right"):o&&a&&(o.expanded??o.value)>=a.crossTarget&&o.crossTarget<=(a.expanded??a.value)?n=qo(t,"left","top"):o&&s&&(o.expanded??o.value)>=s.crossTarget&&o.crossTarget>=(s.expanded??s.value)&&(n=qo(t,"left","bottom"));break;case"top":case"bottom":break;default:wn(e)}if(n)return n.aEdgePicking="manual",n.bEdgePicking="auto",n;switch(e){case"top":return _h(t,[["top","bottom","manual","auto"],["top","right","manual","auto"],["top","left","manual","auto"],["top","top","manual","auto"]]);case"bottom":return _h(t,[["bottom","top","manual","auto"],["bottom","right","manual","auto"],["bottom","left","manual","auto"],["bottom","bottom","manual","auto"]]);case"left":return _h(t,[["left","right","manual","auto"],["left","bottom","manual","auto"],["left","left","manual","auto"],["left","top","manual","auto"]]);case"right":return _h(t,[["right","left","manual","auto"],["right","bottom","manual","auto"],["right","right","manual","auto"],["right","top","manual","auto"]])}}function C8e(t,e,n){const r=qo(t,e,n);return r||(t.A.isPoint&&t.B.isPoint?_h(t,[[ih[e],ih[n],"manual","manual"],[e,ih[n],"manual","auto"],[ih[e],n,"auto","manual"]]):t.A.isPoint?qo(t,ih[e],n):t.B.isPoint?qo(t,e,ih[n]):null)}function _h(t,e){let n=null,r=1/0,o=1/0,a=0;for(const[s,i,l,c]of e){a+=1;const d=qo(t,s,i);d&&(d.aEdgePicking=l,d.bEdgePicking=c,d.points.length<r?(r=d.points.length,o=d.distance,n=d):d.points.length===r&&d.distance+a<o&&(o=d.distance,n=d))}return n}function dae(t,e,n){const r=t.getShapeUtil(e.type).options,o={elbowMidpoint:e.props.elbowMidPoint,expandElbowLegLength:r.expandElbowLegLength[e.props.size]*e.props.scale,minElbowLegLength:r.minElbowLegLength[e.props.size]*e.props.scale};let a=X7(t,e,n.start,e.props.start),s=X7(t,e,n.end,e.props.end);a=eH(a,s,o),s=eH(s,a,o);const i=!!(!a.side&&s.side);let{aTerminal:l,bTerminal:c}=i?{aTerminal:s,bTerminal:a}:{aTerminal:a,bTerminal:s},d={top:qa(l,c,"top",o),right:qa(l,c,"right",o),bottom:qa(l,c,"bottom",o),left:qa(l,c,"left",o)},u={top:qa(c,l,"top",o),right:qa(c,l,"right",o),bottom:qa(c,l,"bottom",o),left:qa(c,l,"left",o)};const m=J7(d,l.side),h=J7(u,c.side);let y=!1;(!m||!h)&&(y=!0,m||(c=gy(c)),h||(l=gy(l)),c.bounds.containsPoint(l.target,o.expandElbowLegLength)&&(c=gy(c)),l.bounds.containsPoint(c.target,o.expandElbowLegLength)&&(l=gy(l))),y&&(d={top:qa(l,c,"top",o),right:qa(l,c,"right",o),bottom:qa(l,c,"bottom",o),left:qa(l,c,"left",o)},u={top:qa(c,l,"top",o),right:qa(c,l,"right",o),bottom:qa(c,l,"bottom",o),left:qa(c,l,"left",o)});const v=l.isPoint?l.bounds:l.bounds.clone().expandBy(o.expandElbowLegLength),x=c.isPoint?c.bounds:c.bounds.clone().expandBy(o.expandElbowLegLength),S={original:Be.Common([l.bounds,c.bounds]),expanded:Be.Common([v,x])};let T=c.bounds.minX-l.bounds.maxX;T<0&&(T=l.bounds.minX-c.bounds.maxX,T<0&&(T=0),T=-T);let C=c.bounds.minY-l.bounds.maxY;C<0&&(C=l.bounds.minY-c.bounds.maxY,C<0&&(C=0),C=-C);const _=l.minEndSegmentLength*3,I=c.minEndSegmentLength*3,P=(l.isPoint?_:o.minElbowLegLength)+(c.isPoint?I:o.minElbowLegLength);let M=null;T>P?M={a:l.isPoint?l.bounds.maxX+_:v.maxX,b:c.isPoint?c.bounds.minX-I:x.minX}:T<-P&&(M={a:l.isPoint?l.bounds.minX-_:v.minX,b:c.isPoint?c.bounds.maxX+I:x.maxX});let D=null;C>P?D={a:l.isPoint?l.bounds.maxY+_:v.maxY,b:c.isPoint?c.bounds.minY-I:x.minY}:C<-P&&(D={a:l.isPoint?l.bounds.minY-_:v.minY,b:c.isPoint?c.bounds.maxY+I:x.maxY});const F=i?1-o.elbowMidpoint:o.elbowMidpoint,B=M?qt(M.a,M.b,F):null,V=D?qt(D.a,D.b,F):null,z={options:o,swapOrder:i,A:{isPoint:l.isPoint,target:l.target,isExact:l.isExact,arrowheadOffset:l.arrowheadOffset,minEndSegmentLength:l.minEndSegmentLength,original:l.bounds,expanded:v,edges:d,geometry:l.geometry},B:{isPoint:c.isPoint,target:c.target,isExact:c.isExact,arrowheadOffset:c.arrowheadOffset,minEndSegmentLength:c.minEndSegmentLength,original:c.bounds,expanded:x,edges:u,geometry:c.geometry},common:S,gapX:T,gapY:C,midX:B,midY:V},H=new x8e(z),j=Q7(l,c,z.A.edges),q=Q7(c,l,z.B.edges);let U;return j&&q?U=C8e(H,j,q):j&&!q&&(U=w8e(H,j)),U||(U=T8e(H,j||q?"fallback":"auto")),U&&(Z7("first",z.A,z.B,U),Z7("last",z.B,z.A,U),P8e(U,l,c),i&&U.points.reverse()),{...z,route:U,midXRange:M?i?{lo:M.b,hi:M.a}:{lo:M.a,hi:M.b}:null,midYRange:D?i?{lo:D.b,hi:D.a}:{lo:D.a,hi:D.b}:null}}function A8e(t,e){const n=t.swapOrder?t.B.target:t.A.target,r=t.swapOrder?t.A.target:t.B.target,o=R.ManhattanDist(e.points[0],e.points[1]),a=R.ManhattanDist(e.points[e.points.length-2],e.points[e.points.length-1]),s=R.ManhattanDist(n,e.points[1]),i=R.ManhattanDist(e.points[e.points.length-2],r),l=o-s,c=a-i,d=[n,...e.points,r];return{name:e.name,distance:e.distance+l+c,points:d.filter(u=>!e.skipPointsWhenDrawing.has(u)),aEdgePicking:e.aEdgePicking,bEdgePicking:e.bEdgePicking,skipPointsWhenDrawing:e.skipPointsWhenDrawing,midpointHandle:e.midpointHandle}}function _8e(t){return Eo(t.x,.5)&&Eo(t.y,.5)?null:Math.abs(t.x-.5)>Math.abs(t.y-.5)-1e-4?t.x<.5?"left":"right":t.y<.5?"top":"bottom"}function X7(t,e,n,r){const o=Bi[e.props.size]*e.props.scale/2,a=o*e.props.scale*3;if(n){const s=t.getShape(n.toId),i=k8e(t,e,n.toId,n.props);if(i&&s){let l=0;const c=n.props.terminal==="start"?"arrowheadStart":"arrowheadEnd";if(e.props[c]!=="none"){const m="scale"in s.props?s.props.scale:1,h="size"in s.props?(Bi[s.props.size]??0)*m/2:0;l=o+h+M0*e.props.scale}let d=null;const u=i.target;return n.props.isPrecise&&(d=_8e(R.RotWith(n.props.normalizedAnchor,{x:.5,y:.5},i.shapeToArrowTransform.rotation()))),{targetShapeId:n.toId,isPoint:!1,isExact:n.props.isExact,bounds:i.bounds,geometry:i.geometry,target:u,arrowheadOffset:l,minEndSegmentLength:a,side:d,snap:n.props.snap}}}return{targetShapeId:null,bounds:Be.FromCenter(r,{x:0,y:0}),geometry:null,isExact:!1,isPoint:!0,target:R.From(r),arrowheadOffset:0,minEndSegmentLength:a,side:null,snap:"none"}}function k8e(t,e,n,r){const o=r.terminal==="start"?e.props.arrowheadStart!=="none":e.props.arrowheadEnd!=="none",a=t.getShapeGeometry(n,o?void 0:{context:"@tldraw/arrow-without-arrowhead"});if(!a)return null;const s=t.getShapePageTransform(e.id),i=t.getShapePageTransform(n),l=s.clone().invert().multiply(i),c=a.transform(l),d={x:.5,y:.5},u=r.isPrecise?r.normalizedAnchor:d,m={x:qt(a.bounds.minX,a.bounds.maxX,u.x),y:qt(a.bounds.minY,a.bounds.maxY,u.y)},h={x:qt(a.bounds.minX,a.bounds.maxX,d.x),y:qt(a.bounds.minY,a.bounds.maxY,d.y)},y=De.applyToPoint(l,m),v=De.applyToPoint(l,h);return{bounds:c.bounds,geometry:c,target:y,center:v,shapeToArrowTransform:l}}const I8e={top:{expand:-1,main:"minY",opposite:"maxY",crossMid:"midX",crossMin:"minX",crossMax:"maxX",bRangeExpand:"max",crossAxis:"x"},bottom:{expand:1,main:"maxY",opposite:"minY",crossMid:"midX",crossMin:"minX",crossMax:"maxX",bRangeExpand:"min",crossAxis:"x"},left:{expand:-1,main:"minX",opposite:"maxX",crossMid:"midY",crossMin:"minY",crossMax:"maxY",bRangeExpand:"max",crossAxis:"y"},right:{expand:1,main:"maxX",opposite:"minX",crossMid:"midY",crossMin:"minY",crossMax:"maxY",bRangeExpand:"min",crossAxis:"y"}};function qa(t,e,n,r){const o=I8e[n],a=t.targetShapeId===e.targetShapeId&&t.targetShapeId!==null&&(t.snap==="edge"||t.snap==="edge-point")&&(e.snap==="edge"||e.snap==="edge-point"),s=t.bounds[o.main],i=t.isPoint?null:s+o.expand*r.expandElbowLegLength,l=UP(t.bounds[o.crossMin],t.bounds[o.crossMax]);let c=l;if(!c)return null;dt(l);const d=UP(e.bounds[o.main],e.bounds[o.opposite]);e.isPoint||(d[o.bRangeExpand]-=r.minElbowLegLength*2*o.expand);const u=g8e(UP(e.bounds[o.crossMin],e.bounds[o.crossMax]),r.expandElbowLegLength);dt(d&&u);let m=!1;if(uT(s,d)&&!t.isPoint&&!e.isPoint&&!a){const y=b8e(c,u);switch(y.length){case 0:return null;case 1:m=y[0]!==c,c=y[0];break;case 2:m=!0,c=K7(y[0])>K7(y[1])?y[0]:y[1];break;default:wn(y)}}if(!uT(t.target[o.crossAxis],c))return null;const h=t.target[o.crossAxis];return{value:s,expanded:i,cross:c,crossTarget:h,isPartial:m}}function J7(t,e){return e===null?!!(t.bottom||t.left||t.right||t.top):e==="x"?!!t.left||!!t.right:e==="y"?!!t.top||!!t.bottom:!!t[e]}function Q7(t,e,n){switch(t.side){case null:return null;case"x":return t.bounds.center.x>e.bounds.center.x&&(n!=null&&n.left)?"left":n!=null&&n.right?"right":null;case"y":return t.bounds.center.y>e.bounds.center.y&&(n!=null&&n.top)?"top":n!=null&&n.bottom?"bottom":null;default:return t.side}}function gy(t){if(t.isPoint)return t;let e=null,n=0;return(t.snap==="edge"||t.snap==="edge-point")&&(n=t.arrowheadOffset,(t.side==="x"||t.side==="left"||t.side==="right")&&(e="x"),(t.side==="y"||t.side==="top"||t.side==="bottom")&&(e="y")),{targetShapeId:t.targetShapeId,side:e,bounds:new Be(t.target.x,t.target.y,0,0),geometry:t.geometry,target:t.target,arrowheadOffset:n,minEndSegmentLength:t.minEndSegmentLength,isExact:t.isExact,isPoint:!0,snap:t.snap}}function Z7(t,e,n,r){if(!e.geometry)return;const o=t==="first"?r.points[0]:r.points[r.points.length-1],a=t==="first"?r.points[1]:r.points[r.points.length-2],s=e.geometry.isClosed?a:e.target,i=R.ManhattanDist(o,s);let l=null,c=1/0;if(e.isExact)l=e.target;else if(e.geometry){const d=e.geometry.intersectLineSegment(a,e.target,{includeLabels:!1,includeInternal:!1});e.geometry.hitTestPoint(e.target,Math.max(1,e.arrowheadOffset),!0,Uc.EXCLUDE_NON_STANDARD)&&d.push(e.target);for(const u of d){const m=R.ManhattanDist(s,u);m<c&&(c=m,l=u)}}if(l){let d=e.arrowheadOffset;const u=R.ManhattanDist(a,l),m=e.arrowheadOffset*2;if(u<m){const x=m-e.arrowheadOffset;d=u-x}d<e.minEndSegmentLength&&(e.geometry.bounds.containsPoint(n.target)?d=Math.max(0,d):d=-e.arrowheadOffset);let h=l,y=!1;if(!e.isExact&&d!==0){const x=R.Nudge(l,a,d);h=x,d<0&&!e.geometry.hitTestPoint(x,0,!0,Uc.EXCLUDE_NON_STANDARD)?h=l:(d<0&&(y=!0),h=x)}const v=R.ManhattanDist(a,h);if(r.distance+=v-i,o.x=h.x,o.y=h.y,y){const x=R.Lrp(a,o,.5);r.skipPointsWhenDrawing.add(x),r.points.splice(t==="first"?1:r.points.length-1,0,x)}}}function P8e(t,e,n){if(t){if(t.points.length>=3){const r=t.points[0],o=t.points[1];if(R.ManhattanDist(r,o)<e.minEndSegmentLength&&(t.points.splice(1,1),t.points.length>=3)){const s=Eo(r.x,o.x)?"y":"x";t.points[1][s]=r[s]}}if(t.points.length>=3){const r=t.points[t.points.length-1],o=t.points[t.points.length-2];if(R.ManhattanDist(r,o)<n.minEndSegmentLength&&(t.points.splice(t.points.length-2,1),t.points.length>=3)){const s=Eo(r.x,o.x)?"y":"x";t.points[t.points.length-2][s]=r[s]}}}}function eH(t,e,n){if(!t.geometry||t.geometry.isClosed)return t;const r=t.geometry.uninterpolateAlongEdge(t.target,Uc.EXCLUDE_NON_STANDARD),o=t.geometry.interpolateAlongEdge(r-.01/t.geometry.length),s=t.geometry.interpolateAlongEdge(r+.01/t.geometry.length).sub(o).per().uni(),i=Math.abs(s.x)>Math.abs(s.y)?O0.x:O0.y;if(t.geometry.bounds.containsPoint(e.target,n.expandElbowLegLength))return t.side=i.self,gy(t);const l=i.v(t.target[i.self]-t.bounds[i.size]*2,t.target[i.cross]),c=i.v(t.target[i.self]+t.bounds[i.size]*2,t.target[i.cross]);let d=null,u=0,m=null,h=0,y=i.self;for(const v of t.geometry.intersectLineSegment(l,c,Uc.EXCLUDE_NON_STANDARD))Math.abs(v[i.self]-t.target[i.self])<1||(v[i.self]<t.target[i.self]?R.ManhattanDist(v,t.target)>u&&(u=R.ManhattanDist(v,t.target),d=v):R.ManhattanDist(v,t.target)>h&&(h=R.ManhattanDist(v,t.target),m=v));return d&&m?u>h?y=i.hiEdge:y=i.loEdge:d&&!m?y=i.hiEdge:!d&&m&&(y=i.loEdge),t.side=y,t}const O8e=8;function M8e(t){return t.props.kind!=="arc"?!1:Math.abs(t.props.bend)<O8e*t.props.scale}function dT(t,e,n){const r=t.getBindingsFromShape(e,"arrow").find(l=>l.props.terminal===n);if(!r)return;const o=t.getShape(r.toId);if(!o)return;const a=t.getShapePageTransform(o),s=n==="start"?e.props.arrowheadStart!=="none":e.props.arrowheadEnd!=="none",i=t.getShapeGeometry(o,s?void 0:{context:"@tldraw/arrow-without-arrowhead"});return{shape:o,transform:a,isClosed:i.isClosed,isExact:r.props.isExact,didIntersect:!1,geometry:i}}function tH(t,e,n,r){const o=t.getShape(n.toId);if(o){const{point:a,size:s}=t.getShapeGeometry(o).bounds,i=R.Add(a,R.MulV(n.props.isPrecise||r?n.props.normalizedAnchor:{x:.5,y:.5},s)),l=De.applyToPoint(t.getShapePageTransform(o),i);return De.applyToPoint(De.Inverse(e),l)}else return new R(0,0)}const R8e=Sw("arrow bindings",(t,e)=>{const n=t.getBindingsFromShape(e.id,"arrow");return{start:n.find(r=>r.props.terminal==="start"),end:n.find(r=>r.props.terminal==="end")}},{areRecordsEqual:(t,e)=>t.id===e.id,areResultsEqual:(t,e)=>t.start===e.start&&t.end===e.end});function aa(t,e){return R8e.get(t,e.id)}const D8e=Sw("arrow info",(t,e)=>{const n=aa(t,e);if(e.props.kind==="elbow"){const r=dae(t,e,n);if(!(r!=null&&r.route))return cT(t,e,n);const o=r.swapOrder?r.B:r.A,a=r.swapOrder?r.A:r.B;return{type:"elbow",bindings:n,start:{handle:o.target,point:r.route.points[0],arrowhead:e.props.arrowheadStart},end:{handle:a.target,point:r.route.points[r.route.points.length-1],arrowhead:e.props.arrowheadEnd},elbow:r,route:r.route,isValid:!0}}return M8e(e)?cT(t,e,n):p8e(t,e,n)},{areRecordsEqual:(t,e)=>t.props===e.props,areResultsEqual:Awe});function Al(t,e){const n=typeof e=="string"?e:e.id;return D8e.get(t,n)}function kh(t,e,n){var i,l;const r=t.getShapePageTransform(e),o=OL(t,(i=n.start)==null?void 0:i.toId,(l=n.end)==null?void 0:l.toId),a=n.start?tH(t,r,n.start,o==="double-bound"||o==="start-contains-end"):R.From(e.props.start),s=n.end?tH(t,r,n.end,o==="double-bound"||o==="end-contains-start"):R.From(e.props.end);return{start:a,end:s}}function Kb(t,e,n,r){const o=typeof e=="string"?e:e.id,a=typeof n=="string"?n:n.id,s=t.getBindingsFromShape(o,"arrow").filter(l=>l.props.terminal===r.terminal);s.length>1&&t.deleteBindings(s.slice(1));const i=s[0];i?t.updateBinding({...i,toId:a,props:r}):t.createBinding({type:"arrow",fromId:o,toId:a,props:r})}function by(t,e,n){const r=t.getBindingsFromShape(e,"arrow").filter(o=>o.props.terminal===n);t.deleteBindings(r)}const Ih=10,M0=10,N8e=10,Bi={s:2,m:3.5,l:5,xl:10};function OL(t,e,n){if(!e||!n)return"safe";if(e===n)return"double-bound";const r=t.getShapePageBounds(e),o=t.getShapePageBounds(n);if(r&&o){if(r.contains(o))return"start-contains-end";if(o.contains(r))return"end-contains-start"}return"safe"}function L8e(t){return t.getSelectedShapeIds().map(r=>t.getShape(r)).filter(r=>{if(!r)return!1;if(t.isShapeOfType(r,"arrow")){const o=aa(t,r);if(o.start||o.end)return!1}return!0})}const pae=()=>{const t=ue();return ce("threeStackableItems",()=>L8e(t).length>2,[t])},rd=()=>{const t=ue();return ce("isInSelectState",()=>t.isIn("select"),[t])},fae=()=>{const t=ue();return ce("allow group",()=>{const e=t.getSelectedShapes();if(e.length<2)return!1;for(const n of e)if(t.isShapeOfType(n,"arrow")){const r=aa(t,n);if(r.start&&!e.some(o=>o.id===r.start.toId)||r.end&&!e.some(o=>o.id===r.end.toId))return!1}return!0},[t])},mae=()=>{const t=ue();return ce("allowUngroup",()=>t.getSelectedShapeIds().some(e=>{var n;return((n=t.getShape(e))==null?void 0:n.type)==="group"}),[t])},j8e=typeof window<"u"&&"navigator"in window&&!!navigator.clipboard&&!!navigator.clipboard.read;function hae(t,e){const n=ue();return ce("selectedShapes",()=>n.getSelectedShapes().length>=t,[n,t,e])}function js(t,e){const n=ue();return ce("selectedShapes",()=>{const r=n.getSelectedShapes().filter(o=>!n.isShapeOrAncestorLocked(o)).length;return t===void 0?r:r>=t},[n])}function B8e(){const t=ue();return ce("showAutoSizeToggle",()=>{const e=t.getSelectedShapes();return e.length===1&&t.isShapeOfType(e[0],"text")&&e[0].props.autoSize===!1},[t])}function gae(){const t=ue();return ce("hasLinkShapeSelected",()=>{const e=t.getOnlySelectedShape();return!!(e&&e.type!=="embed"&&"url"in e.props&&!e.isLocked)},[t])}function F8e(){const t=ue();return ce("onlyFlippableShape",()=>{const e=t.getOnlySelectedShape();return e&&(t.isShapeOfType(e,"group")||t.isShapeOfType(e,"image")||t.isShapeOfType(e,"arrow")||t.isShapeOfType(e,"line")||t.isShapeOfType(e,"draw"))},[t])}function bae(){const t=ue();return ce("useCanRedo",()=>t.getCanRedo(),[t])}function yae(){const t=ue();return ce("useCanUndo",()=>t.getCanUndo(),[t])}function z8e(){return g.jsxs(g.Fragment,{children:[g.jsx(U8e,{}),g.jsx(q8e,{}),g.jsx(H8e,{}),g.jsx($8e,{}),g.jsx(V8e,{}),g.jsx(W8e,{}),g.jsx(Y8e,{}),g.jsx(X8e,{})]})}function U8e(){const t=js(2),e=rd(),n=t&&e;return g.jsxs(g.Fragment,{children:[g.jsx(Ie,{actionId:"align-left",disabled:!n}),g.jsx(Ie,{actionId:"align-center-horizontal",disabled:!n}),g.jsx(Ie,{actionId:"align-right",disabled:!n}),g.jsx(Ie,{actionId:"stretch-horizontal",disabled:!n}),g.jsx(Ie,{actionId:"align-top",disabled:!n}),g.jsx(Ie,{actionId:"align-center-vertical",disabled:!n}),g.jsx(Ie,{actionId:"align-bottom",disabled:!n}),g.jsx(Ie,{actionId:"stretch-vertical",disabled:!n})]})}function q8e(){const t=js(3),e=rd(),n=t&&e;return g.jsxs(g.Fragment,{children:[g.jsx(Ie,{actionId:"distribute-horizontal",disabled:!n}),g.jsx(Ie,{actionId:"distribute-vertical",disabled:!n})]})}function H8e(){const t=pae(),e=rd(),n=t&&e;return g.jsxs(g.Fragment,{children:[g.jsx(Ie,{actionId:"stack-horizontal",disabled:!n}),g.jsx(Ie,{actionId:"stack-vertical",disabled:!n})]})}function $8e(){const t=js(1),e=rd(),n=t&&e;return g.jsxs(g.Fragment,{children:[g.jsx(Ie,{actionId:"send-to-back",disabled:!n}),g.jsx(Ie,{actionId:"send-backward",disabled:!n}),g.jsx(Ie,{actionId:"bring-forward",disabled:!n}),g.jsx(Ie,{actionId:"bring-to-front",disabled:!n})]})}function V8e(){return fa()<Hr.TABLET_SM?g.jsx(G8e,{}):g.jsx(K8e,{})}function G8e(){const t=ue(),e=ce("zoom is 1",()=>t.getZoomLevel()===1,[t]);return g.jsx(Ie,{actionId:"zoom-to-100",disabled:e})}function K8e(){const t=js(1),e=rd(),n=t&&e;return g.jsx(Ie,{actionId:"rotate-ccw",disabled:!n})}function W8e(){const t=js(1),e=rd(),n=t&&e;return g.jsx(Ie,{actionId:"rotate-cw",disabled:!n})}function Y8e(){const t=gae(),e=rd(),n=t&&e;return g.jsx(Ie,{actionId:"edit-link",disabled:!n})}function X8e(){const t=fae(),e=mae();return t?g.jsx(nH,{}):e?g.jsx(J8e,{}):g.jsx(nH,{})}function nH(){const t=js(2),e=rd(),n=t&&e;return g.jsx(Ie,{actionId:"group",disabled:!n})}function J8e(){return g.jsx(Ie,{actionId:"ungroup"})}const Q8e=w.memo(function({children:e}){const n=it(),r=fa(),o=Qi(),{orientation:a}=Lv(),s=w.useRef(null);eu(s);const i=ue(),l=ce("should display quick actions when in readonly",()=>i.isInAny("hand","zoom"),[i]),c=e??g.jsx(z8e,{});if(!(o&&!l))return g.jsxs(Gf,{id:"actions-menu",children:[g.jsx(Kf,{children:g.jsx(pr,{type:"icon","data-testid":"actions-menu.button",title:n("actions-menu.title"),children:g.jsx(kt,{icon:a==="horizontal"?"dots-vertical":"dots-horizontal",small:!0})})}),g.jsx(Wf,{side:a==="horizontal"?r>=Hr.TABLET?"bottom":"top":"right",sideOffset:6,children:g.jsx(Ds,{ref:s,label:n("actions-menu.title"),className:"tlui-actions-menu","data-testid":"actions-menu.content",orientation:"grid",children:g.jsx(Rs,{type:"icons",sourceId:"actions-menu",children:c})})})]})});function Z8e(){const t=ue(),e=RC(),n=ce("isSelectToolActive",()=>t.getCurrentToolId()==="select",[t]),r=ce("isSinglePageMode",()=>t.options.maxPages<=1,[t]);return n?g.jsxs(g.Fragment,{children:[e&&g.jsx(LVe,{}),g.jsxs(Ht,{id:"modify",children:[g.jsx(yVe,{}),g.jsx(vVe,{}),g.jsx(EVe,{}),!r&&g.jsx(TVe,{})]}),g.jsx(Cse,{}),g.jsx(Ase,{}),g.jsx(Ht,{id:"select-all",children:g.jsx(_se,{})})]}):null}const e9e=w.memo(function({children:e,disabled:n=!1}){const r=ue(),o=it(),{Canvas:a}=cr(),s=w.useCallback(m=>{m.key==="Escape"&&(m.stopPropagation(),r.getContainer().focus())},[r]);w.useEffect(()=>()=>{document.body.removeEventListener("keydown",s,{capture:!0})},[s]);const i=w.useCallback(m=>{if(m){if(document.body.addEventListener("keydown",s,{capture:!0}),r.getInstanceState().isCoarsePointer){const h=r.getSelectedShapes(),{inputs:{currentPagePoint:y}}=r,v=r.getShapesAtPoint(y);if(!r.getSelectedShapes().length||!v.some(x=>h.includes(x))){const x=v.filter(S=>r.isShapeOrAncestorLocked(S));x.length&&r.select(...x.map(S=>S.id))}}}else{const h=r.getOnlySelectedShape();h&&r.isShapeOrAncestorLocked(h)&&r.setSelectedShapes([]),r.timers.requestAnimationFrame(()=>{document.body.removeEventListener("keydown",s,{capture:!0})})}},[r,s]),l=Ao(),[c,d]=td("context menu",i),u=e??g.jsx(Z8e,{});return g.jsxs(XBe,{dir:"ltr",onOpenChange:d,modal:!1,children:[g.jsx(JBe,{onContextMenu:void 0,dir:"ltr",disabled:n,children:a?g.jsx(a,{}):null}),c&&g.jsx(QBe,{container:l,children:g.jsx(ZBe,{className:"tlui-menu tlui-scrollable","data-testid":"context-menu","aria-label":o("context-menu.title"),alignOffset:-4,collisionPadding:4,onContextMenu:Nt,children:g.jsx(Rs,{type:"context-menu",sourceId:"context-menu",children:u})})})]})}),t9e=2e3,n9e=5e3,r9e=Co(function(){const e=ue(),{isChatting:n,chatMessage:r}=e.getInstanceState(),o=w.useRef(-1),[a,s]=w.useState("");return w.useEffect(()=>{if(!n&&r||n){const l=n?n9e:t9e;o.current=e.timers.setTimeout(()=>{e.updateInstanceState({chatMessage:"",isChatting:!1}),s(""),e.focus()},l)}return()=>{clearTimeout(o.current)}},[e,r,n]),n?g.jsx(a9e,{value:a,setValue:s,chatMessage:r}):r.trim()?g.jsx(o9e,{chatMessage:r}):null});function vae(t){const e=ue();w.useLayoutEffect(()=>{var s;if(!t.current)return;const{x:r,y:o}=e.inputs.currentScreenPoint;(s=t.current)==null||s.style.setProperty("transform",`translate(${r}px, ${o}px)`);function a(i){var d;const{minX:l,minY:c}=e.getViewportScreenBounds();(d=t.current)==null||d.style.setProperty("transform",`translate(${i.clientX-l}px, ${i.clientY-c}px)`)}return window.addEventListener("pointermove",a),()=>{window.removeEventListener("pointermove",a)}},[t,e])}const o9e=({chatMessage:t})=>{const e=ue(),n=w.useRef(null);return vae(n),g.jsx("div",{ref:n,className:"tl-cursor-chat tl-cursor-chat__bubble",style:{backgroundColor:e.user.getColor()},children:t})},a9e=Co(function({chatMessage:e,value:n,setValue:r}){const o=ue(),a=it(),s=w.useRef(null),i=e||a("cursor-chat.type-to-chat");vae(s),w.useLayoutEffect(()=>{const m=s.current;if(!m)return;const h=o.textMeasure.measureText(n||i,{fontFamily:"var(--font-body)",fontSize:12,fontWeight:"500",fontStyle:"normal",maxWidth:null,lineHeight:1,padding:"6px"});m.style.setProperty("width",h.w+"px")},[o,n,i]),w.useLayoutEffect(()=>{const m=o.timers.requestAnimationFrame(()=>{var h;(h=s.current)==null||h.focus()});return()=>{cancelAnimationFrame(m)}},[o]);const l=w.useCallback(()=>{o.updateInstanceState({isChatting:!1}),o.focus()},[o]),c=w.useCallback(m=>{const{value:h}=m.target;r(h.slice(0,64)),o.updateInstanceState({chatMessage:h})},[o,r]),d=w.useCallback(m=>{const h=s.current;if(!h)return;const{value:y}=h;switch(m.key){case"Enter":{if(Nt(m),m.stopPropagation(),!y){l();return}r("");break}case"Escape":{Nt(m),m.stopPropagation(),l();break}}},[l,r]),u=w.useCallback(m=>{m.stopPropagation()},[]);return g.jsx("input",{ref:s,className:"tl-cursor-chat",style:{backgroundColor:o.user.getColor()},onBlur:l,onChange:c,onKeyDown:d,onPaste:u,value:n,placeholder:i,spellCheck:!1})});function SR({checked:t}){const e=it();return g.jsx(Wc,{"data-checked":!!t,label:e(t?"ui.checked":"ui.unchecked"),icon:t?"check":"none",className:"tlui-button__icon",small:!0})}function Bv({id:t,kbd:e,label:n,lang:r,readonlyOk:o,onSelect:a,toggle:s=!1,disabled:i=!1,checked:l=!1}){const{type:c,sourceId:d}=MC(),u=Qi(),m=it();if(u&&!o)return null;const h=L0(n,c),y=h?m(h):void 0;switch(c){case"menu":return g.jsxs(Dre,{dir:"ltr",lang:r,className:"tlui-button tlui-button__menu tlui-button__checkbox",title:y,onSelect:v=>{a==null||a(d),Nt(v)},disabled:i,checked:l,children:[g.jsx(Wc,{small:!0,label:m(l?"ui.checked":"ui.unchecked"),icon:s?l?"toggle-on":"toggle-off":l?"check":"none"}),y&&g.jsx("span",{className:"tlui-button__label",draggable:!1,children:y}),e&&g.jsx(Vy,{children:e})]});case"context-menu":return g.jsxs(tFe,{className:"tlui-button tlui-button__menu tlui-button__checkbox",dir:"ltr",lang:r,title:y,onSelect:v=>{a(d),Nt(v)},disabled:i,checked:l,children:[g.jsx(Wc,{small:!0,label:m(l?"ui.checked":"ui.unchecked"),icon:s?l?"toggle-on":"toggle-off":l?"check":"none"}),y&&g.jsx("span",{className:"tlui-button__label",draggable:!1,children:y}),e&&g.jsx(Vy,{children:e})]},t);default:return null}}function ps({id:t,disabled:e=!1,label:n,size:r="small",children:o}){const{type:a,sourceId:s}=MC(),i=Ao(),l=it(),c=n?typeof n=="string"?n:n[a]??n.default:void 0,d=c?l(c):void 0;switch(a){case"menu":return g.jsxs(SUe,{id:`${s}-sub.${t}`,children:[g.jsx(EUe,{id:`${s}-sub.${t}-button`,disabled:e,label:d,title:d}),g.jsx(TUe,{id:`${s}-sub.${t}-content`,size:r,children:o})]});case"context-menu":return e?null:g.jsxs(s9e,{id:`${s}-sub.${t}`,children:[g.jsx(xre,{dir:"ltr",disabled:e,asChild:!0,children:g.jsxs(nn,{"data-testid":`${s}-sub.${t}-button`,type:"menu",className:"tlui-menu__submenu__trigger",children:[g.jsx(xo,{children:d}),g.jsx(kt,{icon:"chevron-right",small:!0})]})}),g.jsx(sL,{container:i,children:g.jsx(Sre,{"data-testid":`${s}-sub.${t}-content`,className:"tlui-menu tlui-menu__submenu__content",alignOffset:-1,sideOffset:-4,collisionPadding:4,"data-size":r,children:o})})]});default:return o}}function s9e({id:t,children:e}){const[n,r]=td(t);return g.jsx(vre,{open:n,onOpenChange:r,children:e})}function i9e({customDebugFlags:t,customFeatureFlags:e}){const n=ue(),{addToast:r}=nd(),{addDialog:o}=jv(),[a,s]=bt.useState(!1);return g.jsxs(g.Fragment,{children:[g.jsxs(Ht,{id:"items",children:[g.jsx(dn,{id:"hard-reset",onSelect:BY,label:"Hard reset"}),g.jsx(dn,{id:"add-toast",onSelect:()=>{r({id:Ln(),title:"Something good happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"success"}),r({id:Ln(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"info",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),r({id:Ln(),title:"Something maybe bad happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"warning",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),r({id:Ln(),title:"Something bad happened",severity:"error",keepOpen:!0})},label:"Show toast"}),g.jsx(dn,{id:"show-dialog",label:"Show dialog",onSelect:()=>{o({component:({onClose:i})=>g.jsx(u9e,{displayDontShowAgain:!0,onCancel:()=>i(),onContinue:()=>i()}),onClose:()=>{}})}}),g.jsx(dn,{id:"create-shapes",label:"Create 100 shapes",onSelect:()=>d9e(n,100)}),g.jsx(dn,{id:"count-nodes",label:"Count shapes / nodes",onSelect:()=>{var c;const i=n.getSelectedShapes(),l=i.length===0?n.getRenderingShapes():i;window.alert(`Shapes ${l.length}, DOM nodes:${(c=document.querySelector(".tl-shapes").querySelectorAll("*"))==null?void 0:c.length}`)}}),(()=>{if(a)throw Error("oh no!");return null})(),g.jsx(dn,{id:"throw-error",onSelect:()=>s(!0),label:"Throw error"})]}),g.jsxs(Ht,{id:"flags",children:[g.jsx(l9e,{customDebugFlags:t}),g.jsx(c9e,{customFeatureFlags:e})]})]})}function l9e(t){const e=Object.values(t.customDebugFlags??Ur);return e.length?g.jsx(ps,{id:"debug flags",label:"Debug flags",children:g.jsx(Ht,{id:"debug flags",children:e.map(n=>g.jsx(xae,{flag:n},n.name))})}):null}function c9e(t){const e=Object.values(t.customFeatureFlags??y2e);return e.length?g.jsx(ps,{id:"feature flags",label:"Feature flags",children:g.jsx(Ht,{id:"feature flags",children:e.map(n=>g.jsx(xae,{flag:n},n.name))})}):null}function u9e({title:t="title",body:e="hello hello hello",cancel:n="Cancel",confirm:r="Continue",displayDontShowAgain:o=!1,maxWidth:a="350",onCancel:s,onContinue:i}){const[l,c]=bt.useState(!1);return g.jsxs(g.Fragment,{children:[g.jsxs(IC,{children:[g.jsx(PC,{children:t}),g.jsx(OC,{})]}),g.jsx(P0,{style:{maxWidth:a},children:e}),g.jsxs(wL,{className:"tlui-dialog__footer__actions",children:[o&&g.jsxs(nn,{type:"normal",onClick:()=>c(!l),style:{marginRight:"auto"},children:[g.jsx(SR,{checked:l}),g.jsx(xo,{children:"Dont show again"})]}),g.jsx(nn,{type:"normal",onClick:s,children:g.jsx(xo,{children:n})}),g.jsx(nn,{type:"primary",onClick:async()=>i(),children:g.jsx(xo,{children:r})})]})]})}const xae=Co(function({flag:e,onChange:n}){const r=e.get();return g.jsx(Bv,{id:e.name,title:e.name,label:e.name.replace(/([a-z0-9])([A-Z])/g,o=>`${o[0]} ${o[1].toLowerCase()}`).replace(/^[a-z]/,o=>o.toUpperCase()),checked:r,onSelect:()=>{e.set(!r),n==null||n(!r)}})});let rH=0;function d9e(t,e){const n=t.options.adjacentShapeMargin,r=Array(e),o=Math.floor(Math.sqrt(e));for(let a=0;a<e;a++)rH++,r[a]={id:lr("box"+rH),type:"geo",x:a%o*(100+n),y:Math.floor(a/o)*(100+n)};t.run(()=>{t.createShapes(r).setSelectedShapes(r.map(a=>a.id))})}function p9e({children:t}){const e=t??g.jsx(i9e,{});return g.jsxs(DC,{id:"debug",children:[g.jsx(NC,{children:g.jsx(nn,{type:"icon",title:"Debug menu",children:g.jsx(kt,{icon:"dots-horizontal"})})}),g.jsx(LC,{side:"top",align:"end",alignOffset:0,children:g.jsx(Rs,{type:"menu",sourceId:"debug-panel",children:e})})]})}const f9e=w.memo(function(){const{DebugMenu:e}=ru(),n=w.useRef(null);return eu(n),g.jsxs("footer",{ref:n,className:"tlui-debug-panel",children:[g.jsx(h9e,{}),g.jsx(g9e,{}),e&&g.jsx(e,{})]})});function m9e(t=!0){const[e,n]=w.useState(0),r=ue();w.useEffect(()=>{if(!t)return;const o=()=>n(a=>a+1);return r.on("tick",o),()=>{r.off("tick",o)}},[r,t])}const h9e=Co(function(){m9e();const e=ue(),n=e.getPath(),r=e.getHoveredShape(),o=e.getOnlySelectedShape(),a=n==="select.idle"||!n.includes("select.")?r:o,s=a&&n.includes("select.")?` / ${a.type||""}${"geo"in a.props?" / "+a.props.geo:""} / [${R.ToInt(e.getPointInShapeSpace(a,e.inputs.currentPagePoint))}]`:"",i=n.startsWith("select.")&&!n.includes(".idle")?` / [${R.ToInt(e.inputs.originPagePoint)}]  [${R.ToInt(e.inputs.currentPagePoint)}] = ${R.Dist(e.inputs.originPagePoint,e.inputs.currentPagePoint).toFixed(0)}`:"";return g.jsx("div",{className:"tlui-debug-panel__current-state",children:`${n}${s}${i}`})});function g9e(){const t=ue(),e=ce("show_fps",()=>Ur.showFps.get(),[Ur]),n=w.useRef(null);return w.useEffect(()=>{if(!e)return;const r=250;let o=0,a=-1,s=performance.now(),i=0,l=0,c=!1;function d(){if(l++,i=performance.now()-s,i>r){const u=Math.round(l*(r/i)*(1e3/r));u>o&&(o=u);const m=o*.75;(u<m&&!c||u>=m&&c)&&(c=!c),n.current.innerHTML=`FPS ${u.toString()}`,n.current.className="tlui-debug-panel__fps"+(c?" tlui-debug-panel__fps__slow":""),i-=r,l=0,s=performance.now()}a=t.timers.requestAnimationFrame(d)}return d(),()=>{cancelAnimationFrame(a)}},[e,t]),e?g.jsx("div",{ref:n}):null}function b9e(){const t=ue(),e=ce("follow",()=>t.getInstanceState().followingUserId,[t]);return e?g.jsx(y9e,{userId:e}):null}function y9e({userId:t}){const e=zw(t);return e?g.jsx("div",{className:"tlui-following-indicator",style:{borderColor:e.color}}):null}const v9e=w.memo(function(){const e=fa(),n=it(),r=w.useRef(null);eu(r);const{MainMenu:o,QuickActions:a,ActionsMenu:s,PageMenu:i}=ru(),l=ue(),c=ce("isSinglePageMode",()=>l.options.maxPages<=1,[l]),d=l.options.actionShortcutsLocation==="menu"?!0:l.options.actionShortcutsLocation==="toolbar"?!1:e>=Hr.TABLET;return!o&&!i&&!d?null:g.jsx("nav",{ref:r,className:"tlui-menu-zone",children:g.jsxs(pm,{children:[o&&g.jsx(o,{}),i&&!c&&g.jsx(i,{}),d?g.jsxs(Ds,{orientation:"horizontal",label:n("actions-menu.title"),children:[a&&g.jsx(a,{}),s&&g.jsx(s,{})]}):null]})})}),x9e=({id:t,component:e,preventBackgroundClose:n})=>{const{removeDialog:r}=jv(),o=w.useRef(!1),a=Ao(),s=w.useCallback(i=>{i||r(t)},[t,r]);return g.jsx(E6e,{onOpenChange:s,defaultOpen:!0,children:g.jsx(T6e,{container:a,children:g.jsx(w6e,{dir:"ltr",className:"tlui-dialog__overlay",onClick:i=>{o.current||!n&&i.target===i.currentTarget&&s(!1)},children:g.jsx(C6e,{dir:"ltr",className:"tlui-dialog__content","aria-describedby":void 0,onMouseDown:()=>o.current=!0,onMouseUp:()=>o.current=!1,onInteractOutside:i=>{o.current=!1,n&&i.preventDefault()},children:g.jsx(e,{onClose:()=>{o.current=!1,s(!1)}})})})})})},S9e=w.memo(function(){const{dialogs:e}=jv();return ce("dialogs",()=>e.get(),[e]).map(r=>g.jsx(x9e,{...r},r.id))});function E9e(){const t=ue(),e=ou(),[n,r]=w.useState(!1),o=w.useRef(!1);return Rf("toggle showback to content",()=>{const a=o.current,s=t.getCurrentPageShapeIds();let i=!1;s.size&&(i=s.size===t.getCulledShapes().size),a!==i&&(r(i),o.current=i)},[t]),n?g.jsx(Ie,{actionId:"back-to-content",onSelect:()=>{e["back-to-content"].onSelect("helper-buttons"),r(!1)}}):null}function T9e(){const t=ue();return ce("is pen mode",()=>t.getInstanceState().isPenMode,[t])?g.jsx(Ie,{actionId:"exit-pen-mode"}):null}function w9e(){const t=ue(),e=ou();return ce("is following user",()=>!!t.getInstanceState().followingUserId,[t])?g.jsx(dn,{...e["stop-following"]}):null}function C9e(){return g.jsxs(g.Fragment,{children:[g.jsx(T9e,{}),g.jsx(E9e,{}),g.jsx(w9e,{})]})}function A9e({children:t}){const e=t??g.jsx(C9e,{});return g.jsx("div",{className:"tlui-helper-buttons",children:g.jsx(Rs,{type:"helper-buttons",sourceId:"helper-buttons",children:e})})}const _9e=[{colorScheme:"light",label:"theme.light"},{colorScheme:"dark",label:"theme.dark"},{colorScheme:"system",label:"theme.system"}];function k9e(){const t=ue(),e=$r(),n=ce("colorScheme",()=>t.user.getUserPreferences().colorScheme??(t.user.getIsDarkMode()?"dark":"light"),[t]);return g.jsx(ps,{id:"help menu color-scheme",label:"menu.theme",children:g.jsx(Ht,{id:"theme",children:_9e.map(({colorScheme:r,label:o})=>g.jsx(Bv,{id:`color-scheme-${r}`,label:o,checked:r===n,readonlyOk:!0,onSelect:()=>{t.user.updateUserPreferences({colorScheme:r}),e("color-scheme",{source:"menu",value:r})}},r))})})}function Sae(){const t=lo(),e=$r(),n=ce("locale",()=>t==null?void 0:t.user.getLocale(),[t]);return t?g.jsx(ps,{id:"help menu language",label:"menu.language",children:g.jsx(Ht,{id:"languages",className:"tlui-language-menu",children:f0.map(({locale:r,label:o})=>g.jsx(Bv,{id:`language-${r}`,lang:r,title:r,label:o,checked:r===n,readonlyOk:!0,onSelect:()=>{t.user.updateUserPreferences({locale:r}),e("change-language",{source:"menu",locale:r})}},r))})}):null}function I9e(){return g.jsxs(g.Fragment,{children:[g.jsx(Sae,{}),g.jsx(Eae,{})]})}function Eae(){const{KeyboardShortcutsDialog:t}=ru(),{addDialog:e}=jv(),n=w.useCallback(()=>{t&&e({component:t})},[e,t]);return t?g.jsx(dn,{id:"keyboard-shortcuts-button",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:n}):null}const P9e=["auto","trackpad","mouse"];function O9e(){const t=ue(),e=$r(),n=ce("inputMode",()=>t.user.getUserPreferences().inputMode,[t]),r=ce("wheelBehavior",()=>t.getCameraOptions().wheelBehavior,[t]),o=s=>s==="auto"?n===null:n===s,a=(s,i)=>s==="auto"?`action.toggle-auto-${i}`:s==="trackpad"?"action.toggle-trackpad":"action.toggle-mouse";return g.jsx(ps,{id:"help menu input-mode",label:"menu.input-mode",children:g.jsx(Ht,{id:"peripheral-mode",children:P9e.map(s=>g.jsx(Bv,{id:`peripheral-mode-${s}`,label:a(s,r),checked:o(s),readonlyOk:!0,onSelect:()=>{switch(e("input-mode",{source:"menu",value:s}),s){case"auto":t.user.updateUserPreferences({inputMode:null});break;case"trackpad":t.user.updateUserPreferences({inputMode:"trackpad"});break;case"mouse":t.user.updateUserPreferences({inputMode:"mouse"});break}}},s))})})}function M9e(){return g.jsxs(g.Fragment,{children:[g.jsxs(Ht,{id:"basic",children:[g.jsx(D9e,{}),g.jsx(B9e,{}),g.jsx(R9e,{}),g.jsx(F9e,{})]}),g.jsx(z9e,{})]})}function R9e(){return g.jsxs(ps,{id:"export-all-as",label:"context-menu.export-all-as",size:"small",children:[g.jsxs(Ht,{id:"export-all-as-group",children:[g.jsx(Ie,{actionId:"export-all-as-svg"}),g.jsx(Ie,{actionId:"export-all-as-png"})]}),g.jsx(Ht,{id:"export-all-as-bg",children:g.jsx($L,{})})]})}function D9e(){return g.jsxs(ps,{id:"edit",label:"menu.edit",children:[g.jsx(j9e,{}),g.jsx(Cse,{}),g.jsx(Ase,{}),g.jsx(N9e,{}),g.jsx(L9e,{}),g.jsx(Ht,{id:"select-all",children:g.jsx(_se,{})})]})}function N9e(){return g.jsxs(Ht,{id:"misc",children:[g.jsx(bse,{}),g.jsx(yse,{}),g.jsx(hse,{}),g.jsx(mse,{}),g.jsx(vse,{}),g.jsx(xse,{}),g.jsx(Ise,{}),g.jsx(kse,{}),g.jsx(gse,{})]})}function L9e(){return g.jsxs(Ht,{id:"lock",children:[g.jsx(Sse,{}),g.jsx(pVe,{})]})}function j9e(){const t=yae(),e=bae();return g.jsxs(Ht,{id:"undo-redo",children:[g.jsx(Ie,{actionId:"undo",disabled:!t}),g.jsx(Ie,{actionId:"redo",disabled:!e})]})}function B9e(){return g.jsx(ps,{id:"view",label:"menu.view",children:g.jsxs(Ht,{id:"view-actions",children:[g.jsx(Ie,{actionId:"zoom-in"}),g.jsx(Ie,{actionId:"zoom-out"}),g.jsx(Ese,{}),g.jsx(Tse,{}),g.jsx(wse,{})]})})}function F9e(){return g.jsxs(g.Fragment,{children:[g.jsx(Ie,{actionId:"insert-embed"}),g.jsx(Ie,{actionId:"insert-media"})]})}function z9e(){return g.jsxs(Ht,{id:"preferences",children:[g.jsxs(ps,{id:"preferences",label:"menu.preferences",children:[g.jsxs(Ht,{id:"preferences-actions",children:[g.jsx(wVe,{}),g.jsx(CVe,{}),g.jsx(AVe,{}),g.jsx(_Ve,{}),g.jsx(kVe,{}),g.jsx(IVe,{}),g.jsx(DVe,{}),g.jsx(NVe,{}),g.jsx(RVe,{})]}),g.jsxs(Ht,{id:"user-interface-submenus",children:[g.jsx(O9e,{}),g.jsx(k9e,{}),g.jsx(jVe,{})]})]}),g.jsx(Sae,{}),g.jsx(Eae,{})]})}const U9e=w.memo(function({children:e}){const n=Ao(),[r,o]=td("main menu"),a=it(),s=e??g.jsx(M9e,{});return g.jsxs(iL,{dir:"ltr",open:r,onOpenChange:o,modal:!1,children:[g.jsx(lL,{asChild:!0,dir:"ltr",children:g.jsx(nn,{type:"icon","data-testid":"main-menu.button",title:a("menu.title"),children:g.jsx(kt,{icon:"menu",small:!0})})}),g.jsx(EC,{container:n,children:g.jsx(cL,{className:"tlui-menu",side:"bottom",align:"start",collisionPadding:4,alignOffset:0,sideOffset:6,children:g.jsx(Rs,{type:"menu",sourceId:"main-menu",children:s})})})]})}),qP={};function Wb(t){if(qP[t])return qP[t];const n=document.createElement("canvas").getContext("2d");n.fillStyle=t,n.fillRect(0,0,1,1);const[r,o,a,s]=n.getImageData(0,0,1,1).data,i=new Float32Array([r/255,o/255,a/255,s/255]);return qP[t]=i,i}const M1=10,Tae=24*M1+12+48;function bh(t,{center:e,radius:n,numArcSegments:r=20,startAngle:o=0,endAngle:a=mr,offset:s=0}){const i=(a-o)/r;let l=s;for(let c=o;c<a;c+=i)t[l++]=e.x,t[l++]=e.y,t[l++]=e.x+Math.cos(c)*n,t[l++]=e.y+Math.sin(c)*n,t[l++]=e.x+Math.cos(c+i)*n,t[l++]=e.y+Math.sin(c+i)*n;return t}function yh(t,e,n,r,o,a){t[e++]=n,t[e++]=r,t[e++]=n,t[e++]=r+a,t[e++]=n+o,t[e++]=r,t[e++]=n+o,t[e++]=r,t[e++]=n,t[e++]=r+a,t[e++]=n+o,t[e++]=r+a}function q9e(t,e,n){const r=M1;n=Math.min(n,Math.min(e.w,e.h)/2);const o=Be.ExpandBy(e,-n);if(o.w<=0||o.h<=0)return bh(t,{center:e.center,radius:n,numArcSegments:M1*4}),M1*4*6;let a=0;return yh(t,a,o.minX,o.minY,o.w,o.h),a+=12,yh(t,a,o.minX,e.minY,o.w,n),a+=12,yh(t,a,o.maxX,o.minY,n,o.h),a+=12,yh(t,a,o.minX,o.maxY,o.w,n),a+=12,yh(t,a,e.minX,o.minY,n,o.h),a+=12,bh(t,{numArcSegments:r,offset:a,center:o.point,radius:n,startAngle:Un,endAngle:Un*1.5}),a+=r*6,bh(t,{numArcSegments:r,offset:a,center:R.Add(o.point,new R(o.w,0)),radius:n,startAngle:Un*1.5,endAngle:mr}),a+=r*6,bh(t,{numArcSegments:r,offset:a,center:R.Add(o.point,o.size),radius:n,startAngle:0,endAngle:yo}),a+=r*6,bh(t,{numArcSegments:r,offset:a,center:R.Add(o.point,new R(0,o.h)),radius:n,startAngle:yo,endAngle:Un}),Tae}function H9e(t){if(!t)throw new Error("Canvas element not found");const e=t.getContext("webgl2",{premultipliedAlpha:!1});if(!e)throw new Error("Failed to get webgl2 context");const n=`#version 300 es
  precision mediump float;
  
  in vec2 shapeVertexPosition;

	uniform vec4 canvasPageBounds;

	// taken (with thanks) from
	// https://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html
  void main() {
		// convert the position from pixels to 0.0 to 1.0
		vec2 zeroToOne = (shapeVertexPosition - canvasPageBounds.xy) / canvasPageBounds.zw;
	
		// convert from 0->1 to 0->2
		vec2 zeroToTwo = zeroToOne * 2.0;
	
		// convert from 0->2 to -1->+1 (clipspace)
		vec2 clipSpace = zeroToTwo - 1.0;
	
		gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
  }`,r=e.createShader(e.VERTEX_SHADER);if(!r)throw new Error("Failed to create vertex shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Failed to compile vertex shader");const o=`#version 300 es
  precision mediump float;
  
	uniform vec4 fillColor;
  out vec4 outputColor;

  void main() {
	outputColor = fillColor;
  }`,a=e.createShader(e.FRAGMENT_SHADER);if(!a)throw new Error("Failed to create fragment shader");if(e.shaderSource(a,o),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Error("Failed to compile fragment shader");const s=e.createProgram();if(!s)throw new Error("Failed to create program");if(e.attachShader(s,r),e.attachShader(s,a),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS))throw new Error("Failed to link program");e.useProgram(s);const i=e.getAttribLocation(s,"shapeVertexPosition");if(i<0)throw new Error("Failed to get shapeVertexPosition attribute location");e.enableVertexAttribArray(i);const l=e.getUniformLocation(s,"canvasPageBounds"),c=e.getUniformLocation(s,"fillColor");if(!e.createBuffer())throw new Error("Failed to create buffer");if(!e.createBuffer())throw new Error("Failed to create buffer");return{context:e,selectedShapes:qS(e,1024),unselectedShapes:qS(e,4096),viewport:qS(e,Tae),collaborators:qS(e,1024),prepareTriangles(m,h){e.bindBuffer(e.ARRAY_BUFFER,m.buffer),e.bufferData(e.ARRAY_BUFFER,m.vertices,e.STATIC_DRAW,0,h),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0)},drawTrianglesTransparently(m){e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.drawArrays(e.TRIANGLES,0,m/2),e.disable(e.BLEND)},drawTriangles(m){e.drawArrays(e.TRIANGLES,0,m/2)},setFillColor(m){e.uniform4fv(c,m)},setCanvasPageBounds(m){e.uniform4fv(l,m)}}}function qS(t,e){const n=t.createBuffer();if(!n)throw new Error("Failed to create buffer");return{buffer:n,vertices:new Float32Array(e)}}function oH(t,e,n){let r=t.vertices.length;for(;r<e+n.length;)r*=2;if(r!=t.vertices.length){const o=new Float32Array(r);o.set(t.vertices),t.vertices=o}t.vertices.set(n,e)}var $9e=Object.create,wae=Object.defineProperty,V9e=Object.getOwnPropertyDescriptor,G9e=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Cae=t=>{throw TypeError(t)},Aae=(t,e,n)=>e in t?wae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K9e=t=>[,,,$9e(null)],_ae=["class","method","getter","setter","accessor","field","value","get","set"],kae=t=>t!==void 0&&typeof t!="function"?Cae("Function expected"):t,W9e=(t,e,n,r,o)=>({kind:_ae[t],name:e,metadata:r,addInitializer:a=>n._?Cae("Already initialized"):o.push(kae(a||null))}),Y9e=(t,e)=>Aae(e,G9e("metadata"),t[3]),X9e=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},nu=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=_ae[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,V9e(o,n)),S=r.length-1;S>=0;S--)l=W9e(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,kae(s)&&(x[y]=s);return x&&wae(o,n,x),o},_u=(t,e,n)=>Aae(t,typeof e!="symbol"?e+"":e,n),Iae,Pae,Oae,Mae,Rae,Dae,Nae,Lae,jae,Bae,Zi;Bae=[oi],jae=[ke],Lae=[ke],Nae=[ke],Dae=[ke],Rae=[ke],Mae=[ke],Oae=[ke],Pae=[ke],Iae=[oi];class Fl{constructor(e,n,r){this.editor=e,this.elem=n,this.container=r,X9e(Zi,5,this),_u(this,"disposables",[]),_u(this,"gl"),_u(this,"shapeGeometryCache"),_u(this,"colors"),_u(this,"id",Ln()),_u(this,"canvasBoundingClientRect",Ir("canvasBoundingClientRect",new Be)),_u(this,"originPagePoint",new R),_u(this,"originPageCenter",new R),_u(this,"isInViewport",!1),this.gl=H9e(n),this.shapeGeometryCache=e.store.createComputedCache("webgl-geometry",o=>{const a=e.getShapeMaskedPageBounds(o.id);if(!a)return null;const s=new Float32Array(12);return yh(s,0,a.x,a.y,a.w,a.h),s}),this.colors=this._getColors(),this.disposables.push(this._listenForCanvasResize(),si("minimap render",this.render))}close(){return this.disposables.forEach(e=>e())}_getColors(){const e=getComputedStyle(this.editor.getContainer());return{shapeFill:Wb(e.getPropertyValue("--tl-color-text-3").trim()),selectFill:Wb(e.getPropertyValue("--tl-color-selected").trim()),viewportFill:Wb(e.getPropertyValue("--tl-color-muted-1").trim()),background:Wb(e.getPropertyValue("--tl-color-low").trim())}}updateColors(){this.colors=this._getColors()}getDpr(){return this.editor.getInstanceState().devicePixelRatio}getContentPageBounds(){const e=this.editor.getViewportPageBounds(),n=this.editor.getCurrentPageBounds();return n?Be.Expand(n,e):e}getContentScreenBounds(){const e=this.getContentPageBounds(),n=this.editor.pageToScreen(e.point),r=this.editor.pageToScreen(new R(e.maxX,e.maxY));return new Be(n.x,n.y,r.x-n.x,r.y-n.y)}_getCanvasBoundingRect(){const{x:e,y:n,width:r,height:o}=this.elem.getBoundingClientRect();return new Be(e,n,r,o)}getCanvasScreenBounds(){return this.canvasBoundingClientRect.get()}_listenForCanvasResize(){const e=new ResizeObserver(()=>{const n=this._getCanvasBoundingRect();this.canvasBoundingClientRect.set(n)});return e.observe(this.elem),e.observe(this.container),()=>e.disconnect()}getCanvasSize(){const e=this.canvasBoundingClientRect.get(),n=this.getDpr();return new R(e.width*n,e.height*n)}getCanvasClientPosition(){return this.canvasBoundingClientRect.get().point}getCanvasPageBounds(){const e=this.getCanvasScreenBounds(),n=this.getContentPageBounds(),r=e.width/e.height;let o=n.width,a=o/r;a<n.height&&(a=n.height,o=a*r);const s=new Be(0,0,o,a);return s.center=n.center,s}getZoom(){return this.getCanvasPageBounds().width/this.getCanvasScreenBounds().width}getCanvasPageBoundsArray(){const{x:e,y:n,w:r,h:o}=this.getCanvasPageBounds();return new Float32Array([e,n,r,o])}getMinimapPagePoint(e,n){const r=this.getCanvasPageBounds(),o=this.getCanvasScreenBounds();let a=e-o.x,s=n-o.y;return a*=r.width/o.width,s*=r.height/o.height,a+=r.minX,s+=r.minY,new R(a,s,1)}minimapScreenPointToPagePoint(e,n,r=!1,o=!1){const{editor:a}=this,s=a.getViewportPageBounds();let{x:i,y:l}=this.getMinimapPagePoint(e,n);if(o){const c=this.editor.getCurrentPageBounds()??new Be,d=c.minX-s.width/2,u=c.maxX+s.width/2,m=c.minY-s.height/2,h=c.maxY+s.height/2,y=Math.max(0,d+s.width-i),v=Math.max(0,-(u-s.width-i)),x=Math.max(0,m+s.height-l),S=Math.max(0,-(h-s.height-l));i+=(y-v)/2,l+=(x-S)/2,i=Lt(i,d,u),l=Lt(l,m,h)}if(r){const{originPagePoint:c}=this,d=Math.abs(i-c.x),u=Math.abs(l-c.y);d>u?l=c.y:i=c.x}return new R(i,l)}render(){var l;const e=this.gl.context,n=this.getCanvasSize();this.gl.setCanvasPageBounds(this.getCanvasPageBoundsArray()),this.elem.width=n.x,this.elem.height=n.y,e.viewport(0,0,n.x,n.y),e.clearColor(this.colors.background[0],this.colors.background[1],this.colors.background[2],1),e.clear(e.COLOR_BUFFER_BIT);const r=new Set(this.editor.getSelectedShapeIds()),o=this.colors;let a=0,s=0;const i=this.editor.getCurrentPageShapeIdsSorted();for(let c=0,d=i.length;c<d;c++){const u=i[c],m=this.shapeGeometryCache.get(u);if(!m)continue;const h=m.length,y=this.editor.getShape(u);if(y){const v=this.editor.getShapeUtil(y.type);if((l=v.hideInMinimap)!=null&&l.call(v,y))continue}r.has(u)?(oH(this.gl.selectedShapes,a,m),a+=h):(oH(this.gl.unselectedShapes,s,m),s+=h)}this.drawShapes(this.gl.unselectedShapes,s,o.shapeFill),this.drawShapes(this.gl.selectedShapes,a,o.selectFill),this.drawViewport(),this.drawCollaborators()}drawShapes(e,n,r){this.gl.prepareTriangles(e,n),this.gl.setFillColor(r),this.gl.drawTriangles(n)}drawViewport(){const e=this.editor.getViewportPageBounds(),n=q9e(this.gl.viewport.vertices,e,4*this.getZoom());this.gl.prepareTriangles(this.gl.viewport,n),this.gl.setFillColor(this.colors.viewportFill),this.gl.drawTrianglesTransparently(n),Nn.isSafari&&(this.gl.drawTrianglesTransparently(n),this.gl.drawTrianglesTransparently(n),this.gl.drawTrianglesTransparently(n))}drawCollaborators(){const e=this.editor.getCollaboratorsOnCurrentPage();if(!e.length)return;const n=20,r=n*6,o=r*e.length;this.gl.collaborators.vertices.length<o&&(this.gl.collaborators.vertices=new Float32Array(o));const a=this.gl.collaborators.vertices;let s=0;const i=this.getZoom();for(const{cursor:l}of e)l&&(bh(a,{center:R.From(l),radius:3*i,offset:s,numArcSegments:n}),s+=r);this.gl.prepareTriangles(this.gl.collaborators,o),s=0;for(const{color:l}of e)this.gl.setFillColor(Wb(l)),this.gl.context.drawArrays(this.gl.context.TRIANGLES,s/2,r/2),s+=r}}Zi=K9e();nu(Zi,1,"close",Bae,Fl);nu(Zi,1,"getDpr",jae,Fl);nu(Zi,1,"getContentPageBounds",Lae,Fl);nu(Zi,1,"getContentScreenBounds",Nae,Fl);nu(Zi,1,"getCanvasSize",Dae,Fl);nu(Zi,1,"getCanvasClientPosition",Rae,Fl);nu(Zi,1,"getCanvasPageBounds",Mae,Fl);nu(Zi,1,"getZoom",Oae,Fl);nu(Zi,1,"getCanvasPageBoundsArray",Pae,Fl);nu(Zi,1,"render",Iae,Fl);Y9e(Zi,Fl);function J9e(){const t=ue(),e=Ao(),n=it(),r=w.useRef(null),o=w.useRef(!1),a=w.useRef();w.useEffect(()=>{try{const u=new Fl(t,r.current,e);return a.current=u,a.current.close}catch(u){t.annotateError(u,{origin:"minimap",willCrashApp:!1}),t.timers.setTimeout(()=>{throw u})}},[t,e]);const s=w.useCallback(u=>{if(!t.getCurrentPageShapeIds().size||!a.current)return;const m=a.current.minimapScreenPointToPagePoint(u.clientX,u.clientY,!1,!1),h=a.current.minimapScreenPointToPagePoint(u.clientX,u.clientY,!1,!0);a.current.originPagePoint.setTo(h),a.current.originPageCenter.setTo(t.getViewportPageBounds().center),t.centerOnPoint(m,{animation:{duration:t.options.animationMediumMs}})},[t]),i=w.useCallback(u=>{if(!a.current)return;const m=u.currentTarget;if(uv(m,u),!t.getCurrentPageShapeIds().size)return;o.current=!0,a.current.isInViewport=!1;const h=a.current.minimapScreenPointToPagePoint(u.clientX,u.clientY,!1,!1),y=t.getViewportPageBounds(),v=a.current.getContentPageBounds();if(new Be(v.x-y.width/2,v.y-y.height/2,v.width+y.width,v.height+y.height).containsPoint(h)&&!y.containsPoint(h)){a.current.isInViewport=y.containsPoint(h);const T=R.Sub(y.center,y.point),C=R.Add(h,T);a.current.originPagePoint.setTo(C),a.current.originPageCenter.setTo(h),t.centerOnPoint(h,{animation:{duration:t.options.animationMediumMs}})}else{const T=a.current.minimapScreenPointToPagePoint(u.clientX,u.clientY,!1,!0);a.current.isInViewport=y.containsPoint(T),a.current.originPagePoint.setTo(T),a.current.originPageCenter.setTo(y.center)}function S(T){m&&dv(m,T),o.current=!1,document.body.removeEventListener("pointerup",S)}document.body.addEventListener("pointerup",S)},[t]),l=w.useCallback(u=>{if(!a.current)return;const m=a.current.minimapScreenPointToPagePoint(u.clientX,u.clientY,u.shiftKey,!0);if(o.current){if(a.current.isInViewport){const x=a.current.originPagePoint.clone().sub(a.current.originPageCenter);t.centerOnPoint(R.Sub(m,x));return}t.centerOnPoint(m)}const h=a.current.getMinimapPagePoint(u.clientX,u.clientY),y=t.pageToScreen(h),v={type:"pointer",target:"canvas",name:"pointer_move",...Pa(t,u),point:y,isPen:t.getInstanceState().isPenMode};t.dispatch(v)},[t]),c=w.useCallback(u=>{const m=OZ(u);t.dispatch({type:"wheel",name:"wheel",delta:m,point:new R(u.clientX,u.clientY),shiftKey:u.shiftKey,altKey:u.altKey,ctrlKey:u.metaKey||u.ctrlKey,metaKey:u.metaKey,accelKey:Pr(u)})},[t]),d=Fw();return w.useEffect(()=>{t.timers.setTimeout(()=>{var u,m;(u=a.current)==null||u.updateColors(),(m=a.current)==null||m.render()})},[d,t]),g.jsx("div",{className:"tlui-minimap",children:g.jsx("canvas",{role:"img","aria-label":n("navigation-zone.minimap"),"data-testid":"minimap.canvas",ref:r,className:"tlui-minimap__canvas",onDoubleClick:s,onPointerMove:l,onPointerDown:i,onWheelCapture:c})})}function Q9e(t,e){const[n,r]=bt.useState(e);bt.useLayoutEffect(()=>{const a=UD(t);if(a)try{r(JSON.parse(a))}catch{console.error(`Could not restore value ${t} from local storage.`)}},[t]);const o=bt.useCallback(a=>{r(s=>{const i=typeof a=="function"?a(s):a;return qD(t,JSON.stringify(i)),i})},[t]);return[n,o]}const Z9e=w.memo(function(){const e=ou(),n=it(),r=fa(),o=w.useRef(null);eu(o);const[a,s]=Q9e("minimap",!0),i=w.useCallback(()=>{s(d=>!d)},[s]),{ZoomMenu:l,Minimap:c}=ru();return r<Hr.MOBILE?null:g.jsxs("div",{ref:o,className:"tlui-navigation-panel",children:[g.jsx(Ds,{orientation:"horizontal",label:n("navigation-zone.title"),children:l&&r<Hr.TABLET?g.jsx(l,{}):g.jsxs(g.Fragment,{children:[!a&&g.jsx(pr,{type:"icon","data-testid":"minimap.zoom-out",title:`${n(L0(e["zoom-out"].label))} ${iT(e["zoom-out"].kbd)}`,onClick:()=>e["zoom-out"].onSelect("navigation-zone"),children:g.jsx(kt,{small:!0,icon:"minus"})}),l&&g.jsx(l,{},"zoom-menu"),!a&&g.jsx(pr,{type:"icon","data-testid":"minimap.zoom-in",title:`${n(L0(e["zoom-in"].label))} ${iT(e["zoom-in"].kbd)}`,onClick:()=>e["zoom-in"].onSelect("navigation-zone"),children:g.jsx(kt,{small:!0,icon:"plus"})}),c&&g.jsx(pr,{type:"icon","data-testid":"minimap.toggle-button",title:n("navigation-zone.toggle-minimap"),onClick:i,children:g.jsx(kt,{small:!0,icon:a?"chevron-right":"chevron-left"})})]})}),c&&r>=Hr.TABLET&&!a&&g.jsx(c,{})]})}),eqe=function({name:e,id:n,isCurrentPage:r,onCancel:o,onComplete:a}){const s=ue(),i=$r(),l=w.useRef(null),c=w.useRef(null),d=w.useCallback(()=>{c.current=s.markHistoryStoppingPoint("rename page")},[s]),u=w.useCallback(h=>{s.renamePage(n,h||"New Page"),i("rename-page",{source:"page-menu"})},[s,n,i]),m=w.useCallback(()=>{c.current&&s.bailToMark(c.current),o()},[s,o]);return g.jsx(Fg,{className:"tlui-page-menu__item__input",ref:h=>l.current=h,defaultValue:e,onValueChange:u,onComplete:a,onCancel:m,onFocus:d,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:r,autoSelect:!0})},ER=(t,e,n,r,o)=>{let a;const s=t.getPages(),i=n>r?s[r-1]:s[r],l=n>r?s[r]:s[r+1];i&&!l?a=_l(i.index):!i&&l?a=Rwe(s[0].index):a=Vh(i.index,l.index),a!==s[n].index&&(t.markHistoryStoppingPoint("moving page"),t.updatePage({id:e,index:a}),o("move-page",{source:"page-menu"}))},aH=Co(function({index:e,listSize:n,item:r,onRename:o}){const a=ue(),s=it(),i=a.getPages(),l=$r(),c=w.useCallback(()=>{a.markHistoryStoppingPoint("creating page");const h=Cs.createId();a.duplicatePage(r.id,h),l("duplicate-page",{source:"page-menu"})},[a,r,l]),d=w.useCallback(()=>{ER(a,r.id,e,e-1,l)},[a,r,e,l]),u=w.useCallback(()=>{ER(a,r.id,e,e+1,l)},[a,r,e,l]),m=w.useCallback(()=>{a.markHistoryStoppingPoint("deleting page"),a.deletePage(r.id),l("delete-page",{source:"page-menu"})},[a,r,l]);return g.jsxs(DC,{id:`page item submenu ${e}`,children:[g.jsx(NC,{children:g.jsx(nn,{type:"icon",title:s("page-menu.submenu.title"),children:g.jsx(kt,{icon:"dots-vertical",small:!0})})}),g.jsx(LC,{alignOffset:0,side:"right",sideOffset:-4,children:g.jsxs(Rs,{type:"menu",sourceId:"page-menu",children:[g.jsxs(Ht,{id:"modify",children:[o&&g.jsx(dn,{id:"rename",label:"page-menu.submenu.rename",onSelect:o}),g.jsx(dn,{id:"duplicate",label:"page-menu.submenu.duplicate-page",onSelect:c,disabled:i.length>=a.options.maxPages}),e>0&&g.jsx(dn,{id:"move-up",onSelect:d,label:"page-menu.submenu.move-up"}),e<n-1&&g.jsx(dn,{id:"move-down",label:"page-menu.submenu.move-down",onSelect:u})]}),n>1&&g.jsx(Ht,{id:"delete",children:g.jsx(dn,{id:"delete",onSelect:m,label:"page-menu.submenu.delete"})})]})})]})}),tqe=w.memo(function(){const e=ue(),n=$r(),r=it(),o=fa(),a=w.useCallback(()=>S(!1),[]),[s,i]=td("page-menu",a),l=36,c=w.useRef(null),d=ce("pages",()=>e.getPages(),[e]),u=ce("currentPage",()=>e.getCurrentPage(),[e]),m=ce("currentPageId",()=>e.getCurrentPageId(),[e]),h=Qi(),y=ce("maxPageCountReached",()=>e.getPages().length>=e.options.maxPages,[e]),v=ce("isCoarsePointer",()=>e.getInstanceState().isCoarsePointer,[e]),[x,S]=w.useState(!1);w.useEffect(function(){function q(){x||document.activeElement===document.body&&e.menus.clearOpenMenus()}return document.addEventListener("keydown",q,{passive:!0}),()=>{document.removeEventListener("keydown",q)}},[e,x]);const T=w.useCallback(()=>{h||S(j=>!j)},[h]),C=w.useRef({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[_,I]=w.useState(Object.fromEntries(d.map((j,q)=>[j.id,{y:q*l,offsetY:0,isSelected:!1}])));w.useLayoutEffect(()=>{I(Object.fromEntries(d.map((j,q)=>[j.id,{y:q*l,offsetY:0,isSelected:!1}])))},[l,d]),w.useEffect(()=>{s&&e.timers.requestAnimationFrame(()=>{var q;const j=document.querySelector(`[data-pageid="${m}"]`);if(j){(q=j.querySelector("button"))==null||q.focus();const U=c.current;if(!U)return;const Y=j.offsetTop,X=U.scrollTop;Y<X&&U.scrollTo({top:Y});const ee=Y+l,$=U.scrollTop+U.offsetHeight;ee>$&&U.scrollTo({top:ee-U.offsetHeight})}})},[l,m,s,e]);const P=w.useCallback(j=>{const{clientY:q,currentTarget:U}=j,{dataset:{id:Y,index:X}}=U;if(!Y||!X)return;const ee=C.current;uv(j.currentTarget,j),ee.status="pointing",ee.pointing={id:Y,index:+X};const G=_[Y].y;ee.startY=q,ee.startIndex=Math.max(0,Math.min(Math.round(G/l),d.length-1))},[l,d.length,_]),M=w.useCallback(j=>{const q=C.current;if(q.status==="pointing"){const{clientY:U}=j,Y=U-q.startY;Math.abs(Y)>5&&(q.status="dragging")}if(q.status==="dragging"){const{clientY:U}=j,Y=U-q.startY,X=_[q.pointing.id],{startIndex:ee,pointing:$}=q,G=X.y+Y,re=Math.max(0,Math.min(Math.round(G/l),d.length-1)),K={..._};if(K[$.id]={y:X.y,offsetY:Y,isSelected:!0},re!==q.dragIndex){q.dragIndex=re;for(let ve=0;ve<d.length;ve++){const xe=d[ve];if(xe.id===q.pointing.id)continue;let{y:Oe}=K[xe.id];re===ee?Oe=ve*l:re<ee?re<=ve&&ve<ee?Oe=(ve+1)*l:Oe=ve*l:re>ee&&(re>=ve&&ve>ee?Oe=(ve-1)*l:Oe=ve*l),Oe!==K[xe.id].y&&(K[xe.id]={y:Oe,offsetY:0,isSelected:!0})}}I(K)}},[l,d,_]),D=w.useCallback(j=>{const q=C.current;if(q.status==="dragging"){const{id:U,index:Y}=q.pointing;ER(e,U,Y,q.dragIndex,n)}dv(j.currentTarget,j),q.status="idle"},[e,n]),F=w.useCallback(j=>{const q=C.current;j.key==="Escape"&&(q.status==="dragging"&&I(Object.fromEntries(d.map((U,Y)=>[U.id,{y:Y*l,offsetY:0,isSelected:!1}]))),q.status="idle")},[l,d]),B=w.useCallback(()=>{h||(e.run(()=>{e.markHistoryStoppingPoint("creating page");const j=Cs.createId();e.createPage({name:r("page-menu.new-page-initial-name"),id:j}),e.setCurrentPage(j),S(!0),e.timers.requestAnimationFrame(()=>{var U;const q=document.querySelector(`[data-pageid="${j}"]`);q&&((U=q.querySelector("button"))==null||U.focus())})}),n("new-page",{source:"page-menu"}))},[e,r,h,n]),V=w.useCallback(j=>{e.setCurrentPage(j),n("change-page",{source:"page-menu"})},[e,n]),z=w.useCallback((j,q)=>{e.renamePage(j,q),n("rename-page",{source:"page-menu"})},[e,n]),H=o<Hr.TABLET_SM&&v;return g.jsxs(Gf,{id:"pages",onOpenChange:i,open:s,children:[g.jsx(Kf,{"data-testid":"main.page-menu",children:g.jsxs(nn,{type:"menu",title:u.name,"data-testid":"page-menu.button",className:"tlui-page-menu__trigger",children:[g.jsx("div",{className:"tlui-page-menu__name",children:u.name}),g.jsx(kt,{icon:"chevron-down",small:!0})]})}),g.jsx(Wf,{side:"bottom",align:"start",sideOffset:0,disableEscapeKeyDown:x,children:g.jsxs("div",{className:"tlui-page-menu__wrapper",children:[g.jsxs("div",{className:"tlui-page-menu__header",children:[g.jsx("div",{className:"tlui-page-menu__header__title",children:r("page-menu.title")}),!h&&g.jsxs(pm,{children:[g.jsx(nn,{type:"icon","data-testid":"page-menu.edit",title:r(x?"page-menu.edit-done":"page-menu.edit-start"),onClick:T,children:g.jsx(kt,{icon:x?"check":"edit"})}),g.jsx(nn,{type:"icon","data-testid":"page-menu.create",title:r(y?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:y,onClick:B,children:g.jsx(kt,{icon:"plus"})})]})]}),g.jsx("div",{"data-testid":"page-menu.list",className:"tlui-page-menu__list tlui-menu__group",style:{height:l*d.length+4},ref:c,children:d.map((j,q)=>{const U=_[j.id]??{offsetY:0};return x?g.jsxs("div",{"data-testid":"page-menu.item","data-pageid":j.id,className:"tlui-page_menu__item__sortable",style:{zIndex:j.id===u.id?888:q,transform:`translate(0px, ${U.y+U.offsetY}px)`},children:[g.jsx(nn,{type:"icon",tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",onPointerDown:P,onPointerUp:D,onPointerMove:M,onKeyDown:F,"data-id":j.id,"data-index":q,children:g.jsx(kt,{icon:"drag-handle-dots"})}),H?g.jsxs(nn,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>{const Y=window.prompt(r("action.rename"),j.name);Y&&Y!==j.name&&z(j.id,Y)},onDoubleClick:T,children:[g.jsx(SR,{checked:j.id===u.id}),g.jsx(xo,{children:j.name})]}):g.jsx("div",{className:"tlui-page_menu__item__sortable__title",style:{height:l},children:g.jsx(eqe,{id:j.id,name:j.name,isCurrentPage:j.id===u.id,onComplete:()=>{S(!1)},onCancel:()=>{S(!1)}})}),!h&&g.jsx("div",{className:"tlui-page_menu__item__submenu","data-isediting":x,children:g.jsx(aH,{index:q,item:j,listSize:d.length})})]},j.id+"_editing"):g.jsxs("div",{"data-pageid":j.id,"data-testid":"page-menu.item",className:"tlui-page-menu__item",children:[g.jsxs(nn,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>V(j.id),onDoubleClick:T,title:r("page-menu.go-to-page"),onKeyDown:Y=>{Y.key==="Enter"&&j.id===u.id&&(T(),e.markEventAsHandled(Y))},children:[g.jsx(SR,{checked:j.id===u.id}),g.jsx(xo,{children:j.name})]}),!h&&g.jsx("div",{className:"tlui-page_menu__item__submenu",children:g.jsx(aH,{index:q,item:j,listSize:d.length,onRename:()=>{if(H){const Y=window.prompt(r("action.rename"),j.name);Y&&Y!==j.name&&z(j.id,Y)}else S(!0),m!==j.id&&V(j.id)}})})]},j.id)})})]})})]})});function nqe(){const t=ue(),e=Qi(),n=ce("should display quick actions",()=>t.isInAny("select","hand","zoom"),[t]);if(!(e&&!n))return g.jsxs(g.Fragment,{children:[g.jsx(oqe,{}),g.jsx(rqe,{})]})}function rqe(){const t=js(1),e=rd(),n=t&&e;return g.jsxs(g.Fragment,{children:[g.jsx(Ie,{actionId:"delete",disabled:!n}),g.jsx(Ie,{actionId:"duplicate",disabled:!n})]})}function oqe(){const t=yae(),e=bae();return g.jsxs(g.Fragment,{children:[g.jsx(Ie,{actionId:"undo",disabled:!t}),g.jsx(Ie,{actionId:"redo",disabled:!e})]})}const aqe=w.memo(function({children:e}){const n=e??g.jsx(nqe,{});return g.jsx(Rs,{type:"small-icons",sourceId:"quick-actions",children:n})});function sqe({userId:t}){var n;const e=zw(t);return e?g.jsx("div",{className:"tlui-people-menu__avatar",style:{backgroundColor:e.color},children:((n=e.userName)==null?void 0:n[0])??""},t):null}const iqe=Co(function({userId:e}){var c;const n=ue(),r=it(),o=$r(),a=zw(e),s=w.useCallback(()=>{n.getInstanceState().followingUserId===e?(n.stopFollowingUser(),o("stop-following",{source:"people-menu"})):(n.startFollowingUser(e),o("start-following",{source:"people-menu"}))},[n,e,o]),i=(a==null?void 0:a.followingUserId)===n.user.getId(),l=n.getInstanceState().followingUserId===e;return a?g.jsxs(pm,{className:"tlui-people-menu__item","data-follow":l||i,children:[g.jsxs(nn,{type:"menu",className:"tlui-people-menu__item__button",onClick:()=>n.zoomToUser(e),onDoubleClick:s,children:[g.jsx(Wc,{label:r("people-menu.avatar-color"),icon:"color",color:a.color}),g.jsx("div",{className:"tlui-people-menu__name",children:((c=a.userName)==null?void 0:c.trim())||r("people-menu.anonymous-user")})]}),g.jsx(nn,{type:"icon",className:"tlui-people-menu__item__follow",title:r(i?"people-menu.leading":l?"people-menu.following":"people-menu.follow"),onClick:s,disabled:i,children:g.jsx(kt,{icon:i?"leading":l?"following":"follow"})})]}):null});function lqe({count:t}){return g.jsx("div",{className:"tlui-people-menu__avatar tlui-people-menu__more",children:Math.abs(t)})}const cqe=Co(function(){const e=ue(),n=Ao(),r=it(),o=$r(),a=w.useRef(!1),[s,i]=w.useState(!1),l=w.useCallback(v=>{i(v)},[]),c=e.user.getColor(),d=w.useCallback(v=>{e.user.updateUserPreferences({color:v}),o("set-color",{source:"people-menu"})},[e,o]),{handleButtonClick:u,handleButtonPointerDown:m,handleButtonPointerEnter:h,handleButtonPointerUp:y}=bt.useMemo(()=>{const v=()=>{a.current=!1,window.removeEventListener("pointerup",v)};return{handleButtonClick:_=>{const{id:I}=_.currentTarget.dataset;I&&c!==I&&d(I)},handleButtonPointerDown:_=>{const{id:I}=_.currentTarget.dataset;I&&(d(I),a.current=!0,window.addEventListener("pointerup",v))},handleButtonPointerEnter:_=>{if(!a.current)return;const{id:I}=_.currentTarget.dataset;I&&d(I)},handleButtonPointerUp:_=>{const{id:I}=_.currentTarget.dataset;I&&d(I)}}},[c,d]);return g.jsxs(dL,{onOpenChange:l,open:s,children:[g.jsx(pL,{dir:"ltr",asChild:!0,children:g.jsx(nn,{type:"icon",className:"tlui-people-menu__user__color",style:{color:e.user.getColor()},title:r("people-menu.change-color"),children:g.jsx(kt,{icon:"color"})})}),g.jsx(fL,{container:n,children:g.jsx(mL,{dir:"ltr",className:"tlui-menu tlui-people-menu__user__color-picker",align:"start",side:"left",sideOffset:8,children:g.jsx(BC,{children:xM.map(v=>g.jsx(nn,{type:"icon","data-id":v,"data-testid":v,"aria-label":v,isActive:c===v,title:v,style:{color:v},onPointerEnter:h,onPointerDown:m,onPointerUp:y,onClick:u,children:g.jsx(kt,{icon:"color"})},v))})})})]})});function uqe(){const t=ue(),e=$r(),n=ce("userName",()=>t.user.getName(),[]),r=it(),o=w.useRef(n),a=w.useRef(n),[s,i]=w.useState(!1),l=w.useCallback(()=>{i(m=>!m)},[]),c=w.useCallback(m=>{a.current=m,t.user.updateUserPreferences({name:m})},[t]),d=w.useCallback(()=>{o.current!==a.current&&(e("change-user-name",{source:"people-menu"}),o.current=a.current)},[e]),u=w.useCallback(()=>{i(!1),t.user.updateUserPreferences({name:o.current}),t.menus.clearOpenMenus()},[t]);return g.jsxs("div",{className:"tlui-people-menu__user",children:[g.jsx(cqe,{}),s?g.jsx(Fg,{className:"tlui-people-menu__user__input",defaultValue:n,onValueChange:c,onComplete:l,onCancel:u,onBlur:d,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:!0,autoSelect:!0}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"tlui-people-menu__user__name",onDoubleClick:()=>{s||i(!0)},children:n||r("people-menu.anonymous-user")}),n?null:g.jsx("div",{className:"tlui-people-menu__user__label",children:r("people-menu.user")})]}),g.jsx(nn,{type:"icon",className:"tlui-people-menu__user__edit","data-testid":"people-menu.change-name",title:r("people-menu.change-name"),onClick:l,children:g.jsx(kt,{icon:s?"check":"edit"})})]})}function dqe({children:t}){const e=it(),n=Ao(),r=ue(),o=DZ(),a=ce("user",()=>r.user.getColor(),[r]),s=ce("user",()=>r.user.getName(),[r]),[i,l]=td("people menu"),d=fa()<=Hr.MOBILE_XS?1:5;return o.length?g.jsxs(dL,{onOpenChange:l,open:i,children:[g.jsx(pL,{dir:"ltr",asChild:!0,children:g.jsx("button",{className:"tlui-people-menu__avatars-button",title:e("people-menu.title"),children:g.jsxs("div",{className:"tlui-people-menu__avatars",children:[o.slice(-d).map(u=>g.jsx(sqe,{userId:u},u)),o.length>0&&g.jsx("div",{className:"tlui-people-menu__avatar",style:{backgroundColor:a},children:(s==null?void 0:s[0])??""}),o.length>d&&g.jsx(lqe,{count:o.length-d})]})})}),g.jsx(fL,{container:n,children:g.jsx(mL,{dir:"ltr",className:"tlui-menu",side:"bottom",sideOffset:2,collisionPadding:4,children:g.jsxs("div",{className:"tlui-people-menu__wrapper",children:[g.jsx("div",{className:"tlui-people-menu__section",children:g.jsx(uqe,{})}),o.length>0&&g.jsx("div",{className:"tlui-people-menu__section",children:o.map(u=>g.jsx(iqe,{userId:u},u+"_presence"))}),t]})})})]}):null}function pqe(){return g.jsx("div",{className:"tlui-share-zone",draggable:!1,children:g.jsx(dqe,{})})}const fqe=Object.freeze([ks,Bf,dp,$c]);function Fae(t=fqe){const e=ue();return ce("getRelevantStyles",()=>{var a;const n=new CM(e.getSharedStyles()),r=!!((a=e.root.getCurrent())!=null&&a.shapeType),o=e.isIn("select")&&e.getSelectedShapeIds().length>0;if(n.size===0&&e.isIn("select")&&e.getSelectedShapeIds().length===0)for(const s of t)n.applyValue(s,e.getStyleForNextShape(s));return r||o||n.size>0?n:null},[e])}const Ki={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],textAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],horizontalAlign:[{value:"start",icon:"horizontal-align-start"},{value:"middle",icon:"horizontal-align-middle"},{value:"end",icon:"horizontal-align-end"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-middle"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"star",icon:"geo-star"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"cloud",icon:"geo-cloud"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"},{value:"heart",icon:"geo-heart"}],arrowKind:[{value:"arc",icon:"arrow-arc"},{value:"elbow",icon:"arrow-elbow"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},zae=bt.forwardRef(function({onHistoryMark:e,title:n,min:r,steps:o,value:a,label:s,onValueChange:i,["data-testid"]:l,ariaValueModifier:c=1},d){const u=it(),[m,h]=w.useState(""),[y,v]=w.useState(-1);w.useEffect(()=>{v(0)},[]);const x=w.useCallback(C=>{i(C[0])},[i]),S=w.useCallback(()=>{El.hideAllTooltips(),e==null||e("click slider")},[e]);w.useEffect(()=>{const C=LE.setTimeout("set title and label",()=>{h(n+"  "+u(s))},0);return()=>clearTimeout(C)},[s,u,n]);const T=w.useCallback(C=>{C.key==="Tab"&&C.stopPropagation()},[]);return g.jsx("div",{className:"tlui-slider__container",children:g.jsx(FC,{content:m,children:g.jsxs(rze,{"data-testid":l,className:"tlui-slider",dir:"ltr",min:r??0,max:o,step:1,value:a!==null?[a]:void 0,onPointerDown:S,onValueChange:x,onKeyDownCapture:T,onKeyUpCapture:T,children:[g.jsx(oze,{className:"tlui-slider__track",dir:"ltr",children:a!==null&&g.jsx(aze,{className:"tlui-slider__range",dir:"ltr"})}),a!==null&&g.jsx(sze,{"aria-valuemin":(r??0)*c,"aria-valuenow":a*c,"aria-valuemax":o*c,"aria-label":m,className:"tlui-slider__thumb",dir:"ltr",ref:d,tabIndex:y})]})})})});function zl(){return Op({isDarkMode:Fw()})}const Uae=w.createContext(null);function mqe({children:t,styles:e}){const n=ue(),r=$r(),o=w.useCallback(i=>n.markHistoryStoppingPoint(i),[n]),a=ce("enhancedA11yMode",()=>n.user.getEnhancedA11yMode(),[n]),s=w.useCallback(function(i,l){n.run(()=>{n.isIn("select")&&n.setStyleForSelectedShapes(i,l),n.setStyleForNextShapes(i,l),n.updateInstanceState({isChangingStyle:!0})}),r("set-style",{source:"style-panel",id:i.id,value:l})},[n,r]);return g.jsx(Uae.Provider,{value:{styles:e,enhancedA11yMode:a,onHistoryMark:o,onValueChange:s},children:t})}function fs(){const t=w.useContext(Uae);if(!t)throw new Error("useStylePanelContext must be used within a StylePanelContextProvider");return t}function zC({children:t}){return g.jsx("h3",{className:"tlui-style-panel__subheading",children:t})}function hqe(t){const{enhancedA11yMode:e}=fs();return g.jsxs(g.Fragment,{children:[e&&g.jsx(zC,{children:t.title}),g.jsx(Ds,{label:t.title,children:g.jsx(ML,{...t})})]})}function gqe(t){const e=fs(),{uiType:n,items:r,title:o,style:a,value:s,onValueChange:i=e.onValueChange,onHistoryMark:l=e.onHistoryMark}=t,c=zl(),d=ue(),u=it(),m=fa(),h=w.useRef(!1),y=w.useRef(null),{handleButtonClick:v,handleButtonPointerDown:x,handleButtonPointerEnter:S,handleButtonPointerUp:T}=w.useMemo(()=>{const _=()=>{h.current=!1,window.removeEventListener("pointerup",_);const F=y.current;F&&(["TEXTAREA","INPUT"].includes(F.nodeName)||F.isContentEditable)?F.focus():m>=Hr.TABLET_SM&&d.getContainer().focus(),y.current=null};return{handleButtonClick:F=>{const{id:B}=F.currentTarget.dataset;s.type==="shared"&&s.value===B||(l==null||l("point picker item"),i(a,B))},handleButtonPointerDown:F=>{const{id:B}=F.currentTarget.dataset;l==null||l("point picker item"),i(a,B),h.current=!0,y.current=document.activeElement,window.addEventListener("pointerup",_)},handleButtonPointerEnter:F=>{if(!h.current)return;const{id:B}=F.currentTarget.dataset;i(a,B)},handleButtonPointerUp:F=>{const{id:B}=F.currentTarget.dataset;s.type==="shared"&&s.value===B||i(a,B)}}},[d,m,s,l,i,a]),C=r.length>4?BC:pm;return g.jsx(OUe,{"data-testid":`style.${n}`,type:"single",value:s.type==="shared"?s.value:null,asChild:!0,children:g.jsx(C,{children:r.map(_=>{const I=s.type==="shared"&&s.value===_.value,P=o+"  "+u(`${n}-style.${_.value}`);return g.jsx(MUe,{type:"icon","data-id":_.value,"data-testid":`style.${n}.${_.value}`,"aria-label":P+(I?` (${u("style-panel.selected")})`:""),tooltip:g.jsxs(g.Fragment,{children:[g.jsx("div",{children:P}),I?g.jsxs("div",{children:["(",u("style-panel.selected"),")"]}):null]}),value:_.value,"data-state":s.type==="shared"&&s.value===_.value?"on":"off","data-isactive":I,title:P,style:a===ks?{color:yn(c,_.value,"solid")}:void 0,onPointerEnter:S,onPointerDown:x,onPointerUp:T,onClick:v,children:g.jsx(kt,{icon:_.icon})},_.value)})})})}const Fv=w.memo(hqe),ML=w.memo(gqe);function bqe(t){const e=it();return g.jsxs("div",{className:"tlui-style-panel__double-select-picker",children:[g.jsx("div",{title:e(t.label),className:"tlui-style-panel__double-select-picker-label",children:e(t.label)}),g.jsx(Ds,{orientation:"horizontal",label:e(t.label),children:g.jsx(xqe,{...t})})]})}function yqe(t){const e=fs(),{uiTypeA:n,uiTypeB:r,labelA:o,labelB:a,itemsA:s,itemsB:i,styleA:l,styleB:c,valueA:d,valueB:u,onValueChange:m=e.onValueChange}=t,h=ue(),y=it(),[v,x]=w.useState(!1),[S,T]=w.useState(!1),C=w.useMemo(()=>{var M;return((M=s.find(D=>d.type==="shared"&&d.value===D.value))==null?void 0:M.icon)??"mixed"},[s,d]),_=w.useMemo(()=>{var M;return((M=i.find(D=>u.type==="shared"&&u.value===D.value))==null?void 0:M.icon)??"mixed"},[i,u]);if(d===void 0&&u===void 0)return null;const I=`style panel ${n} A`,P=`style panel ${r} B`;return g.jsxs(g.Fragment,{children:[g.jsxs(Gf,{id:I,open:v,onOpenChange:x,children:[g.jsx(Kf,{children:g.jsx(pr,{type:"icon","data-testid":`style.${n}`,title:y(o)+"  "+(d===null||d.type==="mixed"?y("style-panel.mixed"):y(`${n}-style.${d.value}`)),children:g.jsx(kt,{icon:C,small:!0,invertIcon:!0})})}),g.jsx(Wf,{side:"left",align:"center",sideOffset:80,alignOffset:0,children:g.jsx(Ds,{orientation:"grid",label:y(o),children:g.jsx(Rs,{type:"icons",sourceId:"style-panel",children:s.map(M=>g.jsx(pr,{"data-testid":`style.${n}.${M.value}`,type:"icon",onClick:()=>{m(l,M.value),vs.deleteOpenMenu(I,h.contextId),x(!1)},title:`${y(o)}  ${y(`${n}-style.${M.value}`)}`,children:g.jsx(kt,{icon:M.icon,invertIcon:!0})},M.value))})})})]}),g.jsxs(Gf,{id:P,open:S,onOpenChange:T,children:[g.jsx(Kf,{children:g.jsx(pr,{type:"icon","data-testid":`style.${r}`,title:y(a)+"  "+(u===null||u.type==="mixed"?y("style-panel.mixed"):y(`${r}-style.${u.value}`)),children:g.jsx(kt,{icon:_,small:!0})})}),g.jsx(Wf,{side:"left",align:"center",sideOffset:116,alignOffset:0,children:g.jsx(Ds,{orientation:"grid",label:y(a),children:g.jsx(Rs,{type:"icons",sourceId:"style-panel",children:i.map(M=>g.jsx(pr,{type:"icon",title:`${y(a)}  ${y(`${r}-style.${M.value}`)}`,"data-testid":`style.${r}.${M.value}`,onClick:()=>{m(c,M.value),vs.deleteOpenMenu(P,h.contextId),T(!1)},children:g.jsx(kt,{icon:M.icon})},M.value))})})})]})]})}const vqe=w.memo(bqe),xqe=w.memo(yqe);function Sqe(t){const e=it(),n=t.label?e(t.label):e(`style-panel.${t.stylePanelType}`);return g.jsx(Ds,{label:n,children:g.jsx(qae,{...t})})}function Eqe(t){const e=fs(),{id:n,label:r,uiType:o,stylePanelType:a,style:s,items:i,type:l,value:c,onValueChange:d=e.onValueChange}=t,u=it(),m=ue(),[h,y]=w.useState(!1),v=w.useMemo(()=>{var _;return(_=i.find(I=>c.type==="shared"&&I.value===c.value))==null?void 0:_.icon},[i,c]),x=u(`style-panel.${a}`),S=c.type==="mixed"?u("style-panel.mixed"):x+"  "+u(`${o}-style.${c.value}`),T=r?u(r):"",C=`style panel ${n}`;return g.jsxs(Gf,{id:C,open:h,onOpenChange:y,className:"tlui-style-panel__dropdown-picker",children:[g.jsx(Kf,{children:g.jsxs(pr,{type:l,"data-testid":`style.${o}`,"data-direction":"left",title:S,children:[T&&g.jsx(xo,{children:T}),g.jsx(kt,{icon:v??"mixed"})]})}),g.jsx(Wf,{side:"left",align:"center",children:g.jsx(Ds,{orientation:i.length>4?"grid":"horizontal",label:T,children:g.jsx(Rs,{type:"icons",sourceId:"style-panel",children:i.map(_=>g.jsx(pr,{type:"icon","data-testid":`style.${o}.${_.value}`,title:x+"  "+u(`${o}-style.${_.value}`),isActive:v===_.icon,onClick:()=>{e.onHistoryMark("select style dropdown item"),d(s,_.value),vs.deleteOpenMenu(C,m.contextId),y(!1)},children:g.jsx(kt,{icon:_.icon})},_.value))})})})]})}const RL=w.memo(Sqe),qae=w.memo(Eqe);function Tqe(){return g.jsxs(g.Fragment,{children:[g.jsxs(HS,{children:[g.jsx(wqe,{}),g.jsx(Cqe,{})]}),g.jsxs(HS,{children:[g.jsx(Aqe,{}),g.jsx(_qe,{}),g.jsx(kqe,{})]}),g.jsxs(HS,{children:[g.jsx(Iqe,{}),g.jsx(Pqe,{}),g.jsx(Oqe,{})]}),g.jsxs(HS,{children:[g.jsx(Mqe,{}),g.jsx(Rqe,{}),g.jsx(Dqe,{}),g.jsx(Nqe,{})]})]})}function HS({children:t}){return g.jsx("div",{className:"tlui-style-panel__section",children:t})}function wqe(){const{styles:t}=fs(),e=it(),n=t.get(ks);return n===void 0?null:g.jsx(Fv,{title:e("style-panel.color"),uiType:"color",style:ks,items:Ki.color,value:n})}const Yb=[.1,.25,.5,.75,1];function Cqe(){const t=ue(),{onHistoryMark:e,enhancedA11yMode:n}=fs(),r=ce("opacity",()=>t.getSharedOpacity(),[t]),o=$r(),a=it(),s=bt.useCallback(l=>{const c=Yb[l];t.run(()=>{t.isIn("select")&&t.setOpacityForSelectedShapes(c),t.setOpacityForNextShapes(c),t.updateInstanceState({isChangingStyle:!0})}),o("set-style",{source:"style-panel",id:"opacity",value:l})},[t,o]);if(r===void 0)return null;const i=r.type==="mixed"?-1:Yb.indexOf(MK(Yb,l=>Math.abs(l-r.value)));return g.jsxs(g.Fragment,{children:[n&&g.jsx(zC,{children:a("style-panel.opacity")}),g.jsx(zae,{"data-testid":"style.opacity",value:i>=0?i:Yb.length-1,label:r.type==="mixed"?"style-panel.mixed":`opacity-style.${r.value}`,onValueChange:s,steps:Yb.length-1,title:a("style-panel.opacity"),onHistoryMark:e,ariaValueModifier:25})]})}function Aqe(){const{styles:t}=fs(),e=it(),n=t.get(dp);return n===void 0?null:g.jsx(Fv,{title:e("style-panel.fill"),uiType:"fill",style:dp,items:Ki.fill,value:n})}function _qe(){const{styles:t}=fs(),e=it(),n=t.get(Bf);return n===void 0?null:g.jsx(Fv,{title:e("style-panel.dash"),uiType:"dash",style:Bf,items:Ki.dash,value:n})}function kqe(){const t=ue(),{styles:e,onValueChange:n}=fs(),r=it(),o=e.get($c);return o===void 0?null:g.jsx(Fv,{title:r("style-panel.size"),uiType:"size",style:$c,items:Ki.size,value:o,onValueChange:(a,s)=>{n(a,s);const i=t.getSelectedShapeIds();i.length>0&&er(t,i)}})}function Iqe(){const{styles:t}=fs(),e=it(),n=t.get(pp);return n===void 0?null:g.jsx(Fv,{title:e("style-panel.font"),uiType:"font",style:pp,items:Ki.font,value:n})}function Pqe(){const{styles:t,enhancedA11yMode:e}=fs(),n=it(),r=t.get(yM);if(r===void 0)return null;const o=n("style-panel.align");return g.jsxs(g.Fragment,{children:[e&&g.jsx(zC,{children:o}),g.jsxs(Ds,{orientation:"horizontal",label:o,children:[g.jsx(ML,{title:o,uiType:"align",style:yM,items:Ki.textAlign,value:r}),g.jsx(pr,{type:"icon",title:n("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:g.jsx(kt,{icon:"vertical-align-middle"})})]})]})}function Oqe(){const{styles:t,enhancedA11yMode:e}=fs(),n=it(),r=t.get(IE),o=t.get(PE);if(r===void 0)return null;const a=n("style-panel.label-align");return g.jsxs(g.Fragment,{children:[e&&g.jsx(zC,{children:a}),g.jsxs(Ds,{orientation:"horizontal",label:a,children:[g.jsx(ML,{title:a,uiType:"align",style:IE,items:Ki.horizontalAlign,value:r}),o===void 0?g.jsx(pr,{type:"icon",title:n("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:g.jsx(kt,{icon:"vertical-align-middle"})}):g.jsx(qae,{type:"icon",id:"geo-vertical-alignment",uiType:"verticalAlign",stylePanelType:"vertical-align",style:PE,items:Ki.verticalAlign,value:o})]})]})}function Mqe(){const{styles:t}=fs(),e=t.get(Bc);return e===void 0?null:g.jsx(RL,{label:"style-panel.geo",type:"menu",id:"geo",uiType:"geo",stylePanelType:"geo",style:Bc,items:Ki.geo,value:e})}function Rqe(){const{styles:t}=fs(),e=t.get(_E);return e===void 0?null:g.jsx(RL,{id:"arrow-kind",type:"menu",label:"style-panel.arrow-kind",uiType:"arrow-kind",stylePanelType:"arrow-kind",style:_E,items:Ki.arrowKind,value:e})}function Dqe(){const{styles:t}=fs(),e=t.get(hM),n=t.get(mM);return e===void 0||n===void 0?null:g.jsx(vqe,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:mM,itemsA:Ki.arrowheadStart,valueA:n,uiTypeB:"arrowheadEnd",styleB:hM,itemsB:Ki.arrowheadEnd,valueB:e,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})}function Nqe(){const{styles:t}=fs(),e=t.get(bM);return e===void 0?null:g.jsx(RL,{type:"menu",id:"spline",uiType:"spline",stylePanelType:"spline",label:"style-panel.spline",style:bM,items:Ki.spline,value:e})}const Lqe=w.memo(function({isMobile:e,styles:n,children:r}){const o=ue(),a=ce("enhancedA11yMode",()=>o.user.getEnhancedA11yMode(),[o]),s=w.useRef(null);eu(s);const i=w.useCallback(()=>{e||o.updateInstanceState({isChangingStyle:!1})},[o,e]),l=Fae();return n===void 0&&(n=l),w.useEffect(()=>{function c(u){var m;u.key==="Escape"&&((m=s.current)!=null&&m.contains(document.activeElement))&&(u.stopPropagation(),o.getContainer().focus())}const d=s.current;return d==null||d.addEventListener("keydown",c,{capture:!0}),()=>{d==null||d.removeEventListener("keydown",c,{capture:!0})}},[o]),n&&g.jsx("div",{ref:s,"data-testid":"style.panel",className:pt("tlui-style-panel",{"tlui-style-panel__wrapper":!e}),"data-ismobile":e,"data-enhanced-a11y-mode":a,onPointerLeave:i,children:g.jsx(mqe,{styles:n,children:r??g.jsx(Tqe,{})})})}),jqe=4e3,Bqe={success:"check-circle",warning:"warning-triangle",error:"cross-circle",info:"info-circle"};function Fqe({toast:t}){const{removeToast:e}=nd(),n=it(),r=i=>{i||e(t.id)},o=t.actions&&t.actions.length>0,a=t.icon||t.severity&&Bqe[t.severity],s=t.iconLabel||(t.severity?n(`toast.${t.severity}`):"");return g.jsxs(Cze,{onOpenChange:r,className:"tlui-toast__container",duration:t.keepOpen?1/0:jqe,"data-severity":t.severity,children:[a&&g.jsx("div",{className:"tlui-toast__icon",children:g.jsx(Wc,{label:s,icon:a})}),g.jsxs("div",{className:"tlui-toast__main","data-title":!!t.title,"data-description":!!t.description,"data-actions":!!t.actions,children:[g.jsxs("div",{className:"tlui-toast__content",children:[t.title&&g.jsx(Aze,{className:"tlui-toast__title",children:t.title}),t.description&&g.jsx(_ze,{className:"tlui-toast__description",children:t.description})]}),t.actions&&g.jsxs("div",{className:"tlui-toast__actions",children:[t.actions.map((i,l)=>g.jsx(kze,{altText:i.label,asChild:!0,onClick:i.onClick,children:g.jsx(nn,{type:i.type,children:g.jsx(xo,{children:i.label})})},l)),g.jsx(R7,{asChild:!0,children:g.jsx(nn,{type:"normal",className:"tlui-toast__close",style:{marginLeft:"auto"},children:g.jsx(xo,{children:t.closeLabel??n("toast.close")})})})]})]}),!o&&g.jsx(R7,{asChild:!0,children:g.jsx(nn,{type:"normal",className:"tlui-toast__close",children:g.jsx(xo,{children:t.closeLabel??n("toast.close")})})})]})}const zqe=w.memo(function(){const{toasts:e}=nd(),n=ce("toasts",()=>e.get(),[]);return g.jsxs(g.Fragment,{children:[n.map(r=>g.jsx(Fqe,{toast:r},r.id)),g.jsx(uoe,{className:"tlui-toast__viewport"})]})}),Uqe=150,qqe=16,Hqe=16,sH=16**2,$qe=8,Md=16,DL=({children:t,className:e,isMousingDown:n,getSelectionBounds:r,changeOnlyWhenYChanges:o=!1,label:a})=>{const s=ue(),i=w.useRef(null);eu(i),jRe(i);const{isVisible:l,isInteractive:c,hide:d,show:u,position:m,move:h}=Kqe(o),y=w.useRef(!1),[v,x]=w.useState(!1),S=iv("content size update counter",0);w.useEffect(()=>{dt(i.current);const C=new ResizeObserver(()=>{S.update(_=>_+1)});return C.observe(i.current),()=>C.disconnect()},[S]),w.useEffect(()=>{let C=S.get();return si("toolbar position",function(){const I=i.current;if(!I)return;const P=S.get();s.getCamera(),S.get();const M=Vqe(s,I,r);if(!M)y.current&&(y.current=!1,x(!1));else{if(s.getCameraState()==="moving")i.current.style.setProperty("transform",`translate(${M.x}px, ${M.y}px)`);else{const F=C!==P;h(M.x,M.y,F)}y.current||(y.current=!0,x(!0))}C=P})},[s,r,S,h]);const T=ce("camera state",()=>s.getCameraState(),[s]);return w.useEffect(()=>{if(n||!v){d();return}u()},[v,T,n,u,d]),w.useLayoutEffect(()=>{const C=i.current;C&&(C.dataset.visible=`${l}`)},[l,m]),w.useLayoutEffect(()=>{const C=i.current;C&&C.style.setProperty("transform",`translate(${m.x}px, ${m.y}px)`)},[m]),w.useLayoutEffect(()=>{const C=i.current;C&&(C.dataset.interactive=`${c}`)},[c]),g.jsx("div",{ref:i,"data-interactive":!1,"data-visible":!1,"data-testid":"contextual-toolbar",className:pt("tlui-contextual-toolbar",e),onPointerDown:s.markEventAsHandled,children:g.jsx(Ds,{orientation:"horizontal",className:"tlui-menu",label:a,tooltipSide:"top",children:t})})};function Hae(t){return new Be(t.x,t.y,t.width,t.height)}function Vqe(t,e,n){var d;const r=(d=n())==null?void 0:d.clone();if(!r)return;const o=t.getViewportScreenBounds();if(r.x-=o.x,r.y-=o.y,r.midY<Md||r.midY>o.h-Md||r.midX<Md||r.midX>o.w-Md)return;const a=Hae(e.getBoundingClientRect());if(!a.width||!a.height)return;const{scrollLeft:s,scrollTop:i}=t.getContainer();let l=r.midX-a.w/2,c=r.y-a.h-$qe;return l=Lt(l,Md,o.w-a.w-Md),c=Lt(c,Md,o.h-a.h-Md),l+=s,c+=i,l=Math.round(l),c=Math.round(c),{x:l,y:c}}function Gqe(t,e,n){return n?R.Sub(e,t).y**2>=sH:R.Len2(R.Sub(e,t))>=sH}function Kqe(t){const e=ue(),n=w.useRef({name:"hidden"}),[r,o]=w.useState(!1),[a,s]=w.useState(!1),[i,l]=w.useState({x:-1e3,y:-1e3}),c=w.useRef(new R(-1e3,-1e3)),d=w.useRef(new R(-1e3,-1e3)),u=w.useRef(-1),m=w.useRef(-1),h=w.useCallback((x,S,T=!1)=>{if(d.current.x=x,d.current.y=S,n.current.name==="hidden"||n.current.name==="showing")return;clearTimeout(m.current);const C=()=>{if(n.current.name==="shown"&&Gqe(d.current,c.current,t)){const{x:_,y:I}=d.current;c.current=new R(_,I),T?Qf.flushSync(()=>l({x:_,y:I})):l({x:_,y:I})}};T?C():m.current=e.timers.setTimeout(C,Uqe)},[e,t]),y=w.useCallback((x=!1)=>{switch(n.current.name){case"showing":{clearTimeout(u.current),n.current={name:"hidden"};break}case"shown":{n.current={name:"hiding"},o(!1),x?(n.current={name:"hidden"},s(!1)):u.current=e.timers.setTimeout(()=>{n.current={name:"hidden"},s(!1)},qqe);break}}},[e]),v=w.useCallback(()=>{switch(n.current.name){case"hidden":{n.current={name:"showing"},u.current=e.timers.setTimeout(()=>{const{x,y:S}=d.current;c.current=new R(x,S),l({x,y:S}),n.current={name:"shown"},s(!0),o(!0)},Hqe);break}case"hiding":{clearTimeout(u.current),n.current={name:"shown"},o(!0),h(d.current.x,d.current.y);break}}},[e,h]);return{isVisible:a,isInteractive:r,show:v,hide:y,move:h,position:i}}function $ae({shapeId:t,onClose:e,source:n}){const r=ue(),[o,a]=w.useState(()=>{const y=r.getShape(t);if(!y)return"";if(!("altText"in y.props))throw Error("Shape does not have altText property");return y.props.altText||""}),s=it(),i=w.useRef(null),l=$r(),c=r.getIsReadonly(),d=y=>a(y),u=()=>{l("set-alt-text",{source:n});const y=r.getShape(t);y&&(r.updateShapes([{id:y.id,type:y.type,props:{altText:o}}]),e())},m=()=>u(),h=w.useCallback(()=>e(),[e]);return w.useEffect(()=>{var v;(v=i.current)==null||v.select();function y(x){x.key==="Escape"&&(x.stopPropagation(),h())}return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0})}},[h]),g.jsxs(g.Fragment,{children:[g.jsx(Fg,{ref:i,className:"tlui-media__toolbar-alt-text-input","data-testid":"media-toolbar.alt-text-input",value:o,placeholder:s("tool.media-alt-text-desc"),"aria-label":s("tool.media-alt-text-desc"),onValueChange:d,onComplete:u,onCancel:h,disabled:c}),!c&&g.jsx(nn,{title:s("tool.media-alt-text-confirm"),"data-testid":"tool.media-alt-text-confirm",type:"icon",onPointerDown:Nt,onClick:m,children:g.jsx(kt,{small:!0,icon:"check"})})]})}const iH=8;function Jl(){return{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}}const Wqe=["original","square","circle","landscape","portrait","wide"],TR={original:0,square:1,circle:1,landscape:4/3,portrait:3/4,wide:16/9};function sc(t,e){if(!e)return{w:t.w,h:t.h};const n=t.w/(e.bottomRight.x-e.topLeft.x),r=t.h/(e.bottomRight.y-e.topLeft.y);return{w:n,h:r}}function UC(t){return{width:t.bottomRight.x-t.topLeft.x,height:t.bottomRight.y-t.topLeft.y}}function NL(t){const{width:e,height:n}=UC(t);return{x:t.topLeft.x+e/2,y:t.topLeft.y+n/2}}function LL(t,e,n,r,o){const a=Math.max(0,Math.min(1-n,t-n/2)),s=Math.max(0,Math.min(1-r,e-r/2));return{topLeft:{x:a,y:s},bottomRight:{x:a+n,y:s+r},isCircle:o}}function Yqe(t,e,n={}){const{handle:r,change:o,crop:a,aspectRatioLocked:s}=e,{w:i,h:l}=e.uncroppedSize,{minWidth:c=iH,minHeight:d=iH}=n;if(i<c||l<d||o.x===0&&o.y===0)return;const u=new Be(a.topLeft.x*i,a.topLeft.y*l,(a.bottomRight.x-a.topLeft.x)*i,(a.bottomRight.y-a.topLeft.y)*l),m=u.aspectRatio,h=u.clone();if(r==="top_left"||r==="bottom_left"||r==="left")h.x=Lt(h.x+o.x,0,u.maxX-c),h.w=u.maxX-h.x;else if(r==="top_right"||r==="bottom_right"||r==="right"){const x=Lt(h.maxX+o.x,u.x+c,i);h.w=x-h.x}if(r==="top_left"||r==="top_right"||r==="top")h.y=Lt(h.y+o.y,0,u.maxY-d),h.h=u.maxY-h.y;else if(r==="bottom_left"||r==="bottom_right"||r==="bottom"){const x=Lt(h.maxY+o.y,u.y+d,l);h.h=x-h.y}if(s)switch(h.aspectRatio>m?h.h=h.w/m:h.w=h.h*m,r){case"top_left":{h.x=u.maxX-h.w,h.y=u.maxY-h.h,h.x<=0&&(h.x=0,h.w=u.maxX-h.x,h.h=h.w/m,h.y=u.maxY-h.h),h.y<=0&&(h.y=0,h.h=u.maxY-h.y,h.w=h.h*m,h.x=u.maxX-h.w);break}case"top_right":{h.x=u.x,h.y=u.maxY-h.h,h.maxX>=i&&(h.w=i-u.x,h.h=h.w/m,h.y=u.maxY-h.h),h.y<=0&&(h.y=0,h.h=u.maxY-h.y,h.w=h.h*m);break}case"bottom_left":{h.x=u.maxX-h.w,h.y=u.y,h.x<=0&&(h.x=0,h.w=u.maxX-h.x,h.h=h.w/m),h.maxY>=l&&(h.h=l-u.y,h.w=h.h*m,h.x=u.maxX-h.w);break}case"bottom_right":{h.x=u.x,h.y=u.y,h.maxX>=i&&(h.w=i-u.x,h.h=h.w/m),h.maxY>=l&&(h.h=l-u.y,h.w=h.h*m);break}case"top":{if(h.h=u.maxY-h.y,h.w=h.h*m,h.x-=(h.w-u.w)/2,h.x<=0){const S=u.midX;h.w=S*2,h.h=h.w/m,h.x=0}if(h.maxX>=i){const S=i-u.midX;h.w=S*2,h.h=h.w/m,h.x=i-h.w}h.y=u.maxY-h.h;break}case"right":{if(h.w=h.maxX-u.x,h.h=h.w/m,h.y-=(h.h-u.h)/2,h.y<=0){const S=u.midY;h.h=S*2,h.w=h.h*m,h.y=0}if(h.maxY>=l){const S=l-u.midY;h.h=S*2,h.w=h.h*m,h.y=l-h.h}break}case"bottom":{if(h.h=h.maxY-u.y,h.w=h.h*m,h.x-=(h.w-u.w)/2,h.x<=0){const S=u.midX;h.w=S*2,h.h=h.w/m,h.x=0}if(h.maxX>=i){const S=i-u.midX;h.w=S*2,h.h=h.w/m,h.x=i-h.w}break}case"left":{if(h.w=u.maxX-h.x,h.h=h.w/m,h.y-=(h.h-u.h)/2,h.y<=0){const S=u.midY;h.h=S*2,h.w=h.h*m,h.y=0}if(h.maxY>=l){const S=l-u.midY;h.h=S*2,h.w=h.h*m,h.y=l-h.h}h.x=u.maxX-h.w;break}}const y={topLeft:{x:h.x/i,y:h.y/l},bottomRight:{x:h.maxX/i,y:h.maxY/l},isCircle:a.isCircle};if(y.topLeft.x===a.topLeft.x&&y.topLeft.y===a.topLeft.y&&y.bottomRight.x===a.bottomRight.x&&y.bottomRight.y===a.bottomRight.y)return;const v=new R(h.x-a.topLeft.x*i,h.y-a.topLeft.y*l).rot(t.rotation).add(t);return{id:t.id,type:t.type,x:v.x,y:v.y,props:{w:h.w,h:h.h,crop:y}}}function Xqe(t,e,n,r=!0,o=!1){const{w:a,h:s}=sc(t.props,t.props.crop??Jl()),i=t.props.crop||Jl(),l=t.x+t.props.w/2,c=t.y+t.props.h/2;let d,u;if(r){const{x:v,y:x}=NL(i);d=v,u=x}else d=.5,u=.5;const m=LL(d,u,e,n,o),h=e*a,y=n*s;return{crop:m,w:h,h:y,x:l-h/2,y:c-y/2}}const Qs=3;function Jqe(t,e,n){const r=e.props.crop||Jl(),{width:o,height:a}=UC(r),s=o/a,i=n?1/(1-n):Qs,l=1+t*(i-1);let c,d;s>1?(c=Math.min(1,1/l),d=c/s):(d=Math.min(1,1/l),c=d*s);const u=Xqe(e,c,d,!0,r.isCircle),m=Math.min(Qs,o/c);u.w*=m,u.h*=m;const h=e.x+e.props.w/2,y=e.y+e.props.h/2;return u.x=h-u.w/2,u.y=y-u.h/2,u}function Qqe(t,e,n){const r=Jl(),o=t.props.crop||r,a=t.props.w,s=t.props.h,i=e/n;let l=r,c=a,d=s;if(Ap(t.props.crop,r))c=a,d=a*n/e;else{const{w:x,h:S}=sc(t.props,t.props.crop||Jl()),{width:T,height:C}=UC(o),_=T/C,I=x/S;let P,M;const D=NL(o);P=T;const F=i/I/_;M=P*F;const B=Qs/(Qs-1);if(F>B){const V=1/Qs;if(1/M<1/P){const z=M/V;M=M/z,P=P/z}else{const z=P/V;P=P/z,M=M/z}}P=Math.max(0,Math.min(1,P)),M=Math.max(0,Math.min(1,M)),l=LL(D.x,D.y,P,M,o.isCircle)}const m=t.x+a/2,h=t.y+s/2,y=m-c/2,v=h-d/2;return{crop:l,w:c,h:d,x:y,y:v}}function Zqe(t,e){if(t==="original"){const{w:V,h:z}=sc(e.props,e.props.crop??Jl()),H=e.x+e.props.w/2,j=e.y+e.props.h/2;return{crop:Jl(),w:V,h:z,x:H-V/2,y:j-z/2}}const n=TR[t],r=t==="circle",{w:o,h:a}=sc(e.props,e.props.crop||Jl()),s=o/a,i=e.props.crop||Jl(),{width:l,height:c}=UC(i),d=NL(i),u=Math.min(1/l,1/c);let m,h;if(s===0||!Number.isFinite(s)||n===0)m=1,h=1;else{const V=l*o,z=c*a,H=Math.max(V,z),j=V>=z;let q,U;j?(q=H,U=q/n):(U=H,q=U*n),m=q/o,h=U/a,m>1&&(m=1,h=s/n),h>1&&(h=1,m=n/s),m=Math.max(0,Math.min(1,m)),h=Math.max(0,Math.min(1,h))}const y=Math.min(1/m,1/h);m*=y/u,h*=y/u,m=Math.max(0,Math.min(1,m)),h=Math.max(0,Math.min(1,h));const v=LL(d.x,d.y,m,h,r),x=v.bottomRight.x-v.topLeft.x,S=v.bottomRight.y-v.topLeft.y,T=x*o,C=S*a;let _=1;l>0?_=e.props.w/(l*o):c>0&&(_=e.props.h/(c*a));const I=T*_,P=C*_,M=e.x+e.props.w/2,D=e.y+e.props.h/2,F=M-I/2,B=D-P/2;return{crop:v,w:I,h:P,x:F,y:B}}const e7e=Co(function({imageShapeId:e,isManipulating:n,onEditAltTextStart:r,onManipulatingStart:o,onManipulatingEnd:a}){const s=ue(),i=$r(),l=it(),c="image-toolbar",d=w.useRef(null),u=s.getIsReadonly(),m=ce("crop",()=>s.getShape(e).props.crop,[s,e]),h=m?Math.min(1-(m.bottomRight.x-m.topLeft.x),1-(m.bottomRight.y-m.topLeft.y)):0,[y,v]=w.useState(m?Math.max(h,1-1/Qs):Qs),x=ou();w.useEffect(()=>{v(m?Math.max(h,1-1/Qs):Qs)},[m,h,y]);const S=w.useCallback(V=>s.markHistoryStoppingPoint(V),[s]),T=w.useCallback((V,z)=>{const H=Qs/(Qs-1);return Math.pow(V/z,H)*z},[]),C=m&&y?nc(T(h,y),[0,y],[0,100],!0):0,_=w.useCallback(V=>{s.setCurrentTool("select.crop.idle");const z=V/100,H=1-1/Qs,j=Math.min(H,y??H),q=Qs/(Qs-1),U=Math.pow(z,1/q)*j,Y=U>=1?1:U/(2*(1-U)),X=s.getShape(e);if(!X)return;const ee=Jqe(Y,X,y);s.updateShape({id:X.id,type:X.type,x:ee.x,y:ee.y,props:{w:ee.w,h:ee.h,crop:ee.crop}}),i("set-style",{source:"image-toolbar",id:"zoom",value:V})},[s,i,e,y]),I=w.useCallback(()=>x["image-replace"].onSelect("image-toolbar"),[x]),P=w.useCallback(()=>x["download-original"].onSelect("image-toolbar"),[x]),M=V=>{const z=s.getShape(e);z&&s.run(()=>{s.setCurrentTool("select.crop.idle");const H=Zqe(V,z);s.markHistoryStoppingPoint("aspect ratio"),s.updateShape({id:e,type:"image",x:H.x,y:H.y,props:{crop:H.crop,w:H.w,h:H.h}}),er(s,[e])})},D=ce("altText",()=>s.getShape(e).props.altText,[s,e]),F=ce("shapeAspectRatio",()=>{const V=s.getShape(e);return V.props.w/V.props.h},[s,e]),B=!m||Ap(m,Jl());return w.useEffect(()=>{n&&s.timers.setTimeout(()=>{var V;return(V=d.current)==null?void 0:V.focus()},0)},[s,n]),w.useEffect(()=>{function V(H){n&&(H.key==="Escape"?(s.cancel(),a()):H.key==="Enter"&&(s.complete(),a()))}const z=d.current;return z&&z.addEventListener("keydown",V),()=>{z&&z.removeEventListener("keydown",V)}},[s,n,a]),n?g.jsxs(g.Fragment,{children:[g.jsx(zae,{ref:d,value:C,label:"tool.image-zoom",onValueChange:_,onHistoryMark:S,min:0,steps:100,"data-testid":"tool.image-zoom",title:l("tool.image-zoom")}),g.jsxs(DC,{id:"image-toolbar-aspect-ratio",children:[g.jsx(NC,{children:g.jsx(pr,{title:l("tool.aspect-ratio"),type:"icon","data-testid":"tool.image-aspect-ratio",children:g.jsx(kt,{icon:"corners"})})}),g.jsx(LC,{side:"top",align:"center",children:Wqe.map(V=>{let z=!1;return B?V==="original"&&(z=!0):V==="circle"?z=!!m.isCircle:V==="square"?z=!(m!=null&&m.isCircle)&&Eo(F,TR[V],.1):V==="original"?z=!1:z=!B&&Eo(F,TR[V],.01),g.jsx(AUe,{onSelect:()=>M(V),checked:z,title:l(`tool.aspect-ratio.${V}`),children:g.jsx(xo,{children:l(`tool.aspect-ratio.${V}`)})},V)})})]}),g.jsx(pr,{type:"icon",onClick:a,"data-testid":"tool.image-crop-confirm",style:{borderLeft:"1px solid var(--tl-color-divider)",marginLeft:"2px"},title:l("tool.image-crop-confirm"),children:g.jsx(kt,{small:!0,icon:"check"})})]}):g.jsxs(g.Fragment,{children:[!u&&g.jsx(pr,{type:"icon","data-testid":"tool.image-replace",onClick:I,title:l("tool.replace-media"),children:g.jsx(kt,{small:!0,icon:"tool-media"})}),!u&&g.jsx(pr,{type:"icon",title:l("tool.image-crop"),onClick:o,"data-testid":"tool.image-crop",children:g.jsx(kt,{small:!0,icon:"crop"})}),g.jsx(pr,{type:"icon",title:l("action.download-original"),onClick:P,"data-testid":"tool.image-download",children:g.jsx(kt,{small:!0,icon:"download"})}),(D||!u)&&g.jsx(pr,{type:"icon",title:l("tool.media-alt-text"),"data-testid":"tool.image-alt-text",onClick:()=>{i("alt-text-start",{source:c}),r()},children:g.jsx(kt,{small:!0,icon:"alt"})})]})});function t7e({children:t}){const e=ue(),n=ce("imageShape",()=>{const a=e.getOnlySelectedShape();return!a||a.type!=="image"?null:a.id},[e]),r=ce("showToolbar",()=>e.isInAny("select.idle","select.pointing_shape","select.crop"),[e]),o=ce("locked",()=>{var a;return n?(a=e.getShape(n))==null?void 0:a.isLocked:!1},[e,n]);return!n||!r||o?null:g.jsx(n7e,{imageShapeId:n,children:t},n)}function n7e({children:t,imageShapeId:e}){const n=ue(),r=it(),o=ce("editor path",()=>n.isInAny("select.crop.cropping","select.crop.pointing_crop_handle","select.crop.translating_crop"),[n]),a=ce("camera",()=>n.getCamera(),[n]),s=ce("editor path",()=>n.isIn("select.crop."),[n]),i=w.useRef(),l=w.useCallback(()=>{n.setCroppingShape(null),n.setCurrentTool("select.idle")},[n]),[c,d]=w.useState(!1),u=w.useCallback(()=>d(!0),[]),m=w.useCallback(()=>n.setCurrentTool("select.crop.idle"),[n]),h=w.useCallback(()=>d(!1),[]);w.useEffect(()=>{i.current=void 0},[a]);const y=w.useCallback(()=>{if(s&&i.current)return i.current;const v=n.getSelectionScreenBounds();if(!v)return;const x=new Be(v.x,v.y,v.width,0);return i.current=x,x},[n,s]);return o?(i.current=void 0,null):g.jsx(DL,{className:"tlui-image__toolbar",getSelectionBounds:y,label:r("tool.image-toolbar-title"),children:t||(c?g.jsx($ae,{shapeId:e,onClose:h,source:"image-toolbar"}):g.jsx(e7e,{imageShapeId:e,isManipulating:s,onEditAltTextStart:u,onManipulatingStart:m,onManipulatingEnd:l}))})}var r7e=Object.defineProperty,Vae=(t,e)=>{for(var n in e)r7e(t,n,{get:e[n],enumerable:!0})};function Gae(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:a}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,a=n.storedMarks,n}}}var o7e=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:a}=r,s=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([i,l])=>[i,(...d)=>{const u=l(...d)(s);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(a),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:a}=this,{view:s}=o,i=[],l=!!e,c=e||a.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),i.every(m=>m===!0)),u={...Object.fromEntries(Object.entries(r).map(([m,h])=>[m,(...v)=>{const x=this.buildProps(c,n),S=h(...v)(x);return i.push(S),u}])),run:d};return u}createCan(e){const{rawCommands:n,state:r}=this,o=!1,a=e||r.tr,s=this.buildProps(a,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(a,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:a}=this,{view:s}=o,i={tr:e,editor:o,view:s,state:Gae({state:a,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(i)]))}};return i}};function a7e(t,e){const n=new Vw(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}var Kae=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Kae(r)}return t};function yy(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Kae(n)}function R0(t,e,n){if(t instanceof Hi||t instanceof Le)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Le.fromArray(t.map(i=>e.nodeFromJSON(i)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(a){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),R0("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,i="";const l=new Mg({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,i=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Pl.fromSchema(l).parseSlice(yy(t),n.parseOptions):Pl.fromSchema(l).parse(yy(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${i}`)})}const a=Pl.fromSchema(e);return n.slice?a.parseSlice(yy(t),n.parseOptions).content:a.parse(yy(t),n.parseOptions)}return R0("",e,n)}function s7e(t,e,n={},r={}){return R0(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function i7e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function l7e(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function jL(t){return e=>l7e(e.$from,t)}function _n(t,e,n){return t.config[e]===void 0&&t.parent?_n(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?_n(t.parent,e,n):null}):t.config[e]}function Wae(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=_n(e,"addExtensions",n);return r?[e,...Wae(r())]:e}).flat(10)}function c7e(t,e){const n=Rp.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function u7e(t){return typeof t=="function"}function ro(t,e=void 0,...n){return u7e(t)?e?t.bind(e)(...n):t(...n):t}function d7e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function BL(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function p7e(t){const e=[],{nodeExtensions:n,markExtensions:r}=BL(t),o=[...n,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const i={name:s.name,options:s.options,storage:s.storage,extensions:o},l=_n(s,"addGlobalAttributes",i);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([m,h])=>{e.push({type:u,name:m,attribute:{...a,...h}})})})})}),o.forEach(s=>{const i={name:s.name,options:s.options,storage:s.storage},l=_n(s,"addAttributes",i);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const m={...a,...u};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,e.push({type:s.name,name:d,attribute:m})})}),e}function f7e(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,a])=>{if(!r[o]){r[o]=a;return}if(o==="class"){const i=a?String(a).split(" "):[],l=r[o]?r[o].split(" "):[],c=i.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const i=a?a.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,m]=d.split(":").map(h=>h.trim());c.set(u,m)}),i.forEach(d=>{const[u,m]=d.split(":").map(h=>h.trim());c.set(u,m)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=a}),r},{})}function lH(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>f7e(n,r),{})}function m7e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function cH(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((a,s)=>{const i=s.attribute.parseHTML?s.attribute.parseHTML(n):m7e(n.getAttribute(s.name));return i==null?a:{...a,[s.name]:i}},{});return{...r,...o}}}}function uH(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&d7e(n)?!1:n!=null))}function h7e(t,e){var n;const r=p7e(t),{nodeExtensions:o,markExtensions:a}=BL(t),s=(n=o.find(c=>_n(c,"topNode")))==null?void 0:n.name,i=Object.fromEntries(o.map(c=>{const d=r.filter(S=>S.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},m=t.reduce((S,T)=>{const C=_n(T,"extendNodeSchema",u);return{...S,...C?C(c):{}}},{}),h=uH({...m,content:ro(_n(c,"content",u)),marks:ro(_n(c,"marks",u)),group:ro(_n(c,"group",u)),inline:ro(_n(c,"inline",u)),atom:ro(_n(c,"atom",u)),selectable:ro(_n(c,"selectable",u)),draggable:ro(_n(c,"draggable",u)),code:ro(_n(c,"code",u)),whitespace:ro(_n(c,"whitespace",u)),linebreakReplacement:ro(_n(c,"linebreakReplacement",u)),defining:ro(_n(c,"defining",u)),isolating:ro(_n(c,"isolating",u)),attrs:Object.fromEntries(d.map(S=>{var T,C;return[S.name,{default:(T=S==null?void 0:S.attribute)==null?void 0:T.default,validate:(C=S==null?void 0:S.attribute)==null?void 0:C.validate}]}))}),y=ro(_n(c,"parseHTML",u));y&&(h.parseDOM=y.map(S=>cH(S,d)));const v=_n(c,"renderHTML",u);v&&(h.toDOM=S=>v({node:S,HTMLAttributes:lH(S,d)}));const x=_n(c,"renderText",u);return x&&(h.toText=x),[c.name,h]})),l=Object.fromEntries(a.map(c=>{const d=r.filter(x=>x.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},m=t.reduce((x,S)=>{const T=_n(S,"extendMarkSchema",u);return{...x,...T?T(c):{}}},{}),h=uH({...m,inclusive:ro(_n(c,"inclusive",u)),excludes:ro(_n(c,"excludes",u)),group:ro(_n(c,"group",u)),spanning:ro(_n(c,"spanning",u)),code:ro(_n(c,"code",u)),attrs:Object.fromEntries(d.map(x=>{var S,T;return[x.name,{default:(S=x==null?void 0:x.attribute)==null?void 0:S.default,validate:(T=x==null?void 0:x.attribute)==null?void 0:T.validate}]}))}),y=ro(_n(c,"parseHTML",u));y&&(h.parseDOM=y.map(x=>cH(x,d)));const v=_n(c,"renderHTML",u);return v&&(h.toDOM=x=>v({mark:x,HTMLAttributes:lH(x,d)})),[c.name,h]}));return new Mg({topNode:s,nodes:i,marks:l})}function g7e(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function b7e(t){return t.sort((n,r)=>{const o=_n(n,"priority")||100,a=_n(r,"priority")||100;return o>a?-1:o<a?1:0})}function y7e(t){const e=b7e(Wae(t)),n=g7e(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function FL(t,e){const n=y7e(t);return h7e(n,e)}function v7e(t,e){const n=FL(e),r=Hi.fromJSON(n,t);return c7e(r.content,n)}function x7e(t,e){const n=FL(e),r=yy(t);return Pl.fromSchema(n).parse(r).toJSON()}function Yae(t,e,n){const{from:r,to:o}=e,{blockSeparator:a=`

`,textSerializers:s={}}=n||{};let i="";return t.nodesBetween(r,o,(l,c,d,u)=>{var m;l.isBlock&&c>r&&(i+=a);const h=s==null?void 0:s[l.type.name];if(h)return d&&(i+=h({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(i+=(m=l==null?void 0:l.text)==null?void 0:m.slice(Math.max(r,c)-c,o-c))}),i}function S7e(t,e){const n={from:0,to:t.content.size};return Yae(t,n,e)}function Xae(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function E7e(t,e,n){const{blockSeparator:r=`

`,textSerializers:o={}}=n||{},a=FL(e),s=Hi.fromJSON(a,t);return S7e(s,{blockSeparator:r,textSerializers:{...Xae(a),...o}})}function Up(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function T7e(t,e){const n=Up(e,t.schema),{from:r,to:o,empty:a}=t.selection,s=[];a?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const i=s.find(l=>l.type.name===n.name);return i?{...i.attrs}:{}}function ts(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Jae(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function w7e(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function C7e(t){const e=w7e(t);return e.length===1?e:e.filter((n,r)=>!e.filter((a,s)=>s!==r).some(a=>n.oldRange.from>=a.oldRange.from&&n.oldRange.to<=a.oldRange.to&&n.newRange.from>=a.newRange.from&&n.newRange.to<=a.newRange.to))}function A7e(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,a)=>{const s=[];if(o.ranges.length)o.forEach((i,l)=>{s.push({from:i,to:l})});else{const{from:i,to:l}=n[a];if(i===void 0||l===void 0)return;s.push({from:i,to:l})}s.forEach(({from:i,to:l})=>{const c=e.slice(a).map(i,-1),d=e.slice(a).map(l),u=e.invert().map(c,-1),m=e.invert().map(d);r.push({oldRange:{from:u,to:m},newRange:{from:c,to:d}})})}),C7e(r)}function _7e(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function pT(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:_7e(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function Qae(t,e,n={}){return t.find(r=>r.type===e&&pT(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function dH(t,e,n={}){return!!Qae(t,e,n)}function zL(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])==null?void 0:r.attrs),!Qae([...o.node.marks],e,n)))return;let s=o.index,i=t.start()+o.offset,l=s+1,c=i+o.node.nodeSize;for(;s>0&&dH([...t.parent.child(s-1).marks],e,n);)s-=1,i-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&dH([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:i,to:c}}function R1(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(a=>a.type===e&&a.name===r);return o?o.attribute.keepOnSplit:!1}))}function k7e(t,e,n={}){const{empty:r,ranges:o}=t.selection,a=e?Up(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>a?a.name===u.type.name:!0).find(u=>pT(u.attrs,n,{strict:!1}));let s=0;const i=[];if(o.forEach(({$from:u,$to:m})=>{const h=u.pos,y=m.pos;t.doc.nodesBetween(h,y,(v,x)=>{if(!v.isText&&!v.marks.length)return;const S=Math.max(h,x),T=Math.min(y,x+v.nodeSize),C=T-S;s+=C,i.push(...v.marks.map(_=>({mark:_,from:S,to:T})))})}),s===0)return!1;const l=i.filter(u=>a?a.name===u.mark.type.name:!0).filter(u=>pT(u.mark.attrs,n,{strict:!1})).reduce((u,m)=>u+m.to-m.from,0),c=i.filter(u=>a?u.mark.type!==a&&u.mark.type.excludes(a):!0).reduce((u,m)=>u+m.to-m.from,0);return(l>0?l+c:l)>=s}function UL(t,e,n={}){const{from:r,to:o,empty:a}=t.selection,s=e?ts(e,t.schema):null,i=[];t.doc.nodesBetween(r,o,(u,m)=>{if(u.isText)return;const h=Math.max(r,m),y=Math.min(o,m+u.nodeSize);i.push({node:u,from:h,to:y})});const l=o-r,c=i.filter(u=>s?s.name===u.node.type.name:!0).filter(u=>pT(u.node.attrs,n,{strict:!1}));return a?!!c.length:c.reduce((u,m)=>u+m.to-m.from,0)>=l}function pH(t,e){const{nodeExtensions:n}=BL(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},a=ro(_n(r,"group",o));return typeof a!="string"?!1:a.split(" ").includes("list")}function Zae(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(a=>{o!==!1&&(Zae(a,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function ese(t){return t instanceof ft}function bf(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function I7e(t,e=null){if(!e)return null;const n=Mt.atStart(t),r=Mt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,a=r.to;return e==="all"?ft.create(t,bf(0,o,a),bf(t.content.size,o,a)):ft.create(t,bf(e,o,a),bf(e,o,a))}function P7e(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof Ho||o instanceof Vo))return;const a=t.mapping.maps[r];let s=0;a.forEach((i,l,c,d)=>{s===0&&(s=d)}),t.setSelection(Mt.near(t.doc.resolve(s),n))}function O7e(t){return Object.prototype.toString.call(t).slice(8,-1)}function $S(t){return O7e(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function tse(t,e){const n={...t};return $S(t)&&$S(e)&&Object.keys(e).forEach(r=>{$S(e[r])&&$S(t[r])?n[r]=tse(t[r],e[r]):n[r]=e[r]}),n}var M7e=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...ro(_n(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ro(_n(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const n=this.extend({...this.config,addOptions:()=>tse(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new this.constructor({...this.config,...e});return n.parent=this,this.child=n,n.name="name"in e?e.name:n.parent.name,n}},R7e={};Vae(R7e,{ClipboardTextSerializer:()=>D7e,Commands:()=>HHe,Delete:()=>$He,Drop:()=>VHe,Editable:()=>GHe,FocusEvents:()=>KHe,Keymap:()=>WHe,Paste:()=>YHe,Tabindex:()=>XHe,focusEventsPluginKey:()=>ase});var uc=class nse extends M7e{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new nse(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},D7e=uc.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new xn({key:new jn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:a}=o,s=Math.min(...a.map(d=>d.$from.pos)),i=Math.max(...a.map(d=>d.$to.pos)),l=Xae(n);return Yae(r,{from:s,to:i},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),rse={};Vae(rse,{blur:()=>N7e,clearContent:()=>L7e,clearNodes:()=>j7e,command:()=>B7e,createParagraphNear:()=>F7e,cut:()=>z7e,deleteCurrentNode:()=>U7e,deleteNode:()=>q7e,deleteRange:()=>H7e,deleteSelection:()=>$7e,enter:()=>V7e,exitCode:()=>G7e,extendMarkRange:()=>K7e,first:()=>W7e,focus:()=>X7e,forEach:()=>J7e,insertContent:()=>Q7e,insertContentAt:()=>eHe,joinBackward:()=>rHe,joinDown:()=>nHe,joinForward:()=>oHe,joinItemBackward:()=>aHe,joinItemForward:()=>sHe,joinTextblockBackward:()=>iHe,joinTextblockForward:()=>lHe,joinUp:()=>tHe,keyboardShortcut:()=>uHe,lift:()=>dHe,liftEmptyBlock:()=>pHe,liftListItem:()=>fHe,newlineInCode:()=>mHe,resetAttributes:()=>hHe,scrollIntoView:()=>gHe,selectAll:()=>bHe,selectNodeBackward:()=>yHe,selectNodeForward:()=>vHe,selectParentNode:()=>xHe,selectTextblockEnd:()=>SHe,selectTextblockStart:()=>EHe,setContent:()=>THe,setMark:()=>CHe,setMeta:()=>AHe,setNode:()=>_He,setNodeSelection:()=>kHe,setTextSelection:()=>IHe,sinkListItem:()=>PHe,splitBlock:()=>OHe,splitListItem:()=>MHe,toggleList:()=>RHe,toggleMark:()=>DHe,toggleNode:()=>NHe,toggleWrap:()=>LHe,undoInputRule:()=>jHe,unsetAllMarks:()=>BHe,unsetMark:()=>FHe,updateAttributes:()=>zHe,wrapIn:()=>UHe,wrapInList:()=>qHe});var N7e=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),L7e=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),j7e=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:a,$to:s})=>{t.doc.nodesBetween(a.pos,s.pos,(i,l)=>{if(i.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),m=c.resolve(d.map(l+i.nodeSize)),h=u.blockRange(m);if(!h)return;const y=Dp(h);if(i.type.isTextblock){const{defaultType:v}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,v)}(y||y===0)&&e.lift(h,y)})}),!0},B7e=t=>e=>t(e),F7e=()=>({state:t,dispatch:e})=>tC(t,e),z7e=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,a=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,a.content),r.setSelection(new ft(r.doc.resolve(Math.max(s-1,0)))),!0},U7e=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===r.type){if(e){const i=o.before(a),l=o.after(a);t.delete(i,l).scrollIntoView()}return!0}return!1},q7e=t=>({tr:e,state:n,dispatch:r})=>{const o=ts(t,n.schema),a=e.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===o){if(r){const l=a.before(s),c=a.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},H7e=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},$7e=()=>({state:t,dispatch:e})=>Av(t,e),V7e=()=>({commands:t})=>t.keyboardShortcut("Enter"),G7e=()=>({state:t,dispatch:e})=>g3(t,e),K7e=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const a=Up(t,r.schema),{doc:s,selection:i}=n,{$from:l,from:c,to:d}=i;if(o){const u=zL(l,a,e);if(u&&u.from<=c&&u.to>=d){const m=ft.create(s,u.from,u.to);n.setSelection(m)}}return!0},W7e=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Y7e(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function qL(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var X7e=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:a})=>{e={scrollIntoView:!0,...e};const s=()=>{(qL()||Y7e())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(a&&t===null&&!ese(n.state.selection))return s(),!0;const i=I7e(o.doc,t)||n.state.selection,l=n.state.selection.eq(i);return a&&(l||o.setSelection(i),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},J7e=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),Q7e=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Z7e=t=>!("type"in t),eHe=(t,e,n)=>({tr:r,dispatch:o,editor:a})=>{var s;if(o){n={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let i;const l=x=>{a.emit("contentError",{editor:a,error:x,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{R0(e,a.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{i=R0(e,a.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(x){return l(x),!1}let{from:d,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,h=!0;if((Z7e(i)?i:[i]).forEach(x=>{x.check(),m=m?x.isText&&x.marks.length===0:!1,h=h?x.isBlock:!1}),d===u&&h){const{parent:x}=r.doc.resolve(d);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(d-=1,u+=1)}let v;if(m){if(Array.isArray(e))v=e.map(x=>x.text||"").join("");else if(e instanceof Le){let x="";e.forEach(S=>{S.text&&(x+=S.text)}),v=x}else typeof e=="object"&&e&&e.text?v=e.text:v=e;r.insertText(v,d,u)}else{v=i;const x=r.doc.resolve(d),S=x.node(),T=x.parentOffset===0,C=S.isText||S.isTextblock,_=S.content.size>0;T&&C&&_&&(d=Math.max(0,d-1)),r.replaceWith(d,u,v)}n.updateSelection&&P7e(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:v})}return!0},tHe=()=>({state:t,dispatch:e})=>p3(t,e),nHe=()=>({state:t,dispatch:e})=>f3(t,e),rHe=()=>({state:t,dispatch:e})=>Xw(t,e),oHe=()=>({state:t,dispatch:e})=>Qw(t,e),aHe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Np(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},sHe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Np(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},iHe=()=>({state:t,dispatch:e})=>l3(t,e),lHe=()=>({state:t,dispatch:e})=>c3(t,e);function ose(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function cHe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,a,s;for(let i=0;i<e.length-1;i+=1){const l=e[i];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))qL()||ose()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}var uHe=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const a=cHe(t).split(/-(?!$)/),s=a.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),i=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,i))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0},dHe=(t,e={})=>({state:n,dispatch:r})=>{const o=ts(t,n.schema);return UL(n,o,e)?m3(n,r):!1},pHe=()=>({state:t,dispatch:e})=>nC(t,e),fHe=t=>({state:e,dispatch:n})=>{const r=ts(t,e.schema);return T3(r)(e,n)},mHe=()=>({state:t,dispatch:e})=>eC(t,e);function fH(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}var hHe=(t,e)=>({tr:n,state:r,dispatch:o})=>{let a=null,s=null;const i=Jae(typeof t=="string"?t:t.name,r.schema);return i?(i==="node"&&(a=ts(t,r.schema)),i==="mark"&&(s=Up(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{a&&a===c.type&&n.setNodeMarkup(d,void 0,fH(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(u=>{s===u.type&&n.addMark(d,d+c.nodeSize,s.create(fH(u.attrs,e)))})})}),!0):!1},gHe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),bHe=()=>({tr:t,dispatch:e})=>{if(e){const n=new As(t.doc);t.setSelection(n)}return!0},yHe=()=>({state:t,dispatch:e})=>Jw(t,e),vHe=()=>({state:t,dispatch:e})=>Zw(t,e),xHe=()=>({state:t,dispatch:e})=>b3(t,e),SHe=()=>({state:t,dispatch:e})=>v3(t,e),EHe=()=>({state:t,dispatch:e})=>y3(t,e),THe=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:o,tr:a,dispatch:s,commands:i})=>{const{doc:l}=a;if(r.preserveWhitespace!=="full"){const c=s7e(t,o.schema,r,{errorOnInvalidContent:e??o.options.enableContentCheck});return s&&a.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return s&&a.setMeta("preventUpdate",!n),i.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??o.options.enableContentCheck})};function wHe(t,e,n){var r;const{selection:o}=e;let a=null;if(ese(o)&&(a=o.$cursor),a){const i=(r=t.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(n)&&(!!n.isInSet(i)||!i.some(c=>c.type.excludes(n)))}const{ranges:s}=o;return s.some(({$from:i,$to:l})=>{let c=i.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(i.pos,l.pos,(d,u,m)=>{if(c)return!1;if(d.isInline){const h=!m||m.type.allowsMarkType(n),y=!!n.isInSet(d.marks)||!d.marks.some(v=>v.type.excludes(n));c=h&&y}return!c}),c})}var CHe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:a}=n,{empty:s,ranges:i}=a,l=Up(t,r.schema);if(o)if(s){const c=T7e(r,l);n.addStoredMark(l.create({...c,...e}))}else i.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(m,h)=>{const y=Math.max(h,d),v=Math.min(h+m.nodeSize,u);m.marks.find(S=>S.type===l)?m.marks.forEach(S=>{l===S.type&&n.addMark(y,v,l.create({...S.attrs,...e}))}):n.addMark(y,v,l.create(e))})});return wHe(r,n,l)},AHe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),_He=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const a=ts(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),a.isTextblock?o().command(({commands:i})=>tg(a,{...s,...e})(n)?!0:i.clearNodes()).command(({state:i})=>tg(a,{...s,...e})(i,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},kHe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=bf(t,0,r.content.size),a=Tt.create(r,o);e.setSelection(a)}return!0},IHe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:a}=typeof t=="number"?{from:t,to:t}:t,s=ft.atStart(r).from,i=ft.atEnd(r).to,l=bf(o,s,i),c=bf(a,s,i),d=ft.create(r,l,c);e.setSelection(d)}return!0},PHe=t=>({state:e,dispatch:n})=>{const r=ts(t,e.schema);return w3(r)(e,n)};function mH(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}var OHe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:a,doc:s}=e,{$from:i,$to:l}=a,c=o.extensionManager.attributes,d=R1(c,i.node().type.name,i.node().attrs);if(a instanceof Tt&&a.node.isBlock)return!i.parentOffset||!Ra(s,i.pos)?!1:(r&&(t&&mH(n,o.extensionManager.splittableMarks),e.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,m=i.depth===0?void 0:i7e(i.node(-1).contentMatchAt(i.indexAfter(-1)));let h=u&&m?[{type:m,attrs:d}]:void 0,y=Ra(e.doc,e.mapping.map(i.pos),1,h);if(!h&&!y&&Ra(e.doc,e.mapping.map(i.pos),1,m?[{type:m}]:void 0)&&(y=!0,h=m?[{type:m,attrs:d}]:void 0),r){if(y&&(a instanceof ft&&e.deleteSelection(),e.split(e.mapping.map(i.pos),1,h),m&&!u&&!i.parentOffset&&i.parent.type!==m)){const v=e.mapping.map(i.before()),x=e.doc.resolve(v);i.node(-1).canReplaceWith(x.index(),x.index()+1,m)&&e.setNodeMarkup(e.mapping.map(i.before()),m)}t&&mH(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return y},MHe=(t,e={})=>({tr:n,state:r,dispatch:o,editor:a})=>{var s;const i=ts(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==i)return!1;const m=a.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==i||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let S=Le.empty;const T=l.index(-1)?1:l.index(-2)?2:3;for(let D=l.depth-T;D>=l.depth-3;D-=1)S=Le.from(l.node(D).copy(S));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,_={...R1(m,l.node().type.name,l.node().attrs),...e},I=((s=i.contentMatch.defaultType)==null?void 0:s.createAndFill(_))||void 0;S=S.append(Le.from(i.createAndFill(null,I)||void 0));const P=l.before(l.depth-(T-1));n.replace(P,l.after(-C),new at(S,4-T,0));let M=-1;n.doc.nodesBetween(P,n.doc.content.size,(D,F)=>{if(M>-1)return!1;D.isTextblock&&D.content.size===0&&(M=F+1)}),M>-1&&n.setSelection(ft.near(n.doc.resolve(M))),n.scrollIntoView()}return!0}const h=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,y={...R1(m,u.type.name,u.attrs),...e},v={...R1(m,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=h?[{type:i,attrs:y},{type:h,attrs:v}]:[{type:i,attrs:y}];if(!Ra(n.doc,l.pos,2))return!1;if(o){const{selection:S,storedMarks:T}=r,{splittableMarks:C}=a.extensionManager,_=T||S.$to.parentOffset&&S.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!_||!o)return!0;const I=_.filter(P=>C.includes(P.type.name));n.ensureMarks(I)}return!0},HP=(t,e)=>{const n=jL(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Ll(t.doc,n.pos)&&t.join(n.pos),!0},$P=(t,e)=>{const n=jL(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Ll(t.doc,r)&&t.join(r),!0},RHe=(t,e,n,r={})=>({editor:o,tr:a,state:s,dispatch:i,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:m}=o.extensionManager,h=ts(t,s.schema),y=ts(e,s.schema),{selection:v,storedMarks:x}=s,{$from:S,$to:T}=v,C=S.blockRange(T),_=x||v.$to.parentOffset&&v.$from.marks();if(!C)return!1;const I=jL(P=>pH(P.type.name,u))(v);if(C.depth>=1&&I&&C.depth-I.depth<=1){if(I.node.type===h)return c.liftListItem(y);if(pH(I.node.type.name,u)&&h.validContent(I.node.content)&&i)return l().command(()=>(a.setNodeMarkup(I.pos,h),!0)).command(()=>HP(a,h)).command(()=>$P(a,h)).run()}return!n||!_||!i?l().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>HP(a,h)).command(()=>$P(a,h)).run():l().command(()=>{const P=d().wrapInList(h,r),M=_.filter(D=>m.includes(D.type.name));return a.ensureMarks(M),P?!0:c.clearNodes()}).wrapInList(h,r).command(()=>HP(a,h)).command(()=>$P(a,h)).run()},DHe=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:a=!1}=n,s=Up(t,r.schema);return k7e(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:a}):o.setMark(s,e)},NHe=(t,e,n={})=>({state:r,commands:o})=>{const a=ts(t,r.schema),s=ts(e,r.schema),i=UL(r,a,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),i?o.setNode(s,l):o.setNode(a,{...l,...n})},LHe=(t,e={})=>({state:n,commands:r})=>{const o=ts(t,n.schema);return UL(n,o,e)?r.lift(o):r.wrapIn(o,e)},jHe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let a;if(o.spec.isInputRules&&(a=o.getState(t))){if(e){const s=t.tr,i=a.transform;for(let l=i.steps.length-1;l>=0;l-=1)s.step(i.steps[l].invert(i.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},BHe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},FHe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var a;const{extendEmptyMarkRange:s=!1}=e,{selection:i}=n,l=Up(t,r.schema),{$from:c,empty:d,ranges:u}=i;if(!o)return!0;if(d&&s){let{from:m,to:h}=i;const y=(a=c.marks().find(x=>x.type===l))==null?void 0:a.attrs,v=zL(c,l,y);v&&(m=v.from,h=v.to),n.removeMark(m,h,l)}else u.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,l)});return n.removeStoredMark(l),!0},zHe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let a=null,s=null;const i=Jae(typeof t=="string"?t:t.name,r.schema);return i?(i==="node"&&(a=ts(t,r.schema)),i==="mark"&&(s=Up(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let u,m,h,y;n.selection.empty?r.doc.nodesBetween(c,d,(v,x)=>{a&&a===v.type&&(h=Math.max(x,c),y=Math.min(x+v.nodeSize,d),u=x,m=v)}):r.doc.nodesBetween(c,d,(v,x)=>{x<c&&a&&a===v.type&&(h=Math.max(x,c),y=Math.min(x+v.nodeSize,d),u=x,m=v),x>=c&&x<=d&&(a&&a===v.type&&n.setNodeMarkup(x,void 0,{...v.attrs,...e}),s&&v.marks.length&&v.marks.forEach(S=>{if(s===S.type){const T=Math.max(x,c),C=Math.min(x+v.nodeSize,d);n.addMark(T,C,s.create({...S.attrs,...e}))}}))}),m&&(u!==void 0&&n.setNodeMarkup(u,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(v=>{s===v.type&&n.addMark(h,y,s.create({...v.attrs,...e}))}))}),!0):!1},UHe=(t,e={})=>({state:n,dispatch:r})=>{const o=ts(t,n.schema);return x3(o,e)(n,r)},qHe=(t,e={})=>({state:n,dispatch:r})=>{const o=ts(t,n.schema);return E3(o,e)(n,r)},HHe=uc.create({name:"commands",addCommands(){return{...rse}}}),$He=uc.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,o;const a=()=>{var s,i,l,c;if((c=(l=(i=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:i.filterTransaction)==null?void 0:l.call(i,t))!=null?c:t.getMeta("y-sync$"))return;const d=a7e(t.before,[t,...e]);A7e(d).forEach(h=>{d.mapping.mapResult(h.oldRange.from).deletedAfter&&d.mapping.mapResult(h.oldRange.to).deletedBefore&&d.before.nodesBetween(h.oldRange.from,h.oldRange.to,(y,v)=>{const x=v+y.nodeSize-2,S=h.oldRange.from<=v&&x<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:v,to:x,newFrom:d.mapping.map(v),newTo:d.mapping.map(x),deletedRange:h.oldRange,newRange:h.newRange,partial:!S,editor:this.editor,transaction:t,combinedTransform:d})})});const m=d.mapping;d.steps.forEach((h,y)=>{var v,x;if(h instanceof ji){const S=m.slice(y).map(h.from,-1),T=m.slice(y).map(h.to),C=m.invert().map(S,-1),_=m.invert().map(T),I=(v=d.doc.nodeAt(S-1))==null?void 0:v.marks.some(M=>M.eq(h.mark)),P=(x=d.doc.nodeAt(T))==null?void 0:x.marks.some(M=>M.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:C,to:_},newRange:{from:S,to:T},partial:!!(P||I),editor:this.editor,transaction:t,combinedTransform:d})}})};(o=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||o?setTimeout(a,0):a()}}),VHe=uc.create({name:"drop",addProseMirrorPlugins(){return[new xn({key:new jn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),GHe=uc.create({name:"editable",addProseMirrorPlugins(){return[new xn({key:new jn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ase=new jn("focusEvents"),KHe=uc.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new xn({key:ase,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),WHe=uc.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:i})=>{const{selection:l,doc:c}=i,{empty:d,$anchor:u}=l,{pos:m,parent:h}=u,y=u.parent.isTextblock&&m>0?i.doc.resolve(m-1):u,v=y.parent.type.spec.isolating,x=u.pos-u.parentOffset,S=v&&y.parent.childCount===1?x===u.pos:Mt.atStart(c).from===m;return!d||!h.type.isTextblock||h.textContent.length||!S||S&&u.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},a={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return qL()||ose()?a:o},addProseMirrorPlugins(){return[new xn({key:new jn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(v=>v.getMeta("composition")))return;const r=t.some(v=>v.docChanged)&&!e.doc.eq(n.doc),o=t.some(v=>v.getMeta("preventClearDocument"));if(!r||o)return;const{empty:a,from:s,to:i}=e.selection,l=Mt.atStart(e.doc).from,c=Mt.atEnd(e.doc).to;if(a||!(s===l&&i===c)||!Zae(n.doc))return;const m=n.tr,h=Gae({state:n,transaction:m}),{commands:y}=new o7e({editor:this.editor,state:h});if(y.clearNodes(),!!m.steps.length)return m}})]}}),YHe=uc.create({name:"paste",addProseMirrorPlugins(){return[new xn({key:new jn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),XHe=uc.create({name:"tabindex",addProseMirrorPlugins(){return[new xn({key:new jn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function JHe({textEditor:t,onEditLinkStart:e}){const n=$r(),r=it(),o="rich-text-menu",[a,s]=w.useState(0);return w.useEffect(function(){function c(){s(d=>d+1)}t.on("update",c),t.on("selectionUpdate",c)},[t]),w.useEffect(()=>{function l(c){e&&Pr(c)&&c.shiftKey&&c.key==="k"&&(c.preventDefault(),e())}return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[e]),w.useMemo(()=>{function l(c,d){t.view&&(n("rich-text",{operation:c,source:o}),t.chain().focus()[d]().run())}return[{name:"bold",onSelect(){l("bold","toggleBold")}},{name:"italic",onSelect(){l("bold","toggleItalic")}},{name:"code",onSelect(){l("bold","toggleCode")}},e?{name:"link",onSelect(){e()}}:void 0,{name:"bulletList",onSelect(){l("bulletList","toggleBulletList")}},{name:"highlight",onSelect(){l("bulletList","toggleHighlight")}}].filter(Boolean)},[t,n,e]).map(({name:l,attrs:c,onSelect:d})=>{const u=t.view?t.isActive(l,c):!1;return g.jsx(pr,{title:r(`tool.rich-text-${l}`),"data-testid":`rich-text.${l}`,type:"icon",isActive:u,onPointerDown:Nt,onClick:d,role:"option","aria-pressed":u,children:g.jsx(kt,{small:!0,icon:l})},l)})}function QHe({textEditor:t,value:e,onClose:n}){const r=ue(),[o,a]=w.useState(e),s=it(),i=w.useRef(null),l=$r(),c="rich-text-menu",d=o.startsWith("http")?o:`https://${o}`,u=x=>a(x),m=x=>{l("rich-text",{operation:"link-edit",source:c}),!x.startsWith("http://")&&!x.startsWith("https://")&&(x=`https://${x}`),t.chain().setLink({href:x}).run(),r.getInstanceState().isCoarsePointer?t.commands.blur():t.commands.focus(),n()},h=()=>{l("rich-text",{operation:"link-visit",source:c}),I3(d,"_blank"),n()},y=()=>{l("rich-text",{operation:"link-remove",source:c}),t.chain().unsetLink().focus().run(),n()},v=()=>n();return w.useEffect(()=>{var x;(x=i.current)==null||x.focus()},[o]),w.useEffect(()=>{a(e)},[e]),g.jsxs(g.Fragment,{children:[g.jsx(Fg,{ref:i,"data-testid":"rich-text.link-input",className:"tlui-rich-text__toolbar-link-input",value:o,onValueChange:u,onComplete:m,onCancel:v,placeholder:"example.com","aria-label":"example.com"}),g.jsx(nn,{className:"tlui-rich-text__toolbar-link-visit",title:s("tool.rich-text-link-visit"),type:"icon",onPointerDown:Nt,onClick:h,disabled:!o,children:g.jsx(kt,{small:!0,icon:"external-link"})}),g.jsx(nn,{className:"tlui-rich-text__toolbar-link-remove",title:s("tool.rich-text-link-remove"),"data-testid":"rich-text.link-remove",type:"icon",onPointerDown:Nt,onClick:y,children:g.jsx(kt,{small:!0,icon:"trash"})})]})}const ZHe=Co(function({children:e}){const n=ue(),r=ce("textEditor",()=>n.getRichTextEditor(),[n]);return n.getInstanceState().isCoarsePointer||!r?null:g.jsx(e$e,{textEditor:r,children:e})});function e$e({textEditor:t,children:e}){const{isEditingLink:n,onEditLinkStart:r,onEditLinkClose:o}=t$e(t),[a,s]=w.useState(null),i=w.useRef(),l=n$e(t),c=it(),d=w.useCallback(()=>{if(n)return i.current;const u=window.getSelection();if(!a||!u||u.rangeCount===0||u.isCollapsed)return;const m=[];for(let y=0;y<u.rangeCount;y++){const v=u.getRangeAt(y);m.push(Hae(v.getBoundingClientRect()))}const h=Be.Common(m);return i.current=h,h},[a,n]);return w.useEffect(()=>{const u=({editor:m})=>s(m.state.selection);return t.on("selectionUpdate",u),u({editor:t}),()=>{t.off("selectionUpdate",u)}},[t]),g.jsx(DL,{className:"tlui-rich-text__toolbar",getSelectionBounds:d,isMousingDown:l,changeOnlyWhenYChanges:!0,label:c("tool.rich-text-toolbar-title"),children:e||(n?g.jsx(QHe,{textEditor:t,value:t.isActive("link")?t.getAttributes("link").href:"",onClose:o}):g.jsx(JHe,{textEditor:t,onEditLinkStart:r}))})}function t$e(t){const[e,n]=w.useState(!1);w.useEffect(()=>{if(!t){n(!1);return}const s=()=>{const i=t.isActive("link");n(i)};return t.view.dom.addEventListener("click",s),()=>{t.isInitialized&&t.view.dom.removeEventListener("click",s)}},[t,e]),w.useEffect(()=>{if(t&&t.isActive("link"))try{const{from:s,to:i}=zL(t.state.doc.resolve(t.state.selection.from),t.schema.marks.link);t.state.selection.empty&&t.commands.setTextSelection({from:s,to:i})}catch{}},[t,e]);const r=w.useCallback(()=>{n(!0)},[]),o=w.useCallback(()=>{n(!1)},[]),a=w.useCallback(()=>{if(n(!1),!t)return;const s=t.state.selection.from;t.commands.setTextSelection({from:s,to:s})},[t]);return{isEditingLink:e,onEditLinkStart:r,onEditLinkClose:a,onEditLinkCancel:o}}function n$e(t){const[e,n]=w.useState(!1);return w.useEffect(()=>{if(!t)return;const r=pw(({isPointing:l})=>{n(l)},16),o=()=>r({isPointing:!0}),a=()=>r({isPointing:!1}),s=["touchstart","pointerdown","mousedown"],i=["touchend","pointerup","mouseup"];return s.forEach(l=>{t.view.dom.addEventListener(l,o)}),i.forEach(l=>{document.body.addEventListener(l,a)}),()=>{s.forEach(l=>{t.isInitialized&&t.view.dom.removeEventListener(l,o)}),i.forEach(l=>{document.body.removeEventListener(l,a)})}},[t]),e}function r$e(){const t=ue(),e=it(),{orientation:n}=Lv(),r=Fae(),o=r==null?void 0:r.get(ks),a=Op({isDarkMode:t.user.getIsDarkMode()}),s=(o==null?void 0:o.type)==="shared"?yn(a,o.value,"solid"):yn(a,"black","solid"),i=ce("disable style panel",()=>t.isInAny("hand","zoom","eraser","laser"),[t]),l=w.useCallback(d=>{d||t.updateInstanceState({isChangingStyle:!1})},[t]),{StylePanel:c}=ru();return c?g.jsxs(Gf,{id:"mobile style menu",onOpenChange:l,children:[g.jsx(Kf,{children:g.jsx(nn,{type:"tool","data-testid":"mobile-styles.button",style:{color:i?"var(--tl-color-muted-1)":s},title:e("style-panel.title"),disabled:i,children:g.jsx(kt,{icon:i?"blob":(o==null?void 0:o.type)==="mixed"?"mixed":"blob"})})}),g.jsx(Wf,{side:n==="horizontal"?"top":"right",align:"end",children:c&&g.jsx(c,{isMobile:!0})})]}):null}function o$e(){return g.jsxs(g.Fragment,{children:[g.jsx(s$e,{}),g.jsx(i$e,{}),g.jsx(l$e,{}),g.jsx(c$e,{}),g.jsx(u$e,{}),g.jsx(d$e,{}),g.jsx(p$e,{}),g.jsx(f$e,{}),g.jsx(m$e,{}),g.jsx(h$e,{}),g.jsx(b$e,{}),g.jsx(g$e,{}),g.jsx(x$e,{}),g.jsx(T$e,{}),g.jsx(y$e,{}),g.jsx(E$e,{}),g.jsx(S$e,{}),g.jsx(v$e,{}),g.jsx(w$e,{}),g.jsx(C$e,{}),g.jsx(A$e,{}),g.jsx(_$e,{}),g.jsx(k$e,{}),g.jsx(I$e,{}),g.jsx(P$e,{}),g.jsx(O$e,{}),g.jsx(R$e,{}),g.jsx(M$e,{})]})}function a$e(t){var r;const e=ue(),n=(r=t==null?void 0:t.meta)==null?void 0:r.geo;return ce("is tool selected",()=>{if(!t)return!1;const o=e.getCurrentToolId();return o==="geo"?n===e.getSharedStyles().getAsKnownValue(Bc):o===t.id},[e,t==null?void 0:t.id,n])}function gr({tool:t}){const e=PL(),n=a$e(e[t]);return g.jsx(Js,{toolId:t,isSelected:n})}function s$e(){return g.jsx(gr,{tool:"select"})}function i$e(){return g.jsx(gr,{tool:"hand"})}function l$e(){return g.jsx(gr,{tool:"draw"})}function c$e(){return g.jsx(gr,{tool:"eraser"})}function u$e(){return g.jsx(gr,{tool:"arrow"})}function d$e(){return g.jsx(gr,{tool:"text"})}function p$e(){return g.jsx(gr,{tool:"note"})}function f$e(){return g.jsx(Js,{toolId:"asset"})}function m$e(){return g.jsx(gr,{tool:"rectangle"})}function h$e(){return g.jsx(gr,{tool:"ellipse"})}function g$e(){return g.jsx(gr,{tool:"diamond"})}function b$e(){return g.jsx(gr,{tool:"triangle"})}function y$e(){return g.jsx(gr,{tool:"rhombus"})}function v$e(){return g.jsx(gr,{tool:"heart"})}function x$e(){return g.jsx(gr,{tool:"hexagon"})}function S$e(){return g.jsx(gr,{tool:"cloud"})}function E$e(){return g.jsx(gr,{tool:"star"})}function T$e(){return g.jsx(gr,{tool:"oval"})}function w$e(){return g.jsx(gr,{tool:"x-box"})}function C$e(){return g.jsx(gr,{tool:"check-box"})}function A$e(){return g.jsx(gr,{tool:"arrow-left"})}function _$e(){return g.jsx(gr,{tool:"arrow-up"})}function k$e(){return g.jsx(gr,{tool:"arrow-down"})}function I$e(){return g.jsx(gr,{tool:"arrow-right"})}function P$e(){return g.jsx(gr,{tool:"line"})}function O$e(){return g.jsx(gr,{tool:"highlight"})}function M$e(){return g.jsx(gr,{tool:"frame"})}function R$e(){return g.jsx(gr,{tool:"laser"})}const VP=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function GP(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),n)}function Xb(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on".concat(e),n)}function sse(t,e){const n=e.slice(0,e.length-1);for(let r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function ise(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function D$e(t,e){const n=t.length>=e.length?t:e,r=t.length>=e.length?e:t;let o=!0;for(let a=0;a<n.length;a++)r.indexOf(n[a])===-1&&(o=!1);return o}const D0={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":VP?173:189,"=":VP?61:187,";":VP?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},tc={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,meta:91,command:91},vy={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},wa={16:!1,18:!1,17:!1,91:!1},Wr={};for(let t=1;t<20;t++)D0["f".concat(t)]=111+t;let zr=[],Gy=null,lse="all";const Du=new Map,zg=t=>D0[t.toLowerCase()]||tc[t.toLowerCase()]||t.toUpperCase().charCodeAt(0),N$e=t=>Object.keys(D0).find(e=>D0[e]===t),L$e=t=>Object.keys(tc).find(e=>tc[e]===t);function cse(t){lse=t||"all"}function N0(){return lse||"all"}function j$e(){return zr.slice(0)}function B$e(){return zr.map(t=>N$e(t)||L$e(t)||String.fromCharCode(t))}function F$e(){const t=[];return Object.keys(Wr).forEach(e=>{Wr[e].forEach(n=>{let{key:r,scope:o,mods:a,shortcut:s}=n;t.push({scope:o,shortcut:s,mods:a,keys:r.split("+").map(i=>zg(i))})})}),t}function z$e(t){const e=t.target||t.srcElement,{tagName:n}=e;let r=!0;const o=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(o||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(r=!1),r}function U$e(t){return typeof t=="string"&&(t=zg(t)),zr.indexOf(t)!==-1}function q$e(t,e){let n,r;t||(t=N0());for(const o in Wr)if(Object.prototype.hasOwnProperty.call(Wr,o))for(n=Wr[o],r=0;r<n.length;)n[r].scope===t?n.splice(r,1).forEach(s=>{let{element:i}=s;return HL(i)}):r++;N0()===t&&cse(e||"all")}function H$e(t){let e=t.keyCode||t.which||t.charCode;t.key&&t.key.toLowerCase()==="capslock"&&(e=zg(t.key));const n=zr.indexOf(e);if(n>=0&&zr.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&zr.splice(0,zr.length),(e===93||e===224)&&(e=91),e in wa){wa[e]=!1;for(const r in tc)tc[r]===e&&(Il[r]=!1)}}function use(t){if(typeof t>"u")Object.keys(Wr).forEach(o=>{Array.isArray(Wr[o])&&Wr[o].forEach(a=>VS(a)),delete Wr[o]}),HL(null);else if(Array.isArray(t))t.forEach(o=>{o.key&&VS(o)});else if(typeof t=="object")t.key&&VS(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];let[o,a]=n;typeof o=="function"&&(a=o,o=""),VS({key:t,scope:o,method:a,splitKey:"+"})}}const VS=t=>{let{key:e,scope:n,method:r,splitKey:o="+"}=t;ise(e).forEach(s=>{const i=s.split(o),l=i.length,c=i[l-1],d=c==="*"?"*":zg(c);if(!Wr[d])return;n||(n=N0());const u=l>1?sse(tc,i):[],m=[];Wr[d]=Wr[d].filter(h=>{const v=(r?h.method===r:!0)&&h.scope===n&&D$e(h.mods,u);return v&&m.push(h.element),!v}),m.forEach(h=>HL(h))})};function hH(t,e,n,r){if(e.element!==r)return;let o;if(e.scope===n||e.scope==="all"){o=e.mods.length>0;for(const a in wa)Object.prototype.hasOwnProperty.call(wa,a)&&(!wa[a]&&e.mods.indexOf(+a)>-1||wa[a]&&e.mods.indexOf(+a)===-1)&&(o=!1);(e.mods.length===0&&!wa[16]&&!wa[18]&&!wa[17]&&!wa[91]||o||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(zr),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function gH(t,e){const n=Wr["*"];let r=t.keyCode||t.which||t.charCode;if(t.key&&t.key.toLowerCase()==="capslock"||!Il.filter.call(this,t))return;if((r===93||r===224)&&(r=91),zr.indexOf(r)===-1&&r!==229&&zr.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(i=>{const l=vy[i];t[i]&&zr.indexOf(l)===-1?zr.push(l):!t[i]&&zr.indexOf(l)>-1?zr.splice(zr.indexOf(l),1):i==="metaKey"&&t[i]&&(zr=zr.filter(c=>c in vy||c===r))}),r in wa){wa[r]=!0;for(const i in tc)if(Object.prototype.hasOwnProperty.call(tc,i)){const l=vy[tc[i]];Il[i]=t[l]}if(!n)return}for(const i in wa)Object.prototype.hasOwnProperty.call(wa,i)&&(wa[i]=t[vy[i]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(zr.indexOf(17)===-1&&zr.push(17),zr.indexOf(18)===-1&&zr.push(18),wa[17]=!0,wa[18]=!0);const o=N0();if(n)for(let i=0;i<n.length;i++)n[i].scope===o&&(t.type==="keydown"&&n[i].keydown||t.type==="keyup"&&n[i].keyup)&&hH(t,n[i],o,e);if(!(r in Wr))return;const a=Wr[r],s=a.length;for(let i=0;i<s;i++)if((t.type==="keydown"&&a[i].keydown||t.type==="keyup"&&a[i].keyup)&&a[i].key){const l=a[i],{splitKey:c}=l,d=l.key.split(c),u=[];for(let m=0;m<d.length;m++)u.push(zg(d[m]));u.sort().join("")===zr.sort().join("")&&hH(t,l,o,e)}}function Il(t,e,n){zr=[];const r=ise(t);let o=[],a="all",s=document,i=0,l=!1,c=!0,d="+",u=!1,m=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(a=e.scope),e.element&&(s=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(u=e.capture),typeof e.splitKey=="string"&&(d=e.splitKey),e.single===!0&&(m=!0)),typeof e=="string"&&(a=e),m&&use(t,a);i<r.length;i++)t=r[i].split(d),o=[],t.length>1&&(o=sse(tc,t)),t=t[t.length-1],t=t==="*"?"*":zg(t),t in Wr||(Wr[t]=[]),Wr[t].push({keyup:l,keydown:c,scope:a,mods:o,shortcut:r[i],method:n,key:r[i],splitKey:d,element:s});if(typeof s<"u"&&window){if(!Du.has(s)){const h=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return gH(v,s)},y=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;gH(v,s),H$e(v)};Du.set(s,{keydownListener:h,keyupListenr:y,capture:u}),GP(s,"keydown",h,u),GP(s,"keyup",y,u)}if(!Gy){const h=()=>{zr=[]};Gy={listener:h,capture:u},GP(window,"focus",h,u)}}}function $$e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Wr).forEach(n=>{Wr[n].filter(o=>o.scope===e&&o.shortcut===t).forEach(o=>{o&&o.method&&o.method()})})}function HL(t){const e=Object.values(Wr).flat();if(e.findIndex(r=>{let{element:o}=r;return o===t})<0){const{keydownListener:r,keyupListenr:o,capture:a}=Du.get(t)||{};r&&o&&(Xb(t,"keyup",o,a),Xb(t,"keydown",r,a),Du.delete(t))}if((e.length<=0||Du.size<=0)&&(Object.keys(Du).forEach(o=>{const{keydownListener:a,keyupListenr:s,capture:i}=Du.get(o)||{};a&&s&&(Xb(o,"keyup",s,i),Xb(o,"keydown",a,i),Du.delete(o))}),Du.clear(),Object.keys(Wr).forEach(o=>delete Wr[o]),Gy)){const{listener:o,capture:a}=Gy;Xb(window,"focus",o,a),Gy=null}}const KP={getPressedKeyString:B$e,setScope:cse,getScope:N0,deleteScope:q$e,getPressedKeyCodes:j$e,getAllKeyCodes:F$e,isPressed:U$e,filter:z$e,trigger:$$e,unbind:use,keyMap:D0,modifier:tc,modifierMap:vy};for(const t in KP)Object.prototype.hasOwnProperty.call(KP,t)&&(Il[t]=KP[t]);if(typeof window<"u"){const t=window.hotkeys;Il.noConflict=e=>(e&&window.hotkeys===Il&&(window.hotkeys=t),Il),window.hotkeys=Il}const bH=["copy","cut","paste","asset"];function V$e(){const t=ue(),e=Qi(),n=ou(),r=PL(),o=ce("is focused",()=>t.getInstanceState().isFocused,[t]);w.useEffect(()=>{if(!o)return;const a=new Array,s=t.getContainer(),i=(c,d)=>{Il(c,{element:s.ownerDocument.body},d),a.push(()=>{Il.unbind(c,d)})},l=(c,d)=>{Il(c,{element:s.ownerDocument.body,keyup:!0,keydown:!1},d),a.push(()=>{Il.unbind(c,d)})};for(const c of Object.values(n))c.kbd&&(e&&!c.readonlyOk||bH.includes(c.id)||i(yH(c.kbd),d=>{xy(t)&&!c.isRequiredA11yAction||(Nt(d),c.onSelect("kbd"))}));for(const c of Object.values(r))!c.kbd||!c.readonlyOk&&t.getIsReadonly()||bH.includes(c.id)||i(yH(c.kbd),d=>{xy(t)||(Nt(d),c.onSelect("kbd"))});return i(",",c=>{if(xy(t)||t.inputs.keys.has("Comma"))return;Nt(c),t.focus(),t.inputs.keys.add("Comma");const{x:d,y:u,z:m}=t.inputs.currentPagePoint,h=t.pageToScreen({x:d,y:u}),y={type:"pointer",name:"pointer_down",point:{x:h.x,y:h.y,z:m},shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey,metaKey:c.metaKey,accelKey:Pr(c),pointerId:0,button:0,isPen:t.getInstanceState().isPenMode,target:"canvas"};t.dispatch(y)}),l(",",c=>{if(xy(t)||!t.inputs.keys.has("Comma"))return;t.inputs.keys.delete("Comma");const{x:d,y:u,z:m}=t.inputs.currentScreenPoint,h={type:"pointer",name:"pointer_up",point:{x:d,y:u,z:m},shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey,metaKey:c.metaKey,accelKey:Pr(c),pointerId:0,button:0,isPen:t.getInstanceState().isPenMode,target:"canvas"};t.dispatch(h)}),()=>{a.forEach(c=>c())}},[n,r,e,t,o])}function xy(t){return t.menus.hasAnyOpenMenus()||t.getEditingShapeId()!==null||t.getCrashingError()||!t.user.getAreKeyboardShortcutsEnabled()}function yH(t){return G$e(t).map(e=>{let n="";const r=e.includes("!"),o=e.includes("?"),a=e.includes("$"),s=e.replace(/[!?$]/g,"");return r&&o&&a?n=`cmd+shift+alt+${s},ctrl+shift+alt+${s}`:r&&a?n=`cmd+shift+${s},ctrl+shift+${s}`:o&&a?n=`cmd+alt+${s},ctrl+alt+${s}`:o&&r?n=`shift+alt+${s}`:r?n=`shift+${s}`:o?n=`alt+${s}`:a?n=`cmd+${s},ctrl+${s}`:n=s,n}).join(",")}function G$e(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}const K$e=w.createContext(!1),W$e={1:0,2:1,3:2,4:3,5:4,6:5,7:6,8:7,9:8,0:9};function Y$e({children:t,orientation:e,sizingParentClassName:n,minItems:r,minSizePx:o,maxItems:a,maxSizePx:s}){const i=ue(),l=cm(),c=fa(),d=it(),u=w.useRef([]),[m,h]=w.useState(!1),y=w.useRef(null),[v,x]=w.useState(null),[S,T]=w.useState(null),[C,_]=w.useState(!1),I=Rc(()=>{if(!y.current)return;const D=e==="horizontal"?"offsetWidth":"offsetHeight",F=V(y.current.children),B=v?V(v.children):null;function V(G){const re=[];for(const K of G)K.classList.contains("tlui-main-toolbar__group")?re.push({type:"group",items:V(K.children),element:K}):K.hasAttribute("data-radix-popper-content-wrapper")||re.push({type:"item",element:K});return re}const H=vH(y.current,n)[D],j=Math.floor(nc(H,[o,s],[r,a],!0));let q=0,U=null,Y=!1;const X=[];function ee(G,re){re&&dt(G.length===re.length);let K=!1,ve=!1;for(let xe=0;xe<G.length;xe++){const Oe=G[xe],Ne=re==null?void 0:re[xe];if(Oe.type==="item"){const Fe=Oe.element.getAttribute("data-value")===S;let Ke;S?Ke=q<j||Fe:Ke=q<=j;const Qe=q>=j;K||(K=Ke),ve||(ve=Qe),GS(Oe.element,"data-toolbar-visible",Ke?"true":"false"),Ne&&(dt(Ne.type==="item"),GS(Ne.element,"data-toolbar-visible",Qe?"true":"false")),Qe&&Oe.element.getAttribute("aria-pressed")==="true"&&(U=Oe.element.getAttribute("data-value")),Ke&&Oe.element.tagName==="BUTTON"&&X.push(Oe.element),!Qe&&Fe&&(Y=!0),q++}else{let Fe,Ke;Ne?(dt(Ne.type==="group"),Ke=Ne,Fe=ee(Oe.items,Ke.items)):Fe=ee(Oe.items,null),K||(K=Fe.didShowAnyInMain),ve||(ve=Fe.didShowAnyInOverflow),GS(Oe.element,"data-toolbar-visible",Fe.didShowAnyInMain?"true":"false"),Ke&&GS(Ke.element,"data-toolbar-visible",Fe.didShowAnyInOverflow?"true":"false")}}return{didShowAnyInMain:K,didShowAnyInOverflow:ve}}const{didShowAnyInOverflow:$}=ee(F,B);_($),U?T(U):Y&&T(null),u.current=X});w.useLayoutEffect(()=>{I()}),w.useLayoutEffect(()=>{if(!y.current)return;const D=new MutationObserver(I);D.observe(y.current,{childList:!0,subtree:!0,attributes:!0,characterData:!0});const F=vH(y.current,n),B=new ResizeObserver(I);return B.observe(F),()=>{D.disconnect(),B.disconnect()}},[I,n]),w.useEffect(()=>{if(!i.options.enableToolbarKeyboardShortcuts)return;function D(F){var V;if(xy(i)||DY(!0)||F.ctrlKey||F.metaKey||F.altKey||F.shiftKey)return;const B=W$e[F.key];typeof B=="number"&&(Nt(F),(V=u.current[B])==null||V.click())}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[i]);const P="toolbar overflow",M=e==="horizontal"?pm:_L;return g.jsx(g.Fragment,{children:g.jsxs(Ds,{orientation:e,className:pt("tlui-main-toolbar__tools",{"tlui-main-toolbar__tools__mobile":c<Hr.TABLET_SM}),label:d("tool-panel.title"),children:[g.jsx(M,{id:`${l}_main`,ref:y,children:g.jsx(Rs,{type:"toolbar",sourceId:"toolbar",children:t})}),C&&g.jsx(K$e.Provider,{value:!0,children:g.jsxs(Gf,{id:P,open:m,onOpenChange:h,children:[g.jsx(Kf,{children:g.jsx(pr,{title:d("tool-panel.more"),type:"tool",className:"tlui-main-toolbar__overflow","data-testid":"tools.more-button",children:g.jsx(kt,{icon:e==="horizontal"?"chevron-up":"chevron-right"})})}),g.jsx(Wf,{side:e==="horizontal"?"top":"right",align:e==="horizontal"?"center":"end",children:g.jsx(Ds,{orientation:"grid",className:"tlui-main-toolbar__overflow-content",ref:x,"data-testid":"tools.more-content",label:d("tool-panel.more"),id:`${l}_more`,onClick:()=>{vs.deleteOpenMenu(P,i.contextId),h(!1)},children:g.jsx(Rs,{type:"toolbar-overflow",sourceId:"toolbar",children:t})})})]})})]})})}function vH(t,e){let n=t;for(;n;){if(n.classList.contains(e))return n;n=n.parentElement}throw new Error("Could not find parent with class name "+e)}function GS(t,e,n){t.getAttribute(e)!==n&&t.setAttribute(e,n)}function X$e({activeToolId:t}){const e=ue(),n=fa(),r=it(),o=ou(),a=ce("is tool locked",()=>e.getInstanceState().isToolLocked,[e]),s=ce("current tool",()=>e.getCurrentTool(),[e]);if(!t||!s.isLockable)return null;const i=o["toggle-tool-lock"],l=i!=null&&i.kbd?`${r("action.toggle-tool-lock")} ${iT(i.kbd)}`:r("action.toggle-tool-lock");return g.jsx(FC,{content:l,children:g.jsx(nn,{type:"normal","data-testid":"tool-lock",className:pt("tlui-main-toolbar__lock-button",{"tlui-main-toolbar__lock-button__mobile":n<Hr.TABLET_SM}),onClick:()=>e.updateInstanceState({isToolLocked:!a}),children:g.jsx(kt,{icon:a?"lock":"unlock",small:!0})})})}const J$e=w.memo(function({children:e,orientation:n="horizontal",minItems:r=4,minSizePx:o=310,maxItems:a=8,maxSizePx:s=470}){const i=ue(),l=it(),c=fa(),d=Qi(),u=ce("current tool id",()=>i.getCurrentToolId(),[i]),m=w.useRef(null);eu(m);const{ActionsMenu:h,QuickActions:y}=ru(),v=i.options.actionShortcutsLocation==="menu"?!1:i.options.actionShortcutsLocation==="toolbar"?!0:c<Hr.TABLET;return g.jsx(jC,{orientation:n,tooltipSide:n==="horizontal"?"top":"right",children:g.jsx("div",{ref:m,className:pt("tlui-main-toolbar",`tlui-main-toolbar--${n}`),children:g.jsxs("div",{className:"tlui-main-toolbar__inner",children:[g.jsxs("div",{className:"tlui-main-toolbar__left",children:[!d&&g.jsxs("div",{className:"tlui-main-toolbar__extras",children:[v&&g.jsxs(Ds,{orientation:n,className:"tlui-main-toolbar__extras__controls",label:l("actions-menu.title"),children:[y&&g.jsx(y,{}),h&&g.jsx(h,{})]}),g.jsx(X$e,{activeToolId:u})]}),g.jsx(Y$e,{orientation:n,sizingParentClassName:"tlui-main-toolbar",minItems:r,maxItems:a,minSizePx:o,maxSizePx:s,children:e??g.jsx(o$e,{})})]}),c<Hr.TABLET_SM&&!d&&g.jsx("div",{className:"tlui-main-toolbar__tools tlui-main-toolbar__mobile-style-panel",children:g.jsx(r$e,{})})]})})})}),Q$e=Co(function({videoShapeId:e,onEditAltTextStart:n}){const r=ue(),o=$r(),a=it(),s="video-toolbar",i=r.getIsReadonly(),l=ou(),c=w.useCallback(()=>l["video-replace"].onSelect("video-toolbar"),[l]),d=w.useCallback(()=>l["download-original"].onSelect("video-toolbar"),[l]),u=ce("altText",()=>r.getShape(e).props.altText,[r,e]);return g.jsxs(g.Fragment,{children:[!i&&g.jsx(nn,{type:"icon",title:a("tool.replace-media"),onClick:c,"data-testid":"tool.video-replace",children:g.jsx(kt,{small:!0,icon:"tool-media"})}),g.jsx(nn,{type:"icon",title:a("action.download-original"),onClick:d,"data-testid":"tool.video-download",children:g.jsx(kt,{small:!0,icon:"download"})}),(u||!i)&&g.jsx(pr,{type:"icon",isActive:!!u,title:a("tool.media-alt-text"),"data-testid":"tool.video-alt-text",onClick:()=>{o("alt-text-start",{source:s}),n()},children:g.jsx(kt,{small:!0,icon:"alt"})})]})}),Z$e=Co(function({children:e}){const n=ue(),r=ce("videoShape",()=>{const s=n.getOnlySelectedShape();return!s||s.type!=="video"?null:s.id},[n]),o=n.isInAny("select.idle","select.pointing_shape"),a=ce("locked",()=>{var s;return r?(s=n.getShape(r))==null?void 0:s.isLocked:!1},[n,r]);return!r||!o||a?null:g.jsx(eVe,{videoShapeId:r,children:e},r)});function eVe({children:t,videoShapeId:e}){const n=ue(),r=it(),[o,a]=w.useState(!1),s=w.useCallback(()=>a(!0),[]),i=w.useCallback(()=>a(!1),[]),l=w.useCallback(()=>{const c=n.getSelectionScreenBounds();if(c)return new Be(c.x,c.y,c.width,0)},[n]);return g.jsx(DL,{className:"tlui-video__toolbar",getSelectionBounds:l,label:r("tool.video-toolbar-title"),children:t||(o?g.jsx($ae,{shapeId:e,onClose:i,source:"video-toolbar"}):g.jsx(Q$e,{videoShapeId:e,onEditAltTextStart:s}))})}function tVe(){const t=it();return g.jsxs("div",{className:pt("tlui-offline-indicator"),children:[t("status.offline"),g.jsx(Wc,{label:t("status.offline"),icon:"status-offline",small:!0})]})}function nVe({maxWidth:t=420,ignoreRightWidth:e=0,stylePanelWidth:n=148,marginBetweenZones:r=12,squeezeAmount:o=52,children:a}){const s=w.useRef(null),i=fa(),l=w.useCallback(()=>{const c=s.current;if(!c)return;const d=c.parentElement.parentElement,u=d.querySelector(".tlui-layout__top__left"),m=d.querySelector(".tlui-layout__top__right"),h=d.offsetWidth,y=u.offsetWidth,v=m.offsetWidth,x=c.offsetWidth-e;let S=(h-x)/2;h%2!==0&&(S-=.5);const T=y+r,C=c.offsetLeft,_=Math.min(h-v-y-2*r,t),I=Math.max(S,T)-C;m.offsetWidth>n&&i<=6?c.style.setProperty("max-width",_-o+"px"):c.style.setProperty("max-width",_+"px"),c.style.setProperty("transform",`translate(${I}px, 0px)`)},[i,e,r,t,o,n]);return w.useLayoutEffect(()=>{const c=s.current;if(!c)return;const d=c.parentElement.parentElement,u=d.querySelector(".tlui-layout__top__left"),m=d.querySelector(".tlui-layout__top__right"),h=new ResizeObserver(l);return h.observe(u),h.observe(m),h.observe(d),h.observe(c),l(),()=>{h.disconnect()}},[l]),w.useLayoutEffect(()=>{l()}),g.jsx("div",{ref:s,className:"tlui-top-panel__container",children:a})}function rVe(){const t=yUe()==="offline";return g.jsx(nVe,{children:t&&g.jsx(tVe,{})})}function oVe(){return g.jsxs(g.Fragment,{children:[g.jsx(Ie,{actionId:"zoom-in",noClose:!0}),g.jsx(Ie,{actionId:"zoom-out",noClose:!0}),g.jsx(Ese,{}),g.jsx(Tse,{}),g.jsx(wse,{})]})}const aVe=w.memo(function({children:e}){const n=Ao(),[r,o]=td("zoom menu"),a=e??g.jsx(oVe,{});return g.jsxs(iL,{dir:"ltr",open:r,onOpenChange:o,modal:!1,children:[g.jsx(sVe,{}),g.jsx(EC,{container:n,children:g.jsx(cL,{className:"tlui-menu",side:"top",align:"start",alignOffset:0,sideOffset:8,collisionPadding:4,children:g.jsx(Rs,{type:"menu",sourceId:"zoom-menu",children:a})})})]})}),sVe=()=>{const t=ue(),e=fa(),n=ce("zoom",()=>t.getZoomLevel(),[t]),r=it(),o=w.useCallback(()=>{t.resetZoom(t.getViewportScreenCenter(),{animation:{duration:t.options.animationMediumMs}})},[t]),a=`${Math.floor(n*100)}%`;return g.jsx(pr,{asChild:!0,type:"icon","aria-label":`${r("navigation-zone.zoom")}  ${a}`,title:`${r("navigation-zone.zoom")}  ${a}`,"data-testid":"minimap.zoom-menu-button",className:"tlui-zoom-menu__button",onDoubleClick:o,children:g.jsx(lL,{dir:"ltr",children:e<Hr.MOBILE?null:g.jsx("span",{style:{flexGrow:0,textAlign:"center"},children:a})})})},dse=w.createContext(null);function iVe({overrides:t={},children:e}){const n=kg(t),r=RC();return g.jsx(dse.Provider,{value:w.useMemo(()=>({ContextMenu:e9e,ActionsMenu:Q8e,HelpMenu:null,ZoomMenu:aVe,MainMenu:U9e,Minimap:J9e,StylePanel:Lqe,PageMenu:tqe,NavigationPanel:Z9e,Toolbar:J$e,RichTextToolbar:ZHe,ImageToolbar:t7e,VideoToolbar:Z$e,KeyboardShortcutsDialog:uae,QuickActions:aqe,HelperButtons:A9e,DebugPanel:f9e,DebugMenu:p9e,MenuPanel:v9e,SharePanel:r?pqe:null,CursorChatBubble:r?r9e:null,TopPanel:r?rVe:null,Dialogs:S9e,Toasts:zqe,A11y:Nje,FollowingIndicator:b9e,...n}),[n,r]),children:e})}function ru(){const t=w.useContext(dse);if(!t)throw new Error("useTldrawUiComponents must be used within a TldrawUiComponentsProvider");return t}const pse=w.createContext(null);function fse(t,e){return(e.isShapeOfType(t,"image")||e.isShapeOfType(t,"video"))&&!!t.props.assetId}function lVe(t){return Object.fromEntries(t.map(e=>[e.id,e]))}function KS(t,e){if(t.getSelectedShapes().length===0)return t.getDocumentSettings().name||e}function cVe({overrides:t,children:e}){const n=lo(),r=RC(),o=IL(),a=ru(),s=$r(),i=oC(),l=it(),c=o.msg("document.default-name"),d=w.useMemo(()=>{const u=n;if(!u)return{};function m(){return u.isIn("select")||(u.complete(),u.setCurrentTool("select")),!1}function h(){return u.isIn("select")&&u.getSelectedShapeIds().length>0}function y(S){if(!h()||m())return;u.markHistoryStoppingPoint("resize shapes");const T=u.getSelectedShapeIds();T.length!==0&&u.run(()=>{T.map(_=>u.getShape(_)).filter(Boolean).forEach(_=>{var I;u.resizeShape(_.id,new R(S,S),{scaleOrigin:(I=u.getSelectionPageBounds())==null?void 0:I.center})})})}const v=[{id:"edit-link",label:"action.edit-link",icon:"link",onSelect(S){h()&&(m()||(s("edit-link",{source:S}),u.markHistoryStoppingPoint("edit-link"),o.addDialog({component:cUe})))}},{id:"insert-embed",label:"action.insert-embed",kbd:"cmd+i,ctrl+i",onSelect(S){s("insert-embed",{source:S}),o.addDialog({component:Yoe})}},{id:"open-kbd-shortcuts",label:"action.open-kbd-shortcuts",kbd:"cmd+alt+/,ctrl+alt+/",onSelect(S){s("open-kbd-shortcuts",{source:S}),o.addDialog({component:a.KeyboardShortcutsDialog??uae})}},{id:"insert-media",label:"action.insert-media",kbd:"cmd+u,ctrl+u",onSelect(S){s("insert-media",{source:S}),o.insertMedia()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"cmd+z,ctrl+z",onSelect(S){s("undo",{source:S}),u.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"cmd+shift+z,ctrl+shift+z",onSelect(S){s("redo",{source:S}),u.redo()}},{id:"export-as-svg",label:{default:"action.export-as-svg",menu:"action.export-as-svg.short","context-menu":"action.export-as-svg.short"},readonlyOk:!0,onSelect(S){let T=u.getSelectedShapeIds();T.length===0&&(T=Array.from(u.getCurrentPageShapeIds().values())),T.length!==0&&(s("export-as",{format:"svg",source:S}),o.exportAs(T,{format:"svg",name:KS(u,c)}))}},{id:"export-as-png",label:{default:"action.export-as-png",menu:"action.export-as-png.short","context-menu":"action.export-as-png.short"},readonlyOk:!0,onSelect(S){let T=u.getSelectedShapeIds();T.length===0&&(T=Array.from(u.getCurrentPageShapeIds().values())),T.length!==0&&(s("export-as",{format:"png",source:S}),o.exportAs(T,{format:"png",name:KS(u,c)}))}},{id:"export-all-as-svg",label:{default:"action.export-all-as-svg",menu:"action.export-all-as-svg.short","context-menu":"action.export-all-as-svg.short"},readonlyOk:!0,onSelect(S){let T=u.getSelectedShapeIds();T.length===0&&(T=Array.from(u.getCurrentPageShapeIds().values())),T.length!==0&&(s("export-all-as",{format:"svg",source:S}),o.exportAs(Array.from(u.getCurrentPageShapeIds()),{format:"svg",name:KS(u,c)}))}},{id:"export-all-as-png",label:{default:"action.export-all-as-png",menu:"action.export-all-as-png.short","context-menu":"action.export-all-as-png.short"},readonlyOk:!0,onSelect(S){const T=Array.from(u.getCurrentPageShapeIds().values());T.length!==0&&(s("export-all-as",{format:"png",source:S}),o.exportAs(T,{format:"png",name:KS(u,c)}))}},{id:"copy-as-svg",label:{default:"action.copy-as-svg",menu:"action.copy-as-svg.short","context-menu":"action.copy-as-svg.short"},kbd:"cmd+shift+c,ctrl+shift+c",readonlyOk:!0,onSelect(S){let T=u.getSelectedShapeIds();T.length===0&&(T=Array.from(u.getCurrentPageShapeIds().values())),T.length!==0&&(s("copy-as",{format:"svg",source:S}),o.copyAs(T,"svg"))}},{id:"copy-as-png",label:{default:"action.copy-as-png",menu:"action.copy-as-png.short","context-menu":"action.copy-as-png.short"},readonlyOk:!0,onSelect(S){let T=u.getSelectedShapeIds();T.length===0&&(T=Array.from(u.getCurrentPageShapeIds().values())),T.length!==0&&(s("copy-as",{format:"png",source:S}),o.copyAs(T,"png"))}},{id:"toggle-auto-size",label:"action.toggle-auto-size",onSelect(S){h()&&(m()||(s("toggle-auto-size",{source:S}),u.markHistoryStoppingPoint("toggling auto size"),u.run(()=>{const T=u.getSelectedShapes().filter(C=>u.isShapeOfType(C,"text")&&C.props.autoSize===!1);u.updateShapes(T.map(C=>({id:C.id,type:C.type,props:{...C.props,w:8,autoSize:!0}}))),er(u,T.map(C=>C.id))})))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(S){s("open-embed-link",{source:S});const T=u.getSelectedShapeIds(),C="No embed shapes selected";if(T.length!==1){console.error(C);return}const _=u.getShape(T[0]);if(!_||!u.isShapeOfType(_,"embed")){console.error(C);return}I3(_.props.url,"_blank")}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(S){var T,C;if(((T=u.root.getCurrent())==null?void 0:T.id)!=="zoom"&&(s("zoom-tool",{source:S}),!(u.inputs.shiftKey||u.inputs.ctrlKey))){const _=u.root.getCurrent();_&&((C=_.getCurrent())==null?void 0:C.id)==="idle"&&u.setCurrentTool("zoom",{onInteractionEnd:_.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",async onSelect(S){var I;if(!h()||m())return;s("convert-to-bookmark",{source:S});const T=u.getSelectedShapes(),C=u.markHistoryStoppingPoint("convert shapes to bookmark"),_=[];for(const P of T){if(!P||!u.isShapeOfType(P,"embed")||!P.props.url)continue;const M=(I=u.getShapePageBounds(P))==null?void 0:I.center;M&&(u.deleteShapes([P.id]),_.push(Ste(u,{url:P.props.url,center:M}).then(D=>{if(!D.ok)throw new Error(D.error);return D})))}await Promise.all(_).catch(P=>{u.bailToMark(C),console.error(P)})}},{id:"convert-to-embed",label:"action.convert-to-embed",onSelect(S){h()&&(m()||(s("convert-to-embed",{source:S}),u.run(()=>{const T=u.getSelectedShapeIds(),C=Dt(T.map(P=>u.getShape(P))),_=[],I=[];for(const P of C){if(!u.isShapeOfType(P,"bookmark"))continue;const{url:M}=P.props,D=o.getEmbedDefinition(M);if(!D||!D.definition)continue;const{width:F,height:B}=D.definition,V=new R(P.x,P.y);V.rot(-P.rotation),V.add(new R(P.props.w/2-F/2,P.props.h/2-B/2)),V.rot(P.rotation);const z={id:lr(),type:"embed",x:V.x,y:V.y,rotation:P.rotation,props:{url:M,w:F,h:B}};_.push(z),I.push(P.id)}u.markHistoryStoppingPoint("convert shapes to embed"),u.deleteShapes(I),u.createShapes(_)})))}},{id:"duplicate",kbd:"cmd+d,ctrl+d",label:"action.duplicate",icon:"duplicate",onSelect(S){if(!h()||m())return;s("duplicate-shapes",{source:S});const T=u.getInstanceState();let C,_;if(T.duplicateProps)C=T.duplicateProps.shapeIds,_=T.duplicateProps.offset;else{C=u.getSelectedShapeIds();const I=Be.Common(Dt(C.map(P=>u.getShapePageBounds(P))));_=u.getCameraOptions().isLocked?{x:u.options.adjacentShapeMargin,y:u.options.adjacentShapeMargin}:{x:I.width+u.options.adjacentShapeMargin,y:0}}u.markHistoryStoppingPoint("duplicate shapes"),u.duplicateShapes(C,_),T.duplicateProps&&u.updateInstanceState({duplicateProps:{...T.duplicateProps,shapeIds:u.getSelectedShapeIds()}})}},{id:"ungroup",label:"action.ungroup",kbd:"cmd+shift+g,ctrl+shift+g",icon:"ungroup",onSelect(S){h()&&(m()||(s("ungroup-shapes",{source:S}),u.markHistoryStoppingPoint("ungroup"),u.ungroupShapes(u.getSelectedShapeIds())))}},{id:"group",label:"action.group",kbd:"cmd+g,ctrl+g",icon:"group",onSelect(S){if(!h()||m())return;s("group-shapes",{source:S});const T=u.getOnlySelectedShape();T&&u.isShapeOfType(T,"group")?(u.markHistoryStoppingPoint("ungroup"),u.ungroupShapes(u.getSelectedShapeIds())):(u.markHistoryStoppingPoint("group"),u.groupShapes(u.getSelectedShapeIds()))}},{id:"remove-frame",label:"action.remove-frame",kbd:"cmd+shift+f,ctrl+shift+f",onSelect(S){if(!h())return;s("remove-frame",{source:S});const T=u.getSelectedShapes();T.length>0&&T.every(C=>u.isShapeOfType(C,"frame"))&&(u.markHistoryStoppingPoint("remove-frame"),qje(u,T.map(C=>C.id)))}},{id:"fit-frame-to-content",label:"action.fit-frame-to-content",onSelect(S){if(!h())return;s("fit-frame-to-content",{source:S});const T=u.getOnlySelectedShape();T&&u.isShapeOfType(T,"frame")&&(u.markHistoryStoppingPoint("fit-frame-to-content"),Tte(u,T.id))}},{id:"align-left",label:"action.align-left",kbd:"alt+A",icon:"align-left",onSelect(S){h()&&(m()||(s("align-shapes",{operation:"left",source:S}),u.markHistoryStoppingPoint("align left"),u.run(()=>{const T=u.getSelectedShapeIds();u.alignShapes(T,"left"),er(u,T)})))}},{id:"align-center-horizontal",label:{default:"action.align-center-horizontal","context-menu":"action.align-center-horizontal.short"},kbd:"alt+H",icon:"align-center-horizontal",onSelect(S){h()&&(m()||(s("align-shapes",{operation:"center-horizontal",source:S}),u.markHistoryStoppingPoint("align center horizontal"),u.run(()=>{const T=u.getSelectedShapeIds();u.alignShapes(T,"center-horizontal"),er(u,T)})))}},{id:"align-right",label:"action.align-right",kbd:"alt+D",icon:"align-right",onSelect(S){h()&&(m()||(s("align-shapes",{operation:"right",source:S}),u.markHistoryStoppingPoint("align right"),u.run(()=>{const T=u.getSelectedShapeIds();u.alignShapes(T,"right"),er(u,T)})))}},{id:"align-center-vertical",label:{default:"action.align-center-vertical","context-menu":"action.align-center-vertical.short"},kbd:"alt+V",icon:"align-center-vertical",onSelect(S){h()&&(m()||(s("align-shapes",{operation:"center-vertical",source:S}),u.markHistoryStoppingPoint("align center vertical"),u.run(()=>{const T=u.getSelectedShapeIds();u.alignShapes(T,"center-vertical"),er(u,T)})))}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"alt+W",onSelect(S){h()&&(m()||(s("align-shapes",{operation:"top",source:S}),u.markHistoryStoppingPoint("align top"),u.run(()=>{const T=u.getSelectedShapeIds();u.alignShapes(T,"top"),er(u,T)})))}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"alt+S",onSelect(S){h()&&(m()||(s("align-shapes",{operation:"bottom",source:S}),u.markHistoryStoppingPoint("align bottom"),u.run(()=>{const T=u.getSelectedShapeIds();u.alignShapes(T,"bottom"),er(u,T)})))}},{id:"distribute-horizontal",label:{default:"action.distribute-horizontal","context-menu":"action.distribute-horizontal.short"},icon:"distribute-horizontal",kbd:"alt+shift+h",onSelect(S){h()&&(m()||(s("distribute-shapes",{operation:"horizontal",source:S}),u.markHistoryStoppingPoint("distribute horizontal"),u.run(()=>{const T=u.getSelectedShapeIds();u.distributeShapes(T,"horizontal"),er(u,T)})))}},{id:"distribute-vertical",label:{default:"action.distribute-vertical","context-menu":"action.distribute-vertical.short"},icon:"distribute-vertical",kbd:"alt+shift+V",onSelect(S){h()&&(m()||(s("distribute-shapes",{operation:"vertical",source:S}),u.markHistoryStoppingPoint("distribute vertical"),u.run(()=>{const T=u.getSelectedShapeIds();u.distributeShapes(T,"vertical"),er(u,T)})))}},{id:"stretch-horizontal",label:{default:"action.stretch-horizontal","context-menu":"action.stretch-horizontal.short"},icon:"stretch-horizontal",onSelect(S){h()&&(m()||(s("stretch-shapes",{operation:"horizontal",source:S}),u.markHistoryStoppingPoint("stretch horizontal"),u.run(()=>{const T=u.getSelectedShapeIds();u.stretchShapes(T,"horizontal"),er(u,T)})))}},{id:"stretch-vertical",label:{default:"action.stretch-vertical","context-menu":"action.stretch-vertical.short"},icon:"stretch-vertical",onSelect(S){h()&&(m()||(s("stretch-shapes",{operation:"vertical",source:S}),u.markHistoryStoppingPoint("stretch vertical"),u.run(()=>{const T=u.getSelectedShapeIds();u.stretchShapes(T,"vertical"),er(u,T)})))}},{id:"flip-horizontal",label:{default:"action.flip-horizontal","context-menu":"action.flip-horizontal.short"},kbd:"shift+h",onSelect(S){h()&&(m()||(s("flip-shapes",{operation:"horizontal",source:S}),u.markHistoryStoppingPoint("flip horizontal"),u.run(()=>{const T=u.getSelectedShapeIds();u.flipShapes(T,"horizontal"),er(u,T)})))}},{id:"flip-vertical",label:{default:"action.flip-vertical","context-menu":"action.flip-vertical.short"},kbd:"shift+v",onSelect(S){h()&&(m()||(s("flip-shapes",{operation:"vertical",source:S}),u.markHistoryStoppingPoint("flip vertical"),u.run(()=>{const T=u.getSelectedShapeIds();u.flipShapes(T,"vertical"),er(u,T)})))}},{id:"pack",label:"action.pack",icon:"pack",onSelect(S){h()&&(m()||(s("pack-shapes",{source:S}),u.markHistoryStoppingPoint("pack"),u.run(()=>{const T=u.getSelectedShapeIds();u.packShapes(T,u.options.adjacentShapeMargin),er(u,T)})))}},{id:"stack-vertical",label:{default:"action.stack-vertical","context-menu":"action.stack-vertical.short"},icon:"stack-vertical",onSelect(S){h()&&(m()||(s("stack-shapes",{operation:"vertical",source:S}),u.markHistoryStoppingPoint("stack-vertical"),u.run(()=>{const T=u.getSelectedShapeIds();u.stackShapes(T,"vertical",u.options.adjacentShapeMargin),er(u,T)})))}},{id:"stack-horizontal",label:{default:"action.stack-horizontal","context-menu":"action.stack-horizontal.short"},icon:"stack-horizontal",onSelect(S){h()&&(m()||(s("stack-shapes",{operation:"horizontal",source:S}),u.markHistoryStoppingPoint("stack-horizontal"),u.run(()=>{const T=u.getSelectedShapeIds();u.stackShapes(T,"horizontal",u.options.adjacentShapeMargin),er(u,T)})))}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",onSelect(S){h()&&(m()||(s("reorder-shapes",{operation:"toFront",source:S}),u.markHistoryStoppingPoint("bring to front"),u.bringToFront(u.getSelectedShapeIds())))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"alt+]",onSelect(S){h()&&(m()||(s("reorder-shapes",{operation:"forward",source:S}),u.markHistoryStoppingPoint("bring forward"),u.bringForward(u.getSelectedShapeIds())))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"alt+[",onSelect(S){h()&&(m()||(s("reorder-shapes",{operation:"backward",source:S}),u.markHistoryStoppingPoint("send backward"),u.sendBackward(u.getSelectedShapeIds())))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",onSelect(S){h()&&(m()||(s("reorder-shapes",{operation:"toBack",source:S}),u.markHistoryStoppingPoint("send to back"),u.sendToBack(u.getSelectedShapeIds())))}},{id:"cut",label:"action.cut",kbd:"cmd+x,ctrl+x",onSelect(S){h()&&(m()||(u.markHistoryStoppingPoint("cut"),o.cut(S)))}},{id:"copy",label:"action.copy",kbd:"cmd+c,ctrl+c",readonlyOk:!0,onSelect(S){h()&&(m()||o.copy(S))}},{id:"paste",label:"action.paste",kbd:"cmd+v,ctrl+v",onSelect(S){var T;(T=navigator.clipboard)==null||T.read().then(C=>{o.paste(C,S,S==="context-menu"?u.inputs.currentPagePoint:void 0)}).catch(()=>{o.addToast({title:o.msg("action.paste-error-title"),description:o.msg("action.paste-error-description"),severity:"error"})})}},{id:"select-all",label:"action.select-all",kbd:"cmd+a,ctrl+a",readonlyOk:!0,onSelect(S){u.run(()=>{m()||(s("select-all-shapes",{source:S}),u.markHistoryStoppingPoint("select all kbd"),u.selectAll())})}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(S){h()&&(m()||(s("select-none-shapes",{source:S}),u.markHistoryStoppingPoint("select none"),u.selectNone()))}},{id:"delete",label:"action.delete",kbd:",del",icon:"trash",onSelect(S){h()&&(m()||(s("delete-shapes",{source:S}),u.markHistoryStoppingPoint("delete"),u.deleteShapes(u.getSelectedShapeIds())))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",kbd:"shift+.,shift+alt+.",onSelect(S){if(!h()||m())return;const T=u.inputs.altKey;s("rotate-cw",{source:S,fine:T}),u.markHistoryStoppingPoint("rotate-cw"),u.run(()=>{const C=yo/(T?96:6),_=u.getSelectionRotation()%C,I=Eo(_,0)||Eo(_,C),P=u.getSelectedShapeIds();u.rotateShapesBy(P,C-(I?0:_)),er(u,P)})}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",kbd:"shift+,,shift+alt+,",onSelect(S){if(!h()||m())return;const T=u.inputs.altKey;s("rotate-ccw",{source:S,fine:T}),u.markHistoryStoppingPoint("rotate-ccw"),u.run(()=>{const C=yo/(T?96:6),_=u.getSelectionRotation()%C,I=Eo(_,0),P=u.getSelectedShapeIds();u.rotateShapesBy(P,I?-C:-_),er(u,P)})}},{id:"zoom-in",label:"action.zoom-in",kbd:"cmd+=,ctrl+=,=",readonlyOk:!0,onSelect(S){s("zoom-in",{source:S,towardsCursor:!1}),u.zoomIn(void 0,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-in-on-cursor",label:"action.zoom-in",kbd:"shift+cmd+=,shift+ctrl+=,shift+=",readonlyOk:!0,onSelect(S){s("zoom-in",{source:S,towardsCursor:!0}),u.zoomIn(u.inputs.currentScreenPoint,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-out",label:"action.zoom-out",kbd:"cmd+-,ctrl+-,-",readonlyOk:!0,onSelect(S){s("zoom-out",{source:S,towardsCursor:!1}),u.zoomOut(void 0,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-out-on-cursor",label:"action.zoom-out",kbd:"shift+cmd+-,shift+ctrl+-,shift+-",readonlyOk:!0,onSelect(S){s("zoom-out",{source:S,towardsCursor:!0}),u.zoomOut(u.inputs.currentScreenPoint,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"shift+0",readonlyOk:!0,onSelect(S){s("reset-zoom",{source:S}),u.resetZoom(void 0,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"shift+1",readonlyOk:!0,onSelect(S){s("zoom-to-fit",{source:S}),u.zoomToFit({animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"shift+2",readonlyOk:!0,onSelect(S){h()&&(m()||(s("zoom-to-selection",{source:S}),u.zoomToSelection({animation:{duration:u.options.animationMediumMs}})))}},{id:"toggle-snap-mode",label:{default:"action.toggle-snap-mode",menu:"action.toggle-snap-mode.menu"},onSelect(S){s("toggle-snap-mode",{source:S}),u.user.updateUserPreferences({isSnapMode:!u.user.getIsSnapMode()})},checkbox:!0},{id:"toggle-dark-mode",label:{default:"action.toggle-dark-mode",menu:"action.toggle-dark-mode.menu"},kbd:"cmd+/,ctrl+/",readonlyOk:!0,onSelect(S){const T=u.user.getIsDarkMode()?"light":"dark";s("color-scheme",{source:S,value:T}),u.user.updateUserPreferences({colorScheme:T})},checkbox:!0},{id:"toggle-wrap-mode",label:{default:"action.toggle-wrap-mode",menu:"action.toggle-wrap-mode.menu"},readonlyOk:!0,onSelect(S){s("toggle-wrap-mode",{source:S}),u.user.updateUserPreferences({isWrapMode:!u.user.getIsWrapMode()})},checkbox:!0},{id:"toggle-dynamic-size-mode",label:{default:"action.toggle-dynamic-size-mode",menu:"action.toggle-dynamic-size-mode.menu"},readonlyOk:!1,onSelect(S){s("toggle-dynamic-size-mode",{source:S}),u.user.updateUserPreferences({isDynamicSizeMode:!u.user.getIsDynamicResizeMode()})},checkbox:!0},{id:"toggle-paste-at-cursor",label:{default:"action.toggle-paste-at-cursor",menu:"action.toggle-paste-at-cursor.menu"},readonlyOk:!1,onSelect(S){s("toggle-paste-at-cursor",{source:S}),u.user.updateUserPreferences({isPasteAtCursorMode:!u.user.getIsPasteAtCursorMode()})},checkbox:!0},{id:"toggle-reduce-motion",label:{default:"action.toggle-reduce-motion",menu:"action.toggle-reduce-motion.menu"},readonlyOk:!0,onSelect(S){s("toggle-reduce-motion",{source:S}),u.user.updateUserPreferences({animationSpeed:u.user.getAnimationSpeed()===0?1:0})},checkbox:!0},{id:"toggle-keyboard-shortcuts",label:{default:"action.toggle-keyboard-shortcuts",menu:"action.toggle-keyboard-shortcuts.menu"},readonlyOk:!0,onSelect(S){s("toggle-keyboard-shortcuts",{source:S}),u.user.updateUserPreferences({areKeyboardShortcutsEnabled:!u.user.getAreKeyboardShortcutsEnabled()})},checkbox:!0},{id:"enhanced-a11y-mode",label:{default:"action.enhanced-a11y-mode",menu:"action.enhanced-a11y-mode.menu"},readonlyOk:!0,onSelect(S){s("enhanced-a11y-mode",{source:S}),u.user.updateUserPreferences({enhancedA11yMode:!u.user.getEnhancedA11yMode()})},checkbox:!0},{id:"toggle-edge-scrolling",label:{default:"action.toggle-edge-scrolling",menu:"action.toggle-edge-scrolling.menu"},readonlyOk:!0,onSelect(S){s("toggle-edge-scrolling",{source:S}),u.user.updateUserPreferences({edgeScrollSpeed:u.user.getEdgeScrollSpeed()===0?1:0})},checkbox:!0},{id:"toggle-transparent",label:{default:"action.toggle-transparent",menu:"action.toggle-transparent.menu","context-menu":"action.toggle-transparent.context-menu"},readonlyOk:!0,onSelect(S){s("toggle-transparent",{source:S}),u.updateInstanceState({exportBackground:!u.getInstanceState().exportBackground})},checkbox:!0},{id:"toggle-tool-lock",label:{default:"action.toggle-tool-lock",menu:"action.toggle-tool-lock.menu"},kbd:"q",onSelect(S){s("toggle-tool-lock",{source:S}),u.updateInstanceState({isToolLocked:!u.getInstanceState().isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",onSelect(S){s("unlock-all",{source:S});const T=[];for(const C of u.getCurrentPageShapes())C.isLocked&&T.push({id:C.id,type:C.type,isLocked:!1});T.length>0&&u.updateShapes(T)}},{id:"toggle-focus-mode",label:{default:"action.toggle-focus-mode",menu:"action.toggle-focus-mode.menu"},readonlyOk:!0,kbd:"cmd+.,ctrl+.",checkbox:!0,onSelect(S){u.timers.requestAnimationFrame(()=>{u.run(()=>{s("toggle-focus-mode",{source:S}),o.clearDialogs(),o.clearToasts(),u.updateInstanceState({isFocusMode:!u.getInstanceState().isFocusMode})})})}},{id:"toggle-grid",label:{default:"action.toggle-grid",menu:"action.toggle-grid.menu"},readonlyOk:!0,kbd:"cmd+',ctrl+'",onSelect(S){s("toggle-grid-mode",{source:S}),u.updateInstanceState({isGridMode:!u.getInstanceState().isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:{default:"action.toggle-debug-mode",menu:"action.toggle-debug-mode.menu"},readonlyOk:!0,onSelect(S){s("toggle-debug-mode",{source:S}),u.updateInstanceState({isDebugMode:!u.getInstanceState().isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"cmd+p,ctrl+p",readonlyOk:!0,onSelect(S){s("print",{source:S}),o.printSelectionOrPages()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(S){s("exit-pen-mode",{source:S}),u.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(S){s("stop-following",{source:S}),u.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(S){s("zoom-to-content",{source:S});const T=u.getSelectionPageBounds()??u.getCurrentPageBounds();T&&u.zoomToBounds(T,{targetZoom:Math.min(1,u.getZoomLevel()),animation:{duration:220}})}},{id:"toggle-lock",label:"action.toggle-lock",kbd:"shift+l",onSelect(S){u.markHistoryStoppingPoint("locking"),s("toggle-lock",{source:S}),u.toggleLock(u.getSelectedShapeIds())}},{id:"move-to-new-page",label:"context.pages.new-page",onSelect(S){const T=Cs.createId(),C=u.getSelectedShapeIds();u.run(()=>{u.markHistoryStoppingPoint("move_shapes_to_page"),u.createPage({name:o.msg("page-menu.new-page-initial-name"),id:T}),u.moveShapesToPage(C,T)}),s("move-to-new-page",{source:S})}},{id:"select-white-color",label:"color-style.white",kbd:"alt+t",onSelect(S){const T=ks;u.run(()=>{u.markHistoryStoppingPoint("change-color"),u.isIn("select")&&u.setStyleForSelectedShapes(T,"white"),u.setStyleForNextShapes(T,"white")}),s("set-style",{source:S,id:T.id,value:"white"})}},{id:"select-fill-fill",label:"fill-style.fill",kbd:"alt+f",onSelect(S){const T=dp;u.run(()=>{u.markHistoryStoppingPoint("change-fill"),u.isIn("select")&&u.setStyleForSelectedShapes(T,"fill"),u.setStyleForNextShapes(T,"fill")}),s("set-style",{source:S,id:T.id,value:"fill"})}},{id:"select-fill-lined-fill",label:"fill-style.lined-fill",kbd:"alt+shift+f",onSelect(S){const T=dp;u.run(()=>{u.markHistoryStoppingPoint("change-fill"),u.isIn("select")&&u.setStyleForSelectedShapes(T,"lined-fill"),u.setStyleForNextShapes(T,"lined-fill")}),s("set-style",{source:S,id:T.id,value:"lined-fill"})}},{id:"flatten-to-image",label:"action.flatten-to-image",kbd:"shift+f",onSelect:async S=>{const T=u.getSelectedShapeIds();if(T.length===0)return;u.markHistoryStoppingPoint("flattening to image"),s("flatten-to-image",{source:S});const C=await d8e(u,T,u.options.flattenImageBoundsExpand);C!=null&&C.length&&u.setSelectedShapes(C)}},{id:"select-geo-tool",kbd:"g",onSelect:async S=>{s("select-tool",{source:S,id:"geo-previous"}),u.setCurrentTool("geo")}},{id:"change-page-prev",kbd:"alt+left,alt+up",readonlyOk:!0,onSelect:async S=>{const T=u.getPages(),C=T.findIndex(_=>_.id===u.getCurrentPageId());C<1||(s("change-page",{source:S,direction:"prev"}),u.setCurrentPage(T[C-1].id))}},{id:"change-page-next",kbd:"alt+right,alt+down",readonlyOk:!0,onSelect:async S=>{const T=u.getPages(),C=T.findIndex(_=>_.id===u.getCurrentPageId());if(C===-1||C>=T.length-1){if(u.getCurrentPageShapes().length<=0||u.getIsReadonly())return;s("new-page",{source:S}),u.run(()=>{u.markHistoryStoppingPoint("creating page");const _=Cs.createId();u.createPage({name:o.msg("page-menu.new-page-initial-name"),id:_}),u.setCurrentPage(_)});return}u.setCurrentPage(T[C+1].id),s("change-page",{source:S,direction:"next"})}},{id:"adjust-shape-styles",label:"a11y.adjust-shape-styles",kbd:"cmd+Enter,ctrl+Enter",isRequiredA11yAction:!0,onSelect:async S=>{if(!h())return;const T=u.getOnlySelectedShape();if(T&&(u.isShapeOfType(T,"image")||u.isShapeOfType(T,"video"))){const _=u.getContainer().querySelector(".tlui-contextual-toolbar button:first-child");_==null||_.focus();return}const C=u.getContainer().querySelector(".tlui-style-panel button");C==null||C.focus(),s("adjust-shape-styles",{source:S})}},{id:"a11y-open-context-menu",kbd:"cmd+shift+Enter,ctrl+shift+Enter",isRequiredA11yAction:!0,readonlyOk:!0,onSelect:async S=>{var P;if(!h())return;const T=u.getSelectionPageBounds();if(!T)return;const C=T.x+T.width/2,_=T.y+T.height/2,I=u.pageToScreen(new R(C,_));(P=u.getContainer().querySelector(".tl-canvas"))==null||P.dispatchEvent(new PointerEvent("contextmenu",{clientX:I.x,clientY:I.y,bubbles:!0})),s("open-context-menu",{source:S})}},{id:"enlarge-shapes",label:"a11y.enlarge-shape",kbd:"cmd+alt+shift+=,ctrl+alt+shift+=",onSelect:async S=>{y(1.1),s("enlarge-shapes",{source:S})}},{id:"shrink-shapes",label:"a11y.shrink-shape",kbd:"cmd+alt+shift+-,ctrl+alt+shift+-",onSelect:async S=>{y(1/1.1),s("shrink-shapes",{source:S})}},{id:"a11y-repeat-shape-announce",kbd:"alt+r",label:"a11y.repeat-shape",isRequiredA11yAction:!0,readonlyOk:!0,onSelect:async S=>{const T=u.getSelectedShapeIds();if(!T.length)return;const C=vte({editor:u,selectedShapeIds:T,msg:l});C&&(i.announce({msg:""}),u.timers.requestAnimationFrame(()=>{i.announce({msg:C})}),s("a11y-repeat-shape-announce",{source:S}))}},{id:"image-replace",label:"tool.replace-media",icon:"arrow-cycle",readonlyOk:!1,onSelect:async S=>{s("image-replace",{source:S}),o.replaceImage()}},{id:"video-replace",label:"tool.replace-media",icon:"arrow-cycle",readonlyOk:!1,onSelect:async S=>{s("video-replace",{source:S}),o.replaceVideo()}},{id:"download-original",label:"action.download-original",readonlyOk:!0,onSelect:async S=>{const T=u.getSelectedShapes();if(T.length===0)return;const C=T.filter(_=>fse(_,u));if(C.length!==0){for(const _ of C){const I=u.getAsset(_.props.assetId);if(!I||!I.props.src)continue;const P=await u.resolveAssetUrl(I.id,{shouldResolveToOriginal:!0});if(!P)return;const M=document.createElement("a");M.href=P,(I.type==="video"||I.type==="image")&&!I.props.src.startsWith("asset:")?M.download=I.props.name:M.download="download",document.body.appendChild(M),M.click(),document.body.removeChild(M)}s("download-original",{source:S})}}}];r&&v.push({id:"open-cursor-chat",label:"action.open-cursor-chat",readonlyOk:!0,kbd:"/",onSelect(S){s("open-cursor-chat",{source:S}),!u.getInstanceState().isCoarsePointer&&u.timers.requestAnimationFrame(()=>{u.updateInstanceState({isChatting:!0})})}});const x=lVe(v);return t?t(u,x,o):x},[o,n,s,t,c,r,l,i,a]);return g.jsx(pse.Provider,{value:d,children:e})}function ou(){const t=w.useContext(pse);if(!t)throw new Error("useTools must be used within a ToolProvider");return t}function L0(t,e){return t?typeof t=="string"?t:e?t[e]??t.default:void 0:void 0}function el({actionId:t="",...e}){const r=ou()[t];return r?g.jsx(Bv,{...r,...e}):null}function mse(){return B8e()?g.jsx(Ie,{actionId:"toggle-auto-size"}):null}function hse(){return gae()?g.jsx(Ie,{actionId:"edit-link"}):null}function uVe(){return js(1)?g.jsx(Ie,{actionId:"duplicate"}):null}function gse(){const t=ue();return ce("should display flatten option",()=>{if(t.getSelectedShapeIds().length===0)return!1;const r=t.getOnlySelectedShape();return!(r&&t.isShapeOfType(r,"image"))},[t])?g.jsx(Ie,{actionId:"flatten-to-image"}):null}function dVe(){const t=ue();return ce("should display download original option",()=>{const n=t.getSelectedShapes();return n.length===0?!1:n.some(r=>fse(r,t))},[t])?g.jsx(Ie,{actionId:"download-original"}):null}function bse(){return fae()?g.jsx(Ie,{actionId:"group"}):null}function yse(){return mae()?g.jsx(Ie,{actionId:"ungroup"}):null}function vse(){const t=ue();return ce("allow unframe",()=>{const n=t.getSelectedShapes();return n.length===0?!1:n.every(r=>t.isShapeOfType(r,"frame"))},[t])?g.jsx(Ie,{actionId:"remove-frame"}):null}function xse(){const t=ue();return ce("allow fit frame to content",()=>{const n=t.getOnlySelectedShape();return n?t.isShapeOfType(n,"frame")&&t.getSortedChildIdsForParent(n).length>0:!1},[t])?g.jsx(Ie,{actionId:"fit-frame-to-content"}):null}function Sse(){const t=ue();return ce("selected shapes",()=>t.getSelectedShapes().length>0,[t])?g.jsx(Ie,{actionId:"toggle-lock"}):null}function $L(){const t=ue(),e=ce("isTransparentBg",()=>!t.getInstanceState().exportBackground,[t]);return g.jsx(el,{actionId:"toggle-transparent",checked:e,toggle:!0})}function pVe(){const t=ue(),e=ce("any shapes",()=>t.getCurrentPageShapeIds().size>0,[t]);return g.jsx(Ie,{actionId:"unlock-all",disabled:!e})}function Ese(){const t=ue(),e=ce("zoomed to 100",()=>t.getZoomLevel()===1,[t]);return g.jsx(Ie,{actionId:"zoom-to-100",noClose:!0,disabled:e})}function Tse(){const t=ue(),e=ce("has shapes",()=>t.getCurrentPageShapeIds().size>0,[t]);return g.jsx(Ie,{actionId:"zoom-to-fit",disabled:!e,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0})}function wse(){const t=ue(),e=ce("has shapes",()=>t.getSelectedShapeIds().length>0,[t]);return g.jsx(Ie,{actionId:"zoom-to-selection",disabled:!e,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})}function Cse(){return g.jsxs(Ht,{id:"clipboard",children:[g.jsx(mVe,{}),g.jsx(hVe,{}),g.jsx(gVe,{}),g.jsx(uVe,{}),g.jsx(bVe,{})]})}function fVe(){var n;const t=ue(),e=ce("atLeastOneShapeOnPage",()=>t.getCurrentPageShapeIds().size>0,[t]);return g.jsxs(ps,{id:"copy-as",label:"context-menu.copy-as",size:"small",disabled:!e,children:[g.jsxs(Ht,{id:"copy-as-group",children:[g.jsx(Ie,{actionId:"copy-as-svg"}),!!((n=window.navigator.clipboard)!=null&&n.write)&&g.jsx(Ie,{actionId:"copy-as-png"})]}),g.jsx(Ht,{id:"copy-as-bg",children:g.jsx($L,{})})]})}function mVe(){const t=js(1);return g.jsx(Ie,{actionId:"cut",disabled:!t})}function hVe(){const t=hae(1);return g.jsx(Ie,{actionId:"copy",disabled:!t})}function gVe(){const t=j8e;return g.jsx(Ie,{actionId:"paste",disabled:!t})}function Ase(){const t=ue();return ce("atLeastOneShapeOnPage",()=>t.getCurrentPageShapeIds().size>0,[t])?g.jsxs(Ht,{id:"conversions",children:[g.jsx(fVe,{}),g.jsxs(ps,{id:"export-as",label:"context-menu.export-as",size:"small",children:[g.jsxs(Ht,{id:"export-as-group",children:[g.jsx(Ie,{actionId:"export-as-svg"}),g.jsx(Ie,{actionId:"export-as-png"})]}),g.jsx(Ht,{id:"export-as-bg",children:g.jsx($L,{})})]}),g.jsx(dVe,{})]}):null}function _se(){const t=ue(),e=ce("atLeastOneShapeOnPage",()=>t.getCurrentPageShapeIds().size>0,[t]);return g.jsx(Ie,{actionId:"select-all",disabled:!e})}function bVe(){const t=js(1);return g.jsx(Ie,{actionId:"delete",disabled:!t})}function yVe(){const t=Qi();return!hae(1)||t?null:g.jsxs(ps,{id:"edit",label:"context-menu.edit",size:"small",children:[g.jsx(bse,{}),g.jsx(yse,{}),g.jsx(gse,{}),g.jsx(hse,{}),g.jsx(xse,{}),g.jsx(vse,{}),g.jsx(Ise,{}),g.jsx(kse,{}),g.jsx(mse,{}),g.jsx(Sse,{})]})}function vVe(){const t=js(2),e=F8e();return Qi()||!(t||e)?null:g.jsxs(ps,{id:"arrange",label:"context-menu.arrange",size:"small",children:[t&&g.jsxs(Ht,{id:"align",children:[g.jsx(Ie,{actionId:"align-left"}),g.jsx(Ie,{actionId:"align-center-horizontal"}),g.jsx(Ie,{actionId:"align-right"}),g.jsx(Ie,{actionId:"align-top"}),g.jsx(Ie,{actionId:"align-center-vertical"}),g.jsx(Ie,{actionId:"align-bottom"})]}),g.jsx(xVe,{}),t&&g.jsxs(Ht,{id:"stretch",children:[g.jsx(Ie,{actionId:"stretch-horizontal"}),g.jsx(Ie,{actionId:"stretch-vertical"})]}),(t||e)&&g.jsxs(Ht,{id:"flip",children:[g.jsx(Ie,{actionId:"flip-horizontal"}),g.jsx(Ie,{actionId:"flip-vertical"})]}),g.jsx(SVe,{})]})}function xVe(){return js(3)?g.jsxs(Ht,{id:"distribute",children:[g.jsx(Ie,{actionId:"distribute-horizontal"}),g.jsx(Ie,{actionId:"distribute-vertical"})]}):null}function SVe(){const t=js(2),e=pae();return t?g.jsxs(Ht,{id:"order",children:[g.jsx(Ie,{actionId:"pack"}),e&&g.jsx(Ie,{actionId:"stack-horizontal"}),e&&g.jsx(Ie,{actionId:"stack-vertical"})]}):null}function EVe(){const t=Qi(),e=js(1);return t||!e?null:g.jsx(ps,{id:"reorder",label:"context-menu.reorder",size:"small",children:g.jsxs(Ht,{id:"reorder",children:[g.jsx(Ie,{actionId:"bring-to-front"}),g.jsx(Ie,{actionId:"bring-forward"}),g.jsx(Ie,{actionId:"send-backward"}),g.jsx(Ie,{actionId:"send-to-back"})]})})}function TVe(){const t=ue(),e=ce("pages",()=>t.getPages(),[t]),n=ce("current page id",()=>t.getCurrentPageId(),[t]),{addToast:r}=nd(),o=$r(),a=Qi();return!js(1)||a?null:g.jsxs(ps,{id:"move-to-page",label:"context-menu.move-to-page",size:"small",children:[g.jsx(Ht,{id:"pages",children:e.map(i=>g.jsx(dn,{id:i.id,disabled:n===i.id,label:i.name.length>30?`${i.name.slice(0,30)}`:i.name,onSelect:()=>{t.markHistoryStoppingPoint("move_shapes_to_page"),t.moveShapesToPage(t.getSelectedShapeIds(),i.id);const l=t.getPage(i.id);l&&r({title:"Changed page",description:`Moved to ${l.name}.`,actions:[{label:"Go back",type:"primary",onClick:()=>{t.markHistoryStoppingPoint("change-page"),t.setCurrentPage(n)}}]}),o("move-to-page",{source:"context-menu"})}},i.id))}),g.jsx(Ht,{id:"new-page",children:g.jsx(Ie,{actionId:"move-to-new-page"})})]})}function kse(){const t=ue();return ce("oneEmbedSelected",()=>{const n=t.getOnlySelectedShape();return n?!!(t.isShapeOfType(n,"embed")&&n.props.url&&!t.isShapeOrAncestorLocked(n)):!1},[t])?g.jsx(Ie,{actionId:"convert-to-bookmark"}):null}function Ise(){const t=ue(),e=AL();return ce("oneEmbeddableBookmarkSelected",()=>{const r=t.getOnlySelectedShape();return r?!!(t.isShapeOfType(r,"bookmark")&&r.props.url&&e(r.props.url)&&!t.isShapeOrAncestorLocked(r)):!1},[t])?g.jsx(Ie,{actionId:"convert-to-embed"}):null}function wVe(){const t=ue(),e=ce("isSnapMode",()=>t.user.getIsSnapMode(),[t]);return g.jsx(el,{actionId:"toggle-snap-mode",checked:e})}function CVe(){const t=ue(),e=ce("isToolLock",()=>t.getInstanceState().isToolLocked,[t]);return g.jsx(el,{actionId:"toggle-tool-lock",checked:e})}function AVe(){const t=ue(),e=ce("isGridMode",()=>t.getInstanceState().isGridMode,[t]);return g.jsx(el,{actionId:"toggle-grid",checked:e})}function _Ve(){const t=ue(),e=ce("isWrapMode",()=>t.user.getIsWrapMode(),[t]);return g.jsx(el,{actionId:"toggle-wrap-mode",checked:e})}function kVe(){const t=ue(),e=ce("isFocusMode",()=>t.getInstanceState().isFocusMode,[t]);return g.jsx(el,{actionId:"toggle-focus-mode",checked:e})}function IVe(){const t=ue(),e=ce("edgeScrollSpeed",()=>t.user.getEdgeScrollSpeed(),[t]);return g.jsx(el,{actionId:"toggle-edge-scrolling",checked:e===1})}function PVe(){const t=ue(),e=ce("animationSpeed",()=>t.user.getAnimationSpeed(),[t]);return g.jsx(el,{actionId:"toggle-reduce-motion",checked:e===0})}function OVe(){const t=ue(),e=ce("keyboardShortcuts",()=>t.user.getAreKeyboardShortcutsEnabled(),[t]);return g.jsx(el,{actionId:"toggle-keyboard-shortcuts",checked:e})}function MVe(){const t=ue(),e=ce("enhancedA11yMode",()=>t.user.getEnhancedA11yMode(),[t]);return g.jsx(el,{actionId:"enhanced-a11y-mode",checked:e})}function RVe(){const t=ue(),e=ce("isDebugMode",()=>t.getInstanceState().isDebugMode,[t]);return g.jsx(el,{actionId:"toggle-debug-mode",checked:e})}function DVe(){const t=ue(),e=ce("dynamic resize",()=>t.user.getIsDynamicResizeMode(),[t]);return g.jsx(el,{actionId:"toggle-dynamic-size-mode",checked:e})}function NVe(){const t=ue(),e=ce("paste at cursor",()=>t.user.getIsPasteAtCursorMode(),[t]);return g.jsx(el,{actionId:"toggle-paste-at-cursor",checked:e})}function LVe(){const t=ue();return ce("show cursor chat",()=>t.getCurrentToolId()==="select"&&!t.getInstanceState().isCoarsePointer,[t])?g.jsx(Ie,{actionId:"open-cursor-chat"}):null}function jVe(){return g.jsx(ps,{id:"help menu accessibility",label:"menu.accessibility",children:g.jsxs(Ht,{id:"accessibility",children:[g.jsx(PVe,{}),g.jsx(OVe,{}),g.jsx(MVe,{})]})})}class D1 extends w1{getDefaultProps(){return{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.5,y:.5},snap:"none"}}onAfterCreate({binding:e}){const n=this.editor.getShape(e.fromId);n&&WP(this.editor,n)}onAfterChange({bindingAfter:e}){const n=this.editor.getShape(e.fromId);n&&WP(this.editor,n)}onAfterChangeFromShape({shapeAfter:e}){WP(this.editor,e)}onAfterChangeToShape({binding:e,shapeBefore:n,shapeAfter:r,reason:o}){o!=="ancestry"&&n.parentId===r.parentId&&n.index===r.index||Pse(this.editor,e.fromId)}onBeforeIsolateFromShape({binding:e}){const n=this.editor.getShape(e.fromId);n&&fT({editor:this.editor,arrow:n,terminal:e.props.terminal})}}L(D1,"type","arrow"),L(D1,"props",tY),L(D1,"migrations",nY);function Pse(t,e){var x;const n=t.getShape(e);if(!n)return;const r=aa(t,n),{start:o,end:a}=r,s=o?t.getShape(o.toId):void 0,i=a?t.getShape(a.toId):void 0,l=t.getAncestorPageId(n);if(!l)return;let c;if(s&&i)c=t.findCommonAncestor([s,i])??l;else if(s||i){const S=(x=s||i)==null?void 0:x.parentId;S&&S===n.parentId?c=n.parentId:c=l}else return;c&&c!==n.parentId&&t.reparentShapes([e],c);const d=t.getShape(e);if(!d)throw Error("no reparented arrow");const u=t.getShapeNearestSibling(d,s),m=t.getShapeNearestSibling(d,i);let h;if(u&&m)h=u.index>m.index?u:m;else if(u&&!m)h=u;else if(m&&!u)h=m;else return;let y;const v=t.getSortedChildIdsForParent(h.parentId).map(S=>t.getShape(S)).filter(S=>S.index>h.index);if(v.length){const S=v.find(T=>T.type!=="arrow");if(d.index>h.index&&(!S||d.index<S.index))return;y=Vh(h.index,v[0].index)}else y=_l(h.index);y!==d.index&&t.updateShapes([{id:e,type:"arrow",index:y}])}function WP(t,e){const n=aa(t,e);for(const r of["start","end"]){const o=n[r];if(!o)continue;const a=t.getShape(o.toId),s=t.getAncestorPageId(e)===t.getAncestorPageId(a);(!a||!s)&&fT({editor:t,arrow:e,terminal:r,unbind:!0})}Pse(t,e.id)}function fT({editor:t,arrow:e,terminal:n,unbind:r=!1,useHandle:o=!1}){const a=Al(t,e);if(!a)throw new Error("expected arrow info");const s=o?a.start.handle:a.start.point,i=o?a.end.handle:a.end.point,l=n==="start"?s:i,c={id:e.id,type:"arrow",props:{[n]:{x:l.x,y:l.y},bend:e.props.bend}};if(a.type==="arc"){const d=n==="start"?s:a.start.handle,u=n==="end"?i:a.end.handle,m=R.Med(d,u),h=R.Sub(d,u).per().uni().mul(a.handleArc.radius*2*Math.sign(e.props.bend)),y=fv(a.handleArc.center,R.Add(m,h),a.handleArc.center,a.handleArc.radius);dt((y==null?void 0:y.length)===1);const v=R.Dist(m,y[0])*Math.sign(e.props.bend);Eo(v,c.props.bend)||(c.props.bend=v)}t.updateShape(c),r&&by(t,e,n)}function BVe({size:t,width:e,height:n,hideAlternateHandles:r}){const o=ie(t/3),a=o/2,s=it();return g.jsxs("svg",{className:"tl-overlays__item","aria-hidden":"true",children:[g.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${ie(0-a)},${ie(t)} 
						${ie(0-a)},${ie(0-a)} 
						${ie(t)},${ie(0-a)}`,strokeWidth:o,"data-testid":"selection.crop.top_left",role:"button","aria-label":s("handle.crop.top-left")}),g.jsx("line",{className:pt("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:ie(e/2-t),y1:ie(0-a),x2:ie(e/2+t),y2:ie(0-a),strokeWidth:o,"data-testid":"selection.crop.top",role:"button","aria-label":s("handle.crop.top")}),g.jsx("polyline",{className:pt("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${ie(e-t)},${ie(0-a)} 
						${ie(e+a)},${ie(0-a)} 
						${ie(e+a)},${ie(t)}`,strokeWidth:o,"data-testid":"selection.crop.top_right",role:"button","aria-label":s("handle.crop.top-right")}),g.jsx("line",{className:pt("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:ie(e+a),y1:ie(n/2-t),x2:ie(e+a),y2:ie(n/2+t),strokeWidth:o,"data-testid":"selection.crop.right",role:"button","aria-label":s("handle.crop.right")}),g.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${ie(e+a)},${ie(n-t)} 
						${ie(e+a)},${ie(n+a)}
						${ie(e-t)},${ie(n+a)}`,strokeWidth:o,"data-testid":"selection.crop.bottom_right",role:"button","aria-label":s("handle.crop.bottom-right")}),g.jsx("line",{className:pt("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:ie(e/2-t),y1:ie(n+a),x2:ie(e/2+t),y2:ie(n+a),strokeWidth:o,"data-testid":"selection.crop.bottom",role:"button","aria-label":s("handle.crop.bottom")}),g.jsx("polyline",{className:pt("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${ie(0+t)},${ie(n+a)} 
						${ie(0-a)},${ie(n+a)}
						${ie(0-a)},${ie(n-t)}`,strokeWidth:o,"data-testid":"selection.crop.bottom_left",role:"button","aria-label":s("handle.crop.bottom-left")}),g.jsx("line",{className:pt("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:ie(0-a),y1:ie(n/2-t),x2:ie(0-a),y2:ie(n/2+t),strokeWidth:o,"data-testid":"selection.crop.left",role:"button","aria-label":s("handle.crop.left")})]})}function FVe({children:t}){const e=ue();return ce("shouldDisplayHandles",()=>{if(e.isInAny("select.idle","select.pointing_handle","select.pointing_shape"))return!0;if(e.isInAny("select.editing_shape")){const r=e.getOnlySelectedShape();return r&&e.isShapeOfType(r,"note")}return!1},[e])?g.jsx("svg",{className:"tl-user-handles tl-overlays__item","aria-hidden":"true",children:t}):null}const zVe=new as;function Ky(t){return zVe.get(t,()=>Ir("arrowTarget",null))}function UVe(t){return Ky(t).get()}function VL(t){Ky(t).set(null)}function qC({editor:t,pointInPageSpace:e,arrow:n,isPrecise:r,currentBinding:o,oppositeBinding:a}){const s=t.getShapeUtil("arrow");if(s.options.shouldIgnoreTargets(t))return Ky(t).set(null),null;const i=n?n.props.kind:t.getStyleForNextShape(_E),l=t.getShapeAtPoint(e,{hitInside:!0,hitFrameInside:!0,margin:i==="elbow"?8:[8,0],filter:q=>!q.isLocked&&t.canBindShapes({fromShape:n??qVe,toShape:q,binding:"arrow"})});if(!l)return Ky(t).set(null),null;const c=t.getShapeGeometry(l),d=Be.ZeroFix(c.bounds),u=c.center,m=t.getShapePageTransform(l),h=t.getPointInShapeSpace(l,e),y=Math.max(c.bounds.width,c.bounds.height),v=_p(m8e,(q,U)=>{const Y=O0[h8e[q]],X=R.Mul(U,y).add(u);let ee=!1,$=Y.v(d[q],d[Y.crossMid]),G=0;const re=c.intersectLineSegment(u,X,Uc.EXCLUDE_NON_STANDARD);for(const ve of re){const xe=R.Dist2(ve,u);xe>G&&(G=xe,$=ve,ee=c.isClosed)}return{point:m.applyToPoint($),isEnabled:ee,far:m.applyToPoint(X)}}),x=t.getZoomLevel(),S=s.options.minElbowHandleDistance/x,T=m.applyToPoint(u);for(const q of Ly(v)){const U=v[q];R.DistMin(U.point,T,S)&&(U.isEnabled=!1)}let C=r;C||(!o||o&&l.id!==o.toId)&&(C=t.inputs.pointerVelocity.len()<.5),r||(c.isClosed||(C=!0),a&&l.id===a.toId&&a.props.isPrecise&&(C=!0));const _=s.options.shouldBeExact(t,C);_&&(C=!0);const I=!_&&C&&c.isClosed,P=!_&&(C&&i==="elbow"||!c.isClosed),M=!_&&C&&i==="elbow"&&c.isClosed,D=C&&(c.isClosed||_),F=!_&&C&&i==="elbow"&&c.isClosed;let B="none",V=e;if(D||(B="center",V=T),P){const q=D?WS(t,d,s.options.elbowArrowEdgeSnapDistance):1/0,U=c.nearestPoint(h,{includeLabels:!1,includeInternal:!1}),Y=m.applyToPoint(U);R.Dist(Y,e)<q&&(B="edge",V=Y)}if(F){const q=WS(t,d,s.options.elbowArrowAxisSnapDistance),U=R.DistanceToLineSegment(v.left.far,v.right.far,e),Y=R.DistanceToLineSegment(v.top.far,v.bottom.far,e),X=U<Y&&U<q?"x":Y<q?"y":null;if(X){const ee=O0[X],$=R.Dist2(v[ee.loEdge].far,e),G=R.Dist2(v[ee.hiEdge].far,e),re=$<G?ee.loEdge:ee.hiEdge;v[re].isEnabled&&(B="edge-point",V=v[re].point)}}if(M){const q=WS(t,d,s.options.elbowArrowPointSnapDistance);let U=null,Y=1/0;for(const[X,ee]of Ts(v)){if(!ee.isEnabled)continue;const $=R.Dist(ee.point,e);$<q&&$<Y&&(Y=$,U=X)}U&&(B="edge-point",V=v[U].point)}if(I){const q=WS(t,d,i==="elbow"?s.options.elbowArrowCenterSnapDistance:s.options.arcArrowCenterSnapDistance);R.Dist(h,d.center)<q&&(B="center",V=T)}const z=t.getPointInShapeSpace(l,V),H={x:u0(d.minX,d.maxX,z.x),y:u0(d.minY,d.maxY,z.y)},j={target:l,arrowKind:i,handlesInPageSpace:v,centerInPageSpace:T,anchorInPageSpace:V,isExact:_,isPrecise:C,snap:B,normalizedAnchor:H};return Ky(t).set(j),j}const qVe={type:"arrow"};function WS(t,e,n){return Lt(Math.min(e.width,e.height)*.15,4,n)/t.getZoomLevel()}function HVe(){const t=ue();return ce("should show arrow hints",()=>{if(t.isInAny("arrow.idle","arrow.pointing"))return!0;if(t.isIn("select.pointing_handle")){const n=t.getStateDescendant("select.pointing_handle");if(n.info.shape.type==="arrow"&&(n.info.handle.id==="start"||n.info.handle.id==="end"))return!0}if(t.isIn("select.dragging_handle")){const n=t.getStateDescendant("select.dragging_handle");if(n.info.shape.type==="arrow"&&(n.info.handle.id==="start"||n.info.handle.id==="end"))return!0}return!1},[t])?g.jsx($Ve,{}):null}function $Ve(){const t=ue(),{ShapeIndicator:e}=cr(),n=ce("arrow target info",()=>UVe(t),[t]);if(!n)return null;const{handlesInPageSpace:r,snap:o,anchorInPageSpace:a,arrowKind:s,isExact:i,isPrecise:l}=n,c=!i&&s==="elbow";return g.jsxs(g.Fragment,{children:[e&&g.jsx(e,{shapeId:n.target.id}),c&&g.jsxs("svg",{className:"tl-overlays__item","aria-hidden":"true",children:[g.jsx("circle",{cx:a.x,cy:a.y,className:`tl-arrow-hint-snap tl-arrow-hint-snap__${l?o??"none":"none"}`}),Object.entries(r).map(([d,u])=>u.isEnabled?g.jsx("circle",{cx:u.point.x,cy:u.point.y,className:"tl-arrow-hint-handle"},d):null)]})]})}const{PI:VVe}=Math,Uh=VVe+1e-4;function Ose(t,e={}){const{size:n=16,smoothing:r=.5}=e;if(t.length===0||n<=0)return{left:[],right:[]};const o=t[0],a=t[t.length-1],s=a.runningLength,i=Math.pow(n*r,2),l=[],c=[];let d=t[0].vector,u=t[0].point,m=u,h=u,y=m,v=!1,x;for(let S=0;S<t.length;S++){x=t[S];const{point:T,vector:C}=t[S],_=x.vector.dpr(d),I=(S<t.length-1?t[S+1]:t[S]).vector,P=S<t.length-1?I.dpr(x.vector):1,M=_<0&&!v,D=P!==null&&P<.2;if(M||D){if(P>-.62&&s-x.runningLength>x.radius){const B=d.clone().mul(x.radius);d.clone().cpr(I)<0?(h=R.Add(T,B),y=R.Sub(T,B)):(h=R.Sub(T,B),y=R.Add(T,B)),l.push(h),c.push(y)}else{const B=d.clone().mul(x.radius).per(),V=R.Sub(x.input,B);for(let z=1/13,H=0;H<1;H+=z)h=R.RotWith(V,x.input,Uh*H),l.push(h),y=R.RotWith(V,x.input,Uh+Uh*-H),c.push(y)}u=h,m=y,D&&(v=!0);continue}if(v=!1,x===o||x===a){const B=R.Per(C).mul(x.radius);l.push(R.Sub(T,B)),c.push(R.Add(T,B));continue}const F=R.Lrp(I,C,P).per().mul(x.radius);h=R.Sub(T,F),(S<=1||R.Dist2(u,h)>i)&&(l.push(h),u=h),y=R.Add(T,F),(S<=1||R.Dist2(m,y)>i)&&(c.push(y),m=y),d=C}return{left:l,right:c}}function Mse(t,e={}){const{size:n=16,start:r={},end:o={},last:a=!1}=e,{cap:s=!0}=r,{cap:i=!0}=o;if(t.length===0||n<=0)return[];const l=t[0],c=t[t.length-1],d=c.runningLength,u=r.taper===!1?0:r.taper===!0?Math.max(n,d):r.taper,m=o.taper===!1?0:o.taper===!0?Math.max(n,d):o.taper,{left:h,right:y}=Ose(t,e),v=l.point,x=t.length>1?t[t.length-1].point:R.AddXY(l.point,1,1);if(t.length===1&&(!(u||m)||a)){const _=R.Add(v,R.Sub(v,x).uni().per().mul(-l.radius)),I=[];for(let P=1/13,M=P;M<=1;M+=P)I.push(R.RotWith(_,v,Uh*2*M));return I}const S=[];if(!(u||m&&t.length===1))if(s)for(let _=1/8,I=_;I<=1;I+=_){const P=R.RotWith(y[0],v,Uh*I);S.push(P)}else{const _=R.Sub(h[0],y[0]),I=R.Mul(_,.5),P=R.Mul(_,.51);S.push(R.Sub(v,I),R.Sub(v,P),R.Add(v,P),R.Add(v,I))}const T=[],C=c.vector.clone().per().neg();if(m||u&&t.length===1)T.push(x);else if(i){const _=R.Add(x,R.Mul(C,c.radius));for(let I=1/29,P=I;P<1;P+=I)T.push(R.RotWith(_,x,Uh*3*P))}else T.push(R.Add(x,R.Mul(C,c.radius)),R.Add(x,R.Mul(C,c.radius*.99)),R.Sub(x,R.Mul(C,c.radius*.99)),R.Sub(x,R.Mul(C,c.radius)));return h.concat(T,y.reverse(),S)}const GVe=.025,KVe=.01;function bp(t,e={}){var x;const{streamline:n=.5,size:r=16,simulatePressure:o=!1}=e;if(t.length===0)return[];const a=.15+(1-n)*.85;let s=t.map(R.From),i=0;if(!o){let S=s[0];for(;S&&!(S.z>=GVe);)s.shift(),S=s[0]}if(!o){let S=s[s.length-1];for(;S&&!(S.z>=KVe);)s.pop(),S=s[s.length-1]}if(s.length===0)return[{point:R.From(t[0]),input:R.From(t[0]),pressure:o?.5:.15,vector:new R(1,1),distance:0,runningLength:0,radius:1}];let l=s[1];for(;l&&!(R.Dist2(l,s[0])>(r/3)**2);)s[0].z=Math.max(s[0].z,l.z),s.splice(1,1),l=s[1];const c=s.pop();for(l=s[s.length-1];l&&!(R.Dist2(l,c)>(r/3)**2);)s.pop(),l=s[s.length-1],i++;s.push(c);const d=e.last||!e.simulatePressure||s.length>1&&R.Dist2(s[s.length-1],s[s.length-2])<r**2||i>0;if(s.length===2&&e.simulatePressure){const S=s[1];s=s.slice(0,-1);for(let T=1;T<5;T++){const C=R.Lrp(s[0],S,T/4);C.z=(s[0].z+(S.z-s[0].z))*T/4,s.push(C)}}const u=[{point:s[0],input:s[0],pressure:o?.5:s[0].z,vector:new R(1,1),distance:0,runningLength:0,radius:1}];let m=0,h=u[0],y,v;d&&n>0&&s.push(s[s.length-1].clone());for(let S=1,T=s.length;S<T;S++)y=!a||e.last&&S===T-1?s[S].clone():s[S].clone().lrp(h.point,1-a),!h.point.equals(y)&&(v=R.Dist(y,h.point),m+=v,!(S<4&&m<r)&&(h={input:s[S],point:y,pressure:o?.5:s[S].z,vector:R.Sub(h.point,y).uni(),distance:v,runningLength:m,radius:1},u.push(h)));if((x=u[1])!=null&&x.vector&&(u[0].vector=u[1].vector.clone()),m<1){const S=Math.max(.5,...u.map(T=>T.pressure));u.forEach(T=>T.pressure=S)}return u}const{min:Rd}=Math,YP=.275;function GL(t,e){const{size:n=16,thinning:r=.5,simulatePressure:o=!0,easing:a=x=>x,start:s={},end:i={}}=e,{easing:l=Ja.easeOutQuad}=s,{easing:c=Ja.easeOutCubic}=i,d=t[t.length-1].runningLength;let u,m=t[0].pressure,h;if(!o&&d<n){const x=t.reduce((S,T)=>Math.max(S,T.pressure),.5);return t.forEach(S=>{S.pressure=x,S.radius=n*a(.5-r*(.5-S.pressure))}),t}else{let x;for(let S=0,T=t.length;S<T&&(h=t[S],!(h.runningLength>n*5));S++){const C=Rd(1,h.distance/n);if(o){const _=Rd(1,1-C);x=Rd(1,m+(_-m)*(C*YP))}else x=Rd(1,m+(h.pressure-m)*.5);m=m+(x-m)*.5}for(let S=0;S<t.length;S++){if(h=t[S],r){let{pressure:T}=h;const C=Rd(1,h.distance/n);if(o){const _=Rd(1,1-C);T=Rd(1,m+(_-m)*(C*YP))}else T=Rd(1,m+(T-m)*(C*YP));h.radius=n*a(.5-r*(.5-T)),m=T}else h.radius=n/2;u===void 0&&(u=h.radius)}}const y=s.taper===!1?0:s.taper===!0?Math.max(n,d):s.taper,v=i.taper===!1?0:i.taper===!0?Math.max(n,d):i.taper;if(y||v)for(let x=0;x<t.length;x++){h=t[x];const{runningLength:S}=h,T=S<y?l(S/y):1,C=d-S<v?c((d-S)/v):1;h.radius=Math.max(.01,h.radius*Math.min(T,C))}return t}function WVe(t,e={}){return Mse(GL(bp(t,e),e),e)}function xH({scribble:t,zoom:e,color:n,opacity:r,className:o}){if(!t.points.length)return null;const a=WVe(t.points,{size:t.size/e,start:{taper:t.taper,easing:Ja.linear},last:t.state==="stopping",simulatePressure:!1,streamline:.32});let s;if(a.length<4){const i=t.size/e/2,{x:l,y:c}=t.points[t.points.length-1];s=`M ${l-i},${c} a ${i},${i} 0 1,0 ${i*2},0 a ${i},${i} 0 1,0 ${-i*2},0`}else s=vZ(a);return g.jsx("svg",{className:o&&pt("tl-overlays__item",o),children:g.jsx("path",{className:"tl-scribble",d:s,fill:n??`var(--tl-color-${t.color})`,opacity:r??t.opacity})})}const YVe=Co(function({bounds:e,rotation:n}){const r=ue(),o=it(),a=w.useRef(null),s=Qi(),i=kc("top"),l=kc("right"),c=kc("bottom"),d=kc("left"),u=kc("top_left"),m=kc("top_right"),h=kc("bottom_right"),y=kc("bottom_left"),v=r.getInstanceState().cursor.type==="default",x=r.getInstanceState().isCoarsePointer,S=r.getOnlySelectedShape(),T=S&&r.isShapeOrAncestorLocked(S),C=S?r.getShapeUtil(S).expandSelectionOutlinePx(S):0,_=C instanceof Be?e.clone().expand(C).zeroFix():e.clone().expandBy(C).zeroFix();if(cv(a,e==null?void 0:e.x,e==null?void 0:e.y,1,r.getSelectionRotation(),{x:_.x-e.x,y:_.y-e.y}),S&&r.isShapeHidden(S))return null;const I=r.getZoomLevel(),P=r.getInstanceState().isChangingStyle,M=_.width,D=_.height,F=8/I,B=M<F*2,V=D<F*2,z=M<F*4,H=D<F*4,j=M<F*5,q=D<F*5,U=x?1.75:1,Y=6/I*U,X=(z?Y/2:Y)*(U*.75),ee=(H?Y/2:Y)*(U*.75),$=(S?!r.getShapeUtil(S).hideSelectionBoundsFg(S):!0)&&!P;let G=$&&r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle","select.pointing_resize_handle")||$&&r.isIn("select.resizing")&&S&&r.isShapeOfType(S,"text");S&&G&&Nn.isFirefox&&r.isShapeOfType(S,"embed")&&(G=!1);const re=r.isInAny("select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle")&&!P&&!s,K=r.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!P&&!s,ve=!x&&!(B||V)&&(K||re)&&(S?!r.getShapeUtil(S).hideRotateHandle(S):!0)&&!T,xe=x&&(!z||!H)&&(K||re)&&(S?!r.getShapeUtil(S).hideRotateHandle(S):!0)&&!T,Oe=K&&(S?r.getShapeUtil(S).canResize(S)&&!r.getShapeUtil(S).hideResizeHandles(S):!0)&&!re&&!T,Ne=B||V,Fe=B&&V,Ke=j||q,Qe=Oe||re,Wt=!ve,hn=!K||!xe,Yt=!K||!Qe,Ut=!K||!Qe||Ne,an=!K||!Qe||Ne,wt=!K||!Qe||Fe&&!re;let qn=!0,Gn=!0;if(re)qn=Ke,Gn=Ke;else if(Oe){qn=Ne||Fe||x;const ko=x&&S&&S.type==="text";Gn=qn&&!ko}const Wn=Math.min(24/I,D-ee*3),Yr=K&&x&&S&&r.isShapeOfType(S,"text")&&Wn*I>=4;return g.jsx("svg",{className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground","aria-hidden":"true",children:g.jsxs("g",{ref:a,children:[G&&g.jsx("rect",{className:"tl-selection__fg__outline",width:ie(M),height:ie(D)}),g.jsx(YS,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:Y,corner:"top_left_rotate",cursor:v?Ri("nwse-rotate",n):void 0,isHidden:Wt}),g.jsx(YS,{"data-testid":"selection.rotate.top-right",cx:M+Y*3,cy:0,targetSize:Y,corner:"top_right_rotate",cursor:v?Ri("nesw-rotate",n):void 0,isHidden:Wt}),g.jsx(YS,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:D+Y*3,targetSize:Y,corner:"bottom_left_rotate",cursor:v?Ri("swne-rotate",n):void 0,isHidden:Wt}),g.jsx(YS,{"data-testid":"selection.rotate.bottom-right",cx:M+Y*3,cy:D+Y*3,targetSize:Y,corner:"bottom_right_rotate",cursor:v?Ri("senw-rotate",n):void 0,isHidden:Wt}),g.jsx(JVe,{"data-testid":"selection.rotate.mobile",cx:z?-Y*1.5:M/2,cy:z?D/2:-Y*1.5,size:F,isHidden:hn}),g.jsx(Dd,{hide:qn,dataTestId:"selection.resize.top",ariaLabel:o("handle.resize-top"),x:0,y:ie(0-(H?ee*2:ee)),width:ie(M),height:ie(Math.max(1,ee*2)),cursor:v?Ri("ns-resize",n):void 0,events:i}),g.jsx(Dd,{hide:Gn,dataTestId:"selection.resize.right",ariaLabel:o("handle.resize-right"),x:ie(M-(z?0:X)),y:0,height:ie(D),width:ie(Math.max(1,X*2)),cursor:v?Ri("ew-resize",n):void 0,events:l}),g.jsx(Dd,{hide:qn,dataTestId:"selection.resize.bottom",ariaLabel:o("handle.resize-bottom"),x:0,y:ie(D-(H?0:ee)),width:ie(M),height:ie(Math.max(1,ee*2)),cursor:v?Ri("ns-resize",n):void 0,events:c}),g.jsx(Dd,{hide:Gn,dataTestId:"selection.resize.left",ariaLabel:o("handle.resize-left"),x:ie(0-(z?X*2:X)),y:0,height:ie(D),width:ie(Math.max(1,X*2)),cursor:v?Ri("ew-resize",n):void 0,events:d}),g.jsx(Dd,{hide:Yt,dataTestId:"selection.target.top-left",ariaLabel:o("handle.resize-top-left"),x:ie(0-(z?X*2:X*1.5)),y:ie(0-(H?ee*2:ee*1.5)),width:ie(X*3),height:ie(ee*3),cursor:v?Ri("nwse-resize",n):void 0,events:u}),g.jsx(Dd,{hide:Ut,dataTestId:"selection.target.top-right",ariaLabel:o("handle.resize-top-right"),x:ie(M-(z?0:X*1.5)),y:ie(0-(H?ee*2:ee*1.5)),width:ie(X*3),height:ie(ee*3),cursor:v?Ri("nesw-resize",n):void 0,events:m}),g.jsx(Dd,{hide:wt,dataTestId:"selection.target.bottom-right",ariaLabel:o("handle.resize-bottom-right"),x:ie(M-(z?X:X*1.5)),y:ie(D-(H?ee:ee*1.5)),width:ie(X*3),height:ie(ee*3),cursor:v?Ri("nwse-resize",n):void 0,events:h}),g.jsx(Dd,{hide:an,dataTestId:"selection.target.bottom-left",ariaLabel:o("handle.resize-bottom-left"),x:ie(0-(z?X*3:X*1.5)),y:ie(D-(H?0:ee*1.5)),width:ie(X*3),height:ie(ee*3),cursor:v?Ri("nesw-resize",n):void 0,events:y}),Oe&&g.jsxs(g.Fragment,{children:[g.jsx("rect",{"data-testid":"selection.resize.top-left",className:pt("tl-corner-handle",{"tl-hidden":Yt}),x:ie(0-F/2),y:ie(0-F/2),width:ie(F),height:ie(F)}),g.jsx("rect",{"data-testid":"selection.resize.top-right",className:pt("tl-corner-handle",{"tl-hidden":Ut}),x:ie(M-F/2),y:ie(0-F/2),width:ie(F),height:ie(F)}),g.jsx("rect",{"data-testid":"selection.resize.bottom-right",className:pt("tl-corner-handle",{"tl-hidden":wt}),x:ie(M-F/2),y:ie(D-F/2),width:ie(F),height:ie(F)}),g.jsx("rect",{"data-testid":"selection.resize.bottom-left",className:pt("tl-corner-handle",{"tl-hidden":an}),x:ie(0-F/2),y:ie(D-F/2),width:ie(F),height:ie(F)})]}),Yr&&g.jsxs(g.Fragment,{children:[g.jsx("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle",x:ie(0-F/4),y:ie(D/2-Wn/2),rx:F/4,width:ie(F/2),height:ie(Wn)}),g.jsx("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle",rx:F/4,x:ie(M-F/4),y:ie(D/2-Wn/2),width:ie(F/2),height:ie(Wn)})]}),re&&g.jsx(BVe,{size:F,width:M,height:D,hideAlternateHandles:Ke})]})})}),Dd=function({hide:e,dataTestId:n,ariaLabel:r,x:o,y:a,width:s,height:i,cursor:l,events:c}){return g.jsx("rect",{className:pt("tl-resize-handle","tl-transparent",{"tl-hidden":e}),"data-testid":n,role:"button","aria-label":r,pointerEvents:"all",x:o,y:a,width:s,height:i,cursor:l,...c})},YS=function({cx:e,cy:n,targetSize:r,corner:o,cursor:a,isHidden:s,"data-testid":i}){const l=kc(o),d=it()(`handle.rotate.${o}`);return g.jsx("rect",{className:pt("tl-transparent","tl-rotate-corner",{"tl-hidden":s}),"data-testid":i,role:"button","aria-label":d,pointerEvents:"all",x:ie(e-r*3),y:ie(n-r*3),width:ie(Math.max(1,r*3)),height:ie(Math.max(1,r*3)),cursor:a,...l})},XVe=Math.sqrt(Math.PI),JVe=function({cx:e,cy:n,size:r,isHidden:o,"data-testid":a}){const s=kc("mobile_rotate"),i=ue(),l=ce("zoom level",()=>i.getZoomLevel(),[i]),c=Math.max(14*(1/l),20/Math.max(1,l)),d=it();return g.jsxs("g",{role:"button","aria-label":d("handle.rotate.mobile_rotate"),children:[g.jsx("circle",{"data-testid":a,pointerEvents:"all",className:pt("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":o}),cx:e,cy:n,r:c,...s}),g.jsx("circle",{className:pt("tl-mobile-rotate__fg",{"tl-hidden":o}),cx:e,cy:n,r:r/XVe})]})};function QVe(){const t=ue(),e=ce("is in a valid select state",()=>t.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle"),[t]);return g.jsx(xZ,{hideAll:!e})}const Rse=[D1],_s={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},Zo={s:2,m:3.5,l:5,xl:10},ag={s:18,m:24,l:36,xl:44},cp={s:18,m:22,l:26,xl:32},ZVe={s:18,m:20,l:24,xl:28},yp={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"},eGe=20,wR=4.25,xs=16;function tGe(t,e){const n=t.w/e.w,r=t.h/e.h;return n<=1&&r<=1?t:n>r?{w:t.w/n,h:t.h/n}:{w:t.w/r,h:t.h/r}}async function nGe(t,e,n){var S,T,C;const{elements:r,files:o}=e,a={shapes:[],bindings:[],rootShapeIds:[],assets:[],schema:t.store.schema.serialize()},s=new Map,i=new Map,l=t.getCurrentPageId(),c=new Map,d=[],u=new Set;r.forEach(_=>{if(c.set(_.id,lr()),_.boundElements!==null)for(const I of _.boundElements)I.type==="text"&&u.add(I.id)});let m=zD;for(const _ of r){if(u.has(_.id))continue;const I=c.get(_.id),P={id:I,typeName:"shape",parentId:l,index:m,x:_.x,y:_.y,rotation:0,isLocked:_.locked,opacity:rGe(_.opacity),meta:{}};switch(_.angle!==0&&i.set(I,_.angle),_.groupIds&&_.groupIds.length>0?s.has(_.groupIds[0])?(S=s.get(_.groupIds[0]))==null||S.push(I):s.set(_.groupIds[0],[I]):d.push(I),_.type){case"rectangle":case"ellipse":case"diamond":{let M="",D="middle";if(_.boundElements!==null){for(const B of _.boundElements)if(B.type==="text"){const V=r.find(z=>z.id===B.id);V&&(M=V.text,D=uGe[V.textAlign])}}const F=_.backgroundColor==="transparent"?_.strokeColor:_.backgroundColor;a.shapes.push({...P,type:"geo",props:{geo:_.type,url:_.link??"",w:_.width,h:_.height,size:XS[_.strokeWidth]??"draw",color:Jb[F]??"black",richText:Ma(M),align:D,dash:JS(_),fill:fGe(_)}});break}case"freedraw":{a.shapes.push({...P,type:"draw",props:{dash:JS(_),size:XS[_.strokeWidth],color:Jb[_.strokeColor]??"black",segments:[{type:"free",points:_.points.map(([M,D,F=.5])=>({x:M,y:D,z:F}))}]}});break}case"line":{if(_.points.slice().length<2)break;const D=d0(_.points.length);a.shapes.push({...P,type:"line",props:{dash:JS(_),size:XS[_.strokeWidth],color:Jb[_.strokeColor]??"black",spline:_.roundness?"cubic":"line",points:{...Object.fromEntries(_.points.map(([F,B],V)=>{const z=D[V];return[z,{id:z,index:z,x:F,y:B}]}))}}});break}case"arrow":{let M="";if(_.boundElements!==null){for(const z of _.boundElements)if(z.type==="text"){const H=r.find(j=>j.id===z.id);H&&(M=H.text)}}const D=_.points[0],F=_.points[_.points.length-1],B=c.get((T=_.startBinding)==null?void 0:T.elementId),V=c.get((C=_.endBinding)==null?void 0:C.elementId);a.shapes.push({...P,type:"arrow",props:{richText:Ma(M),kind:_.elbowed?"elbow":"arc",bend:pGe(_,D,F),dash:JS(_),size:XS[_.strokeWidth]??"m",color:Jb[_.strokeColor]??"black",start:{x:D[0],y:D[1]},end:{x:F[0],y:F[1]},arrowheadEnd:SH[_.endArrowhead]??"none",arrowheadStart:SH[_.startArrowhead]??"none"}}),B&&a.bindings.push({id:wf(),typeName:"binding",type:"arrow",fromId:I,toId:B,props:{terminal:"start",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}}),V&&a.bindings.push({id:wf(),typeName:"binding",type:"arrow",fromId:I,toId:V,props:{terminal:"end",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}});break}case"text":{const{size:M,scale:D}=aGe(_.fontSize);a.shapes.push({...P,type:"text",props:{size:M,scale:D,font:sGe[_.fontFamily]??"draw",color:Jb[_.strokeColor]??"black",richText:Ma(_.text),textAlign:dGe[_.textAlign]}});break}case"image":{const M=o[_.fileId];if(!M)break;const D=lm.createId();a.assets.push({id:D,typeName:"asset",type:"image",props:{w:_.width,h:_.height,fileSize:M.size,name:_.id??"Untitled",isAnimated:!1,mimeType:M.mimeType,src:M.dataURL},meta:{}}),a.shapes.push({...P,type:"image",props:{w:_.width,h:_.height,assetId:D}})}}m=_l(m)}const h=n??(t.inputs.shiftKey?t.inputs.currentPagePoint:void 0);t.putContentOntoCurrentPage(a,{point:h,select:!1,preserveIds:!0});for(const _ of s.values())if(_.length>1){t.groupShapes(_);const I=t.getShape(_[0]);I!=null&&I.parentId&&bs(I.parentId)&&d.push(I.parentId)}for(const[_,I]of i)t.select(_),t.rotateShapesBy([_],I);const y=Dt(d.map(_=>t.getShape(_))),v=Be.Common(y.map(_=>t.getShapePageBounds(_))),x=t.getViewportPageBounds().center;t.updateShapes(y.map(_=>{const I={x:(_.x??0)-(v.x+v.w/2),y:(_.y??0)-(v.y+v.h/2)};return{id:_.id,type:_.type,x:x.x+I.x,y:x.y+I.y}})),t.setSelectedShapes(d)}const rGe=t=>{const e=t/100;return e<.2?.1:e<.4?.25:e<.6?.5:e<.8?.75:1},XS={1:"s",2:"m",3:"l",4:"xl"},oGe={16:"s",20:"m",28:"l",36:"xl"};function aGe(t){const e=oGe[t];return e?{size:e,scale:1}:t<16?{size:"s",scale:t/16}:t>36?{size:"xl",scale:t/36}:{size:"m",scale:1}}const sGe={1:"draw",2:"sans",3:"mono"},iGe={gray:["#f8f9fa","#e9ecef","#ced4da","#868e96","#343a40"],red:["#fff5f5","#ffc9c9","#ff8787","#fa5252","#e03131"],pink:["#fff0f6","#fcc2d7","#f783ac","#e64980","#c2255c"],grape:["#f8f0fc","#eebefa","#da77f2","#be4bdb","#9c36b5"],violet:["#f3f0ff","#d0bfff","#9775fa","#7950f2","#6741d9"],indigo:["#edf2ff","#bac8ff","#748ffc","#4c6ef5","#3b5bdb"],blue:["#e7f5ff","#a5d8ff","#4dabf7","#228be6","#1971c2"],cyan:["#e3fafc","#99e9f2","#3bc9db","#15aabf","#0c8599"],teal:["#e6fcf5","#96f2d7","#38d9a9","#12b886","#099268"],green:["#ebfbee","#b2f2bb","#69db7c","#40c057","#2f9e44"],lime:["#f4fce3","#d8f5a2","#a9e34b","#82c91e","#66a80f"],yellow:["#fff9db","#ffec99","#ffd43b","#fab005","#f08c00"],orange:["#fff4e6","#ffd8a8","#ffa94d","#fd7e14","#e8590c"]};function Tc(t,e,n){const r=[0,1,2,3,4].map(o=>iGe[t][o]);return Object.fromEntries(r.map((o,a)=>[o,a<3?e:n]))}const Jb={...Tc("gray","grey","black"),...Tc("red","light-red","red"),...Tc("pink","light-red","red"),...Tc("grape","light-violet","violet"),...Tc("blue","light-blue","blue"),...Tc("cyan","light-blue","blue"),...Tc("teal","light-green","green"),...Tc("green","light-green","green"),...Tc("yellow","yellow","orange"),...Tc("orange","yellow","orange"),"#ffffff":"white","#000000":"black"},lGe={solid:"draw",dashed:"dashed",dotted:"dotted"},cGe={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},uGe={left:"start",center:"middle",right:"end"},dGe={left:"start",center:"middle",right:"end"},SH={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function pGe(t,e,n){let r=0;if(t.points.length>2){const o=new R(e[0],e[1]),a=new R(n[0],n[1]),s=new R(t.points[1][0],t.points[1][1]),i=R.Sub(a,o),l=R.Per(i),c=R.Med(a,o),d=R.Sub(c,l),u=R.Add(c,l),m=R.NearestPointOnLineSegment(d,u,s,!1);r=R.Dist(m,c),R.Clockwise(m,a,c)&&(r*=-1)}return r}const JS=t=>{let e=lGe[t.strokeStyle]??"draw";return e==="draw"&&t.roughness===0&&(e="solid"),e},fGe=t=>t.backgroundColor==="transparent"?"none":cGe[t.fillStyle]??"solid";var mGe=Object.defineProperty,KL=(t,e)=>{for(var n in e)mGe(t,n,{get:e[n],enumerable:!0})};function HC(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:a}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,a=n.storedMarks,n}}}var $C=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:o}=n,a=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([s,i])=>[s,(...c)=>{const d=i(...c)(a);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:a}=r,s=[],i=!!t,l=t||o.tr,c=()=>(!i&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(l),s.every(u=>u===!0)),d={...Object.fromEntries(Object.entries(n).map(([u,m])=>[u,(...y)=>{const v=this.buildProps(l,e),x=m(...y)(v);return s.push(x),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,o=t||n.tr,a=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(e).map(([i,l])=>[i,(...c)=>l(...c)({...a,dispatch:void 0})])),chain:()=>this.createChain(o,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:a}=r,s={tr:t,editor:r,view:a,state:HC({state:o,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([i,l])=>[i,(...c)=>l(...c)(s)]))}};return s}},Dse={};KL(Dse,{blur:()=>hGe,clearContent:()=>gGe,clearNodes:()=>bGe,command:()=>yGe,createParagraphNear:()=>vGe,cut:()=>xGe,deleteCurrentNode:()=>SGe,deleteNode:()=>EGe,deleteRange:()=>TGe,deleteSelection:()=>wGe,enter:()=>CGe,exitCode:()=>AGe,extendMarkRange:()=>_Ge,first:()=>kGe,focus:()=>PGe,forEach:()=>OGe,insertContent:()=>MGe,insertContentAt:()=>NGe,joinBackward:()=>BGe,joinDown:()=>jGe,joinForward:()=>FGe,joinItemBackward:()=>zGe,joinItemForward:()=>UGe,joinTextblockBackward:()=>qGe,joinTextblockForward:()=>HGe,joinUp:()=>LGe,keyboardShortcut:()=>VGe,lift:()=>GGe,liftEmptyBlock:()=>KGe,liftListItem:()=>WGe,newlineInCode:()=>YGe,resetAttributes:()=>XGe,scrollIntoView:()=>JGe,selectAll:()=>QGe,selectNodeBackward:()=>ZGe,selectNodeForward:()=>eKe,selectParentNode:()=>tKe,selectTextblockEnd:()=>nKe,selectTextblockStart:()=>rKe,setContent:()=>oKe,setMark:()=>EKe,setMeta:()=>TKe,setNode:()=>wKe,setNodeSelection:()=>CKe,setTextDirection:()=>AKe,setTextSelection:()=>_Ke,sinkListItem:()=>kKe,splitBlock:()=>IKe,splitListItem:()=>PKe,toggleList:()=>OKe,toggleMark:()=>MKe,toggleNode:()=>RKe,toggleWrap:()=>DKe,undoInputRule:()=>NKe,unsetAllMarks:()=>LKe,unsetMark:()=>jKe,unsetTextDirection:()=>BKe,updateAttributes:()=>FKe,wrapIn:()=>zKe,wrapInList:()=>UKe});var hGe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),gGe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),bGe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:a,$to:s})=>{t.doc.nodesBetween(a.pos,s.pos,(i,l)=>{if(i.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),m=c.resolve(d.map(l+i.nodeSize)),h=u.blockRange(m);if(!h)return;const y=Dp(h);if(i.type.isTextblock){const{defaultType:v}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,v)}(y||y===0)&&e.lift(h,y)})}),!0},yGe=t=>e=>t(e),vGe=()=>({state:t,dispatch:e})=>tC(t,e),xGe=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,a=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,a.content),r.setSelection(new ft(r.doc.resolve(Math.max(s-1,0)))),!0},SGe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===r.type){if(e){const i=o.before(a),l=o.after(a);t.delete(i,l).scrollIntoView()}return!0}return!1};function Go(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var EGe=t=>({tr:e,state:n,dispatch:r})=>{const o=Go(t,n.schema),a=e.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===o){if(r){const l=a.before(s),c=a.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},TGe=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},wGe=()=>({state:t,dispatch:e})=>Av(t,e),CGe=()=>({commands:t})=>t.keyboardShortcut("Enter"),AGe=()=>({state:t,dispatch:e})=>g3(t,e);function WL(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function mT(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:WL(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function Nse(t,e,n={}){return t.find(r=>r.type===e&&mT(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function EH(t,e,n={}){return!!Nse(t,e,n)}function YL(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])==null?void 0:r.attrs),!Nse([...o.node.marks],e,n)))return;let s=o.index,i=t.start()+o.offset,l=s+1,c=i+o.node.nodeSize;for(;s>0&&EH([...t.parent.child(s-1).marks],e,n);)s-=1,i-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&EH([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:i,to:c}}function od(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var _Ge=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const a=od(t,r.schema),{doc:s,selection:i}=n,{$from:l,from:c,to:d}=i;if(o){const u=YL(l,a,e);if(u&&u.from<=c&&u.to>=d){const m=ft.create(s,u.from,u.to);n.setSelection(m)}}return!0},kGe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Lse(t){return t instanceof ft}function yf(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function jse(t,e=null){if(!e)return null;const n=Mt.atStart(t),r=Mt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,a=r.to;return e==="all"?ft.create(t,yf(0,o,a),yf(t.content.size,o,a)):ft.create(t,yf(e,o,a),yf(e,o,a))}function IGe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function XL(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var PGe=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:a})=>{e={scrollIntoView:!0,...e};const s=()=>{(XL()||IGe())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(a&&t===null&&!Lse(n.state.selection))return s(),!0;const i=jse(o.doc,t)||n.state.selection,l=n.state.selection.eq(i);return a&&(l||o.setSelection(i),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},OGe=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),MGe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Bse=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Bse(r)}return t};function QS(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Bse(n)}function j0(t,e,n){if(t instanceof Hi||t instanceof Le)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Le.fromArray(t.map(i=>e.nodeFromJSON(i)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(a){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),j0("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,i="";const l=new Mg({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,i=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Pl.fromSchema(l).parseSlice(QS(t),n.parseOptions):Pl.fromSchema(l).parse(QS(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${i}`)})}const a=Pl.fromSchema(e);return n.slice?a.parseSlice(QS(t),n.parseOptions).content:a.parse(QS(t),n.parseOptions)}return j0("",e,n)}function RGe(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof Ho||o instanceof Vo))return;const a=t.mapping.maps[r];let s=0;a.forEach((i,l,c,d)=>{s===0&&(s=d)}),t.setSelection(Mt.near(t.doc.resolve(s),n))}var DGe=t=>!("type"in t),NGe=(t,e,n)=>({tr:r,dispatch:o,editor:a})=>{var s;if(o){n={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let i;const l=x=>{a.emit("contentError",{editor:a,error:x,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{j0(e,a.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{i=j0(e,a.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(x){return l(x),!1}let{from:d,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,h=!0;if((DGe(i)?i:[i]).forEach(x=>{x.check(),m=m?x.isText&&x.marks.length===0:!1,h=h?x.isBlock:!1}),d===u&&h){const{parent:x}=r.doc.resolve(d);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(d-=1,u+=1)}let v;if(m){if(Array.isArray(e))v=e.map(x=>x.text||"").join("");else if(e instanceof Le){let x="";e.forEach(S=>{S.text&&(x+=S.text)}),v=x}else typeof e=="object"&&e&&e.text?v=e.text:v=e;r.insertText(v,d,u)}else{v=i;const x=r.doc.resolve(d),S=x.node(),T=x.parentOffset===0,C=S.isText||S.isTextblock,_=S.content.size>0;T&&C&&_&&(d=Math.max(0,d-1)),r.replaceWith(d,u,v)}n.updateSelection&&RGe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:v})}return!0},LGe=()=>({state:t,dispatch:e})=>p3(t,e),jGe=()=>({state:t,dispatch:e})=>f3(t,e),BGe=()=>({state:t,dispatch:e})=>Xw(t,e),FGe=()=>({state:t,dispatch:e})=>Qw(t,e),zGe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Np(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},UGe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Np(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},qGe=()=>({state:t,dispatch:e})=>l3(t,e),HGe=()=>({state:t,dispatch:e})=>c3(t,e);function Fse(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function $Ge(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,a,s;for(let i=0;i<e.length-1;i+=1){const l=e[i];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))XL()||Fse()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}var VGe=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const a=$Ge(t).split(/-(?!$)/),s=a.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),i=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,i))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0};function vp(t,e,n={}){const{from:r,to:o,empty:a}=t.selection,s=e?Go(e,t.schema):null,i=[];t.doc.nodesBetween(r,o,(u,m)=>{if(u.isText)return;const h=Math.max(r,m),y=Math.min(o,m+u.nodeSize);i.push({node:u,from:h,to:y})});const l=o-r,c=i.filter(u=>s?s.name===u.node.type.name:!0).filter(u=>mT(u.node.attrs,n,{strict:!1}));return a?!!c.length:c.reduce((u,m)=>u+m.to-m.from,0)>=l}var GGe=(t,e={})=>({state:n,dispatch:r})=>{const o=Go(t,n.schema);return vp(n,o,e)?m3(n,r):!1},KGe=()=>({state:t,dispatch:e})=>nC(t,e),WGe=t=>({state:e,dispatch:n})=>{const r=Go(t,e.schema);return T3(r)(e,n)},YGe=()=>({state:t,dispatch:e})=>eC(t,e);function VC(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function TH(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}var XGe=(t,e)=>({tr:n,state:r,dispatch:o})=>{let a=null,s=null;const i=VC(typeof t=="string"?t:t.name,r.schema);if(!i)return!1;i==="node"&&(a=Go(t,r.schema)),i==="mark"&&(s=od(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,u)=>{a&&a===d.type&&(l=!0,o&&n.setNodeMarkup(u,void 0,TH(d.attrs,e))),s&&d.marks.length&&d.marks.forEach(m=>{s===m.type&&(l=!0,o&&n.addMark(u,u+d.nodeSize,s.create(TH(m.attrs,e))))})})}),l},JGe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),QGe=()=>({tr:t,dispatch:e})=>{if(e){const n=new As(t.doc);t.setSelection(n)}return!0},ZGe=()=>({state:t,dispatch:e})=>Jw(t,e),eKe=()=>({state:t,dispatch:e})=>Zw(t,e),tKe=()=>({state:t,dispatch:e})=>b3(t,e),nKe=()=>({state:t,dispatch:e})=>v3(t,e),rKe=()=>({state:t,dispatch:e})=>y3(t,e);function CR(t,e,n={},r={}){return j0(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var oKe=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:o,tr:a,dispatch:s,commands:i})=>{const{doc:l}=a;if(r.preserveWhitespace!=="full"){const c=CR(t,o.schema,r,{errorOnInvalidContent:e??o.options.enableContentCheck});return s&&a.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return s&&a.setMeta("preventUpdate",!n),i.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??o.options.enableContentCheck})};function zse(t,e){const n=od(e,t.schema),{from:r,to:o,empty:a}=t.selection,s=[];a?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const i=s.find(l=>l.type.name===n.name);return i?{...i.attrs}:{}}function Use(t,e){const n=new Vw(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function aKe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function sKe(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,a)=>{n(o)&&r.push({node:o,pos:a})}),r}function iKe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function GC(t){return e=>iKe(e.$from,t)}function At(t,e,n){return t.config[e]===void 0&&t.parent?At(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?At(t.parent,e,n):null}):t.config[e]}function JL(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=At(e,"addExtensions",n);return r?[e,...JL(r())]:e}).flat(10)}function QL(t,e){const n=Rp.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function qse(t){return typeof t=="function"}function Zn(t,e=void 0,...n){return qse(t)?e?t.bind(e)(...n):t(...n):t}function lKe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function sg(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Hse(t){const e=[],{nodeExtensions:n,markExtensions:r}=sg(t),o=[...n,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const i={name:s.name,options:s.options,storage:s.storage,extensions:o},l=At(s,"addGlobalAttributes",i);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([m,h])=>{e.push({type:u,name:m,attribute:{...a,...h}})})})})}),o.forEach(s=>{const i={name:s.name,options:s.options,storage:s.storage},l=At(s,"addAttributes",i);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const m={...a,...u};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,e.push({type:s.name,name:d,attribute:m})})}),e}function To(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,a])=>{if(!r[o]){r[o]=a;return}if(o==="class"){const i=a?String(a).split(" "):[],l=r[o]?r[o].split(" "):[],c=i.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const i=a?a.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,m]=d.split(":").map(h=>h.trim());c.set(u,m)}),i.forEach(d=>{const[u,m]=d.split(":").map(h=>h.trim());c.set(u,m)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=a}),r},{})}function hT(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>To(n,r),{})}function cKe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function wH(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((a,s)=>{const i=s.attribute.parseHTML?s.attribute.parseHTML(n):cKe(n.getAttribute(s.name));return i==null?a:{...a,[s.name]:i}},{});return{...r,...o}}}}function CH(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&lKe(n)?!1:n!=null))}function AH(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function uKe(t,e){var n;const r=Hse(t),{nodeExtensions:o,markExtensions:a}=sg(t),s=(n=o.find(c=>At(c,"topNode")))==null?void 0:n.name,i=Object.fromEntries(o.map(c=>{const d=r.filter(S=>S.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},m=t.reduce((S,T)=>{const C=At(T,"extendNodeSchema",u);return{...S,...C?C(c):{}}},{}),h=CH({...m,content:Zn(At(c,"content",u)),marks:Zn(At(c,"marks",u)),group:Zn(At(c,"group",u)),inline:Zn(At(c,"inline",u)),atom:Zn(At(c,"atom",u)),selectable:Zn(At(c,"selectable",u)),draggable:Zn(At(c,"draggable",u)),code:Zn(At(c,"code",u)),whitespace:Zn(At(c,"whitespace",u)),linebreakReplacement:Zn(At(c,"linebreakReplacement",u)),defining:Zn(At(c,"defining",u)),isolating:Zn(At(c,"isolating",u)),attrs:Object.fromEntries(d.map(AH))}),y=Zn(At(c,"parseHTML",u));y&&(h.parseDOM=y.map(S=>wH(S,d)));const v=At(c,"renderHTML",u);v&&(h.toDOM=S=>v({node:S,HTMLAttributes:hT(S,d)}));const x=At(c,"renderText",u);return x&&(h.toText=x),[c.name,h]})),l=Object.fromEntries(a.map(c=>{const d=r.filter(x=>x.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},m=t.reduce((x,S)=>{const T=At(S,"extendMarkSchema",u);return{...x,...T?T(c):{}}},{}),h=CH({...m,inclusive:Zn(At(c,"inclusive",u)),excludes:Zn(At(c,"excludes",u)),group:Zn(At(c,"group",u)),spanning:Zn(At(c,"spanning",u)),code:Zn(At(c,"code",u)),attrs:Object.fromEntries(d.map(AH))}),y=Zn(At(c,"parseHTML",u));y&&(h.parseDOM=y.map(x=>wH(x,d)));const v=At(c,"renderHTML",u);return v&&(h.toDOM=x=>v({mark:x,HTMLAttributes:hT(x,d)})),[c.name,h]}));return new Mg({topNode:s,nodes:i,marks:l})}function dKe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function ZL(t){return t.sort((n,r)=>{const o=At(n,"priority")||100,a=At(r,"priority")||100;return o>a?-1:o<a?1:0})}function $se(t){const e=ZL(JL(t)),n=dKe(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function Vse(t,e,n){const{from:r,to:o}=e,{blockSeparator:a=`

`,textSerializers:s={}}=n||{};let i="";return t.nodesBetween(r,o,(l,c,d,u)=>{var m;l.isBlock&&c>r&&(i+=a);const h=s==null?void 0:s[l.type.name];if(h)return d&&(i+=h({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(i+=(m=l==null?void 0:l.text)==null?void 0:m.slice(Math.max(r,c)-c,o-c))}),i}function pKe(t,e){const n={from:0,to:t.content.size};return Vse(t,n,e)}function Gse(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function fKe(t,e){const n=Go(e,t.schema),{from:r,to:o}=t.selection,a=[];t.doc.nodesBetween(r,o,i=>{a.push(i)});const s=a.reverse().find(i=>i.type.name===n.name);return s?{...s.attrs}:{}}function Kse(t,e){const n=VC(typeof e=="string"?e:e.name,t.schema);return n==="node"?fKe(t,e):n==="mark"?zse(t,e):{}}function mKe(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function hKe(t){const e=mKe(t);return e.length===1?e:e.filter((n,r)=>!e.filter((a,s)=>s!==r).some(a=>n.oldRange.from>=a.oldRange.from&&n.oldRange.to<=a.oldRange.to&&n.newRange.from>=a.newRange.from&&n.newRange.to<=a.newRange.to))}function Wse(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,a)=>{const s=[];if(o.ranges.length)o.forEach((i,l)=>{s.push({from:i,to:l})});else{const{from:i,to:l}=n[a];if(i===void 0||l===void 0)return;s.push({from:i,to:l})}s.forEach(({from:i,to:l})=>{const c=e.slice(a).map(i,-1),d=e.slice(a).map(l),u=e.invert().map(c,-1),m=e.invert().map(d);r.push({oldRange:{from:u,to:m},newRange:{from:c,to:d}})})}),hKe(r)}function ej(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const a=n.resolve(t),s=YL(a,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,a)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(s=>({from:a,to:a+o.nodeSize,mark:s})))}),r}var gKe=(t,e,n,r=20)=>{const o=t.doc.resolve(n);let a=r,s=null;for(;a>0&&s===null;){const i=o.node(a);(i==null?void 0:i.type.name)===e?s=i:a-=1}return[s,a]};function XP(t,e){return e.nodes[t]||e.marks[t]||null}function N1(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(a=>a.type===e&&a.name===r);return o?o.attribute.keepOnSplit:!1}))}var bKe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,a,s,i)=>{var l,c;const d=((c=(l=o.type.spec).toText)==null?void 0:c.call(l,{node:o,pos:a,parent:s,index:i}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-a))}),n};function AR(t,e,n={}){const{empty:r,ranges:o}=t.selection,a=e?od(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>a?a.name===u.type.name:!0).find(u=>mT(u.attrs,n,{strict:!1}));let s=0;const i=[];if(o.forEach(({$from:u,$to:m})=>{const h=u.pos,y=m.pos;t.doc.nodesBetween(h,y,(v,x)=>{if(!v.isText&&!v.marks.length)return;const S=Math.max(h,x),T=Math.min(y,x+v.nodeSize),C=T-S;s+=C,i.push(...v.marks.map(_=>({mark:_,from:S,to:T})))})}),s===0)return!1;const l=i.filter(u=>a?a.name===u.mark.type.name:!0).filter(u=>mT(u.mark.attrs,n,{strict:!1})).reduce((u,m)=>u+m.to-m.from,0),c=i.filter(u=>a?u.mark.type!==a&&u.mark.type.excludes(a):!0).reduce((u,m)=>u+m.to-m.from,0);return(l>0?l+c:l)>=s}function yKe(t,e,n={}){if(!e)return vp(t,null,n)||AR(t,null,n);const r=VC(e,t.schema);return r==="node"?vp(t,e,n):r==="mark"?AR(t,e,n):!1}var vKe=(t,e)=>{const{$from:n,$to:r,$anchor:o}=t.selection;if(e){const a=GC(i=>i.type.name===e)(t.selection);if(!a)return!1;const s=t.doc.resolve(a.pos+1);return o.pos+1===s.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},xKe=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function _H(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function kH(t,e){const{nodeExtensions:n}=sg(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},a=Zn(At(r,"group",o));return typeof a!="string"?!1:a.split(" ").includes("list")}function KC(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(a=>{o!==!1&&(KC(a,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function Yse(t){return t instanceof Tt}function SKe(t,e,n){var r;const{selection:o}=e;let a=null;if(Lse(o)&&(a=o.$cursor),a){const i=(r=t.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(n)&&(!!n.isInSet(i)||!i.some(c=>c.type.excludes(n)))}const{ranges:s}=o;return s.some(({$from:i,$to:l})=>{let c=i.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(i.pos,l.pos,(d,u,m)=>{if(c)return!1;if(d.isInline){const h=!m||m.type.allowsMarkType(n),y=!!n.isInSet(d.marks)||!d.marks.some(v=>v.type.excludes(n));c=h&&y}return!c}),c})}var EKe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:a}=n,{empty:s,ranges:i}=a,l=od(t,r.schema);if(o)if(s){const c=zse(r,l);n.addStoredMark(l.create({...c,...e}))}else i.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(m,h)=>{const y=Math.max(h,d),v=Math.min(h+m.nodeSize,u);m.marks.find(S=>S.type===l)?m.marks.forEach(S=>{l===S.type&&n.addMark(y,v,l.create({...S.attrs,...e}))}):n.addMark(y,v,l.create(e))})});return SKe(r,n,l)},TKe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),wKe=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const a=Go(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),a.isTextblock?o().command(({commands:i})=>tg(a,{...s,...e})(n)?!0:i.clearNodes()).command(({state:i})=>tg(a,{...s,...e})(i,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},CKe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=yf(t,0,r.content.size),a=Tt.create(r,o);e.setSelection(a)}return!0},AKe=(t,e)=>({tr:n,state:r,dispatch:o})=>{const{selection:a}=r;let s,i;return typeof e=="number"?(s=e,i=e):e&&"from"in e&&"to"in e?(s=e.from,i=e.to):(s=a.from,i=a.to),o&&n.doc.nodesBetween(s,i,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},_Ke=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:a}=typeof t=="number"?{from:t,to:t}:t,s=ft.atStart(r).from,i=ft.atEnd(r).to,l=yf(o,s,i),c=yf(a,s,i),d=ft.create(r,l,c);e.setSelection(d)}return!0},kKe=t=>({state:e,dispatch:n})=>{const r=Go(t,e.schema);return w3(r)(e,n)};function IH(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}var IKe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:a,doc:s}=e,{$from:i,$to:l}=a,c=o.extensionManager.attributes,d=N1(c,i.node().type.name,i.node().attrs);if(a instanceof Tt&&a.node.isBlock)return!i.parentOffset||!Ra(s,i.pos)?!1:(r&&(t&&IH(n,o.extensionManager.splittableMarks),e.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,m=i.depth===0?void 0:aKe(i.node(-1).contentMatchAt(i.indexAfter(-1)));let h=u&&m?[{type:m,attrs:d}]:void 0,y=Ra(e.doc,e.mapping.map(i.pos),1,h);if(!h&&!y&&Ra(e.doc,e.mapping.map(i.pos),1,m?[{type:m}]:void 0)&&(y=!0,h=m?[{type:m,attrs:d}]:void 0),r){if(y&&(a instanceof ft&&e.deleteSelection(),e.split(e.mapping.map(i.pos),1,h),m&&!u&&!i.parentOffset&&i.parent.type!==m)){const v=e.mapping.map(i.before()),x=e.doc.resolve(v);i.node(-1).canReplaceWith(x.index(),x.index()+1,m)&&e.setNodeMarkup(e.mapping.map(i.before()),m)}t&&IH(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return y},PKe=(t,e={})=>({tr:n,state:r,dispatch:o,editor:a})=>{var s;const i=Go(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==i)return!1;const m=a.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==i||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let S=Le.empty;const T=l.index(-1)?1:l.index(-2)?2:3;for(let D=l.depth-T;D>=l.depth-3;D-=1)S=Le.from(l.node(D).copy(S));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,_={...N1(m,l.node().type.name,l.node().attrs),...e},I=((s=i.contentMatch.defaultType)==null?void 0:s.createAndFill(_))||void 0;S=S.append(Le.from(i.createAndFill(null,I)||void 0));const P=l.before(l.depth-(T-1));n.replace(P,l.after(-C),new at(S,4-T,0));let M=-1;n.doc.nodesBetween(P,n.doc.content.size,(D,F)=>{if(M>-1)return!1;D.isTextblock&&D.content.size===0&&(M=F+1)}),M>-1&&n.setSelection(ft.near(n.doc.resolve(M))),n.scrollIntoView()}return!0}const h=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,y={...N1(m,u.type.name,u.attrs),...e},v={...N1(m,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=h?[{type:i,attrs:y},{type:h,attrs:v}]:[{type:i,attrs:y}];if(!Ra(n.doc,l.pos,2))return!1;if(o){const{selection:S,storedMarks:T}=r,{splittableMarks:C}=a.extensionManager,_=T||S.$to.parentOffset&&S.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!_||!o)return!0;const I=_.filter(P=>C.includes(P.type.name));n.ensureMarks(I)}return!0},JP=(t,e)=>{const n=GC(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Ll(t.doc,n.pos)&&t.join(n.pos),!0},QP=(t,e)=>{const n=GC(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Ll(t.doc,r)&&t.join(r),!0},OKe=(t,e,n,r={})=>({editor:o,tr:a,state:s,dispatch:i,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:m}=o.extensionManager,h=Go(t,s.schema),y=Go(e,s.schema),{selection:v,storedMarks:x}=s,{$from:S,$to:T}=v,C=S.blockRange(T),_=x||v.$to.parentOffset&&v.$from.marks();if(!C)return!1;const I=GC(P=>kH(P.type.name,u))(v);if(C.depth>=1&&I&&C.depth-I.depth<=1){if(I.node.type===h)return c.liftListItem(y);if(kH(I.node.type.name,u)&&h.validContent(I.node.content)&&i)return l().command(()=>(a.setNodeMarkup(I.pos,h),!0)).command(()=>JP(a,h)).command(()=>QP(a,h)).run()}return!n||!_||!i?l().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>JP(a,h)).command(()=>QP(a,h)).run():l().command(()=>{const P=d().wrapInList(h,r),M=_.filter(D=>m.includes(D.type.name));return a.ensureMarks(M),P?!0:c.clearNodes()}).wrapInList(h,r).command(()=>JP(a,h)).command(()=>QP(a,h)).run()},MKe=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:a=!1}=n,s=od(t,r.schema);return AR(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:a}):o.setMark(s,e)},RKe=(t,e,n={})=>({state:r,commands:o})=>{const a=Go(t,r.schema),s=Go(e,r.schema),i=vp(r,a,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),i?o.setNode(s,l):o.setNode(a,{...l,...n})},DKe=(t,e={})=>({state:n,commands:r})=>{const o=Go(t,n.schema);return vp(n,o,e)?r.lift(o):r.wrapIn(o,e)},NKe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let a;if(o.spec.isInputRules&&(a=o.getState(t))){if(e){const s=t.tr,i=a.transform;for(let l=i.steps.length-1;l>=0;l-=1)s.step(i.steps[l].invert(i.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},LKe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},jKe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var a;const{extendEmptyMarkRange:s=!1}=e,{selection:i}=n,l=od(t,r.schema),{$from:c,empty:d,ranges:u}=i;if(!o)return!0;if(d&&s){let{from:m,to:h}=i;const y=(a=c.marks().find(x=>x.type===l))==null?void 0:a.attrs,v=YL(c,l,y);v&&(m=v.from,h=v.to),n.removeMark(m,h,l)}else u.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,l)});return n.removeStoredMark(l),!0},BKe=t=>({tr:e,state:n,dispatch:r})=>{const{selection:o}=n;let a,s;return typeof t=="number"?(a=t,s=t):t&&"from"in t&&"to"in t?(a=t.from,s=t.to):(a=o.from,s=o.to),r&&e.doc.nodesBetween(a,s,(i,l)=>{if(i.isText)return;const c={...i.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},FKe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let a=null,s=null;const i=VC(typeof t=="string"?t:t.name,r.schema);if(!i)return!1;i==="node"&&(a=Go(t,r.schema)),i==="mark"&&(s=od(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;let m,h,y,v;n.selection.empty?r.doc.nodesBetween(d,u,(x,S)=>{a&&a===x.type&&(l=!0,y=Math.max(S,d),v=Math.min(S+x.nodeSize,u),m=S,h=x)}):r.doc.nodesBetween(d,u,(x,S)=>{S<d&&a&&a===x.type&&(l=!0,y=Math.max(S,d),v=Math.min(S+x.nodeSize,u),m=S,h=x),S>=d&&S<=u&&(a&&a===x.type&&(l=!0,o&&n.setNodeMarkup(S,void 0,{...x.attrs,...e})),s&&x.marks.length&&x.marks.forEach(T=>{if(s===T.type&&(l=!0,o)){const C=Math.max(S,d),_=Math.min(S+x.nodeSize,u);n.addMark(C,_,s.create({...T.attrs,...e}))}}))}),h&&(m!==void 0&&o&&n.setNodeMarkup(m,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(x=>{s===x.type&&o&&n.addMark(y,v,s.create({...x.attrs,...e}))}))}),l},zKe=(t,e={})=>({state:n,dispatch:r})=>{const o=Go(t,n.schema);return x3(o,e)(n,r)},UKe=(t,e={})=>({state:n,dispatch:r})=>{const o=Go(t,n.schema);return E3(o,e)(n,r)},qKe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},WC=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},HKe=(t,e)=>{if(WL(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ZS(t){var e;const{editor:n,from:r,to:o,text:a,rules:s,plugin:i}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(m=>m.type.spec.code))return!1;let d=!1;const u=bKe(c)+a;return s.forEach(m=>{if(d)return;const h=HKe(u,m.find);if(!h)return;const y=l.state.tr,v=HC({state:l.state,transaction:y}),x={from:r-(h[0].length-a.length),to:o},{commands:S,chain:T,can:C}=new $C({editor:n,state:v});m.handler({state:v,range:x,match:h,commands:S,chain:T,can:C})===null||!y.steps.length||(m.undoable&&y.setMeta(i,{transform:y,from:r,to:o,text:a}),l.dispatch(y),d=!0)}),d}function $Ke(t){const{editor:e,rules:n}=t,r=new xn({state:{init(){return null},apply(o,a,s){const i=o.getMeta(r);if(i)return i;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=QL(Le.from(d),s.schema);const{from:u}=l,m=u+d.length;ZS({editor:e,from:u,to:m,text:d,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:a}},props:{handleTextInput(o,a,s,i){return ZS({editor:e,from:a,to:s,text:i,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:a}=o.state.selection;a&&ZS({editor:e,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,a){if(a.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?ZS({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function VKe(t){return Object.prototype.toString.call(t).slice(8,-1)}function e1(t){return VKe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Xse(t,e){const n={...t};return e1(t)&&e1(e)&&Object.keys(e).forEach(r=>{e1(e[r])&&e1(t[r])?n[r]=Xse(t[r],e[r]):n[r]=e[r]}),n}var tj=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Zn(At(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Zn(At(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Xse(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},qp=class Jse extends tj{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new Jse(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function GKe(t){return typeof t=="number"}var KKe=class{constructor(t){this.find=t.find,this.handler=t.handler}},WKe=(t,e,n)=>{if(WL(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const a=[o.text];return a.index=o.index,a.input=t,a.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(o.replaceWith)),a}):[]};function YKe(t){const{editor:e,state:n,from:r,to:o,rule:a,pasteEvent:s,dropEvent:i}=t,{commands:l,chain:c,can:d}=new $C({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,o,(h,y)=>{var v,x,S,T,C;if((x=(v=h.type)==null?void 0:v.spec)!=null&&x.code||!(h.isText||h.isTextblock||h.isInline))return;const _=(C=(T=(S=h.content)==null?void 0:S.size)!=null?T:h.nodeSize)!=null?C:0,I=Math.max(r,y),P=Math.min(o,y+_);if(I>=P)return;const M=h.isText?h.text||"":h.textBetween(I-y,P-y,void 0,"");WKe(M,a.find,s).forEach(F=>{if(F.index===void 0)return;const B=I+F.index+1,V=B+F[0].length,z={from:n.tr.mapping.map(B),to:n.tr.mapping.map(V)},H=a.handler({state:n,range:z,match:F,commands:l,chain:c,can:d,pasteEvent:s,dropEvent:i});u.push(H)})}),u.every(h=>h!==null)}var t1=null,XKe=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function JKe(t){const{editor:e,rules:n}=t;let r=null,o=!1,a=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,i;try{i=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{i=null}const l=({state:d,from:u,to:m,rule:h,pasteEvt:y})=>{const v=d.tr,x=HC({state:d,transaction:v});if(!(!YKe({editor:e,state:x,from:Math.max(u-1,0),to:m.b-1,rule:h,pasteEvent:y,dropEvent:i})||!v.steps.length)){try{i=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{i=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return n.map(d=>new xn({view(u){const m=y=>{var v;r=(v=u.dom.parentElement)!=null&&v.contains(y.target)?u.dom.parentElement:null,r&&(t1=e)},h=()=>{t1&&(t1=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(u,m)=>{if(a=r===u.dom.parentElement,i=m,!a){const h=t1;h!=null&&h.isEditable&&setTimeout(()=>{const y=h.state.selection;y&&h.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(u,m)=>{var h;const y=(h=m.clipboardData)==null?void 0:h.getData("text/html");return s=m,o=!!(y!=null&&y.includes("data-pm-slice")),!1}}},appendTransaction:(u,m,h)=>{const y=u[0],v=y.getMeta("uiEvent")==="paste"&&!o,x=y.getMeta("uiEvent")==="drop"&&!a,S=y.getMeta("applyPasteRules"),T=!!S;if(!v&&!x&&!T)return;if(T){let{text:I}=S;typeof I=="string"?I=I:I=QL(Le.from(I),h.schema);const{from:P}=S,M=P+I.length,D=XKe(I);return l({rule:d,state:h,from:P,to:{b:M},pasteEvt:D})}const C=m.doc.content.findDiffStart(h.doc.content),_=m.doc.content.findDiffEnd(h.doc.content);if(!(!GKe(C)||!_||C===_.b))return l({rule:d,state:h,from:C,to:_,pasteEvt:s})}}))}var YC=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=$se(t),this.schema=uKe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:XP(e.name,this.schema)},r=At(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return ZL([...this.extensions].reverse()).flatMap(r=>{const o={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:XP(r.name,this.schema)},a=[],s=At(r,"addKeyboardShortcuts",o);let i={};if(r.type==="mark"&&At(r,"exitable",o)&&(i.ArrowRight=()=>qp.handleExit({editor:t,mark:r})),s){const m=Object.fromEntries(Object.entries(s()).map(([h,y])=>[h,()=>y({editor:t})]));i={...i,...m}}const l=A3e(i);a.push(l);const c=At(r,"addInputRules",o);if(_H(r,t.options.enableInputRules)&&c){const m=c();if(m&&m.length){const h=$Ke({editor:t,rules:m}),y=Array.isArray(h)?h:[h];a.push(...y)}}const d=At(r,"addPasteRules",o);if(_H(r,t.options.enablePasteRules)&&d){const m=d();if(m&&m.length){const h=JKe({editor:t,rules:m});a.push(...h)}}const u=At(r,"addProseMirrorPlugins",o);if(u){const m=u();a.push(...m)}return a})}get attributes(){return Hse(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=sg(this.extensions);return Object.fromEntries(e.filter(n=>!!At(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Go(n.name,this.schema)},a=At(n,"addNodeView",o);if(!a)return[];const s=a();if(!s)return[];const i=(l,c,d,u,m)=>{const h=hT(l,r);return s({node:l,view:c,getPos:d,decorations:u,innerDecorations:m,editor:t,extension:n,HTMLAttributes:h})};return[n.name,i]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=sg(this.extensions);return Object.fromEntries(e.filter(n=>!!At(n,"addMarkView")).map(n=>{const r=this.attributes.filter(i=>i.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:od(n.name,this.schema)},a=At(n,"addMarkView",o);if(!a)return[];const s=(i,l,c)=>{const d=hT(i,r);return a()({mark:i,view:l,inline:c,editor:t,extension:n,HTMLAttributes:d,updateAttributes:u=>{dWe(i,t,u)}})};return[n.name,s]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:XP(e.name,this.schema)};e.type==="mark"&&((n=Zn(At(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const o=At(e,"onBeforeCreate",r),a=At(e,"onCreate",r),s=At(e,"onUpdate",r),i=At(e,"onSelectionUpdate",r),l=At(e,"onTransaction",r),c=At(e,"onFocus",r),d=At(e,"onBlur",r),u=At(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),a&&this.editor.on("create",a),s&&this.editor.on("update",s),i&&this.editor.on("selectionUpdate",i),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}};YC.resolve=$se;YC.sort=ZL;YC.flatten=JL;var QKe={};KL(QKe,{ClipboardTextSerializer:()=>Zse,Commands:()=>eie,Delete:()=>tie,Drop:()=>nie,Editable:()=>rie,FocusEvents:()=>aie,Keymap:()=>sie,Paste:()=>iie,Tabindex:()=>lie,TextDirection:()=>cie,focusEventsPluginKey:()=>oie});var _o=class Qse extends tj{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new Qse(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},Zse=_o.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new xn({key:new jn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:a}=o,s=Math.min(...a.map(d=>d.$from.pos)),i=Math.max(...a.map(d=>d.$to.pos)),l=Gse(n);return Vse(r,{from:s,to:i},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),eie=_o.create({name:"commands",addCommands(){return{...Dse}}}),tie=_o.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,o;const a=()=>{var s,i,l,c;if((c=(l=(i=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:i.filterTransaction)==null?void 0:l.call(i,t))!=null?c:t.getMeta("y-sync$"))return;const d=Use(t.before,[t,...e]);Wse(d).forEach(h=>{d.mapping.mapResult(h.oldRange.from).deletedAfter&&d.mapping.mapResult(h.oldRange.to).deletedBefore&&d.before.nodesBetween(h.oldRange.from,h.oldRange.to,(y,v)=>{const x=v+y.nodeSize-2,S=h.oldRange.from<=v&&x<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:v,to:x,newFrom:d.mapping.map(v),newTo:d.mapping.map(x),deletedRange:h.oldRange,newRange:h.newRange,partial:!S,editor:this.editor,transaction:t,combinedTransform:d})})});const m=d.mapping;d.steps.forEach((h,y)=>{var v,x;if(h instanceof ji){const S=m.slice(y).map(h.from,-1),T=m.slice(y).map(h.to),C=m.invert().map(S,-1),_=m.invert().map(T),I=(v=d.doc.nodeAt(S-1))==null?void 0:v.marks.some(M=>M.eq(h.mark)),P=(x=d.doc.nodeAt(T))==null?void 0:x.marks.some(M=>M.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:C,to:_},newRange:{from:S,to:T},partial:!!(P||I),editor:this.editor,transaction:t,combinedTransform:d})}})};(o=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||o?setTimeout(a,0):a()}}),nie=_o.create({name:"drop",addProseMirrorPlugins(){return[new xn({key:new jn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),rie=_o.create({name:"editable",addProseMirrorPlugins(){return[new xn({key:new jn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),oie=new jn("focusEvents"),aie=_o.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new xn({key:oie,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),sie=_o.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:i})=>{const{selection:l,doc:c}=i,{empty:d,$anchor:u}=l,{pos:m,parent:h}=u,y=u.parent.isTextblock&&m>0?i.doc.resolve(m-1):u,v=y.parent.type.spec.isolating,x=u.pos-u.parentOffset,S=v&&y.parent.childCount===1?x===u.pos:Mt.atStart(c).from===m;return!d||!h.type.isTextblock||h.textContent.length||!S||S&&u.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},a={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return XL()||Fse()?a:o},addProseMirrorPlugins(){return[new xn({key:new jn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(v=>v.getMeta("composition")))return;const r=t.some(v=>v.docChanged)&&!e.doc.eq(n.doc),o=t.some(v=>v.getMeta("preventClearDocument"));if(!r||o)return;const{empty:a,from:s,to:i}=e.selection,l=Mt.atStart(e.doc).from,c=Mt.atEnd(e.doc).to;if(a||!(s===l&&i===c)||!KC(n.doc))return;const m=n.tr,h=HC({state:n,transaction:m}),{commands:y}=new $C({editor:this.editor,state:h});if(y.clearNodes(),!!m.steps.length)return m}})]}}),iie=_o.create({name:"paste",addProseMirrorPlugins(){return[new xn({key:new jn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),lie=_o.create({name:"tabindex",addProseMirrorPlugins(){return[new xn({key:new jn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),cie=_o.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=sg(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new xn({key:new jn("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),ZKe=class vh{constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new vh(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new vh(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new vh(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,a=n.isAtom&&!n.isText,s=this.pos+r+(a?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const i=this.resolvedPos.doc.resolve(s);if(!o&&i.depth<=this.depth)return;const l=new vh(i,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new vh(i,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const a=o.node.attrs,s=Object.keys(n);for(let i=0;i<s.length;i+=1){const l=s[i];if(a[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const a=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&a.every(l=>n[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},eWe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function tWe(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}var nWe=class extends qKe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:o,moved:a})=>this.options.onDrop(r,o,a)),this.on("paste",({event:r,slice:o})=>this.options.onPaste(r,o)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=jse(e,this.options.autofocus);this.editorState=Ah.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=tWe(eWe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=qse(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(o=>{const a=typeof o=="string"?`${o}$`:o.key;n=n.filter(s=>!s.key.startsWith(a))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[rie,Zse.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),eie,aie,sie,lie,nie,iie,tie,cie.configure({direction:this.options.textDirection})].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new YC(r,this)}createCommandManager(){this.commandManager=new $C({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=CR(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=CR(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new Wee(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),o=n.includes(t),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!o)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const s=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),i=s==null?void 0:s.getMeta("focus"),l=s==null?void 0:s.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:s}),l&&this.emit("blur",{editor:this,event:l.event,transaction:s}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||a.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return Kse(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return yKe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return QL(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return pKe(this.state.doc,{blockSeparator:e,textSerializers:{...Gse(this.schema),...n}})}get isEmpty(){return KC(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new ZKe(e,this)}get $doc(){return this.$pos(0)}};function Yf(t){return new WC({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Zn(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:a}=e,s=r[r.length-1],i=r[0];if(s){const l=i.search(/\S/),c=n.from+i.indexOf(s),d=c+s.length;if(ej(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(v=>v===t.type&&v!==h.mark.type)).filter(h=>h.to>c).length)return null;d<n.to&&a.delete(d,n.to),c>n.from&&a.delete(n.from+l,c);const m=n.from+l+s.length;a.addMark(n.from+l,m,t.type.create(o||{})),a.removeStoredMark(t.type)}},undoable:t.undoable})}function rWe(t){return new WC({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Zn(t.getAttributes,void 0,r)||{},{tr:a}=e,s=n.from;let i=n.to;const l=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let d=s+c;d>i?d=i:i=d+r[1].length;const u=r[0][r[0].length-1];a.insertText(u,s+r[0].length-1),a.replaceWith(d,i,l)}else if(r[0]){const c=t.type.isInline?s:s-1;a.insert(c,t.type.create(o)).delete(a.mapping.map(s),a.mapping.map(i))}a.scrollIntoView()},undoable:t.undoable})}function _R(t){return new WC({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),a=Zn(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,a)},undoable:t.undoable})}function ig(t){return new WC({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const a=Zn(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),c=l&&JN(l,t.type,a);if(!c)return null;if(s.wrap(l,c),t.keepMarks&&t.editor){const{selection:u,storedMarks:m}=e,{splittableMarks:h}=t.editor.extensionManager,y=m||u.$to.parentOffset&&u.$from.marks();if(y){const v=y.filter(x=>h.includes(x.type.name));s.ensureMarks(v)}}if(t.keepAttributes){const u=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(u,a).run()}const d=s.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&Ll(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&s.join(n.from-1)},undoable:t.undoable})}function oWe(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Tt){const a=r.index();return r.parent.canReplaceWith(a,a+1,e)}let o=r.depth;for(;o>=0;){const a=r.index(o);if(r.node(o).contentMatchAt(a).matchType(e))return!0;o-=1}return!1}var aWe={};KL(aWe,{createAtomBlockMarkdownSpec:()=>sWe,createBlockMarkdownSpec:()=>iWe,createInlineMarkdownSpec:()=>uWe,parseAttributes:()=>nj,parseIndentedBlocks:()=>kR,renderNestedMarkdownContent:()=>oj,serializeAttributes:()=>rj});function nj(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),o=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(o){const c=o.map(d=>d.trim().slice(1));e.class=c.join(" ")}const a=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(e.id=a[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(s)).forEach(([,c,d])=>{var u;const m=parseInt(((u=d.match(/__QUOTED_(\d+)__/))==null?void 0:u[1])||"0",10),h=n[m];h&&(e[c]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function rj(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function sWe(t){const{nodeName:e,name:n,parseAttributes:r=nj,serializeAttributes:o=rj,defaultAttributes:a={},requiredAttributes:s=[],allowedAttributes:i}=t,l=n||e,c=d=>{if(!i)return d;const u={};return i.forEach(m=>{m in d&&(u[m]=d[m])}),u};return{parseMarkdown:(d,u)=>{const m={...a,...d.attributes};return u.createNode(e,m,[])},markdownTokenizer:{name:e,level:"block",start(d){var u;const m=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(u=d.match(m))==null?void 0:u.index;return h!==void 0?h:-1},tokenize(d,u,m){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),y=d.match(h);if(!y)return;const v=y[1]||"",x=r(v);if(!s.find(T=>!(T in x)))return{type:e,raw:y[0],attributes:x}}},renderMarkdown:d=>{const u=c(d.attrs||{}),m=o(u),h=m?` {${m}}`:"";return`:::${l}${h} :::`}}}function iWe(t){const{nodeName:e,name:n,getContent:r,parseAttributes:o=nj,serializeAttributes:a=rj,defaultAttributes:s={},content:i="block",allowedAttributes:l}=t,c=n||e,d=u=>{if(!l)return u;const m={};return l.forEach(h=>{h in u&&(m[h]=u[h])}),m};return{parseMarkdown:(u,m)=>{let h;if(r){const v=r(u);h=typeof v=="string"?[{type:"text",text:v}]:v}else i==="block"?h=m.parseChildren(u.tokens||[]):h=m.parseInline(u.tokens||[]);const y={...s,...u.attributes};return m.createNode(e,y,h)},markdownTokenizer:{name:e,level:"block",start(u){var m;const h=new RegExp(`^:::${c}`,"m"),y=(m=u.match(h))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(u,m,h){var y;const v=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),x=u.match(v);if(!x)return;const[S,T=""]=x,C=o(T);let _=1;const I=S.length;let P="";const M=/^:::([\w-]*)(\s.*)?/gm,D=u.slice(I);for(M.lastIndex=0;;){const F=M.exec(D);if(F===null)break;const B=F.index,V=F[1];if(!((y=F[2])!=null&&y.endsWith(":::"))){if(V)_+=1;else if(_-=1,_===0){const z=D.slice(0,B);P=z.trim();const H=u.slice(0,I+B+F[0].length);let j=[];if(P)if(i==="block")for(j=h.blockTokens(z),j.forEach(q=>{q.text&&(!q.tokens||q.tokens.length===0)&&(q.tokens=h.inlineTokens(q.text))});j.length>0;){const q=j[j.length-1];if(q.type==="paragraph"&&(!q.text||q.text.trim()===""))j.pop();else break}else j=h.inlineTokens(P);return{type:e,raw:H,attributes:C,content:P,tokens:j}}}}}},renderMarkdown:(u,m)=>{const h=d(u.attrs||{}),y=a(h),v=y?` {${y}}`:"",x=m.renderChildren(u.content||[],`

`);return`:::${c}${v}

${x}

:::`}}}function lWe(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,o,a,s]=r;e[o]=a||s,r=n.exec(t)}return e}function cWe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function uWe(t){const{nodeName:e,name:n,getContent:r,parseAttributes:o=lWe,serializeAttributes:a=cWe,defaultAttributes:s={},selfClosing:i=!1,allowedAttributes:l}=t,c=n||e,d=m=>{if(!l)return m;const h={};return l.forEach(y=>{y in m&&(h[y]=m[y])}),h},u=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,h)=>{const y={...s,...m.attributes};if(i)return h.createNode(e,y);const v=r?r(m):m.content||"";return v?h.createNode(e,y,[h.createTextNode(v)]):h.createNode(e,y,[])},markdownTokenizer:{name:e,level:"inline",start(m){const h=i?new RegExp(`\\[${u}\\s*[^\\]]*\\]`):new RegExp(`\\[${u}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${u}\\]`),y=m.match(h),v=y==null?void 0:y.index;return v!==void 0?v:-1},tokenize(m,h,y){const v=i?new RegExp(`^\\[${u}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${u}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${u}\\]`),x=m.match(v);if(!x)return;let S="",T="";if(i){const[,_]=x;T=_}else{const[,_,I]=x;T=_,S=I||""}const C=o(T.trim());return{type:e,raw:x[0],content:S.trim(),attributes:C}}},renderMarkdown:m=>{let h="";r?h=r(m):m.content&&m.content.length>0&&(h=m.content.filter(S=>S.type==="text").map(S=>S.text).join(""));const y=d(m.attrs||{}),v=a(y),x=v?` ${v}`:"";return i?`[${c}${x}]`:`[${c}${x}]${h}[/${c}]`}}}function kR(t,e,n){var r,o,a,s;const i=t.split(`
`),l=[];let c="",d=0;const u=e.baseIndentSize||2;for(;d<i.length;){const m=i[d],h=m.match(e.itemPattern);if(!h){if(l.length>0)break;if(m.trim()===""){d+=1,c=`${c}${m}
`;continue}else return}const y=e.extractItemData(h),{indentLevel:v,mainContent:x}=y;c=`${c}${m}
`;const S=[x];for(d+=1;d<i.length;){const I=i[d];if(I.trim()===""){const M=i.slice(d+1).findIndex(B=>B.trim()!=="");if(M===-1)break;if((((o=(r=i[d+1+M].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:o.length)||0)>v){S.push(I),c=`${c}${I}
`,d+=1;continue}else break}if((((s=(a=I.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:s.length)||0)>v)S.push(I),c=`${c}${I}
`,d+=1;else break}let T;const C=S.slice(1);if(C.length>0){const I=C.map(P=>P.slice(v+u)).join(`
`);I.trim()&&(e.customNestedParser?T=e.customNestedParser(I):T=n.blockTokens(I))}const _=e.createToken(y,T);l.push(_)}if(l.length!==0)return{items:l,raw:c}}function oj(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const o=typeof n=="function"?n(r):n,[a,...s]=t.content,i=e.renderChildren([a]),l=[`${o}${i}`];return s&&s.length>0&&s.forEach(c=>{const d=e.renderChildren([c]);if(d){const u=d.split(`
`).map(m=>m?e.indent(m):"").join(`
`);l.push(u)}}),l.join(`
`)}function dWe(t,e,n={}){const{state:r}=e,{doc:o,tr:a}=r,s=t;o.descendants((i,l)=>{const c=a.mapping.map(l),d=a.mapping.map(l)+i.nodeSize;let u=null;if(i.marks.forEach(h=>{if(h!==s)return!1;u=h}),!u)return;let m=!1;if(Object.keys(n).forEach(h=>{n[h]!==u.attrs[h]&&(m=!0)}),m){const h=t.type.create({...t.attrs,...n});a.removeMark(c,d,t.type),a.addMark(c,d,h)}}),a.docChanged&&e.view.dispatch(a)}var tl=class uie extends tj{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new uie(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function xp(t){return new KKe({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const a=Zn(t.getAttributes,void 0,r,o);if(a===!1||a===null)return null;const{tr:s}=e,i=r[r.length-1],l=r[0];let c=n.to;if(i){const d=l.search(/\S/),u=n.from+l.indexOf(i),m=u+i.length;if(ej(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(x=>x===t.type&&x!==y.mark.type)).filter(y=>y.to>u).length)return null;m<n.to&&s.delete(m,n.to),u>n.from&&s.delete(n.from+d,u),c=n.from+d+i.length,s.addMark(n.from+d,c,t.type.create(a||{})),s.removeStoredMark(t.type)}}})}var pWe=/(^|[^`])`([^`]+)`(?!`)$/,fWe=/(^|[^`])`([^`]+)`(?!`)/g,die=qp.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",To(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Yf({find:pWe,type:this.type})]},addPasteRules(){return[xp({find:fWe,type:this.type})]}}),mWe=die,hWe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,gWe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,bWe=qp.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",To(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Yf({find:hWe,type:this.type})]},addPasteRules(){return[xp({find:gWe,type:this.type})]}}),pie=bWe,gT=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},yWe=/^\s*>\s$/,vWe=tl.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return gT("blockquote",{...To(this.options.HTMLAttributes,t),children:gT("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(o=>{const i=e.renderChildren([o]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(i.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ig({find:yWe,type:this.type})]}}),xWe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,SWe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,EWe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,TWe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,wWe=qp.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return gT("strong",{...To(this.options.HTMLAttributes,t),children:gT("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Yf({find:xWe,type:this.type}),Yf({find:EWe,type:this.type})]},addPasteRules(){return[xp({find:SWe,type:this.type}),xp({find:TWe,type:this.type})]}}),ZP=4,CWe=/^```([a-z]+)?[\s\n]$/,AWe=/^~~~([a-z]+)?[\s\n]$/,_We=tl.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ZP,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const a=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",To(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const o=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${o}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${o}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ZP,{state:r}=t,{selection:o}=r,{$from:a,empty:s}=o;if(a.parent.type!==this.type)return!1;const i=" ".repeat(n);return s?t.commands.insertContent(i):t.commands.command(({tr:l})=>{const{from:c,to:d}=o,h=r.doc.textBetween(c,d,`
`,`
`).split(`
`).map(y=>i+y).join(`
`);return l.replaceWith(c,d,r.schema.text(h)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ZP,{state:r}=t,{selection:o}=r,{$from:a,empty:s}=o;return a.parent.type!==this.type?!1:s?t.commands.command(({tr:i})=>{var l;const{pos:c}=a,d=a.start(),u=a.end(),h=r.doc.textBetween(d,u,`
`,`
`).split(`
`);let y=0,v=0;const x=c-d;for(let P=0;P<h.length;P+=1){if(v+h[P].length>=x){y=P;break}v+=h[P].length+1}const T=((l=h[y].match(/^ */))==null?void 0:l[0])||"",C=Math.min(T.length,n);if(C===0)return!0;let _=d;for(let P=0;P<y;P+=1)_+=h[P].length+1;return i.delete(_,_+C),c-_<=C&&i.setSelection(ft.create(i.doc,_)),!0}):t.commands.command(({tr:i})=>{const{from:l,to:c}=o,m=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(h=>{var y;const v=((y=h.match(/^ */))==null?void 0:y[0])||"",x=Math.min(v.length,n);return h.slice(x)}).join(`
`);return i.replaceWith(l,c,r.schema.text(m)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!a||!s?!1:t.chain().command(({tr:i})=>(i.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:a}=n;if(!a||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const i=o.after();return i===void 0?!1:r.nodeAt(i)?t.commands.command(({tr:c})=>(c.setSelection(Mt.near(r.resolve(i))),!0)):t.commands.exitCode()}}},addInputRules(){return[_R({find:CWe,type:this.type,getAttributes:t=>({language:t[1]})}),_R({find:AWe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new xn({key:new jn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,a=o==null?void 0:o.mode;if(!n||!a)return!1;const{tr:s,schema:i}=t.state,l=i.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:a},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(ft.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),kWe=tl.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),IWe=tl.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",To(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:a}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:i}=r.extensionManager,l=a||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&s){const u=l.filter(m=>i.includes(m.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),PWe=tl.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,To(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,o="#".repeat(r);return t.content?`${o} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>_R({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),OWe=tl.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",To(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!oWe(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,o=t();return Yse(n)?o.insertContentAt(r.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({state:a,tr:s,dispatch:i})=>{if(i){const{$to:l}=s.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(ft.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(Tt.create(s.doc,l.pos)):s.setSelection(ft.create(s.doc,l.pos));else{const d=a.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,u=d==null?void 0:d.create();u&&(s.insert(c,u),s.setSelection(ft.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[rWe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),MWe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,RWe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,DWe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,NWe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,LWe=qp.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",To(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Yf({find:MWe,type:this.type}),Yf({find:DWe,type:this.type})]},addPasteRules(){return[xp({find:RWe,type:this.type}),xp({find:NWe,type:this.type})]}});const jWe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",BWe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",IR="numeric",PR="ascii",OR="alpha",Wy="asciinumeric",Sy="alphanumeric",MR="domain",fie="emoji",FWe="scheme",zWe="slashscheme",eO="whitespace";function UWe(t,e){return t in e||(e[t]=[]),e[t]}function vf(t,e,n){e[IR]&&(e[Wy]=!0,e[Sy]=!0),e[PR]&&(e[Wy]=!0,e[OR]=!0),e[Wy]&&(e[Sy]=!0),e[OR]&&(e[Sy]=!0),e[Sy]&&(e[MR]=!0),e[fie]&&(e[MR]=!0);for(const r in e){const o=UWe(r,n);o.indexOf(t)<0&&o.push(t)}}function qWe(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ni(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ni.groups={};ni.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],a=e.jr[r][1];if(a&&o.test(t))return a}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||ni.groups;let o;return e&&e.j?o=e:(o=new ni(e),n&&r&&vf(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const a=t.length;if(!a)return o;for(let s=0;s<a-1;s++)o=o.tt(t[s]);return o.tt(t[a-1],e,n,r)},tt(t,e,n,r){r=r||ni.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const a=e;let s,i=o.go(t);if(i?(s=new ni,Object.assign(s.j,i.j),s.jr.push.apply(s.jr,i.jr),s.jd=i.jd,s.t=i.t):s=new ni,a){if(r)if(s.t&&typeof s.t=="string"){const l=Object.assign(qWe(s.t,r),n);vf(a,l,r)}else n&&vf(a,n,r);s.t=a}return o.j[t]=s,s}};const sn=(t,e,n,r,o)=>t.ta(e,n,r,o),to=(t,e,n,r,o)=>t.tr(e,n,r,o),PH=(t,e,n,r,o)=>t.ts(e,n,r,o),We=(t,e,n,r,o)=>t.tt(e,n,r,o),Mu="WORD",RR="UWORD",mie="ASCIINUMERICAL",hie="ALPHANUMERICAL",B0="LOCALHOST",DR="TLD",NR="UTLD",L1="SCHEME",xh="SLASH_SCHEME",aj="NUM",LR="WS",sj="NL",Yy="OPENBRACE",Xy="CLOSEBRACE",bT="OPENBRACKET",yT="CLOSEBRACKET",vT="OPENPAREN",xT="CLOSEPAREN",ST="OPENANGLEBRACKET",ET="CLOSEANGLEBRACKET",TT="FULLWIDTHLEFTPAREN",wT="FULLWIDTHRIGHTPAREN",CT="LEFTCORNERBRACKET",AT="RIGHTCORNERBRACKET",_T="LEFTWHITECORNERBRACKET",kT="RIGHTWHITECORNERBRACKET",IT="FULLWIDTHLESSTHAN",PT="FULLWIDTHGREATERTHAN",OT="AMPERSAND",MT="APOSTROPHE",RT="ASTERISK",Gd="AT",DT="BACKSLASH",NT="BACKTICK",LT="CARET",Jd="COLON",ij="COMMA",jT="DOLLAR",Ic="DOT",BT="EQUALS",lj="EXCLAMATION",vl="HYPHEN",Jy="PERCENT",FT="PIPE",zT="PLUS",UT="POUND",Qy="QUERY",cj="QUOTE",gie="FULLWIDTHMIDDLEDOT",uj="SEMI",Pc="SLASH",Zy="TILDE",qT="UNDERSCORE",bie="EMOJI",HT="SYM";var yie=Object.freeze({__proto__:null,ALPHANUMERICAL:hie,AMPERSAND:OT,APOSTROPHE:MT,ASCIINUMERICAL:mie,ASTERISK:RT,AT:Gd,BACKSLASH:DT,BACKTICK:NT,CARET:LT,CLOSEANGLEBRACKET:ET,CLOSEBRACE:Xy,CLOSEBRACKET:yT,CLOSEPAREN:xT,COLON:Jd,COMMA:ij,DOLLAR:jT,DOT:Ic,EMOJI:bie,EQUALS:BT,EXCLAMATION:lj,FULLWIDTHGREATERTHAN:PT,FULLWIDTHLEFTPAREN:TT,FULLWIDTHLESSTHAN:IT,FULLWIDTHMIDDLEDOT:gie,FULLWIDTHRIGHTPAREN:wT,HYPHEN:vl,LEFTCORNERBRACKET:CT,LEFTWHITECORNERBRACKET:_T,LOCALHOST:B0,NL:sj,NUM:aj,OPENANGLEBRACKET:ST,OPENBRACE:Yy,OPENBRACKET:bT,OPENPAREN:vT,PERCENT:Jy,PIPE:FT,PLUS:zT,POUND:UT,QUERY:Qy,QUOTE:cj,RIGHTCORNERBRACKET:AT,RIGHTWHITECORNERBRACKET:kT,SCHEME:L1,SEMI:uj,SLASH:Pc,SLASH_SCHEME:xh,SYM:HT,TILDE:Zy,TLD:DR,UNDERSCORE:qT,UTLD:NR,UWORD:RR,WORD:Mu,WS:LR});const ku=/[a-z]/,Qb=new RegExp("\\p{L}","u"),tO=new RegExp("\\p{Emoji}","u"),Iu=/\d/,nO=/\s/,OH="\r",rO=`
`,HWe="",$We="",oO="";let n1=null,r1=null;function VWe(t=[]){const e={};ni.groups=e;const n=new ni;n1==null&&(n1=MH(jWe)),r1==null&&(r1=MH(BWe)),We(n,"'",MT),We(n,"{",Yy),We(n,"}",Xy),We(n,"[",bT),We(n,"]",yT),We(n,"(",vT),We(n,")",xT),We(n,"<",ST),We(n,">",ET),We(n,"",TT),We(n,"",wT),We(n,"",CT),We(n,"",AT),We(n,"",_T),We(n,"",kT),We(n,"",IT),We(n,"",PT),We(n,"&",OT),We(n,"*",RT),We(n,"@",Gd),We(n,"`",NT),We(n,"^",LT),We(n,":",Jd),We(n,",",ij),We(n,"$",jT),We(n,".",Ic),We(n,"=",BT),We(n,"!",lj),We(n,"-",vl),We(n,"%",Jy),We(n,"|",FT),We(n,"+",zT),We(n,"#",UT),We(n,"?",Qy),We(n,'"',cj),We(n,"/",Pc),We(n,";",uj),We(n,"~",Zy),We(n,"_",qT),We(n,"\\",DT),We(n,"",gie);const r=to(n,Iu,aj,{[IR]:!0});to(r,Iu,r);const o=to(r,ku,mie,{[Wy]:!0}),a=to(r,Qb,hie,{[Sy]:!0}),s=to(n,ku,Mu,{[PR]:!0});to(s,Iu,o),to(s,ku,s),to(o,Iu,o),to(o,ku,o);const i=to(n,Qb,RR,{[OR]:!0});to(i,ku),to(i,Iu,a),to(i,Qb,i),to(a,Iu,a),to(a,ku),to(a,Qb,a);const l=We(n,rO,sj,{[eO]:!0}),c=We(n,OH,LR,{[eO]:!0}),d=to(n,nO,LR,{[eO]:!0});We(n,oO,d),We(c,rO,l),We(c,oO,d),to(c,nO,d),We(d,OH),We(d,rO),to(d,nO,d),We(d,oO,d);const u=to(n,tO,bie,{[fie]:!0});We(u,"#"),to(u,tO,u),We(u,HWe,u);const m=We(u,$We);We(m,"#"),to(m,tO,u);const h=[[ku,s],[Iu,o]],y=[[ku,null],[Qb,i],[Iu,a]];for(let v=0;v<n1.length;v++)Nd(n,n1[v],DR,Mu,h);for(let v=0;v<r1.length;v++)Nd(n,r1[v],NR,RR,y);vf(DR,{tld:!0,ascii:!0},e),vf(NR,{utld:!0,alpha:!0},e),Nd(n,"file",L1,Mu,h),Nd(n,"mailto",L1,Mu,h),Nd(n,"http",xh,Mu,h),Nd(n,"https",xh,Mu,h),Nd(n,"ftp",xh,Mu,h),Nd(n,"ftps",xh,Mu,h),vf(L1,{scheme:!0,ascii:!0},e),vf(xh,{slashscheme:!0,ascii:!0},e),t=t.sort((v,x)=>v[0]>x[0]?1:-1);for(let v=0;v<t.length;v++){const x=t[v][0],T=t[v][1]?{[FWe]:!0}:{[zWe]:!0};x.indexOf("-")>=0?T[MR]=!0:ku.test(x)?Iu.test(x)?T[Wy]=!0:T[PR]=!0:T[IR]=!0,PH(n,x,x,T)}return PH(n,"localhost",B0,{ascii:!0}),n.jd=new ni(HT),{start:n,tokens:Object.assign({groups:e},yie)}}function vie(t,e){const n=GWe(e.replace(/[A-Z]/g,i=>i.toLowerCase())),r=n.length,o=[];let a=0,s=0;for(;s<r;){let i=t,l=null,c=0,d=null,u=-1,m=-1;for(;s<r&&(l=i.go(n[s]));)i=l,i.accepts()?(u=0,m=0,d=i):u>=0&&(u+=n[s].length,m++),c+=n[s].length,a+=n[s].length,s++;a-=u,s-=m,c-=u,o.push({t:d.t,v:e.slice(a-c,a),s:a-c,e:a})}return o}function GWe(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),a,s=o<55296||o>56319||r+1===n||(a=t.charCodeAt(r+1))<56320||a>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function Nd(t,e,n,r,o){let a;const s=e.length;for(let i=0;i<s-1;i++){const l=e[i];t.j[l]?a=t.j[l]:(a=new ni(r),a.jr=o.slice(),t.j[l]=a),t=a}return a=new ni(n),a.jr=o.slice(),t.j[e[s-1]]=a,a}function MH(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let a=0;for(;o.indexOf(t[r+a])>=0;)a++;if(a>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+a),10);s>0;s--)n.pop();r+=a}else n.push(t[r]),r++}return e}const F0={defaultProtocol:"http",events:null,format:RH,formatHref:RH,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function dj(t,e=null){let n=Object.assign({},F0);t&&(n=Object.assign(n,t instanceof dj?t.o:t));const r=n.ignoreTags,o=[];for(let a=0;a<r.length;a++)o.push(r[a].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}dj.prototype={o:F0,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:F0[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function RH(t){return t}function xie(t,e){this.t="token",this.v=t,this.tk=e}xie.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=F0.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),a=this.toFormattedString(t),s={},i=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),u=t.getObj("events",n,e);return s.href=r,i&&(s.class=i),l&&(s.target=l),c&&(s.rel=c),d&&Object.assign(s,d),{tagName:o,attributes:s,content:a,eventListeners:u}}};function XC(t,e){class n extends xie{constructor(o,a){super(o,a),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const DH=XC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),NH=XC("text"),KWe=XC("nl"),o1=XC("url",{isLink:!0,toHref(t=F0.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==B0&&t[1].t===Jd}}),yl=t=>new ni(t);function WWe({groups:t}){const e=t.domain.concat([OT,RT,Gd,DT,NT,LT,jT,BT,vl,aj,Jy,FT,zT,UT,Pc,HT,Zy,qT]),n=[MT,Jd,ij,Ic,lj,Jy,Qy,cj,uj,ST,ET,Yy,Xy,yT,bT,vT,xT,TT,wT,CT,AT,_T,kT,IT,PT],r=[OT,MT,RT,DT,NT,LT,jT,BT,vl,Yy,Xy,Jy,FT,zT,UT,Qy,Pc,HT,Zy,qT],o=yl(),a=We(o,Zy);sn(a,r,a),sn(a,t.domain,a);const s=yl(),i=yl(),l=yl();sn(o,t.domain,s),sn(o,t.scheme,i),sn(o,t.slashscheme,l),sn(s,r,a),sn(s,t.domain,s);const c=We(s,Gd);We(a,Gd,c),We(i,Gd,c),We(l,Gd,c);const d=We(a,Ic);sn(d,r,a),sn(d,t.domain,a);const u=yl();sn(c,t.domain,u),sn(u,t.domain,u);const m=We(u,Ic);sn(m,t.domain,u);const h=yl(DH);sn(m,t.tld,h),sn(m,t.utld,h),We(c,B0,h);const y=We(u,vl);We(y,vl,y),sn(y,t.domain,u),sn(h,t.domain,u),We(h,Ic,m),We(h,vl,y);const v=We(h,Jd);sn(v,t.numeric,DH);const x=We(s,vl),S=We(s,Ic);We(x,vl,x),sn(x,t.domain,s),sn(S,r,a),sn(S,t.domain,s);const T=yl(o1);sn(S,t.tld,T),sn(S,t.utld,T),sn(T,t.domain,s),sn(T,r,a),We(T,Ic,S),We(T,vl,x),We(T,Gd,c);const C=We(T,Jd),_=yl(o1);sn(C,t.numeric,_);const I=yl(o1),P=yl();sn(I,e,I),sn(I,n,P),sn(P,e,I),sn(P,n,P),We(T,Pc,I),We(_,Pc,I);const M=We(i,Jd),D=We(l,Jd),F=We(D,Pc),B=We(F,Pc);sn(i,t.domain,s),We(i,Ic,S),We(i,vl,x),sn(l,t.domain,s),We(l,Ic,S),We(l,vl,x),sn(M,t.domain,I),We(M,Pc,I),We(M,Qy,I),sn(B,t.domain,I),sn(B,e,I),We(B,Pc,I);const V=[[Yy,Xy],[bT,yT],[vT,xT],[ST,ET],[TT,wT],[CT,AT],[_T,kT],[IT,PT]];for(let z=0;z<V.length;z++){const[H,j]=V[z],q=We(I,H);We(P,H,q),We(q,j,I);const U=yl(o1);sn(q,e,U);const Y=yl();sn(q,n),sn(U,e,U),sn(U,n,Y),sn(Y,e,U),sn(Y,n,Y),We(U,j,I),We(Y,j,I)}return We(o,B0,T),We(o,sj,KWe),{start:o,tokens:yie}}function YWe(t,e,n){let r=n.length,o=0,a=[],s=[];for(;o<r;){let i=t,l=null,c=null,d=0,u=null,m=-1;for(;o<r&&!(l=i.go(n[o].t));)s.push(n[o++]);for(;o<r&&(c=l||i.go(n[o].t));)l=null,i=c,i.accepts()?(m=0,u=i):m>=0&&m++,o++,d++;if(m<0)o-=d,o<r&&(s.push(n[o]),o++);else{s.length>0&&(a.push(aO(NH,e,s)),s=[]),o-=m,d-=m;const h=u.t,y=n.slice(o-d,o);a.push(aO(h,e,y))}}return s.length>0&&a.push(aO(NH,e,s)),a}function aO(t,e,n){const r=n[0].s,o=n[n.length-1].e,a=e.slice(r,o);return new t(a,n)}const XWe=typeof console<"u"&&console&&console.warn||(()=>{}),JWe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",kr={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function QWe(){return ni.groups={},kr.scanner=null,kr.parser=null,kr.tokenQueue=[],kr.pluginQueue=[],kr.customSchemes=[],kr.initialized=!1,kr}function LH(t,e=!1){if(kr.initialized&&XWe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${JWe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);kr.customSchemes.push([t,e])}function ZWe(){kr.scanner=VWe(kr.customSchemes);for(let t=0;t<kr.tokenQueue.length;t++)kr.tokenQueue[t][1]({scanner:kr.scanner});kr.parser=WWe(kr.scanner.tokens);for(let t=0;t<kr.pluginQueue.length;t++)kr.pluginQueue[t][1]({scanner:kr.scanner,parser:kr.parser});return kr.initialized=!0,kr}function pj(t){return kr.initialized||ZWe(),YWe(kr.parser.start,t,vie(kr.scanner.start,t))}pj.scan=vie;function Sie(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new dj(n),o=pj(t),a=[];for(let s=0;s<o.length;s++){const i=o[s];i.isLink&&(!e||i.t===e)&&r.check(i)&&a.push(i.toFormattedObject(r))}return a}var fj="[\0- -\u2029]",eYe=new RegExp(fj),tYe=new RegExp(`${fj}$`),nYe=new RegExp(fj,"g");function rYe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function oYe(t){return new xn({key:new jn("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),a=e.some(c=>c.getMeta("preventAutolink"));if(!o||a)return;const{tr:s}=r,i=Use(n.doc,[...e]);if(Wse(i).forEach(({newRange:c})=>{const d=sKe(r.doc,c,h=>h.isTextblock);let u,m;if(d.length>1)u=d[0],m=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ");else if(d.length){const h=r.doc.textBetween(c.from,c.to," "," ");if(!tYe.test(h))return;u=d[0],m=r.doc.textBetween(u.pos,c.to,void 0," ")}if(u&&m){const h=m.split(eYe).filter(Boolean);if(h.length<=0)return!1;const y=h[h.length-1],v=u.pos+m.lastIndexOf(y);if(!y)return!1;const x=pj(y).map(S=>S.toObject(t.defaultProtocol));if(!rYe(x))return!1;x.filter(S=>S.isLink).map(S=>({...S,from:v+S.start+1,to:v+S.end+1})).filter(S=>r.schema.marks.code?!r.doc.rangeHasMark(S.from,S.to,r.schema.marks.code):!0).filter(S=>t.validate(S.value)).filter(S=>t.shouldAutoLink(S.value)).forEach(S=>{ej(S.from,S.to,r.doc).some(T=>T.mark.type===t.type)||s.addMark(S.from,S.to,t.type.create({href:S.href}))})}}),!!s.steps.length)return s}})}function aYe(t){return new xn({key:new jn("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,a;if(r.button!==0||!e.editable)return!1;let s=null;if(r.target instanceof HTMLAnchorElement)s=r.target;else{let d=r.target;const u=[];for(;d.nodeName!=="DIV";)u.push(d),d=d.parentNode;s=u.find(m=>m.nodeName==="A")}if(!s)return!1;const i=Kse(e.state,t.type.name),l=(o=s==null?void 0:s.href)!=null?o:i.href,c=(a=s==null?void 0:s.target)!=null?a:i.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),s&&l?(window.open(l,c),!0):!1}}})}function sYe(t){return new xn({key:new jn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:o}=t,{state:a}=e,{selection:s}=a,{empty:i}=s;if(i)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const c=Sie(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||o!==void 0&&!o(c.href)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function lf(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(nYe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var iYe=qp.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){LH(t);return}LH(t.scheme,t.optionalSlashes)})},onDestroy(){QWe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!lf(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!lf(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!lf(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",To(this.options.HTMLAttributes,t),0]:["a",To(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!lf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!lf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[xp({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=Sie(t).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:s=>!!lf(s,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(a=>{this.options.shouldAutoLink(a.value)&&e.push({text:a.value,data:{href:a.href},index:a.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(oYe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!lf(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(aYe({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(sYe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),lYe=Object.defineProperty,cYe=(t,e)=>{for(var n in e)lYe(t,n,{get:e[n],enumerable:!0})},uYe="listItem",jH="textStyle",BH=/^\s*([-+*])\s$/,Eie=tl.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",To(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(uYe,this.editor.getAttributes(jH)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ig({find:BH,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ig({find:BH,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(jH),editor:this.editor})),[t]}}),Tie=tl.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",To(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(o=>o.type==="paragraph"))n=e.parseChildren(t.tokens);else{const o=t.tokens[0];if(o&&o.type==="text"&&o.tokens&&o.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(o.tokens)}],t.tokens.length>1){const s=t.tokens.slice(1),i=e.parseChildren(s);n.push(...i)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>oj(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),dYe={};cYe(dYe,{findListItemPos:()=>zv,getNextListDepth:()=>mj,handleBackspace:()=>jR,handleDelete:()=>BR,hasListBefore:()=>wie,hasListItemAfter:()=>pYe,hasListItemBefore:()=>Cie,listItemHasSubList:()=>Aie,nextListIsDeeper:()=>_ie,nextListIsHigher:()=>kie});var zv=(t,e)=>{const{$from:n}=e.selection,r=Go(t,e.schema);let o=null,a=n.depth,s=n.pos,i=null;for(;a>0&&i===null;)o=n.node(a),o.type===r?i=a:(a-=1,s-=1);return i===null?null:{$pos:e.doc.resolve(s),depth:i}},mj=(t,e)=>{const n=zv(t,e);if(!n)return!1;const[,r]=gKe(e,t,n.$pos.pos+4);return r},wie=(t,e,n)=>{const{$anchor:r}=t.selection,o=Math.max(0,r.pos-2),a=t.doc.resolve(o).node();return!(!a||!n.includes(a.type.name))},Cie=(t,e)=>{var n;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-2);return!(o.index()===0||((n=o.nodeBefore)==null?void 0:n.type.name)!==t)},Aie=(t,e,n)=>{if(!n)return!1;const r=Go(t,e.schema);let o=!1;return n.descendants(a=>{a.type===r&&(o=!0)}),o},jR=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!vp(t.state,e)&&wie(t.state,e,n)){const{$anchor:i}=t.state.selection,l=t.state.doc.resolve(i.before()-1),c=[];l.node().descendants((m,h)=>{m.type.name===e&&c.push({node:m,pos:h})});const d=c.at(-1);if(!d)return!1;const u=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:i.start()-1,to:i.end()+1},u.end()).joinForward().run()}if(!vp(t.state,e)||!xKe(t.state))return!1;const r=zv(e,t.state);if(!r)return!1;const a=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),s=Aie(e,t.state,a);return Cie(e,t.state)&&!s?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},_ie=(t,e)=>{const n=mj(t,e),r=zv(t,e);return!r||!n?!1:n>r.depth},kie=(t,e)=>{const n=mj(t,e),r=zv(t,e);return!r||!n?!1:n<r.depth},BR=(t,e)=>{if(!vp(t.state,e)||!vKe(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:o}=n;return!n.empty&&r.sameParent(o)?!1:_ie(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():kie(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},pYe=(t,e)=>{var n;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-r.parentOffset-2);return!(o.index()===o.parent.childCount-1||((n=o.nodeAfter)==null?void 0:n.type.name)!==t)},Iie=_o.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&BR(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&BR(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&jR(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&jR(t,n,r)&&(e=!0)}),e}}}}),FH=/^(\s*)(\d+)\.\s+(.*)$/,fYe=/^\s/;function mYe(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n],a=o.match(FH);if(!a)break;const[,s,i,l]=a,c=s.length;let d=l,u=n+1;const m=[o];for(;u<t.length;){const h=t[u];if(h.match(FH))break;if(h.trim()==="")m.push(h),d+=`
`,u+=1;else if(h.match(fYe))m.push(h),d+=`
${h.slice(c+2)}`,u+=1;else break}e.push({indent:c,number:parseInt(i,10),content:d.trim(),raw:m.join(`
`)}),r=u,n=u}return[e,r]}function Pie(t,e,n){var r;const o=[];let a=0;for(;a<t.length;){const s=t[a];if(s.indent===e){const i=s.content.split(`
`),l=((r=i[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const d=i.slice(1).join(`
`).trim();if(d){const h=n.blockTokens(d);c.push(...h)}let u=a+1;const m=[];for(;u<t.length&&t[u].indent>e;)m.push(t[u]),u+=1;if(m.length>0){const h=Math.min(...m.map(v=>v.indent)),y=Pie(m,h,n);c.push({type:"list",ordered:!0,start:m[0].number,items:y,raw:m.map(v=>v.raw).join(`
`)})}o.push({type:"list_item",raw:s.raw,tokens:c}),a=u}else a+=1}return o}function hYe(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(o=>{if(o.type==="paragraph"||o.type==="list"||o.type==="blockquote"||o.type==="code")r.push(...e.parseChildren([o]));else if(o.type==="text"&&o.tokens){const a=e.parseChildren([o]);r.push({type:"paragraph",content:a})}else{const a=e.parseChildren([o]);a.length>0&&r.push(...a)}}),{type:"listItem",content:r}})}var gYe="listItem",zH="textStyle",UH=/^(\d+)\.\s$/,Oie=tl.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",To(this.options.HTMLAttributes,n),0]:["ol",To(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?hYe(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const o=t.split(`
`),[a,s]=mYe(o);if(a.length===0)return;const i=Pie(a,0,n);return i.length===0?void 0:{type:"list",ordered:!0,start:((r=a[0])==null?void 0:r.number)||1,items:i,raw:o.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(gYe,this.editor.getAttributes(zH)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ig({find:UH,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ig({find:UH,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(zH)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),bYe=/^\s*(\[([( |x])?\])\s$/,yYe=tl.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",To(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const o=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return oj(t,e,o)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const o=document.createElement("li"),a=document.createElement("label"),s=document.createElement("span"),i=document.createElement("input"),l=document.createElement("div"),c=d=>{var u,m;i.ariaLabel=((m=(u=this.options.a11y)==null?void 0:u.checkboxLabel)==null?void 0:m.call(u,d,i.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return c(t),a.contentEditable="false",i.type="checkbox",i.addEventListener("mousedown",d=>d.preventDefault()),i.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){i.checked=!i.checked;return}const{checked:u}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const h=n();if(typeof h!="number")return!1;const y=m.doc.nodeAt(h);return m.setNodeMarkup(h,void 0,{...y==null?void 0:y.attrs,checked:u}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,u)||(i.checked=!i.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,u])=>{o.setAttribute(d,u)}),o.dataset.checked=t.attrs.checked,i.checked=t.attrs.checked,a.append(i,s),o.append(a,l),Object.entries(e).forEach(([d,u])=>{o.setAttribute(d,u)}),{dom:o,contentDOM:l,update:d=>d.type!==this.type?!1:(o.dataset.checked=d.attrs.checked,i.checked=d.attrs.checked,c(d),!0)}}},addInputRules(){return[ig({find:bYe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),vYe=tl.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",To(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=a=>{const s=kR(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,l)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:l}),customNestedParser:r},n);return s?[{type:"taskList",raw:s.raw,items:s.items}]:n.blockTokens(a)},o=kR(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,s)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:s}),customNestedParser:r},n);if(o)return{type:"taskList",raw:o.raw,items:o.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});_o.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Eie.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Tie.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Iie.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Oie.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(yYe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(vYe.configure(this.options.taskList)),t}});var xYe=tl.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",To(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),SYe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,EYe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,TYe=qp.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",To(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Yf({find:SYe,type:this.type})]},addPasteRules(){return[xp({find:EYe,type:this.type})]}}),wYe=tl.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),CYe=qp.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",To(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const o=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!o)return;const a=o[2].trim();return{type:"underline",raw:o[0],text:a,tokens:n.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function AYe(t={}){return new xn({view(e){return new _Ye(e,t)}})}class _Ye{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let a=s=>{this[o](s)};return e.dom.addEventListener(o,a),{name:o,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,a=o.getBoundingClientRect(),s=a.width/o.offsetWidth,i=a.height/o.offsetHeight;if(n){let u=e.nodeBefore,m=e.nodeAfter;if(u||m){let h=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(h){let y=h.getBoundingClientRect(),v=u?y.bottom:y.top;u&&m&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*i;r={left:y.left,right:y.right,top:v-x,bottom:v+x}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*s;r={left:u.left-m,right:u.left+m,top:u.top,bottom:u.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let u=l.getBoundingClientRect(),m=u.width/l.offsetWidth,h=u.height/l.offsetHeight;c=u.left-l.scrollLeft*m,d=u.top-l.scrollTop*h}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-d)/i+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/i+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,a=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!a){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let i=lee(this.editorView.state.doc,s,this.editorView.dragging.slice);i!=null&&(s=i)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class so extends Mt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return so.valid(r)?new so(r):Mt.near(r)}content(){return at.empty}eq(e){return e instanceof so&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new so(e.resolve(n.pos))}getBookmark(){return new hj(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!kYe(e)||!IYe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&so.valid(e))return e;let o=e.pos,a=null;for(let s=e.depth;;s--){let i=e.node(s);if(n>0?e.indexAfter(s)<i.childCount:e.index(s)>0){a=i.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let l=e.doc.resolve(o);if(so.valid(l))return l}for(;;){let s=n>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!Tt.isSelectable(a)){e=e.doc.resolve(o+a.nodeSize*n),r=!1;continue e}break}a=s,o+=n;let i=e.doc.resolve(o);if(so.valid(i))return i}return null}}}so.prototype.visible=!1;so.findFrom=so.findGapCursorFrom;Mt.jsonID("gapcursor",so);class hj{constructor(e){this.pos=e}map(e){return new hj(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return so.valid(n)?new so(n):Mt.near(n)}}function Mie(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function kYe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||Mie(o.type))return!0;if(o.inlineContent)return!1}}return!0}function IYe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||Mie(o.type))return!0;if(o.inlineContent)return!1}}return!0}function PYe(){return new xn({props:{decorations:DYe,createSelectionBetween(t,e,n){return e.pos==n.pos&&so.valid(n)?new so(n):null},handleClick:MYe,handleKeyDown:OYe,handleDOMEvents:{beforeinput:RYe}}})}const OYe=Yee({ArrowLeft:a1("horiz",-1),ArrowRight:a1("horiz",1),ArrowUp:a1("vert",-1),ArrowDown:a1("vert",1)});function a1(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,a){let s=r.selection,i=e>0?s.$to:s.$from,l=s.empty;if(s instanceof ft){if(!a.endOfTextblock(n)||i.depth==0)return!1;l=!1,i=r.doc.resolve(e>0?i.after():i.before())}let c=so.findGapCursorFrom(i,e,l);return c?(o&&o(r.tr.setSelection(new so(c))),!0):!1}}function MYe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!so.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Tt.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new so(r))),!0)}function RYe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof so))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=Le.empty;for(let s=r.length-1;s>=0;s--)o=Le.from(r[s].createAndFill(null,o));let a=t.state.tr.replace(n.pos,n.pos,new at(o,0,0));return a.setSelection(ft.near(a.doc.resolve(n.pos+1))),t.dispatch(a),!1}function DYe(t){if(!(t.selection instanceof so))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Gr.create(t.doc,[ws.widget(t.selection.head,e,{key:"gapcursor"})])}var $T=200,ca=function(){};ca.prototype.append=function(e){return e.length?(e=ca.from(e),!this.length&&e||e.length<$T&&this.leafAppend(e)||this.length<$T&&e.leafPrepend(this)||this.appendInner(e)):this};ca.prototype.prepend=function(e){return e.length?ca.from(e).append(this):this};ca.prototype.appendInner=function(e){return new NYe(this,e)};ca.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ca.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ca.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ca.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ca.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(a,s){return o.push(e(a,s))},n,r),o};ca.from=function(e){return e instanceof ca?e:e&&e.length?new Rie(e):ca.empty};var Rie=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,a){return o==0&&a==this.length?this:new e(this.values.slice(o,a))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,a,s,i){for(var l=a;l<s;l++)if(o(this.values[l],i+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,a,s,i){for(var l=a-1;l>=s;l--)if(o(this.values[l],i+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=$T)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=$T)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(ca);ca.empty=new Rie([]);var NYe=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,a,s){var i=this.left.length;if(o<i&&this.left.forEachInner(r,o,Math.min(a,i),s)===!1||a>i&&this.right.forEachInner(r,Math.max(o-i,0),Math.min(this.length,a)-i,s+i)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,a,s){var i=this.left.length;if(o>i&&this.right.forEachInvertedInner(r,o-i,Math.max(a,i)-i,s+i)===!1||a<i&&this.left.forEachInvertedInner(r,Math.min(o,i),a,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var a=this.left.length;return o<=a?this.left.slice(r,o):r>=a?this.right.slice(r-a,o-a):this.left.slice(r,a).append(this.right.slice(0,o-a))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(ca);const LYe=500;class Wl{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,a;n&&(o=this.remapping(r,this.items.length),a=o.maps.length);let s=e.tr,i,l,c=[],d=[];return this.items.forEach((u,m)=>{if(!u.step){o||(o=this.remapping(r,m+1),a=o.maps.length),a--,d.push(u);return}if(o){d.push(new Oc(u.map));let h=u.step.map(o.slice(a)),y;h&&s.maybeStep(h).doc&&(y=s.mapping.maps[s.mapping.maps.length-1],c.push(new Oc(y,void 0,void 0,c.length+d.length))),a--,y&&o.appendMap(y,a)}else s.maybeStep(u.step);if(u.selection)return i=o?u.selection.map(o.slice(a)):u.selection,l=new Wl(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:i}}addTransform(e,n,r,o){let a=[],s=this.eventCount,i=this.items,l=!o&&i.length?i.get(i.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),m=new Oc(e.mapping.maps[d],u,n),h;(h=l&&l.merge(m))&&(m=h,d?a.pop():i=i.slice(0,i.length-1)),a.push(m),n&&(s++,n=void 0),o||(l=m)}let c=s-r.depth;return c>BYe&&(i=jYe(i,c),s-=c),new Wl(i.append(a),s)}remapping(e,n){let r=new y0;return this.items.forEach((o,a)=>{let s=o.mirrorOffset!=null&&a-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new Wl(this.items.append(e.map(n=>new Oc(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),a=e.mapping,s=e.steps.length,i=this.eventCount;this.items.forEach(m=>{m.selection&&i--},o);let l=n;this.items.forEach(m=>{let h=a.getMirror(--l);if(h==null)return;s=Math.min(s,h);let y=a.maps[h];if(m.step){let v=e.steps[h].invert(e.docs[h]),x=m.selection&&m.selection.map(a.slice(l+1,h));x&&i++,r.push(new Oc(y,v,x))}else r.push(new Oc(y))},o);let c=[];for(let m=n;m<s;m++)c.push(new Oc(a.maps[m]));let d=this.items.slice(0,o).append(c).append(r),u=new Wl(d,i);return u.emptyItemCount()>LYe&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],a=0;return this.items.forEach((s,i)=>{if(i>=e)o.push(s),s.selection&&a++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=s.selection&&s.selection.map(n.slice(r));d&&a++;let u=new Oc(c.invert(),l,d),m,h=o.length-1;(m=o.length&&o[h].merge(u))?o[h]=m:o.push(u)}}else s.map&&r--},this.items.length,0),new Wl(ca.from(o.reverse()),a)}}Wl.empty=new Wl(ca.empty,0);function jYe(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class Oc{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Oc(n.getMap().invert(),n,this.selection)}}}class Kd{constructor(e,n,r,o,a){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=a}}const BYe=20;function FYe(t,e,n,r){let o=n.getMeta(If),a;if(o)return o.historyState;n.getMeta(qYe)&&(t=new Kd(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(If))return s.getMeta(If).redo?new Kd(t.done.addTransform(n,void 0,r,j1(e)),t.undone,qH(n.mapping.maps),t.prevTime,t.prevComposition):new Kd(t.done,t.undone.addTransform(n,void 0,r,j1(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let i=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=i&&(t.prevTime<(n.time||0)-r.newGroupDelay||!zYe(n,t.prevRanges)),c=s?sO(t.prevRanges,n.mapping):qH(n.mapping.maps);return new Kd(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,j1(e)),Wl.empty,c,n.time,i??t.prevComposition)}else return(a=n.getMeta("rebased"))?new Kd(t.done.rebased(n,a),t.undone.rebased(n,a),sO(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Kd(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),sO(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function zYe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let a=0;a<e.length;a+=2)r<=e[a+1]&&o>=e[a]&&(n=!0)}),n}function qH(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,a,s)=>e.push(a,s));return e}function sO(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),a=e.map(t[r+1],-1);o<=a&&n.push(o,a)}return n}function UYe(t,e,n){let r=j1(e),o=If.get(e).spec.config,a=(n?t.undone:t.done).popEvent(e,r);if(!a)return null;let s=a.selection.resolve(a.transform.doc),i=(n?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),o,r),l=new Kd(n?i:a.remaining,n?a.remaining:i,null,0,-1);return a.transform.setSelection(s).setMeta(If,{redo:n,historyState:l})}let iO=!1,HH=null;function j1(t){let e=t.plugins;if(HH!=e){iO=!1,HH=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){iO=!0;break}}return iO}const If=new jn("history"),qYe=new jn("closeHistory");function HYe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new xn({key:If,state:{init(){return new Kd(Wl.empty,Wl.empty,null,0,-1)},apply(e,n,r){return FYe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?Nie:r=="historyRedo"?Lie:null;return!o||!e.editable?!1:(n.preventDefault(),o(e.state,e.dispatch))}}}})}function Die(t,e){return(n,r)=>{let o=If.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let a=UYe(o,n,t);a&&r(e?a.scrollIntoView():a)}return!0}}const Nie=Die(!1,!0),Lie=Die(!0,!0);_o.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new xn({key:new jn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const o=this.options.limit;if(o==null||o===0){t=!0;return}const a=this.storage.characters({node:r.doc});if(a>o){const s=a-o,i=0,l=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${o} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(i,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const o=this.storage.characters({node:n.doc}),a=this.storage.characters({node:e.doc});if(a<=r||o>r&&a>r&&a<=o)return!0;if(o>r&&a>r&&a>o||!e.getMeta("paste"))return!1;const i=e.selection.$head.pos,l=a-r,c=i-l,d=i;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>r)}})]}});var $Ye=_o.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[AYe(this.options)]}});_o.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new xn({key:new jn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=e,a=[];if(!n||!r)return Gr.create(t,[]);let s=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(o>=c&&o<=c+l.nodeSize-1))return!1;s+=1});let i=0;return t.descendants((l,c)=>{if(l.isText||!(o>=c&&o<=c+l.nodeSize-1))return!1;if(i+=1,this.options.mode==="deepest"&&s-i>0||this.options.mode==="shallowest"&&i>1)return this.options.mode==="deepest";a.push(ws.node(c,c+l.nodeSize,{class:this.options.className}))}),Gr.create(t,a)}}})]}});var VYe=_o.create({name:"gapCursor",addProseMirrorPlugins(){return[PYe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Zn(At(t,"allowGapCursor",n)))!=null?e:null}}});_o.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new xn({key:new jn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,o=[];if(!n)return null;const a=this.editor.isEmpty;return t.descendants((s,i)=>{const l=r>=i&&r<=i+s.nodeSize,c=!s.isLeaf&&KC(s);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];a&&d.push(this.options.emptyEditorClass);const u=ws.node(i,i+s.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:i,hasAnchor:l}):this.options.placeholder});o.push(u)}return this.options.includeChildren}),Gr.create(t,o)}}})]}});_o.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new xn({key:new jn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||Yse(n.selection)||t.view.dragging?null:Gr.create(n.doc,[ws.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function $H({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var GYe=_o.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new jn(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,o])=>o).filter(o=>(this.options.notAfter||[]).concat(n).includes(o.name));return[new xn({key:e,appendTransaction:(o,a,s)=>{const{doc:i,tr:l,schema:c}=s,d=e.getState(s),u=i.content.size,m=c.nodes[n];if(d)return l.insert(u,m.create())},state:{init:(o,a)=>{const s=a.tr.doc.lastChild;return!$H({node:s,types:r})},apply:(o,a)=>{if(!o.docChanged||o.getMeta("__uniqueIDTransaction"))return a;const s=o.doc.lastChild;return!$H({node:s,types:r})}}})]}}),KYe=_o.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Nie(t,e),redo:()=>({state:t,dispatch:e})=>Lie(t,e)}},addProseMirrorPlugins(){return[HYe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),WYe=_o.create({name:"starterKit",addExtensions(){var t,e,n,r;const o=[];return this.options.bold!==!1&&o.push(wWe.configure(this.options.bold)),this.options.blockquote!==!1&&o.push(vWe.configure(this.options.blockquote)),this.options.bulletList!==!1&&o.push(Eie.configure(this.options.bulletList)),this.options.code!==!1&&o.push(die.configure(this.options.code)),this.options.codeBlock!==!1&&o.push(_We.configure(this.options.codeBlock)),this.options.document!==!1&&o.push(kWe.configure(this.options.document)),this.options.dropcursor!==!1&&o.push($Ye.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&o.push(VYe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&o.push(IWe.configure(this.options.hardBreak)),this.options.heading!==!1&&o.push(PWe.configure(this.options.heading)),this.options.undoRedo!==!1&&o.push(KYe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&o.push(OWe.configure(this.options.horizontalRule)),this.options.italic!==!1&&o.push(LWe.configure(this.options.italic)),this.options.listItem!==!1&&o.push(Tie.configure(this.options.listItem)),this.options.listKeymap!==!1&&o.push(Iie.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&o.push(iYe.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&o.push(Oie.configure(this.options.orderedList)),this.options.paragraph!==!1&&o.push(xYe.configure(this.options.paragraph)),this.options.strike!==!1&&o.push(TYe.configure(this.options.strike)),this.options.text!==!1&&o.push(wYe.configure(this.options.text)),this.options.underline!==!1&&o.push(CYe.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&o.push(GYe.configure((r=this.options)==null?void 0:r.trailingNode)),o}}),YYe=WYe;const jie={tldraw_draw:{normal:{normal:{family:"tldraw_draw",src:{url:"tldraw_draw",format:"woff2"},weight:"normal"},bold:{family:"tldraw_draw",src:{url:"tldraw_draw_bold",format:"woff2"},weight:"bold"}},italic:{normal:{family:"tldraw_draw",src:{url:"tldraw_draw_italic",format:"woff2"},weight:"normal",style:"italic"},bold:{family:"tldraw_draw",src:{url:"tldraw_draw_italic_bold",format:"woff2"},weight:"bold",style:"italic"}}},tldraw_sans:{normal:{normal:{family:"tldraw_sans",src:{url:"tldraw_sans",format:"woff2"},weight:"normal",style:"normal"},bold:{family:"tldraw_sans",src:{url:"tldraw_sans_bold",format:"woff2"},weight:"bold",style:"normal"}},italic:{normal:{family:"tldraw_sans",src:{url:"tldraw_sans_italic",format:"woff2"},weight:"normal",style:"italic"},bold:{family:"tldraw_sans",src:{url:"tldraw_sans_italic_bold",format:"woff2"},weight:"bold",style:"italic"}}},tldraw_serif:{normal:{normal:{family:"tldraw_serif",src:{url:"tldraw_serif",format:"woff2"},weight:"normal",style:"normal"},bold:{family:"tldraw_serif",src:{url:"tldraw_serif_bold",format:"woff2"},weight:"bold",style:"normal"}},italic:{normal:{family:"tldraw_serif",src:{url:"tldraw_serif_italic",format:"woff2"},weight:"normal",style:"italic"},bold:{family:"tldraw_serif",src:{url:"tldraw_serif_italic_bold",format:"woff2"},weight:"bold",style:"italic"}}},tldraw_mono:{normal:{normal:{family:"tldraw_mono",src:{url:"tldraw_mono",format:"woff2"},weight:"normal",style:"normal"},bold:{family:"tldraw_mono",src:{url:"tldraw_mono_bold",format:"woff2"},weight:"bold",style:"normal"}},italic:{normal:{family:"tldraw_mono",src:{url:"tldraw_mono_italic",format:"woff2"},weight:"normal",style:"italic"},bold:{family:"tldraw_mono",src:{url:"tldraw_mono_italic_bold",format:"woff2"},weight:"bold",style:"italic"}}}},XYe=oo(jie).flatMap(t=>oo(t).flatMap(e=>Object.values(e))),JYe=uc.create({name:"textDirection",addGlobalAttributes(){return[{types:["heading","paragraph"],attributes:{dir:{default:"auto",parseHTML:t=>{const e=t.getAttribute("dir");return e&&["ltr","rtl","auto"].includes(e)?e:"auto"},renderHTML:t=>({dir:t.dir})}}}]}}),QYe=uc.create({name:"keyboardShiftEnterHandler",addKeyboardShortcuts(){return{"Shift-Enter":({editor:t})=>t.commands.enter()}}});mWe.config.excludes=void 0;pie.config.priority=1100;const Uv=[YYe.configure({blockquote:!1,codeBlock:!1,horizontalRule:!1,link:{openOnClick:!1,autolink:!0}}),pie,QYe,JYe],ZYe=new as;function gj(t,e){return ZYe.get(e,()=>{var o;const n=((o=t.getTextOptions().tipTapConfig)==null?void 0:o.extensions)??Uv;return v7e(e,n).replaceAll('<p dir="auto"></p>',"<p><br /></p>")??""})}function z0(t,e){return`<div class="tl-rich-text">${gj(t,e)}</div>`}const eXe=new as;function ao(t){return t.content.length===1&&!t.content[0].content}function Sp(t,e){return ao(e)?"":eXe.get(e,()=>{var r;const n=((r=t.getTextOptions().tipTapConfig)==null?void 0:r.extensions)??Uv;return E7e(e,n,{blockSeparator:`
`})})}function tXe(t,e){var r;const n=((r=t.getTextOptions().tipTapConfig)==null?void 0:r.extensions)??Uv;return x7e(e,n)}function Bie(t,e,n){for(const s of t.marks)s.type.name==="bold"&&e.weight!=="bold"&&(e={...e,weight:"bold"}),s.type.name==="italic"&&e.style!=="italic"&&(e={...e,style:"italic"}),s.type.name==="code"&&e.family!=="tldraw_mono"&&(e={...e,family:"tldraw_mono"});const r=vo(jie,e.family);if(!r)return e;const o=vo(r,e.style);if(!o)return e;const a=vo(o,e.weight);return a&&n(a),e}const nXe="  ",n0=class n0{static normalizeText(e){return e.replace(n0.fixNewLines,`
`)}static normalizeTextForDom(e){return e.replace(n0.fixNewLines,`
`).split(`
`).map(n=>n||" ").join(`
`)}};L(n0,"fixNewLines",/\r?\n|\r/g);let VT=n0;const rXe=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function Fie(t){return rXe.test(t)}function oXe(t){return t.replace(/\t/g,nXe)}function aXe(t){const e=t.split(`
`);for(;e[0]&&e[0].trim().length===0;)e.shift();let n=1/0;for(const r of e)if(r.trim().length>0){const o=r.length-r.trimStart().length;n=Math.min(n,o)}return e.map(r=>r.slice(n)).join(`
`)}const zie={"&amp;":"&","&quot;":'"',"&apos;":"'","&#27;":"'","&#34;":'"',"&#38;":"&","&#39;":"'","&#8211;":"","&#8212;":"","&#8216;":"","&#8217;":"","&#8220;":"","&#8221;":"","&#8230;":""},sXe=new RegExp(Object.keys(zie).join("|"),"g");function Uie(t){return t.replace(sXe,e=>zie[e])}function iXe(t){return t.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}function lXe(t){return iXe(aXe(oXe(t)))}const cXe=5e3,uXe=10*1024*1024;function dXe(t,e){t.registerExternalAssetHandler("file",async n=>pXe(t,n,e)),t.registerExternalAssetHandler("url",async n=>mXe(t,n,e)),t.registerExternalContentHandler("svg-text",async n=>hXe(t,n)),t.registerExternalContentHandler("embed",n=>gXe(t,n)),t.registerExternalContentHandler("files",async n=>bXe(t,n,e)),t.registerExternalContentHandler("file-replace",async n=>fXe(t,n,e)),t.registerExternalContentHandler("text",async n=>yXe(t,n)),t.registerExternalContentHandler("url",async n=>vXe(t,n,e)),t.registerExternalContentHandler("tldraw",async n=>xXe(t,n)),t.registerExternalContentHandler("excalidraw",async n=>SXe(t,n))}async function pXe(t,{file:e,assetId:n},r){bj(e,r)||dt(!1,"File checks failed");const a=await $ie(e,r,n),s=await t.uploadAsset(a,e);return a.props.src=s.src,s.meta&&(a.meta={...a.meta,...s.meta}),lm.create(a)}async function fXe(t,{file:e,shapeId:n,isImage:r},o){bj(e,o)||dt(!1,"File checks failed");const s=t.getShape(n);s||dt(!1,"Shape not found");const i=NK(await e.arrayBuffer()),l=lm.createId(i);t.createTemporaryAssetPreview(l,e);const c=await qie(e,l,r,!r);if(t.createAssets([c]),s.type==="image"){const u=s,m=u.props.crop;let h=c.props.w,y=c.props.h,v=u.x,x=u.y,S=m;if(m){const T=Qqe(u,c.props.w,c.props.h);S=T.crop,h=T.w,y=T.h,v=T.x,x=T.y}t.updateShapes([{id:u.id,type:u.type,props:{assetId:l,crop:S,w:h,h:y},x:v,y:x}])}else s.type==="video"&&t.updateShapes([{id:s.id,type:s.type,props:{assetId:l,w:c.props.w,h:c.props.h}}]);const d=await t.getAssetForExternalContent({type:"file",file:e,assetId:l});return t.updateAssets([{...d,id:l}]),d}async function mXe(t,{url:e},{toasts:n,msg:r}){var a,s,i,l,c;let o;try{const u=await(await Vu(e,{method:"GET",mode:"no-cors"})).text(),m=new DOMParser().parseFromString(u,"text/html");o={image:((a=m.head.querySelector('meta[property="og:image"]'))==null?void 0:a.getAttribute("content"))??"",favicon:((s=m.head.querySelector('link[rel="apple-touch-icon"]'))==null?void 0:s.getAttribute("href"))??((i=m.head.querySelector('link[rel="icon"]'))==null?void 0:i.getAttribute("href"))??"",title:((l=m.head.querySelector('meta[property="og:title"]'))==null?void 0:l.getAttribute("content"))??e,description:((c=m.head.querySelector('meta[property="og:description"]'))==null?void 0:c.getAttribute("content"))??""},o.image.startsWith("http")||(o.image=new URL(o.image,e).href),o.favicon.startsWith("http")||(o.favicon=new URL(o.favicon,e).href)}catch(d){console.error(d),n.addToast({title:r("assets.url.failed"),severity:"error"}),o={image:"",favicon:"",title:"",description:""}}return{id:lm.createId(DK(e)),typeName:"asset",type:"bookmark",props:{src:e,description:o.description,image:o.image,favicon:o.favicon,title:o.title},meta:{}}}async function hXe(t,{point:e,text:n}){const r=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),o=new DOMParser().parseFromString(n,"image/svg+xml").querySelector("svg");if(!o)throw new Error("No <svg/> element present");let a=parseFloat(o.getAttribute("width")||"0"),s=parseFloat(o.getAttribute("height")||"0");if(!(a&&s)){document.body.appendChild(o);const l=o.getBoundingClientRect();document.body.removeChild(o),a=l.width,s=l.height}const i=await t.getAssetForExternalContent({type:"file",file:new File([n],"asset.svg",{type:"image/svg+xml"})});if(!i)throw Error("Could not create an asset");Hie(t,[i],r)}function gXe(t,{point:e,url:n,embed:r}){const o=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),{width:a,height:s}=r,i=lr(),l=Gi(new R(o.x-(a||450)/2,o.y-(s||450)/2),t),c={id:i,type:"embed",x:l.x,y:l.y,props:{w:a,h:s,url:n}};t.canCreateShape(c)&&t.createShape(c).select(i)}async function bXe(t,{point:e,files:n},r){const{acceptedImageMimeTypes:o=Tg,toasts:a,msg:s}=r;if(n.length>t.options.maxFilesAtOnce){a.addToast({title:s("assets.files.amount-too-many"),severity:"error"});return}const i=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),l=new R(i.x,i.y),c=[],d=[];for(const u of n){if(!bj(u,r))continue;const h=await $ie(u,r);o.includes(u.type)&&t.createTemporaryAssetPreview(h.id,u),c.push(h),d.push({asset:h,file:u})}Promise.allSettled(d.map(async u=>{try{const m=await t.getAssetForExternalContent({type:"file",file:u.file});if(!m)throw Error("Could not create an asset");t.updateAssets([{...m,id:u.asset.id}])}catch(m){a.addToast({title:s("assets.files.upload-failed"),severity:"error"}),console.error(m),t.deleteAssets([u.asset.id]);return}})),Hie(t,c,l)}async function yXe(t,{point:e,text:n,html:r}){const o=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),a=t.getShapeUtil("text").getDefaultProps(),s=lXe(n),i=r?tXe(t,r):Ma(s);let l,c,d,u="middle";const m=r??s.replace(/\n/g,"<br>"),h=r?i.content.length>1:s.split(`
`).length>1,y=Fie(s);h&&(u=h?y?"end":"start":"middle");const v=t.textMeasure.measureHtml(m,{..._s,fontFamily:yp[a.font],fontSize:ag[a.size],maxWidth:null}),x=Math.min(h?t.getViewportPageBounds().width*.9:920,Math.max(200,t.getViewportPageBounds().width*.9));if(v.w>x){const C=t.textMeasure.measureHtml(m,{..._s,fontFamily:yp[a.font],fontSize:ag[a.size],maxWidth:x});l=C.w,c=C.h,d=!1,u=y?"end":"start"}else l=Math.max(v.w,10),c=Math.max(v.h,10),d=!0;o.y-c/2<t.getViewportPageBounds().minY+40&&(o.y=t.getViewportPageBounds().minY+40+c/2);const S=Gi(new R(o.x-l/2,o.y-c/2),t),T=lr();t.createShapes([{id:T,type:"text",x:S.x,y:S.y,props:{richText:i,textAlign:u,autoSize:d,w:l}}])}async function vXe(t,{point:e,url:n},{toasts:r,msg:o}){const a=t.getShapeUtil("embed"),s=a==null?void 0:a.getEmbedDefinition(n);if(s&&s.definition.embedOnPaste!==!1)return t.putExternalContent({type:"embed",url:s.url,point:e,embed:s.definition});const i=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center);if(!(await Ste(t,{url:n,center:i})).ok){r.addToast({title:o("assets.url.failed"),severity:"error"});return}}async function xXe(t,{point:e,content:n}){t.run(()=>{const r=t.getSelectionPageBounds();t.markHistoryStoppingPoint("paste");for(const a of n.shapes)n.rootShapeIds.includes(a.id)&&(a.isLocked=!1);t.putContentOntoCurrentPage(n,{point:e,select:!0});const o=t.getSelectionPageBounds();r&&o&&(r!=null&&r.collides(o))&&(t.updateInstanceState({isChangingStyle:!0}),t.timers.setTimeout(()=>{t.updateInstanceState({isChangingStyle:!1})},150))})}async function SXe(t,{point:e,content:n}){t.run(()=>{nGe(t,n,e)})}async function qie(t,e,n,r,o){let a=t.type;t.type==="video/quicktime"&&(a="video/mp4");const s=n?await Li.getImageSize(t):await Li.getVideoSize(t),i=await Li.isAnimated(t)||r,l={id:e,type:n?"image":"video",typeName:"asset",props:{name:t.name,src:"",w:s.w,h:s.h,fileSize:t.size,mimeType:a,isAnimated:i},meta:{}};if(o&&isFinite(o)){const c={w:l.props.w,h:l.props.h},d=tGe(c,{w:o,h:o});c!==d&&Li.isStaticImageType(t.type)&&(l.props.w=d.w,l.props.h=d.h)}return l}async function Hie(t,e,n){if(!e.length)return[];const r=R.From(n),o=[];for(let a=0;a<e.length;a++){const s=e[a];switch(s.type){case"image":{o.push({id:lr(),type:"image",x:r.x,y:r.y,opacity:1,props:{assetId:s.id,w:s.props.w,h:s.props.h}}),r.x+=s.props.w;break}case"video":o.push({id:lr(),type:"video",x:r.x,y:r.y,opacity:1,props:{assetId:s.id,w:s.props.w,h:s.props.h}}),r.x+=s.props.w}}return t.run(()=>{const a=e.filter(s=>!t.getAsset(s.id));t.store.atomic(()=>{t.canCreateShapes(o)&&(a.length&&t.createAssets(a),t.createShapes(o).select(...o.map(s=>s.id)),EXe(t,n))})}),o.map(a=>a.id)}function EXe(t,e){const n=t.getViewportPageBounds();let r=t.getSelectionPageBounds();if(r){const o=r.center.sub(e);t.updateShapes(t.getSelectedShapes().map(a=>{const s=t.getShapeParentTransform(a).decompose().rotation,i=R.Rot(o,-s);return{id:a.id,type:a.type,x:a.x-i.x,y:a.y-i.y}}))}if(r=t.getSelectionPageBounds(),r&&t.getInstanceState().isGridMode){const o=t.getDocumentSettings().gridSize,a=new R(r.minX,r.minY),s=a.clone().snapToGrid(o),i=R.Sub(a,s);t.updateShapes(t.getSelectedShapes().map(l=>{const c={x:l.x-i.x,y:l.y-i.y};return{id:l.id,type:l.type,x:c.x,y:c.y}}))}r=t.getSelectionPageBounds(),r&&!n.contains(r)&&t.zoomToSelection({animation:{duration:t.options.animationMediumMs}})}function bj(t,e){const{acceptedImageMimeTypes:n=Tg,acceptedVideoMimeTypes:r=fw,maxAssetSize:o=uXe,toasts:a,msg:s}=e,i=n.includes(t.type),l=r.includes(t.type);if(!i&&!l)return a.addToast({title:s("assets.files.type-not-allowed"),severity:"error"}),!1;if(t.size>o){const c=d=>{if(d===0)return"0 bytes";const u=["bytes","KB","MB","GB","TB","PB"],m=1024,h=Math.floor(Math.log(d)/Math.log(m)),y=d/Math.pow(m,h);return`${y%1===0?y.toString():y.toFixed(1)} ${u[h]}`};return a.addToast({title:s("assets.files.size-too-big"),description:s("assets.files.maximum-size").replace("{size}",c(o)),severity:"error"}),!1}return t.type?!0:(a.addToast({title:s("assets.files.upload-failed"),severity:"error"}),console.error("No mime type"),!1)}async function $ie(t,e,n){const{acceptedImageMimeTypes:r=Tg,acceptedVideoMimeTypes:o=fw,maxImageDimension:a=cXe}=e,s=r.includes(t.type),i=o.includes(t.type),l=NK(await t.arrayBuffer());return n??(n=lm.createId(l)),await qie(t,n,s,i,a)}var yO;let TXe=(yO=class extends ht{constructor(){super(...arguments);L(this,"isPrecise",!1);L(this,"isPreciseTimerId",null);L(this,"preciseTargetId",null)}onPointerMove(){this.update()}onPointerDown(n){this.parent.transition("pointing",{...n,isPrecise:this.isPrecise})}onEnter(){this.editor.setCursor({type:"cross",rotation:0}),this.update()}onCancel(){this.editor.setCurrentTool("select")}onExit(){VL(this.editor),this.isPreciseTimerId!==null&&clearTimeout(this.isPreciseTimerId)}onKeyDown(){this.update()}onKeyUp(n){var r;if(this.update(),n.key==="Enter"){if(this.editor.getIsReadonly())return null;const o=this.editor.getOnlySelectedShape();o&&this.editor.getShapeUtil(o).canEdit(o)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(o.id),(r=this.editor.root.getCurrent())==null||r.transition("editing_shape",{...n,target:"shape",shape:o}))}}update(){const n=this.editor.getShapeUtil("arrow"),r=qC({editor:this.editor,pointInPageSpace:this.editor.inputs.currentPagePoint,arrow:void 0,isPrecise:this.isPrecise,currentBinding:void 0,oppositeBinding:void 0});r&&r.target.id!==this.preciseTargetId?(this.isPreciseTimerId!==null&&clearTimeout(this.isPreciseTimerId),this.preciseTargetId=r.target.id,this.isPreciseTimerId=this.editor.timers.setTimeout(()=>{this.isPrecise=!0,this.update()},n.options.hoverPreciseTimeout)):!r&&this.preciseTargetId&&(this.isPrecise=!1,this.preciseTargetId=null,this.isPreciseTimerId!==null&&clearTimeout(this.isPreciseTimerId))}},L(yO,"id","idle"),yO);var vO;let wXe=(vO=class extends ht{constructor(){super(...arguments);L(this,"shape");L(this,"isPrecise",!1);L(this,"isPreciseTimerId",null);L(this,"markId","")}onEnter(n){if(this.markId="",this.isPrecise=!!n.isPrecise,!qC({editor:this.editor,pointInPageSpace:this.editor.inputs.currentPagePoint,arrow:void 0,isPrecise:this.isPrecise,currentBinding:void 0,oppositeBinding:void 0})&&(this.createArrowShape(),!this.shape)){this.cancel();return}this.startPreciseTimeout()}onExit(){this.shape=void 0,VL(this.editor),this.clearPreciseTimeout()}onPointerMove(){if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape){this.cancel();return}this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:{id:"end",type:"vertex",index:"a3",x:0,y:0},isCreating:!0,creatingMarkId:this.markId||void 0,onInteractionEnd:"arrow"})}}onPointerUp(){this.cancel()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.shape&&this.editor.bailToMark(this.markId),this.parent.transition("idle")}createArrowShape(){var u;const{originPagePoint:n}=this.editor.inputs,r=lr();this.markId=this.editor.markHistoryStoppingPoint(`creating_arrow:${r}`);const o=Gi(n,this.editor);this.editor.createShape({id:r,type:"arrow",x:o.x,y:o.y,props:{scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}});const a=this.editor.getShape(r);if(!a)return;const s=this.editor.getShapeHandles(a);if(!s)throw Error("expected handles for arrow");const i=this.editor.getShapeUtil("arrow"),l=this.shape,c=s.find(m=>m.id==="start"),d=(u=i.onHandleDrag)==null?void 0:u.call(i,a,{handle:{...c,x:0,y:0},isPrecise:!0,isCreatingShape:!0,initial:l});d&&this.editor.updateShapes([d]),this.shape=this.editor.getShape(r),this.editor.select(r)}updateArrowShapeEndHandle(){var o,a;const n=this.shape;if(!n)throw Error("expected shape");const r=this.editor.getShapeHandles(n);if(!r)throw Error("expected handles for arrow");{const s=this.editor.getShapeUtil("arrow"),i=this.shape,l=r.find(d=>d.id==="start"),c=(o=s.onHandleDrag)==null?void 0:o.call(s,n,{handle:{...l,x:0,y:0},isPrecise:this.isPrecise,isCreatingShape:!0,initial:i});c&&this.editor.updateShapes([c])}{const s=this.editor.getShapeUtil("arrow"),i=this.shape,l=this.editor.getPointInShapeSpace(n,this.editor.inputs.currentPagePoint),c=r.find(u=>u.id==="end"),d=(a=s.onHandleDrag)==null?void 0:a.call(s,this.editor.getShape(n),{handle:{...c,x:l.x,y:l.y},isPrecise:this.isPrecise,isCreatingShape:!0,initial:i});d&&this.editor.updateShapes([d])}this.shape=this.editor.getShape(n.id)}startPreciseTimeout(){const n=this.editor.getShapeUtil("arrow");this.isPreciseTimerId=this.editor.timers.setTimeout(()=>{this.getIsActive()&&(this.isPrecise=!0)},n.options.pointingPreciseTimeout)}clearPreciseTimeout(){this.isPreciseTimerId!==null&&clearTimeout(this.isPreciseTimerId)}},L(vO,"id","pointing"),vO);class FR extends ht{constructor(){super(...arguments);L(this,"shapeType","arrow")}static children(){return[TXe,wXe]}}L(FR,"id","arrow"),L(FR,"initial","idle");class yj extends ht{constructor(){super(...arguments);L(this,"info",{});L(this,"initialShape");L(this,"shapeType",this.parent.id==="highlight"?"highlight":"draw");L(this,"util",this.editor.getShapeUtil(this.shapeType));L(this,"isPen",!1);L(this,"isPenOrStylus",!1);L(this,"segmentMode","free");L(this,"didJustShiftClickToExtendPreviousShapeLine",!1);L(this,"pagePointWhereCurrentSegmentChanged",{});L(this,"pagePointWhereNextSegmentChanged",null);L(this,"lastRecordedPoint",{});L(this,"mergeNextPoint",!1);L(this,"currentLineLength",0);L(this,"markId",null)}onEnter(n){this.markId=null,this.info=n,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.startShape()}onPointerMove(){const{inputs:n}=this.editor;if(this.isPen&&!n.isPen&&this.markId){this.editor.bailToMark(this.markId),this.startShape();return}this.isPenOrStylus?R.Dist(n.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.getZoomLevel()?(this.lastRecordedPoint=n.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateDrawingShape()}onKeyDown(n){if(n.key==="Shift")switch(this.segmentMode){case"free":{this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_free":this.segmentMode="starting_straight"}this.updateDrawingShape()}onKeyUp(n){if(n.key==="Shift")switch(this.editor.snaps.clearIndicators(),this.segmentMode){case"straight":{this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_straight":{this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";break}}this.updateDrawingShape()}onExit(){this.editor.snaps.clearIndicators(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()}canClose(){return this.shapeType!=="highlight"}getIsClosed(n,r,o){if(!this.canClose())return!1;const a=Zo[r],s=n[0].points[0],i=n[n.length-1],l=i.points[i.points.length-1];return s!==l&&this.currentLineLength>a*4*o&&R.DistMin(s,l,a*2*o)}startShape(){const{inputs:{originPagePoint:n,isPen:r}}=this.editor;this.markId=this.editor.markHistoryStoppingPoint("draw start");const{z:o=.5}=this.info.point;this.isPen=r,this.isPenOrStylus=r||o>0&&o<.5||o>.5&&o<1;const a=this.isPenOrStylus?o*1.25:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=n.clone(),this.initialShape){const l=this.editor.getShape(this.initialShape.id);if(l&&this.segmentMode==="straight"){this.didJustShiftClickToExtendPreviousShapeLine=!0;const c=Ca(l.props.segments);if(!c)throw Error("Expected a previous segment!");const d=Ca(c.points);if(!d)throw Error("Expected a previous point!");const{x:u,y:m}=this.editor.getPointInShapeSpace(l,n).toFixed(),h={type:this.segmentMode,points:[{x:d.x,y:d.y,z:+a.toFixed(2)},{x:u,y:m,z:+a.toFixed(2)}]},y=De.applyToPoint(this.editor.getShapePageTransform(l.id),d);this.pagePointWhereCurrentSegmentChanged=y,this.pagePointWhereNextSegmentChanged=null;const v=[...l.props.segments,h];this.currentLineLength<Zo[l.props.size]*4&&(this.currentLineLength=this.getLineLength(v));const x={id:l.id,type:this.shapeType,props:{segments:v}};this.canClose()&&(x.props.isClosed=this.getIsClosed(v,l.props.size,l.props.scale)),this.editor.updateShapes([x]);return}}this.pagePointWhereCurrentSegmentChanged=n.clone();const s=lr();if(this.editor.createShape({id:s,type:this.shapeType,x:n.x,y:n.y,props:{isPen:this.isPenOrStylus,scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+a.toFixed(2)}]}]}}),!this.editor.getShape(s)){this.cancel();return}this.currentLineLength=0,this.initialShape=this.editor.getShape(s)}updateDrawingShape(){const{initialShape:n}=this,{inputs:r}=this.editor;if(!n)return;const{id:o,props:{size:a,scale:s}}=n,i=this.editor.getShape(o);if(!i)return;const{segments:l}=i.props,{x:c,y:d,z:u}=this.editor.getPointInShapeSpace(i,r.currentPagePoint).toFixed(),m=this.isPenOrStylus?+(r.currentPagePoint.z*1.25).toFixed(2):.5,h={x:c,y:d,z:m};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:y}=this;if(y===null)throw Error("We should have a point where the segment changed");if(R.Dist2(y,r.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const x=Ca(l);if(!x)throw Error("Expected a previous segment!");const S=Ca(x.points);if(!S)throw Error("Expected a previous last point!");let T;const C=this.editor.getPointInShapeSpace(i,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if(x.type==="straight"){this.currentLineLength+=R.Dist(S,C),T={type:"straight",points:[{...S},C]};const I=this.editor.getShapePageTransform(i);this.pagePointWhereCurrentSegmentChanged=De.applyToPoint(I,S)}else T={type:"straight",points:[C,h]};const _={id:o,type:this.shapeType,props:{segments:[...l,T]}};this.canClose()&&(_.props.isClosed=this.getIsClosed(l,a,s)),this.editor.updateShapes([_])}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:y}=this;if(y===null)throw Error("We should have a point where the segment changed");if(R.Dist2(y,r.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const x=l.slice(),S=x[x.length-1],T=Ca(S.points);if(!T)throw Error("No previous point!");const C={type:"free",points:[...R.PointsBetween(T,h,6).map(P=>({x:Kl(P.x),y:Kl(P.y),z:Kl(P.z)}))]},_=[...x,C];this.currentLineLength<Zo[i.props.size]*4&&(this.currentLineLength=this.getLineLength(_));const I={id:o,type:this.shapeType,props:{segments:_}};this.canClose()&&(I.props.isClosed=this.getIsClosed(_,a,s)),this.editor.updateShapes([I])}break}case"straight":{const y=l.slice(),v=y[y.length-1],{pagePointWhereCurrentSegmentChanged:x}=this,{ctrlKey:S,currentPagePoint:T}=this.editor.inputs;if(!x)throw Error("We should have a point where the segment changed");let C,_=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(_=!S,this.didJustShiftClickToExtendPreviousShapeLine=!1):_=!S;let I=this.editor.getPointInShapeSpace(i,T).toFixed().toJson(),P=!1,M;if((this.editor.user.getIsSnapMode()?!S:S)&&y.length>2){let B,V=8/this.editor.getZoomLevel();for(let z=0,H=l.length-2;z<H;z++){const j=l[z];if(!j)break;if(j.type==="free")continue;const q=j.points[0],U=Ca(j.points);if(!(q&&U))continue;const Y=R.NearestPointOnLineSegment(q,U,I);if(R.DistMin(Y,I,V)){B=Y.toFixed().toJson(),V=R.Dist(Y,I),M=j;break}}B&&(P=!0,I=B)}if(P&&M){const B=this.editor.getShapePageTransform(i),V=M.points[0],z=Ca(M.points);if(!z)throw Error("Expected a last point!");const H=De.applyToPoint(B,V),j=De.applyToPoint(B,z),q=De.applyToPoint(B,I);this.editor.snaps.setIndicators([{id:Ln(),type:"points",points:[H,q,j]}])}else{if(this.editor.snaps.clearIndicators(),_){const B=R.Angle(x,T),z=ME(B,24)-B;C=R.RotWith(T,x,z)}else C=T;I=this.editor.getPointInShapeSpace(i,C).toFixed().toJson()}this.currentLineLength+=R.Dist(v.points[0],I),y[y.length-1]={...v,type:"straight",points:[v.points[0],I]};const F={id:o,type:this.shapeType,props:{segments:y}};this.canClose()&&(F.props.isClosed=this.getIsClosed(l,a,s)),this.editor.updateShapes([F]);break}case"free":{const y=l.slice(),v=y[y.length-1],x=[...v.points];if(x.length&&this.mergeNextPoint){const{z:T}=x[x.length-1];x[x.length-1]={x:h.x,y:h.y,z:T?Math.max(T,h.z):h.z}}else this.currentLineLength+=R.Dist(x[x.length-1],h),x.push(h);y[y.length-1]={...v,points:x},this.currentLineLength<Zo[i.props.size]*4&&(this.currentLineLength=this.getLineLength(y));const S={id:o,type:this.shapeType,props:{segments:y}};if(this.canClose()&&(S.props.isClosed=this.getIsClosed(y,a,s)),this.editor.updateShapes([S]),x.length>this.util.options.maxPointsPerShape){this.editor.updateShapes([{id:o,type:this.shapeType,props:{isComplete:!0}}]);const T=lr(),C=this.editor.getShape(o).props;if(!this.editor.canCreateShapes([T]))return this.cancel();this.editor.createShape({id:T,type:this.shapeType,x:Kl(r.currentPagePoint.x),y:Kl(r.currentPagePoint.y),props:{isPen:this.isPenOrStylus,scale:C.scale,segments:[{type:"free",points:[{x:0,y:0,z:this.isPenOrStylus?+(u*1.25).toFixed():.5}]}]}});const _=this.editor.getShape(T);if(!_)return this.cancel();this.initialShape=bo(_),this.mergeNextPoint=!1,this.lastRecordedPoint=r.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(n){let r=0;for(const o of n)for(let a=0;a<o.points.length-1;a++){const s=o.points[a],i=o.points[a+1];r+=R.Dist2(i,s)}return Math.sqrt(r)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())}complete(){const{initialShape:n}=this;n&&(this.editor.updateShapes([{id:n.id,type:n.type,props:{isComplete:!0}}]),this.parent.transition("idle"))}cancel(){this.parent.transition("idle",this.info)}}L(yj,"id","drawing");var xO;let Vie=(xO=class extends ht{onPointerDown(e){this.parent.transition("drawing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},L(xO,"id","idle"),xO);class Ey extends ht{constructor(){super(...arguments);L(this,"shapeType","draw")}static children(){return[Vie,yj]}onExit(){const n=this.children.drawing;n.initialShape=void 0}}L(Ey,"id","draw"),L(Ey,"initial","idle"),L(Ey,"isLockable",!1),L(Ey,"useCoalescedEvents",!0);class zR extends RM{constructor(){super(...arguments);L(this,"shapeType","frame")}onCreate(n){if(!n)return;const r=this.editor.getShapePageBounds(n),o=[],a=this.editor.getShapeAncestors(n).map(s=>s.id);this.editor.getSortedChildIdsForParent(n.parentId).map(s=>{const i=this.editor.getShape(s);if(!i||i.id===n.id||i.isLocked)return;const l=this.editor.getShapePageBounds(i);l&&r.contains(l)&&CXe(i,a,n)&&o.push(i.id)}),this.editor.reparentShapes(o,n.id),this.editor.getInstanceState().isToolLocked?this.editor.setCurrentTool("frame"):this.editor.setCurrentTool("select.idle")}}L(zR,"id","frame"),L(zR,"initial","idle");function CXe(t,e,n){return e.includes(t.id)?!1:t.parentId===n.parentId}var SO;let AXe=(SO=class extends ht{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onKeyUp(e){var n;if(e.key==="Enter"){if(this.editor.getIsReadonly())return null;const r=this.editor.getOnlySelectedShape();r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),(n=this.editor.root.getCurrent())==null||n.transition("editing_shape",{...e,target:"shape",shape:r}))}}onCancel(){this.editor.setCurrentTool("select")}},L(SO,"id","idle"),SO);var EO;let _Xe=(EO=class extends ht{onPointerUp(){this.complete()}onPointerMove(e){if(this.editor.inputs.isDragging){const{originPagePoint:n}=this.editor.inputs,r=lr(),o=this.editor.markHistoryStoppingPoint(`creating_geo:${r}`),a=Gi(n,this.editor);if(this.editor.createShapes([{id:r,type:"geo",x:a.x,y:a.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(Bc),scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}}]).select(r),!this.editor.getShape(r)){this.cancel();return}this.editor.setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creatingMarkId:o,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}complete(){const{originPagePoint:e}=this.editor.inputs,n=lr();this.editor.markHistoryStoppingPoint(`creating_geo:${n}`);const r=this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1,o=this.editor.getStyleForNextShape(Bc),a=o==="star"?{w:200,h:190}:o==="cloud"?{w:300,h:180}:{w:200,h:200};this.editor.createShapes([{id:n,type:"geo",x:e.x,y:e.y,props:{geo:this.editor.getStyleForNextShape(Bc),scale:r,...a}}]);const s=this.editor.getShape(n);if(!s){this.cancel();return}const{w:i,h:l}=s.props,c=new R(i/2,l/2).mul(r),d=this.editor.getShapeParentTransform(s);d&&c.rot(-d.rotation());const u=Gi(new R(s.x-c.x,s.y-c.y),this.editor);this.editor.select(n),this.editor.updateShape({id:s.id,type:"geo",x:u.x,y:u.y,props:{geo:this.editor.getStyleForNextShape(Bc),w:i*r,h:l*r}}),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle")}},L(EO,"id","pointing"),EO);class UR extends ht{constructor(){super(...arguments);L(this,"shapeType","geo")}static children(){return[AXe,_Xe]}}L(UR,"id","geo"),L(UR,"initial","idle");class Ty extends ht{constructor(){super(...arguments);L(this,"shapeType","highlight")}static children(){return[Vie,yj]}onExit(){const n=this.children.drawing;n.initialShape=void 0}}L(Ty,"id","highlight"),L(Ty,"initial","idle"),L(Ty,"useCoalescedEvents",!0),L(Ty,"isLockable",!1);var TO;let kXe=(TO=class extends ht{constructor(){super(...arguments);L(this,"shapeId","")}onEnter(n){this.shapeId=n.shapeId,this.editor.setCursor({type:"cross",rotation:0})}onPointerDown(){this.parent.transition("pointing",{shapeId:this.shapeId})}onCancel(){this.editor.setCurrentTool("select")}},L(TO,"id","idle"),TO);const VH=2;var wO;let IXe=(wO=class extends ht{constructor(){super(...arguments);L(this,"shape",{});L(this,"markId")}onEnter(n){const{inputs:r}=this.editor,{currentPagePoint:o}=r;this.markId=void 0;const a=n.shapeId&&this.editor.getShape(n.shapeId);if(a&&r.shiftKey){this.markId=this.editor.markHistoryStoppingPoint(`creating_line:${a.id}`),this.shape=a;const s=this.editor.getShapeHandles(this.shape);if(!s)return;const i=s.filter(y=>y.type==="vertex").sort(oa),l=i[i.length-1],c=i[i.length-2],d=De.applyToPoint(this.editor.getShapeParentTransform(this.shape),new R(this.shape.x,this.shape.y)),u=R.Sub(o,d).addXY(.1,.1),m=Gi(u,this.editor),h=bo(this.shape.props.points);if(R.DistMin(l,c,VH)||R.DistMin(m,l,VH))h[l.id]={id:l.id,index:l.index,x:m.x,y:m.y};else{const y=_l(l.index);h[y]={id:y,index:y,x:m.x,y:m.y}}this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{points:h}}])}else{const s=lr();this.markId=this.editor.markHistoryStoppingPoint(`creating_line:${s}`);const i=Gi(o,this.editor);if(this.editor.createShapes([{id:s,type:"line",x:i.x,y:i.y,props:{scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}}]),!this.editor.getShape(s)){this.cancel();return}this.editor.select(s),this.shape=this.editor.getShape(s)}}onPointerMove(){if(this.shape&&this.editor.inputs.isDragging){const n=this.editor.getShapeHandles(this.shape);if(!n)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");const r=Ca(n);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,creatingMarkId:this.markId,handle:{...r,x:r.x-.1,y:r.y-.1},onInteractionEnd:"line"})}}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.parent.transition("idle"),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators()}complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}cancel(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}},L(wO,"id","pointing"),wO);class qR extends ht{constructor(){super(...arguments);L(this,"shapeType","line")}static children(){return[kXe,IXe]}}L(qR,"id","line"),L(qR,"initial","idle");var CO;let PXe=(CO=class extends ht{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},L(CO,"id","idle"),CO);const OXe=0,ir=200,JC=new R(ir/2,ir/2),Gie=10,MXe=t=>[[["a1"],new R(ir*.5,ir*-.5-t.options.adjacentShapeMargin)],[["a2"],new R(ir*1.5+t.options.adjacentShapeMargin,ir*.5)],[["a3"],new R(ir*.5,ir*1.5+t.options.adjacentShapeMargin)],[["a4"],new R(ir*-.5-t.options.adjacentShapeMargin,ir*.5)]];function RXe(t,e){if(e===1)return MXe(t);const n=ir*e,r=t.options.adjacentShapeMargin*e;return[[["a1"],new R(n*.5,n*-.5-r)],[["a2"],new R(n*1.5+r,n*.5)],[["a3"],new R(n*.5,n*1.5+r)],[["a4"],new R(n*-.5-r,n*.5)]]}function Kie(t,e,n,r,o,a){return Object.fromEntries(RXe(t,a).map(([s,i],l)=>{const c=i.clone();return l===0&&o?c.y-=o:l===2&&r&&(c.y+=r),[s,c.rot(n).add(e)]}))}function Wie(t,e,n,r){const o=new Set(t.getSelectedShapeIds()),a=(ir+t.options.adjacentShapeMargin+r)**2,s=new Map,i=[];for(const d of t.getCurrentPageShapes()){if(!t.isShapeOfType(d,"note")||n!==d.props.scale||o.has(d.id))continue;const u=t.getShapePageTransform(d.id);e===u.rotation()&&(s.set(d,t.getShapePageBounds(d).center),i.push(...Object.values(Kie(t,u.point(),e,d.props.growY,r,n))))}const l=i.length;let c;for(const[d,u]of s)for(let m=0;m<l;m++)c=i[m],c&&(R.Dist2(u,c)>a||t.isPointInShape(d,c)&&(i[m]=void 0));return Dt(i)}function Yie(t,e,n,r,o=!1){let a;const s=t.getCurrentPageShapesSorted(),i=(ir+t.options.adjacentShapeMargin**2)**e.props.scale;for(let l=s.length-1;l>=0;l--){const c=s[l];if(c.type==="note"&&c.id!==e.id){const d=t.getShapePageBounds(c);if(d&&R.Dist2(d.center,n)<i&&t.isPointInShape(c,n)){a=c;break}}}if(t.complete(),!a||o){t.markHistoryStoppingPoint("creating note shape");const l=lr();t.createShape({id:l,type:"note",x:n.x,y:n.y,rotation:r,opacity:e.opacity,props:{...e.props,richText:Ma(""),growY:0,fontSizeAdjustment:0,url:""}});const c=t.getShape(l);if(!c)return;const d=t.getPointInParentSpace(c,R.Sub(n,R.Rot(JC.clone().mul(c.props.scale),r)));t.updateShape({id:l,type:"note",x:d.x,y:d.y}),a=t.getShape(l)}return t.zoomToSelectionIfOffscreen(16,{animation:{duration:t.options.animationMediumMs},inset:0}),a}var AO;let DXe=(AO=class extends ht{constructor(){super(...arguments);L(this,"dragged",!1);L(this,"info",{});L(this,"markId","");L(this,"shape",{})}onEnter(){const{editor:n}=this,r=lr();this.markId=n.markHistoryStoppingPoint(`creating_note:${r}`);const o=this.editor.inputs.originPagePoint.clone(),a=NXe(this.editor,o,this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1);a&&o.sub(a);const s=LXe(this.editor,r,o);s?this.shape=s:this.cancel()}onPointerMove(n){this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.translating",{...n,target:"shape",shape:this.shape,onInteractionEnd:"note",isCreating:!0,creatingMarkId:this.markId,onCreate:()=>{this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape")}})}onPointerUp(){this.complete()}onInterrupt(){this.cancel()}onComplete(){this.complete()}onCancel(){this.cancel()}complete(){this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape}))}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}},L(AO,"id","pointing"),AO);function NXe(t,e,n){let r=Gie/t.getZoomLevel(),o;for(const a of Wie(t,0,n,0)){const s=R.Sub(e,a),i=s.len();i<r&&(r=i,o=s)}return o}function LXe(t,e,n){t.createShape({id:e,type:"note",x:n.x,y:n.y,props:{scale:t.user.getIsDynamicResizeMode()?1/t.getZoomLevel():1}});const r=t.getShape(e);if(!r)return;t.select(e);const o=t.getShapeGeometry(r).bounds,a=Gi(new R(r.x-o.width/2,r.y-o.height/2),t);return t.updateShapes([{id:e,type:"note",x:a.x,y:a.y}]),t.getShape(e)}class HR extends ht{constructor(){super(...arguments);L(this,"shapeType","note")}static children(){return[PXe,DXe]}}L(HR,"id","note"),L(HR,"initial","idle");function jXe(t){const e=t.getShapeAtPoint(t.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:t.options.hitTestMargin/t.getZoomLevel(),renderingOnly:!0});if(!e)return t.setHoveredShape(null);let n;const r=t.getOutermostSelectableShape(e);return r===e||r.id===t.getFocusedGroupId()||t.getSelectedShapeIds().includes(r.id)?n=e:n=r,t.setHoveredShape(n.id)}const Bu=OK(jXe,32);var _O;let BXe=(_O=class extends ht{onPointerMove(e){switch(e.target){case"shape":case"canvas":Bu(this.editor)}}onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onExit(){Bu.cancel()}onKeyDown(e){var n;if(e.key==="Enter"){if(this.editor.getIsReadonly())return null;const r=this.editor.getOnlySelectedShape();r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),(n=this.editor.root.getCurrent())==null||n.transition("editing_shape",{...e,target:"shape",shape:r}))}}onCancel(){this.editor.setCurrentTool("select")}},L(_O,"id","idle"),_O);var kO;let FXe=(kO=class extends ht{constructor(){super(...arguments);L(this,"shape");L(this,"markId","");L(this,"enterTime",0)}onEnter(){this.enterTime=Date.now()}onExit(){this.editor.setHintingShapes([])}onPointerMove(n){if(Date.now()-this.enterTime<150)return;const{editor:r}=this,{isPointing:o}=r.inputs;if(!o)return;const{originPagePoint:a,currentPagePoint:s}=r.inputs,i=Math.abs(a.x-s.x),c=Math.sqrt(r.getInstanceState().isCoarsePointer?r.options.coarseDragDistanceSquared:r.options.dragDistanceSquared)*6/r.getZoomLevel();if(i>c){const d=lr();this.markId=r.markHistoryStoppingPoint(`creating_text:${d}`);const u=this.createTextShape(d,a,!1,i);if(!u){this.cancel();return}this.shape=r.getShape(u),r.select(d);const m=this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1;r.setCurrentTool("select.resizing",{...n,target:"selection",handle:"right",isCreating:!0,creatingMarkId:this.markId,creationCursorOffset:{x:i*m,y:1},onInteractionEnd:"text",onCreate:()=>{r.setEditingShape(u.id)}})}}onPointerUp(){this.complete()}onComplete(){this.cancel()}onCancel(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.editor.markHistoryStoppingPoint("creating text shape");const n=lr(),{originPagePoint:r}=this.editor.inputs;this.createTextShape(n,r,!0,20)&&(this.editor.select(n),this.editor.setEditingShape(n))}cancel(){this.parent.transition("idle"),this.editor.bailToMark(this.markId)}createTextShape(n,r,o,a){this.editor.createShape({id:n,type:"text",x:r.x,y:r.y,props:{richText:Ma(""),autoSize:o,w:a,scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}});const s=this.editor.getShape(n);if(!s){this.cancel();return}const i=this.editor.getShapePageBounds(s),l=new R;if(o)switch(s.props.textAlign){case"start":{l.x=0;break}case"middle":{l.x=-i.width/2;break}case"end":{l.x=-i.width;break}}else l.x=0;if(l.y=-i.height/2,bs(s.parentId)){const u=this.editor.getShapeParentTransform(s);l.rot(-u.rotation())}const c=s.x+l.x,d=s.y+l.y;if(this.editor.getInstanceState().isGridMode){const u=new R(c,d),m=Gi(u,this.editor),h=R.Sub(u,m);this.editor.updateShape({...s,x:c-h.x,y:d-h.y})}else this.editor.updateShape({...s,x:c,y:d});return s}},L(kO,"id","pointing"),kO);class $R extends ht{constructor(){super(...arguments);L(this,"shapeType","text")}static children(){return[BXe,FXe]}}L($R,"id","text"),L($R,"initial","idle");const zXe=[$R,Ey,UR,HR,qR,zR,FR,Ty],UXe=bt.forwardRef(function({shapeId:e,isEditing:n,richText:r,handleFocus:o,handleChange:a,handleBlur:s,handleKeyDown:i,handleDoubleClick:l,hasCustomTabBehavior:c,handlePaste:d},u){const m=ue(),h=cm("tip-tap-editor"),y=m.getTextOptions().tipTapConfig,v=w.useRef(r),x=w.useRef(null),S=w.useRef(null);w.useLayoutEffect(()=>{x.current?v.current!==r&&x.current.commands.setContent(r):v.current=r},[r]);const T=w.useRef({selectAll:!1,caretPosition:null});w.useLayoutEffect(()=>{function F(V){V.shapeId===m.getEditingShapeId()&&(T.current.selectAll=!0)}function B(V){V.shapeId===m.getEditingShapeId()&&(T.current.caretPosition=V.point)}return m.on("select-all-text",F),m.on("place-caret",B),()=>{m.off("select-all-text",F),m.off("place-caret",B)}},[m,n]);const C=Rc(a),_=Rc(i),I=Rc(o),P=Rc(s),M=Rc(l),D=Rc(d);return w.useLayoutEffect(()=>{if(!n||!y||!S.current)return;const{editorProps:F,...B}=y,V=new nWe({element:S.current,autofocus:!0,editable:n,onUpdate:H=>{const j=H.editor.state.doc.toJSON();v.current=j,C({richText:j})},onFocus:I,onBlur:P,onCreate:H=>{var Y;if(m.getEditingShapeId()!==e)return;const j=H.editor;m.setRichTextEditor(j);const{selectAll:q,caretPosition:U}=T.current;if(q)j.chain().focus().selectAll().run();else if(U){const X=(Y=j.view.posAtCoords({left:U.x,top:U.y}))==null?void 0:Y.pos;X?j.chain().focus().setTextSelection(X).run():j.chain().focus().selectAll().run()}},editorProps:{handleKeyDown:(H,j)=>{!c&&j.key==="Tab"&&qXe(m,H,j),_(j)},handlePaste:(H,j)=>{if(D(j),j.defaultPrevented)return!0},handleDoubleClick:(H,j,q)=>M(q),...F},coreExtensionOptions:{clipboardTextSerializer:{blockSeparator:`
`}},...B,content:v.current}),z=m.timers.setTimeout(()=>{T.current.caretPosition||T.current.selectAll?V.commands.focus():V.commands.focus("end"),T.current.selectAll=!1,T.current.caretPosition=null},100);return x.current=V,()=>{x.current=null,clearTimeout(z),V.destroy()}},[n,y,I,P,M,C,D,_,m,e,c]),!n||!y?null:g.jsx("div",{id:h,ref:u,tabIndex:-1,"data-testid":"rich-text-area",className:"tl-rich-text tl-text tl-text-input",onContextMenu:n?F=>F.stopPropagation():void 0,onPointerDownCapture:F=>F.stopPropagation(),onTouchEnd:F=>F.stopPropagation(),onDragStart:Nt,children:g.jsx("div",{className:"tl-rich-text",ref:S})})});function qXe(t,e,n){n.preventDefault();const r=t.getRichTextEditor();if(r!=null&&r.isActive("bulletList")||r!=null&&r.isActive("orderedList"))return;const{state:o,dispatch:a}=e,{$from:s,$to:i}=o.selection,l=n.shiftKey;let c=o.tr,d=i.end();for(;d>=s.start();){const m=o.doc.resolve(d).blockRange();if(!m)break;const h=m.start,y=m.end,v=o.doc.textBetween(h,y,`
`);let x=!1;o.doc.nodesBetween(h,y,S=>{if(S.type.name==="bulletList"||S.type.name==="orderedList")return x=!0,!1}),x||(l?v.startsWith("	")&&(c=c.delete(h+1,h+2)):c=c.insertText("	",h+1)),d=h-1}const u=o.selection.map(c.doc,c.mapping);c.setSelection(u),c.docChanged&&a(c)}function Xie(t){return t==="start-legacy"||t==="middle-legacy"||t==="end-legacy"}function HXe(t,e,n){const r=Jie(t),o=r.isEditing,a=ue(),s=w.useRef(null),i=(n||"").trim().length===0;w.useEffect(()=>{function d(u){var m,h;u.shapeId===t&&((h=(m=s.current)==null?void 0:m.select)==null||h.call(m))}return a.on("select-all-text",d),()=>{a.off("select-all-text",d)}},[a,t,o]),w.useEffect(()=>{var d,u,m,h;o&&(document.activeElement!==s.current&&((d=s.current)==null||d.focus()),a.getInstanceState().isCoarsePointer&&((u=s.current)==null||u.select()),Nn.isSafari&&((m=s.current)==null||m.blur(),(h=s.current)==null||h.focus()))},[a,o]);const l=w.useCallback(d=>{if(a.getEditingShapeId()===t)switch(d.key){case"Enter":{(d.ctrlKey||d.metaKey)&&a.complete();break}}},[a,t]),c=w.useCallback(({plaintext:d})=>{if(a.getEditingShapeId()!==t)return;const u=VT.normalizeText(d||"");a.updateShape({id:t,type:e,props:{text:u}})},[a,t,e]);return{rInput:s,handleKeyDown:l,handleChange:c,isEmpty:i,...r}}function vj(t,e){return ce("isReadyForEditing",()=>{const n=t.getEditingShapeId();return n!==null&&(n===e||t.getHoveredShapeId()===e)},[t,e])}function Jie(t){const e=ue(),n=ce("isEditing",()=>e.getEditingShapeId()===t,[e]),r=vj(e,t),o=w.useCallback(s=>{e.dispatch({...Pa(e,s),type:"pointer",name:"pointer_down",target:"shape",shape:e.getShape(t)}),s.stopPropagation()},[e,t]),a=w.useCallback(s=>{if(e.getEditingShapeId()===t&&s.clipboardData){const i=s.clipboardData.getData("text/html");i&&i.includes("<div data-tldraw")&&Nt(s)}},[e,t]);return{handleFocus:l0,handleBlur:l0,handleInputPointerDown:o,handleDoubleClick:e.markEventAsHandled,handlePaste:a,isEditing:n,isReadyForEditing:r}}function $Xe(t,e,n){const r=Jie(t),o=r.isEditing,a=ue(),s=w.useRef(null),i=n&&ao(n);w.useEffect(()=>{var u;if(!o)return;const d=(u=s.current)==null?void 0:u.querySelector("[contenteditable]");d&&document.activeElement!==s.current&&d.focus()},[a,o]);const l=w.useCallback(d=>{a.getEditingShapeId()===t&&d.key==="Enter"&&Pr(d)&&a.complete()},[a,t]),c=w.useCallback(({richText:d})=>{a.getEditingShapeId()===t&&a.updateShape({id:t,type:e,props:{richText:d}})},[a,t,e]);return{rInput:s,handleKeyDown:l,handleChange:c,isEmpty:i,...r}}const QC=bt.memo(function({shapeId:e,type:n,richText:r,labelColor:o,font:a,fontSize:s,lineHeight:i,align:l,verticalAlign:c,wrap:d,isSelected:u,padding:m=0,onKeyDown:h,classNamePrefix:y,style:v,textWidth:x,textHeight:S,hasCustomTabBehavior:T}){const C=ue(),_=bt.useRef(!1),{rInput:I,isEmpty:P,isEditing:M,isReadyForEditing:D,...F}=$Xe(e,n,r),B=w.useMemo(()=>{if(r)return gj(C,r)},[C,r]),V=ce("isSelectToolActive",()=>C.getCurrentToolId()==="select",[C]);oN("isDragging",()=>{C.getInstanceState(),_.current=C.inputs.isDragging},[C]);const z=Xie(l),H=q=>{var U;if(q.target instanceof HTMLElement&&(q.target.tagName==="A"||q.target.closest("a"))){if(Nt(q),!V)return;const Y=((U=q.target.closest("a"))==null?void 0:U.getAttribute("href"))??"",X=ee=>{ee.name!=="pointer_up"||!Y||(_.current||I3(Y,"_blank",!1),C.off("event",X))};C.on("event",X)}};if(!M&&P)return null;const j=y||"tl-text";return g.jsx("div",{className:`${j}-label tl-text-wrapper tl-rich-text-wrapper`,"aria-hidden":!M,"data-font":a,"data-align":l,"data-hastext":!P,"data-isediting":M,"data-textwrap":!!d,"data-isselected":u,style:{justifyContent:l==="middle"||z?"center":l,alignItems:c==="middle"?"center":c,padding:m,...v},children:g.jsxs("div",{className:`${j}-label__inner tl-text-content__wrapper`,style:{fontSize:s,lineHeight:i.toString(),minHeight:Math.floor(s*i)+"px",minWidth:Math.ceil(x||0),color:o,width:x?Math.ceil(x):void 0,height:S?Math.ceil(S):void 0},children:[g.jsx("div",{className:`${j} tl-text tl-text-content`,dir:"auto",children:r&&g.jsx("div",{className:"tl-rich-text","data-is-select-tool-active":V,dangerouslySetInnerHTML:{__html:B||""},onPointerDown:H,"data-is-ready-for-editing":D})}),(D||u)&&g.jsx(UXe,{ref:I,richText:r,isEditing:M,shapeId:e,...F,hasCustomTabBehavior:T,handleKeyDown:h??F.handleKeyDown})]})})});function ZC({bounds:t,richText:e,fontSize:n,font:r,align:o,verticalAlign:a,wrap:s,labelColor:i,padding:l,showTextOutline:c=!0}){const d=ue(),u=gj(d,e),m=o==="middle"?"center":o==="start"?"start":"end",h=o==="middle"?"center":o==="start"?"flex-start":"flex-end",y=a==="middle"?"center":a==="start"?"flex-start":"flex-end",v={display:"flex",fontFamily:s_e[r],height:"100%",justifyContent:h,alignItems:y,padding:`${l}px`},x={fontSize:`${n}px`,wrap:s?"wrap":"nowrap",color:i,lineHeight:_s.lineHeight,textAlign:m,width:"100%",wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap",textShadow:c?"var(--tl-text-outline)":"none"};return g.jsx("foreignObject",{x:t.minX,y:t.minY,width:t.w,height:t.h,className:"tl-export-embed-styles tl-rich-text tl-rich-text-svg",children:g.jsx("div",{style:v,children:g.jsx("div",{dangerouslySetInnerHTML:{__html:u},style:x})})})}function xj(t){return{key:`${pp.id}:${t}`,async getElement(){return t!=="pattern"?null:g.jsx(VXe,{})}}}function VXe(){const t=Ej(),e=cm(),n=zl(),r=8/12;return g.jsxs(g.Fragment,{children:[g.jsxs("mask",{id:e,children:[g.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:"white"}),g.jsxs("g",{strokeLinecap:"round",stroke:"black",children:[g.jsx("line",{x1:r*1,y1:r*3,x2:r*3,y2:r*1}),g.jsx("line",{x1:r*5,y1:r*7,x2:r*7,y2:r*5}),g.jsx("line",{x1:r*9,y1:r*11,x2:r*11,y2:r*9})]})]}),g.jsx("pattern",{id:t(1,n.id),width:"8",height:"8",patternUnits:"userSpaceOnUse",children:g.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:n.solid,mask:`url(#${e})`})})]})}function Sj(){return{key:`${pp.id}:pattern`,component:YXe}}const wy=8,GH=(t,e,n)=>new Promise((r,o)=>{const a=wy*e*t,s=document.createElement("canvas");s.width=a,s.height=a;const i=s.getContext("2d");if(!i)return;i.fillStyle=n?AE.darkMode.solid:AE.lightMode.solid,i.fillRect(0,0,a,a),i.globalCompositeOperation="destination-out",i.lineCap="round",i.lineWidth=1.25*e*t;const l=8/12,c=d=>d*e*t;i.beginPath(),i.moveTo(c(l*1),c(l*3)),i.lineTo(c(l*3),c(l*1)),i.moveTo(c(l*5),c(l*7)),i.lineTo(c(l*7),c(l*5)),i.moveTo(c(l*9),c(l*11)),i.lineTo(c(l*11),c(l*9)),i.stroke(),s.toBlob(d=>{!d||Ur.throwToBlob.get()?o():r(d)})}),KH=(t,e)=>{const n=document.createElement("canvas");n.width=t[0],n.height=t[1];const r=n.getContext("2d");return r?(e(r),n.toDataURL()):""};let lO=null;function GXe(){return lO||(lO={white:KH([1,1],t=>{t.fillStyle="#f8f9fa",t.fillRect(0,0,1,1)}),black:KH([1,1],t=>{t.fillStyle="#212529",t.fillRect(0,0,1,1)})}),lO}function Qie(t){return Math.ceil(Math.log2(Math.max(1,t)))}function Ej(){const t=Zl("hash_pattern");return w.useCallback((e,n)=>{const r=Qie(e);return kN(t,`${n}_${r}`)},[t])}function Zie(t){const e=[],r=Qie(t);for(let o=0;o<=r;o++)e.push(Math.pow(2,o));return e}function KXe(t){const e=GXe();return Zie(t).flatMap(n=>[{zoom:n,url:e.white,theme:"light"},{zoom:n,url:e.black,theme:"dark"}])}function WXe(){const t=ue(),e=ce("devicePixelRatio",()=>t.getInstanceState().devicePixelRatio,[t]),n=ce("maxZoom",()=>Math.ceil(Ca(t.getCameraOptions().zoomSteps)),[t]),[r,o]=w.useState(!1),[a,s]=w.useState(()=>KXe(n)),i=Ej();return w.useEffect(()=>{const c=Promise.all(Zie(n).flatMap(u=>[GH(e,u,!1).then(m=>({zoom:u,theme:"light",url:URL.createObjectURL(m)})),GH(e,u,!0).then(m=>({zoom:u,theme:"dark",url:URL.createObjectURL(m)}))]));let d=!1;return c.then(u=>{d||(s(u),o(!0))}),()=>{d=!0,o(!1),c.then(u=>{for(const{url:m}of u)URL.revokeObjectURL(m)})}},[e,n]),{defs:g.jsx(g.Fragment,{children:a.map(c=>{const d=i(c.zoom,c.theme);return g.jsx("pattern",{id:d,width:wy,height:wy,patternUnits:"userSpaceOnUse",children:g.jsx("image",{href:c.url,width:wy,height:wy})},d)})}),isReady:r}}function YXe(){const t=ue(),e=w.useRef(null),{defs:n,isReady:r}=WXe();return w.useEffect(()=>{if(r&&Nn.isSafari){const o=ele(e.current);o&&t.timers.requestAnimationFrame(()=>{o.style.display="none",t.timers.requestAnimationFrame(()=>{o.style.display=""})})}},[t,r]),g.jsx("g",{ref:e,"data-testid":r?"ready-pattern-fill-defs":void 0,children:n})}function ele(t){return t.classList.contains("tl-html-layer")?t:t.parentElement?ele(t.parentElement):null}const U0=bt.memo(function({theme:e,d:n,color:r,fill:o,scale:a}){switch(o){case"none":return null;case"solid":return g.jsx("path",{fill:yn(e,r,"semi"),d:n});case"semi":return g.jsx("path",{fill:e.solid,d:n});case"fill":return g.jsx("path",{fill:yn(e,r,"fill"),d:n});case"pattern":return g.jsx(XXe,{theme:e,color:r,fill:o,d:n,scale:a});case"lined-fill":return g.jsx("path",{fill:yn(e,r,"linedFill"),d:n})}});function XXe({d:t,color:e,theme:n}){const r=ue(),o=hv(),a=ce("zoomLevel",()=>r.getZoomLevel(),[r]),s=Ej(),i=r.getZoomLevel()<=.18;return g.jsxs(g.Fragment,{children:[g.jsx("path",{fill:yn(n,e,"pattern"),d:t}),g.jsx("path",{fill:o?`url(#${s(1,n.id)})`:i?yn(n,e,"semi"):`url(#${s(a,n.id)})`,d:t})]})}function tle(t,e,n){switch(e.type){case"straight":return new Dn().moveTo(e.start.point.x,e.start.point.y,{offset:0,roundness:0}).lineTo(e.end.point.x,e.end.point.y,{offset:0,roundness:0}).toSvg(n);case"arc":return new Dn().moveTo(e.start.point.x,e.start.point.y,{offset:0,roundness:0}).circularArcTo(e.bodyArc.radius,!!e.bodyArc.largeArcFlag,!!e.bodyArc.sweepFlag,e.end.point.x,e.end.point.y,{offset:0,roundness:0}).toSvg(n);case"elbow":{const r=new Dn;r.moveTo(e.start.point.x,e.start.point.y,{offset:0});for(let o=1;o<e.route.points.length;o++){const a=e.route.points[o];e.route.skipPointsWhenDrawing.has(a)||r.lineTo(a.x,a.y,{offset:o===e.route.points.length-1?0:void 0})}return r.toSvg(n)}default:wn(e,"type")}}function JXe(t,e){switch(t.type){case"straight":return new Dn().moveTo(t.start.handle.x,t.start.handle.y).lineTo(t.end.handle.x,t.end.handle.y).toSvg(e);case"arc":return new Dn().moveTo(t.start.handle.x,t.start.handle.y).circularArcTo(t.handleArc.radius,!!t.handleArc.largeArcFlag,!!t.handleArc.sweepFlag,t.end.handle.x,t.end.handle.y).toSvg(e);case"elbow":{const n=A8e(t.elbow,t.route);return Dn.lineThroughPoints(n.points).toSvg(e)}default:wn(t,"type")}}function lg(t,e){const n=Al(t,e);switch(n.type){case"straight":return new Yh({start:R.From(n.start.point),end:R.From(n.end.point)});case"arc":return new LZ({center:R.Cast(n.handleArc.center),start:R.Cast(n.start.point),end:R.Cast(n.end.point),sweepFlag:n.bodyArc.sweepFlag,largeArcFlag:n.bodyArc.largeArcFlag});case"elbow":return new mv({points:n.route.points});default:wn(n,"type")}}const QXe=Sw("arrow label size",(t,e)=>{t.fonts.trackFontsForShape(e);let n=0,r=0;const o=lg(t,e),a=ao(e.props.richText),s=z0(t,a?Ma("i"):e.props.richText),i=o.bounds,l=VR(e),{w:c,h:d}=t.textMeasure.measureHtml(s,{..._s,fontFamily:yp[e.props.font],fontSize:l,maxWidth:null});n=c,r=d;let u=!1;const m=Al(t,e),h=rle(e),y=m.type==="elbow"?Math.max(m.elbow.A.arrowheadOffset+h,32)+Math.max(m.elbow.B.arrowheadOffset+h,32):64;if(i.width>i.height?(n=Math.max(Math.min(c,y),Math.min(i.width-y,c)),u=!0):n>16*l&&(n=16*l,u=!0),u){const{w:v,h:x}=t.textMeasure.measureHtml(s,{..._s,fontFamily:yp[e.props.font],fontSize:l,maxWidth:n});n=v,r=x}return new R(n,r).addScalar(wR*2*e.props.scale)},{areRecordsEqual:(t,e)=>{if(t.props===e.props)return!0;const n=Cwe(t.props,e.props);return n.length===1&&n[0]==="labelPosition"}});function nle(t,e){return QXe.get(t,e.id)??new R(0,0)}function rle(t){const e=Zo[t.props.size];return(eGe+(e-Zo.s)*2+(e===Zo.xl?20:0))*t.props.scale}function ZXe(t,e,n){const r=lg(t,e),o=[],a=[new pi({children:[r],debugColor:"lime"})],s=nle(t,e),i=rle(e),l=i/r.length;let c,d;if(n.type==="elbow")o.push(n.start.point,n.end.point),c=Be.FromCenter(n.start.point,s).expandBy(i),d=Be.FromCenter(n.end.point,s).expandBy(i);else{const S=r.interpolateAlongEdge(l),T=r.interpolateAlongEdge(1-l);o.push(S,T),c=Be.FromCenter(S,s),d=Be.FromCenter(T,s)}const u=r.intersectPolygon(c.corners),m=r.intersectPolygon(d.corners),h=WH(n.start.point,u),y=WH(n.end.point,m);let v=h?r.uninterpolateAlongEdge(h):.5,x=y?r.uninterpolateAlongEdge(y):.5;v>x&&(v=.5,x=.5);for(const S of[...u,...m,...o])a.push(new zE({x:S.x-3,y:S.y-3,radius:3,isFilled:!1,debugColor:"magenta",ignore:!0}));return a.push(new h0({points:c.corners,debugColor:"lime",isFilled:!1,ignore:!0}),new h0({points:d.corners,debugColor:"lime",isFilled:!1,ignore:!0})),{start:v,end:x,dbg:a}}function B1(t,e){if(!(t.getEditingShapeId()===e.id)&&ao(e.props.richText)){const m=lg(t,e).interpolateAlongEdge(.5);return{box:Be.FromCenter(m,new R(0,0)),debugGeom:[]}}const r=[],o=Al(t,e),a={hasStartBinding:!!o.bindings.start,hasEndBinding:!!o.bindings.end,hasStartArrowhead:o.start.arrowhead!=="none",hasEndArrowhead:o.end.arrowhead!=="none"},s=ZXe(t,e,o);s.dbg&&r.push(...s.dbg);const i=eJe(e,s,a),c=lg(t,e).interpolateAlongEdge(i),d=nle(t,e);return{box:Be.FromCenter(c,d),debugGeom:r}}function eJe(t,e,n){const{hasEndArrowhead:r,hasEndBinding:o,hasStartBinding:a,hasStartArrowhead:s}=n;return Lt(t.props.labelPosition,s||a?e.start:0,r||o?e.end:1)}function WH(t,e){let n=null,r=-1/0;for(const o of e){const a=R.Dist2(t,o);a>r&&(n=o,r=a)}return n}function VR(t){return ZVe[t.props.size]*t.props.scale}function ole(t,e){const n=Al(t,e);switch(n.type){case"straight":case"arc":return .5;case"elbow":{const r=n.route.midpointHandle,o=lg(t,e);return r&&o?o.uninterpolateAlongEdge(r.point):.5}default:wn(n,"type")}}function ale(t,e){if(!t.isShapeOfType(e,"arrow"))return!1;const n=t.getPointInShapeSpace(e,t.inputs.currentPagePoint),r=t.getShapeGeometry(e).children[1];return r&&Ss(n,r.vertices)}function tJe(t,e,n){const r=e==="end"?t.end.point:t.start.point;let o;switch(t.type){case"straight":{const a=e==="end"?t.start.point:t.end.point,s=R.Dist(a,r),i=Lt(s/5,n,n*3);o=R.Nudge(r,a,i);break}case"arc":{const a=Math.abs(t.bodyArc.length),s=Lt(a/5,n,n*3),i=Q2e(r,s,t.handleArc.center,t.handleArc.radius);o=e==="end"?t.handleArc.sweepFlag?i[0]:i[1]:t.handleArc.sweepFlag?i[1]:i[0];break}case"elbow":{const a=e==="end"?t.route.points[t.route.points.length-2]:t.route.points[1],s=R.ManhattanDist(a,r),i=Lt(s/2,n,n*3);o=a?R.Nudge(r,a,i):r;break}default:wn(t,"type")}return R.IsNaN(o)&&(o=r),{point:r,int:o}}function nJe({point:t,int:e}){const n=R.RotWith(e,t,Un/6),r=R.RotWith(e,t,-Un/6);return`M ${n.x} ${n.y} L ${t.x} ${t.y} L ${r.x} ${r.y}`}function rJe({point:t,int:e}){const n=R.RotWith(e,t,Un/6),r=R.RotWith(e,t,-Un/6);return`M ${n.x} ${n.y} L ${r.x} ${r.y} L ${t.x} ${t.y} Z`}function oJe({point:t,int:e}){const n=R.Sub(e,t).div(2),r=R.Add(t,R.Rot(n,yo)),o=R.Sub(t,R.Rot(n,yo));return`M ${r.x} ${r.y} L ${e.x} ${e.y} L ${o.x} ${o.y} Z`}function aJe({point:t,int:e}){const n=R.Lrp(t,e,.45),r=R.Dist(n,t);return`M ${n.x-r},${n.y}
  a ${r},${r} 0 1,0 ${r*2},0
  a ${r},${r} 0 1,0 -${r*2},0 `}function sJe({point:t,int:e}){const n=R.Lrp(t,e,.75),r=R.RotWith(n,t,Un/4),o=R.RotWith(n,t,-Un/4),a=R.Lrp(r,o,.5);return a.add(R.Sub(a,t)),`M ${a.x} ${a.y} L ${o.x} ${o.y} ${t.x} ${t.y} L ${r.x} ${r.y} Z`}function iJe({int:t,point:e}){const n=R.Lrp(e,t,.85),r=R.Sub(n,e).div(2),o=R.Add(e,R.Rot(r,yo)),a=R.Sub(e,R.Rot(r,yo)),s=R.Add(n,R.Rot(r,yo)),i=R.Sub(n,R.Rot(r,yo));return`M ${o.x} ${o.y} L ${s.x} ${s.y} L ${i.x} ${i.y} L ${a.x} ${a.y} Z`}function lJe({int:t,point:e}){const n=R.Sub(t,e).div(2),r=R.Add(e,R.Rot(n,yo)),o=R.Sub(e,R.Rot(n,yo));return`M ${r.x} ${r.y} L ${o.x} ${o.y}`}function GT(t,e,n){const r=e==="end"?t.end.arrowhead:t.start.arrowhead;if(r==="none")return;const o=tJe(t,e,n);if(o){switch(r){case"bar":return lJe(o);case"square":return iJe(o);case"diamond":return sJe(o);case"dot":return aJe(o);case"inverted":return oJe(o);case"arrow":return nJe(o);case"triangle":return rJe(o)}return""}}function cJe({arrow:t}){var s,i;const e=ue(),n=ce("elbow arrow grid",()=>{try{return dae(e,e.getShape(t.id),aa(e,t))}catch(l){console.error(l);return}},[e,t.id]);if(!n)return null;const r=Be.Common([n.A.original,n.B.original]).expandBy(50),o=((s=n.route)==null?void 0:s.name)??"",a=(i=n.route)==null?void 0:i.midpointHandle;return g.jsxs(g.Fragment,{children:[n.midX!==null&&g.jsx(xf,{a:{x:n.midX,y:r.minY},b:{x:n.midX,y:r.maxY},stroke:"red"}),n.midY!==null&&g.jsx(xf,{a:{x:r.minX,y:n.midY},b:{x:r.maxX,y:n.midY},stroke:"blue"}),(a==null?void 0:a.axis)==="x"&&n.midXRange&&g.jsx(xf,{a:{x:n.midXRange.lo,y:a.point.y},b:{x:n.midXRange.hi,y:a.point.y},stroke:"red",strokeDasharray:"0 2"}),(a==null?void 0:a.axis)==="y"&&n.midYRange&&g.jsx(xf,{a:{x:a.point.x,y:n.midYRange.lo},b:{x:a.point.x,y:n.midYRange.hi},stroke:"blue",strokeDasharray:"0 2"}),g.jsx(uh,{box:n.A.original,stroke:"orange"}),g.jsx(uh,{box:n.A.expanded,stroke:"orange",strokeWidth:.5}),g.jsx(uh,{box:n.A.original.clone().expandBy(n.options.minElbowLegLength),stroke:"orange",strokeWidth:.5}),g.jsx(uh,{box:n.B.original,stroke:"lightskyblue"}),g.jsx(uh,{box:n.B.expanded,stroke:"lightskyblue",strokeWidth:.5}),g.jsx(uh,{box:n.B.original.clone().expandBy(n.options.minElbowLegLength),stroke:"lightskyblue",strokeWidth:.5}),g.jsx(Ld,{edge:n.A.edges.top,axis:"x",stroke:"orange"}),g.jsx(Ld,{edge:n.B.edges.top,axis:"x",stroke:"lightskyblue"}),g.jsx(Ld,{edge:n.A.edges.right,axis:"y",stroke:"orange"}),g.jsx(Ld,{edge:n.B.edges.right,axis:"y",stroke:"lightskyblue"}),g.jsx(Ld,{edge:n.A.edges.bottom,axis:"x",stroke:"orange"}),g.jsx(Ld,{edge:n.B.edges.bottom,axis:"x",stroke:"lightskyblue"}),g.jsx(Ld,{edge:n.A.edges.left,axis:"y",stroke:"orange"}),g.jsx(Ld,{edge:n.B.edges.left,axis:"y",stroke:"lightskyblue"}),n.route&&g.jsx(uJe,{route:n.route.points,strokeWidth:10}),g.jsx("text",{x:r.minX+5,y:r.minY-3,fontSize:10,fill:"black",stroke:"var(--tl-color-background)",strokeWidth:2,paintOrder:"stroke",children:o}),g.jsxs("text",{x:n.A.expanded.x,y:n.A.expanded.y,fontSize:10,fill:"black",stroke:"var(--tl-color-background)",strokeWidth:2,paintOrder:"stroke",children:["A",n.route&&`, ${n.route.aEdgePicking}`,n.A.isPoint&&", point"]}),g.jsxs("text",{x:n.B.expanded.x,y:n.B.expanded.y,fontSize:10,fill:"black",stroke:"var(--tl-color-background)",strokeWidth:2,paintOrder:"stroke",children:["B",n.route&&`, ${n.route.bEdgePicking}`,n.B.isPoint&&", point"]})]})}function xf({a:t,b:e,...n}){return g.jsx("line",{fill:"none",strokeWidth:1,strokeDasharray:"4,4",stroke:"green",x1:t.x,y1:t.y,x2:e.x,y2:e.y,...n})}function uJe({route:t,...e}){return g.jsx("polyline",{fill:"none",stroke:"darkorchid",strokeWidth:3,opacity:.5,points:t.map(n=>`${n.x},${n.y}`).join(" "),...e})}function Ld({edge:t,axis:e,...n}){if(!t||t.expanded===null)return null;const r=o=>e==="x"?{x:o.y,y:o.x}:o;return g.jsxs("g",{children:[g.jsx(xf,{a:r({x:t.expanded,y:t.cross.min}),b:r({x:t.expanded,y:t.cross.max}),strokeDasharray:"0",strokeWidth:1.5,...n}),g.jsx(xf,{a:r({x:t.expanded-4,y:t.cross.min}),b:r({x:t.expanded+4,y:t.cross.min}),strokeDasharray:"0",strokeWidth:1.5,...n}),g.jsx(xf,{a:r({x:t.expanded-4,y:t.cross.max}),b:r({x:t.expanded+4,y:t.cross.max}),strokeDasharray:"0",strokeWidth:1.5,...n})]})}function uh({box:t,...e}){return g.jsx("rect",{x:t.minX,y:t.minY,width:t.width,height:t.height,strokeDasharray:"4,4",strokeWidth:1,fill:"none",...e})}const dJe=new as;function pJe(t){return dJe.get(t,e=>{const n=ke("current selected arrow shape",()=>{const o=e.getOnlySelectedShape();return!o||!e.isShapeOfType(o,"arrow")?null:o.id}),r=e.store.query.ids("shape",()=>{const o=n.get();return o?{type:{eq:"arrow"},id:{neq:o}}:{type:{eq:"arrow"}}});return ke("elbow arrow snap lines",()=>{var i,l;const o=new Map,a=e.getCurrentPageShapeIds(),s=e.getViewportPageBounds();for(const c of r.get()){if(!a.has(c))continue;const d=e.getShape(c);if((d==null?void 0:d.type)!=="arrow")continue;const u=e.getShapePageBounds(c);if(!u||!s.includes(u))continue;const m=aa(e,d),h=e.getShapePageTransform(c);if(!h)continue;const y=e.getShapeGeometry(c),v=h.applyToPoints(y.vertices);for(let x=1;x<v.length;x++){const S=v[x-1],T=v[x];let C=R.Angle(S,T);C<0&&(C+=Math.PI);let _=o.get(C);_||(_=new Set,o.set(C,_));const I=Cy(S,C);_.add({perpDistance:I,startBoundShapeId:(i=m.start)==null?void 0:i.toId,endBoundShapeId:(l=m.end)==null?void 0:l.toId})}}return o})}).get()}function Cy(t,e){const n=R.FromAngle(e).per();return R.Dpr(t,n)}class F1 extends ec{constructor(){super(...arguments);L(this,"options",{expandElbowLegLength:{s:28,m:36,l:44,xl:66},minElbowLegLength:{s:Zo.s*3,m:Zo.m*3,l:Zo.l*3,xl:Zo.xl*3},minElbowHandleDistance:16,arcArrowCenterSnapDistance:16,elbowArrowCenterSnapDistance:24,elbowArrowEdgeSnapDistance:20,elbowArrowPointSnapDistance:24,elbowArrowAxisSnapDistance:16,labelCenterSnapDistance:10,elbowMidpointSnapDistance:10,elbowMinSegmentLengthToShowMidpointHandle:20,hoverPreciseTimeout:600,pointingPreciseTimeout:320,shouldBeExact:n=>n.inputs.altKey,shouldIgnoreTargets:n=>n.inputs.ctrlKey});L(this,"_resizeInitialBindings",new as)}canEdit(){return!0}canBind({toShapeType:n}){return n!=="arrow"}canSnap(){return!1}hideResizeHandles(){return!0}hideRotateHandle(){return!0}hideSelectionBoundsBg(){return!0}hideSelectionBoundsFg(){return!0}hideInMinimap(){return!0}canBeLaidOut(n,r){if(r.type==="flip"){const o=aa(this.editor,n),{start:a,end:s}=o,{shapes:i=[]}=r;if(a&&!i.find(l=>l.id===a.toId)||s&&!i.find(l=>l.id===s.toId))return!1}return!0}getFontFaces(n){return ao(n.props.richText)?io:rC(this.editor,n.props.richText,{family:`tldraw_${n.props.font}`,weight:"normal",style:"normal"})}getDefaultProps(){return{kind:"arc",elbowMidPoint:.5,dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{x:0,y:0},end:{x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",richText:Ma(""),labelPosition:.5,font:"draw",scale:1}}getGeometry(n){const r=this.editor.getEditingShapeId()===n.id,o=Al(this.editor,n),a=[],s=o.type==="straight"?new Yh({start:R.From(o.start.point),end:R.From(o.end.point)}):o.type==="arc"?new LZ({center:R.Cast(o.handleArc.center),start:R.Cast(o.start.point),end:R.Cast(o.end.point),sweepFlag:o.bodyArc.sweepFlag,largeArcFlag:o.bodyArc.largeArcFlag}):new mv({points:o.route.points});let i;if(r||!ao(n.props.richText)){const l=B1(this.editor,n);Ur.debugGeometry.get()&&a.push(...l.debugGeom),i=new rc({x:l.box.x,y:l.box.y,width:l.box.w,height:l.box.h,isFilled:!0,isLabel:!0})}return new pi({children:[...i?[s,i]:[s],...a]})}getHandles(n){const r=Al(this.editor,n),o=[{id:"start",type:"vertex",index:"a1",x:r.start.handle.x,y:r.start.handle.y},{id:"end",type:"vertex",index:"a3",x:r.end.handle.x,y:r.end.handle.y}];if(n.props.kind==="arc"&&(r.type==="straight"||r.type==="arc")&&o.push({id:"middle",type:"virtual",index:"a2",x:r.middle.x,y:r.middle.y}),n.props.kind==="elbow"&&r.type==="elbow"&&r.route.midpointHandle){const a=this.editor.getShapePageTransform(n.id),s=a.applyToPoint(r.route.midpointHandle.segmentStart),i=a.applyToPoint(r.route.midpointHandle.segmentEnd);R.Dist(s,i)*this.editor.getZoomLevel()>this.options.elbowMinSegmentLengthToShowMidpointHandle&&o.push({id:"middle",type:"vertex",index:"a2",x:r.route.midpointHandle.point.x,y:r.route.midpointHandle.point.y})}return o}getText(n){return Sp(this.editor,n.props.richText)}onHandleDrag(n,r){const o=r.handle.id;switch(o){case"middle":switch(n.props.kind){case"arc":return this.onArcMidpointHandleDrag(n,r);case"elbow":return this.onElbowMidpointHandleDrag(n,r);default:wn(n.props.kind)}case"start":case"end":return this.onTerminalHandleDrag(n,r,o);default:wn(o)}}onArcMidpointHandleDrag(n,{handle:r}){const o=aa(this.editor,n),{start:a,end:s}=kh(this.editor,n,o),i=R.Sub(s,a),l=R.Per(i),c=R.Med(s,a),d=R.Sub(c,l),u=R.Add(c,l),m=R.NearestPointOnLineSegment(d,u,r,!1);let h=R.Dist(m,c);return R.Clockwise(m,s,c)&&(h*=-1),{id:n.id,type:n.type,props:{bend:h}}}onElbowMidpointHandleDrag(n,{handle:r}){var C,_,I,P,M;const o=Al(this.editor,n);if((o==null?void 0:o.type)!=="elbow")return;const a=this.editor.getShapePageTransform(n.id),s=a.applyToPoint(r),i=(C=o.route.midpointHandle)==null?void 0:C.axis;if(!i)return;const l=O0[i],c=o.elbow[l.midRange];if(!c)return;let d=R.Angle(a.applyToPoint(l.v(0,0)),a.applyToPoint(l.v(0,1)));d<0&&(d+=Math.PI);const u=Cy(s,d),m=Cy(a.applyToPoint(l.v(c.lo,0)),d),h=Cy(a.applyToPoint(l.v(c.hi,0)),d),y=this.options.elbowMidpointSnapDistance/this.editor.getZoomLevel(),v=Cy(a.applyToPoint(l.v(qt(c.lo,c.hi,.5),0)),d);let x=v,S=Math.abs(v-u);for(const[D,F]of pJe(this.editor)){const{isParallel:B,isFlippedParallel:V}=hJe(d,D);if(B||V)for(const z of F){const H=z.startBoundShapeId&&(z.startBoundShapeId===((_=o.bindings.start)==null?void 0:_.toId)||z.startBoundShapeId===((I=o.bindings.end)==null?void 0:I.toId)),j=z.endBoundShapeId&&(z.endBoundShapeId===((P=o.bindings.start)==null?void 0:P.toId)||z.endBoundShapeId===((M=o.bindings.end)==null?void 0:M.toId));if(!H&&!j)continue;const q=V?-z.perpDistance:z.perpDistance,U=Math.abs(q-u);U<S&&(x=q,S=U)}}S>y&&(x=u);const T=Lt(u0(m,h,x),0,1);return{id:n.id,type:n.type,props:{elbowMidPoint:T}}}onTerminalHandleDrag(n,{handle:r,isPrecise:o},a){const s=aa(this.editor,n),i={id:n.id,type:"arrow",props:{}},l=s[a],d=s[a==="start"?"end":"start"],u=qC({editor:this.editor,pointInPageSpace:this.editor.getShapePageTransform(n.id).applyToPoint(r),arrow:n,isPrecise:o,currentBinding:l,oppositeBinding:d});if(!u){by(this.editor,n,a);const y=Gi(new R(r.x,r.y),this.editor);return i.props[a]={x:y.x,y:y.y},i}const m={terminal:a,normalizedAnchor:u.normalizedAnchor,isPrecise:u.isPrecise,isExact:u.isExact,snap:u.snap};Kb(this.editor,n,u.target.id,m);const h=aa(this.editor,n);return h.start&&h.end&&h.start.toId===h.end.toId&&R.Equals(h.start.props.normalizedAnchor,h.end.props.normalizedAnchor)&&Kb(this.editor,n,h.end.toId,{...h.end.props,normalizedAnchor:{x:h.end.props.normalizedAnchor.x+.05,y:h.end.props.normalizedAnchor.y}}),i}onTranslateStart(n){const r=aa(this.editor,n);if(n.props.kind==="elbow"&&this.editor.getOnlySelectedShapeId()===n.id){const i=Al(this.editor,n);if(!i)return;const l={id:n.id,type:"arrow",props:{}};return r.start&&(l.props.start={x:i.start.point.x,y:i.start.point.y},by(this.editor,n,"start")),r.end&&(l.props.end={x:i.end.point.x,y:i.end.point.y},by(this.editor,n,"end")),l}const o=kh(this.editor,n,r),a=this.editor.getShapePageTransform(n.id),s=this.editor.getSelectedShapeIds();if(!(r.start&&(s.includes(r.start.toId)||this.editor.isAncestorSelected(r.start.toId))||r.end&&(s.includes(r.end.toId)||this.editor.isAncestorSelected(r.end.toId)))){XH.set(n,{pagePosition:a.applyToPoint(n),terminalBindings:_p(o,(i,l)=>{const c=r[i];return c?{binding:c,shapePosition:l,pagePosition:a.applyToPoint(l)}:null})}),r.start&&(fT({editor:this.editor,arrow:n,terminal:"start",useHandle:!0}),n=this.editor.getShape(n.id)),r.end&&fT({editor:this.editor,arrow:n,terminal:"end",useHandle:!0});for(const i of["start","end"]){const l=r[i];l&&this.editor.updateBinding({...l,props:{...l.props,isPrecise:!0}})}}}onTranslate(n,r){const o=XH.get(n);if(!o)return;const a=this.editor.getShapePageTransform(r.id),s=R.Sub(a.applyToPoint(r),o.pagePosition);for(const i of Object.values(o.terminalBindings)){if(!i)continue;const l=R.Add(i.pagePosition,R.Mul(s,.5)),c=this.editor.getShapeAtPoint(l,{hitInside:!0,hitFrameInside:!0,margin:0,filter:d=>!d.isLocked&&this.editor.canBindShapes({fromShape:r,toShape:d,binding:"arrow"})});if((c==null?void 0:c.id)===i.binding.toId){const d=Be.ZeroFix(this.editor.getShapeGeometry(c).bounds),u=this.editor.getPointInShapeSpace(c,l),m={x:(u.x-d.minX)/d.width,y:(u.y-d.minY)/d.height};Kb(this.editor,r,c.id,{...i.binding.props,normalizedAnchor:m,isPrecise:!0})}else by(this.editor,r,i.binding.props.terminal)}}onResize(n,r){const{scaleX:o,scaleY:a}=r,s=this._resizeInitialBindings.get(n,()=>aa(this.editor,n)),i=kh(this.editor,n,s),{start:l,end:c}=bo(n.props);let{bend:d}=n.props;s.start||(l.x=i.start.x*o,l.y=i.start.y*a),s.end||(c.x=i.end.x*o,c.y=i.end.y*a);const u=Math.abs(o),m=Math.abs(a),h=s!=null&&s.start?R.From(s.start.props.normalizedAnchor):null,y=s!=null&&s.end?R.From(s.end.props.normalizedAnchor):null;return o<0&&a>=0?(d!==0&&(d*=-1,d*=Math.max(u,m)),h&&(h.x=1-h.x),y&&(y.x=1-y.x)):o>=0&&a<0?(d!==0&&(d*=-1,d*=Math.max(u,m)),h&&(h.y=1-h.y),y&&(y.y=1-y.y)):o>=0&&a>=0?d!==0&&(d*=Math.max(u,m)):o<0&&a<0&&(d!==0&&(d*=Math.max(u,m)),h&&(h.x=1-h.x,h.y=1-h.y),y&&(y.x=1-y.x,y.y=1-y.y)),s.start&&h&&Kb(this.editor,n,s.start.toId,{...s.start.props,normalizedAnchor:h.toJson()}),s.end&&y&&Kb(this.editor,n,s.end.toId,{...s.end.props,normalizedAnchor:y.toJson()}),{props:{start:l,end:c,bend:d}}}onDoubleClickHandle(n,r){switch(r.id){case"start":return{id:n.id,type:n.type,props:{...n.props,arrowheadStart:n.props.arrowheadStart==="none"?"arrow":"none"}};case"end":return{id:n.id,type:n.type,props:{...n.props,arrowheadEnd:n.props.arrowheadEnd==="none"?"arrow":"none"}}}}component(n){const r=zl(),o=this.editor.getOnlySelectedShape(),a=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","select.translating","arrow.dragging")&&!this.editor.getIsReadonly(),s=Al(this.editor,n);if(!(s!=null&&s.isValid))return null;const i=B1(this.editor,n),l=n.id===this.editor.getOnlySelectedShapeId(),d=this.editor.getEditingShapeId()===n.id||!ao(n.props.richText);return g.jsxs(g.Fragment,{children:[g.jsxs(fp,{style:{minWidth:50,minHeight:50},children:[g.jsx(YH,{shape:n,shouldDisplayHandles:a&&(o==null?void 0:o.id)===n.id}),n.props.kind==="elbow"&&Ur.debugElbowArrows.get()&&g.jsx(cJe,{arrow:n})]}),d&&g.jsx(QC,{shapeId:n.id,type:"arrow",font:n.props.font,fontSize:VR(n),lineHeight:_s.lineHeight,align:"middle",verticalAlign:"middle",labelColor:yn(r,n.props.labelColor,"solid"),richText:n.props.richText,textWidth:i.box.w-wR*2*n.props.scale,isSelected:l,padding:0,style:{transform:`translate(${i.box.center.x}px, ${i.box.center.y}px)`}})]})}indicator(n){const r=Ev(n.id),o=Zl(n.id+"_clip"),a=Al(this.editor,n);if(!a)return null;const{start:s,end:i}=kh(this.editor,n,a==null?void 0:a.bindings),l=this.editor.getShapeGeometry(n),c=l.bounds,d=ao(n.props.richText),u=r||!d?l.children[1]:null;if(R.Equals(s,i))return null;const m=Zo[n.props.size]*n.props.scale,h=a.start.arrowhead&&GT(a,"start",m),y=a.end.arrowhead&&GT(a,"end",m),v=h&&a.start.arrowhead!=="arrow"||y&&a.end.arrowhead!=="arrow"||!!u,x=u?u.getBounds():new Be(0,0,0,0);if(r&&u)return g.jsx("rect",{x:ie(x.x),y:ie(x.y),width:x.w,height:x.h,rx:3.5*n.props.scale,ry:3.5*n.props.scale});const S=!(a.start.arrowhead==="none"||a.start.arrowhead==="arrow"),T=!(a.end.arrowhead==="none"||a.end.arrowhead==="arrow");return g.jsxs("g",{children:[v&&g.jsx("defs",{children:g.jsx(sle,{radius:3.5*n.props.scale,hasText:!d,bounds:c,labelBounds:x,as:S&&h?h:"",ae:T&&y?y:""})}),g.jsxs("g",{style:{clipPath:v?`url(#${o})`:void 0,WebkitClipPath:v?`url(#${o})`:void 0},children:[v&&g.jsx("rect",{x:c.minX-100,y:c.minY-100,width:c.width+200,height:c.height+200,opacity:0}),tle(n,a,n.props.dash==="draw"?{style:"draw",randomSeed:n.id,strokeWidth:1,passes:1,offset:0,roundness:m*2,props:{strokeWidth:void 0}}:{style:"solid",strokeWidth:1,props:{strokeWidth:void 0}})]}),h&&g.jsx("path",{d:h}),y&&g.jsx("path",{d:y}),u&&g.jsx("rect",{x:ie(x.x),y:ie(x.y),width:x.w,height:x.h,rx:3.5,ry:3.5})]})}onEditStart(n){if(ao(n.props.richText)){const r=ole(this.editor,n);this.editor.updateShape({id:n.id,type:n.type,props:{labelPosition:r}})}}toSvg(n,r){r.addExportDef(xj(n.props.fill));const o=Op(r),a=1/n.props.scale;return g.jsxs("g",{transform:`scale(${a})`,children:[g.jsx(YH,{shape:n,shouldDisplayHandles:!1}),g.jsx(ZC,{fontSize:VR(n),font:n.props.font,align:"middle",verticalAlign:"middle",labelColor:yn(o,n.props.labelColor,"solid"),richText:n.props.richText,bounds:B1(this.editor,n).box.clone().expandBy(-wR*n.props.scale),padding:0,showTextOutline:!0})]})}getCanvasSvgDefs(){return[Sj(),{key:"arrow:dot",component:fJe},{key:"arrow:cross",component:mJe}]}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,scale:qt(n.props.scale,r.props.scale,o),start:{x:qt(n.props.start.x,r.props.start.x,o),y:qt(n.props.start.y,r.props.start.y,o)},end:{x:qt(n.props.end.x,r.props.end.x,o),y:qt(n.props.end.y,r.props.end.y,o)},bend:qt(n.props.bend,r.props.bend,o),labelPosition:qt(n.props.labelPosition,r.props.labelPosition,o)}}}L(F1,"type","arrow"),L(F1,"props",ZW),L(F1,"migrations",eY);const YH=Co(function({shape:e,shouldDisplayHandles:n}){const r=ue(),o=zl(),a=Al(r,e),s=ce("force solid",()=>r.getZoomLevel()<.2,[r]),i=Zl(e.id+"_clip"),l=Zl("arrowhead-dot"),c=Zl("arrowhead-cross"),d=Ev(e.id),u=r.getShapeGeometry(e);if(!u)return null;const m=Be.ZeroFix(u.bounds),h=aa(r,e),y=ao(e.props.richText);if(!(a!=null&&a.isValid))return null;const v=Zo[e.props.size]*e.props.scale,x=a.start.arrowhead&&GT(a,"start",v),S=a.end.arrowhead&&GT(a,"end",v);let T=null;n&&(h.start||h.end)&&(T=JXe(a,{style:"dashed",start:"skip",end:"skip",lengthRatio:2.5,strokeWidth:2/r.getZoomLevel(),props:{className:"tl-arrow-hint",markerStart:h.start?h.start.props.isExact?"":h.start.props.isPrecise?`url(#${c})`:`url(#${l})`:"",markerEnd:h.end?h.end.props.isExact?"":h.end.props.isPrecise?`url(#${c})`:`url(#${l})`:"",opacity:.16}}));const C=B1(r,e),_=!(a.start.arrowhead==="none"||a.start.arrowhead==="arrow"),I=!(a.end.arrowhead==="none"||a.end.arrowhead==="arrow");return g.jsxs(g.Fragment,{children:[g.jsx("defs",{children:g.jsx("clipPath",{id:i,children:g.jsx(sle,{radius:3.5*e.props.scale,hasText:d||!y,bounds:m,labelBounds:C.box,as:_&&x?x:"",ae:I&&S?S:""})})}),g.jsxs("g",{fill:"none",stroke:yn(o,e.props.color,"solid"),strokeWidth:v,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[T,g.jsxs("g",{style:{clipPath:`url(#${i})`,WebkitClipPath:`url(#${i})`},children:[g.jsx("rect",{x:ie(m.minX-100),y:ie(m.minY-100),width:ie(m.width+200),height:ie(m.height+200),opacity:0}),tle(e,a,{style:e.props.dash,strokeWidth:v,forceSolid:s,randomSeed:e.id})]}),x&&_&&e.props.fill!=="none"&&g.jsx(U0,{theme:o,d:x,color:e.props.color,fill:e.props.fill,scale:e.props.scale}),S&&I&&e.props.fill!=="none"&&g.jsx(U0,{theme:o,d:S,color:e.props.color,fill:e.props.fill,scale:e.props.scale}),x&&g.jsx("path",{d:x}),S&&g.jsx("path",{d:S})]})]})});function sle({radius:t,hasText:e,bounds:n,labelBounds:r,as:o,ae:a}){const s=w.useMemo(()=>{const i=new Dn;return i.moveTo(n.left-100,n.top-100).lineTo(n.right+100,n.top-100).lineTo(n.right+100,n.bottom+100).lineTo(n.left-100,n.bottom+100).close(),e&&i.moveTo(r.left,r.top+t).lineTo(r.left,r.bottom-t).circularArcTo(t,!1,!1,r.left+t,r.bottom).lineTo(r.right-t,r.bottom).circularArcTo(t,!1,!1,r.right,r.bottom-t).lineTo(r.right,r.top+t).circularArcTo(t,!1,!1,r.right-t,r.top).lineTo(r.left+t,r.top).circularArcTo(t,!1,!1,r.left,r.top+t).close(),i.toD()},[t,e,n.bottom,n.left,n.right,n.top,r.bottom,r.left,r.right,r.top]);return g.jsx("path",{d:`${s}${o}${a}`})}const XH=new WeakMap;function fJe(){const t=Zl("arrowhead-dot");return g.jsx("marker",{id:t,className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:g.jsx("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function mJe(){const t=Zl("arrowhead-cross");return g.jsxs("marker",{id:t,className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[g.jsx("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),g.jsx("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}function hJe(t,e,n=1e-4){const r=Math.abs(t-e),o=r<n,a=Math.abs(r-Math.PI)<n,s=Math.abs(r-mr)<n;return{isParallel:o||s,isFlippedParallel:a}}const JH="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function cg({url:t}){const e=ue(),n=ce("zoomLevel",()=>e.getZoomLevel()<.32,[e]),r=w.useCallback(o=>{e.inputs.shiftKey||e.markEventAsHandled(o)},[e]);return g.jsx("a",{className:pt("tl-hyperlink-button",{"tl-hyperlink-button__hidden":n}),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:r,onPointerUp:r,title:t,draggable:!1,children:g.jsx("div",{className:"tl-hyperlink__icon",style:{mask:`url("${JH}") center 100% / 100% no-repeat`,WebkitMask:`url("${JH}") center 100% / 100% no-repeat`}})})}const QH="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E",gJe=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function KT(t){return gJe.map(n=>{const{offsetX:r,offsetY:o,blur:a,spread:s,color:i}=n,l=new R(r,o),{x:c,y:d}=l.rot(-t);return`${c}px ${d}px ${a}px ${s}px ${i}`}).join(", ")}class z1 extends Og{canResize(){return!1}hideSelectionBoundsFg(){return!0}getText(e){return e.props.url}getAriaDescriptor(e){const n=e.props.assetId?this.editor.getAsset(e.props.assetId):null;if(n!=null&&n.props.title)return Uie(n.props.title)+(n.props.description?", "+n.props.description:"")}getDefaultProps(){return{url:"",w:w0,h:M3,assetId:null}}component(e){const{assetId:n,url:r,h:o}=e.props,a=this.editor.getShapePageTransform(e).rotation();return g.jsx(lle,{assetId:n,url:r,h:o,rotation:a})}indicator(e){return g.jsx(ile,{w:e.props.w,h:e.props.h})}onBeforeCreate(e){return o7(this.editor,e)}onBeforeUpdate(e,n){if(e.props.url!==n.props.url)if(Vi.isValid(n.props.url))zje(this.editor,n);else return{...n,props:{...n.props,url:e.props.url}};if(e.props.assetId!==n.props.assetId)return o7(this.editor,n)}getInterpolatedProps(e,n,r){return{...r>.5?n.props:e.props,w:qt(e.props.w,n.props.w,r),h:qt(e.props.h,n.props.h,r)}}}L(z1,"type","bookmark"),L(z1,"props",sY),L(z1,"migrations",iY);function ile({w:t,h:e}){return g.jsx("rect",{width:ie(t),height:ie(e),rx:"6",ry:"6"})}function lle({assetId:t,rotation:e,url:n,h:r,showImageContainer:o=!0}){const a=ue(),s=t?a.getAsset(t):null,i=!!hv()&&Nn.isSafari,l=Fje(n),[c,d]=w.useState(!0),u=()=>d(!1),m=w.useCallback(h=>{a.inputs.shiftKey||a.markEventAsHandled(h)},[a]);return g.jsx(ap,{children:g.jsxs("div",{className:pt("tl-bookmark__container",i&&"tl-bookmark__container--safariExport"),style:{boxShadow:i?void 0:KT(e),maxHeight:r},children:[o&&(!s||s.props.image)&&g.jsxs("div",{className:"tl-bookmark__image_container",children:[s?g.jsx("img",{className:"tl-bookmark__image",draggable:!1,referrerPolicy:"strict-origin-when-cross-origin",src:s==null?void 0:s.props.image,alt:(s==null?void 0:s.props.title)||""}):g.jsx("div",{className:"tl-bookmark__placeholder"}),(s==null?void 0:s.props.image)&&g.jsx(cg,{url:n})]}),g.jsxs("div",{className:"tl-bookmark__copy_container",children:[s!=null&&s.props.title?g.jsx("a",{className:"tl-bookmark__link",href:n||"",target:"_blank",rel:"noopener noreferrer",draggable:!1,onPointerDown:m,onPointerUp:m,children:g.jsx("h2",{className:"tl-bookmark__heading",children:Uie(s.props.title)})}):null,s!=null&&s.props.description&&(s!=null&&s.props.image)?g.jsx("p",{className:"tl-bookmark__description",children:s.props.description}):null,g.jsxs("a",{className:"tl-bookmark__link",href:n||"",target:"_blank",rel:"noopener noreferrer",draggable:!1,onPointerDown:m,onPointerUp:m,children:[c&&(s!=null&&s.props.favicon)?g.jsx("img",{className:"tl-bookmark__favicon",src:s==null?void 0:s.props.favicon,referrerPolicy:"strict-origin-when-cross-origin",onError:u,alt:`favicon of ${l}`}):g.jsx("div",{className:"tl-hyperlink__icon",style:{mask:`url("${QH}") center 100% / 100% no-repeat`,WebkitMask:`url("${QH}") center 100% / 100% no-repeat`}}),g.jsx("span",{children:l})]})]})]})})}function q0(t,e=!1){const n=t.length;if(n<2)return"";let r=t[0].point,o=t[1].point;if(n===2)return`M${Aa(r)}L${Aa(o)}`;let a="";for(let s=2,i=n-1;s<i;s++)r=t[s].point,o=t[s+1].point,a+=ei(r,o);return e?`M${ei(t[0].point,t[1].point)}Q${Aa(t[1].point)}${ei(t[1].point,t[2].point)}T${a}${ei(t[n-1].point,t[0].point)}${ei(t[0].point,t[1].point)}Z`:`M${Aa(t[0].point)}Q${Aa(t[1].point)}${ei(t[1].point,t[2].point)}${t.length>3?"T":""}${a}L${Aa(t[n-1].point)}`}function bJe(t,e={}){const{start:n={},end:r={}}=e,{cap:o=!0}=n,{cap:a=!0}=r;dt(!n.taper&&!r.taper,"cap taper not supported here"),dt(!n.easing&&!r.easing,"cap easing not supported here"),dt(o&&a,"cap must be true");const s=bp(t,e);GL(s,e);const i=yJe(s);let l="";for(const c of i)l+=xJe(c,e);return l}function yJe(t){if(t.length<=2)return[t];const e=[];let n=[t[0]],r=R.Sub(t[1].point,t[0].point).uni(),o,a,s,i,l;for(let c=1,d=t.length;c<d-1;c++){if(s=t[c-1],i=t[c],l=t[c+1],o=R.Sub(l.point,i.point).uni(),a=R.Dpr(r,o),r=o,a<-.8){const u={...i,point:i.input};n.push(u),e.push(cO(n)),n=[u];continue}if(n.push(i),!(a>.7)&&(R.Dist2(s.point,i.point)+R.Dist2(i.point,l.point))/((s.radius+i.radius+l.radius)/3)**2<1.5){n.push(i),e.push(cO(n)),n=[i];continue}}return n.push(t[t.length-1]),e.push(cO(n)),e}function cO(t){const e=t[0];let n;for(;t.length>2&&(n=t[1],R.Dist2(e.point,n.point)<((e.radius+n.radius)/2*.5)**2);)t.splice(1,1);const r=t[t.length-1];let o;for(;t.length>2&&(o=t[t.length-2],R.Dist2(r.point,o.point)<((r.radius+o.radius)/2*.5)**2);)t.splice(t.length-2,1);return t.length>1&&(t[0]={...t[0],vector:R.Sub(t[0].point,t[1].point).uni()},t[t.length-1]={...t[t.length-1],vector:R.Sub(t[t.length-2].point,t[t.length-1].point).uni()}),t}function vJe(t,e,n){return"M "+t+" "+e+" m -"+n+", 0 a "+n+","+n+" 0 1,1 "+n*2+",0 a "+n+","+n+" 0 1,1 -"+n*2+",0"}function xJe(t,e={}){if(t.length===0)return"";if(t.length===1)return vJe(t[0].point.x,t[0].point.y,t[0].radius);const{left:n,right:r}=Ose(t,e);r.reverse();let o=`M${Aa(n[0])}T`;for(let a=1;a<n.length;a++)o+=ei(n[a-1],n[a]);{const a=t[t.length-1],s=a.radius,i=a.vector.clone().per().neg(),l=R.Add(a.point,R.Mul(i,s)),c=R.Add(a.point,R.Mul(i,-s));o+=`${Aa(l)}A${ie(s)},${ie(s)} 0 0 1 ${Aa(c)}T`}for(let a=1;a<r.length;a++)o+=ei(r[a-1],r[a]);{const a=t[0],s=a.radius,i=a.vector.clone().per(),l=R.Add(a.point,R.Mul(i,s)),c=R.Add(a.point,R.Mul(i,-s));o+=`${Aa(l)}A${ie(s)},${ie(s)} 0 0 1 ${Aa(c)}Z`}return o}const cle=(t,e,n)=>{const r=[],o=[];t.forEach(c=>r.push(...c.points)),e.forEach(c=>o.push(...c.points));const a=Math.max(r.length,o.length),s=[],i=[];for(let c=0;c<a;c++)s.push(r[c]||r[r.length-1]),i.push(o[c]||o[o.length-1]);return[{type:"free",points:s.map((c,d)=>{let u=.5;return i[d].z!==void 0&&c.z!==void 0&&(u=qt(c.z,i[d].z,n)),{x:qt(c.x,i[d].x,n),y:qt(c.y,i[d].y,n),z:u}})}]},SJe=t=>t*.65+l2e(t*Un/2)*.35,EJe=t=>({size:t,thinning:.5,streamline:nc(t,[9,16],[.64,.74],!0),smoothing:.62,easing:Ja.easeOutSine,simulatePressure:!0}),TJe=t=>({size:1+t*1.2,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:SJe}),ZH=t=>({size:t,thinning:0,streamline:nc(t,[9,16],[.64,.74],!0),smoothing:.62,simulatePressure:!1,easing:Ja.linear}),wJe=t=>({size:t,thinning:0,streamline:.62,smoothing:.62,simulatePressure:!1,easing:Ja.linear});function Tj({strokeWidth:t,showAsComplete:e}){return{size:1+t,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:Ja.easeOutSine,last:e}}function GR(t,e,n,r){const o=t.isComplete||n;return r?t.isPen?{...wJe(e),last:o}:{...ZH(e),last:o}:t.dash==="draw"?t.isPen?{...TJe(e),last:o}:{...EJe(e),last:o}:{...ZH(e),last:o}}function ug(t){const e=[];for(const n of t)if(n.type==="free"||n.points.length<2)e.push(...n.points.map(R.Cast));else{const r=Math.max(4,Math.floor(R.Dist(n.points[0],n.points[1])/16));e.push(...R.PointsBetween(n.points[0],n.points[1],r))}return e}function CJe(t,e,n){return{draw:"none",solid:"none",dotted:`${n} ${e*2}`,dashed:`${e*2} ${e*2}`}[t.props.dash]}class U1 extends ec{constructor(){super(...arguments);L(this,"options",{maxPointsPerShape:600})}hideResizeHandles(n){return uO(n)}hideRotateHandle(n){return uO(n)}hideSelectionBoundsFg(n){return uO(n)}getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1,scale:1}}getGeometry(n){const r=ug(n.props.segments),o=(Zo[n.props.size]+1)*n.props.scale;if(n.props.segments.length===1){const s=Be.FromPoints(r);if(s.width<o*2&&s.height<o*2)return new zE({x:-o,y:-o,radius:o,isFilled:!0})}const a=bp(r,GR(n.props,o,n.props.isPen,!0)).map(s=>s.point);return n.props.isClosed&&a.length>2?new h0({points:a,isFilled:n.props.fill!=="none"}):a.length===1?new zE({x:-o,y:-o,radius:o,isFilled:!0}):new mv({points:a})}component(n){return g.jsx(fp,{children:g.jsx(e$,{shape:n})})}indicator(n){var d;const r=ug(n.props.segments);let o=(Zo[n.props.size]+1)*n.props.scale;!ce("force solid",()=>{const u=this.editor.getZoomLevel();return u<.5&&u<1.5/o},[this.editor,o])&&!n.props.isPen&&n.props.dash==="draw"&&r.length===1&&(o+=rm(n.id)()*(o/6));const s=n.props.isComplete||((d=Ca(n.props.segments))==null?void 0:d.type)==="straight",i=GR(n.props,o,s,!0),l=bp(r,i),c=l.length>1?q0(l,n.props.isClosed):ule(r[0],o);return g.jsx("path",{d:c})}toSvg(n,r){r.addExportDef(xj(n.props.fill));const o=1/n.props.scale;return g.jsx("g",{transform:`scale(${o})`,children:g.jsx(e$,{shape:n,zoomOverride:1})})}getCanvasSvgDefs(){return[Sj()]}onResize(n,r){const{scaleX:o,scaleY:a}=r,s=[];for(const i of n.props.segments)s.push({...i,points:i.points.map(({x:l,y:c,z:d})=>({x:Kl(o*l),y:Kl(a*c),z:d}))});return{props:{segments:s}}}expandSelectionOutlinePx(n){const r=n.props.dash==="draw"?1.6:1;return Zo[n.props.size]*r/2*n.props.scale}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,segments:cle(n.props.segments,r.props.segments,o),scale:qt(n.props.scale,r.props.scale,o)}}}L(U1,"type","draw"),L(U1,"props",cY),L(U1,"migrations",uY);function ule(t,e){const n=(e+1)*.5;return`M ${t.x} ${t.y} m -${n}, 0 a ${n},${n} 0 1,0 ${n*2},0 a ${n},${n} 0 1,0 -${n*2},0`}function uO(t){return t.props.segments.length===1&&t.props.segments[0].points.length<2}function e$({shape:t,zoomOverride:e}){var h;const n=zl(),r=ue(),o=ug(t.props.segments),a=t.props.isComplete||((h=Ca(t.props.segments))==null?void 0:h.type)==="straight";let s=(Zo[t.props.size]+1)*t.props.scale;const i=ce("force solid",()=>{const y=e??r.getZoomLevel();return y<.5&&y<1.5/s},[r,s,e]),l=ce("dot adjustment",()=>(e??r.getZoomLevel())<.2?0:.1,[r,e]);!i&&!t.props.isPen&&t.props.dash==="draw"&&o.length===1&&(s+=rm(t.id)()*(s/6));const c=GR(t.props,s,a,i);if(!i&&t.props.dash==="draw")return g.jsxs(g.Fragment,{children:[t.props.isClosed&&t.props.fill&&o.length>1?g.jsx(U0,{d:q0(bp(o,c),t.props.isClosed),theme:n,color:t.props.color,fill:t.props.isClosed?t.props.fill:"none",scale:t.props.scale}):null,g.jsx("path",{d:bJe(o,c),strokeLinecap:"round",fill:yn(n,t.props.color,"solid")})]});const d=bp(o,c),u=d.length<2,m=u?ule(o[0],0):q0(d,t.props.isClosed);return g.jsxs(g.Fragment,{children:[g.jsx(U0,{d:m,theme:n,color:t.props.color,fill:u||t.props.isClosed?t.props.fill:"none",scale:t.props.scale}),g.jsx("path",{d:m,strokeLinecap:"round",fill:u?yn(n,t.props.color,"solid"):"none",stroke:yn(n,t.props.color,"solid"),strokeWidth:s,strokeDasharray:u?"none":CJe(t,s,l),strokeDashoffset:"0"})]})}function AJe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function _Je(t,e){const n=zt(e);if(!n)return;const r=n.host.replace("www.","");for(const o of t)if(dle(o.hostnames,r)){const a=o.fromEmbedUrl(e);if(a)return{definition:o,url:a,embedUrl:e}}}const kJe=t=>t.split("*").map(e=>AJe(e)).join(".+"),dle=(t,e)=>!!t.find(n=>{const r=new RegExp(kJe(n));return e.match(r)});function IJe(t,e){const n=zt(e);if(!n)return;const r=n.host.replace("www.","");for(const o of t)if(dle(o.hostnames,r)){const a=o.toEmbedUrl(e);if(a)return{definition:o,embedUrl:a,url:e}}}function PJe(t,e){try{return IJe(t,e)??_Je(t,e)}catch{return}}const OJe=t=>Object.entries(t).filter(([e,n])=>n).map(([e])=>e).join(" "),Nu=class Nu extends Og{static setEmbedDefinitions(e){Nu.embedDefinitions=e}getEmbedDefinitions(){return Nu.embedDefinitions}getEmbedDefinition(e){return PJe(Nu.embedDefinitions,e)}getText(e){return e.props.url}getAriaDescriptor(e){const n=this.getEmbedDefinition(e.props.url);return n==null?void 0:n.definition.title}hideSelectionBoundsFg(e){return!this.canResize(e)}canEdit(){return!0}canResize(e){var n,r;return!!((r=(n=this.getEmbedDefinition(e.props.url))==null?void 0:n.definition)!=null&&r.doesResize)}canEditInReadonly(){return!0}getDefaultProps(){return{w:300,h:300,url:""}}getGeometry(e){const n=this.getEmbedDefinition(e.props.url);return n!=null&&n.definition?super.getGeometry(e):new rc({width:w0,height:eR,isFilled:!0})}isAspectRatioLocked(e){const n=this.getEmbedDefinition(e.props.url);return(n==null?void 0:n.definition.isAspectRatioLocked)??!1}onResize(e,n){const r=this.isAspectRatioLocked(e),o=this.getEmbedDefinition(e.props.url);let a=(o==null?void 0:o.definition.minWidth)??200,s=(o==null?void 0:o.definition.minHeight)??200;if(r){const i=e.props.w/e.props.h;i>1?a*=i:s/=i}return Uw(e,n,{minWidth:a,minHeight:s})}component(e){const n=hv(),{w:r,h:o,url:a}=e.props,s=Ev(e.id),i=this.getEmbedDefinition(a),l=ce("is hovering",()=>{const{editingShapeId:h,hoveredShapeId:y}=this.editor.getCurrentPageState();if(h&&y!==h){const v=this.editor.getShape(h);if(v&&this.editor.isShapeOfType(v,"embed"))return!0}return!1},[]),c=this.editor.getShapePageTransform(e).rotation();if(n)return g.jsx(ap,{className:"tl-embed-container",id:e.id,children:g.jsx("div",{className:"tl-embed",style:{border:0,boxShadow:KT(c),borderRadius:(i==null?void 0:i.definition.overrideOutlineRadius)??8,background:(i==null?void 0:i.definition.backgroundColor)??"var(--tl-color-background)",width:r,height:o}})});const d=s||l;if(typeof window<"u"&&(window!==window.top||window.self!==window.parent)&&(i==null?void 0:i.definition.type)==="tldraw")return null;if((i==null?void 0:i.definition.type)==="github_gist"){const h=i.url.split("/").pop();if(!h)throw Error("No gist id!");return g.jsx(ap,{className:"tl-embed-container",id:e.id,children:g.jsx(MJe,{id:h,width:ie(r),height:ie(o),isInteractive:d,pageRotation:c})})}const m=OJe({...pUe,...(i==null?void 0:i.definition.overridePermissions)??{}});return g.jsx(ap,{className:"tl-embed-container",id:e.id,children:i!=null&&i.definition?g.jsx("iframe",{className:"tl-embed",sandbox:m,src:i.embedUrl,width:ie(r),height:ie(o),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",tabIndex:s?0:-1,style:{border:0,pointerEvents:d?"auto":"none",zIndex:d?"":"-1",boxShadow:KT(c),borderRadius:(i==null?void 0:i.definition.overrideOutlineRadius)??8,background:i==null?void 0:i.definition.backgroundColor}}):g.jsx(lle,{url:a,h:o,rotation:c,assetId:null,showImageContainer:!1})})}indicator(e){const n=this.getEmbedDefinition(e.props.url);return n!=null&&n.definition?g.jsx("rect",{width:ie(e.props.w),height:ie(e.props.h),rx:(n==null?void 0:n.definition.overrideOutlineRadius)??8,ry:(n==null?void 0:n.definition.overrideOutlineRadius)??8}):g.jsx(ile,{w:w0,h:eR})}getInterpolatedProps(e,n,r){return{...r>.5?n.props:e.props,w:qt(e.props.w,n.props.w,r),h:qt(e.props.h,n.props.h,r)}}};L(Nu,"type","embed"),L(Nu,"props",dY),L(Nu,"migrations",pY),L(Nu,"embedDefinitions",CL);let WT=Nu;function MJe({id:t,isInteractive:e,width:n,height:r,style:o,pageRotation:a}){if(!t.match(/^[0-9a-f]+$/))throw Error("No gist id!");return g.jsx("iframe",{className:"tl-embed",draggable:!1,width:ie(n),height:ie(r),frameBorder:"0",scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",tabIndex:e?0:-1,style:{...o,pointerEvents:e?"all":"none",zIndex:e?"":"-1",boxShadow:KT(a)},srcDoc:`
			<html>
				<head>
					<base target="_blank">
				</head>
				<body>
					<script src=${`https://gist.github.com/${t}.js`}><\/script>
					<style type="text/css">
						* { margin: 0px; }
						table { height: 100%; background-color: red; }
						.gist { background-color: none; height: 100%;  }
						.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
					</style>
				</body>
			</html>`})}function RJe(t){return t.replace(/\s/g,"")}function DJe(t,e,n){const{padding:r=0}=n;if(e.length===0)return null;const o=Be.From(e[0].box);for(const{box:c}of e)o.union(c);const a=r+(n.offsetX??0),s=(n.offsetY??0)+n.fontSize/2+(n.verticalTextAlign==="start"?r:n.verticalTextAlign==="end"?n.height-r-o.height:(Math.ceil(n.height)-o.height)/2);let i=null;const l=[];for(const{text:c,box:d}of e)i!==null&&d.y>i&&l.push(g.jsx("tspan",{alignmentBaseline:"mathematical",x:a,y:d.y+s,children:`
`},l.length)),l.push(g.jsx("tspan",{alignmentBaseline:"mathematical",x:d.x+a,y:d.y+s,unicodeBidi:"plaintext",children:RJe(c)},l.length)),i=d.y;return g.jsx("text",{fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,dominantBaseline:"mathematical",alignmentBaseline:"mathematical",stroke:n.stroke,strokeWidth:n.strokeWidth,fill:n.fill,children:l})}function KR(t,e){const o=((OE(t.getShapePageTransform(e.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4;return Math.floor(o)}const t$=new WeakMap;function n$(t,e,n){let r=t$.get(e.props);if(!r){const o=wj(e.props.name,"Frame")+"",a=t.textMeasure.measureTextSpans(o,n),s=a[0],i=Ca(a);r=i.box.w+i.box.x-s.box.x,t$.set(e.props,r)}return new Be(0,-n.height,r,n.height)}function r$(t,e){return{fontSize:12,fontFamily:e?"Arial":"Inter, sans-serif",textAlign:"start",width:t,height:24,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle",offsetY:-34,offsetX:0}}function ple(t,e,n){const r=n?"":"px",o=n?"":"deg";let a;switch(e){case 0:a="";break;case 3:a=`translate(${ie(t.props.w)}${r}, 0${r}) rotate(90${o})`;break;case 2:a=`translate(${ie(t.props.w)}${r}, ${ie(t.props.h)}${r}) rotate(180${o})`;break;case 1:a=`translate(0${r}, ${ie(t.props.h)}${r}) rotate(270${o})`;break;default:throw Error("labelSide out of bounds")}return a}const NJe=w.forwardRef(({id:t,name:e,isEditing:n},r)=>{const o=ue(),a=fa(),s=ce("isCoarsePointer",()=>o.getInstanceState().isCoarsePointer,[o]),i=a<Hr.TABLET_SM&&s,l=w.useRef(!1),c=it(),d=w.useCallback(v=>{n&&o.markEventAsHandled(v)},[o,n]),u=w.useCallback(v=>{v.key==="Enter"&&!v.nativeEvent.isComposing&&(o.markEventAsHandled(v),v.currentTarget.blur(),o.setEditingShape(null))},[o]),m=w.useCallback(v=>{const x=o.getShape(t);!x||x.props.name===v||o.updateShapes([{id:t,type:"frame",props:{name:v}}])},[t,o]),h=w.useCallback(v=>{m(v.currentTarget.value)},[m]),y=w.useCallback(v=>{m(v.currentTarget.value)},[m]);return w.useEffect(()=>{if(!n){l.current=!1;return}if(n&&i&&!l.current){l.current=!0;const v=o.getShape(t),x=(v==null?void 0:v.props.name)??"",S=window.prompt(c("action.rename"),x);l.current=!1,S!==null&&m(S),o.setEditingShape(null)}},[n,i,t,c,m,o]),g.jsxs("div",{className:`tl-frame-label ${n&&!i?"tl-frame-label__editing":""}`,children:[g.jsx("input",{className:"tl-frame-name-input",ref:r,disabled:!n||i,readOnly:!n||i,style:{display:n?void 0:"none"},value:e,autoFocus:!i,onKeyDown:u,onBlur:h,onChange:y,onPointerDown:d,draggable:!1}),wj(e,"Frame")+""]})}),LJe=w.memo(function({id:e,name:n,width:r,height:o,fill:a,stroke:s,color:i,offsetX:l,showColors:c}){const d=ue(),{side:u,translation:m}=ce("shape rotation",()=>{const v=d.getShape(e);if(!v)return{side:0,translation:"translate(0, 0)"};const x=KR(d,v);return{side:x,translation:ple(v,x,!1)}},[d,l,e]),h=w.useRef(null),y=Ev(e);return w.useEffect(()=>{const v=h.current;v&&y&&(v.focus(),v.select())},[h,y]),g.jsx("div",{className:"tl-frame-heading",style:{overflow:y?"visible":"hidden",maxWidth:`calc(var(--tl-zoom) * ${Math.ceil(u===0||u===2?r:o)}px + ${c?"0px":"var(--tl-frame-offset-width)"})`,bottom:"100%",transform:`${m} scale(var(--tl-scale)) translateX(${l}px)`},children:g.jsx("div",{className:"tl-frame-heading-hit-area",style:{color:i,backgroundColor:a,boxShadow:`inset 0px 0px 0px 1px ${s}`},children:g.jsx(NJe,{ref:h,id:e,name:n,isEditing:y})})})}),jJe=12,BJe=32,FJe=-7,zJe=4;function wj(t,e){return t.match(/^\s*$/)?e:t}class q1 extends Og{constructor(){super(...arguments);L(this,"options",{showColors:!1})}static configure(n){const r=super.configure.call(this,n);return n.showColors&&(r.props={...r.props,color:ks}),r}canEdit(){return!0}canResize(){return!0}canResizeChildren(){return!1}isExportBoundsContainer(){return!0}getDefaultProps(){return{w:320,h:180,name:"",color:"black"}}getAriaDescriptor(n){return n.props.name}getGeometry(n){const{editor:r}=this,o=r.getZoomLevel(),a=KR(r,n),s=a%2===1,i=s?n.props.h:n.props.w,l=r$(i,!1),c=n$(r,n,l),d=this.options.showColors,u=jJe/o,m=BJe/o,h=i+(d?1:u),y=c.w/o,v=c.h/o,x=Lt(y+u,m,h),S=(d?-1:FJe)/o,T=zJe/o,C=s?v:x,_=s?x:v;let I,P;switch(a){case 0:{I=S,P=-(v+T);break}case 1:{I=-(v+T),P=n.props.h-(S+x);break}case 2:{I=n.props.w-(S+x),P=n.props.h+T;break}case 3:{I=n.props.w+T,P=S;break}}return new pi({children:[new rc({width:n.props.w,height:n.props.h,isFilled:!1}),new rc({x:I,y:P,width:C,height:_,isFilled:!0,isLabel:!0,excludeFromShapeBounds:!0})]})}getText(n){return n.props.name}component(n){const r=zl(),o=ce("is creating this shape",()=>{const m=this.editor.getStateDescendant("select.resizing");if(!m||!m.getIsActive())return!1;const h=m==null?void 0:m.info;return h?h.isCreating&&this.editor.getOnlySelectedShapeId()===n.id:!1},[n.id]),a=this.options.showColors,s=a?n.props.color:"black",i=yn(r,s,"frameFill"),l=yn(r,s,"frameStroke"),c=a?yn(r,s,"frameHeadingStroke"):r.background,d=a?yn(r,s,"frameHeadingFill"):r.background,u=yn(r,s,"frameText");return g.jsxs(g.Fragment,{children:[g.jsx(fp,{children:g.jsx("rect",{className:pt("tl-frame__body",{"tl-frame__creating":o}),fill:i,stroke:l,style:{width:`calc(${n.props.w}px + 1px / var(--tl-zoom))`,height:`calc(${n.props.h}px + 1px / var(--tl-zoom))`,transform:"translate(calc(-0.5px / var(--tl-zoom)), calc(-0.5px / var(--tl-zoom)))"}})}),o?null:g.jsx(LJe,{id:n.id,name:n.props.name,fill:d,stroke:c,color:u,width:n.props.w,height:n.props.h,offsetX:a?-1:-7,showColors:this.options.showColors})]})}toSvg(n,r){const o=Op({isDarkMode:r.isDarkMode}),a=KR(this.editor,n),i=a%2===1?n.props.h:n.props.w,l=ple(n,a,!0),c=r$(i-12,!0),d=wj(n.props.name,"Frame")+"",u=n$(this.editor,n,c),m=this.editor.textMeasure.measureTextSpans(d,c),h=DJe(this.editor,m,c),y=this.options.showColors,v=y?n.props.color:"black",x=yn(o,v,"frameFill"),S=yn(o,v,"frameStroke"),T=y?yn(o,v,"frameHeadingStroke"):o.background,C=y?yn(o,v,"frameHeadingFill"):o.background,_=yn(o,v,"frameText");return g.jsxs(g.Fragment,{children:[g.jsx("rect",{width:n.props.w,height:n.props.h,fill:x,stroke:S,strokeWidth:1,x:0,rx:0,ry:0}),g.jsxs("g",{fill:_,transform:l,children:[g.jsx("rect",{x:u.x-(y?0:6),y:u.y-6,width:Math.min(i,u.width+12),height:u.height,fill:C,stroke:T,rx:4,ry:4}),g.jsx("g",{transform:`translate(${y?8:0}, 4)`,children:h})]})]})}indicator(n){return g.jsx("rect",{width:ie(n.props.w),height:ie(n.props.h),className:"tl-frame-indicator"})}providesBackgroundForChildren(){return!0}getClipPath(n){return this.editor.getShapeGeometry(n.id).vertices}canReceiveNewChildrenOfType(n){return!n.isLocked}onResize(n,r){return Uw(n,r)}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,w:qt(n.props.w,r.props.w,o),h:qt(n.props.h,r.props.h,o)}}onDoubleClickEdge(n,r){if(r.target!=="selection")return;const{handle:o}=r;if(!o)return;const a=o==="left"||o==="right",s=o==="top"||o==="bottom",i=this.editor.getSortedChildIdsForParent(n.id),l=Dt(i.map(h=>this.editor.getShape(h)));if(!l.length)return;const{dx:c,dy:d,w:u,h:m}=Ete(l,this.editor,{padding:10});return this.editor.run(()=>{const h=i.map(y=>{const v=this.editor.getShape(y);return{id:v.id,type:v.type,x:a?v.x+c:v.x,y:s?v.y+d:v.y}});this.editor.updateShapes(h)}),{id:n.id,type:n.type,props:{w:a?u:n.props.w,h:s?m:n.props.h}}}onDoubleClickCorner(n){return Tte(this.editor,n.id,{padding:10}),{id:n.id,type:n.type}}onDragShapesIn(n,r,{initialParentIds:o,initialIndices:a}){const{editor:s}=this;if(r.every(c=>c.parentId===n.id))return;let i=!1;const l=r.filter(c=>n.id===o.get(c.id));if(l.length>0){const c=Dt(s.getSortedChildIdsForParent(n).map(d=>s.getShape(d)));l.every(d=>!c.find(u=>u.index===d.index))&&(i=!0)}if(!r.some(c=>s.hasAncestor(n,c.id))&&(s.reparentShapes(r,n.id),i))for(const c of l)s.updateShape({id:c.id,type:c.type,index:a.get(c.id)})}onDragShapesOut(n,r,o){const{editor:a}=this;o.nextDraggingOverShapeId||a.reparentShapes(r.filter(s=>s.parentId===n.id&&this.canReceiveNewChildrenOfType(s)),a.getCurrentPageId())}}L(q1,"type","frame"),L(q1,"props",fY),L(q1,"migrations",mY);const UJe=new as;function WR(t){return UJe.get(t,qJe)}function qJe(t){const e=Math.max(1,t.props.w),n=Math.max(1,t.props.h+t.props.growY),r=e/2,o=n/2,a=Bi[t.props.size]*t.props.scale,s=t.props.fill!=="none";switch(t.props.geo){case"arrow-down":{const i=e*.16,l=Math.min(e,n)*.38;return new Dn().moveTo(i,0,{geometry:{isFilled:s}}).lineTo(e-i,0).lineTo(e-i,n-l).lineTo(e,n-l).lineTo(e/2,n).lineTo(0,n-l).lineTo(i,n-l).close()}case"arrow-left":{const i=Math.min(e,n)*.38,l=n*.16;return new Dn().moveTo(i,0,{geometry:{isFilled:s}}).lineTo(i,l).lineTo(e,l).lineTo(e,n-l).lineTo(i,n-l).lineTo(i,n).lineTo(0,n/2).close()}case"arrow-right":{const i=Math.min(e,n)*.38,l=n*.16;return new Dn().moveTo(0,l,{geometry:{isFilled:s}}).lineTo(e-i,l).lineTo(e-i,0).lineTo(e,n/2).lineTo(e-i,n).lineTo(e-i,n-l).lineTo(0,n-l).close()}case"arrow-up":{const i=e*.16,l=Math.min(e,n)*.38;return new Dn().moveTo(e/2,0,{geometry:{isFilled:s}}).lineTo(e,l).lineTo(e-i,l).lineTo(e-i,n).lineTo(i,n).lineTo(i,l).lineTo(0,l).close()}case"check-box":{const i=Math.min(e,n)*.82,l=(e-i)/2,c=(n-i)/2;return new Dn().moveTo(0,0,{geometry:{isFilled:s}}).lineTo(e,0).lineTo(e,n).lineTo(0,n).close().moveTo(Lt(l+i*.25,0,e),Lt(c+i*.52,0,n),{geometry:{isInternal:!0,isFilled:!1},offset:0}).lineTo(Lt(l+i*.45,0,e),Lt(c+i*.82,0,n)).lineTo(Lt(l+i*.82,0,e),Lt(c+i*.22,0,n),{offset:0})}case"diamond":return new Dn().moveTo(r,0,{geometry:{isFilled:s}}).lineTo(e,o).lineTo(r,n).lineTo(0,o).close();case"ellipse":return new Dn().moveTo(0,o,{geometry:{isFilled:s}}).arcTo(r,o,!1,!0,0,e,o).arcTo(r,o,!1,!0,0,0,o).close();case"heart":{const i=e/4,l=n/4;return new Dn().moveTo(r,n,{geometry:{isFilled:s}}).cubicBezierTo(0,l*1.2,i*1.5,l*3,0,l*2.5).cubicBezierTo(r,l*.9,0,-l*.32,i*1.85,-l*.32).cubicBezierTo(e,l*1.2,i*2.15,-l*.32,e,-l*.32).cubicBezierTo(r,n,e,l*2.5,i*2.5,l*3).close()}case"hexagon":return Dn.lineThroughPoints(VI(e,n,6),{geometry:{isFilled:s}}).close();case"octagon":return Dn.lineThroughPoints(VI(e,n,8),{geometry:{isFilled:s}}).close();case"oval":return $Je(e,n,s);case"pentagon":return Dn.lineThroughPoints(VI(e,n,5),{geometry:{isFilled:s}}).close();case"rectangle":return new Dn().moveTo(0,0,{geometry:{isFilled:s}}).lineTo(e,0).lineTo(e,n).lineTo(0,n).close();case"rhombus":{const i=Math.min(e*.38,n*.38);return new Dn().moveTo(i,0,{geometry:{isFilled:s}}).lineTo(e,0).lineTo(e-i,n).lineTo(0,n).close()}case"rhombus-2":{const i=Math.min(e*.38,n*.38);return new Dn().moveTo(0,0,{geometry:{isFilled:s}}).lineTo(e-i,0).lineTo(e,n).lineTo(i,n).close()}case"star":return VJe(e,n,s);case"trapezoid":{const i=Math.min(e*.38,n*.38);return new Dn().moveTo(i,0,{geometry:{isFilled:s}}).lineTo(e-i,0).lineTo(e,n).lineTo(0,n).close()}case"triangle":return new Dn().moveTo(r,0,{geometry:{isFilled:s}}).lineTo(e,n).lineTo(0,n).close();case"x-box":return HJe(e,n,a,t.props.dash,s);case"cloud":return YJe(e,n,t.id,t.props.size,t.props.scale,s);default:wn(t.props.geo)}}function HJe(t,e,n,r,o){const a=t/2,s=e/2,i=new Dn().moveTo(0,0,{geometry:{isFilled:o}}).lineTo(t,0).lineTo(t,e).lineTo(0,e).close();if(r==="dashed"||r==="dotted")return i.moveTo(0,0,{geometry:{isInternal:!0,isFilled:!1},dashStart:"skip",dashEnd:"outset"}).lineTo(a,s).moveTo(t,e,{geometry:{isInternal:!0,isFilled:!1},dashStart:"skip",dashEnd:"outset"}).lineTo(a,s).moveTo(0,e,{geometry:{isInternal:!0,isFilled:!1},dashStart:"skip",dashEnd:"outset"}).lineTo(a,s).moveTo(t,0,{geometry:{isInternal:!0,isFilled:!1},dashStart:"skip",dashEnd:"outset"}).lineTo(a,s);const l=r==="draw"?.62:0;return i.moveTo(Lt(n*l,0,t),Lt(n*l,0,e),{geometry:{isInternal:!0,isFilled:!1}}).lineTo(Lt(t-n*l,0,t),Lt(e-n*l,0,e)).moveTo(Lt(t-n*l,0,t),Lt(n*l,0,e)).lineTo(Lt(n*l,0,t),Lt(e-n*l,0,e)),i}function $Je(t,e,n){if(e>t){const o=t/2;return new Dn().moveTo(0,o,{geometry:{isFilled:n}}).arcTo(o,o,!1,!0,0,t,o).lineTo(t,e-o).arcTo(o,o,!1,!0,0,0,e-o).close()}const r=e/2;return new Dn().moveTo(r,e,{geometry:{isFilled:n}}).arcTo(r,r,!1,!0,0,r,0).lineTo(t-r,0).arcTo(r,r,!1,!0,0,t-r,e).close()}function VJe(t,e,n){const o=mr/5/2,a=Math.floor(5/4)*2,s=10-a,i=0,l=Math.floor(5/2)*2,c=Math.cos(-yo+a*o)*t/2,d=Math.cos(-yo+s*o)*t/2,u=Math.sin(-yo+i*o)*e/2,m=Math.sin(-yo+l*o)*e/2,h=t-Math.abs(c-d),y=e-Math.abs(m-u),v=t/2+d-(t/2-c),x=e/2+u-(e/2-m),S=1,T=(t-v)/2,C=(e-x)/2,_=(t+h)/2,I=(e+y)/2,P=_*S/2,M=I*S/2;return Dn.lineThroughPoints(Array.from(Array(10),(D,F)=>{const B=-yo+F*o;return new R(T+(F%2?P:_)*Math.cos(B),C+(F%2?M:I)*Math.sin(B))}),{geometry:{isFilled:n}}).close()}function o$(t,e){return t>e?(Un*(e/2)+(t-e))*2:(Un*(t/2)+(e-t))*2}function GJe(t,e,n){const r=Math.min(t,e)/2,o=Math.max(t,e)-r*2,s=(Math.PI*(r*2)+2*o)/n,i=t>e?[{type:"straight",start:new R(r,0),delta:new R(1,0)},{type:"arc",center:new R(t-r,r),startAngle:-Un/2},{type:"straight",start:new R(t-r,e),delta:new R(-1,0)},{type:"arc",center:new R(r,r),startAngle:Un/2}]:[{type:"straight",start:new R(t,r),delta:new R(0,1)},{type:"arc",center:new R(r,e-r),startAngle:0},{type:"straight",start:new R(0,e-r),delta:new R(0,-1)},{type:"arc",center:new R(r,r),startAngle:Un}];let l=0;const c=[];for(let d=0;d<n;d++){const u=i[0];u.type==="straight"?c.push(R.Add(u.start,R.Mul(u.delta,l))):c.push(AN(u.center,r,u.startAngle+l/r)),l+=s;let m=u.type==="straight"?o:Un*r;for(;l>m;)l-=m,i.push(i.shift()),m=i[0].type==="straight"?o:Un*r}return c}const KJe={s:50,m:70,l:100,xl:130},WJe=.2;function YJe(t,e,n,r,o,a){const s=new Dn,i=rm(n),l=o$(t,e),c=Math.max(Math.ceil(l/KJe[r]),6,Math.ceil(l/Math.min(t,e))),d=l/c*WJe,u=Math.max(t-d*2,1),m=Math.max(e-d*2,1),y=o$(u,m)/c,v=(t-u)/2,x=(e-m)/2,S=GJe(u,m,c).map(I=>I.addXY(v,x)),T=t<20?0:d*.3,C=e<20?0:d*.3,_=S.slice(0);for(let I=0;I<Math.floor(c/2);I++)_[I]=R.AddXY(_[I],i()*T*o,i()*C*o),_[c-I-1]=R.AddXY(_[c-I-1],i()*T*o,i()*C*o);for(let I=0;I<_.length;I++){const P=I===_.length-1?0:I+1,M=_[I],D=_[P],F=S[I],B=S[P],V=R.Dist(F,B),z=y-V,j=R.Dist(M,D)/V,q=(Math.max(v,x)+z)*j,U=R.Lrp(F,B,.5).add(R.Sub(B,F).uni().per().mul(q));U.x<0?U.x=0:U.x>t&&(U.x=t),U.y<0?U.y=0:U.y>e&&(U.y=e);const Y=MY(M,D,U),X=R.Dist(Y||R.Average([M,D]),M);I===0&&s.moveTo(M.x,M.y,{geometry:{isFilled:a}}),s.circularArcTo(X,!1,!0,D.x,D.y)}return s.close()}function a$({shape:t,shouldScale:e,forceSolid:n}){const r=e?t.props.scale:1,o=zl(),{props:a}=t,{color:s,fill:i,dash:l,size:c}=a,d=Zo[c]*r,u=WR(t),m=l==="draw"&&!n?u.toDrawD({strokeWidth:d,randomSeed:t.id,passes:1,offset:0,onlyFilled:!0}):u.toD({onlyFilled:!0});return g.jsxs(g.Fragment,{children:[g.jsx(U0,{theme:o,d:m,color:s,fill:i,scale:r}),u.toSvg({style:l,strokeWidth:d,forceSolid:n,randomSeed:t.id,props:{fill:"none",stroke:yn(o,s,"solid")}})]})}const s$=51;class H1 extends Og{canEdit(){return!0}getDefaultProps(){return{w:100,h:100,geo:"rectangle",dash:"draw",growY:0,url:"",scale:1,color:"black",labelColor:"black",fill:"none",size:"m",font:"draw",align:"middle",verticalAlign:"middle",richText:Ma("")}}getGeometry(e){const n=Math.max(1,e.props.w),r=Math.max(1,e.props.h+e.props.growY),o=WR(e),a=s1(this.editor,e),s=n/e.props.scale,i=r/e.props.scale,l=Math.min(100,s/2),c=Math.min(cp[e.props.size]*_s.lineHeight+xs*2,i/2),d=Math.min(s,Math.max(a.w,Math.min(l,Math.max(1,s-8)))),u=Math.min(i,Math.max(a.h,Math.min(c,Math.max(1,i-8))));return new pi({children:[o.toGeometry(),new rc({x:e.props.align==="start"?0:e.props.align==="end"?(s-d)*e.props.scale:(s-d)/2*e.props.scale,y:e.props.verticalAlign==="start"?0:e.props.verticalAlign==="end"?(i-u)*e.props.scale:(i-u)/2*e.props.scale,width:d*e.props.scale,height:u*e.props.scale,isFilled:!0,isLabel:!0,excludeFromShapeBounds:!0,isEmptyLabel:ao(e.props.richText)})]})}getHandleSnapGeometry(e){const n=this.getGeometry(e),r=n.children[0];switch(e.props.geo){case"arrow-down":case"arrow-left":case"arrow-right":case"arrow-up":case"check-box":case"diamond":case"hexagon":case"octagon":case"pentagon":case"rectangle":case"rhombus":case"rhombus-2":case"star":case"trapezoid":case"triangle":case"x-box":return{outline:r,points:[...r.vertices,n.bounds.center]};case"cloud":case"ellipse":case"heart":case"oval":return{outline:r,points:[n.bounds.center]};default:wn(e.props.geo)}}getText(e){return Sp(this.editor,e.props.richText)}getFontFaces(e){return ao(e.props.richText)?io:rC(this.editor,e.props.richText,{family:`tldraw_${e.props.font}`,weight:"normal",style:"normal"})}component(e){const{id:n,type:r,props:o}=e,{fill:a,font:s,align:i,verticalAlign:l,size:c,richText:d}=o,u=zl(),{editor:m}=this,h=ce("isGeoOnlySelected",()=>e.id===m.getOnlySelectedShapeId(),[m]),y=vj(m,e.id),v=ao(e.props.richText),x=y||!v,S=ce("force solid",()=>m.getZoomLevel()<.2,[m]);return g.jsxs(g.Fragment,{children:[g.jsx(fp,{children:g.jsx(a$,{shape:e,shouldScale:!0,forceSolid:S})}),x&&g.jsx(ap,{style:{overflow:"hidden",width:e.props.w,height:e.props.h+o.growY},children:g.jsx(QC,{shapeId:n,type:r,font:s,fontSize:cp[c]*e.props.scale,lineHeight:_s.lineHeight,padding:xs*e.props.scale,fill:a,align:i,verticalAlign:l,richText:d,isSelected:h,labelColor:yn(u,o.labelColor,"solid"),wrap:!0})}),e.props.url&&g.jsx(cg,{url:e.props.url})]})}indicator(e){const n=ce("isZoomedOut",()=>this.editor.getZoomLevel()<.25,[this.editor]),{size:r,dash:o,scale:a}=e.props,s=Zo[r];return WR(e).toSvg({style:o==="draw"?"draw":"solid",strokeWidth:1,passes:1,randomSeed:e.id,offset:0,roundness:s*2*a,props:{strokeWidth:void 0},forceSolid:n})}toSvg(e,n){const r=e.props.scale,o={...e,props:{...e.props,w:e.props.w/r,h:(e.props.h+e.props.growY)/r,growY:0}},a=o.props;n.addExportDef(xj(a.fill));let s;if(!ao(a.richText)){const i=Op(n),l=new Be(0,0,a.w,(e.props.h+e.props.growY)/r);s=g.jsx(ZC,{fontSize:cp[a.size],font:a.font,align:a.align,verticalAlign:a.verticalAlign,richText:a.richText,labelColor:yn(i,a.labelColor,"solid"),bounds:l,padding:xs})}return g.jsxs(g.Fragment,{children:[g.jsx(a$,{shouldScale:!1,shape:o,forceSolid:!1}),s]})}getCanvasSvgDefs(){return[Sj()]}onResize(e,{handle:n,newPoint:r,scaleX:o,scaleY:a,initialShape:s}){const i=s.props.w/s.props.scale,l=s.props.h/s.props.scale,c=s.props.growY/s.props.scale;let d=i*o,u=(l+c)*a,m=0,h=0;const y=s$;if(!ao(e.props.richText)){let _=Math.max(Math.abs(d),y),I=Math.max(Math.abs(u),y);_<y&&I===y&&(_=y),_===y&&I<y&&(I=y);const P=s1(this.editor,{...e,props:{...e.props,w:_*e.props.scale,h:I*e.props.scale}}),M=Math.max(Math.abs(d),P.w)*Math.sign(d),D=Math.max(Math.abs(u),P.h)*Math.sign(u);m=Math.abs(M)-Math.abs(d),h=Math.abs(D)-Math.abs(u),d=M,u=D}const v=d*e.props.scale,x=u*e.props.scale,S=new R(0,0);o<0&&(S.x+=v),(n==="left"||n==="top_left"||n==="bottom_left")&&(S.x+=o<0?m:-m),a<0&&(S.y+=x),(n==="top"||n==="top_left"||n==="top_right")&&(S.y+=a<0?h:-h);const{x:T,y:C}=S.rot(e.rotation).add(r);return{x:T,y:C,props:{w:Math.max(Math.abs(v),1),h:Math.max(Math.abs(x),1),growY:0}}}onBeforeCreate(e){if(ao(e.props.richText))return e.props.growY?{...e,props:{...e.props,growY:0}}:void 0;const n=e.props.h/e.props.scale,r=s1(this.editor,e).h;let o=null;if(r>n?o=r-n:e.props.growY&&(o=0),o!==null)return{...e,props:{...e.props,growY:o*e.props.scale}}}onBeforeUpdate(e,n){if(Ap(e.props.richText,n.props.richText)&&e.props.font===n.props.font&&e.props.size===n.props.size)return;const r=ao(e.props.richText),o=ao(n.props.richText);if(!r&&o)return{...n,props:{...n.props,growY:0}};const a=e.props.w/e.props.scale,s=e.props.h/e.props.scale,i=e.props.growY/e.props.scale,l=s1(this.editor,n);if(r&&!o&&Sp(this.editor,n.props.richText)){let d=Math.max(a,l.w),u=Math.max(s,l.h);const m=s$;return a<m&&s<m&&(d=Math.max(d,m),u=Math.max(u,m),d=Math.max(d,u),u=Math.max(d,u)),{...n,props:{...n.props,w:d*n.props.scale,h:u*n.props.scale,growY:0}}}let c=null;if(l.h>s?c=l.h-s:i&&(c=0),c!==null){const d=n.props.w/n.props.scale;return{...n,props:{...n.props,growY:c*n.props.scale,w:Math.max(d,l.w)*n.props.scale}}}if(l.w>a)return{...n,props:{...n.props,w:l.w*n.props.scale}}}onDoubleClick(e){if(this.editor.inputs.altKey)switch(e.props.geo){case"rectangle":return{...e,props:{geo:"check-box"}};case"check-box":return{...e,props:{geo:"rectangle"}}}}getInterpolatedProps(e,n,r){return{...r>.5?n.props:e.props,w:qt(e.props.w,n.props.w,r),h:qt(e.props.h,n.props.h,r),scale:qt(e.props.scale,n.props.scale,r)}}}L(H1,"type","geo"),L(H1,"props",hY),L(H1,"migrations",gY);const XJe={s:12,m:14,l:16,xl:20},JJe={s:2,m:3.5,l:5,xl:10};function s1(t,e){const{richText:n,font:r,size:o,w:a}=e.props;if(!n||ao(n))return{w:0,h:0};const s=XJe[o],i=z0(t,n),l=t.textMeasure.measureHtml(i,{..._s,fontFamily:yp[r],fontSize:cp[o],minWidth:s,maxWidth:Math.max(0,Math.ceil(s+JJe[o]),Math.ceil(a/e.props.scale-xs*2))});return{w:l.w+xs*2,h:l.h+xs*2}}function QJe(){const[t,e]=w.useState(!1);return w.useEffect(()=>{const r=CSS.supports("color","color(display-p3 1 1 1)"),o=matchMedia("(color-gamut: p3)");e(r&&o.matches);const a=()=>e(r&&o.matches);return o.addEventListener("change",a),()=>o.removeEventListener("change",a)},[]),ce(Ur.forceSrgb)||!t?"srgb":"p3"}class $1 extends ec{constructor(){super(...arguments);L(this,"options",{maxPointsPerShape:600,underlayOpacity:.82,overlayOpacity:.35})}hideResizeHandles(n){return i1(n)}hideRotateHandle(n){return i1(n)}hideSelectionBoundsFg(n){return i1(n)}getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1,scale:1}}getGeometry(n){const r=uf(n);if(i1(n))return new zE({x:-r/2,y:-r/2,radius:r/2,isFilled:!0});const{strokePoints:o,sw:a}=i$(n,r,!0),s=Tj({strokeWidth:a,showAsComplete:!0});return GL(o,s),new h0({points:Mse(o,s),isFilled:!0})}component(n){const r=dO(this.editor,n),o=uf(n);return g.jsx(fp,{children:g.jsx(l1,{shape:n,forceSolid:r,strokeWidth:o,opacity:this.options.overlayOpacity})})}backgroundComponent(n){const r=dO(this.editor,n),o=uf(n);return g.jsx(fp,{children:g.jsx(l1,{shape:n,forceSolid:r,strokeWidth:o,opacity:this.options.underlayOpacity})})}indicator(n){const r=dO(this.editor,n),o=uf(n),{strokePoints:a,sw:s}=i$(n,o,r),i=ug(n.props.segments);let l;return a.length<2?l=eQe(i[0],s):l=q0(a,!1),g.jsx("path",{d:l})}toSvg(n){const r=uf(n),o=r<1.5,a=1/n.props.scale;return g.jsx("g",{transform:`scale(${a})`,children:g.jsx(l1,{forceSolid:o,strokeWidth:r,shape:n,opacity:this.options.overlayOpacity})})}toBackgroundSvg(n){const r=uf(n),o=r<1.5,a=1/n.props.scale;return g.jsx("g",{transform:`scale(${a})`,children:g.jsx(l1,{forceSolid:o,strokeWidth:r,shape:n,opacity:this.options.underlayOpacity})})}onResize(n,r){const{scaleX:o,scaleY:a}=r,s=[];for(const i of n.props.segments)s.push({...i,points:i.points.map(({x:l,y:c,z:d})=>({x:o*l,y:a*c,z:d}))});return{props:{segments:s}}}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,...r.props,segments:cle(n.props.segments,r.props.segments,o),scale:qt(n.props.scale,r.props.scale,o)}}}L($1,"type","highlight"),L($1,"props",vY),L($1,"migrations",xY);function ZJe(t){return`M ${t.x} ${t.y} m -${.1}, 0 a ${.1},${.1} 0 1,0 ${.1*2},0 a ${.1},${.1} 0 1,0 -${.1*2},0`}function eQe(t,e){const n=e/2;return`M ${t.x} ${t.y} m -${n}, 0 a ${n},${n} 0 1,0 ${n*2},0 a ${n},${n} 0 1,0 -${n*2},0`}function i$(t,e,n){var l;const r=ug(t.props.segments),o=t.props.isComplete||((l=Ca(t.props.segments))==null?void 0:l.type)==="straight";let a=e;!n&&!t.props.isPen&&r.length===1&&(a+=rm(t.id)()*(e/6));const s=Tj({strokeWidth:a,showAsComplete:o});return{strokePoints:bp(r,s),sw:a}}function uf(t){return ag[t.props.size]*1.12*t.props.scale}function i1(t){return t.props.segments.length===1&&t.props.segments[0].points.length<2}function l1({strokeWidth:t,forceSolid:e,shape:n,opacity:r}){var m;const o=zl(),a=ug(n.props.segments);let s=t;!e&&!n.props.isPen&&a.length===1&&(s+=rm(n.id)()*(s/6));const i=Tj({strokeWidth:s,showAsComplete:n.props.isComplete||((m=Ca(n.props.segments))==null?void 0:m.type)==="straight"}),l=bp(a,i),c=l.length>1?q0(l,!1):ZJe(n.props.segments[0].points[0]),d=QJe(),u=yn(o,n.props.color,d==="p3"?"highlightP3":"highlightSrgb");return g.jsx("path",{d:c,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:u,strokeWidth:s,opacity:r})}function dO(t,e){return ce("forceSolid",()=>{const n=uf(e),r=t.getZoomLevel();return n/r<1.5},[t])}function fle(){return g.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"M3,11 L3,3 11,3",strokeWidth:"2"}),g.jsx("path",{d:"M19,27 L27,27 L27,19",strokeWidth:"2"}),g.jsx("path",{d:"M27,3 L3,27",strokeWidth:"2"})]})}function mle({shapeId:t,assetId:e,width:n}){const r=ue(),o=hv(),a=Dke(),[s,i]=w.useState(()=>({asset:e?r.getAsset(e)??null:null,url:null})),l=w.useRef(!1),c=w.useRef(null);return w.useEffect(()=>{if(!e)return;let d=!1,u;const m=si("update state",()=>{if(!o&&t&&r.getCulledShapes().has(t))return;const h=r.getAsset(e);if(!h){i(x=>({...x,asset:null,url:null}));return}if(!h.props.src){const x=r.getTemporaryAssetPreview(h.id);if(x){c.current!==x&&(c.current=x,i(S=>({...S,isPlaceholder:!0,url:x})),a());return}}const y=o?o.scale*(n/h.props.w):r.getZoomLevel()*(n/h.props.w);function v(x,S){d||c.current!==S&&(l.current=!0,c.current=S,i({asset:x,url:S}),a())}if(l.current){let x=0;const S=()=>{x++,x>500/16&&(l$(r,e,y,o,T=>v(h,T)),u==null||u())};u==null||u(),r.on("tick",S),u=()=>r.off("tick",S)}else l$(r,e,y,o,x=>v(h,x))});return()=>{m(),u==null||u(),d=!0}},[r,e,o,a,t,n]),s}function l$(t,e,n,r,o){t.resolveAssetUrl(e,{screenScale:n,shouldResolveToOriginal:r?r.pixelRatio===null:!1,dpr:(r==null?void 0:r.pixelRatio)??void 0}).then(a=>{o(a)})}async function tQe(t){const n=await(await Vu(t)).blob();return Xa.blobToDataUrl(n)}const nQe=new as;class V1 extends Og{isAspectRatioLocked(){return!0}canCrop(){return!0}isExportBoundsContainer(){return!0}getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null,flipX:!1,flipY:!1,altText:""}}getGeometry(e){var n;return(n=e.props.crop)!=null&&n.isCircle?new URe({width:e.props.w,height:e.props.h,isFilled:!0}):new rc({width:e.props.w,height:e.props.h,isFilled:!0})}getAriaDescriptor(e){return e.props.altText}onResize(e,n){let r=Uw(e,n);const{flipX:o,flipY:a}=n.initialShape.props,{scaleX:s,scaleY:i,mode:l}=n;if(r={...r,props:{...r.props,flipX:s<0!==o,flipY:i<0!==a}},!e.props.crop)return r;const c=l==="scale_shape"&&s===-1||l==="resize_bounds"&&o!==r.props.flipX,d=l==="scale_shape"&&i===-1||l==="resize_bounds"&&a!==r.props.flipY,{topLeft:u,bottomRight:m}=e.props.crop;return r.props.crop={topLeft:{x:c?1-m.x:u.x,y:d?1-m.y:u.y},bottomRight:{x:c?1-u.x:m.x,y:d?1-u.y:m.y},isCircle:e.props.crop.isCircle},r}component(e){return g.jsx(rQe,{shape:e})}indicator(e){var r;return this.editor.getCroppingShapeId()===e.id?null:(r=e.props.crop)!=null&&r.isCircle?g.jsx("ellipse",{cx:ie(e.props.w/2),cy:ie(e.props.h/2),rx:ie(e.props.w/2),ry:ie(e.props.h/2)}):g.jsx("rect",{width:ie(e.props.w),height:ie(e.props.h)})}async toSvg(e,n){const r=e.props;if(!r.assetId)return null;const o=this.editor.getAsset(r.assetId);if(!o)return null;const{w:a}=sc(e.props,r.crop),s=await nQe.get(o,async()=>{let i=await n.resolveAssetUrl(o.id,a);if(!i)return null;if((i.startsWith("blob:")||i.startsWith("http")||i.startsWith("/")||i.startsWith("./"))&&(i=await tQe(i)||""),hle(this.editor,o.id)){const{promise:l}=ble(i);i=await l}return i});return s?g.jsx(oQe,{shape:e,src:s}):null}onDoubleClickEdge(e){const n=e.props;if(!n||this.editor.getCroppingShapeId()!==e.id)return;const r=bo(n.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},{w:o,h:a}=sc(e.props,r),s=new R(r.topLeft.x*o,r.topLeft.y*a).rot(e.rotation),i={id:e.id,type:e.type,x:e.x-s.x,y:e.y-s.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:o,h:a}};this.editor.updateShapes([i])}getInterpolatedProps(e,n,r){function o(a,s){var u,m,h,y;if(a.props.crop===null&&s.props.crop===null)return null;const i=((u=a.props.crop)==null?void 0:u.topLeft)||{x:0,y:0},l=((m=a.props.crop)==null?void 0:m.bottomRight)||{x:1,y:1},c=((h=s.props.crop)==null?void 0:h.topLeft)||{x:0,y:0},d=((y=s.props.crop)==null?void 0:y.bottomRight)||{x:1,y:1};return{topLeft:{x:qt(i.x,c.x,r),y:qt(i.y,c.y,r)},bottomRight:{x:qt(l.x,d.x,r),y:qt(l.y,d.y,r)}}}return{...r>.5?n.props:e.props,w:qt(e.props.w,n.props.w,r),h:qt(e.props.h,n.props.h,r),crop:o(e,n)}}}L(V1,"type","image"),L(V1,"props",SY),L(V1,"migrations",EY);const rQe=w.memo(function({shape:e}){var T,C;const n=ue(),{w:r}=sc(e.props,e.props.crop),{asset:o,url:a}=mle({shapeId:e.id,assetId:e.props.assetId,width:r}),s=hte(),[i,l]=w.useState(""),[c,d]=w.useState(null),u=o&&hle(n,o.id);w.useEffect(()=>{if(a&&u){const{promise:_,cancel:I}=ble(a);return _.then(P=>{l(P),d(a)}),()=>{I()}}},[n,u,s,a]);const m=ce("show crop preview",()=>e.id===n.getOnlySelectedShapeId()&&n.getCroppingShapeId()===e.id&&n.isIn("select.crop"),[n,e.id]),h=s&&(((T=o==null?void 0:o.props.mimeType)==null?void 0:T.includes("video"))||u),y=gle(e),v=a===c?null:a,x=h?i:c;if(!a&&!(o!=null&&o.props.src))return g.jsxs(ap,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h,color:"var(--tl-color-text-3)",backgroundColor:"var(--tl-color-low)",border:"1px solid var(--tl-color-low-border)"},children:[g.jsx("div",{className:pt("tl-image-container",o&&"tl-image-container-loading"),style:y,children:o?null:g.jsx(fle,{})}),"url"in e.props&&e.props.url&&g.jsx(cg,{url:e.props.url})]});const S=u?"anonymous":void 0;return g.jsxs(g.Fragment,{children:[m&&x&&g.jsx("div",{style:y,children:g.jsx("img",{className:"tl-image",style:{...e0(e),opacity:.1},crossOrigin:S,src:x,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1,alt:""})}),g.jsxs(ap,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h,borderRadius:(C=e.props.crop)!=null&&C.isCircle?"50%":void 0},children:[g.jsxs("div",{className:pt("tl-image-container"),style:y,children:[x&&g.jsx("img",{className:"tl-image",style:e0(e),crossOrigin:S,src:x,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1,alt:""},x),v&&g.jsx("img",{className:"tl-image",style:e0(e),crossOrigin:S,src:v,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1,alt:e.props.altText,onLoad:()=>d(v)},v)]}),e.props.url&&g.jsx(cg,{url:e.props.url})]})]})});function hle(t,e){const n=e?t.getAsset(e):void 0;return n?"mimeType"in n.props&&Li.isAnimatedImageType(n==null?void 0:n.props.mimeType)||"isAnimated"in n.props&&n.props.isAnimated:!1}function gle(t){const e=t.props.crop,n=e==null?void 0:e.topLeft;if(!n)return{width:t.props.w,height:t.props.h};const{w:r,h:o}=sc(t.props,e),a=-n.x*r,s=-n.y*o;return{transform:`translate(${a}px, ${s}px)`,width:r,height:o}}function e0(t,e){const{flipX:n,flipY:r,crop:o}=t.props;if(!n&&!r)return;let a,s;if(o){const{w:c,h:d}=sc(t.props,o),u=o.bottomRight.x-o.topLeft.x,m=o.bottomRight.y-o.topLeft.y;a=nc(o.topLeft.x,[0,1-u],[0,c-t.props.w]),s=nc(o.topLeft.y,[0,1-m],[0,d-t.props.h])}const i=`scale(${n?-1:1}, ${r?-1:1})`;return{transform:`${e?`translate(${(n?e.width:0)-(a||0)}px,
		             ${(r?e.height:0)-(s||0)}px)`:""} ${i}`,transformOrigin:e?"0 0":"center center"}}function oQe({shape:t,src:e}){const n=cm(),r=gle(t),o=t.props.crop;if(r.transform&&o){const{transform:a,width:s,height:i}=r,l=(o.bottomRight.x-o.topLeft.x)*s,c=(o.bottomRight.y-o.topLeft.y)*i,d=[new R(0,0),new R(l,0),new R(l,c),new R(0,c)],u=e0(t,{width:s,height:i});return g.jsxs(g.Fragment,{children:[g.jsx("defs",{children:g.jsx("clipPath",{id:n,children:o.isCircle?g.jsx("ellipse",{cx:l/2,cy:c/2,rx:l/2,ry:c/2}):g.jsx("polygon",{points:d.map(m=>`${m.x},${m.y}`).join(" ")})})}),g.jsx("g",{clipPath:`url(#${n})`,children:g.jsx("image",{href:e,width:s,height:i,"aria-label":t.props.altText,style:u?{...u}:{transform:a}})})]})}else return g.jsx("image",{href:e,width:t.props.w,height:t.props.h,"aria-label":t.props.altText,style:e0(t,{width:t.props.w,height:t.props.h})})}function ble(t){let e=!1;return{promise:new Promise(r=>{const o=c0();o.onload=()=>{if(e)return;const a=document.createElement("canvas");a.width=o.width,a.height=o.height;const s=a.getContext("2d");s&&(s.drawImage(o,0,0),r(a.toDataURL()))},o.crossOrigin="anonymous",o.src=t}),cancel:()=>e=!0}}const aQe=new as;class G1 extends ec{hideResizeHandles(){return!0}hideRotateHandle(){return!0}hideSelectionBoundsFg(){return!0}hideSelectionBoundsBg(){return!0}hideInMinimap(){return!0}getDefaultProps(){const[e,n]=d0(2);return{dash:"draw",size:"m",color:"black",spline:"line",points:{[e]:{id:e,index:e,x:0,y:0},[n]:{id:n,index:n,x:.1,y:.1}},scale:1}}getGeometry(e){const n=YR(e).toGeometry();return dt(n instanceof JM),n}getHandles(e){return aQe.get(e.props,()=>{const n=this.getGeometry(e),r=Ay(e),o=r.map(a=>({...a,id:a.index,type:"vertex",canSnap:!0}));for(let a=0;a<r.length-1;a++){const s=Vh(r[a].index,r[a+1].index),l=n.getSegments()[a].interpolateAlongEdge(.5);o.push({id:s,type:"create",index:s,x:l.x,y:l.y,canSnap:!0})}return o.sort(oa)})}onResize(e,n){const{scaleX:r,scaleY:o}=n;return{props:{points:_p(e.props.points,(a,{id:s,index:i,x:l,y:c})=>({id:s,index:i,x:l*r,y:c*o}))}}}onBeforeCreate(e){const{props:{points:n}}=e,r=Object.keys(n);if(r.length<2)return;const o=n[r[0]];if(r.every(s=>{const i=n[s];return i.x===o.x&&i.y===o.y})){const s=r[r.length-1];return n[s]={...n[s],x:n[s].x+.1,y:n[s].y+.1},e}}onHandleDrag(e,{handle:n}){const r=Gi(new R(n.x,n.y),this.editor);return{...e,props:{...e.props,points:{...e.props.points,[n.id]:{id:n.id,index:n.index,x:r.x,y:r.y}}}}}onHandleDragStart(e,{handle:n}){if(n.type==="create")return{...e,props:{...e.props,points:{...e.props.points,[n.index]:{id:n.index,index:n.index,x:n.x,y:n.y}}}}}component(e){return g.jsx(fp,{style:{minWidth:50,minHeight:50},children:g.jsx(c$,{shape:e})})}indicator(e){const n=Bi[e.props.size]*e.props.scale,r=YR(e),{dash:o}=e.props;return r.toSvg({style:o==="draw"?"draw":"solid",strokeWidth:1,passes:1,randomSeed:e.id,offset:0,roundness:n*2,props:{strokeWidth:void 0}})}toSvg(e){return g.jsx(c$,{shouldScale:!0,shape:e})}getHandleSnapGeometry(e){const n=Ay(e);return{points:n,getSelfSnapPoints:r=>{const o=this.getHandles(e).filter(a=>a.type==="vertex").findIndex(a=>a.id===r.id);return n.filter((a,s)=>Math.abs(s-o)>1).map(R.From)},getSelfSnapOutline:r=>{const o=this.getHandles(e).filter(s=>s.type==="vertex").findIndex(s=>s.id===r.id),a=this.getGeometry(e).getSegments().filter((s,i)=>i!==o-1&&i!==o);return a.length?new pi({children:a}):null}}}getInterpolatedProps(e,n,r){const o=Ay(e),a=Ay(n),s=[],i=[];let l=zD;if(o.length>a.length)for(let c=0;c<o.length;c++)s[c]={...o[c]},a[c]===void 0?i[c]={...a[a.length-1],id:l}:i[c]={...a[c],id:l},l=_l(l);else if(a.length>o.length)for(let c=0;c<a.length;c++)i[c]={...a[c]},o[c]===void 0?s[c]={...o[o.length-1],id:l}:s[c]={...o[c],id:l},l=_l(l);else for(let c=0;c<a.length;c++)s[c]=o[c],i[c]=a[c];return{...r>.5?n.props:e.props,points:Object.fromEntries(s.map((c,d)=>{const u=i[d];return[c.id,{...c,x:qt(c.x,u.x,r),y:qt(c.y,u.y,r)}]})),scale:qt(e.props.scale,n.props.scale,r)}}}L(G1,"type","line"),L(G1,"props",TY),L(G1,"migrations",wY);function Ay(t){return Object.values(t.props.points).sort(oa)}const sQe=new as;function YR(t){return sQe.get(t,()=>{const e=Ay(t).map(R.From);switch(t.props.spline){case"cubic":return Dn.cubicSplineThroughPoints(e,{endOffsets:0});case"line":return Dn.lineThroughPoints(e,{endOffsets:0})}})}function c$({shape:t,shouldScale:e=!1,forceSolid:n=!1}){const r=zl(),o=YR(t),{dash:a,color:s,size:i}=t.props,l=1/t.props.scale,c=e?l:1,d=Bi[i]*t.props.scale;return o.toSvg({style:a,strokeWidth:d,forceSolid:n,randomSeed:t.id,props:{transform:`scale(${c})`,stroke:yn(r,s,"solid"),fill:"none"}})}function YT(t,e,n=!1){t.select(e),t.setEditingShape(e),t.setCurrentTool("select.editing_shape",{target:"shape",shape:e}),n&&t.emit("select-all-text",{shapeId:e.id})}class K1 extends ec{constructor(){super(...arguments);L(this,"options",{resizeMode:"none"})}canEdit(){return!0}hideResizeHandles(){const{resizeMode:n}=this.options;switch(n){case"none":return!0;case"scale":return!1;default:throw wn(n)}}isAspectRatioLocked(){return this.options.resizeMode==="scale"}hideSelectionBoundsFg(){return!1}getDefaultProps(){return{color:"black",richText:Ma(""),size:"m",font:"draw",align:"middle",verticalAlign:"middle",labelColor:"black",growY:0,fontSizeAdjustment:0,url:"",scale:1}}getGeometry(n){const{labelHeight:r,labelWidth:o}=yle(this.editor,n),{scale:a}=n.props,s=r*a,i=o*a,l=ir*a,c=c1(n);return new pi({children:[new rc({width:l,height:c,isFilled:!0}),new rc({x:n.props.align==="start"?0:n.props.align==="end"?l-i:(l-i)/2,y:n.props.verticalAlign==="start"?0:n.props.verticalAlign==="end"?c-s:(c-s)/2,width:i,height:s,isFilled:!0,isLabel:!0,excludeFromShapeBounds:!0})]})}getHandles(n){const{scale:r}=n.props;if(this.editor.getInstanceState().isCoarsePointer)return[];const a=this.editor.getZoomLevel();if(a*r<.25)return[];const s=c1(n),i=ir*r,l=OXe/a*r;return a*r<.5?[{id:"bottom",index:"a3",type:"clone",x:i/2,y:s+l}]:[{id:"top",index:"a1",type:"clone",x:i/2,y:-l},{id:"right",index:"a2",type:"clone",x:i+l,y:s/2},{id:"bottom",index:"a3",type:"clone",x:i/2,y:s+l},{id:"left",index:"a4",type:"clone",x:-l,y:s/2}]}onResize(n,r){const{resizeMode:o}=this.options;switch(o){case"none":return;case"scale":return NZ(n,r);default:throw wn(o)}}getText(n){return Sp(this.editor,n.props.richText)}getFontFaces(n){return ao(n.props.richText)?io:rC(this.editor,n.props.richText,{family:`tldraw_${n.props.font}`,weight:"normal",style:"normal"})}component(n){const{id:r,type:o,props:{labelColor:a,scale:s,color:i,font:l,size:c,align:d,richText:u,verticalAlign:m,fontSizeAdjustment:h}}=n,y=cQe(r),v=zl(),x=ir*s,S=c1(n),T=ce("shape rotation",()=>{var D;return((D=this.editor.getShapePageTransform(r))==null?void 0:D.rotation())??0},[this.editor]),C=ce("zoom",()=>this.editor.getZoomLevel()<.35/s,[s,this.editor]),_=ce("dark mode",()=>this.editor.user.getIsDarkMode(),[this.editor]),I=n.id===this.editor.getOnlySelectedShapeId(),P=vj(this.editor,n.id),M=ao(u);return g.jsxs(g.Fragment,{children:[g.jsx("div",{id:r,className:"tl-note__container",style:{width:x,height:S,backgroundColor:yn(v,i,"noteFill"),borderBottom:C?_?`${2*s}px solid rgb(20, 20, 20)`:`${2*s}px solid rgb(144, 144, 144)`:"none",boxShadow:C?"none":uQe(n.id,T,s)},children:(I||P||!M)&&g.jsx(QC,{shapeId:r,type:o,font:l,fontSize:(h||cp[c])*s,lineHeight:_s.lineHeight,align:d,verticalAlign:m,richText:u,isSelected:I,labelColor:a==="black"?yn(v,i,"noteText"):yn(v,a,"fill"),wrap:!0,padding:xs*s,hasCustomTabBehavior:!0,onKeyDown:y})}),"url"in n.props&&n.props.url&&g.jsx(cg,{url:n.props.url})]})}indicator(n){const{scale:r}=n.props;return g.jsx("rect",{rx:r,width:ie(ir*r),height:ie(c1(n))})}toSvg(n,r){const o=Op({isDarkMode:r.isDarkMode}),a=dQe(n),s=g.jsx(ZC,{fontSize:n.props.fontSizeAdjustment||cp[n.props.size],font:n.props.font,align:n.props.align,verticalAlign:n.props.verticalAlign,richText:n.props.richText,labelColor:yn(o,n.props.color,"noteText"),bounds:a,padding:xs,showTextOutline:!1});return g.jsxs(g.Fragment,{children:[g.jsx("rect",{x:5,y:5,rx:1,width:ir-10,height:a.h,fill:"rgba(0,0,0,.1)"}),g.jsx("rect",{rx:1,width:ir,height:a.h,fill:yn(o,n.props.color,"noteFill")}),s]})}onBeforeCreate(n){return u$(this.editor,n)}onBeforeUpdate(n,r){if(!(Ap(n.props.richText,r.props.richText)&&n.props.font===r.props.font&&n.props.size===r.props.size))return u$(this.editor,r)}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,scale:qt(n.props.scale,r.props.scale,o)}}}L(K1,"type","note"),L(K1,"props",CY),L(K1,"migrations",AY);function u$(t,e){const{labelHeight:n,fontSizeAdjustment:r}=yle(t,e),o=Math.max(0,n-ir);if(o!==e.props.growY||r!==e.props.fontSizeAdjustment)return{...e,props:{...e.props,growY:o,fontSizeAdjustment:r}}}function iQe(t,e){const{richText:n}=e.props;if(ao(n))return{labelHeight:cp[e.props.size]*_s.lineHeight+xs*2,labelWidth:100,fontSizeAdjustment:0};const r=cp[e.props.size];let o=0,a=0,s=ir,i=ir;const l=1;do{o=Math.min(r,r-a);const c=z0(t,n),d=t.textMeasure.measureHtml(c,{..._s,fontFamily:yp[e.props.font],fontSize:o,maxWidth:ir-xs*2-l,disableOverflowWrapBreaking:!0,measureScrollWidth:!0});if(s=d.h+xs*2,i=d.w+xs*2,o<=14){const u=z0(t,n),m=t.textMeasure.measureHtml(u,{..._s,fontFamily:yp[e.props.font],fontSize:o,maxWidth:ir-xs*2-l});s=m.h+xs*2,i=m.w+xs*2;break}if(d.scrollWidth.toFixed(0)===d.w.toFixed(0))break}while(a++<50);return{labelHeight:s,labelWidth:i,fontSizeAdjustment:o}}const lQe=new as;function yle(t,e){return lQe.get(e,()=>iQe(t,e))}function cQe(t){const e=ue(),n=w.useContext(O3);return w.useCallback(r=>{const o=e.getShape(t);if(!o)return;const a=r.key==="Tab",s=(r.metaKey||r.ctrlKey)&&r.key==="Enter";if(a||s){r.preventDefault();const i=e.getShapePageTransform(t),l=i.rotation(),c=!!((n==null?void 0:n.dir)==="rtl"||Fie(Sp(e,o.props.richText))),d=(ir+e.options.adjacentShapeMargin+(s&&!r.shiftKey?o.props.growY:0))*o.props.scale,u=new R(a?r.shiftKey!=c?-1:1:0,s?r.shiftKey?-1:1:0).mul(d).add(JC.clone().mul(o.props.scale)).rot(l).add(i.point()),m=Yie(e,o,u,l);m&&YT(e,m,!0)}},[t,e,n==null?void 0:n.dir])}function c1(t){return(ir+t.props.growY)*t.props.scale}function uQe(t,e,n){const r=rm(t),o=Math.abs(r())+.5,a=Math.cos(e),s=5*n,i=4*n,l=6*n,c=7*n;return`0px ${s-o}px ${s}px -${s}px rgba(15, 23, 31, .6),
	0px ${(i+o*c)*Math.max(0,a)}px ${l+o*c}px -${i+o*l}px rgba(15, 23, 31, ${(.3+o*.1).toFixed(2)}), 
	0px ${48*n}px ${10*n}px -${10*n}px inset rgba(15, 23, 44, ${((.022+r()*.005)*((1+a)/2)).toFixed(2)})`}function dQe(t){return new Be(0,0,ir,ir+t.props.growY)}const pQe=Sw("text size",(t,e)=>(t.fonts.trackFontsForShape(e),vle(t,e.props)),{areRecordsEqual:(t,e)=>t.props===e.props});class W1 extends ec{constructor(){super(...arguments);L(this,"options",{extraArrowHorizontalPadding:10})}getDefaultProps(){return{color:"black",size:"m",w:8,font:"draw",textAlign:"start",autoSize:!0,scale:1,richText:Ma("")}}getMinDimensions(n){return pQe.get(this.editor,n.id)}getGeometry(n,r){const{scale:o}=n.props,{width:a,height:s}=this.getMinDimensions(n),i=(r==null?void 0:r.context)??"none";return new rc({x:(i==="@tldraw/arrow-without-arrowhead"?-this.options.extraArrowHorizontalPadding:0)*o,width:(a+(i==="@tldraw/arrow-without-arrowhead"?this.options.extraArrowHorizontalPadding*2:0))*o,height:s*o,isFilled:!0,isLabel:!0})}getFontFaces(n){return rC(this.editor,n.props.richText,{family:`tldraw_${n.props.font}`,weight:"normal",style:"normal"})}getText(n){return Sp(this.editor,n.props.richText)}canEdit(){return!0}isAspectRatioLocked(){return!0}component(n){const{id:r,props:{font:o,size:a,richText:s,color:i,scale:l,textAlign:c}}=n,{width:d,height:u}=this.getMinDimensions(n),m=n.id===this.editor.getOnlySelectedShapeId(),h=zl(),y=fQe(r);return g.jsx(QC,{shapeId:r,classNamePrefix:"tl-text-shape",type:"text",font:o,fontSize:ag[a],lineHeight:_s.lineHeight,align:c,verticalAlign:"middle",richText:s,labelColor:yn(h,i,"solid"),isSelected:m,textWidth:d,textHeight:u,style:{transform:`scale(${l})`,transformOrigin:"top left"},wrap:!0,onKeyDown:y})}indicator(n){const r=this.editor.getShapeGeometry(n).bounds,o=ue();return n.props.autoSize&&o.getEditingShapeId()===n.id?null:g.jsx("rect",{width:ie(r.width),height:ie(r.height)})}toSvg(n,r){const o=this.editor.getShapeGeometry(n).bounds,a=o.width/(n.props.scale??1),s=o.height/(n.props.scale??1),i=Op(r),l=new Be(0,0,a,s);return g.jsx(ZC,{fontSize:ag[n.props.size],font:n.props.font,align:n.props.textAlign,verticalAlign:"middle",richText:n.props.richText,labelColor:yn(i,n.props.color,"solid"),bounds:l,padding:0})}onResize(n,r){const{newPoint:o,initialBounds:a,initialShape:s,scaleX:i,handle:l}=r;if(r.mode==="scale_shape"||l!=="right"&&l!=="left")return{id:n.id,type:n.type,...NZ(n,r)};{const c=Math.max(1,Math.abs(a.width*i)),{x:d,y:u}=i<0?R.Sub(o,R.FromAngle(n.rotation).mul(c)):o;return{id:n.id,type:n.type,x:d,y:u,props:{w:c/s.props.scale,autoSize:!1}}}}onEditEnd(n){Sp(this.editor,n.props.richText).trimEnd().length===0&&this.editor.deleteShapes([n.id])}onBeforeUpdate(n,r){if(!r.props.autoSize)return;const o=n.props.size!==r.props.size||n.props.textAlign!==r.props.textAlign||n.props.font!==r.props.font||n.props.scale!==1&&r.props.scale===1,a=!Ap(n.props.richText,r.props.richText);if(!o&&!a)return;const s=this.getMinDimensions(n),i=vle(this.editor,r.props),l=s.width*n.props.scale,c=s.height*n.props.scale,d=i.width*r.props.scale,u=i.height*r.props.scale;let m;switch(r.props.textAlign){case"middle":{m=new R((d-l)/2,a?0:(u-c)/2);break}case"end":{m=new R(d-l,a?0:(u-c)/2);break}default:{if(a)break;m=new R(0,(u-c)/2);break}}if(m){m.rot(r.rotation);const{x:h,y}=r;return{...r,x:h-m.x,y:y-m.y,props:{...r.props,w:d}}}else return{...r,props:{...r.props,w:d}}}}L(W1,"type","text"),L(W1,"props",_Y),L(W1,"migrations",kY);function vle(t,e){const{font:n,richText:r,size:o,w:a}=e,s=16,i=ag[o],l=e.autoSize?null:Math.max(s,Math.floor(a)),c=z0(t,r),d=t.textMeasure.measureHtml(c,{..._s,fontFamily:yp[n],fontSize:i,maxWidth:l});return{width:l??Math.max(s,d.w+1),height:Math.max(i,d.h)}}function fQe(t){const e=ue();return w.useCallback(n=>{if(e.getEditingShapeId()===t)switch(n.key){case"Enter":{(n.ctrlKey||n.metaKey)&&e.complete();break}}},[e,t])}const mQe=new as;class Y1 extends Og{constructor(){super(...arguments);L(this,"options",{autoplay:!0})}canEdit(){return!0}isAspectRatioLocked(){return!0}getDefaultProps(){return{w:100,h:100,assetId:null,autoplay:this.options.autoplay,url:"",altText:"",time:0,playing:!0}}getAriaDescriptor(n){return n.props.altText}component(n){return g.jsx(hQe,{shape:n})}indicator(n){return g.jsx("rect",{width:ie(n.props.w),height:ie(n.props.h)})}async toSvg(n,r){const o=n.props;if(!o.assetId)return null;const a=this.editor.getAsset(o.assetId);if(!a)return null;const s=await mQe.get(a,async()=>{const i=await r.resolveAssetUrl(a.id,o.w);if(!i)return null;const l=await Li.loadVideo(i);return await Li.getVideoFrameAsDataUrl(l,0)});return s?g.jsx("image",{href:s,width:o.w,height:o.h,"aria-label":n.props.altText}):null}}L(Y1,"type","video"),L(Y1,"props",IY),L(Y1,"migrations",PY);const hQe=w.memo(function({shape:e}){const n=ue(),r=n.getShapeGeometry(e).bounds.w*n.getZoomLevel()>=110,o=Ev(e.id),a=hte(),{Spinner:s}=cr(),{asset:i,url:l}=mle({shapeId:e.id,assetId:e.props.assetId,width:e.props.w}),c=w.useRef(null),[d,u]=w.useState(!1),m=w.useCallback(v=>{v.currentTarget&&u(!0)},[]),[h,y]=w.useState(!1);return w.useEffect(()=>{const v=()=>y(document.fullscreenElement===c.current);return document.addEventListener("fullscreenchange",v),()=>document.removeEventListener("fullscreenchange",v)}),w.useEffect(()=>{const v=c.current;v&&o&&document.activeElement!==v&&v.focus()},[o,d]),g.jsxs(g.Fragment,{children:[g.jsx(ap,{id:e.id,style:{color:"var(--tl-color-text-3)",backgroundColor:i?"transparent":"var(--tl-color-low)",border:i?"none":"1px solid var(--tl-color-low-border)"},children:g.jsx("div",{className:"tl-counter-scaled",children:g.jsx("div",{className:"tl-video-container",children:i?s&&!i.props.src?g.jsx(s,{}):l?g.jsxs(g.Fragment,{children:[g.jsx("video",{ref:c,style:o?{pointerEvents:"all"}:d?void 0:{display:"none"},className:pt("tl-video",`tl-video-shape-${e.id.split(":")[1]}`,{"tl-video-is-fullscreen":h}),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:e.props.autoplay&&!a,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:o&&r,onLoadedData:m,hidden:!d,"aria-label":e.props.altText,children:g.jsx("source",{src:l})},l),!d&&s&&g.jsx(s,{})]}):null:g.jsx(fle,{})})})}),"url"in e.props&&e.props.url&&g.jsx(cg,{url:e.props.url})]})}),xle=[W1,z1,U1,H1,K1,G1,q1,F1,$1,WT,V1,Y1];function gQe(t){return t.sideEffects.register({instance_page_state:{afterChange:(e,n)=>{if(e.croppingShapeId!==n.croppingShapeId){const r=t.isIn("select.crop");!e.croppingShapeId&&n.croppingShapeId?r||t.setCurrentTool("select.crop.idle"):e.croppingShapeId&&!n.croppingShapeId&&r&&t.setCurrentTool("select.idle")}if(e.editingShapeId!==n.editingShapeId)if(!e.editingShapeId&&n.editingShapeId){if(!t.isIn("select.editing_shape")){const r=t.getEditingShape();r&&r.type==="text"&&t.isInAny("text.pointing","select.resizing")&&t.getInstanceState().isToolLocked?t.setCurrentTool("select.editing_shape",{isCreatingTextWhileToolLocked:!0}):t.setCurrentTool("select.editing_shape")}}else e.editingShapeId&&!n.editingShapeId&&t.isIn("select.editing_shape")&&t.setCurrentTool("select.idle")}}})}class Sle extends ht{constructor(){super(...arguments);L(this,"info",{});L(this,"scribbleId","id");L(this,"markId","");L(this,"excludedShapeIds",new Set);L(this,"_isHoldingAccelKey",!1);L(this,"_firstErasingShapeId",null);L(this,"_erasingShapeIds",[])}onEnter(n){this._isHoldingAccelKey=Pr(this.editor.inputs),this._firstErasingShapeId=this.editor.getErasingShapeIds()[0],this._erasingShapeIds=this.editor.getErasingShapeIds(),this.markId=this.editor.markHistoryStoppingPoint("erase scribble begin"),this.info=n;const{originPagePoint:r}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter(a=>{if(this.editor.isShapeOrAncestorLocked(a))return!0;if(this.editor.isShapeOfType(a,"group")||this.editor.isShapeOfType(a,"frame")){const s=this.editor.getPointInShapeSpace(a,r);return this.editor.getShapeGeometry(a).bounds.containsPoint(s)}return!1}).map(a=>a.id));const o=this.editor.scribbles.addScribble({color:"muted-1",size:12});this.scribbleId=o.id,this.update()}pushPointToScribble(){const{x:n,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,n,r)}onExit(){this.editor.setErasingShapes([]),this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onKeyUp(){this._isHoldingAccelKey=Pr(this.editor.inputs),this.update()}onKeyDown(){this._isHoldingAccelKey=Pr(this.editor.inputs),this.update()}update(){const{editor:n,excludedShapeIds:r}=this,o=n.getErasingShapeIds(),a=n.getZoomLevel(),s=n.getCurrentPageRenderingShapesSorted(),{inputs:{currentPagePoint:i,previousPagePoint:l}}=n;this.pushPointToScribble();const c=new Set(o),d=this.editor.options.hitTestMargin/a;for(const u of s){if(n.isShapeOfType(u,"group"))continue;const m=n.getShapeMask(u.id);if(m&&!Ss(i,m))continue;const h=n.getShapeGeometry(u),y=n.getShapePageTransform(u);if(!h||!y)continue;const v=y.clone().invert(),x=v.applyToPoint(l),S=v.applyToPoint(i),{bounds:T}=h;T.minX-d>Math.max(x.x,S.x)||T.minY-d>Math.max(x.y,S.y)||T.maxX+d<Math.min(x.x,S.x)||T.maxY+d<Math.min(x.y,S.y)||(h.hitTestLineSegment(x,S,d)&&c.add(n.getOutermostSelectableShape(u).id),this._erasingShapeIds=[...c])}if(this._isHoldingAccelKey&&this._firstErasingShapeId){const u=this._firstErasingShapeId;u&&this.editor.getShape(u)&&n.setErasingShapes([u]);return}this.editor.setErasingShapes(this._erasingShapeIds.filter(u=>!r.has(u)))}complete(){const{editor:n}=this;n.deleteShapes(n.getCurrentPageState().erasingShapeIds),this.parent.transition("idle"),this._erasingShapeIds=[],this._firstErasingShapeId=null}cancel(){const{editor:n}=this;n.bailToMark(this.markId),this.parent.transition("idle",this.info)}}L(Sle,"id","erasing");var IO;let bQe=(IO=class extends ht{onPointerDown(e){this.parent.transition("pointing",e)}onCancel(){this.editor.setCurrentTool("select")}},L(IO,"id","idle"),IO);var PO;let yQe=(PO=class extends ht{constructor(){super(...arguments);L(this,"_isHoldingAccelKey",!1)}onEnter(){this._isHoldingAccelKey=Pr(this.editor.inputs);const n=this.editor.getZoomLevel(),r=this.editor.getCurrentPageRenderingShapesSorted(),{inputs:{currentPagePoint:o}}=this.editor,a=new Set,s=a.size;for(let i=r.length,l=i-1;l>=0;l--){const c=r[l];if(!(this.editor.isShapeOrAncestorLocked(c)||this.editor.isShapeOfType(c,"group"))&&this.editor.isPointInShape(c,o,{hitInside:!1,margin:this.editor.options.hitTestMargin/n})){const d=this.editor.getOutermostSelectableShape(c);if(this.editor.isShapeOfType(d,"frame")&&a.size>s||(a.add(d.id),this._isHoldingAccelKey))break}}this.editor.setErasingShapes([...a])}onKeyUp(){this._isHoldingAccelKey=Pr(this.editor.inputs)}onKeyDown(){this._isHoldingAccelKey=Pr(this.editor.inputs)}onLongPress(n){this.startErasing(n)}onExit(n,r){r!=="erasing"&&this.editor.setErasingShapes([])}onPointerMove(n){this._isHoldingAccelKey||this.editor.inputs.isDragging&&this.startErasing(n)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}startErasing(n){this.parent.transition("erasing",n)}complete(){const n=this.editor.getErasingShapeIds();n.length&&(this.editor.markHistoryStoppingPoint("erase end"),this.editor.deleteShapes(n)),this.parent.transition("idle")}cancel(){this.parent.transition("idle")}},L(PO,"id","pointing"),PO);class X1 extends ht{static children(){return[bQe,yQe,Sle]}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}}L(X1,"id","eraser"),L(X1,"initial","idle"),L(X1,"isLockable",!1);class Ele extends ht{constructor(){super(...arguments);L(this,"initialCamera",new R)}onEnter(){this.initialCamera=R.From(this.editor.getCamera()),this.update()}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.parent.transition("idle")}onComplete(){this.complete()}update(){const{initialCamera:n,editor:r}=this,{currentScreenPoint:o,originScreenPoint:a}=r.inputs,s=R.Sub(o,a).div(r.getZoomLevel());s.len2()!==0&&r.setCamera(n.clone().add(s))}complete(){const{editor:n}=this,{pointerVelocity:r}=n.inputs,o=Math.min(r.len(),2);o>.1&&this.editor.slideCamera({speed:o,direction:r}),this.parent.transition("idle")}}L(Ele,"id","dragging");var OO;let vQe=(OO=class extends ht{onEnter(){this.editor.setCursor({type:"grab",rotation:0})}onPointerDown(e){this.parent.transition("pointing",e)}onCancel(){this.editor.setCurrentTool("select")}},L(OO,"id","idle"),OO);var MO;let xQe=(MO=class extends ht{onEnter(){this.editor.stopCameraAnimation(),this.editor.setCursor({type:"grabbing",rotation:0})}onLongPress(){this.startDragging()}onPointerMove(){this.editor.inputs.isDragging&&this.startDragging()}startDragging(){this.parent.transition("dragging")}onPointerUp(){this.complete()}onCancel(){this.complete()}onComplete(){this.complete()}onInterrupt(){this.complete()}complete(){this.parent.transition("idle")}},L(MO,"id","pointing"),MO);class J1 extends ht{static children(){return[vQe,xQe,Ele]}onDoubleClick(e){if(e.phase==="settle"){const{currentScreenPoint:n}=this.editor.inputs;this.editor.zoomIn(n,{animation:{duration:220,easing:Ja.easeOutQuint}})}}onTripleClick(e){if(e.phase==="settle"){const{currentScreenPoint:n}=this.editor.inputs;this.editor.zoomOut(n,{animation:{duration:320,easing:Ja.easeOutQuint}})}}onQuadrupleClick(e){if(e.phase==="settle"){const n=this.editor.getZoomLevel(),{inputs:{currentScreenPoint:r}}=this.editor;n===1?this.editor.zoomToFit({animation:{duration:400,easing:Ja.easeOutQuint}}):this.editor.resetZoom(r,{animation:{duration:320,easing:Ja.easeOutQuint}})}}}L(J1,"id","hand"),L(J1,"initial","idle"),L(J1,"isLockable",!1);var RO;let SQe=(RO=class extends ht{onCancel(){this.editor.setCurrentTool("select")}onPointerDown(e){this.parent.transition("lasering",e)}},L(RO,"id","idle"),RO);class Tle extends ht{constructor(){super(...arguments);L(this,"scribbleId","id")}onEnter(){const n=this.editor.scribbles.addScribble({color:"laser",opacity:.7,size:4,delay:this.editor.options.laserDelayMs,shrink:.05,taper:!0});this.scribbleId=n.id,this.pushPointToScribble()}onExit(){this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.pushPointToScribble()}onPointerUp(){this.complete()}pushPointToScribble(){const{x:n,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,n,r)}onCancel(){this.cancel()}onComplete(){this.complete()}complete(){this.parent.transition("idle")}cancel(){this.parent.transition("idle")}}L(Tle,"id","lasering");class Q1 extends ht{static children(){return[SQe,Tle]}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}}L(Q1,"id","laser"),L(Q1,"initial","idle"),L(Q1,"isLockable",!1);class wle extends ht{constructor(){super(...arguments);L(this,"info",{});L(this,"initialSelectedShapeIds",[]);L(this,"excludedShapeIds",new Set);L(this,"isWrapMode",!1);L(this,"viewportDidChange",!1)}cleanupViewportChangeReactor(){}onEnter(n){const{editor:r}=this,{altKey:o}=r.inputs;this.isWrapMode=r.user.getIsWrapMode(),this.viewportDidChange=!1;let a=!0;if(this.cleanupViewportChangeReactor=si("viewport change while brushing",()=>{r.getViewportPageBounds(),!a&&!this.viewportDidChange&&(this.viewportDidChange=!0)}),o){this.parent.transition("scribble_brushing",n);return}this.excludedShapeIds=new Set(r.getCurrentPageShapes().filter(s=>r.isShapeOfType(s,"group")||r.isShapeOrAncestorLocked(s)).map(s=>s.id)),this.info=n,this.initialSelectedShapeIds=r.getSelectedShapeIds().slice(),this.hitTestShapes(),a=!1}onExit(){this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null}),this.cleanupViewportChangeReactor()}onTick({elapsed:n}){const{editor:r}=this;r.edgeScrollManager.updateEdgeScrolling(n)}onPointerMove(){this.hitTestShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(n){this.editor.setSelectedShapes(this.initialSelectedShapeIds),this.parent.transition("idle",n)}onKeyDown(n){this.editor.inputs.altKey?this.parent.transition("scribble_brushing",n):this.hitTestShapes()}onKeyUp(){this.hitTestShapes()}complete(){this.hitTestShapes(),this.parent.transition("idle")}hitTestShapes(){const{editor:n,excludedShapeIds:r,isWrapMode:o}=this,{inputs:{originPagePoint:a,currentPagePoint:s,shiftKey:i,ctrlKey:l}}=n,c=new Set(i?this.initialSelectedShapeIds:[]),d=o?!l:l,u=Be.FromPoints([a,s]),{corners:m}=u;let h,y,v,x,S,T;const _=n.getViewportPageBounds().contains(u)&&!this.viewportDidChange?n.getCurrentPageRenderingShapesSorted():n.getCurrentPageShapesSorted(),I=n.getCurrentPageId();e:for(let D=0,F=_.length;D<F;D++){if(v=_[D],r.has(v.id)||c.has(v.id)||(x=n.getShapePageBounds(v),!x))continue e;if(u.contains(x)){this.handleHit(v,s,I,c,m);continue e}if(d||n.isShapeOfType(v,"frame"))continue e;if(u.collides(x)){if(S=n.getShapePageTransform(v),!S)continue e;T=S.clone().invert().applyToPoints(m);const B=n.getShapeGeometry(v);t:for(let V=0;V<4;V++)if(h=T[V],y=T[(V+1)%4],B.hitTestLineSegment(h,y,0)){this.handleHit(v,s,I,c,m);break t}}}const P=n.getInstanceState().brush;(!P||!u.equals(P))&&n.updateInstanceState({brush:{...u.toJson()}});const M=n.getSelectedShapeIds();(M.length!==c.size||M.some(D=>!c.has(D)))&&n.setSelectedShapes(Array.from(c))}onInterrupt(){this.editor.updateInstanceState({brush:null})}handleHit(n,r,o,a,s){if(n.parentId===o){a.add(n.id);return}const i=this.editor.getOutermostSelectableShape(n),l=this.editor.getShapeMask(i.id);l&&!nX(l,s)&&!Ss(r,l)||a.add(i.id)}}L(wle,"id","brushing");const dg={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class Cle extends ht{constructor(){super(...arguments);L(this,"info",{})}updateCursor(){const n=this.editor.getSelectedShapes(),r=dg[this.info.handle];this.editor.setCursor({type:r,rotation:n.length===1?this.editor.getSelectionRotation():0})}onEnter(n){this.info=n,typeof n.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.updateCursor()}onExit(){this.parent.setCurrentToolIdMask(void 0)}onPointerMove(){this.editor.inputs.isDragging&&this.startResizing()}onLongPress(){this.startResizing()}startResizing(){this.editor.getIsReadonly()||this.parent.transition("resizing",this.info)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,{}):n();return}this.parent.transition("idle")}cancel(){const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,{}):n();return}this.parent.transition("idle")}}L(Cle,"id","pointing_resize_handle");class Cj extends ht{constructor(){super(...arguments);L(this,"info",{});L(this,"markId","");L(this,"snapshot",{})}onEnter(n){this.info=n,typeof n.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.markId=this.editor.markHistoryStoppingPoint("cropping"),this.snapshot=this.createSnapshot(),this.updateShapes()}onPointerMove(){this.updateShapes()}onKeyDown(){this.updateShapes()}onKeyUp(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}onExit(){this.parent.setCurrentToolIdMask(void 0)}updateCursor(){if(!this.editor.getSelectedShapes()[0])return;const r=dg[this.info.handle];this.editor.setCursor({type:r,rotation:this.editor.getSelectionRotation()})}updateShapes(){var h;const{shape:n,cursorHandleOffset:r}=this.snapshot;if(!n)return;const o=this.editor.getShapeUtil(n.type);if(!o)return;const{shiftKey:a}=this.editor.inputs,s=this.editor.inputs.currentPagePoint.clone().sub(r),i=this.editor.inputs.originPagePoint.clone().sub(r),l=s.clone().sub(i).rot(-n.rotation),c=n.props.crop??Jl(),d=sc(n.props,c),m=(((h=o.onCrop)==null?void 0:h.bind(o))??Yqe)(n,{handle:this.info.handle,change:l,crop:c,uncroppedSize:d,initialShape:this.snapshot.shape,aspectRatioLocked:a});m&&(this.editor.updateShapes([{id:n.id,type:n.type,...m}]),this.updateCursor())}complete(){this.updateShapes(),er(this.editor,[this.snapshot.shape.id]);const{onInteractionEnd:n}=this.info;n?typeof n=="string"?this.editor.setCurrentTool(n,this.info):n():(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}cancel(){this.editor.bailToMark(this.markId);const{onInteractionEnd:n}=this.info;n?typeof n=="string"?this.editor.setCurrentTool(n,this.info):n():(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}createSnapshot(){const n=this.editor.getSelectionRotation(),{inputs:{originPagePoint:r}}=this.editor,o=this.editor.getOnlySelectedShape(),a=this.editor.getSelectionRotatedPageBounds(),s=R.RotWith(a.getHandlePoint(this.info.handle),a.point,n),i=R.Sub(r,s);return{shape:o,cursorHandleOffset:i}}}L(Cj,"id","cropping");function Aj(t,e=!1){const n=t.getZoomLevel(),{inputs:{currentPagePoint:r}}=t;return t.getShapeAtPoint(r,{hitInside:!1,hitLabels:e,margin:t.options.hitTestMargin/n,renderingOnly:!0})??t.getSelectedShapeAtPoint(r)}function Ale(t,e,n){if(!e)throw Error("Needs to translate a cropped shape!");const{crop:r}=e.props;if(!r)return;const o=t.inputs.shiftKey?Math.abs(n.x)<Math.abs(n.y)?"x":"y":null;o==="x"?n.x=0:o==="y"&&(n.y=0),n.rot(-e.rotation);const{w:a,h:s}=sc(e.props,r),i=r.bottomRight.x-r.topLeft.x,l=r.bottomRight.y-r.topLeft.y,c=bo(r),d=1-i,u=1-l;return c.topLeft.x=Lt(c.topLeft.x-n.x/a,0,d),c.topLeft.y=Lt(c.topLeft.y-n.y/s,0,u),c.bottomRight.x=c.topLeft.x+i,c.bottomRight.y=c.topLeft.y+l,{id:e.id,type:e.type,props:{crop:c}}}var DO;let EQe=(DO=class extends ht{onEnter(){this.editor.setCursor({type:"default",rotation:0});const e=this.editor.getOnlySelectedShape();e&&this.editor.setCroppingShape(e.id)}onExit(){this.editor.setCursor({type:"default",rotation:0})}onCancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}onPointerDown(e){var n;if(e.accelKey){this.cancel(),this.editor.root.handleEvent(e);return}switch(e.target){case"canvas":{const r=Aj(this.editor);if(r&&!this.editor.isShapeOfType(r,"group")){this.onPointerDown({...e,shape:r,target:"shape"});return}this.cancel(),this.editor.root.handleEvent(e);break}case"shape":{if(e.shape.id===this.editor.getCroppingShapeId()){this.editor.setCurrentTool("select.crop.pointing_crop",e);return}else(n=this.editor.getShapeUtil(e.shape))!=null&&n.canCrop(e.shape)?(this.editor.setCroppingShape(e.shape.id),this.editor.setSelectedShapes([e.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",e)):(this.cancel(),this.editor.root.handleEvent(e));break}case"selection":{switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.editor.setCurrentTool("select.pointing_rotate_handle",{...e,onInteractionEnd:"select.crop.idle"});break}case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":{this.editor.setCurrentTool("select.crop.pointing_crop_handle",{...e,onInteractionEnd:"select.crop.idle"});break}default:this.cancel()}break}}}onDoubleClick(e){var a;if(this.editor.inputs.shiftKey||e.phase!=="up")return;const n=this.editor.getCroppingShapeId();if(!n)return;const r=this.editor.getShape(n);if(!r)return;const o=this.editor.getShapeUtil(r);if(o){if(e.target==="selection"){(a=o.onDoubleClickEdge)==null||a.call(o,r,e);return}this.cancel(),this.editor.root.handleEvent(e)}}onKeyDown(){this.nudgeCroppingImage(!1)}onKeyRepeat(){this.nudgeCroppingImage(!0)}onKeyUp(e){switch(e.key){case"Enter":{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{});break}}}cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}nudgeCroppingImage(e=!1){const{editor:{inputs:{keys:n}}}=this,r=n.has("ShiftLeft"),o=new R(0,0);if(n.has("ArrowLeft")&&(o.x+=1),n.has("ArrowRight")&&(o.x-=1),n.has("ArrowUp")&&(o.y+=1),n.has("ArrowDown")&&(o.y-=1),o.equals(new R(0,0)))return;r&&o.mul(10);const a=this.editor.getShape(this.editor.getCroppingShapeId());if(!a)return;const s=Ale(this.editor,a,o);s&&(e||this.editor.markHistoryStoppingPoint("translate crop"),this.editor.updateShapes([s]))}},L(DO,"id","idle"),DO);class _le extends ht{onCancel(){this.editor.setCurrentTool("select.crop.idle",{})}onPointerMove(e){this.editor.inputs.isDragging&&this.startDragging(e)}onLongPress(e){this.startDragging(e)}onPointerUp(e){this.editor.setCurrentTool("select.crop.idle",e)}startDragging(e){this.editor.setCurrentTool("select.crop.translating_crop",e)}}L(_le,"id","pointing_crop");class _j extends ht{constructor(){super(...arguments);L(this,"info",{})}onEnter(n){this.info=n,typeof n.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(n.onInteractionEnd);const r=this.editor.getSelectedShapes()[0];if(!r)return;const o=dg[this.info.handle];this.editor.setCursor({type:o,rotation:this.editor.getSelectionRotation()}),this.editor.setCroppingShape(r.id)}onExit(){this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0)}onPointerMove(){this.editor.inputs.isDragging&&this.startCropping()}onLongPress(){this.startCropping()}startCropping(){this.editor.getIsReadonly()||this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})}onPointerUp(){const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,this.info):n();return}this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle")}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,this.info):n();return}this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle")}}L(_j,"id","pointing_crop_handle");class kle extends ht{constructor(){super(...arguments);L(this,"info",{});L(this,"markId","");L(this,"snapshot",{})}onEnter(n){this.info=n,this.snapshot=this.createSnapshot(),this.markId=this.editor.markHistoryStoppingPoint("translating_crop"),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()}onExit(){this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}onKeyDown(n){switch(n.key){case"Alt":case"Shift":{this.updateShapes();return}}}onKeyUp(n){switch(n.key){case"Enter":{this.complete();return}case"Alt":case"Shift":this.updateShapes()}}complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.getOnlySelectedShape()}}updateShapes(){const n=this.snapshot.shape;if(!n)return;const{originPagePoint:r,currentPagePoint:o}=this.editor.inputs,a=o.clone().sub(r),s=Ale(this.editor,n,a);s&&this.editor.updateShapes([s])}}L(kle,"id","translating_crop");class XR extends ht{constructor(){super(...arguments);L(this,"markId","");L(this,"didExit",!1)}static children(){return[EQe,kle,_le,_j,Cj]}onEnter(){this.didExit=!1,this.markId=this.editor.markHistoryStoppingPoint("crop")}onExit(){this.didExit||(this.didExit=!0,this.editor.squashToMark(this.markId))}onCancel(){this.didExit||(this.didExit=!0,this.editor.bailToMark(this.markId))}}L(XR,"id","crop"),L(XR,"initial","idle");class Ile extends ht{constructor(){super(...arguments);L(this,"shapeId");L(this,"initialHandle");L(this,"initialAdjacentHandle");L(this,"initialPagePoint");L(this,"markId");L(this,"initialPageTransform");L(this,"initialPageRotation");L(this,"info");L(this,"isPrecise",!1);L(this,"isPreciseId",null);L(this,"pointingId",null);L(this,"exactTimeout",-1)}onEnter(n){var m;const{shape:r,isCreating:o,creatingMarkId:a,handle:s}=n;if(this.info=n,typeof n.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.shapeId=r.id,this.markId="",o)if(a)this.markId=a;else{const h=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);h&&(this.markId=h)}else this.markId=this.editor.markHistoryStoppingPoint("dragging handle");this.initialHandle=bo(s),this.initialPageTransform=this.editor.getShapePageTransform(r),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.setCursor({type:o?"cross":"grabbing",rotation:0});const i=this.editor.getShapeHandles(r).sort(oa),l=i.findIndex(h=>h.id===n.handle.id);if(this.initialAdjacentHandle=null,n.handle.snapReferenceHandleId){const h=i.find(y=>y.id===n.handle.snapReferenceHandleId);h&&(this.initialAdjacentHandle=h)}if(!this.initialAdjacentHandle){for(let h=l+1;h<i.length;h++){const y=i[h];if(y.type==="vertex"&&y.id!=="middle"&&y.id!==n.handle.id){this.initialAdjacentHandle=y;break}}if(!this.initialAdjacentHandle)for(let h=i.length-1;h>=0;h--){const y=i[h];if(y.type==="vertex"&&y.id!=="middle"&&y.id!==n.handle.id){this.initialAdjacentHandle=y;break}}}if(this.editor.isShapeOfType(r,"arrow")){const h=aa(this.editor,r)[n.handle.id];this.isPrecise=!1,h&&(this.isPrecise=h.props.isPrecise,this.isPrecise?this.isPreciseId=h.toId:this.resetExactTimeout())}const c={handle:this.initialHandle,isPrecise:this.isPrecise,isCreatingShape:!!this.info.isCreating,initial:r},d=this.editor.getShapeUtil(r),u=(m=d.onHandleDragStart)==null?void 0:m.call(d,r,c);u&&this.editor.updateShapes([{...u,id:r.id,type:r.type}]),this.update(),this.editor.select(this.shapeId)}resetExactTimeout(){const r=this.editor.getShapeUtil("arrow").options.pointingPreciseTimeout;this.exactTimeout!==-1&&this.clearExactTimeout(),this.exactTimeout=this.editor.timers.setTimeout(()=>{this.getIsActive()&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1},r)}clearExactTimeout(){this.exactTimeout!==-1&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}onPointerMove(){this.update()}onKeyDown(){this.update()}onKeyUp(){this.update()}onPointerUp(){this.complete()}onComplete(){this.update(),this.complete()}onCancel(){this.cancel()}onExit(){this.parent.setCurrentToolIdMask(void 0),VL(this.editor),this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0})}complete(){var o;this.editor.snaps.clearIndicators(),er(this.editor,[this.shapeId]);const n=this.editor.getShape(this.shapeId);if(n){const a=this.editor.getShapeUtil(n),s={handle:this.initialHandle,isPrecise:this.isPrecise,isCreatingShape:!!this.info.isCreating,initial:this.info.shape},i=(o=a.onHandleDragEnd)==null?void 0:o.call(a,n,s);i&&this.editor.updateShapes([{...i,id:n.id,type:n.type}])}const{onInteractionEnd:r}=this.info;if(r)if(typeof r=="string"){if(this.editor.getInstanceState().isToolLocked&&r){this.editor.setCurrentTool(r,{shapeId:this.shapeId});return}}else{r==null||r();return}this.parent.transition("idle")}cancel(){var o;const n=this.editor.getShape(this.shapeId);if(n){const a=this.editor.getShapeUtil(n),s={handle:this.initialHandle,isPrecise:this.isPrecise,isCreatingShape:!!this.info.isCreating,initial:this.info.shape};(o=a.onHandleDragCancel)==null||o.call(a,n,s)}this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators();const{onInteractionEnd:r}=this.info;if(r){typeof r=="string"?this.editor.setCurrentTool(r,{shapeId:this.shapeId}):r==null||r();return}this.parent.transition("idle")}update(){var D;const{editor:n,shapeId:r,initialPagePoint:o}=this,{initialHandle:a,initialPageRotation:s,initialAdjacentHandle:i}=this,l=this.editor.user.getIsSnapMode(),{snaps:c,inputs:{currentPagePoint:d,shiftKey:u,ctrlKey:m,altKey:h,pointerVelocity:y}}=n,v=this.info.shape,x=n.getShape(r);if(!x)return;const S=n.getShapeUtil(x),T=n.isShapeOfType(x,"arrow")?aa(n,x)[a.id]:void 0;let C=d.clone().sub(o).rot(-s).add(a);if(u&&i&&a.id!=="middle"){const F=R.Angle(i,C),V=ME(F,24)-F;C=R.RotWith(C,i,V)}n.snaps.clearIndicators();let _={...a,x:C.x,y:C.y},I=!1;if(a.canSnap&&a.snapType?qwe("canSnap is deprecated. Cannot use both canSnap and snapType together - snapping disabled. Please use only snapType."):I=a.canSnap||a.snapType!==void 0,I&&(l?!m:m)){if(!n.getShapePageTransform(x.id))throw Error("Expected a page transform");const B=c.handles.snapHandle({currentShapeId:r,handle:_});B&&(B.nudge.rot(-n.getShapeParentTransform(x).rotation()),C.add(B.nudge),_={...a,x:C.x,y:C.y})}const P=(D=S.onHandleDrag)==null?void 0:D.call(S,x,{handle:_,isPrecise:this.isPrecise||h,isCreatingShape:!!this.info.isCreating,initial:v}),M={id:x.id,type:x.type,...P};if(a.type==="vertex"&&this.editor.isShapeOfType(x,"arrow")){const F=aa(n,x)[a.id];F?(T==null?void 0:T.toId)!==F.toId&&(this.pointingId=F.toId,this.isPrecise=y.len()<.5||h,this.isPreciseId=this.isPrecise?F.toId:null,this.resetExactTimeout()):T&&(this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}P&&n.updateShapes([M])}}L(Ile,"id","dragging_handle");function Ple(t){return t.isLabel?[t]:t instanceof pi?t.children.filter(e=>e.isLabel):[]}class Ole extends ht{constructor(){super(...arguments);L(this,"hitShapeForPointerUp",null);L(this,"info",{})}onEnter(n){const r=this.editor.getEditingShape();if(!r)throw Error("Entered editing state without an editing shape");this.hitShapeForPointerUp=null,this.info=n,n.isCreatingTextWhileToolLocked&&this.parent.setCurrentToolIdMask("text"),Bu(this.editor),this.editor.select(r)}onExit(){const{editingShapeId:n}=this.editor.getCurrentPageState();n&&(this.editor.setEditingShape(null),Bu.cancel(),this.info.isCreatingTextWhileToolLocked&&(this.parent.setCurrentToolIdMask(void 0),this.editor.setCurrentTool("text",{})))}onPointerMove(n){if(this.hitShapeForPointerUp&&this.editor.inputs.isDragging){if(this.editor.getIsReadonly()||this.hitShapeForPointerUp.isLocked)return;this.editor.select(this.hitShapeForPointerUp),this.parent.transition("translating",n),this.hitShapeForPointerUp=null;return}switch(n.target){case"shape":case"canvas":{Bu(this.editor);return}}}onPointerDown(n){switch(this.hitShapeForPointerUp=null,n.target){case"canvas":{const r=Aj(this.editor,!0);if(r){this.onPointerDown({...n,shape:r,target:"shape"});return}break}case"shape":{const{shape:r}=n,o=this.editor.getEditingShape();if(!o)throw Error("Expected an editing shape!");const a=this.editor.getShapeUtil(r).getGeometry(r),s=Ple(a),i=s.length===1?s[0]:void 0,l=this.editor.isShapeOfType(o,"text")&&Sp(this.editor,o.props.richText).trim()==="";if(i&&!l){const c=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint);if(i.bounds.containsPoint(c,0)&&i.hitTestPoint(c)){if(r.id===o.id)return;this.hitShapeForPointerUp=r,this.editor.markHistoryStoppingPoint("editing on pointer up"),this.editor.select(r.id);return}}else{if(r.id===o.id)this.editor.isShapeOfType(r,"frame")&&(this.editor.setEditingShape(null),this.parent.transition("idle",n));else{this.parent.transition("pointing_shape",n);return}return}break}}this.parent.transition("idle",n),this.editor.root.handleEvent(n)}onPointerUp(n){const r=this.hitShapeForPointerUp;if(!r)return;this.hitShapeForPointerUp=null;const o=this.editor.getShapeUtil(r);if(r.isLocked)return;if(this.editor.getIsReadonly()&&!o.canEditInReadonly(r)){this.parent.transition("pointing_shape",n);return}this.editor.select(r.id);const a=this.editor.getEditingShape(),s=a&&a.id!==r.id;this.editor.setEditingShape(r.id);const i=Nn.isIos||Nn.isAndroid;!i||!s?this.editor.emit("place-caret",{shapeId:r.id,point:n.point}):i&&s&&this.editor.emit("select-all-text",{shapeId:r.id}),Bu(this.editor)}onComplete(n){this.editor.getContainer().focus(),this.parent.transition("idle",n)}onCancel(n){this.editor.getContainer().focus(),this.parent.transition("idle",n)}}L(Ole,"id","editing_shape");function d$(t){const e=t.getOnlySelectedShape();return!!(e&&!t.isShapeOrAncestorLocked(e)&&t.getShapeUtil(e).canCrop(e))}function XT(t,e){const n=t.getSelectedShapeIds(),{currentPagePoint:r}=t.inputs,{shiftKey:o,altKey:a,accelKey:s}=e,i=o||s,l=t.getShapeAtPoint(r,{hitInside:!1,margin:t.options.hitTestMargin/t.getZoomLevel(),hitLabels:!0,renderingOnly:!0,filter:c=>!c.isLocked});if(l){const c=t.getOutermostSelectableShape(l);if(i&&!a)t.cancelDoubleClick(),n.includes(c.id)?(t.markHistoryStoppingPoint("deselecting shape"),t.deselect(c)):(t.markHistoryStoppingPoint("shift selecting shape"),t.setSelectedShapes([...n,c.id]));else{let d;c===l||c.id===t.getFocusedGroupId()||n.includes(c.id)?d=l:d=c,d&&!n.includes(d.id)&&(t.markHistoryStoppingPoint("selecting shape"),t.select(d.id))}}else{if(i)return;{n.length>0&&(t.markHistoryStoppingPoint("selecting none"),t.selectNone());const c=t.getFocusedGroupId();if(bs(c)){const d=t.getShape(c);t.isPointInShape(d,r,{margin:0,hitInside:!0})||t.setFocusedGroup(null)}}}}const TQe=["Delete","Backspace","[","]","Enter"," ","Shift","Tab"];var NO;let wQe=(NO=class extends ht{constructor(){super(...arguments);L(this,"selectedShapesOnKeyDown",[])}onEnter(){this.parent.setCurrentToolIdMask(void 0),Bu(this.editor),this.selectedShapesOnKeyDown=[],this.editor.setCursor({type:"default",rotation:0})}onExit(){Bu.cancel()}onPointerMove(){Bu(this.editor)}onPointerDown(n){const r=n.ctrlKey&&d$(this.editor);switch(n.target){case"canvas":{const o=Aj(this.editor);if(o&&!o.isLocked){this.onPointerDown({...n,shape:o,target:"shape"});return}const a=this.editor.getSelectedShapeIds(),s=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:i}}=this.editor;if((a.length>1||s&&!this.editor.getShapeUtil(s).hideSelectionBoundsBg(s))&&p$(this.editor,i)){this.onPointerDown({...n,target:"selection"});return}this.parent.transition("pointing_canvas",n);break}case"shape":{const{shape:o}=n;if(this.editor.isShapeOrAncestorLocked(o)){this.parent.transition("pointing_canvas",n);break}this.parent.transition("pointing_shape",n);break}case"handle":{if(this.editor.getIsReadonly())break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",n):this.parent.transition("pointing_handle",n);break}case"selection":{switch(n.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{if(n.accelKey){this.parent.transition("brushing",n);break}this.parent.transition("pointing_rotate_handle",n);break}case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":{if(r)this.parent.transition("crop.pointing_crop_handle",n);else{if(n.accelKey){this.parent.transition("brushing",n);break}this.parent.transition("pointing_resize_handle",n)}break}default:{const o=this.editor.getHoveredShape();if(o&&!this.editor.getSelectedShapeIds().includes(o.id)&&!o.isLocked){this.onPointerDown({...n,shape:o,target:"shape"});return}this.parent.transition("pointing_selection",n)}}break}}}onDoubleClick(n){var r,o,a,s,i;if(!(this.editor.inputs.shiftKey||n.phase!=="up")&&!(n.ctrlKey||n.shiftKey))switch(n.target){case"canvas":{const l=this.editor.getHoveredShape(),c=l&&!this.editor.isShapeOfType(l,"group")?l:this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint)??this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1}),d=this.editor.getFocusedGroupId();if(c){if(this.editor.isShapeOfType(c,"group")){XT(this.editor,n);return}else{const u=this.editor.getShape(c.parentId);if(u&&this.editor.isShapeOfType(u,"group")&&!(d&&u.id===d)){XT(this.editor,n);return}}this.onDoubleClick({...n,shape:c,target:"shape"});return}this.editor.inputs.shiftKey||this.handleDoubleClickOnCanvas(n);break}case"selection":{if(this.editor.getIsReadonly())break;const l=this.editor.getOnlySelectedShape();if(l){const c=this.editor.getShapeUtil(l);if(!this.canInteractWithShapeInReadOnly(l))return;if(n.handle==="right"||n.handle==="left"||n.handle==="top"||n.handle==="bottom"){const d=(r=c.onDoubleClickEdge)==null?void 0:r.call(c,l,n);if(d){this.editor.markHistoryStoppingPoint("double click edge"),this.editor.updateShapes([d]),er(this.editor,[l.id]);return}}if(n.handle==="top_left"||n.handle==="top_right"||n.handle==="bottom_right"||n.handle==="bottom_left"){const d=(o=c.onDoubleClickCorner)==null?void 0:o.call(c,l,n);if(d){this.editor.markHistoryStoppingPoint("double click corner"),this.editor.updateShapes([d]),er(this.editor,[l.id]);return}}if(c.canCrop(l)&&!this.editor.isShapeOrAncestorLocked(l)){this.parent.transition("crop",n);return}this.shouldStartEditingShape(l)&&this.startEditingShape(l,n,!0)}break}case"shape":{const{shape:l}=n,c=this.editor.getShapeUtil(l);if(l.type!=="video"&&l.type!=="embed"&&this.editor.getIsReadonly())break;if(c.onDoubleClick){const d=(a=c.onDoubleClick)==null?void 0:a.call(c,l);if(d){this.editor.updateShapes([d]);return}}if(c.canCrop(l)&&!this.editor.isShapeOrAncestorLocked(l)){this.editor.markHistoryStoppingPoint("select and crop"),this.editor.select((s=n.shape)==null?void 0:s.id),this.parent.transition("crop",n);return}this.shouldStartEditingShape(l)?this.startEditingShape(l,n,!0):this.handleDoubleClickOnCanvas(n);break}case"handle":{if(this.editor.getIsReadonly())break;const{shape:l,handle:c}=n,d=this.editor.getShapeUtil(l),u=(i=d.onDoubleClickHandle)==null?void 0:i.call(d,l,c);u?this.editor.updateShapes([u]):this.shouldStartEditingShape(l)&&this.startEditingShape(l,n,!0)}}}onRightClick(n){switch(n.target){case"canvas":{const r=this.editor.getHoveredShape(),o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1,hitLabels:!0,hitLocked:!0,hitFrameInside:!0,renderingOnly:!0});if(o){this.onRightClick({...n,shape:o,target:"shape"});return}const a=this.editor.getSelectedShapeIds(),s=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:i}}=this.editor;if((a.length>1||s&&!this.editor.getShapeUtil(s).hideSelectionBoundsBg(s))&&p$(this.editor,i)){this.onRightClick({...n,target:"selection"});return}this.editor.selectNone();break}case"shape":{const{selectedShapeIds:r}=this.editor.getCurrentPageState(),{shape:o}=n,a=this.editor.getOutermostSelectableShape(o,s=>!r.includes(s.id));!r.includes(a.id)&&!this.editor.findShapeAncestor(a,s=>r.includes(s.id))&&(this.editor.markHistoryStoppingPoint("selecting shape"),this.editor.setSelectedShapes([a.id]));break}}}onCancel(){this.editor.getFocusedGroupId()!==this.editor.getCurrentPageId()&&this.editor.getSelectedShapeIds().length>0?this.editor.popFocusedGroupId():(this.editor.markHistoryStoppingPoint("clearing selection"),this.editor.selectNone())}onKeyDown(n){switch(this.selectedShapesOnKeyDown=this.editor.getSelectedShapes(),n.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{if(n.accelKey){n.shiftKey?n.code==="ArrowDown"?this.editor.selectFirstChildShape():n.code==="ArrowUp"&&this.editor.selectParentShape():this.editor.selectAdjacentShape(n.code.replace("Arrow","").toLowerCase());return}this.nudgeSelectedShapes(!1);return}}if(Ur.editOnType.get()&&!TQe.includes(n.key)&&!n.altKey&&!n.ctrlKey){const r=this.editor.getOnlySelectedShape();if(r&&this.editor.isShapeOfType(r,"note")&&this.shouldStartEditingShape(r)){this.startEditingShape(r,{...n,target:"shape",shape:r},!0);return}}}onKeyRepeat(n){switch(n.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{if(n.accelKey){this.editor.selectAdjacentShape(n.code.replace("Arrow","").toLowerCase());return}this.nudgeSelectedShapes(!0);break}case"Tab":{this.editor.getSelectedShapes().length&&!n.altKey&&this.editor.selectAdjacentShape(n.shiftKey?"prev":"next");break}}}onKeyUp(n){switch(n.key){case"Enter":{if(!this.selectedShapesOnKeyDown.length)return;const r=this.editor.getSelectedShapes();if(r.every(a=>this.editor.isShapeOfType(a,"group"))){this.editor.setSelectedShapes(r.flatMap(a=>this.editor.getSortedChildIdsForParent(a.id)));return}const o=this.editor.getOnlySelectedShape();if(o&&this.shouldStartEditingShape(o)){this.startEditingShape(o,{...n,target:"shape",shape:o},!0);return}d$(this.editor)&&this.parent.transition("crop",n);break}case"Tab":{this.editor.getSelectedShapes().length&&!n.altKey&&this.editor.selectAdjacentShape(n.shiftKey?"prev":"next");break}}}shouldStartEditingShape(n=this.editor.getOnlySelectedShape()){return!n||this.editor.isShapeOrAncestorLocked(n)&&n.type!=="embed"||!this.canInteractWithShapeInReadOnly(n)?!1:this.editor.getShapeUtil(n).canEdit(n)}startEditingShape(n,r,o){this.editor.isShapeOrAncestorLocked(n)&&n.type!=="embed"||(this.editor.markHistoryStoppingPoint("editing shape"),YT(this.editor,n,o),this.parent.transition("editing_shape",r))}isOverArrowLabelTest(n){return n?ale(this.editor,n):!1}handleDoubleClickOnCanvas(n){if(this.editor.getIsReadonly()||!this.editor.options.createTextOnCanvasDoubleClick)return;this.editor.markHistoryStoppingPoint("creating text shape");const r=lr(),{x:o,y:a}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:r,type:"text",x:o,y:a,props:{richText:Ma(""),autoSize:!0}}]);const s=this.editor.getShape(r);if(!s)return;const i=this.editor.getShapeUtil(s);this.editor.getIsReadonly()&&!i.canEditInReadonly(s)||(this.editor.setEditingShape(r),this.editor.select(r),this.parent.transition("editing_shape",n))}nudgeSelectedShapes(n=!1){const{editor:{inputs:{keys:r}}}=this,o=r.has("ShiftLeft"),a=new R(0,0);if(r.has("ArrowLeft")&&(a.x-=1),r.has("ArrowRight")&&(a.x+=1),r.has("ArrowUp")&&(a.y-=1),r.has("ArrowDown")&&(a.y+=1),a.equals(new R(0,0)))return;n||this.editor.markHistoryStoppingPoint("nudge shapes");const{gridSize:s}=this.editor.getDocumentSettings(),i=this.editor.getInstanceState().isGridMode?o?s*_Qe:s:o?CQe:AQe,l=this.editor.getSelectedShapeIds();this.editor.nudgeShapes(l,a.mul(i)),er(this.editor,l)}canInteractWithShapeInReadOnly(n){return!!(!this.editor.getIsReadonly()||this.editor.getShapeUtil(n).canEditInReadonly(n))}},L(NO,"id","idle"),NO);const CQe=10,AQe=1,_Qe=5;function p$(t,e){const n=t.getSelectionRotatedPageBounds();if(!n)return!1;const r=t.getSelectionRotation();return r?Ss(e,n.corners.map(o=>R.RotWith(o,n.point,r))):n.containsPoint(e)}class Mle extends ht{constructor(){super(...arguments);L(this,"shapeId","");L(this,"markId","");L(this,"wasAlreadySelected",!1);L(this,"didDrag",!1);L(this,"didCtrlOnEnter",!1);L(this,"info",{});L(this,"_labelDragOffset",new R(0,0))}updateCursor(){this.editor.setCursor({type:"grabbing",rotation:0})}onEnter(n){const{shape:r}=n;typeof n.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.info=n,this.shapeId=r.id,this.didDrag=!1,this.didCtrlOnEnter=n.accelKey,this.wasAlreadySelected=this.editor.getOnlySelectedShapeId()===r.id,this.updateCursor();const a=this.editor.getShapeGeometry(r).children[1];if(!a)throw Error(`Expected to find an arrow label geometry for shape: ${r.id}`);const{currentPagePoint:s}=this.editor.inputs,i=this.editor.getPointInShapeSpace(r,s);if(this._labelDragOffset=R.Sub(a.center,i),this.markId=this.editor.markHistoryStoppingPoint("label-drag start"),n.shiftKey||n.accelKey){const c=this.editor.getSelectedShapeIds();this.editor.setSelectedShapes([...c,this.shapeId]);return}this.editor.setSelectedShapes([this.shapeId])}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){const{isDragging:n}=this.editor.inputs;if(!n)return;if(this.didCtrlOnEnter){this.parent.transition("brushing",this.info);return}const r=this.editor.getShape(this.shapeId);if(!r)return;const o=this.editor.getShapeUtil("arrow").options,a=lg(this.editor,r),s=this.editor.getShapePageTransform(r.id),i=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint).add(this._labelDragOffset),l=ole(this.editor,r);let c=a.uninterpolateAlongEdge(i);isNaN(c)&&(c=l);const d=s.applyToPoint(a.interpolateAlongEdge(c)),u=s.applyToPoint(a.interpolateAlongEdge(l));R.DistMin(d,u,o.labelCenterSnapDistance/this.editor.getZoomLevel())&&(c=l),this.didDrag=!0,this.editor.updateShape({id:r.id,type:r.type,props:{labelPosition:c}})}onPointerUp(){const n=this.editor.getShape(this.shapeId);n&&(this.didDrag||!this.wasAlreadySelected?this.complete():this.editor.getIsReadonly()||(this.editor.setEditingShape(n.id),this.editor.setCurrentTool("select.editing_shape")))}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,{}):n();return}this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId);const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,{}):n();return}this.parent.transition("idle")}}L(Mle,"id","pointing_arrow_label");class Rle extends ht{onEnter(e){e.shiftKey||e.accelKey||this.editor.getSelectedShapeIds().length>0&&(this.editor.markHistoryStoppingPoint("selecting none"),this.editor.selectNone())}onPointerMove(e){this.editor.inputs.isDragging&&this.parent.transition("brushing",e)}onPointerUp(e){XT(this.editor,e),this.complete()}onComplete(){this.complete()}onInterrupt(){this.parent.transition("idle")}complete(){this.parent.transition("idle")}}L(Rle,"id","pointing_canvas");class Dle extends ht{constructor(){super(...arguments);L(this,"didCtrlOnEnter",!1);L(this,"info",{})}onEnter(n){this.info=n,this.didCtrlOnEnter=n.accelKey;const{shape:r}=n;if(this.editor.isShapeOfType(r,"arrow")){const o=aa(this.editor,r),a=o[n.handle.id],s=o[n.handle.id==="start"?"end":"start"],i=this.editor.getShapePageTransform(r.id);a&&qC({editor:this.editor,pointInPageSpace:i.applyToPoint(n.handle),arrow:r,isPrecise:a.props.isPrecise,currentBinding:a,oppositeBinding:s})}this.editor.setCursor({type:"grabbing",rotation:0})}onExit(){this.editor.setHintingShapes([]),this.editor.setCursor({type:"default",rotation:0})}onPointerUp(){const{shape:n,handle:r}=this.info;if(this.editor.isShapeOfType(n,"note")){const{editor:o}=this,a=f$(o,n,r,!1);if(a){YT(o,a,!0);return}}this.parent.transition("idle",this.info)}onPointerMove(n){const{editor:r}=this;r.inputs.isDragging&&(this.didCtrlOnEnter?this.parent.transition("brushing",n):this.startDraggingHandle())}onLongPress(){this.startDraggingHandle()}startDraggingHandle(){const{editor:n}=this;if(n.getIsReadonly())return;const{shape:r,handle:o}=this.info;if(n.isShapeOfType(r,"note")){const a=f$(n,r,o,!0);if(a){const s=n.getPointInParentSpace(a,n.inputs.originPagePoint).sub(R.Rot(JC.clone().mul(r.props.scale),a.rotation));n.updateShape({...a,x:s.x,y:s.y}),n.setHoveredShape(a.id).select(a.id).setCurrentTool("select.translating",{...this.info,target:"shape",shape:n.getShape(a),onInteractionEnd:"note",isCreating:!0,onCreate:()=>{YT(n,a,!0)}});return}}this.parent.transition("dragging_handle",this.info)}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}L(Dle,"id","pointing_handle");function f$(t,e,n,r){const o=t.getShapePageTransform(e.id),a=o.point(),s=o.rotation(),l=Kie(t,a,s,e.props.growY*e.props.scale,0,e.props.scale)[n.index];if(l)return Yie(t,e,l,s,r)}class Nle extends ht{constructor(){super(...arguments);L(this,"info",{})}updateCursor(){this.editor.setCursor({type:dg[this.info.handle],rotation:this.editor.getSelectionRotation()})}onEnter(n){this.info=n,typeof n.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.updateCursor()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){this.editor.inputs.isDragging&&this.startRotating()}onLongPress(){this.startRotating()}startRotating(){this.editor.getIsReadonly()||this.parent.transition("rotating",this.info)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,{}):n==null||n();return}this.parent.transition("idle")}cancel(){const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,{}):n();return}this.parent.transition("idle")}}L(Nle,"id","pointing_rotate_handle");class Lle extends ht{constructor(){super(...arguments);L(this,"info",{})}onEnter(n){this.info=n}onPointerUp(n){XT(this.editor,n),this.parent.transition("idle",n)}onPointerMove(n){this.editor.inputs.isDragging&&this.startTranslating(n)}onLongPress(n){this.startTranslating(n)}startTranslating(n){this.editor.getIsReadonly()||this.parent.transition("translating",n)}onDoubleClick(n){var a,s;const r=this.editor.getHoveredShape(),o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});if(o){this.parent.transition("idle"),(s=(a=this.parent).onDoubleClick)==null||s.call(a,{...n,target:"shape",shape:this.editor.getShape(o)});return}}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}L(Lle,"id","pointing_selection");class jle extends ht{constructor(){super(...arguments);L(this,"hitShape",{});L(this,"hitShapeForPointerUp",{});L(this,"isDoubleClick",!1);L(this,"didCtrlOnEnter",!1);L(this,"didSelectOnEnter",!1)}onEnter(n){const r=this.editor.getSelectedShapeIds(),o=this.editor.getSelectionRotatedPageBounds(),a=this.editor.getFocusedGroupId(),{inputs:{currentPagePoint:s}}=this.editor,{shiftKey:i,altKey:l,accelKey:c}=n;this.hitShape=n.shape,this.isDoubleClick=!1,this.didCtrlOnEnter=c;const d=this.editor.getOutermostSelectableShape(n.shape),u=this.editor.findShapeAncestor(d,m=>r.includes(m.id));if(this.didCtrlOnEnter||this.editor.getShapeUtil(n.shape).onClick||d.id===a||r.includes(d.id)||u||r.length>1&&(o!=null&&o.containsPoint(s))){this.didSelectOnEnter=!1,this.hitShapeForPointerUp=d;return}this.didSelectOnEnter=!0,i&&!l?(this.editor.cancelDoubleClick(),r.includes(d.id)||(this.editor.markHistoryStoppingPoint("shift selecting shape"),this.editor.setSelectedShapes([...r,d.id]))):(this.editor.markHistoryStoppingPoint("selecting shape"),this.editor.setSelectedShapes([d.id]))}onPointerUp(n){var d;const r=this.editor.getSelectedShapeIds(),o=this.editor.getFocusedGroupId(),a=this.editor.getZoomLevel(),{inputs:{currentPagePoint:s}}=this.editor,i=n.shiftKey||n.accelKey,l=this.editor.getShapeAtPoint(s,{margin:this.editor.options.hitTestMargin/a,hitInside:!0,renderingOnly:!0})??this.hitShape,c=l?this.editor.getOutermostSelectableShape(l):this.hitShapeForPointerUp;if(c){const u=this.editor.getShapeUtil(c);if(u.onClick){const m=(d=u.onClick)==null?void 0:d.call(u,c);if(m){this.editor.markHistoryStoppingPoint("shape on click"),this.editor.updateShapes([m]),this.parent.transition("idle",n);return}}if(c.id===o){r.length>0?(this.editor.markHistoryStoppingPoint("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),this.parent.transition("idle",n);return}}if(!this.didSelectOnEnter){const u=this.editor.getOutermostSelectableShape(l,m=>!r.includes(m.id));if(r.includes(u.id))if(i)this.editor.markHistoryStoppingPoint("deselecting on pointer up"),this.editor.deselect(c);else if(r.includes(c.id)){if(r.length===1){const m=this.editor.getShapeUtil(c).getGeometry(c),h=Ple(m),y=h.length===1?h[0]:void 0;if(y){const v=this.editor.getPointInShapeSpace(c,s);if(y.bounds.containsPoint(v,0)&&y.hitTestPoint(v)){this.editor.run(()=>{this.editor.markHistoryStoppingPoint("editing on pointer up"),this.editor.select(c.id);const x=this.editor.getShapeUtil(c);this.editor.getIsReadonly()&&!x.canEditInReadonly(c)||(this.editor.setEditingShape(c.id),this.editor.setCurrentTool("select.editing_shape"),this.isDoubleClick?this.editor.emit("select-all-text",{shapeId:c.id}):this.editor.emit("place-caret",{shapeId:c.id,point:n.point}))});return}}}this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.select(c.id)}else this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.select(c);else if(i){const m=this.editor.getShapeAncestors(u);this.editor.markHistoryStoppingPoint("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.getSelectedShapeIds().filter(h=>!m.find(y=>y.id===h)),u.id])}else this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.setSelectedShapes([u.id])}this.parent.transition("idle",n)}onDoubleClick(){this.isDoubleClick=!0}onPointerMove(n){if(this.editor.inputs.isDragging){if(ale(this.editor,this.hitShape)){this.parent.transition("pointing_arrow_label",{...n,shape:this.hitShape});return}this.didCtrlOnEnter?this.parent.transition("brushing",n):this.startTranslating(n)}}onLongPress(n){this.startTranslating(n)}startTranslating(n){this.editor.getIsReadonly()||(this.editor.focus(),this.parent.transition("translating",n))}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}L(jle,"id","pointing_shape");class Ble extends ht{constructor(){super(...arguments);L(this,"info",{});L(this,"markId","");L(this,"didHoldCommand",!1);L(this,"creationCursorOffset",{x:0,y:0});L(this,"snapshot",{})}onEnter(n){const{isCreating:r=!1,creatingMarkId:o,creationCursorOffset:a={x:0,y:0}}=n;this.info=n,this.didHoldCommand=!1,typeof n.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.creationCursorOffset=a;try{this.snapshot=this._createSnapshot()}catch(s){console.error(s),this.cancel();return}if(this.markId="",r)if(o)this.markId=o;else{const s=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);s&&(this.markId=s)}else this.markId=this.editor.markHistoryStoppingPoint("starting resizing");r&&this.editor.setCursor({type:"cross",rotation:0}),this.handleResizeStart(),this.updateShapes()}onTick({elapsed:n}){const{editor:r}=this;r.edgeScrollManager.updateEdgeScrolling(n)}onPointerMove(){this.updateShapes()}onKeyDown(){this.updateShapes()}onKeyUp(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}cancel(){const{shapeSnapshots:n}=this.snapshot;n.forEach(({shape:o})=>{var s;const a=this.editor.getShape(o.id);if(a){const i=this.editor.getShapeUtil(o);(s=i.onResizeCancel)==null||s.call(i,o,a)}}),this.editor.bailToMark(this.markId);const{onInteractionEnd:r}=this.info;if(r){typeof r=="string"?this.editor.setCurrentTool(r,{}):r();return}this.parent.transition("idle")}complete(){var r,o;if(er(this.editor,this.snapshot.selectedShapeIds),this.handleResizeEnd(),this.info.isCreating&&this.info.onCreate){(o=(r=this.info).onCreate)==null||o.call(r,this.editor.getOnlySelectedShape());return}const{onInteractionEnd:n}=this.info;if(n)if(typeof n=="string"){if(this.editor.getInstanceState().isToolLocked){this.editor.setCurrentTool(n,{});return}}else{n();return}this.parent.transition("idle")}handleResizeStart(){const{shapeSnapshots:n}=this.snapshot,r=[];n.forEach(({shape:o})=>{var i;const a=this.editor.getShapeUtil(o),s=(i=a.onResizeStart)==null?void 0:i.call(a,o);s&&r.push(s)}),r.length>0&&this.editor.updateShapes(r)}handleResizeEnd(){const{shapeSnapshots:n}=this.snapshot,r=[];n.forEach(({shape:o})=>{var l;const a=this.editor.getShape(o.id),s=this.editor.getShapeUtil(o),i=(l=s.onResizeEnd)==null?void 0:l.call(s,o,a);i&&r.push(i)}),r.length>0&&this.editor.updateShapes(r)}updateShapes(){const{altKey:n,shiftKey:r}=this.editor.inputs,{frames:o,shapeSnapshots:a,selectionBounds:s,cursorHandleOffset:i,selectedShapeIds:l,selectionRotation:c,canShapesDeform:d}=this.snapshot;let u=r||!d;if(a.size===1){const D=[...a.values()][0];this.editor.isShapeOfType(D.shape,"text")&&(u=!(this.info.handle==="left"||this.info.handle==="right"))}const m=Pr(this.editor.inputs),h=this.editor.inputs.currentPagePoint.clone().sub(i).sub(this.creationCursorOffset),y=this.editor.inputs.originPagePoint.clone().sub(i);if(this.editor.getInstanceState().isGridMode&&!m){const{gridSize:D}=this.editor.getDocumentSettings();h.snapToGrid(D)}const v=this.info.handle,x=m$(v,Math.PI);if(this.editor.snaps.clearIndicators(),(this.editor.user.getIsSnapMode()?!m:m)&&c%yo===0){const{nudge:D}=this.editor.snaps.shapeBounds.snapResizeShapes({dragDelta:R.Sub(h,y),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:m$(v,c),isAspectRatioLocked:u,isResizingFromCenter:n});h.add(D)}const T=R.RotWith(n?s.center:s.getHandlePoint(x),s.point,c),C=R.Sub(h,T).rot(-c),_=R.Sub(y,T).rot(-c),I=R.DivV(C,_);Number.isFinite(I.x)||(I.x=1),Number.isFinite(I.y)||(I.y=1);const P=v==="top"||v==="bottom",M=v==="left"||v==="right";u?M?I.y=Math.abs(I.x):P?I.x=Math.abs(I.y):Math.abs(I.x)>Math.abs(I.y)?I.y=Math.abs(I.x)*(I.y<0?-1:1):I.x=Math.abs(I.y)*(I.x<0?-1:1):(P&&(I.x=1),M&&(I.y=1)),this.info.isCreating||this.updateCursor({dragHandle:v,isFlippedX:I.x<0,isFlippedY:I.y<0,rotation:c});for(const D of a.keys()){const F=a.get(D);this.editor.resizeShape(D,I,{initialShape:F.shape,initialBounds:F.bounds,initialPageTransform:F.pageTransform,dragHandle:v,mode:l.length===1&&D===l[0]?"resize_bounds":"scale_shape",scaleOrigin:T,isAspectRatioLocked:u,scaleAxisRotation:c,skipStartAndEndCallbacks:!0})}if(m){this.didHoldCommand=!0;for(const{id:D,children:F}of o){if(!F.length)continue;const B=a.get(D).shape,V=this.editor.getShape(D);if(!(B&&V))continue;const z=V.x-B.x,H=V.y-B.y,j=new R(z,H).rot(-B.rotation);if(j.x!==0||j.y!==0)for(const q of F)this.editor.updateShape({id:q.id,type:q.type,x:q.x-j.x,y:q.y-j.y})}}else if(this.didHoldCommand){this.didHoldCommand=!1;for(const{children:D}of o)if(D.length)for(const F of D)this.editor.updateShape({id:F.id,type:F.type,x:F.x,y:F.y})}}updateCursor({dragHandle:n,isFlippedX:r,isFlippedY:o,rotation:a}){const s={...this.editor.getInstanceState().cursor};switch(n){case"top_left":case"bottom_right":{s.type="nwse-resize",r!==o&&(s.type="nesw-resize");break}case"top_right":case"bottom_left":{s.type="nesw-resize",r!==o&&(s.type="nwse-resize");break}}s.rotation=a,this.editor.setCursor(s)}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0}),this.editor.snaps.clearIndicators()}_createSnapshot(){const{editor:n}=this,r=n.getSelectedShapeIds(),o=n.getSelectionRotation(),{inputs:{originPagePoint:a}}=n,s=n.getSelectionRotatedPageBounds();if(!s)throw Error("Resizing but nothing is selected");const i=R.RotWith(s.getHandlePoint(this.info.handle),s.point,o),l=R.Sub(a,i),c=new Map,d=[],u=h=>{const y=n.getShape(h);if(!y)return!1;const v=n.getShapeUtil(y);if(v.canResize(y)){const x=n.getShapePageTransform(y);c.set(y.id,{shape:y,bounds:n.getShapeGeometry(y).bounds,pageTransform:x,pageRotation:De.Decompose(x).rotation,isAspectRatioLocked:v.isAspectRatioLocked(y)})}if(n.isShapeOfType(y,"frame")&&d.push({id:y.id,children:Dt(n.getSortedChildIdsForParent(y).map(x=>n.getShape(x)))}),!v.canResizeChildren(y))return!1};r.forEach(h=>{u(h)!==!1&&n.visitDescendants(h,u)});const m=![...c.values()].some(h=>!OY(h.pageRotation,o)||h.isAspectRatioLocked);return{shapeSnapshots:c,selectionBounds:s,cursorHandleOffset:l,selectionRotation:o,selectedShapeIds:r,canShapesDeform:m,initialSelectionPageBounds:this.editor.getSelectionPageBounds(),frames:d}}}L(Ble,"id","resizing");const pO=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function m$(t,e){e=e%mr;const n=Math.round(e/(Un/4)),r=pO.indexOf(t);return pO[(r+n)%pO.length]}const h$=Math.PI/180;class Fle extends ht{constructor(){super(...arguments);L(this,"snapshot",{});L(this,"info",{});L(this,"markId","")}onEnter(n){this.info=n,typeof n.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.markId=this.editor.markHistoryStoppingPoint("rotate start");const r=OX({editor:this.editor,ids:this.editor.getSelectedShapeIds()});if(!r)return this.parent.transition("idle",this.info);this.snapshot=r;const o=this._getRotationFromPointerPosition({snapToNearestDegree:!1});E1({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.setCursor({type:dg[this.info.handle],rotation:o+this.snapshot.initialShapesRotation})}onExit(){this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0),this.snapshot={}}onPointerMove(){this.update()}onKeyDown(){this.update()}onKeyUp(){this.update()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}update(){const n=this._getRotationFromPointerPosition({snapToNearestDegree:!1});E1({editor:this.editor,delta:n,snapshot:this.snapshot,stage:"update"}),this.editor.setCursor({type:dg[this.info.handle],rotation:n+this.snapshot.initialShapesRotation})}cancel(){const{shapeSnapshots:n}=this.snapshot;n.forEach(({shape:o})=>{var s;const a=this.editor.getShape(o.id);if(a){const i=this.editor.getShapeUtil(o);(s=i.onRotateCancel)==null||s.call(i,o,a)}}),this.editor.bailToMark(this.markId);const{onInteractionEnd:r}=this.info;if(r){typeof r=="string"?this.editor.setCurrentTool(r,this.info):r();return}this.parent.transition("idle",this.info)}complete(){E1({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),er(this.editor,this.snapshot.shapeSnapshots.map(r=>r.shape.id));const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n,this.info):n();return}this.parent.transition("idle",this.info)}_getRotationFromPointerPosition({snapToNearestDegree:n}){const{inputs:{shiftKey:r,currentPagePoint:o}}=this.editor,{initialCursorAngle:a,initialShapesRotation:s,initialPageCenter:i}=this.snapshot,l=i.angle(o)-a;let c=s+l;if(r)c=ME(c,24);else if(n&&(c=Math.round(c/h$)*h$,this.editor.getInstanceState().isCoarsePointer)){const d=ME(c,4),u=v1(c,d);Math.abs(u)<d2e(5)&&(c=d)}return c-s}}L(Fle,"id","rotating");class zle extends ht{constructor(){super(...arguments);L(this,"hits",new Set);L(this,"size",0);L(this,"scribbleId","id");L(this,"initialSelectedShapeIds",new Set);L(this,"newlySelectedShapeIds",new Set)}onEnter(){this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.getSelectedShapeIds():[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear();const n=this.editor.scribbles.addScribble({color:"selection-stroke",opacity:.32,size:12});this.scribbleId=n.id,this.updateScribbleSelection(!0),this.editor.updateInstanceState({brush:null})}onExit(){this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.updateScribbleSelection(!0)}onPointerUp(){this.complete()}onKeyDown(){this.updateScribbleSelection(!1)}onKeyUp(){this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing")}onCancel(){this.cancel()}onComplete(){this.complete()}pushPointToScribble(){const{x:n,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,n,r)}updateScribbleSelection(n){const{editor:r}=this,o=this.editor.getCurrentPageRenderingShapesSorted(),{inputs:{shiftKey:a,originPagePoint:s,previousPagePoint:i,currentPagePoint:l}}=this.editor,{newlySelectedShapeIds:c,initialSelectedShapeIds:d}=this;n&&this.pushPointToScribble();const u=o;let m,h,y,v;const x=0;for(let C=0,_=u.length;C<_;C++){if(m=u[C],r.isShapeOfType(m,"group")||c.has(m.id)||r.isShapeOrAncestorLocked(m)||(h=r.getShapeGeometry(m),r.isShapeOfType(m,"frame")&&h.bounds.containsPoint(r.getPointInShapeSpace(m,s))))continue;const I=r.getShapePageTransform(m);if(!h||!I)continue;const P=I.clone().invert();y=P.applyToPoint(i),v=P.applyToPoint(l);const{bounds:M}=h;if(!(M.minX-x>Math.max(y.x,v.x)||M.minY-x>Math.max(y.y,v.y)||M.maxX+x<Math.min(y.x,v.x)||M.maxY+x<Math.min(y.y,v.y))&&h.hitTestLineSegment(y,v,x)){const D=this.editor.getOutermostSelectableShape(m),F=this.editor.getShapeMask(D.id);if(F&&tX(i,l,F)!==null&&!Ss(l,F))continue;c.add(D.id)}}const S=r.getSelectedShapeIds(),T=new Set(a?[...c,...d]:[...c]);(S.length!==T.size||S.some(C=>!T.has(C)))&&this.editor.setSelectedShapes(Array.from(T))}complete(){this.updateScribbleSelection(!0),this.parent.transition("idle")}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds]),this.parent.transition("idle")}}L(zle,"id","scribble_brushing");var kQe=Object.create,Ule=Object.defineProperty,IQe=Object.getOwnPropertyDescriptor,PQe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),qle=t=>{throw TypeError(t)},Hle=(t,e,n)=>e in t?Ule(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OQe=t=>[,,,kQe(null)],$le=["class","method","getter","setter","accessor","field","value","get","set"],Vle=t=>t!==void 0&&typeof t!="function"?qle("Function expected"):t,MQe=(t,e,n,r,o)=>({kind:$le[t],name:e,metadata:r,addInitializer:a=>n._?qle("Already initialized"):o.push(Vle(a||null))}),RQe=(t,e)=>Hle(e,PQe("metadata"),t[3]),DQe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},NQe=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=$le[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,IQe(o,n)),S=r.length-1;S>=0;S--)l=MQe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,Vle(s)&&(x[y]=s);return x&&Ule(o,n,x),o},Pu=(t,e,n)=>Hle(t,typeof e!="symbol"?e+"":e,n),Gle,eA;const LQe=320,jQe=60;Gle=[oi];class kj{constructor(e){this.editor=e,DQe(eA,5,this),Pu(this,"shapesToActuallyMove",[]),Pu(this,"draggedOverShapeIds",new Set),Pu(this,"initialGroupIds",new Map),Pu(this,"initialParentIds",new Map),Pu(this,"initialIndices",new Map),Pu(this,"initialDraggingOverShape"),Pu(this,"prevDraggingOverShape"),Pu(this,"prevPagePoint",new R),Pu(this,"intervalTimerId",-1),e.disposables.add(this.dispose)}startDraggingShapes(e,n,r){const{editor:o}=this;if(this.intervalTimerId!==-1)return;const a=new Set(e),s=new Set;for(const c of a){const d=o.getShapeParent(c);d&&o.isShapeOfType(d,"group")&&(s.has(d)||s.add(d))}for(const c of s){const d=Dt(o.getSortedChildIdsForParent(c).map(u=>o.getShape(u)));a.add(c);for(const u of d)a.delete(u)}this.initialParentIds.clear();for(const c of a){const d=o.getShapeParent(c);d&&this.initialParentIds.set(c.id,d.id),this.initialIndices.set(c.id,c.index);const u=o.findShapeAncestor(c,m=>o.isShapeOfType(m,"group"));u&&this.initialGroupIds.set(c.id,u.id)}const i=o.getCurrentPageShapesSorted();this.shapesToActuallyMove=Array.from(a).filter(c=>!c.isLocked).sort((c,d)=>i.indexOf(c)-i.indexOf(d)),this.initialDraggingOverShape=o.getDraggingOverShape(n,this.shapesToActuallyMove),this.prevDraggingOverShape=this.initialDraggingOverShape,this.updateDraggingShapes(n,r);let l=0;this.intervalTimerId=this.editor.timers.setInterval(()=>{l++,!(l%3&&this.editor.inputs.pointerVelocity.len()>.5)&&this.updateDraggingShapes(o.inputs.currentPagePoint,r)},e.length>10?LQe:jQe)}dropShapes(e){var o,a;const{editor:n}=this;this.updateDraggingShapes(n.inputs.currentPagePoint);const r=n.getDraggingOverShape(n.inputs.currentPagePoint,e);if(r){const s=n.getShapeUtil(r);(a=s.onDropShapesOver)==null||a.call(s,r,e,{initialDraggingOverShapeId:((o=this.initialDraggingOverShape)==null?void 0:o.id)??null,initialParentIds:this.initialParentIds,initialIndices:this.initialIndices})}this.dispose()}clear(){clearInterval(this.intervalTimerId),this.intervalTimerId=-1,this.initialParentIds.clear(),this.initialIndices.clear(),this.shapesToActuallyMove=[],this.initialDraggingOverShape=void 0,this.prevDraggingOverShape=void 0,this.editor.setHintingShapes([])}dispose(){this.clear()}updateDraggingShapes(e,n){const{editor:r}=this,o=Dt(this.shapesToActuallyMove.map(i=>r.getShape(i)));if(!o.length)return;const a=r.getDraggingOverShape(e,this.shapesToActuallyMove),s=!this.prevPagePoint.equals(r.inputs.currentPagePoint);this.prevPagePoint.setTo(r.inputs.currentPagePoint),r.run(()=>{var i,l,c,d,u,m,h,y;if(((i=this.prevDraggingOverShape)==null?void 0:i.id)===(a==null?void 0:a.id)){if(s&&a&&bs(a.id)&&!r.inputs.previousPagePoint.equals(r.inputs.currentPagePoint)){const v=r.getShapeUtil(a);(c=v.onDragShapesOver)==null||c.call(v,a,o,{initialDraggingOverShapeId:((l=this.initialDraggingOverShape)==null?void 0:l.id)??null,initialParentIds:this.initialParentIds,initialIndices:this.initialIndices})}return}if(this.prevDraggingOverShape){const v=r.getShapeUtil(this.prevDraggingOverShape);(u=v.onDragShapesOut)==null||u.call(v,this.editor.getShape(this.prevDraggingOverShape),o,{nextDraggingOverShapeId:(a==null?void 0:a.id)??null,initialDraggingOverShapeId:((d=this.initialDraggingOverShape)==null?void 0:d.id)??null,initialParentIds:this.initialParentIds,initialIndices:this.initialIndices})}if(a){const v=r.getShapeUtil(a);(y=v.onDragShapesIn)==null||y.call(v,a,o,{initialDraggingOverShapeId:((m=this.initialDraggingOverShape)==null?void 0:m.id)??null,prevDraggingOverShapeId:((h=this.prevDraggingOverShape)==null?void 0:h.id)??null,initialParentIds:this.initialParentIds,initialIndices:this.initialIndices}),r.setHintingShapes([a.id])}else this.prevDraggingOverShape&&r.setHintingShapes([]);n==null||n()}),this.prevDraggingOverShape=a}}eA=OQe();NQe(eA,1,"dispose",Gle,kj);RQe(eA,kj);var BQe=Object.create,Kle=Object.defineProperty,FQe=Object.getOwnPropertyDescriptor,Wle=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Yle=t=>{throw TypeError(t)},Xle=(t,e,n)=>e in t?Kle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zQe=t=>[,,,BQe((t==null?void 0:t[Wle("metadata")])??null)],Jle=["class","method","getter","setter","accessor","field","value","get","set"],Qle=t=>t!==void 0&&typeof t!="function"?Yle("Function expected"):t,UQe=(t,e,n,r,o)=>({kind:Jle[t],name:e,metadata:r,addInitializer:a=>n._?Yle("Already initialized"):o.push(Qle(a||null))}),qQe=(t,e)=>Xle(e,Wle("metadata"),t[3]),HQe=(t,e,n,r)=>{for(var o=0,a=t[e>>1],s=a&&a.length;o<s;o++)a[o].call(n);return r},$Qe=(t,e,n,r,o,a)=>{for(var s,i,l,c,d=e&7,u=!1,m=!1,h=2,y=Jle[d+5],v=t[h]||(t[h]=[]),x=(o=o.prototype,FQe(o,n)),S=r.length-1;S>=0;S--)l=UQe(d,n,i={},t[3],v),l.static=u,l.private=m,c=l.access={has:T=>n in T},c.get=T=>T[n],s=(0,r[S])(x[y],l),i._=1,Qle(s)&&(x[y]=s);return x&&Kle(o,n,x),o},Hd=(t,e,n)=>Xle(t,typeof e!="symbol"?e+"":e,n),Zle,JR,tA;class nA extends(JR=ht,Zle=[oi],JR){constructor(){super(...arguments),HQe(tA,5,this),Hd(this,"info",{}),Hd(this,"selectionSnapshot",{}),Hd(this,"snapshot",{}),Hd(this,"markId",""),Hd(this,"isCloning",!1),Hd(this,"isCreating",!1),Hd(this,"dragAndDropManager",new kj(this.editor))}onCreate(e){}onEnter(e){var a;const{isCreating:n=!1,creatingMarkId:r,onCreate:o=()=>{}}=e;if(!((a=this.editor.getSelectedShapeIds())!=null&&a.length)){this.parent.transition("idle");return}if(this.info=e,typeof e.onInteractionEnd=="string"&&this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.isCreating=n,this.markId="",n)if(r)this.markId=r;else{const s=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);s&&(this.markId=s)}else this.markId=this.editor.markHistoryStoppingPoint("translating");this.onCreate=o,this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=g$(this.editor),!(!this.isCreating&&this.editor.inputs.altKey&&(this.startCloning(),this.isCloning))&&(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes())}onExit(){this.parent.setCurrentToolIdMask(void 0),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0}),this.dragAndDropManager.clear()}onTick({elapsed:e}){const{editor:n}=this;n.edgeScrollManager.updateEdgeScrolling(e)}onPointerMove(){this.updateShapes()}onKeyDown(){this.editor.inputs.altKey&&!this.isCloning&&(this.startCloning(),this.isCloning)||this.updateShapes()}onKeyUp(){if(!this.editor.inputs.altKey&&this.isCloning){this.stopCloning();return}this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}startCloning(){if(this.isCreating)return;const e=Array.from(this.editor.getSelectedShapeIds());this.editor.canCreateShapes(e)&&(this.isCloning=!0,this.reset(),this.markId=this.editor.markHistoryStoppingPoint("translate cloning"),this.editor.duplicateShapes(Array.from(this.editor.getSelectedShapeIds())),this.snapshot=g$(this.editor),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.editor.markHistoryStoppingPoint("translate"),this.updateShapes()}reset(){this.editor.bailToMark(this.markId)}complete(){var n;this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),er(this.editor,this.snapshot.movingShapes.map(r=>r.id));const{onInteractionEnd:e}=this.info;if(e)if(typeof e=="string"){if(this.editor.getInstanceState().isToolLocked){this.editor.setCurrentTool(e);return}}else{e();return}this.isCreating?(n=this.onCreate)==null||n.call(this,this.editor.getOnlySelectedShape()):this.parent.transition("idle")}cancel(){const{movingShapes:e}=this.snapshot;e.forEach(r=>{var a;const o=this.editor.getShape(r.id);if(o){const s=this.editor.getShapeUtil(r);(a=s.onTranslateCancel)==null||a.call(s,r,o)}}),this.reset();const{onInteractionEnd:n}=this.info;if(n){typeof n=="string"?this.editor.setCurrentTool(n):n();return}this.parent.transition("idle",this.info)}handleStart(){const{movingShapes:e}=this.snapshot,n=[];e.forEach(r=>{var s;const o=this.editor.getShapeUtil(r),a=(s=o.onTranslateStart)==null?void 0:s.call(o,r);a&&n.push(a)}),n.length>0&&this.editor.updateShapes(n),this.dragAndDropManager.startDraggingShapes(Dt(this.snapshot.movingShapes.map(r=>this.editor.getShape(r.id))),this.editor.inputs.originPagePoint,this.updateParentTransforms),this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes:e}=this.snapshot;if(this.isCloning&&e.length>0){const r=R.Average(e.map(a=>this.editor.getShapePageTransform(a.id).point())),o=R.Sub(r,this.selectionSnapshot.averagePagePoint);R.IsNaN(o)||this.editor.updateInstanceState({duplicateProps:{shapeIds:e.map(a=>a.id),offset:{x:o.x,y:o.y}}})}const n=[];e.forEach(r=>{var i;const o=this.editor.getShape(r.id),a=this.editor.getShapeUtil(r),s=(i=a.onTranslateEnd)==null?void 0:i.call(a,r,o);s&&n.push(s)}),n.length>0&&this.editor.updateShapes(n)}updateShapes(){const{snapshot:e}=this;this.dragAndDropManager.startDraggingShapes(e.movingShapes,this.editor.inputs.originPagePoint,this.updateParentTransforms),VQe({editor:this.editor,snapshot:e});const{movingShapes:n}=e,r=[];n.forEach(o=>{var l;const a=this.editor.getShape(o.id),s=this.editor.getShapeUtil(o),i=(l=s.onTranslate)==null?void 0:l.call(s,o,a);i&&r.push(i)}),r.length>0&&this.editor.updateShapes(r)}updateParentTransforms(){const{editor:e,snapshot:{shapeSnapshots:n}}=this;n.forEach(r=>{const o=e.getShape(r.shape.id);if(!o)return null;const a=Ea(o.parentId)?null:De.Inverse(e.getShapePageTransform(o.parentId));r.parentTransform=a})}}tA=zQe(JR);$Qe(tA,1,"updateParentTransforms",Zle,nA);qQe(tA,nA);Hd(nA,"id","translating");function g$(t){var u;const e=[],n=[],r=t.getSelectedShapeIds(),o=Dt(r.map(m=>{const h=t.getShape(m);if(!h)return null;e.push(h);const y=t.getShapePageTransform(m),v=y.point(),x=y.rotation();n.push(v);const S=Cs.isId(h.parentId)?null:De.Inverse(t.getShapePageTransform(h.parentId));return{shape:h,pagePoint:v,pageRotation:x,parentTransform:S}})),a=t.getOnlySelectedShape();let s=[];if(a)s=t.snaps.shapeBounds.getSnapPoints(a.id);else{const m=t.getSelectionPageBounds();m&&(s=m.cornersAndCenter.map((h,y)=>({id:"selection:"+y,x:h.x,y:h.y})))}let i,l;const{originPagePoint:c}=t.inputs,d=o.filter(m=>t.isShapeOfType(m.shape,"note")&&t.isPointInShape(m.shape,c));if(d.length!==0)if(d.length===1)l=d[0];else{const m=t.getCurrentPageShapesSorted();l=(u=d.map(h=>({snapshot:h,index:m.findIndex(y=>y.id===h.shape.id)})).sort((h,y)=>y.index-h.index)[0])==null?void 0:u.snapshot}return l&&(i=Wie(t,l.pageRotation,l.shape.props.scale,l.shape.props.growY??0)),{averagePagePoint:R.Average(n),movingShapes:e,shapeSnapshots:o,initialPageBounds:t.getSelectionPageBounds(),initialSnapPoints:s,noteAdjacentPositions:i,noteSnapshot:l}}function VQe({editor:t,snapshot:e}){const{inputs:n}=t,{noteSnapshot:r,noteAdjacentPositions:o,initialPageBounds:a,initialSnapPoints:s,shapeSnapshots:i,averagePagePoint:l}=e,c=t.getInstanceState().isGridMode,d=t.getDocumentSettings().gridSize,u=R.Sub(n.currentPagePoint,n.originPagePoint),m=t.inputs.shiftKey?Math.abs(u.x)<Math.abs(u.y)?"x":"y":null;m==="x"?u.x=0:m==="y"&&(u.y=0),t.snaps.clearIndicators();const h=t.user.getIsSnapMode()?!n.ctrlKey:n.ctrlKey;let y=!1;if(h&&t.inputs.pointerVelocity.len()<.5){const{nudge:T}=t.snaps.shapeBounds.snapTranslateShapes({dragDelta:u,initialSelectionPageBounds:a,lockedAxis:m,initialSelectionSnapPoints:s});u.add(T)}else if(r&&o){const{scale:T}=r.shape.props,C=r.pagePoint.clone().add(u).add(JC.clone().mul(T).rot(r.pageRotation));let _=Gie/t.getZoomLevel(),I=new R(0,0);for(const P of o){const M=R.Sub(C,P),D=M.len();D<_&&(y=!0,_=D,I=M)}u.sub(I)}const v=R.Add(l,u),x=t.snaps.getIndicators();c&&!n.ctrlKey&&!y&&x.length===0&&v.snapToGrid(d);const S=R.Sub(v,l);t.updateShapes(Dt(i.map(({shape:T,pagePoint:C,parentTransform:_})=>{const I=R.Add(C,S),P=_?De.applyToPoint(_,I):I;return{id:T.id,type:T.type,x:P.x,y:P.y}})))}class Z1 extends ht{constructor(){super(...arguments);L(this,"reactor")}static children(){return[XR,Cj,wQe,Rle,jle,nA,wle,zle,_j,Lle,Cle,Ole,Ble,Fle,Nle,Mle,Dle,Ile]}cleanUpDuplicateProps(){const n=this.editor.getSelectedShapeIds(),r=this.editor.getInstanceState();if(!r.duplicateProps)return;const o=new Set(r.duplicateProps.shapeIds);n.length===o.size&&n.every(a=>o.has(a))||this.editor.updateInstanceState({duplicateProps:null})}onEnter(){this.reactor=si("clean duplicate props",()=>{try{this.cleanUpDuplicateProps()}catch(n){console.error(n)}})}onExit(){var n;(n=this.reactor)==null||n.call(this),this.editor.getCurrentPageState().editingShapeId&&this.editor.setEditingShape(null)}}L(Z1,"id","select"),L(Z1,"initial","idle"),L(Z1,"isLockable",!1);class ece extends ht{constructor(){super(...arguments);L(this,"info",{})}onEnter(n){this.info=n}onPointerDown(){this.parent.transition("pointing",this.info)}}L(ece,"id","idle");class tce extends ht{constructor(){super(...arguments);L(this,"info",{})}onEnter(n){this.info=n}onPointerUp(){this.complete()}onPointerMove(){this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)}onCancel(){this.cancel()}complete(){const{currentScreenPoint:n}=this.editor.inputs;this.editor.inputs.altKey?this.editor.zoomOut(n,{animation:{duration:220}}):this.editor.zoomIn(n,{animation:{duration:220}}),this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}L(tce,"id","pointing");class nce extends ht{constructor(){super(...arguments);L(this,"info",{});L(this,"zoomBrush",new Be)}onEnter(n){this.info=n,this.update()}onExit(){this.editor.updateInstanceState({zoomBrush:null})}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.cancel()}update(){const{inputs:{originPagePoint:n,currentPagePoint:r}}=this.editor;this.zoomBrush.setTo(Be.FromPoints([n,r])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush:n}=this,r=8/this.editor.getZoomLevel();if(n.width<r&&n.height<r){const o=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(o,{animation:{duration:220}}):this.editor.zoomIn(o,{animation:{duration:220}})}else{const o=this.editor.inputs.altKey?this.editor.getZoomLevel()/2:void 0;this.editor.zoomToBounds(n,{targetZoom:o,animation:{duration:220}})}this.parent.transition("idle",this.info)}}L(nce,"id","zoom_brushing");class eE extends ht{constructor(){super(...arguments);L(this,"info",{})}static children(){return[ece,nce,tce]}onEnter(n){this.info=n,this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.updateCursor()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}}),this.parent.setCurrentToolIdMask(void 0)}onKeyDown(){this.updateCursor()}onKeyUp(n){this.updateCursor(),n.code==="KeyZ"&&this.complete()}onInterrupt(){this.complete()}complete(){this.info.onInteractionEnd&&this.info.onInteractionEnd!=="select"?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select")}updateCursor(){this.editor.inputs.altKey?this.editor.setCursor({type:"zoom-out",rotation:0}):this.editor.setCursor({type:"zoom-in",rotation:0})}}L(eE,"id","zoom"),L(eE,"initial","idle"),L(eE,"isLockable",!1);const GQe=[X1,J1,Q1,eE,Z1],KQe=bt.forwardRef(function({isEditing:e,text:n,handleFocus:r,handleChange:o,handleKeyDown:a,handlePaste:s,handleBlur:i,handleInputPointerDown:l,handleDoubleClick:c},d){const u=ue(),m=h=>{o({plaintext:h.target.value})};return g.jsx("textarea",{ref:d,className:"tl-text tl-text-input",name:"text",tabIndex:-1,disabled:!e,readOnly:!e,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoSave:"off",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",defaultValue:n,onFocus:r,onChange:m,onKeyDown:h=>a(h.nativeEvent),onBlur:i,onTouchEnd:u.markEventAsHandled,onContextMenu:e?h=>h.stopPropagation():void 0,onPointerDown:l,onPaste:s,onDoubleClick:c,onDragStart:Nt})});bt.memo(function({shapeId:e,type:n,text:r,labelColor:o,font:a,fontSize:s,lineHeight:i,align:l,verticalAlign:c,wrap:d,isSelected:u,padding:m=0,onKeyDown:h,classNamePrefix:y,style:v,textWidth:x,textHeight:S}){const{rInput:T,isEmpty:C,isEditing:_,isReadyForEditing:I,...P}=HXe(e,n,r),M=VT.normalizeTextForDom(r||""),D=M.length>0,F=Xie(l);if(!_&&!D)return null;const B=y||"tl-text";return g.jsx("div",{className:`${B}-label tl-text-wrapper tl-plain-text-wrapper`,"aria-hidden":!_,"data-font":a,"data-align":l,"data-hastext":!C,"data-isediting":_,"data-is-ready-for-editing":I,"data-textwrap":!!d,"data-isselected":u,style:{justifyContent:l==="middle"||F?"center":l,alignItems:c==="middle"?"center":c,padding:m,...v},children:g.jsxs("div",{className:`${B}-label__inner tl-text-content__wrapper`,style:{fontSize:s,lineHeight:i.toString(),minHeight:Math.floor(s*i)+"px",minWidth:Math.ceil(x||0),color:o,width:x?Math.ceil(x):void 0,height:S?Math.ceil(S):void 0},children:[g.jsx("div",{className:`${B} tl-text tl-text-content`,dir:"auto",children:M.split(`
`).map((V,z)=>g.jsx("div",{dir:"auto",children:V},z))}),(I||u)&&g.jsx(KQe,{ref:T,text:r,isEditing:_,shapeId:e,...P,handleKeyDown:h??P.handleKeyDown})]})})});let QR={fonts:{tldraw_mono:`${Bo()}/fonts/IBMPlexMono-Medium.woff2`,tldraw_mono_italic:`${Bo()}/fonts/IBMPlexMono-MediumItalic.woff2`,tldraw_mono_bold:`${Bo()}/fonts/IBMPlexMono-Bold.woff2`,tldraw_mono_italic_bold:`${Bo()}/fonts/IBMPlexMono-BoldItalic.woff2`,tldraw_serif:`${Bo()}/fonts/IBMPlexSerif-Medium.woff2`,tldraw_serif_italic:`${Bo()}/fonts/IBMPlexSerif-MediumItalic.woff2`,tldraw_serif_bold:`${Bo()}/fonts/IBMPlexSerif-Bold.woff2`,tldraw_serif_italic_bold:`${Bo()}/fonts/IBMPlexSerif-BoldItalic.woff2`,tldraw_sans:`${Bo()}/fonts/IBMPlexSans-Medium.woff2`,tldraw_sans_italic:`${Bo()}/fonts/IBMPlexSans-MediumItalic.woff2`,tldraw_sans_bold:`${Bo()}/fonts/IBMPlexSans-Bold.woff2`,tldraw_sans_italic_bold:`${Bo()}/fonts/IBMPlexSans-BoldItalic.woff2`,tldraw_draw:`${Bo()}/fonts/Shantell_Sans-Informal_Regular.woff2`,tldraw_draw_italic:`${Bo()}/fonts/Shantell_Sans-Informal_Regular_Italic.woff2`,tldraw_draw_bold:`${Bo()}/fonts/Shantell_Sans-Informal_Bold.woff2`,tldraw_draw_italic_bold:`${Bo()}/fonts/Shantell_Sans-Informal_Bold_Italic.woff2`}};function rce(t){return w.useMemo(()=>t?{fonts:{...QR.fonts,...t==null?void 0:t.fonts}}:QR,[t])}const WQe=["align-bottom","align-center-horizontal","align-center-vertical","align-left","align-right","align-top","alt","arrow-arc","arrow-cycle","arrow-elbow","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","blob","bold","bookmark","bring-forward","bring-to-front","broken","bulletList","check-circle","check","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","color","comment","corners","crop","cross-2","cross-circle","dash-dashed","dash-dotted","dash-draw","dash-solid","disconnected","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","download","drag-handle-dots","duplicate","edit","external-link","fill-fill","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-heart","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","heading","help-circle","highlight","horizontal-align-end","horizontal-align-middle","horizontal-align-start","info-circle","italic","leading","link","list","lock","manual","menu","minus","mixed","pack","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","send-backward","send-to-back","share-1","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","status-offline","stretch-horizontal","stretch-vertical","strike","text-align-center","text-align-left","text-align-right","toggle-off","toggle-on","tool-arrow","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-screenshot","tool-text","trash","twitter","underline","undo","ungroup","unlock","vertical-align-end","vertical-align-middle","vertical-align-start","warning-triangle","zoom-in","zoom-out"];let Zb={...QR,icons:Object.fromEntries(WQe.map(t=>[t,`${Bo()}/icons/icon/0_merged.svg#${t}`])),translations:Object.fromEntries(f0.map(t=>[t.locale,`${Bo()}/translations/${t.locale}.json`])),embedIcons:Object.fromEntries(CL.map(t=>[t.type,`${Bo()}/embed-icons/${t.type}.png`]))};function oce(t){return w.useMemo(()=>t?{fonts:Object.assign({...Zb.fonts},{...t==null?void 0:t.fonts}),icons:Object.assign({...Zb.icons},{...t==null?void 0:t.icons}),embedIcons:Object.assign({...Zb.embedIcons},{...t==null?void 0:t.embedIcons}),translations:Object.assign({...Zb.translations},{...t==null?void 0:t.translations})}:Zb,[t])}const YQe=Co(function({overrides:e,components:n,assetUrls:r,onUiEvent:o,forceMobile:a,mediaMimeTypes:s,children:i}){const l=lo();return g.jsx(sae.Provider,{value:s,children:g.jsx(kUe,{children:g.jsx(bte,{assetUrls:oce(r),children:g.jsx(yte,{overrides:lae(e),locale:(l==null?void 0:l.user.getLocale())??Xs.locale,children:g.jsx(xUe,{onEvent:o,children:g.jsx(NUe,{children:g.jsx(DUe,{context:"tla",children:g.jsx(Ije,{children:g.jsx(bUe,{forceMobile:a,children:g.jsx(iVe,{overrides:n,children:g.jsx(XQe,{overrides:e,children:i})})})})})})})})})})})});function XQe({overrides:t,children:e}){const n=l8e(t);return g.jsx(cVe,{overrides:n.actions,children:g.jsx(c8e,{overrides:n.tools,children:e})})}function JQe(){const t=ue(),{addToast:e}=nd();w.useEffect(()=>{function n({name:r,count:o}){e({title:"Maximum shapes reached",description:`You've reached the maximum number of shapes allowed on ${r} (${o}). Please delete some shapes or move to a different page to continue.`,severity:"warning"})}return t.addListener("max-shapes",n),()=>{t.removeListener("max-shapes",n)}},[t,e])}const QQe=bt.memo(function({renderDebugMenuItems:e,children:n,hideUi:r,components:o,...a}){return g.jsx(YQe,{...a,components:o,children:g.jsx(ZQe,{hideUi:r,renderDebugMenuItems:e,children:n})})}),ZQe=bt.memo(function({children:e,hideUi:n,...r}){return g.jsxs(g.Fragment,{children:[e,n?null:g.jsx(eZe,{...r})]})}),eZe=bt.memo(function(){const e=ue(),n=it(),r=fa(),o=Qi(),a=ce("focus",()=>e.getInstanceState().isFocusMode,[e]),s=ce("debug",()=>e.getInstanceState().isDebugMode,[e]),{SharePanel:i,TopPanel:l,MenuPanel:c,StylePanel:d,Toolbar:u,HelpMenu:m,NavigationPanel:h,HelperButtons:y,DebugPanel:v,Toasts:x,Dialogs:S,A11y:T}=ru();V$e(),QUe(),JQe();const C=w.useRef(!1),_=w.useRef(-1),[I,P]=w.useState(!1);oN("update hide toolbar while delayed",()=>{if(!(Nn.isIos||Nn.isAndroid))return;if(e.getEditingShapeId()===null){C.current&&(C.current=!1,clearTimeout(_.current),Nn.isAndroid?_.current=e.timers.setTimeout(()=>{P(!1)},150):P(!1));return}C.current||(C.current=!0,clearTimeout(_.current),P(!0))},[]);const{"toggle-focus-mode":M}=ou(),{breakpointsAbove:D,breakpointsBelow:F}=w.useMemo(()=>{const B=[],V=[];for(let z=0;z<O1.length;z++)z<=r?B.push(z):V.push(z);return{breakpointsAbove:B,breakpointsBelow:V}},[r]);return g.jsxs("div",{className:pt("tlui-layout",{"tlui-layout__mobile":r<Hr.TABLET_SM}),"data-iseditinganything":I,"data-breakpoint":r,"data-breakpoints-above":D.join(" "),"data-breakpoints-below":F.join(" "),children:[g.jsx(Dje,{}),a?g.jsx("div",{className:"tlui-layout__top",children:g.jsx(nn,{type:"icon",className:"tlui-focus-button",title:n("focus-mode.toggle-focus-mode"),onClick:()=>M.onSelect("menu"),children:g.jsx(kt,{icon:"dot"})})}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"tlui-layout__top",children:[g.jsxs("div",{className:"tlui-layout__top__left",children:[c&&g.jsx(c,{}),y&&g.jsx(y,{})]}),g.jsx("div",{className:"tlui-layout__top__center",children:l&&g.jsx(l,{})}),g.jsxs("div",{className:"tlui-layout__top__right",children:[i&&g.jsx(i,{}),d&&r>=Hr.TABLET_SM&&!o&&g.jsx(d,{})]})]}),g.jsxs("div",{className:"tlui-layout__bottom",children:[g.jsxs("div",{className:"tlui-layout__bottom__main",children:[h&&g.jsx(h,{}),u&&g.jsx(u,{}),m&&g.jsx(m,{})]}),s&&v&&g.jsx(v,{}),T&&g.jsx(T,{})]})]}),x&&g.jsx(x,{}),S&&g.jsx(S,{})]})});function b$(){const{RichTextToolbar:t,ImageToolbar:e,VideoToolbar:n,CursorChatBubble:r,FollowingIndicator:o}=ru();return g.jsxs(g.Fragment,{children:[t&&g.jsx(t,{}),e&&g.jsx(e,{}),n&&g.jsx(n,{}),o&&g.jsx(o,{}),r&&g.jsx(r,{})]})}const tZe=()=>{const{Spinner:t}=cr();return g.jsx(bZ,{children:t?g.jsx(t,{}):null})},nZe=[...GQe,...zXe];function rZe(t){var j;const{children:e,maxImageDimension:n,maxAssetSize:r,acceptedImageMimeTypes:o,acceptedVideoMimeTypes:a,onMount:s,components:i={},shapeUtils:l=[],bindingUtils:c=[],tools:d=[],embeds:u,textOptions:m,...h}=t,y=kg(i),v=i==null?void 0:i.InFrontOfTheCanvas,x=w.useMemo(()=>h.hideUi?v??null:v?()=>g.jsxs(g.Fragment,{children:[g.jsx(b$,{}),g.jsx(v,{})]}):b$,[h.hideUi,v]),S=w.useMemo(()=>({Scribble:xH,ShapeIndicators:QVe,CollaboratorScribble:xH,SelectionForeground:YVe,Handles:FVe,Overlays:HVe,Spinner:Zoe,LoadingScreen:tZe,...y,InFrontOfTheCanvas:x}),[y,x]),T=Yd(l),C=w.useMemo(()=>Ny("type",T,xle),[T]),_=Yd(c),I=w.useMemo(()=>Ny("type",_,Rse),[_]),P=Yd(d),M=w.useMemo(()=>Ny("id",P,nZe),[P]),D=Yd(o??Tg),F=Yd(a??fw),B=w.useMemo(()=>({addFontsFromNode:Bie,...m,tipTapConfig:{extensions:Uv,...m==null?void 0:m.tipTapConfig}}),[m]),V=w.useMemo(()=>[...D,...F],[D,F]),z=rce(h.assetUrls);return C.find(q=>q.type==="embed")&&u&&WT.setEmbedDefinitions(u),g.jsx(bte,{assetUrls:oce(h.assetUrls),children:g.jsx(yte,{overrides:lae(h.overrides),locale:((j=h.user)==null?void 0:j.userPreferences.get().locale)??Xs.locale,children:g.jsx(NOe,{initialState:"select",...h,components:S,shapeUtils:C,bindingUtils:I,tools:M,textOptions:B,assetUrls:z,children:g.jsxs(QQe,{...h,components:S,mediaMimeTypes:V,children:[g.jsx(oZe,{maxImageDimension:n,maxAssetSize:r,acceptedImageMimeTypes:D,acceptedVideoMimeTypes:F,onMount:s}),e]})})})})}function oZe({maxImageDimension:t,maxAssetSize:e,acceptedImageMimeTypes:n,acceptedVideoMimeTypes:r,onMount:o}){const a=ue(),s=nd(),i=it(),l=$r();yZ(()=>{const u=[];return u.push(gQe(a)),a.fonts.requestFonts(XYe),a.once("edit",()=>l("edit",{source:"unknown"})),dXe(a,{maxImageDimension:t,maxAssetSize:e,acceptedImageMimeTypes:n,acceptedVideoMimeTypes:r,toasts:s,msg:i}),u.push(a.store.props.onMount(a)),u.push(o==null?void 0:o(a)),()=>{u.forEach(m=>m==null?void 0:m())}});const{Canvas:c}=cr(),{ContextMenu:d}=ru();return d?g.jsx(d,{}):c?g.jsx(c,{}):null}const aZe={tipTapConfig:{extensions:Uv},addFontsFromNode:Bie};w.memo(function(e){const[n,r]=w.useState(null),[o,a]=w.useState(null),s=Yd(e.shapeUtils??[]),i=w.useMemo(()=>Ny("type",s,xle),[s]),l=Yd(e.bindingUtils??[]),c=w.useMemo(()=>Ny("type",l,Rse),[l]),d=BRe({snapshot:e.snapshot,shapeUtils:i}),{pageId:u,bounds:m,scale:h,pixelRatio:y,background:v,padding:x,darkMode:S,preserveAspectRatio:T,format:C="svg",licenseKey:_,assetUrls:I,textOptions:P=aZe}=e,M=rce(I);return w.useLayoutEffect(()=>{if(!o||!d)return;let D=!1;const F=document.createElement("div");o.appendChild(F),o.classList.add("tl-container","tl-theme__light");const B=new tt({store:d,shapeUtils:i,bindingUtils:c,tools:[],getContainer:()=>F,licenseKey:_,fontAssetUrls:M.fonts,textOptions:P});u&&B.setCurrentPage(u);const V=B.getCurrentPageShapeIds();async function z(){await B.fonts.loadRequiredFontsForCurrentPage(B.options.maxFontsToLoadBeforeRender);const H=await B.toImage([...V],{bounds:m,scale:h,background:v,padding:x,darkMode:S,preserveAspectRatio:T,format:C});if(!H||D)return;const j=URL.createObjectURL(H.blob);r(j),B.dispose()}return z(),()=>{D=!0}},[C,o,d,i,c,u,m,h,v,x,S,T,_,y,M,P]),w.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),g.jsx("div",{ref:a,style:{position:"relative",width:"100%",height:"100%"},children:n&&g.jsx("img",{src:n,referrerPolicy:"strict-origin-when-cross-origin",style:{width:"100%",height:"100%"}})})});w.memo(function({children:e}){const n=it(),r=fa(),o=w.useRef(null);eu(o);const a=e??g.jsx(I9e,{});return r<Hr.MOBILE?null:g.jsx("div",{ref:o,className:"tlui-help-menu",children:g.jsxs(DC,{id:"help menu",children:[g.jsx(NC,{children:g.jsx(nn,{type:"help",title:n("help-menu.title"),"data-testid":"help-menu.button",children:g.jsx(kt,{icon:"question-mark",small:!0})})}),g.jsx(LC,{side:"top",align:"end",alignOffset:0,sideOffset:8,children:g.jsx(Rs,{type:"menu",sourceId:"help-menu",children:a})})]})})});const sZe=pn({schemaVersion:Za(1),storeVersion:y1,recordVersions:CE(Gt,pn({version:y1,subTypeVersions:CE(Gt,y1).optional(),subTypeKey:Gt.optional()}))}),iZe=pn({schemaVersion:Za(2),sequences:CE(Gt,y1)});pn({tldrawFileFormatVersion:$Ae,schema:VAe("schemaVersion",{1:sZe,2:iZe}),records:ia(pn({id:Gt,typeName:Gt}).allowUnknownProperties())});Cp("tldraw","4.2.0","esm");function ace(t,e){return function(){return t.apply(e,arguments)}}const{toString:lZe}=Object.prototype,{getPrototypeOf:Ij}=Object,{iterator:rA,toStringTag:sce}=Symbol,oA=(t=>e=>{const n=lZe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),dc=t=>(t=t.toLowerCase(),e=>oA(e)===t),aA=t=>e=>typeof e===t,{isArray:Ug}=Array,pg=aA("undefined");function qv(t){return t!==null&&!pg(t)&&t.constructor!==null&&!pg(t.constructor)&&ci(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ice=dc("ArrayBuffer");function cZe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ice(t.buffer),e}const uZe=aA("string"),ci=aA("function"),lce=aA("number"),Hv=t=>t!==null&&typeof t=="object",dZe=t=>t===!0||t===!1,tE=t=>{if(oA(t)!=="object")return!1;const e=Ij(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(sce in t)&&!(rA in t)},pZe=t=>{if(!Hv(t)||qv(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},fZe=dc("Date"),mZe=dc("File"),hZe=dc("Blob"),gZe=dc("FileList"),bZe=t=>Hv(t)&&ci(t.pipe),yZe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ci(t.append)&&((e=oA(t))==="formdata"||e==="object"&&ci(t.toString)&&t.toString()==="[object FormData]"))},vZe=dc("URLSearchParams"),[xZe,SZe,EZe,TZe]=["ReadableStream","Request","Response","Headers"].map(dc),wZe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $v(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),Ug(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{if(qv(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length;let i;for(r=0;r<s;r++)i=a[r],e.call(null,t[i],i,t)}}function cce(t,e){if(qv(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}const Sf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uce=t=>!pg(t)&&t!==Sf;function ZR(){const{caseless:t,skipUndefined:e}=uce(this)&&this||{},n={},r=(o,a)=>{const s=t&&cce(n,a)||a;tE(n[s])&&tE(o)?n[s]=ZR(n[s],o):tE(o)?n[s]=ZR({},o):Ug(o)?n[s]=o.slice():(!e||!pg(o))&&(n[s]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&$v(arguments[o],r);return n}const CZe=(t,e,n,{allOwnKeys:r}={})=>($v(e,(o,a)=>{n&&ci(o)?t[a]=ace(o,n):t[a]=o},{allOwnKeys:r}),t),AZe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_Ze=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},kZe=(t,e,n,r)=>{let o,a,s;const i={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),a=o.length;a-- >0;)s=o[a],(!r||r(s,t,e))&&!i[s]&&(e[s]=t[s],i[s]=!0);t=n!==!1&&Ij(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},IZe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},PZe=t=>{if(!t)return null;if(Ug(t))return t;let e=t.length;if(!lce(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},OZe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ij(Uint8Array)),MZe=(t,e)=>{const r=(t&&t[rA]).call(t);let o;for(;(o=r.next())&&!o.done;){const a=o.value;e.call(t,a[0],a[1])}},RZe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},DZe=dc("HTMLFormElement"),NZe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),y$=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),LZe=dc("RegExp"),dce=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};$v(n,(o,a)=>{let s;(s=e(o,a,t))!==!1&&(r[a]=s||o)}),Object.defineProperties(t,r)},jZe=t=>{dce(t,(e,n)=>{if(ci(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ci(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},BZe=(t,e)=>{const n={},r=o=>{o.forEach(a=>{n[a]=!0})};return Ug(t)?r(t):r(String(t).split(e)),n},FZe=()=>{},zZe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function UZe(t){return!!(t&&ci(t.append)&&t[sce]==="FormData"&&t[rA])}const qZe=t=>{const e=new Array(10),n=(r,o)=>{if(Hv(r)){if(e.indexOf(r)>=0)return;if(qv(r))return r;if(!("toJSON"in r)){e[o]=r;const a=Ug(r)?[]:{};return $v(r,(s,i)=>{const l=n(s,o+1);!pg(l)&&(a[i]=l)}),e[o]=void 0,a}}return r};return n(t,0)},HZe=dc("AsyncFunction"),$Ze=t=>t&&(Hv(t)||ci(t))&&ci(t.then)&&ci(t.catch),pce=((t,e)=>t?setImmediate:e?((n,r)=>(Sf.addEventListener("message",({source:o,data:a})=>{o===Sf&&a===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Sf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ci(Sf.postMessage)),VZe=typeof queueMicrotask<"u"?queueMicrotask.bind(Sf):typeof process<"u"&&process.nextTick||pce,GZe=t=>t!=null&&ci(t[rA]),Se={isArray:Ug,isArrayBuffer:ice,isBuffer:qv,isFormData:yZe,isArrayBufferView:cZe,isString:uZe,isNumber:lce,isBoolean:dZe,isObject:Hv,isPlainObject:tE,isEmptyObject:pZe,isReadableStream:xZe,isRequest:SZe,isResponse:EZe,isHeaders:TZe,isUndefined:pg,isDate:fZe,isFile:mZe,isBlob:hZe,isRegExp:LZe,isFunction:ci,isStream:bZe,isURLSearchParams:vZe,isTypedArray:OZe,isFileList:gZe,forEach:$v,merge:ZR,extend:CZe,trim:wZe,stripBOM:AZe,inherits:_Ze,toFlatObject:kZe,kindOf:oA,kindOfTest:dc,endsWith:IZe,toArray:PZe,forEachEntry:MZe,matchAll:RZe,isHTMLForm:DZe,hasOwnProperty:y$,hasOwnProp:y$,reduceDescriptors:dce,freezeMethods:jZe,toObjectSet:BZe,toCamelCase:NZe,noop:FZe,toFiniteNumber:zZe,findKey:cce,global:Sf,isContextDefined:uce,isSpecCompliantForm:UZe,toJSONObject:qZe,isAsyncFn:HZe,isThenable:$Ze,setImmediate:pce,asap:VZe,isIterable:GZe};function tn(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Se.inherits(tn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.status}}});const fce=tn.prototype,mce={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mce[t]={value:t}});Object.defineProperties(tn,mce);Object.defineProperty(fce,"isAxiosError",{value:!0});tn.from=(t,e,n,r,o,a)=>{const s=Object.create(fce);Se.toFlatObject(t,s,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const i=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return tn.call(s,i,l,n,r,o),t&&s.cause==null&&Object.defineProperty(s,"cause",{value:t,configurable:!0}),s.name=t&&t.name||"Error",a&&Object.assign(s,a),s};const KZe=null;function eD(t){return Se.isPlainObject(t)||Se.isArray(t)}function hce(t){return Se.endsWith(t,"[]")?t.slice(0,-2):t}function v$(t,e,n){return t?t.concat(e).map(function(o,a){return o=hce(o),!n&&a?"["+o+"]":o}).join(n?".":""):e}function WZe(t){return Se.isArray(t)&&!t.some(eD)}const YZe=Se.toFlatObject(Se,{},null,function(e){return/^is[A-Z]/.test(e)});function sA(t,e,n){if(!Se.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!Se.isUndefined(x[v])});const r=n.metaTokens,o=n.visitor||d,a=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(e);if(!Se.isFunction(o))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(Se.isDate(y))return y.toISOString();if(Se.isBoolean(y))return y.toString();if(!l&&Se.isBlob(y))throw new tn("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(y)||Se.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,v,x){let S=y;if(y&&!x&&typeof y=="object"){if(Se.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(Se.isArray(y)&&WZe(y)||(Se.isFileList(y)||Se.endsWith(v,"[]"))&&(S=Se.toArray(y)))return v=hce(v),S.forEach(function(C,_){!(Se.isUndefined(C)||C===null)&&e.append(s===!0?v$([v],_,a):s===null?v:v+"[]",c(C))}),!1}return eD(y)?!0:(e.append(v$(x,v,a),c(y)),!1)}const u=[],m=Object.assign(YZe,{defaultVisitor:d,convertValue:c,isVisitable:eD});function h(y,v){if(!Se.isUndefined(y)){if(u.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));u.push(y),Se.forEach(y,function(S,T){(!(Se.isUndefined(S)||S===null)&&o.call(e,S,Se.isString(T)?T.trim():T,v,m))===!0&&h(S,v?v.concat(T):[T])}),u.pop()}}if(!Se.isObject(t))throw new TypeError("data must be an object");return h(t),e}function x$(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Pj(t,e){this._pairs=[],t&&sA(t,this,e)}const gce=Pj.prototype;gce.append=function(e,n){this._pairs.push([e,n])};gce.toString=function(e){const n=e?function(r){return e.call(this,r,x$)}:x$;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function XZe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function bce(t,e,n){if(!e)return t;const r=n&&n.encode||XZe;Se.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(e,n):a=Se.isURLSearchParams(e)?e.toString():new Pj(e,n).toString(r),a){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class S${constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Se.forEach(this.handlers,function(r){r!==null&&e(r)})}}const yce={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JZe=typeof URLSearchParams<"u"?URLSearchParams:Pj,QZe=typeof FormData<"u"?FormData:null,ZZe=typeof Blob<"u"?Blob:null,eet={isBrowser:!0,classes:{URLSearchParams:JZe,FormData:QZe,Blob:ZZe},protocols:["http","https","file","blob","url","data"]},Oj=typeof window<"u"&&typeof document<"u",tD=typeof navigator=="object"&&navigator||void 0,tet=Oj&&(!tD||["ReactNative","NativeScript","NS"].indexOf(tD.product)<0),net=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ret=Oj&&window.location.href||"http://localhost",oet=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Oj,hasStandardBrowserEnv:tet,hasStandardBrowserWebWorkerEnv:net,navigator:tD,origin:ret},Symbol.toStringTag,{value:"Module"})),Wa={...oet,...eet};function aet(t,e){return sA(t,new Wa.classes.URLSearchParams,{visitor:function(n,r,o,a){return Wa.isNode&&Se.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function set(t){return Se.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function iet(t){const e={},n=Object.keys(t);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],e[a]=t[a];return e}function vce(t){function e(n,r,o,a){let s=n[a++];if(s==="__proto__")return!0;const i=Number.isFinite(+s),l=a>=n.length;return s=!s&&Se.isArray(o)?o.length:s,l?(Se.hasOwnProp(o,s)?o[s]=[o[s],r]:o[s]=r,!i):((!o[s]||!Se.isObject(o[s]))&&(o[s]=[]),e(n,r,o[s],a)&&Se.isArray(o[s])&&(o[s]=iet(o[s])),!i)}if(Se.isFormData(t)&&Se.isFunction(t.entries)){const n={};return Se.forEachEntry(t,(r,o)=>{e(set(r),o,n,0)}),n}return null}function cet(t,e,n){if(Se.isString(t))try{return(e||JSON.parse)(t),Se.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Vv={transitional:yce,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,a=Se.isObject(e);if(a&&Se.isHTMLForm(e)&&(e=new FormData(e)),Se.isFormData(e))return o?JSON.stringify(vce(e)):e;if(Se.isArrayBuffer(e)||Se.isBuffer(e)||Se.isStream(e)||Se.isFile(e)||Se.isBlob(e)||Se.isReadableStream(e))return e;if(Se.isArrayBufferView(e))return e.buffer;if(Se.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return aet(e,this.formSerializer).toString();if((i=Se.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return sA(i?{"files[]":e}:e,l&&new l,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),cet(e)):e}],transformResponse:[function(e){const n=this.transitional||Vv.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Se.isResponse(e)||Se.isReadableStream(e))return e;if(e&&Se.isString(e)&&(r&&!this.responseType||o)){const s=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(i){if(s)throw i.name==="SyntaxError"?tn.from(i,tn.ERR_BAD_RESPONSE,this,null,this.response):i}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wa.classes.FormData,Blob:Wa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],t=>{Vv.headers[t]={}});const uet=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),det=t=>{const e={};let n,r,o;return t&&t.split(`
`).forEach(function(s){o=s.indexOf(":"),n=s.substring(0,o).trim().toLowerCase(),r=s.substring(o+1).trim(),!(!n||e[n]&&uet[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},E$=Symbol("internals");function ey(t){return t&&String(t).trim().toLowerCase()}function nE(t){return t===!1||t==null?t:Se.isArray(t)?t.map(nE):String(t)}function pet(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const fet=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function fO(t,e,n,r,o){if(Se.isFunction(r))return r.call(this,e,n);if(o&&(e=n),!!Se.isString(e)){if(Se.isString(r))return e.indexOf(r)!==-1;if(Se.isRegExp(r))return r.test(e)}}function met(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function het(t,e){const n=Se.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,a,s){return this[r].call(this,e,o,a,s)},configurable:!0})})}let ui=class{constructor(e){e&&this.set(e)}set(e,n,r){const o=this;function a(i,l,c){const d=ey(l);if(!d)throw new Error("header name must be a non-empty string");const u=Se.findKey(o,d);(!u||o[u]===void 0||c===!0||c===void 0&&o[u]!==!1)&&(o[u||l]=nE(i))}const s=(i,l)=>Se.forEach(i,(c,d)=>a(c,d,l));if(Se.isPlainObject(e)||e instanceof this.constructor)s(e,n);else if(Se.isString(e)&&(e=e.trim())&&!fet(e))s(det(e),n);else if(Se.isObject(e)&&Se.isIterable(e)){let i={},l,c;for(const d of e){if(!Se.isArray(d))throw TypeError("Object iterator must return a key-value pair");i[c=d[0]]=(l=i[c])?Se.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}s(i,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=ey(e),e){const r=Se.findKey(this,e);if(r){const o=this[r];if(!n)return o;if(n===!0)return pet(o);if(Se.isFunction(n))return n.call(this,o,r);if(Se.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ey(e),e){const r=Se.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||fO(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let o=!1;function a(s){if(s=ey(s),s){const i=Se.findKey(r,s);i&&(!n||fO(r,r[i],i,n))&&(delete r[i],o=!0)}}return Se.isArray(e)?e.forEach(a):a(e),o}clear(e){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const a=n[r];(!e||fO(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const n=this,r={};return Se.forEach(this,(o,a)=>{const s=Se.findKey(r,a);if(s){n[s]=nE(o),delete n[a];return}const i=e?met(a):String(a).trim();i!==a&&delete n[a],n[i]=nE(o),r[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Se.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&Se.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[E$]=this[E$]={accessors:{}}).accessors,o=this.prototype;function a(s){const i=ey(s);r[i]||(het(o,s),r[i]=!0)}return Se.isArray(e)?e.forEach(a):a(e),this}};ui.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Se.reduceDescriptors(ui.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Se.freezeMethods(ui);function mO(t,e){const n=this||Vv,r=e||n,o=ui.from(r.headers);let a=r.data;return Se.forEach(t,function(i){a=i.call(n,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function xce(t){return!!(t&&t.__CANCEL__)}function qg(t,e,n){tn.call(this,t??"canceled",tn.ERR_CANCELED,e,n),this.name="CanceledError"}Se.inherits(qg,tn,{__CANCEL__:!0});function Sce(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new tn("Request failed with status code "+n.status,[tn.ERR_BAD_REQUEST,tn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function get(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function bet(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o=0,a=0,s;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[a];s||(s=c),n[o]=l,r[o]=c;let u=a,m=0;for(;u!==o;)m+=n[u++],u=u%t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),c-s<e)return;const h=d&&c-d;return h?Math.round(m*1e3/h):void 0}}function yet(t,e){let n=0,r=1e3/e,o,a;const s=(c,d=Date.now())=>{n=d,o=null,a&&(clearTimeout(a),a=null),t(...c)};return[(...c)=>{const d=Date.now(),u=d-n;u>=r?s(c,d):(o=c,a||(a=setTimeout(()=>{a=null,s(o)},r-u)))},()=>o&&s(o)]}const JT=(t,e,n=3)=>{let r=0;const o=bet(50,250);return yet(a=>{const s=a.loaded,i=a.lengthComputable?a.total:void 0,l=s-r,c=o(l),d=s<=i;r=s;const u={loaded:s,total:i,progress:i?s/i:void 0,bytes:l,rate:c||void 0,estimated:c&&i&&d?(i-s)/c:void 0,event:a,lengthComputable:i!=null,[e?"download":"upload"]:!0};t(u)},n)},T$=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},w$=t=>(...e)=>Se.asap(()=>t(...e)),vet=Wa.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Wa.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Wa.origin),Wa.navigator&&/(msie|trident)/i.test(Wa.navigator.userAgent)):()=>!0,xet=Wa.hasStandardBrowserEnv?{write(t,e,n,r,o,a,s){if(typeof document>"u")return;const i=[`${t}=${encodeURIComponent(e)}`];Se.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),Se.isString(r)&&i.push(`path=${r}`),Se.isString(o)&&i.push(`domain=${o}`),a===!0&&i.push("secure"),Se.isString(s)&&i.push(`SameSite=${s}`),document.cookie=i.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Eet(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Tet(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ece(t,e,n){let r=!Eet(e);return t&&(r||n==!1)?Tet(t,e):e}const C$=t=>t instanceof ui?{...t}:t;function Xf(t,e){e=e||{};const n={};function r(c,d,u,m){return Se.isPlainObject(c)&&Se.isPlainObject(d)?Se.merge.call({caseless:m},c,d):Se.isPlainObject(d)?Se.merge({},d):Se.isArray(d)?d.slice():d}function o(c,d,u,m){if(Se.isUndefined(d)){if(!Se.isUndefined(c))return r(void 0,c,u,m)}else return r(c,d,u,m)}function a(c,d){if(!Se.isUndefined(d))return r(void 0,d)}function s(c,d){if(Se.isUndefined(d)){if(!Se.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function i(c,d,u){if(u in e)return r(c,d);if(u in t)return r(void 0,c)}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(c,d,u)=>o(C$(c),C$(d),u,!0)};return Se.forEach(Object.keys({...t,...e}),function(d){const u=l[d]||o,m=u(t[d],e[d],d);Se.isUndefined(m)&&u!==i||(n[d]=m)}),n}const Tce=t=>{const e=Xf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:i}=e;if(e.headers=s=ui.from(s),e.url=bce(Ece(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),i&&s.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Se.isFormData(n)){if(Wa.hasStandardBrowserEnv||Wa.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(Se.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,u])=>{c.includes(d.toLowerCase())&&s.set(d,u)})}}if(Wa.hasStandardBrowserEnv&&(r&&Se.isFunction(r)&&(r=r(e)),r||r!==!1&&vet(e.url))){const l=o&&a&&xet.read(a);l&&s.set(o,l)}return e},wet=typeof XMLHttpRequest<"u",Cet=wet&&function(t){return new Promise(function(n,r){const o=Tce(t);let a=o.data;const s=ui.from(o.headers).normalize();let{responseType:i,onUploadProgress:l,onDownloadProgress:c}=o,d,u,m,h,y;function v(){h&&h(),y&&y(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(o.method.toUpperCase(),o.url,!0),x.timeout=o.timeout;function S(){if(!x)return;const C=ui.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),I={data:!i||i==="text"||i==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:C,config:t,request:x};Sce(function(M){n(M),v()},function(M){r(M),v()},I),x=null}"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(S)},x.onabort=function(){x&&(r(new tn("Request aborted",tn.ECONNABORTED,t,x)),x=null)},x.onerror=function(_){const I=_&&_.message?_.message:"Network Error",P=new tn(I,tn.ERR_NETWORK,t,x);P.event=_||null,r(P),x=null},x.ontimeout=function(){let _=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const I=o.transitional||yce;o.timeoutErrorMessage&&(_=o.timeoutErrorMessage),r(new tn(_,I.clarifyTimeoutError?tn.ETIMEDOUT:tn.ECONNABORTED,t,x)),x=null},a===void 0&&s.setContentType(null),"setRequestHeader"in x&&Se.forEach(s.toJSON(),function(_,I){x.setRequestHeader(I,_)}),Se.isUndefined(o.withCredentials)||(x.withCredentials=!!o.withCredentials),i&&i!=="json"&&(x.responseType=o.responseType),c&&([m,y]=JT(c,!0),x.addEventListener("progress",m)),l&&x.upload&&([u,h]=JT(l),x.upload.addEventListener("progress",u),x.upload.addEventListener("loadend",h)),(o.cancelToken||o.signal)&&(d=C=>{x&&(r(!C||C.type?new qg(null,t,x):C),x.abort(),x=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const T=get(o.url);if(T&&Wa.protocols.indexOf(T)===-1){r(new tn("Unsupported protocol "+T+":",tn.ERR_BAD_REQUEST,t));return}x.send(a||null)})},Aet=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,o;const a=function(c){if(!o){o=!0,i();const d=c instanceof Error?c:this.reason;r.abort(d instanceof tn?d:new qg(d instanceof Error?d.message:d))}};let s=e&&setTimeout(()=>{s=null,a(new tn(`timeout ${e} of ms exceeded`,tn.ETIMEDOUT))},e);const i=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),t=null)};t.forEach(c=>c.addEventListener("abort",a));const{signal:l}=r;return l.unsubscribe=()=>Se.asap(i),l}},_et=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,o;for(;r<n;)o=r+e,yield t.slice(r,o),r=o},ket=async function*(t,e){for await(const n of Iet(t))yield*_et(n,e)},Iet=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},A$=(t,e,n,r)=>{const o=ket(t,e);let a=0,s,i=l=>{s||(s=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await o.next();if(c){i(),l.close();return}let u=d.byteLength;if(n){let m=a+=u;n(m)}l.enqueue(new Uint8Array(d))}catch(c){throw i(c),c}},cancel(l){return i(l),o.return()}},{highWaterMark:2})},_$=64*1024,{isFunction:u1}=Se,Pet=(({Request:t,Response:e})=>({Request:t,Response:e}))(Se.global),{ReadableStream:k$,TextEncoder:I$}=Se.global,P$=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Oet=t=>{t=Se.merge.call({skipUndefined:!0},Pet,t);const{fetch:e,Request:n,Response:r}=t,o=e?u1(e):typeof fetch=="function",a=u1(n),s=u1(r);if(!o)return!1;const i=o&&u1(k$),l=o&&(typeof I$=="function"?(y=>v=>y.encode(v))(new I$):async y=>new Uint8Array(await new n(y).arrayBuffer())),c=a&&i&&P$(()=>{let y=!1;const v=new n(Wa.origin,{body:new k$,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!v}),d=s&&i&&P$(()=>Se.isReadableStream(new r("").body)),u={stream:d&&(y=>y.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!u[y]&&(u[y]=(v,x)=>{let S=v&&v[y];if(S)return S.call(v);throw new tn(`Response type '${y}' is not supported`,tn.ERR_NOT_SUPPORT,x)})});const m=async y=>{if(y==null)return 0;if(Se.isBlob(y))return y.size;if(Se.isSpecCompliantForm(y))return(await new n(Wa.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(Se.isArrayBufferView(y)||Se.isArrayBuffer(y))return y.byteLength;if(Se.isURLSearchParams(y)&&(y=y+""),Se.isString(y))return(await l(y)).byteLength},h=async(y,v)=>{const x=Se.toFiniteNumber(y.getContentLength());return x??m(v)};return async y=>{let{url:v,method:x,data:S,signal:T,cancelToken:C,timeout:_,onDownloadProgress:I,onUploadProgress:P,responseType:M,headers:D,withCredentials:F="same-origin",fetchOptions:B}=Tce(y),V=e||fetch;M=M?(M+"").toLowerCase():"text";let z=Aet([T,C&&C.toAbortSignal()],_),H=null;const j=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let q;try{if(P&&c&&x!=="get"&&x!=="head"&&(q=await h(D,S))!==0){let G=new n(v,{method:"POST",body:S,duplex:"half"}),re;if(Se.isFormData(S)&&(re=G.headers.get("content-type"))&&D.setContentType(re),G.body){const[K,ve]=T$(q,JT(w$(P)));S=A$(G.body,_$,K,ve)}}Se.isString(F)||(F=F?"include":"omit");const U=a&&"credentials"in n.prototype,Y={...B,signal:z,method:x.toUpperCase(),headers:D.normalize().toJSON(),body:S,duplex:"half",credentials:U?F:void 0};H=a&&new n(v,Y);let X=await(a?V(H,B):V(v,Y));const ee=d&&(M==="stream"||M==="response");if(d&&(I||ee&&j)){const G={};["status","statusText","headers"].forEach(xe=>{G[xe]=X[xe]});const re=Se.toFiniteNumber(X.headers.get("content-length")),[K,ve]=I&&T$(re,JT(w$(I),!0))||[];X=new r(A$(X.body,_$,K,()=>{ve&&ve(),j&&j()}),G)}M=M||"text";let $=await u[Se.findKey(u,M)||"text"](X,y);return!ee&&j&&j(),await new Promise((G,re)=>{Sce(G,re,{data:$,headers:ui.from(X.headers),status:X.status,statusText:X.statusText,config:y,request:H})})}catch(U){throw j&&j(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new tn("Network Error",tn.ERR_NETWORK,y,H),{cause:U.cause||U}):tn.from(U,U&&U.code,y,H)}}},Met=new Map,wce=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:o}=e,a=[r,o,n];let s=a.length,i=s,l,c,d=Met;for(;i--;)l=a[i],c=d.get(l),c===void 0&&d.set(l,c=i?new Map:Oet(e)),d=c;return c};wce();const Mj={http:KZe,xhr:Cet,fetch:{get:wce}};Se.forEach(Mj,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const O$=t=>`- ${t}`,Ret=t=>Se.isFunction(t)||t===null||t===!1;function Det(t,e){t=Se.isArray(t)?t:[t];const{length:n}=t;let r,o;const a={};for(let s=0;s<n;s++){r=t[s];let i;if(o=r,!Ret(r)&&(o=Mj[(i=String(r)).toLowerCase()],o===void 0))throw new tn(`Unknown adapter '${i}'`);if(o&&(Se.isFunction(o)||(o=o.get(e))))break;a[i||"#"+s]=o}if(!o){const s=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=n?s.length>1?`since :
`+s.map(O$).join(`
`):" "+O$(s[0]):"as no adapter specified";throw new tn("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return o}const Cce={getAdapter:Det,adapters:Mj};function hO(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new qg(null,t)}function M$(t){return hO(t),t.headers=ui.from(t.headers),t.data=mO.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Cce.getAdapter(t.adapter||Vv.adapter,t)(t).then(function(r){return hO(t),r.data=mO.call(t,t.transformResponse,r),r.headers=ui.from(r.headers),r},function(r){return xce(r)||(hO(t),r&&r.response&&(r.response.data=mO.call(t,t.transformResponse,r.response),r.response.headers=ui.from(r.response.headers))),Promise.reject(r)})}const Ace="1.13.2",iA={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{iA[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const R$={};iA.transitional=function(e,n,r){function o(a,s){return"[Axios v"+Ace+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,i)=>{if(e===!1)throw new tn(o(s," has been removed"+(n?" in "+n:"")),tn.ERR_DEPRECATED);return n&&!R$[s]&&(R$[s]=!0,console.warn(o(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,s,i):!0}};iA.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Net(t,e,n){if(typeof t!="object")throw new tn("options must be an object",tn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const a=r[o],s=e[a];if(s){const i=t[a],l=i===void 0||s(i,a,t);if(l!==!0)throw new tn("option "+a+" must be "+l,tn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new tn("Unknown option "+a,tn.ERR_BAD_OPTION)}}const rE={assertOptions:Net,validators:iA},wc=rE.validators;let Pf=class{constructor(e){this.defaults=e||{},this.interceptors={request:new S$,response:new S$}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Xf(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:a}=n;r!==void 0&&rE.assertOptions(r,{silentJSONParsing:wc.transitional(wc.boolean),forcedJSONParsing:wc.transitional(wc.boolean),clarifyTimeoutError:wc.transitional(wc.boolean)},!1),o!=null&&(Se.isFunction(o)?n.paramsSerializer={serialize:o}:rE.assertOptions(o,{encode:wc.function,serialize:wc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),rE.assertOptions(n,{baseUrl:wc.spelling("baseURL"),withXsrfToken:wc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=a&&Se.merge(a.common,a[n.method]);a&&Se.forEach(["delete","get","head","post","put","patch","common"],y=>{delete a[y]}),n.headers=ui.concat(s,a);const i=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,i.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,u=0,m;if(!l){const y=[M$.bind(this),void 0];for(y.unshift(...i),y.push(...c),m=y.length,d=Promise.resolve(n);u<m;)d=d.then(y[u++],y[u++]);return d}m=i.length;let h=n;for(;u<m;){const y=i[u++],v=i[u++];try{h=y(h)}catch(x){v.call(this,x);break}}try{d=M$.call(this,h)}catch(y){return Promise.reject(y)}for(u=0,m=c.length;u<m;)d=d.then(c[u++],c[u++]);return d}getUri(e){e=Xf(this.defaults,e);const n=Ece(e.baseURL,e.url,e.allowAbsoluteUrls);return bce(n,e.params,e.paramsSerializer)}};Se.forEach(["delete","get","head","options"],function(e){Pf.prototype[e]=function(n,r){return this.request(Xf(r||{},{method:e,url:n,data:(r||{}).data}))}});Se.forEach(["post","put","patch"],function(e){function n(r){return function(a,s,i){return this.request(Xf(i||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Pf.prototype[e]=n(),Pf.prototype[e+"Form"]=n(!0)});let Let=class _ce{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const s=new Promise(i=>{r.subscribe(i),a=i}).then(o);return s.cancel=function(){r.unsubscribe(a)},s},e(function(a,s,i){r.reason||(r.reason=new qg(a,s,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new _ce(function(o){e=o}),cancel:e}}};function jet(t){return function(n){return t.apply(null,n)}}function Bet(t){return Se.isObject(t)&&t.isAxiosError===!0}const nD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nD).forEach(([t,e])=>{nD[e]=t});function kce(t){const e=new Pf(t),n=ace(Pf.prototype.request,e);return Se.extend(n,Pf.prototype,e,{allOwnKeys:!0}),Se.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return kce(Xf(t,o))},n}const wo=kce(Vv);wo.Axios=Pf;wo.CanceledError=qg;wo.CancelToken=Let;wo.isCancel=xce;wo.VERSION=Ace;wo.toFormData=sA;wo.AxiosError=tn;wo.Cancel=wo.CanceledError;wo.all=function(e){return Promise.all(e)};wo.spread=jet;wo.isAxiosError=Bet;wo.mergeConfig=Xf;wo.AxiosHeaders=ui;wo.formToJSON=t=>vce(Se.isHTMLForm(t)?new FormData(t):t);wo.getAdapter=Cce.getAdapter;wo.HttpStatusCode=nD;wo.default=wo;const{Axios:hat,AxiosError:gat,CanceledError:bat,isCancel:yat,CancelToken:vat,VERSION:xat,all:Sat,Cancel:Eat,isAxiosError:Tat,spread:wat,toFormData:Cat,AxiosHeaders:Aat,HttpStatusCode:_at,formToJSON:kat,getAdapter:Iat,mergeConfig:Pat}=wo,fg=wo.create({baseURL:"https://curso-frontend-essencial-production.up.railway.app/api"});fg.interceptors.request.use(t=>{const e=localStorage.getItem("authToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));const Fet="",qe=({content:t,backRoute:e,backText:n,goRoute:r,goText:o,pageTopic:a})=>{const s=Yi(),i=Ep(),{user:l}=V0(),[c,d]=w.useState(null),[u,m]=w.useState(!1),[h,y]=w.useState(!1),v=`tldraw-${s.pathname}`;w.useEffect(()=>{a&&l&&(async()=>{m(!0);try{const T=await fg.post("/ai/generate-challenge",{topic:a});d(T.data.challenge)}catch{d("No foi possvel carregar um desafio.")}finally{m(!1)}})()},[a,l]);const x=async S=>{if(l){S.preventDefault();try{const T=await fg.post("/progress/complete-page",{pageIdentifier:s.pathname});T.data.message&&eme.success(T.data.message,{icon:""})}finally{i(r)}}};return g.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[g.jsxs("div",{className:"flex justify-between w-full",children:[g.jsx(lS,{to:e,text:n,type:"back"}),g.jsx(lS,{to:r,text:o,type:"go",onClick:x})]}),g.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-${h?"2":"1"} gap-8 w-full relative`,children:[g.jsx("article",{className:`
            bg-gray-800/50 p-6 md:p-8 rounded-xl 
            border border-gray-700/50 min-h-[500px] w-full 
            transition-all duration-300
            ${h?"":"mx-auto"}
          `,children:g.jsx(QTe,{content:t})}),!h&&g.jsx("div",{className:`\r
              fixed top-1/2 right-4 z-50 \r
              -translate-y-1/2\r
            `,children:g.jsx("button",{onClick:()=>y(!0),className:"flex items-center gap-3 px-6 py-3 rounded-lg font-semibold text-lg transition-all duration-300 shadow-md bg-gray-700 hover:bg-gray-600 text-gray-200",children:"Abrir Quadro"})}),h&&g.jsxs("div",{className:"flex flex-col gap-4 sticky top-8 h-fit",children:[g.jsx("button",{onClick:()=>y(!1),className:"flex items-center gap-3 px-6 py-3 rounded-lg font-semibold text-lg transition-all duration-300 shadow-md bg-gray-700 hover:bg-gray-600 text-gray-200",children:"Esconder Quadro"}),g.jsx("div",{className:`\r
                overflow-hidden transition-all duration-500 \r
                bg-gray-900/30 rounded-lg \r
                border border-gray-700/50\r
                max-h-[800px] opacity-100\r
              `,children:g.jsx("div",{className:"w-full h-[500px]",children:g.jsx(rZe,{licenseKey:Fet,persistenceKey:v})})})]})]}),g.jsxs("div",{className:"flex justify-between w-full",children:[g.jsx(lS,{to:e,text:n,type:"back"}),g.jsx(lS,{to:r,text:o,type:"go",onClick:x})]})]})},zet=()=>g.jsx(g.Fragment,{children:g.jsx(qe,{content:xme,backRoute:"/html/estruturando-conteudo",backText:"Voltar ao Incio",goRoute:"/html/introducao",goText:"Prximo: HTML Semntico"})}),dh="gabrifgaraujo",Uet=()=>{const[t,e]=w.useState(null),[n,r]=w.useState([]),[o,a]=w.useState(!0),[s,i]=w.useState(null);return w.useEffect(()=>{let l=!0;return(async()=>{try{a(!0),i(null);const d=await fetch(`https://api.github.com/users/${dh}`);if(!d.ok)throw new Error("Falha ao buscar dados do usurio");const u=await d.json(),m=await fetch(`https://api.github.com/users/${dh}/repos?sort=stars&per_page=6`);if(!m.ok)throw new Error("Falha ao buscar repositrios");const y=(await m.json()).map(v=>({name:v.name,description:v.description??null,url:v.html_url,stargazerCount:typeof v.stargazers_count=="number"?v.stargazers_count:0,forkCount:typeof v.forks_count=="number"?v.forks_count:0,primaryLanguage:v.language?{name:v.language}:null}));if(!l)return;e({avatar_url:u.avatar_url,name:u.name??u.login,public_repos:u.public_repos??0,followers:u.followers??0,following:u.following??0,bio:u.bio??null,blog:u.blog??null,login:u.login}),r(y)}catch(d){const u=d instanceof Error?d.message:String(d);l&&i(u),console.error("Erro ao buscar dados do GitHub:",d)}finally{l&&a(!1)}})(),()=>{l=!1}},[]),o?g.jsxs("div",{className:"flex items-center justify-center text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-400"}),g.jsx("p",{className:"ml-4 text-xl text-gray-400",children:"Carregando dados do GitHub..."})]}):s?g.jsxs("div",{className:"bg-red-900/20 border border-red-700/50 p-6 rounded-xl text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-red-400 mb-2",children:"Erro na Conexo"}),g.jsx("p",{className:"text-gray-300 mb-4",children:"No foi possvel conectar  API do GitHub."}),g.jsx("p",{className:"text-red-300 font-mono bg-black/30 p-3 rounded-md text-sm",children:s})]}):t?g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsx("div",{className:"bg-gray-800/50 p-6 md:p-8 rounded-xl border border-gray-700/50",children:g.jsxs("div",{className:"flex md:flex-row  md:items-start w-100% gap-8",children:[g.jsx("img",{src:t.avatar_url,alt:t.name||dh,className:"w-32 h-32 md:w-40 md:h-40 rounded-full border-4 border-sky-500 object-cover shadow-lg"}),g.jsxs("div",{className:"flex-1 text-center md:text-left",children:[g.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:t.name||dh}),g.jsxs("a",{href:`https://github.com/${dh}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-400 hover:text-sky-300 transition-colors text-lg",children:["@",t.login]}),t.bio&&g.jsx("p",{className:"text-gray-300 mt-4 text-lg max-w-2xl",children:t.bio}),g.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-4 mt-6",children:[g.jsxs("div",{className:"bg-gray-700/60 px-4 py-2 rounded-lg text-center",children:[g.jsx("span",{className:"block text-xl font-bold text-white",children:t.public_repos??0}),g.jsx("span",{className:"text-sm text-gray-400",children:"Repositrios"})]}),g.jsxs("div",{className:"bg-gray-700/60 px-4 py-2 rounded-lg text-center",children:[g.jsx("span",{className:"block text-xl font-bold text-white",children:t.followers??0}),g.jsx("span",{className:"text-sm text-gray-400",children:"Seguidores"})]}),g.jsxs("div",{className:"bg-gray-700/60 px-4 py-2 rounded-lg text-center",children:[g.jsx("span",{className:"block text-xl font-bold text-white",children:t.following??0}),g.jsx("span",{className:"text-sm text-gray-400",children:"Seguindo"})]})]}),t.blog&&g.jsxs("a",{href:t.blog,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sky-400 hover:text-sky-300 mt-6 transition-colors",children:[g.jsx(gme,{}),t.blog.replace(/^https?:\/\//,"")]})]})]})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-bold text-center text-white mb-8",children:"Projetos em Destaque"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(l=>g.jsxs("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col bg-gray-800/50 border border-gray-700/50 rounded-xl p-6 transition-all duration-300 hover:border-sky-500/70 hover:bg-gray-800",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-sky-400 transition-colors",children:l.name}),l.primaryLanguage&&g.jsx("span",{className:"bg-sky-900/50 text-sky-300 text-xs font-medium px-3 py-1 rounded-full",children:l.primaryLanguage.name})]}),g.jsx("p",{className:"text-gray-400 leading-relaxed",children:l.description||"Repositrio sem descrio."})]}),g.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 mt-6 pt-4 border-t border-gray-700/50",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(bme,{className:"text-yellow-400"}),g.jsx("span",{children:l.stargazerCount})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(mme,{className:"text-green-400"}),g.jsx("span",{children:l.forkCount})]})]})]},l.name))})]}),g.jsx("div",{className:"text-center",children:g.jsxs("a",{href:`https://github.com/${dh}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 bg-sky-600 hover:bg-sky-500 text-white font-bold py-3 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg shadow-sky-500/20",children:[g.jsx(lme,{}),"Ver Perfil Completo no GitHub",g.jsx(fV,{className:"opacity-0 group-hover:opacity-100 transition-opacity"})]})})]}):null};function qet(t){return Da({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"},child:[]}]})(t)}const D$=[{title:"1. HTML Essencial",icon:g.jsx(dV,{className:"text-orange-400"}),link:"/html/introducao",topics:["Estrutura de pginas web","Tags para textos, listas e links","Uso de imagens e mdia","HTML Semntico e acessibilidade"]},{title:"2. CSS e Flexbox",icon:g.jsx(uV,{className:"text-blue-400"}),link:"/css/introducao",topics:["Seletores e o Box Model","Cores, fontes e unidades","Layouts modernos com Flexbox","Design responsivo bsico"]},{title:"3. JavaScript e DOM",icon:g.jsx(pV,{className:"text-yellow-400"}),link:"/js/introducao",topics:["Variveis, tipos e operadores","Funes e estruturas de controle","Manipulao de elementos (DOM)","Eventos e interatividade"]},{title:"4. Estrutura de Dados e Algoritmos",icon:g.jsx(hme,{className:"text-blue-400"}),link:"/algoritmos/introducao",topics:["Algoritmos bsicos e complexidade","Estruturas de dados Lineares e no lineares","Algoritmos de Busca e Ordenao","Noes de Arquitetura de Software"]},{title:"4. TypeScript Essencial",icon:g.jsx(qet,{className:"text-sky-500"}),link:"/ts/introducao",topics:["Introduo ao TypeScript","Tipagem esttica e segurana","Interfaces e Generics","Configurao de ambiente"]},{title:"5. React com TypeScript",icon:g.jsx(ume,{className:"text-cyan-400"}),link:"/react/introducao",topics:["Componentes e Props","Hooks e gerenciamento de estado","Roteamento e consumo de APIs","Testes e build para produo"]},{title:"6. Node.js Essencial",icon:g.jsx(cme,{className:"text-green-500"}),link:"/node/introducao",topics:["O que  Node.js e como funciona","Gerenciamento de pacotes com NPM","Mdulos e sistema de arquivos","Criao de APIs com Express"]}],Het=()=>{const[t,e]=w.useState(null),n=Ep();w.useEffect(()=>{const o=localStorage.getItem("lastFrontendRoute");o&&o!=="/"&&e(o)},[]);const r=()=>{t&&n(t)};return g.jsxs("div",{className:"space-y-20 pt-16",children:[g.jsxs("section",{className:"text-center",children:[g.jsx("div",{className:"inline-block bg-gray-800 p-4 rounded-full mb-6",children:g.jsx(fme,{className:"text-sky-400",size:40})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Guia Completo de Frontend + Node Essencial"}),g.jsx("p",{className:"text-lg md:text-xl text-gray-400 max-w-3xl mx-auto mb-10",children:"Um guia abrangente para iniciar no desenvolvimento web, dominando HTML, CSS, JavaScript, TypeScript, React e Node.js para construir aplicaes modernas e escalveis."}),g.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[g.jsx(ri,{to:"/summary",className:"flex items-center gap-2 bg-sky-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-sky-500 transition-transform transform hover:scale-105",children:"Comear a Aprender"}),t&&g.jsx("button",{onClick:r,className:"bg-gray-700 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600 transition-transform transform hover:scale-105",children:"Continuar de onde parei"})]})]}),g.jsx("section",{className:"flex flex-wrap justify-center gap-3 md:gap-4",children:D$.map(o=>g.jsxs(ri,{to:o.link,className:"flex items-center gap-2 bg-gray-800/80 hover:bg-gray-700 text-gray-300 font-semibold py-2 px-4 rounded-full transition-all",children:[w.cloneElement(o.icon,{size:20}),g.jsx("span",{children:o.title.split(". ")[1]})]},o.title))}),g.jsx("section",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:D$.map(o=>g.jsxs(ri,{to:o.link,className:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-xl border border-gray-700/50 hover:border-sky-500/50 hover:-translate-y-1 transition-all duration-300",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[g.jsx("div",{className:"bg-gray-900 p-3 rounded-lg",children:w.cloneElement(o.icon,{size:24})}),g.jsx("h3",{className:"text-xl font-bold text-white",children:o.title})]}),g.jsx("ul",{className:"space-y-2 list-disc list-inside text-gray-400",children:o.topics.map(a=>g.jsx("li",{children:a},a))})]},o.title))})]})},$et=()=>{var y,v;const[t,e]=w.useState(""),[n,r]=w.useState(""),[o,a]=w.useState(""),[s,i]=w.useState(""),{login:l}=V0(),c=Ep(),d=Yi(),[u]=tfe(),m=((v=(y=d.state)==null?void 0:y.from)==null?void 0:v.pathname)||"/";w.useEffect(()=>{u.get("fromRegister")&&i("Registro bem-sucedido! Por favor, faa o login.")},[u]);const h=async x=>{var S,T;if(x.preventDefault(),a(""),i(""),!t||!n){a("Por favor, preencha todos os campos.");return}try{const C=await fg.post("/auth/login",{email:t,password:n}),{token:_,user:I}=C.data;l(_,I),c(m,{replace:!0})}catch(C){const _=((T=(S=C.response)==null?void 0:S.data)==null?void 0:T.message)||"Erro ao fazer login. Verifique suas credenciais.";a(_)}};return g.jsx("div",{className:"max-w-md mx-auto mt-10",children:g.jsxs("div",{className:"bg-gray-800/50 p-8 rounded-xl shadow-lg border border-gray-700/50",children:[g.jsx("h2",{className:"text-3xl font-bold text-center text-white mb-6",children:"Login"}),o&&g.jsx("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-md mb-4 text-center",children:o}),s&&g.jsx("div",{className:"bg-green-500/20 text-green-300 p-3 rounded-md mb-4 text-center",children:s}),g.jsxs("form",{onSubmit:h,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),g.jsx("input",{type:"email",id:"email",value:t,onChange:x=>e(x.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-sky-500",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Senha"}),g.jsx("input",{type:"password",id:"password",value:n,onChange:x=>r(x.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-sky-500",required:!0})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",className:"w-full bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded-md transition duration-300",children:"Entrar"})})]}),g.jsxs("p",{className:"mt-6 text-center text-sm text-gray-400",children:["No tem uma conta?"," ",g.jsx(ri,{to:"/register",className:"font-medium text-sky-400 hover:text-sky-300",children:"Registre-se"})]})]})})},Vet=()=>{const[t,e]=w.useState(""),[n,r]=w.useState(""),[o,a]=w.useState(""),[s,i]=w.useState(""),l=Ep(),c=async d=>{var u;if(d.preventDefault(),i(""),o.length<6){i("A senha deve ter pelo menos 6 caracteres.");return}try{await fg.post("/auth/register",{username:t,email:n,password:o}),l("/login?fromRegister=true")}catch(m){const h=(u=m.response)==null?void 0:u.data;if(h!=null&&h.errors){const y=Object.values(h.errors)[0];i(y[0]||"Erro de validao.")}else i((h==null?void 0:h.message)||"Erro ao registrar. Tente novamente.")}};return g.jsx("div",{className:"max-w-md mx-auto mt-10",children:g.jsxs("div",{className:"bg-gray-800/50 p-8 rounded-xl shadow-lg border border-gray-700/50",children:[g.jsx("h2",{className:"text-3xl font-bold text-center text-white mb-6",children:"Criar Conta"}),s&&g.jsx("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-md mb-4 text-center",children:s}),g.jsxs("form",{onSubmit:c,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-1",children:"Nome de Usurio"}),g.jsx("input",{type:"text",id:"username",value:t,onChange:d=>e(d.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-sky-500",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),g.jsx("input",{type:"email",id:"email",value:n,onChange:d=>r(d.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-sky-500",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Senha"}),g.jsx("input",{type:"password",id:"password",value:o,onChange:d=>a(d.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-sky-500",required:!0})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",className:"w-full bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded-md transition duration-300",children:"Registrar"})})]}),g.jsxs("p",{className:"mt-6 text-center text-sm text-gray-400",children:["J tem uma conta?"," ",g.jsx(ri,{to:"/login",className:"font-medium text-sky-400 hover:text-sky-300",children:"Faa o login"})]})]})})},Get=()=>{const[t,e]=w.useState([]),[n,r]=w.useState(!0),[o,a]=w.useState(null),{user:s,loading:i}=V0();w.useEffect(()=>{(async()=>{try{r(!0),a(null);const d=await fg.get("/ranking?limit=50");e(d.data)}catch(d){a("No foi possvel carregar o ranking. Tente novamente mais tarde."),console.error("Erro ao buscar ranking:",d)}finally{r(!1)}})()},[]);const l=c=>c===0?g.jsx(d2,{className:"text-yellow-400"}):c===1?g.jsx(d2,{className:"text-gray-400"}):c===2?g.jsx(d2,{className:"text-yellow-600"}):null;return i||n?g.jsx("div",{className:"text-center text-xl mt-10 animate-pulse",children:"Carregando Ranking..."}):o?g.jsx("div",{className:"text-center text-xl mt-10 text-red-500",children:o}):g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsx("h1",{className:"text-4xl font-bold text-center text-white mb-8",children:"Ranking de Usurios"}),g.jsxs("div",{className:"bg-gray-800/50 rounded-lg shadow-lg overflow-hidden border border-gray-700/50",children:[g.jsxs("table",{className:"w-full text-left",children:[g.jsx("thead",{className:"bg-gray-700/50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-4 w-1/6 text-center",children:"Posio"}),g.jsx("th",{className:"p-4 w-3/6",children:"Usurio"}),g.jsx("th",{className:"p-4 w-1/6 text-center",children:"Nvel"}),g.jsx("th",{className:"p-4 w-1/6 text-right",children:"XP"})]})}),g.jsx("tbody",{children:t.map((c,d)=>{const u=s&&s.username===c.username;return g.jsxs("tr",{className:`border-t border-gray-700/50 transition-colors ${u?"bg-sky-600/30":"hover:bg-gray-700/30"}`,children:[g.jsxs("td",{className:"p-4 font-bold text-center text-xl flex items-center justify-center gap-2",children:[l(d),g.jsx("span",{children:d+1})]}),g.jsx("td",{className:"p-4 font-semibold",children:c.username}),g.jsx("td",{className:"p-4 text-center",children:c.level}),g.jsx("td",{className:"p-4 text-right font-mono",children:c.xp.toLocaleString("pt-BR")})]},d)})})]}),t.length===0&&g.jsx("p",{className:"p-8 text-center text-gray-400",children:"Ningum no ranking ainda. Seja o primeiro a ganhar XP!"})]})]})},Ket=`# Mdulo 1, Aula 1: Introduo ao Desenvolvimento Web\r
\r
**Objetivo:** Entender o que  a web, a diferena entre front-end e back-end, e conhecer as ferramentas essenciais para comear a desenvolver.\r
\r
---\r
\r
### O que  a Web?\r
\r
Quando voc acessa um site, uma srie de eventos acontece em segundos. Compreender esse fluxo  o primeiro passo para se tornar um desenvolvedor.\r
\r
*   **Cliente-Servidor:** A web opera em um modelo chamado cliente-servidor.\r
    *   **Cliente:**  o seu navegador (Google Chrome, Firefox, Safari). Ele  responsvel por *pedir* (fazer uma requisio) as pginas web.\r
    *   **Servidor:**  um computador potente que est sempre conectado  internet, cuja funo  *armazenar* os arquivos de um site (HTML, CSS, JS, imagens) e *entreg-los* (enviar uma resposta) quando um cliente solicita.\r
*   **HTTP/HTTPS:**  o protocolo (a "linguagem") que clientes e servidores usam para se comunicar. HTTPS  a verso segura, que criptografa os dados trocados.\r
\r
### As 3 Ferramentas Fundamentais do Front-End\r
\r
O front-end  tudo aquilo que o usurio v e interage em seu navegador. Ele  construdo sobre trs pilares tecnolgicos:\r
\r
1.  **HTML (HyperText Markup Language):** A **estrutura**. Pense nele como o esqueleto de uma casa. Ele define os elementos da pgina: ttulos, pargrafos, imagens, listas, etc.\r
2.  **CSS (Cascading Style Sheets):** A **apresentao**.  a "pintura" e a "decorao" da casa. O CSS  usado para definir cores, fontes, espaamentos, layout e o design visual da pgina.\r
3.  **JavaScript (JS):** A **interatividade**.  a "eletricidade" e os "mecanismos" da casa. O JavaScript permite que a pgina responda a aes do usurio, como cliques de boto, envio de formulrios, animaes e muito mais.\r
\r
### Ferramentas Essenciais do Desenvolvedor\r
\r
Para construir para a web, voc precisa de algumas ferramentas bsicas:\r
\r
*   **Navegador Web:** Essencial no apenas para ver os sites, mas para desenvolv-los.\r
    *   **Recomendao:** Google Chrome ou Firefox.\r
    *   **Ferramentas de Desenvolvedor (DevTools):** Pressione \`F12\` ou \`Ctrl+Shift+I\` (Cmd+Opt+I no Mac) em seu navegador. Explore as abas "Elements" (para ver o HTML e CSS) e "Console" (para ver erros de JavaScript).\r
*   **Editor de Cdigo:** Onde voc escrever seu cdigo.\r
    *   **Recomendao:** **Visual Studio Code (VS Code)**.  gratuito, poderoso e tem uma comunidade imensa.\r
    *   **Extenses teis para o VS Code:**\r
        *   \`Live Server\`: Atualiza automaticamente a pgina no navegador sempre que voc salva o arquivo.\r
        *   \`Prettier - Code formatter\`: Formata seu cdigo para mant-lo limpo e padronizado.\r
*   **Controle de Verso (Introduo):**\r
    *   **O que  Git?**  um sistema que rastreia as alteraes no seu cdigo ao longo do tempo. Pense nele como um "histrico de salvamentos" superpoderoso, que permite que voc volte no tempo e trabalhe em equipe de forma organizada. Vamos nos aprofundar nisso mais tarde no curso.\r
`,Wet=()=>g.jsx(qe,{content:Ket,backRoute:"/summary",backText:"Voltar ao Sumrio",goRoute:"/html/primeiro-documento",goText:"Prximo: Primeiro Documento"}),Yet=`# Mdulo 1, Aula 2: Seu Primeiro Documento HTML\r
\r
**Objetivo:** Aprender a estrutura bsica de um arquivo HTML e entender o que so tags, elementos e atributos.\r
\r
---\r
\r
### A Estrutura Mnima de um Arquivo HTML\r
\r
Todo arquivo HTML segue uma estrutura padro para que os navegadores possam entend-lo corretamente. Crie um arquivo chamado \`index.html\` e adicione o seguinte cdigo:\r
\r
\`\`\`html\r
<!DOCTYPE html>\r
<html lang="pt-br">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Minha Primeira Pgina</title>\r
</head>\r
<body>\r
    <h1>Ol, Mundo!</h1>\r
    <p>Este  o meu primeiro pargrafo na web.</p>\r
</body>\r
</html>\r
\`\`\`\r
\r
Vamos analisar cada parte:\r
\r
*   \`<!DOCTYPE html>\`: Declarao obrigatria que define o documento como sendo do tipo HTML5.\r
*   \`<html>\`: O elemento raiz que envolve todo o contedo da pgina. O atributo \`lang="pt-br"\` informa ao navegador que o idioma principal da pgina  o portugus do Brasil.\r
*   \`<head>\`: Contm metadados sobre a pgina  informaes que no so exibidas diretamente no contedo, mas so importantes para o navegador e para os motores de busca.\r
    *   \`<meta charset="UTF-8">\`: Garante que caracteres especiais e acentos sejam exibidos corretamente.\r
    *   \`<meta name="viewport" ...>\`: Essencial para o design responsivo. Instrui o navegador a ajustar a largura da pgina  largura da tela do dispositivo.\r
    *   \`<title>\`: Define o ttulo que aparece na aba do navegador.\r
*   \`<body>\`: Contm todo o contedo visvel da pgina: textos, imagens, links, etc.\r
\r
### Elementos e Tags\r
\r
O HTML  composto por **elementos**. A maioria dos elementos  definida por uma **tag de abertura** e uma **tag de fechamento**.\r
\r
*   **Tag de abertura:** \`<p>\`\r
*   **Contedo:** O texto ou outros elementos aqui dentro.\r
*   **Tag de fechamento:** \`</p>\`\r
\r
O conjunto completo (\`<p>Contedo</p>\`) forma um **elemento**.\r
\r
Alguns elementos so "vazios", pois no possuem contedo interno nem tag de fechamento. Por exemplo: \`  \r
\` (quebra de linha) e \`<img>\` (imagem).\r
\r
### Atributos\r
\r
**Atributos** fornecem informaes adicionais sobre um elemento e so sempre especificados na tag de abertura. Eles geralmente vm em pares de nome/valor, como \`nome="valor"\`.\r
\r
Exemplo:\r
\`\`\`html\r
<a href="https://www.google.com">Isso  um link</a>\r
\`\`\`\r
*   A tag  \`<a>\` (ncora/link ).\r
*   O atributo  \`href\` (hypertext reference).\r
*   O valor do atributo  \`"https://www.google.com"\`.\r
\r
**Atributos Globais:** Podem ser usados em quase todas as tags HTML. Os mais importantes que voc usar constantemente so:\r
\r
*   \`id\`: Um identificador **nico** para um elemento na pgina.\r
*   \`class\`: Um ou mais identificadores para agrupar elementos. Vrios elementos podem ter a mesma classe.\r
*   \`style\`: Usado para aplicar estilos CSS diretamente no elemento (veremos mais tarde por que isso deve ser evitado ).\r
`,Xet=()=>g.jsx(qe,{content:Yet,backRoute:"/html/introducao",backText:"Voltar: Introduo",goRoute:"/html/estruturando-conteudo",goText:"Prximo: Estruturando Contedo"}),Jet="# Mdulo 1, Aula 3: Estruturando Contedo com HTML\r\n\r\n**Objetivo:** Aprender a usar as tags fundamentais para estruturar textos e listas.\r\n\r\n---\r\n\r\n### Ttulos e Pargrafos\r\n\r\nA hierarquia de informaes em uma pgina  crucial para a legibilidade e para o SEO (Otimizao para Mecanismos de Busca).\r\n\r\n*   **Ttulos (`<h1>` a `<h6>`):**\r\n    *   `<h1>`: Ttulo principal da pgina. **Use apenas um `<h1>` por pgina.**\r\n    *   `<h2>`: Ttulo de uma seo principal.\r\n    *   `<h3>`: Subttulo de uma seo.\r\n    *   ...e assim por diante at o `<h6>`.\r\n    *   **Importante:** Use os ttulos em ordem hierrquica. No pule de um `<h2>` para um `<h4>`, por exemplo.\r\n\r\n*   **Pargrafos (`<p>`):**\r\n    *   Usado para agrupar blocos de texto. O navegador adiciona automaticamente um espao antes e depois de cada elemento `<p>`.\r\n\r\n```html\r\n<h1>Ttulo Principal do Artigo</h1>\r\n<p>Este  o pargrafo de introduo do nosso artigo.</p>\r\n\r\n<h2>Subttulo da Primeira Seo</h2>\r\n<p>Contedo relacionado  primeira seo.</p>\r\n\r\n<h3>Um detalhe importante</h3>\r\n<p>Mais texto explicando o detalhe.</p>\r\n```\r\n\r\n### Formatao de Texto (nfase)\r\n\r\ns vezes, voc quer dar um destaque especial a uma palavra ou frase.\r\n\r\n*   `<strong>`: Indica que o texto tem **grande importncia** ou seriedade. Os navegadores geralmente o exibem em **negrito**.\r\n*   `<em>` (emphasis): Indica uma **nfase** no texto, que muda o sentido da frase. Os navegadores geralmente o exibem em *itlico*.\r\n*   `<b>`: Deixa o texto em negrito sem adicionar importncia semntica. Use-o quando o `<strong>` no for apropriado.\r\n*   `<i>`: Deixa o texto em itlico sem adicionar nfase. Use para termos tcnicos, nomes de navios, etc.\r\n\r\n**Regra geral:** Prefira `<strong>` e `<em>` em vez de `<b>` e `<i>` por causa do valor semntico (o significado que eles carregam).\r\n\r\n### Quebras e Separaes\r\n\r\n*   `  \r\n` (break): Insere uma quebra de linha nica. Use com moderao. No use `  \r\n` para criar espao entre pargrafos; para isso, use CSS.\r\n*   `<hr>` (horizontal rule): Cria uma linha horizontal e representa uma quebra temtica no contedo (por exemplo, uma mudana de cena em uma histria).\r\n\r\n### Listas\r\n\r\nListas so timas para organizar informaes.\r\n\r\n*   **Lista No Ordenada (`<ul>` - unordered list):** Para itens onde a ordem no importa. Usa marcadores (bullets).\r\n    ```html\r\n    <ul>\r\n        <li>Caf</li>\r\n        <li>Leite</li>\r\n        <li>Acar</li>\r\n    </ul>\r\n    ```\r\n\r\n*   **Lista Ordenada (`<ol>` - ordered list):** Para itens onde a sequncia  importante. Usa nmeros.\r\n    ```html\r\n    <ol>\r\n        <li>Primeiro, misture os ingredientes.</li>\r\n        <li>Segundo, leve ao forno.</li>\r\n        <li>Terceiro, espere esfriar.</li>\r\n    </ol>\r\n    ```\r\n\r\n*   **Item de Lista (`<li>`):**  o elemento que representa cada item dentro de uma `<ul>` ou `<ol>`.\r\n",Qet=()=>g.jsx(qe,{content:Jet,backRoute:"/html/primeiro-documento",backText:"Voltar: Primeiro Documento",goRoute:"/html/links-e-imagens",goText:"Prximo: Links e Imagens"}),Zet='# Mdulo 1, Aula 4: Links e Imagens\r\n\r\n**Objetivo:** Aprender a conectar pginas usando links e a incorporar imagens em seu documento.\r\n\r\n---\r\n\r\n### Links (ncoras)\r\n\r\nA tag `<a>` (ncora)  um dos elementos mais importantes do HTML, pois  ela que torna a web uma... teia!\r\n\r\n*   **Atributo `href` (Hypertext Reference):** Especifica a URL de destino do link.\r\n\r\n#### Tipos de Links\r\n\r\n1.  **Links Externos:** Apontam para um site diferente.\r\n    ```html\r\n    <a href="https://www.google.com">Visite o Google</a>\r\n    ```\r\n\r\n2.  **Links Internos:** Apontam para outra pgina dentro do seu prprio site.\r\n    ```html\r\n    <!-- Supondo que voc tenha um arquivo "sobre.html" na mesma pasta -->\r\n    <a href="sobre.html">Sobre Ns</a>\r\n    ```\r\n\r\n3.  **Links ncora:** Apontam para uma parte especfica da *mesma pgina*. Isso  til para criar ndices em pginas longas.\r\n    *   Primeiro, adicione um atributo `id` ao elemento para o qual voc quer rolar:\r\n        ```html\r\n        <h2 id="secao-contato">Seo de Contato</h2>\r\n        ```\r\n    *   Depois, crie o link usando `#` seguido do `id`:\r\n        ```html\r\n        <a href="#secao-contato">Ir para o Contato</a>\r\n        ```\r\n\r\n#### Abrindo Links em uma Nova Aba\r\n\r\nPara que o link abra em uma nova aba do navegador, use o atributo `target` com o valor `_blank`. Isso  uma boa prtica para links externos, pois mantm o usurio no seu site.\r\n\r\n```html\r\n<a href="https://www.wikipedia.org" target="_blank">Pesquisar na Wikipdia</a>\r\n```\r\n\r\n---\r\n\r\n### Imagens\r\n\r\nA tag `<img>`  usada para incorporar imagens em sua pgina.  uma tag vazia (no tem fechamento ).\r\n\r\n*   **Atributos Essenciais:**\r\n    *   `src` (source): Especifica o caminho (URL) para o arquivo de imagem.\r\n    *   `alt` (alternative text): Fornece um texto descritivo para a imagem.\r\n        *   **CRUCIAL para Acessibilidade:** Leitores de tela leem o texto `alt` para usurios com deficincia visual.\r\n        *   **CRUCIAL para SEO:** Motores de busca usam o `alt` para entender o contedo da imagem.\r\n        *   Se a imagem no carregar, o texto `alt` ser exibido em seu lugar.\r\n\r\n```html\r\n<img src="imagens/logo-empresa.png" alt="Logotipo da Empresa XPTO">\r\n```\r\n\r\n#### Caminhos de Imagem (`src`)\r\n\r\n*   **URL Absoluta:** Um link completo para uma imagem hospedada em outro lugar.\r\n    ```html\r\n    <img src="https://www.exemplo.com/imagem.jpg" alt="Descrio">\r\n    ```\r\n*   **Caminho Relativo:** O caminho a partir do seu arquivo HTML.\r\n    *   `imagem.jpg`: A imagem est na mesma pasta que o HTML.\r\n    *   `imagens/imagem.jpg`: A imagem est dentro de uma pasta chamada `imagens`.\r\n    *   `../imagem.jpg`: A imagem est na pasta "pai" (um nvel acima ).\r\n\r\n#### Formatos de Imagem para a Web\r\n\r\n*   **JPEG/JPG:** Ideal para fotografias.\r\n*   **PNG:** Ideal para logos, cones e imagens que precisam de fundo transparente.\r\n*   **GIF:** Para animaes simples.\r\n*   **SVG:** Grficos vetoriais escalveis. Perfeito para cones e logos, pois no perde qualidade ao ser redimensionado.\r\n*   **WebP:** Um formato moderno que oferece alta qualidade com tamanhos de arquivo menores (prefervel quando possvel).\r\n',ett=()=>g.jsx(qe,{content:Zet,backRoute:"/html/estruturando-conteudo",backText:"Voltar: Estruturando Contedo",goRoute:"/html/semantico",goText:"Prximo: HTML Semntico"}),ttt=`# Mdulo 1, Aula 5: HTML Semntico - A Base de um Site Profissional\r
\r
**Objetivo:** Entender a importncia do HTML semntico e aprender a usar as tags estruturais que do significado ao contedo.\r
\r
---\r
\r
### O que  e por que usar HTML Semntico?\r
\r
HTML semntico significa usar as tags HTML corretas para o propsito correto. Em vez de usar a tag \`<div>\` para tudo, usamos tags que descrevem o tipo de contedo que elas contm.\r
\r
**Por que isso  to importante?**\r
\r
1.  **Acessibilidade:** Leitores de tela, usados por pessoas com deficincia visual, utilizam a semntica para navegar pela pgina. Uma tag \`<nav>\` diz a eles "isto  a navegao principal", enquanto um \`<h1>\` diz "este  o ttulo mais importante".\r
2.  **SEO (Search Engine Optimization):** Motores de busca como o Google analisam a estrutura semntica para entender a hierarquia e o contexto do seu contedo, o que pode melhorar seu ranking nos resultados de busca.\r
3.  **Manuteno:** Um cdigo semntico  muito mais fcil de ler e entender para outros desenvolvedores (e para voc mesmo no futuro). Fica bvio qual parte do cdigo  o cabealho, qual  o rodap, etc.\r
\r
### As Tags Estruturais Semnticas\r
\r
O HTML5 introduziu vrias tags para definir as diferentes partes de uma pgina web.\r
\r
*   \`<header>\`: Representa o cabealho de uma pgina ou de uma seo. Geralmente contm o logo, o ttulo principal (\`<h1>\`) e a navegao principal.\r
*   \`<nav>\`: Usada para agrupar os links de navegao principais do site.\r
*   \`<main>\`: Define o contedo **principal e nico** da pgina. Todo o contedo dentro de \`<main>\` deve ser exclusivo daquela pgina. **S pode haver um \`<main>\` por pgina.**\r
*   \`<article>\`: Representa um bloco de contedo completo e autossuficiente que poderia, em teoria, ser distribudo de forma independente. Exemplos: um post de blog, uma notcia, um comentrio de frum.\r
*   \`<section>\`: Agrupa contedos relacionados tematicamente. Geralmente, cada \`<section>\` tem seu prprio ttulo (ex: \`<h2>\`).\r
*   \`<aside>\`: Define um contedo que est relacionado ao contedo principal, mas no  parte essencial dele. Exemplos: uma barra lateral (sidebar) com links relacionados, biografias de autor, publicidade.\r
*   \`<footer>\`: Representa o rodap de uma pgina ou de uma seo. Geralmente contm informaes de copyright, links para polticas de privacidade, etc.\r
*   \`<figure>\` e \`<figcaption>\`: \`<figure>\`  usada para agrupar mdias como imagens, diagramas ou vdeos. \`<figcaption>\` fornece uma legenda para essa mdia.\r
\r
### Exemplo de Estrutura Semntica\r
\r
\`\`\`html\r
<body>\r
    <header>\r
        <h1>Meu Blog de Tecnologia</h1>\r
        <nav>\r
            <ul>\r
                <li><a href="/">Home</a></li>\r
                <li><a href="/sobre.html">Sobre</a></li>\r
            </ul>\r
        </nav>\r
    </header>\r
\r
    <main>\r
        <article>\r
            <h2>O que  HTML Semntico?</h2>\r
            <p>Pargrafos explicando o conceito...</p>\r
            <figure>\r
                <img src="code.jpg" alt="Exemplo de cdigo HTML semntico.">\r
                <figcaption>Estrutura de uma pgina com tags semnticas.</figcaption>\r
            </figure>\r
        </article>\r
\r
        <section>\r
            <h2>Comentrios</h2>\r
            <p>Deixe seu comentrio abaixo!</p>\r
        </section>\r
    </main>\r
\r
    <aside>\r
        <h3>Posts Relacionados</h3>\r
        <ul>\r
            <li><a href="#">O que  CSS?</a></li>\r
            <li><a href="#">O que  JavaScript?</a></li>\r
        </ul>\r
    </aside>\r
\r
    <footer>\r
        <p>&copy; 2025 Meu Blog de Tecnologia. Todos os direitos reservados.</p>\r
    </footer>\r
</body>\r
\`\`\`\r
\r
### \`<div>\` vs. Tags Semnticas\r
\r
A tag \`<div>\` ainda  muito til, mas deve ser seu ltimo recurso. Use-a quando no houver uma tag semntica mais apropriada. Seu principal uso hoje  para agrupar elementos com o nico propsito de aplicar estilos CSS (por exemplo, criar um container para centralizar o layout).\r
`,ntt=()=>g.jsx(qe,{content:ttt,backRoute:"/html/links-e-imagens",backText:"Voltar: Links e Imagens",goRoute:"/html/projeto-blog",goText:"Prximo: Projeto Prtico"}),rtt='# Projeto Prtico do Mdulo 1: Criar a Estrutura de uma Pgina de Blog\r\n\r\n**Objetivo:** Aplicar todos os conceitos de HTML aprendidos para construir a estrutura semntica de uma pgina de blog.\r\n\r\n---\r\n\r\n### Descrio\r\n\r\nNeste projeto, voc criar um nico arquivo HTML, `index.html`, que representar a pgina de um post de blog. A pgina ainda no ter nenhum estilo visual (cores, fontes, etc.)  nosso foco  100% na **estrutura correta e semntica** do contedo.\r\n\r\n### Requisitos\r\n\r\nCrie um arquivo `index.html` e siga os requisitos abaixo.\r\n\r\n1.  **Estrutura Bsica:**\r\n    *   O arquivo deve comear com a declarao `<!DOCTYPE html>`.\r\n    *   Deve conter as tags `<html>`, `<head>` e `<body>`.\r\n    *   Dentro de `<head>`, inclua:\r\n        *   A metatag `charset="UTF-8"`.\r\n        *   A metatag `name="viewport"`.\r\n        *   Um `<title>` para a pgina (ex: "Post do Blog: Minha Jornada no Desenvolvimento").\r\n\r\n2.  **Cabealho (`<header>`):**\r\n    *   Crie um `<header>` no topo do `<body>`.\r\n    *   Dentro dele, adicione um `<h1>` com o nome do seu blog (ex: "Blog do Desenvolvedor").\r\n    *   Abaixo do `<h1>`, adicione uma tag `<nav>` para a navegao principal.\r\n    *   Dentro da `<nav>`, crie uma lista no ordenada (`<ul>`) com pelo menos trs itens de lista (`<li>`).\r\n    *   Cada item da lista deve conter um link (`<a>`). Os links podem apontar para `"#"` por enquanto (ex: `<a href="#">Home</a>`).\r\n\r\n3.  **Contedo Principal (`<main>`):**\r\n    *   Aps o `<header>`, crie a tag `<main>`.\r\n    *   Dentro de `<main>`, adicione uma tag `<article>` para o post do blog.\r\n    *   O `<article>` deve conter:\r\n        *   Um `<h2>` com o ttulo do post.\r\n        *   Pelo menos dois pargrafos (`<p>`) com texto simulado ("Lorem ipsum...").\r\n        *   Uma imagem (`<img>`) com os atributos `src` e `alt` preenchidos. Voc pode usar uma imagem de placeholder como `https://via.placeholder.com/600x300`.\r\n        *   Uma lista (ordenada ou no ordenada ) com alguns pontos chave do post.\r\n\r\n4.  **Barra Lateral (`<aside>`):**\r\n    *   Aps o `<main>`, adicione uma tag `<aside>`.\r\n    *   Dentro dela, coloque um `<h3>` com o ttulo "Posts Relacionados".\r\n    *   Crie uma `<ul>` com links (`<a>`) para outros posts fictcios.\r\n\r\n5.  **Rodap (`<footer>`):**\r\n    *   No final do `<body>`, crie uma tag `<footer>`.\r\n    *   Dentro dela, adicione um pargrafo (`<p>`) com uma nota de copyright (ex: `&copy; 2025 Nome do Blog`).\r\n\r\n### Como Verificar seu Trabalho\r\n\r\nAbra o arquivo `index.html` no seu navegador. A pgina parecer muito simples e sem estilo. Isso  o esperado! O importante  que a estrutura do contedo esteja correta. Use as "Ferramentas de Desenvolvedor" (`F12`) na aba "Elements" para inspecionar seu cdigo e ver como o navegador interpretou a hierarquia das suas tags.\r\n',ott=()=>g.jsx(qe,{content:rtt,backRoute:"/html/semantico",backText:"Voltar: HTML Semntico",goRoute:"/css/introducao",goText:"Prximo Mdulo: CSS"}),att=`# Mdulo 2, Aula 1: Introduo ao CSS\r
\r
**Objetivo:** Entender o que  CSS, como ele funciona e as trs maneiras de adicion-lo a um documento HTML.\r
\r
---\r
\r
### O que  CSS?\r
\r
CSS (Cascading Style Sheets, ou Folhas de Estilo em Cascata)  a linguagem que usamos para descrever a apresentao de um documento HTML. Com o CSS, voc controla:\r
\r
*   **Cores:** de textos, fundos, bordas.\r
*   **Fontes:** tipo, tamanho, peso (negrito).\r
*   **Espaamento:** margens, preenchimento (padding), espao entre letras.\r
*   **Layout:** como os elementos so posicionados na pgina (um ao lado do outro, um abaixo do outro).\r
*   **Responsividade:** como o site se adapta a diferentes tamanhos de tela (desktop, tablet, celular).\r
\r
Se o HTML  o esqueleto, o CSS  a roupa, a maquiagem e a postura.\r
\r
### A Sintaxe do CSS\r
\r
Uma regra CSS  composta por duas partes principais: um **seletor** e um **bloco de declarao**.\r
\r
\`\`\`css\r
/* Isso  um comentrio em CSS */\r
\r
seletor {\r
  propriedade: valor;\r
  outra-propriedade: outro-valor;\r
}\r
\`\`\`\r
\r
*   **Seletor:** Aponta para o(s) elemento(s) HTML que voc quer estilizar. No exemplo \`p\`, estamos selecionando todos os pargrafos.\r
*   **Bloco de Declarao:** Fica entre chaves \`{}\` e contm uma ou mais declaraes.\r
*   **Declarao:**  um par de \`propriedade: valor;\`.\r
    *   **Propriedade:** O atributo de estilo que voc quer mudar (ex: \`color\`, \`font-size\`).\r
    *   **Valor:** A configurao que voc quer aplicar  propriedade (ex: \`blue\`, \`16px\`).\r
\r
**Exemplo prtico:**\r
\`\`\`css\r
p {\r
  color: darkblue;\r
  font-size: 16px;\r
}\r
\`\`\`\r
Esta regra faz com que todos os elementos \`<p>\` na pgina tenham o texto na cor azul escuro e com 16 pixels de tamanho.\r
\r
### 3 Maneiras de Adicionar CSS a uma Pgina\r
\r
Existem trs formas de aplicar CSS, mas uma delas  a mais recomendada para projetos profissionais.\r
\r
1.  **CSS Externo (External Stylesheet) - A Melhor Prtica**\r
    Voc cria um arquivo separado com a extenso \`.css\` (ex: \`estilos.css\`) e o vincula ao seu arquivo HTML usando a tag \`<link>\` dentro do \`<head>\`.\r
\r
    **No seu \`index.html\`:**\r
    \`\`\`html\r
    <head>\r
        <link rel="stylesheet" href="estilos.css">\r
    </head>\r
    \`\`\`\r
    **No seu \`estilos.css\`:**\r
    \`\`\`css\r
    body {\r
        background-color: #f0f0f0;\r
    }\r
    h1 {\r
        color: steelblue;\r
    }\r
    \`\`\`\r
    **Vantagens:**\r
    *   **Organizao:** Separa a estrutura (HTML) da apresentao (CSS).\r
    *   **Reutilizao:** O mesmo arquivo \`.css\` pode ser usado por vrias pginas HTML.\r
    *   **Manuteno:** Muito mais fcil de gerenciar estilos em um s lugar.\r
\r
2.  **CSS Interno (Internal Stylesheet)**\r
    Voc coloca o cdigo CSS diretamente dentro da tag \`<style>\` no \`<head>\` do seu arquivo HTML.\r
\r
    \`\`\`html\r
    <head>\r
        <style>\r
            body {\r
                background-color: #f0f0f0;\r
            }\r
            h1 {\r
                color: steelblue;\r
            }\r
        </style>\r
    </head>\r
    \`\`\`\r
    **Quando usar?** til para estilos muito especficos de uma nica pgina ou para testes rpidos. Geralmente evitado em projetos maiores.\r
\r
3.  **CSS Inline (Inline Style)**\r
    Voc aplica o estilo diretamente em um elemento HTML usando o atributo \`style\`.\r
\r
    \`\`\`html\r
    <h1 style="color: steelblue; font-size: 32px;">Meu Ttulo</h1>\r
    \`\`\`\r
    **Quando usar?** Quase nunca.  considerado uma m prtica porque mistura estrutura e apresentao, dificulta a manuteno e tem alta especificidade (vamos ver isso depois), o que pode causar conflitos. Use apenas em situaes muito especficas, como em emails HTML ou quando um JavaScript precisa aplicar um estilo dinmico.\r
\r
**Para este curso, usaremos SEMPRE a abordagem de CSS Externo.**\r
`,stt=()=>g.jsx(qe,{content:att,backRoute:"/html/projeto-blog",backText:"Voltar: Projeto HTML",goRoute:"/css/seletores",goText:"Prximo: Seletores"}),itt=`# Mdulo 2, Aula 2: Seletores Bsicos e Combinadores\r
\r
**Objetivo:** Aprender a selecionar precisamente os elementos HTML que voc deseja estilizar usando os seletores mais comuns.\r
\r
---\r
\r
Seletores so a base do CSS. Domin-los significa ter controle total sobre a estilizao da sua pgina.\r
\r
### Seletores Bsicos\r
\r
1.  **Seletor de Tipo (ou de Tag):** Seleciona todos os elementos de um determinado tipo.\r
    \`\`\`css\r
    /* Estiliza todos os pargrafos */\r
    p {\r
      line-height: 1.6;\r
    }\r
    /* Estiliza todos os links */\r
    a {\r
      text-decoration: none;\r
    }\r
    \`\`\`\r
\r
2.  **Seletor de Classe (\`.\`):** Seleciona todos os elementos que possuem um determinado atributo \`class\`. Este  o seletor **mais usado e verstil**.\r
    *No HTML:*\r
    \`\`\`html\r
    <p class="destaque">Este pargrafo  importante.</p>\r
    <button class="btn-primario">Comprar</button>\r
    \`\`\`\r
    *No CSS:*\r
    \`\`\`css\r
    /* O ponto (.) indica que  uma classe */\r
    .destaque {\r
      background-color: yellow;\r
    }\r
    .btn-primario {\r
      background-color: blue;\r
      color: white;\r
    }\r
    \`\`\`\r
    Um elemento pode ter mltiplas classes: \`<div class="card produto destaque">\`.\r
\r
3.  **Seletor de ID (\`#\`):** Seleciona **um nico elemento** que possui um determinado atributo \`id\`. Lembre-se: um \`id\` deve ser **nico** na pgina.\r
    *No HTML:*\r
    \`\`\`html\r
    <header id="cabecalho-principal"></header>\r
    \`\`\`\r
    *No CSS:*\r
    \`\`\`css\r
    /* A cerquilha (#) indica que  um ID */\r
    #cabecalho-principal {\r
      padding: 20px;\r
    }\r
    \`\`\`\r
    **Cuidado:** Use IDs com moderao. Eles tm alta "especificidade" e no so reutilizveis como as classes. So mais comuns para ncoras de pgina ou para manipulao com JavaScript.\r
\r
4.  **Seletor Universal (\`*\`):** Seleciona **todos** os elementos da pgina.\r
    \`\`\`css\r
    /* Geralmente usado para resets ou configuraes globais */\r
    * {\r
      box-sizing: border-box; /* Veremos isso em breve! */\r
      margin: 0;\r
      padding: 0;\r
    }\r
    \`\`\`\r
\r
### Combinadores de Seletores\r
\r
Combinadores permitem criar seletores mais especficos baseados na relao entre os elementos no HTML.\r
\r
1.  **Combinador Descendente (espao):** Seleciona um elemento que est *dentro* de outro, em qualquer nvel de aninhamento.\r
    \`\`\`css\r
    /* Seleciona QUALQUER link <a> que esteja DENTRO de um <nav> */\r
    nav a {\r
      color: green;\r
    }\r
    \`\`\`\r
\r
2.  **Combinador de Filho Direto (\`>\`):** Seleciona um elemento que  *filho direto* de outro.\r
    \`\`\`css\r
    /* Seleciona APENAS o <li> que  filho DIRETO de uma <ul> */\r
    /* No selecionaria um <li> dentro de outra lista aninhada */\r
    ul > li {\r
      list-style-type: square;\r
    }\r
    \`\`\`\r
\r
3.  **Combinador de Irmo Adjacente (\`+\`):** Seleciona um elemento que vem *imediatamente depois* de outro elemento, no mesmo nvel hierrquico.\r
    \`\`\`css\r
    /* Seleciona o primeiro <p> que vem LOGO APS um <h2> */\r
    h2 + p {\r
      font-style: italic;\r
      color: #555;\r
    }\r
    \`\`\`\r
\r
### Agrupamento de Seletores\r
\r
Voc pode aplicar as mesmas regras a mltiplos seletores separando-os por vrgula.\r
\`\`\`css\r
/* Aplica as mesmas regras para h1, h2 e h3 */\r
h1, h2, h3 {\r
  font-family: 'Arial', sans-serif;\r
  color: #333;\r
}\r
\`\`\`\r
`,ltt=()=>g.jsx(qe,{content:itt,backRoute:"/css/introducao",backText:"Voltar: Introduo ao CSS",goRoute:"/css/box-model",goText:"Prximo: Box Model"}),ctt='# Mdulo 2, Aula 3: O Box Model\r\n\r\n**Objetivo:** Entender o conceito mais fundamental do layout em CSS: o Box Model (Modelo de Caixa).\r\n\r\n---\r\n\r\n### Todo Elemento  uma Caixa\r\n\r\nNo CSS, todo elemento HTML  tratado como uma caixa retangular. O **Box Model**  o conjunto de regras que define como essa caixa  dimensionada e como ela interage com as outras caixas ao seu redor.\r\n\r\nEssa caixa  composta por quatro reas, de dentro para fora:\r\n\r\n1.  **Contedo (Content):** A rea onde seu texto e imagens aparecem. Suas dimenses so `width` (largura) e `height` (altura).\r\n2.  **Preenchimento (Padding):** Uma rea transparente ao redor do contedo. Ele "empurra" o contedo para dentro, criando um espao interno.\r\n3.  **Borda (Border):** Uma linha que fica entre o padding e a margem. Ela tem espessura, estilo (slida, pontilhada) e cor.\r\n4.  **Margem (Margin):** Uma rea transparente do lado de fora da borda. Ela "empurra" outras caixas para longe, criando espao entre os elementos.\r\n\r\n![Diagrama do Box Model](https://www.w3schools.com/css/boxmodel.gif )\r\n*(Crdito da imagem: W3Schools)*\r\n\r\n### Propriedades do Box Model\r\n\r\n*   **`width` e `height`:** Definem a largura e a altura da rea de **contedo**.\r\n*   **`padding`:** Define o espaamento interno.\r\n*   **`margin`:** Define o espaamento externo.\r\n*   **`border`:** Define a borda.\r\n\r\n**Exemplo:**\r\n```css\r\n.caixa-exemplo {\r\n  width: 300px;\r\n  height: 150px;\r\n  padding: 20px;\r\n  border: 5px solid black;\r\n  margin: 40px;\r\n}\r\n```\r\n\r\n### A Propriedade `box-sizing` (Extremamente Importante!)\r\n\r\nPor padro (`box-sizing: content-box;`), quando voc define `width: 300px`, essa  a largura apenas do **contedo**. A largura total da caixa na tela ser:\r\n`width` + `padding-left` + `padding-right` + `border-left` + `border-right`.\r\nIsso  confuso e dificulta o clculo de layouts.\r\n\r\n**A soluo  `box-sizing: border-box;`**\r\n\r\nQuando voc usa `border-box`, a `width` e a `height` que voc define passam a ser a largura e a altura **totais** da caixa, j incluindo o `padding` e a `border`. O navegador ajusta o espao do contedo automaticamente.\r\n\r\nIsso torna a criao de layouts **muito mais intuitiva**.\r\n\r\n**Regra de Ouro do CSS Moderno:**\r\n uma prtica universal aplicar `border-box` a todos os elementos no incio do seu CSS.\r\n\r\n```css\r\n*,\r\n*::before,\r\n*::after {\r\n  box-sizing: border-box;\r\n}\r\n```\r\n*O seletor `*` aplica a regra a todos os elementos. `*::before` e `*::after` so pseudo-elementos que tambm devem herdar essa propriedade.*\r\n\r\n### Propriedades Abreviadas (Shorthand)\r\n\r\nPara `margin` e `padding`, voc pode usar uma notao abreviada:\r\n\r\n*   **4 valores:** `margin: 25px 50px 75px 100px;` (topo, direita, baixo, esquerda - sentido horrio)\r\n*   **3 valores:** `margin: 25px 50px 75px;` (topo, direita/esquerda, baixo)\r\n*   **2 valores:** `margin: 25px 50px;` (topo/baixo, direita/esquerda)\r\n*   **1 valor:** `margin: 25px;` (aplica aos 4 lados)\r\n\r\nO mesmo funciona para `padding`.\r\n\r\nPara `border`, a abreviao :\r\n```css\r\n/* border: espessura estilo cor; */\r\nborder: 1px solid #ccc;\r\n```\r\n',utt=()=>g.jsx(qe,{content:ctt,backRoute:"/css/seletores",backText:"Voltar: Seletores",goRoute:"/css/cores-e-unidades",goText:"Prximo: Cores e Unidades"}),dtt='# Mdulo 2, Aula 4: Cores e Unidades\r\n\r\n**Objetivo:** Aprender as diferentes formas de representar cores em CSS e entender as unidades de medida mais comuns para dimensionamento e tipografia.\r\n\r\n---\r\n\r\n### Representando Cores em CSS\r\n\r\nExistem vrias maneiras de definir uma cor. As mais comuns so:\r\n\r\n1.  **Nomes de Cores (Keywords):**\r\n    Existem mais de 140 nomes de cores predefinidos. So timos para testes rpidos.\r\n    ```css\r\n    .alerta {\r\n      color: red;\r\n      background-color: lightyellow;\r\n    }\r\n    ```\r\n\r\n2.  **HEX (Hexadecimal):**\r\n    A forma mais comum na web.  representada por `#` seguido de 6 caracteres (0-9, a-f). Os pares representam Vermelho, Verde e Azul (RGB).\r\n    ```css\r\n    /* #RRGGBB */\r\n    .titulo {\r\n      color: #0000FF; /* Azul puro */\r\n    }\r\n    /* Forma abreviada com 3 dgitos se os pares forem iguais */\r\n    .subtitulo {\r\n      color: #00F; /* Mesmo que #0000FF */\r\n    }\r\n    .fundo {\r\n      background-color: #333; /* Mesmo que #333333 (cinza escuro) */\r\n    }\r\n    ```\r\n\r\n3.  **RGB (Red, Green, Blue):**\r\n    Define a cor pela intensidade de vermelho, verde e azul, com valores de 0 a 255.\r\n    ```css\r\n    .caixa {\r\n      background-color: rgb(51, 51, 51); /* Mesmo que #333 */\r\n    }\r\n    ```\r\n\r\n4.  **RGBA (Red, Green, Blue, Alpha):**\r\n    Igual ao RGB, mas com um quarto valor, o **Alpha**, que controla a **transparncia/opacidade**. O valor de Alpha vai de `0.0` (totalmente transparente) a `1.0` (totalmente opaco).\r\n    ```css\r\n    .overlay {\r\n      /* Fundo preto com 50% de opacidade */\r\n      background-color: rgba(0, 0, 0, 0.5);\r\n    }\r\n    ```\r\n\r\n### Unidades de Medida em CSS\r\n\r\nAs unidades definem o tamanho de fontes, larguras, margens, etc. Elas se dividem em duas categorias: **absolutas** e **relativas**.\r\n\r\n#### Unidades Absolutas\r\n\r\nTm um tamanho fixo e no mudam. So boas para elementos que voc quer que tenham sempre o mesmo tamanho, independentemente do contexto.\r\n\r\n*   **`px` (Pixels):** A unidade mais comum. 1px  um "ponto" na tela.  uma unidade de referncia slida, mas pode ser problemtica para acessibilidade (no escala bem com as configuraes do navegador do usurio).\r\n\r\n#### Unidades Relativas\r\n\r\nSo flexveis e se adaptam a outros valores, como o tamanho da fonte do elemento pai ou o tamanho da tela. **So essenciais para criar designs responsivos e acessveis.**\r\n\r\n*   **`%` (Porcentagem):** Relativa ao valor da mesma propriedade no elemento pai.\r\n    ```css\r\n    .pai { width: 500px; }\r\n    .filho { width: 50%; } /* O filho ter 250px de largura */\r\n    ```\r\n\r\n*   **`em`:** Relativa ao `font-size` do **elemento pai**. Se o pai tem `font-size: 16px`, ento `2em` ser `32px`.  til para criar componentes escalveis.\r\n\r\n*   **`rem` (Root EM) - A Melhor Unidade para Fontes e Espaamentos:**\r\n    Relativa ao `font-size` do **elemento raiz** (a tag `<html>`). Por padro, nos navegadores, isso  `16px`.\r\n    *   `1rem = 16px`\r\n    *   `1.5rem = 24px`\r\n    *   `0.5rem = 8px`\r\n    **Por que  to bom?** Se um usurio configurar seu navegador para exibir fontes maiores por questes de acessibilidade, todo o seu layout e tipografia definidos com `rem` escalaro proporcionalmente, mantendo a harmonia do design. ** a unidade preferida para `font-size`, `margin`, `padding`, `width` e `height` em componentes.**\r\n\r\n*   **`vw` (Viewport Width) e `vh` (Viewport Height):**\r\n    Relativas ao tamanho da "viewport" (a rea visvel da janela do navegador).\r\n    *   `1vw` = 1% da largura da viewport.\r\n    *   `1vh` = 1% da altura da viewport.\r\n    *   `width: 100vw;` faz um elemento ter a largura exata da tela.\r\n    *   `min-height: 100vh;` faz uma seo ocupar pelo menos a altura inteira da tela.\r\n',ptt=()=>g.jsx(qe,{content:dtt,backRoute:"/css/box-model",backText:"Voltar: Box Model",goRoute:"/css/textos",goText:"Prximo: Trabalhando com Textos"}),ftt="# Mdulo 2, Aula 5: Trabalhando com Textos\r\n\r\n**Objetivo:** Aprender as principais propriedades CSS para estilizar e formatar textos, melhorando a legibilidade e o design.\r\n\r\n---\r\n\r\n### Propriedades Essenciais de Fonte\r\n\r\n*   **`font-family`:** Define a famlia da fonte (o tipo de letra).  uma boa prtica fornecer uma lista de fontes, da mais preferida para a menos, terminando com uma famlia genrica (fallback).\r\n    ```css\r\n    body {\r\n      /* O navegador tentar usar a 'Roboto'. Se no encontrar, tentar a 'Helvetica', depois a 'Arial', e por ltimo, qualquer fonte sem serifa disponvel. */\r\n      font-family: 'Roboto', Helvetica, Arial, sans-serif;\r\n    }\r\n    ```\r\n    *   **`serif`:** Fontes com pequenos traos nas extremidades (ex: Times New Roman).\r\n    *   **`sans-serif`:** Fontes sem serifa, com acabamento limpo (ex: Arial, Helvetica). So as mais comuns para web.\r\n\r\n*   **`font-size`:** Define o tamanho do texto. **Use a unidade `rem` para acessibilidade.**\r\n    ```css\r\n    p {\r\n      font-size: 1rem; /* Geralmente 16px */\r\n    }\r\n    h1 {\r\n      font-size: 2.5rem; /* Geralmente 40px */\r\n    }\r\n    ```\r\n\r\n*   **`font-weight`:** Define o \"peso\" ou a \"grossura\" da fonte.\r\n    *   Valores comuns: `normal` (400), `bold` (700).\r\n    *   Pode usar nmeros: `100`, `200`, ..., `900`. (Depende se a fonte importada suporta esses pesos).\r\n    ```css\r\n    .destaque {\r\n      font-weight: bold;\r\n    }\r\n    ```\r\n\r\n*   **`font-style`:** Geralmente usado para aplicar o estilo itlico.\r\n    *   Valores: `normal`, `italic`.\r\n    ```css\r\n    em {\r\n      font-style: italic;\r\n    }\r\n    ```\r\n\r\n### Propriedades de Estilo de Texto\r\n\r\n*   **`color`:** Define a cor do texto.\r\n    ```css\r\n    p {\r\n      color: #333333; /* Cinza escuro para boa legibilidade */\r\n    }\r\n    ```\r\n\r\n*   **`text-align`:** Alinha o texto horizontalmente dentro do seu elemento.\r\n    *   Valores: `left` (padro), `right`, `center`, `justify`.\r\n    ```css\r\n    h1 {\r\n      text-align: center;\r\n    }\r\n    ```\r\n\r\n*   **`text-decoration`:** Adiciona ou remove decoraes do texto. Mais usado para remover o sublinhado de links.\r\n    ```css\r\n    a {\r\n      text-decoration: none; /* Remove o sublinhado */\r\n      color: steelblue;\r\n    }\r\n    /* Adiciona o sublinhado de volta quando o mouse passa por cima */\r\n    a:hover {\r\n      text-decoration: underline;\r\n    }\r\n    ```\r\n\r\n*   **`text-transform`:** Transforma o texto para maisculas ou minsculas.\r\n    *   Valores: `none` (padro), `uppercase`, `lowercase`, `capitalize` (primeira letra de cada palavra em maiscula).\r\n    ```css\r\n    h1 {\r\n      text-transform: uppercase;\r\n    }\r\n    ```\r\n\r\n*   **`line-height`:** Define a altura da linha, ou o espaamento entre as linhas de um texto. Para boa legibilidade em pargrafos, um valor entre `1.5` e `1.7` (sem unidade)  recomendado.\r\n    ```css\r\n    p {\r\n      line-height: 1.6; /* 1.6 vezes o tamanho da fonte */\r\n    }\r\n    ```\r\n",mtt=()=>g.jsx(qe,{content:ftt,backRoute:"/css/cores-e-unidades",backText:"Voltar: Cores e Unidades",goRoute:"/css/intro-flexbox",goText:"Prximo: Introduo ao Flexbox"}),htt=`# Mdulo 2, Aula 6: Introduo ao Flexbox\r
\r
**Objetivo:** Entender o que  o Flexbox, por que ele revolucionou o layout em CSS e aprender seus conceitos fundamentais.\r
\r
---\r
\r
### O Problema do Layout Antigamente\r
\r
Antes do Flexbox, criar layouts complexos em CSS era difcil. Tcnicas como \`float\`, \`position\` e \`table\` eram usadas, mas eram "hacks" que traziam muitos efeitos colaterais, como a necessidade de limpar floats (\`clearfix\`) e dificuldades com alinhamento vertical.\r
\r
### O que  o Flexbox?\r
\r
O **Flexible Box Layout Module**, ou simplesmente **Flexbox**,  um modelo de layout unidimensional projetado para distribuir espao e alinhar itens dentro de um continer.\r
\r
**"Unidimensional"** significa que o Flexbox organiza os itens em uma nica direo por vez: ou como uma **linha** (horizontal) ou como uma **coluna** (vertical).\r
\r
Com Flexbox, tarefas que antes eram complicadas se tornam triviais:\r
*   Centralizar um item perfeitamente (vertical e horizontalmente).\r
*   Fazer com que os itens de uma lista ocupem todo o espao disponvel, dividindo-o igualmente.\r
*   Criar layouts que se reorganizam automaticamente quando o tamanho da tela muda.\r
*   Alinhar itens em diferentes alturas de forma consistente.\r
\r
### Os 2 Conceitos Fundamentais do Flexbox\r
\r
O Flexbox funciona com base em uma relao pai-filho:\r
\r
1.  **O Flex Container:**  o elemento "pai". Voc o cria aplicando a propriedade \`display: flex;\` a ele. Todas as propriedades do continer definem como os filhos se comportaro *em grupo*.\r
\r
2.  **Os Flex Items:** So os elementos "filhos diretos" do flex container. Voc pode aplicar propriedades especficas a eles para controlar seu comportamento individual dentro do grupo.\r
\r
![Diagrama Flexbox](https://css-tricks.com/wp-content/uploads/2018/10/01-main-axis-cross-axis.svg )\r
*(Crdito da imagem: CSS-Tricks)*\r
\r
### Eixos do Flexbox (Main Axis e Cross Axis)\r
\r
Diferente de um sistema de coordenadas fixo (x, y), o Flexbox trabalha com eixos que podem mudar de direo.\r
\r
*   **Eixo Principal (Main Axis):**  a direo principal na qual os flex items so distribudos. Por padro,  horizontal (da esquerda para a direita).\r
*   **Eixo Transversal (Cross Axis):**  o eixo perpendicular ao eixo principal. Por padro,  vertical (de cima para baixo).\r
\r
A mgica do Flexbox  que voc pode mudar a direo desses eixos com a propriedade \`flex-direction\`.\r
\r
*   Se \`flex-direction: row;\` (padro), o Main Axis  horizontal.\r
*   Se \`flex-direction: column;\`, o Main Axis  vertical.\r
\r
Entender qual eixo  o principal e qual  o transversal  a chave para dominar o alinhamento no Flexbox. Nas prximas aulas, veremos as propriedades que controlam o alinhamento em cada um desses eixos.\r
`,gtt=()=>g.jsx(qe,{content:htt,backRoute:"/css/textos",backText:"Voltar: Trabalhando com Textos",goRoute:"/css/flexbox-container",goText:"Prximo: Flexbox Container"}),btt=`# Mdulo 2, Aula 7: Flexbox na Prtica (Propriedades do Container)\r
\r
**Objetivo:** Aprender e aplicar as principais propriedades do Flex Container para controlar o layout dos seus itens.\r
\r
---\r
\r
Para comear, vamos imaginar este HTML:\r
\r
\`\`\`html\r
<div class="container">\r
  <div class="item">1</div>\r
  <div class="item">2</div>\r
  <div class="item">3</div>\r
</div>\r
\`\`\`\r
\r
E este CSS inicial:\r
\r
\`\`\`css\r
.container {\r
  display: flex;\r
  border: 2px solid #333;\r
  min-height: 200px;\r
}\r
.item {\r
  background-color: steelblue;\r
  color: white;\r
  padding: 20px;\r
  margin: 10px;\r
}\r
\`\`\`\r
\r
Agora, vamos aplicar as propriedades ao \`.container\`.\r
\r
### 1. \`flex-direction\`: Definindo a Direo do Eixo Principal\r
\r
Esta propriedade define se os itens se organizaro em linha ou em coluna.\r
\r
*   \`row\` (padro): Itens dispostos horizontalmente, da esquerda para a direita.\r
*   \`row-reverse\`: Itens dispostos horizontalmente, da direita para a esquerda.\r
*   \`column\`: Itens dispostos verticalmente, de cima para baixo.\r
*   \`column-reverse\`: Itens dispostos verticalmente, de baixo para cima.\r
\r
\`\`\`css\r
.container {\r
  display: flex;\r
  flex-direction: column; /* Os itens agora ficaro um embaixo do outro */\r
}\r
\`\`\`\r
\r
### 2. \`justify-content\`: Alinhamento no Eixo Principal (Main Axis)\r
\r
Esta propriedade distribui o espao *sobrando* ao longo do **eixo principal**.\r
\r
*   \`flex-start\` (padro): Agrupa os itens no incio do eixo principal.\r
*   \`flex-end\`: Agrupa os itens no final do eixo principal.\r
*   \`center\`: Centraliza os itens no eixo principal.\r
*   \`space-between\`: Distribui os itens igualmente. O primeiro item fica no incio, o ltimo no final, e o espao  distribudo entre eles.\r
*   \`space-around\`: Distribui os itens com espao igual ao redor deles (o espao nas extremidades  metade do espao entre os itens).\r
*   \`space-evenly\`: Distribui os itens com espao perfeitamente igual entre eles e nas extremidades.\r
\r
\`\`\`css\r
.container {\r
  display: flex;\r
  /* Centraliza os itens horizontalmente (se flex-direction for row) */\r
  justify-content: center;\r
}\r
\`\`\`\r
\r
### 3. \`align-items\`: Alinhamento no Eixo Transversal (Cross Axis)\r
\r
Esta propriedade alinha os itens ao longo do **eixo transversal**.\r
\r
*   \`stretch\` (padro): Estica os itens para preencherem a altura (ou largura) do continer.\r
*   \`flex-start\`: Alinha os itens no incio do eixo transversal.\r
*   \`flex-end\`: Alinha os itens no final do eixo transversal.\r
*   \`center\`: Centraliza os itens no meio do eixo transversal.\r
*   \`baseline\`: Alinha os itens pela sua linha de base de texto.\r
\r
\`\`\`css\r
.container {\r
  display: flex;\r
  justify-content: center;\r
  /* Centraliza os itens verticalmente (se flex-direction for row) */\r
  align-items: center;\r
}\r
\`\`\`\r
**Dica de Ouro:** \`justify-content: center;\` e \`align-items: center;\` em um flex container  a forma mais fcil de centralizar perfeitamente um item filho na tela.\r
\r
### 4. \`flex-wrap\`: Controlando a Quebra de Linha\r
\r
Por padro, os flex items tentaro caber todos em uma nica linha, mesmo que isso os esprema. \`flex-wrap\` controla esse comportamento.\r
\r
*   \`nowrap\` (padro): No permite a quebra de linha.\r
*   \`wrap\`: Permite que os itens quebrem para a linha seguinte se no houver espao.\r
*   \`wrap-reverse\`: Quebra para a linha seguinte, mas em ordem inversa.\r
\r
\`\`\`css\r
.container {\r
  display: flex;\r
  flex-wrap: wrap; /* Se os itens no couberem, eles vo para a linha de baixo */\r
}\r
\`\`\`\r
\r
### Propriedade Abreviada: \`flex-flow\`\r
\r
Voc pode combinar \`flex-direction\` e \`flex-wrap\` em uma nica propriedade.\r
\r
\`\`\`css\r
/* flex-flow: <flex-direction> <flex-wrap>; */\r
.container {\r
  flex-flow: row wrap;\r
}\r
\`\`\`\r
`,ytt=()=>g.jsx(qe,{content:btt,backRoute:"/css/intro-flexbox",backText:"Voltar: Introduo ao Flexbox",goRoute:"/css/flexbox-items",goText:"Prximo: Flexbox Items"}),vtt='# Mdulo 2, Aula 8: Flexbox na Prtica (Propriedades dos Itens)\r\n\r\n**Objetivo:** Aprender a controlar o comportamento individual dos flex items, como sua ordem, crescimento e encolhimento.\r\n\r\n---\r\n\r\nEnquanto as propriedades do container organizam o grupo, as propriedades dos itens ajustam excees e comportamentos individuais. Continuaremos usando o mesmo HTML da aula anterior.\r\n\r\n### 1. `order`: Mudando a Ordem Visual\r\n\r\nPor padro, os flex items so exibidos na ordem em que aparecem no HTML. A propriedade `order` permite que voc mude essa ordem visualmente, sem alterar o HTML.\r\n\r\n*   O valor padro para todos os itens  `0`.\r\n*   Itens com valores menores de `order` aparecem primeiro.\r\n*   Itens com o mesmo `order` mantm sua ordem original entre si.\r\n\r\n```css\r\n/* No CSS */\r\n.item-1 { order: 2; } /* Ser o segundo */\r\n.item-2 { order: 1; } /* Ser o primeiro */\r\n.item-3 { order: 3; } /* Ser o terceiro */\r\n```\r\nA ordem visual na tela ser: **item 2, item 1, item 3**.\r\n\r\n### 2. `flex-grow`: A Habilidade de Crescer\r\n\r\nEsta propriedade define a capacidade de um flex item "crescer" e ocupar o espao livre no container.\r\n\r\n*   O valor  um nmero sem unidade que funciona como uma proporo.\r\n*   O padro  `0`, o que significa que o item no cresce.\r\n*   Se todos os itens tiverem `flex-grow: 1;`, eles dividiro o espao livre igualmente.\r\n*   Se um item tiver `flex-grow: 2;` e os outros tiverem `flex-grow: 1;`, ele tentar ocupar o dobro do espao livre em relao aos outros.\r\n\r\n```css\r\n.item {\r\n  flex-grow: 1; /* Todos os itens crescem igualmente para preencher o container */\r\n}\r\n\r\n.item-largo {\r\n  flex-grow: 2; /* Este item ser mais largo que os outros que tm flex-grow: 1 */\r\n}\r\n```\r\n\r\n### 3. `flex-shrink`: A Habilidade de Encolher\r\n\r\n o oposto de `flex-grow`. Define a capacidade de um item encolher se no houver espao suficiente no container.\r\n\r\n*   O padro  `1`, o que significa que os itens podem encolher para caber.\r\n*   Se voc definir `flex-shrink: 0;`, o item no encolher e manter seu tamanho original, mesmo que isso "estoure" o container.\r\n\r\n```css\r\n.item-fixo {\r\n  flex-shrink: 0; /* Este item no vai encolher, mesmo que falte espao */\r\n}\r\n```\r\n\r\n### 4. `flex-basis`: O Tamanho Inicial\r\n\r\nDefine o tamanho "ideal" ou inicial de um item antes que o espao livre seja distribudo.\r\n\r\n*   Pode ser um valor em `px`, `%`, `rem`, etc.\r\n*   O valor padro  `auto`, que geralmente significa que o tamanho do item  baseado no seu contedo.\r\n\r\nSe voc definir `flex-basis: 200px`, o navegador tentar dar 200px de largura ao item (no eixo principal) e depois aplicar `flex-grow` ou `flex-shrink` a partir desse tamanho base.\r\n\r\n### Propriedade Abreviada: `flex` (Muito Importante!)\r\n\r\n a forma mais comum de definir as trs propriedades acima de uma vez. A sintaxe :\r\n`flex: <flex-grow> <flex-shrink> <flex-basis>;`\r\n\r\nValores comuns que voc ver:\r\n\r\n*   `flex: 0 1 auto;` (Este  o valor padro)\r\n    *   No cresce (`0`), pode encolher (`1`), tamanho base  automtico (`auto`).\r\n*   `flex: 1;` (Abreviao para `flex: 1 1 0;`)\r\n    *   Cresce (`1`), encolhe (`1`), e o tamanho base  `0`. Isso fora os itens a dividirem o espao de forma proporcional ao seu `flex-grow`, sendo timo para layouts de colunas iguais.\r\n*   `flex: auto;` (Abreviao para `flex: 1 1 auto;`)\r\n    *   Cresce, encolhe, e o tamanho base  `auto`.\r\n*   `flex: none;` (Abreviao para `flex: 0 0 auto;`)\r\n    *   No cresce, no encolhe. O item fica com seu tamanho "natural".\r\n\r\n### 5. `align-self`: Sobrescrevendo o `align-items`\r\n\r\nA propriedade `align-self` permite que voc aplique um alinhamento no eixo transversal para **um nico item**, sobrescrevendo o valor de `align-items` definido no container.\r\n\r\n*   Aceita os mesmos valores que `align-items`: `auto` (padro), `flex-start`, `flex-end`, `center`, `stretch`, `baseline`.\r\n\r\n```css\r\n.container {\r\n  display: flex;\r\n  align-items: center; /* Todos os itens ficam centralizados verticalmente */\r\n}\r\n\r\n.item-especial {\r\n  /* Este item especfico ficar alinhado no topo, ignorando o \'center\' do container */\r\n  align-self: flex-start;\r\n}\r\n```\r\n',xtt=()=>g.jsx(qe,{content:vtt,backRoute:"/css/flexbox-container",backText:"Voltar: Flexbox Container",goRoute:"/css/projeto-blog",goText:"Prximo: Projeto Prtico"}),Stt='# Projeto Prtico do Mdulo 2: Estilizando a Pgina de Blog com CSS e Flexbox\r\n\r\n**Objetivo:** Pegar a pgina de blog estruturada com HTML semntico do Mdulo 1 e aplicar estilos CSS, utilizando Flexbox para criar um layout moderno e agradvel.\r\n\r\n---\r\n\r\n### Descrio\r\n\r\nNeste projeto, voc criar um arquivo `estilos.css` e o vincular ao seu `index.html` do projeto anterior. Vamos transformar aquela pgina simples e sem estilo em um blog com aparncia profissional, focando em layout, tipografia e espaamento.\r\n\r\n### Requisitos\r\n\r\n#### 1. Preparao\r\n\r\n*   Crie um arquivo `estilos.css` na mesma pasta do seu `index.html`.\r\n*   No `index.html`, adicione a tag `<link>` dentro do `<head>` para conectar seu CSS:\r\n    ```html\r\n    <link rel="stylesheet" href="estilos.css">\r\n    ```\r\n*   (Opcional) Adicione uma fonte do Google Fonts (como \'Roboto\' ou \'Lato\') no seu HTML para melhorar a tipografia.\r\n\r\n#### 2. Estilos Globais e Reset\r\n\r\n*   No `estilos.css`, comece com um "reset" bsico para garantir consistncia entre navegadores. Use o seletor universal para aplicar `box-sizing: border-box;` e remover margens e paddings padro.\r\n    ```css\r\n    * {\r\n      margin: 0;\r\n      padding: 0;\r\n      box-sizing: border-box;\r\n    }\r\n    ```\r\n*   Estilize o `body` com uma cor de fundo suave (`#f4f4f4`), uma cor de texto legvel (`#333`) e defina a `font-family` principal.\r\n\r\n#### 3. Layout Principal com Flexbox\r\n\r\n*   O desafio  criar um layout de duas colunas: o contedo principal (`<main>`) e a barra lateral (`<aside>`).\r\n*   Para isso, crie um `div` com uma classe (ex: `.container-principal`) no seu HTML que envolva o `<main>` e o `<aside>`.\r\n*   Aplique `display: flex;` a essa classe `.container-principal`.\r\n*   Faa o `<main>` ser flexvel e ocupar mais espao (`flex-grow: 1;` ou `flex: 1;`).\r\n*   Defina uma largura base para o `<aside>` (ex: `flex-basis: 300px;` ou `width: 300px;`) e garanta que ele no encolha (`flex-shrink: 0;`).\r\n*   Adicione um espaamento entre `<main>` e `<aside>` (usando `gap` no container ou `margin` nos itens).\r\n\r\n#### 4. Estilizando o Cabealho (`<header>` e `<nav>`)\r\n\r\n*   Transforme o `<header>` em um flex container (`display: flex;`).\r\n*   Use `justify-content: space-between;` para alinhar o ttulo (`<h1>`)  esquerda e a navegao (`<nav>`)  direita.\r\n*   Use `align-items: center;` para alinh-los verticalmente.\r\n*   Adicione `padding` ao `<header>` e uma cor de fundo.\r\n*   Estilize a lista de navegao (`<nav> ul`) para que os itens fiquem em linha (`display: flex;`), remova os marcadores (`list-style: none;`) e estilize os links (`<a>`).\r\n\r\n#### 5. Estilizando o Contedo (`<main>` e `<article>`)\r\n\r\n*   Adicione `padding` ao `<main>` e ao `<article>` para criar respiro.\r\n*   Defina um `max-width` para o container geral do site (ex: `1100px`) e centralize-o na pgina usando `margin: 0 auto;`.\r\n*   Estilize os ttulos (`h1`, `h2`) com tamanhos de fonte (`rem`), pesos (`font-weight`) e margens adequadas.\r\n*   Ajuste a altura da linha (`line-height`) dos pargrafos (`<p>`) para melhorar a legibilidade (ex: `1.6`).\r\n*   Garanta que as imagens (`<img>`) sejam responsivas, definindo `max-width: 100%;` e `display: block;`.\r\n\r\n#### 6. Estilizando o Rodap (`<footer>`)\r\n\r\n*   Centralize o texto do rodap (`text-align: center;`).\r\n*   Adicione `padding` e uma cor de fundo ou borda superior para separ-lo do resto do contedo.\r\n\r\n### Como Verificar seu Trabalho\r\n\r\nAbra o `index.html` no navegador. A pgina agora deve ter:\r\n*   Um cabealho com o ttulo de um lado e a navegao do outro.\r\n*   Um layout de duas colunas com o artigo principal e a barra lateral.\r\n*   Fontes, cores e espaamentos consistentes.\r\n*   Um visual limpo e organizado, muito diferente da verso sem estilo.\r\n\r\nEste projeto consolida todo o conhecimento de CSS e Flexbox, preparando voc para criar layouts complexos e profissionais.\r\n',Ett=()=>g.jsx(qe,{content:Stt,backRoute:"/css/flexbox-items",backText:"Voltar: Flexbox Items",goRoute:"/js/introducao",goText:"Prximo Mdulo: JavaScript"}),Ttt=`# Mdulo 3, Aula 1: Introduo ao JavaScript (JS)\r
\r
**Objetivo:** Entender o que  JavaScript, seu papel no desenvolvimento web e como adicion-lo a uma pgina HTML.\r
\r
---\r
\r
### O que  JavaScript?\r
\r
JavaScript  a linguagem de programao que permite criar contedo dinmico e interativo em pginas web. Enquanto o HTML estrutura o contedo e o CSS estiliza, o JavaScript **d vida**  pgina.\r
\r
Com JS, voc pode:\r
*   Validar formulrios antes de serem enviados.\r
*   Criar carrossis de imagens e menus interativos (dropdowns, modais).\r
*   Alterar o contedo e o estilo de uma pgina em resposta a aes do usurio (cliques, rolagem).\r
*   Buscar dados de um servidor e atualizar a pgina sem a necessidade de recarreg-la (o que chamamos de AJAX).\r
*   Criar jogos e animaes complexas diretamente no navegador.\r
\r
### Onde o JavaScript Roda?\r
\r
O JavaScript foi criado para rodar diretamente nos navegadores web. Todo navegador moderno (Chrome, Firefox, Safari, Edge) possui um "motor" JavaScript integrado que interpreta e executa o cdigo.\r
\r
Hoje, com tecnologias como o **Node.js**, o JavaScript tambm pode ser usado no back-end para construir servidores e aplicaes completas, mas nosso foco neste curso  o **JavaScript no navegador (client-side)**.\r
\r
### Como Adicionar JavaScript a uma Pgina\r
\r
Assim como no CSS, existem trs maneiras, mas uma  a prtica recomendada.\r
\r
1.  **Script Externo (External Script) - A Melhor Prtica**\r
    Voc cria um arquivo separado com a extenso \`.js\` (ex: \`script.js\`) e o vincula ao seu arquivo HTML usando a tag \`<script>\` com o atributo \`src\`.\r
\r
    **Onde colocar a tag \`<script>\`?**\r
    A prtica recomendada  coloc-la **logo antes do fechamento da tag \`</body>\`**.\r
\r
    \`\`\`html\r
    <body>\r
        <!-- Todo o contedo da sua pgina -->\r
        <h1>Meu Site Incrvel</h1>\r
\r
        <script src="script.js"><\/script>\r
    </body>\r
    </html>\r
    \`\`\`\r
    **Por que no final?** O navegador l o HTML de cima para baixo. Colocar o script no final garante que todo o HTML seja carregado e renderizado na tela antes que o JavaScript comece a ser executado. Isso evita que o JS tente manipular um elemento que ainda no existe e melhora a percepo de velocidade de carregamento para o usurio.\r
\r
2.  **Script Interno (Internal Script)**\r
    Voc pode escrever o cdigo JS diretamente dentro da tag \`<script>\` no seu arquivo HTML. Tambm  recomendado coloc-la no final do \`<body>\`.\r
\r
    \`\`\`html\r
    <body>\r
        <button id="meuBotao">Clique em mim</button>\r
\r
        <script>\r
            // Isso  um comentrio de uma linha em JS\r
            const botao = document.getElementById('meuBotao');\r
            botao.addEventListener('click', function() {\r
                alert('Voc clicou no boto!');\r
            });\r
        <\/script>\r
    </body>\r
    </html>\r
    \`\`\`\r
     til para pequenos scripts especficos de uma pgina ou para testes rpidos.\r
\r
3.  **JavaScript Inline (Atributos de Evento)**\r
    Voc pode chamar cdigo JS diretamente de atributos HTML, como \`onclick\`.\r
\r
    \`\`\`html\r
    <button onclick="alert('Voc clicou!')">Clique aqui</button>\r
    \`\`\`\r
    **Esta prtica  considerada obsoleta e deve ser evitada.** Ela mistura lgica e estrutura, tornando o cdigo difcil de manter e depurar.\r
\r
### Usando o Console do Navegador\r
\r
O console do navegador (na aba "Console" das Ferramentas de Desenvolvedor - \`F12\`)  o seu melhor amigo ao aprender JS.\r
*   Ele exibe erros no seu cdigo.\r
*   Voc pode usar a funo \`console.log()\` no seu cdigo para exibir valores e mensagens, ajudando a entender o que est acontecendo.\r
\r
**No seu \`script.js\`:**\r
\`\`\`javascript\r
console.log('Ol, mundo! Meu script carregou.');\r
\`\`\`\r
Abra o \`index.html\` no navegador, pressione \`F12\`, v para a aba "Console" e voc ver a mensagem. Use \`console.log()\` extensivamente para depurar seu cdigo!\r
`,wtt=()=>g.jsx(qe,{content:Ttt,backRoute:"/css/projeto-blog",backText:"Voltar: Projeto CSS",goRoute:"/js/variaveis",goText:"Prximo: Variveis e Dados"}),Ctt='# Mdulo 3, Aula 2: Variveis, Constantes e Tipos de Dados\r\n\r\n**Objetivo:** Aprender a armazenar e manipular informaes usando variveis e constantes, e conhecer os tipos de dados primitivos do JavaScript.\r\n\r\n---\r\n\r\n### O que so Variveis?\r\n\r\nVariveis so "contineres" ou "caixas" nomeadas onde podemos armazenar valores para usar e modificar posteriormente em nosso programa.\r\n\r\nEm JavaScript moderno (ES6+), temos duas palavras-chave principais para declarar variveis: `let` e `const`.\r\n\r\n#### `let`\r\nUse `let` para declarar variveis cujo valor **pode mudar** ao longo do tempo.\r\n\r\n```javascript\r\nlet idade = 25;\r\nconsole.log(idade); // Sada: 25\r\n\r\nidade = 26; // O valor pode ser reatribudo\r\nconsole.log(idade); // Sada: 26\r\n```\r\n\r\n#### `const`\r\nUse `const` (de "constante") para declarar variveis cujo valor **no pode ser alterado** aps a sua atribuio inicial.\r\n\r\n```javascript\r\nconst nome = \'Maria\';\r\nconsole.log(nome); // Sada: Maria\r\n\r\n// A linha abaixo causar um erro no console!\r\n// nome = \'Joana\'; // TypeError: Assignment to constant variable.\r\n```\r\n\r\n**Regra de Ouro:** Prefira usar `const` por padro. S use `let` quando voc souber que o valor da varivel precisar ser alterado. Isso torna seu cdigo mais seguro e previsvel.\r\n\r\n#### `var` (O Jeito Antigo)\r\nAntes do ES6 (2015), a nica maneira de declarar variveis era com `var`. `var` tem regras de "escopo" diferentes e mais confusas que `let` e `const`. **Evite usar `var` em cdigo moderno.** Voc o ver em projetos mais antigos, mas para novos projetos, use `let` e `const`.\r\n\r\n### Tipos de Dados Primitivos\r\n\r\nJavaScript tem vrios tipos de dados fundamentais.\r\n\r\n1.  **String:** Uma sequncia de caracteres, usada para texto. Deve estar entre aspas simples (`\' \'`), duplas (`" "`) ou crases (`` ` ``).\r\n    ```javascript\r\n    const saudacao = \'Ol, mundo!\';\r\n    const cidade = "So Paulo";\r\n    ```\r\n\r\n2.  **Number:** Usado para qualquer tipo de nmero, seja inteiro ou de ponto flutuante (decimal).\r\n    ```javascript\r\n    const ano = 2025;\r\n    const preco = 19.99;\r\n    ```\r\n\r\n3.  **Boolean:** Representa um valor lgico: `true` (verdadeiro) ou `false` (falso).  a base para a tomada de decises no cdigo.\r\n    ```javascript\r\n    const usuarioLogado = true;\r\n    const temItensNoCarrinho = false;\r\n    ```\r\n\r\n4.  **`null`:** Representa a ausncia intencional de um valor.  um valor que voc, como programador, atribui para indicar "vazio".\r\n    ```javascript\r\n    let usuarioSelecionado = null; // Nenhum usurio foi selecionado ainda\r\n    ```\r\n\r\n5.  **`undefined`:** Indica que uma varivel foi declarada, mas ainda no teve um valor atribudo a ela.\r\n    ```javascript\r\n    let sobrenome;\r\n    console.log(sobrenome); // Sada: undefined\r\n    ```\r\n    **Diferena entre `null` e `undefined`:** Pense em `undefined` como um vazio acidental (esqueci de atribuir) e `null` como um vazio proposital (o valor  intencionalmente nada).\r\n\r\n6.  **BigInt e Symbol:** Tipos mais avanados que no abordaremos em profundidade agora. `BigInt`  para nmeros inteiros extremamente grandes e `Symbol`  para criar identificadores nicos.\r\n\r\n### Tipagem Dinmica\r\n\r\nJavaScript  uma linguagem de **tipagem dinmica**. Isso significa que voc no precisa declarar o tipo de uma varivel. A mesma varivel pode, inclusive, armazenar diferentes tipos de dados em momentos diferentes (embora isso seja uma m prtica).\r\n\r\n```javascript\r\nlet minhaVariavel = \'Isso  um texto\'; //  uma string\r\nminhaVariavel = 50; // Agora  um number\r\n```\r\n\r\nVoc pode verificar o tipo de uma varivel usando o operador `typeof`.\r\n```javascript\r\nconst nome = \'Ana\';\r\nconst idade = 30;\r\n\r\nconsole.log(typeof nome);  // Sada: "string"\r\nconsole.log(typeof idade); // Sada: "number"\r\n```\r\n',Att=()=>g.jsx(qe,{content:Ctt,backRoute:"/js/introducao",backText:"Voltar: Introduo ao JS",goRoute:"/js/operadores",goText:"Prximo: Operadores"}),_tt="# Mdulo 3, Aula 3: Operadores Bsicos\r\n\r\n**Objetivo:** Aprender a usar operadores para realizar clculos matemticos, comparaes e operaes lgicas.\r\n\r\n---\r\n\r\n### 1. Operadores Aritmticos\r\n\r\nUsados para realizar operaes matemticas.\r\n\r\n*   `+` Adio\r\n*   `-` Subtrao\r\n*   `*` Multiplicao\r\n*   `/` Diviso\r\n*   `%` Mdulo (resto da diviso)\r\n*   `**` Exponenciao (ES6)\r\n\r\n```javascript\r\nconst a = 10;\r\nconst b = 3;\r\n\r\nconsole.log(a + b); // 13\r\nconsole.log(a - b); // 7\r\nconsole.log(a * b); // 30\r\nconsole.log(a / b); // 3.333...\r\nconsole.log(a % b); // 1 (10 dividido por 3 d 3, e sobra 1)\r\nconsole.log(a ** b); // 1000 (10 elevado a 3)\r\n```\r\n\r\nO operador `+` tambm  usado para **concatenao de strings**:\r\n```javascript\r\nconst nome = 'Joo';\r\nconst sobrenome = 'Silva';\r\nconsole.log(nome + ' ' + sobrenome); // \"Joo Silva\"\r\n```\r\n\r\n### 2. Operadores de Atribuio\r\n\r\nUsados para atribuir valores a variveis.\r\n\r\n*   `=` Atribuio simples\r\n*   `+=` Atribuio de adio (`x += y`  o mesmo que `x = x + y`)\r\n*   `-=` Atribuio de subtrao\r\n*   `*=` Atribuio de multiplicao\r\n*   `/=` Atribuio de diviso\r\n\r\n```javascript\r\nlet saldo = 100;\r\nsaldo += 50; // saldo agora  150\r\nsaldo -= 20; // saldo agora  130\r\nconsole.log(saldo); // 130\r\n```\r\n\r\n### 3. Operadores de Comparao\r\n\r\nUsados para comparar dois valores. O resultado  sempre um booleano (`true` ou `false`).\r\n\r\n*   `==` Igual a (compara apenas o valor, faz coero de tipo)\r\n*   `!=` Diferente de (compara apenas o valor)\r\n*   `===` **Estritamente igual a** (compara valor E tipo - **USE ESTE!**)\r\n*   `!==` **Estritamente diferente de** (compara valor E tipo - **USE ESTE!**)\r\n*   `>` Maior que\r\n*   `<` Menor que\r\n*   `>=` Maior ou igual a\r\n*   `<=` Menor ou igual a\r\n\r\n**`==` vs `===` (Muito Importante!)**\r\nO operador `==` tenta converter os tipos antes de comparar, o que pode levar a resultados inesperados.\r\n\r\n```javascript\r\nconsole.log(5 == '5');   // true (o JS converte a string '5' para um nmero)\r\nconsole.log(5 === '5');  // false (os tipos so diferentes: number vs string)\r\n\r\nconsole.log(0 == false); // true (o JS converte false para 0)\r\nconsole.log(0 === false);// false (os tipos so diferentes: number vs boolean)\r\n```\r\n**Regra de Ouro:** Sempre use `===` e `!==` para comparaes para evitar bugs e tornar seu cdigo mais explcito e seguro.\r\n\r\n### 4. Operadores Lgicos\r\n\r\nUsados para combinar mltiplas expresses booleanas.\r\n\r\n*   `&&` **AND (E):** Retorna `true` somente se **ambas** as condies forem verdadeiras.\r\n    ```javascript\r\n    const temIdade = true;\r\n    const temIngresso = false;\r\n    console.log(temIdade && temIngresso); // false\r\n    ```\r\n*   `||` **OR (OU):** Retorna `true` se **pelo menos uma** das condies for verdadeira.\r\n    ```javascript\r\n    const temCartao = true;\r\n    const temDinheiro = false;\r\n    console.log(temCartao || temDinheiro); // true\r\n    ```\r\n*   `!` **NOT (NO):** Inverte um valor booleano.\r\n    ```javascript\r\n    const portaAberta = false;\r\n    console.log(!portaAberta); // true\r\n    ```\r\n\r\n### 5. Operador Ternrio\r\n\r\n um atalho para uma instruo `if...else` simples.\r\nA sintaxe : `condio ? valor_se_verdadeiro : valor_se_falso;`\r\n\r\n```javascript\r\nconst idade = 18;\r\nconst podeDirigir = idade >= 18 ? 'Sim, pode dirigir' : 'No, no pode dirigir';\r\nconsole.log(podeDirigir); // \"Sim, pode dirigir\"\r\n```\r\n",ktt=()=>g.jsx(qe,{content:_tt,backRoute:"/js/variaveis",backText:"Voltar: Variveis e Dados",goRoute:"/js/strings",goText:"Prximo: Strings"}),Itt=`# Mdulo 3, Aula 4: Strings e Mtodos\r
\r
**Objetivo:** Aprender a manipular textos (strings) usando propriedades e mtodos nativos do JavaScript.\r
\r
---\r
\r
Strings so um dos tipos de dados mais usados. JavaScript oferece muitas ferramentas para trabalhar com elas.\r
\r
### Template Literals (Template Strings)\r
\r
Introduzidos no ES6, os Template Literals so a forma moderna e preferida de trabalhar com strings. Eles usam crases (\`\` \` \`\`) em vez de aspas.\r
\r
**Vantagens:**\r
1.  **Interpolao de Variveis:** Voc pode inserir variveis e expresses diretamente na string usando a sintaxe \`\${...}\`.\r
2.  **Quebras de Linha:** Permitem strings com mltiplas linhas sem a necessidade de caracteres de escape.\r
\r
\`\`\`javascript\r
const nome = 'Ana';\r
const idade = 30;\r
\r
// Jeito antigo (concatenao)\r
const saudacaoAntiga = 'Ol, meu nome  ' + nome + ' e eu tenho ' + idade + ' anos.';\r
\r
// Jeito moderno (Template Literal)\r
const saudacaoModerna = \`Ol, meu nome  \${nome} e eu tenho \${idade} anos.\`;\r
\r
console.log(saudacaoModerna);\r
// Sada: Ol, meu nome  Ana e eu tenho 30 anos.\r
\r
const poema = \`\r
  Isso  um poema,\r
  escrito em vrias linhas,\r
  de forma muito fcil.\r
\`;\r
console.log(poema);\r
\`\`\`\r
\r
### Propriedades e Mtodos Comuns de Strings\r
\r
Mtodos so funes que pertencem a um objeto (neste caso, a uma string). Eles so chamados usando a sintaxe \`string.metodo()\`.\r
\r
Lembre-se: **Strings em JavaScript so imutveis**. Os mtodos no alteram a string original; eles retornam uma nova string com a modificao.\r
\r
\`\`\`javascript\r
const frase = '  O Rato Roeu a Roupa do Rei de Roma.  ';\r
let resultado;\r
\`\`\`\r
\r
*   **\`.length\` (Propriedade):** Retorna o nmero de caracteres na string.\r
    \`\`\`javascript\r
    resultado = frase.length; // 39 (incluindo os espaos no incio e fim)\r
    \`\`\`\r
\r
*   **\`.toUpperCase()\` e \`.toLowerCase()\`:** Convertem a string para maisculas ou minsculas.\r
    \`\`\`javascript\r
    resultado = frase.toUpperCase(); // "  O RATO ROEU A ROUPA DO REI DE ROMA.  "\r
    resultado = frase.toLowerCase(); // "  o rato roeu a roupa do rei de roma.  "\r
    \`\`\`\r
\r
*   **\`.trim()\`:** Remove espaos em branco do incio e do fim da string.\r
    \`\`\`javascript\r
    const fraseSemEspacos = frase.trim();\r
    console.log(fraseSemEspacos); // "O Rato Roeu a Roupa do Rei de Roma."\r
    console.log(fraseSemEspacos.length); // 35\r
    \`\`\`\r
\r
*   **\`.slice(inicio, fim)\`:** Extrai uma parte da string. O ndice \`fim\` no  includo.\r
    \`\`\`javascript\r
    // ndices em strings comeam em 0\r
    resultado = frase.trim().slice(0, 6); // "O Rato"\r
    \`\`\`\r
\r
*   **\`.replace(valorAntigo, valorNovo)\`:** Substitui a **primeira** ocorrncia de um valor por outro.\r
    \`\`\`javascript\r
    resultado = frase.trim().replace('Rato', 'Gato'); // "O Gato Roeu a Roupa do Rei de Roma."\r
    \`\`\`\r
\r
*   **\`.replaceAll(valorAntigo, valorNovo)\`:** Substitui **todas** as ocorrncias.\r
    \`\`\`javascript\r
    resultado = frase.trim().replaceAll('o', 'a'); // "O Rata Raeu a Raupa da Rei de Rama."\r
    \`\`\`\r
\r
*   **\`.includes(substring)\`:** Verifica se a string contm uma determinada substring. Retorna \`true\` ou \`false\`.\r
    \`\`\`javascript\r
    resultado = frase.trim().includes('Rei'); // true\r
    resultado = frase.trim().includes('Rainha'); // false\r
    \`\`\`\r
\r
*   **\`.split(separador)\`:** Divide a string em um array de substrings, usando um separador.\r
    \`\`\`javascript\r
    const palavras = frase.trim().split(' ');\r
    console.log(palavras); // ["O", "Rato", "Roeu", "a", "Roupa", "do", "Rei", "de", "Roma."]\r
    \`\`\`\r
`,Ptt=()=>g.jsx(qe,{content:Itt,backRoute:"/js/operadores",backText:"Voltar: Operadores",goRoute:"/js/arrays",goText:"Prximo: Arrays"}),Ott=`# Mdulo 3, Aula 5: Arrays e Mtodos Essenciais\r
\r
**Objetivo:** Aprender a criar e manipular listas de dados usando arrays e seus mtodos mais importantes.\r
\r
---\r
\r
### O que so Arrays?\r
\r
Arrays (ou vetores) so estruturas de dados usadas para armazenar uma coleo de mltiplos itens em uma nica varivel. Os itens podem ser de qualquer tipo: strings, numbers, booleans, objetos e at outros arrays.\r
\r
A sintaxe para criar um array  usar colchetes \`[]\`, com os itens separados por vrgula.\r
\r
\`\`\`javascript\r
// Um array de strings\r
const frutas = ['Ma', 'Banana', 'Laranja'];\r
\r
// Um array de nmeros\r
const numeros =;\r
\r
// Um array misto (possvel, mas geralmente no  uma boa prtica)\r
const misto = ['Texto', 100, true, null];\r
\`\`\`\r
\r
### Acessando Itens do Array\r
\r
Os itens em um array so indexados, e a contagem **comea em 0**. Para acessar um item, use o nome do array seguido do ndice entre colchetes.\r
\r
\`\`\`javascript\r
const frutas = ['Ma', 'Banana', 'Laranja'];\r
\r
console.log(frutas); // 'Ma'\r
console.log(frutas); // 'Banana'\r
console.log(frutas); // 'Laranja'\r
\r
// Modificando um item\r
frutas = 'Morango';\r
console.log(frutas); // ['Ma', 'Morango', 'Laranja']\r
\`\`\`\r
\r
A propriedade \`.length\` retorna o nmero de itens no array.\r
\`\`\`javascript\r
console.log(frutas.length); // 3\r
\`\`\`\r
\r
### Mtodos Essenciais de Array\r
\r
Diferente das strings, os mtodos de array podem **modificar o array original** (mtodos mutveis) ou **retornar um novo array** (mtodos imutveis).\r
\r
#### Mtodos que Modificam o Array Original (Mutveis)\r
\r
*   **\`.push(item)\`:** Adiciona um ou mais itens ao **final** do array.\r
    \`\`\`javascript\r
    frutas.push('Uva'); // frutas agora  ['Ma', 'Morango', 'Laranja', 'Uva']\r
    \`\`\`\r
*   **\`.pop()\`:** Remove o **ltimo** item do array e o retorna.\r
    \`\`\`javascript\r
    const ultimaFruta = frutas.pop(); // ultimaFruta  'Uva', frutas volta a ter 3 itens\r
    \`\`\`\r
*   **\`.unshift(item)\`:** Adiciona um ou mais itens ao **incio** do array.\r
    \`\`\`javascript\r
    frutas.unshift('Pra'); // frutas agora  ['Pra', 'Ma', 'Morango', 'Laranja']\r
    \`\`\`\r
*   **\`.shift()\`:** Remove o **primeiro** item do array e o retorna.\r
    \`\`\`javascript\r
    const primeiraFruta = frutas.shift(); // primeiraFruta  'Pra'\r
    \`\`\`\r
*   **\`.splice(inicio, quantidadeParaRemover, item1, item2, ...)\`:** O "canivete suo" dos arrays. Pode remover, substituir ou adicionar itens em qualquer posio.\r
    \`\`\`javascript\r
    const numeros =;\r
    // A partir do ndice 2, remove 1 item e adiciona 'A' e 'B'\r
    numeros.splice(2, 1, 'A', 'B');\r
    console.log(numeros); // [10, 20, 'A', 'B', 40, 50]\r
    \`\`\`\r
\r
#### Mtodos que Retornam um Novo Array (Imutveis)\r
\r
Estes so extremamente importantes no JavaScript moderno, especialmente em frameworks como React.\r
\r
*   **\`.slice(inicio, fim)\`:** Retorna uma cpia de uma parte do array. No modifica o original.\r
    \`\`\`javascript\r
    const numeros =;\r
    const subArray = numeros.slice(1, 4); // Pega do ndice 1 at o 3\r
    console.log(subArray); //\r
    console.log(numeros); // (permanece intacto)\r
    \`\`\`\r
*   **\`.concat(outroArray)\`:** Junta dois ou mais arrays, retornando um novo array.\r
    \`\`\`javascript\r
    const array1 =;\r
    const array2 =;\r
    const novoArray = array1.concat(array2);\r
    console.log(novoArray); //\r
    \`\`\`\r
*   **Spread Operator (\`...\`) (ES6):** Uma forma mais moderna e legvel de concatenar ou copiar arrays.\r
    \`\`\`javascript\r
    // Copiando um array\r
    const copiaFrutas = [...frutas];\r
\r
    // Concatenando arrays\r
    const novoArrayComSpread = [...array1, ...array2];\r
    console.log(novoArrayComSpread); //\r
    \`\`\`\r
\r
*   **\`.join(separador)\`:** Junta todos os elementos de um array em uma nica string.\r
    \`\`\`javascript\r
    const palavras = ['Ol', 'mundo'];\r
    const frase = palavras.join(' '); // "Ol mundo"\r
    \`\`\`\r
`,Mtt=()=>g.jsx(qe,{content:Ott,backRoute:"/js/strings",backText:"Voltar: Strings",goRoute:"/js/funcoes",goText:"Prximo: Funes"}),Rtt=`# Mdulo 3, Aula 6: Funes - Declaraes e Expresses\r
\r
**Objetivo:** Aprender a criar blocos de cdigo reutilizveis com funes, entendendo as diferentes maneiras de declar-las.\r
\r
---\r
\r
### O que so Funes?\r
\r
Funes so um dos blocos de construo mais importantes em JavaScript. Uma funo  um "subprograma"  um bloco de cdigo projetado para executar uma tarefa especfica. Uma vez definida, uma funo pode ser executada (ou "chamada") vrias vezes, o que torna o cdigo organizado, reutilizvel e mais fcil de manter.\r
\r
### Anatomia de uma Funo\r
\r
Uma funo geralmente possui:\r
*   **Nome:** Para identificar a funo.\r
*   **Parmetros:** Variveis listadas na definio da funo, que servem como "placeholders" para os valores que a funo receber quando for chamada.\r
*   **Corpo da Funo:** O bloco de cdigo entre chaves \`{}\` que ser executado.\r
*   **\`return\` (opcional):** A palavra-chave \`return\` especifica o valor que a funo "devolve" aps sua execuo. Se \`return\` no for usado, a funo retorna \`undefined\` por padro.\r
\r
### 1. Declarao de Funo (Function Declaration)\r
\r
Esta  a forma mais clssica de criar uma funo.\r
\r
\`\`\`javascript\r
// Definindo a funo com dois parmetros: nome e sobrenome\r
function cumprimentar(nome, sobrenome) {\r
  const nomeCompleto = \`\${nome} \${sobrenome}\`;\r
  return \`Ol, \${nomeCompleto}! Bem-vindo(a).\`;\r
}\r
\r
// Chamando a funo e passando "argumentos" (os valores reais)\r
const saudacao = cumprimentar('Ana', 'Souza');\r
console.log(saudacao); // Sada: "Ol, Ana Souza! Bem-vindo(a)."\r
\`\`\`\r
Uma caracterstica importante das declaraes de funo  o **hoisting** (iamento). O JavaScript "move" as declaraes de funo para o topo do seu escopo, o que significa que voc pode chamar uma funo antes de declar-la no cdigo.\r
\r
\`\`\`javascript\r
// Isso funciona por causa do hoisting\r
const resultado = somar(5, 10);\r
console.log(resultado); // 15\r
\r
function somar(a, b) {\r
  return a + b;\r
}\r
\`\`\`\r
\r
### 2. Expresso de Funo (Function Expression)\r
\r
Uma expresso de funo ocorre quando voc cria uma funo e a atribui a uma varivel.\r
\r
\`\`\`javascript\r
const subtrair = function(a, b) {\r
  return a - b;\r
};\r
\r
// A funo  chamada atravs da varivel\r
const resultado = subtrair(10, 3);\r
console.log(resultado); // 7\r
\`\`\`\r
Diferente das declaraes, as expresses de funo **no sofrem hoisting**. Voc deve declar-las antes de poder us-las. Isso pode ajudar a organizar melhor o cdigo, forando uma estrutura mais lgica.\r
\r
### 3. Arrow Functions (ES6)\r
\r
As Arrow Functions (Funes de Seta) so uma sintaxe mais curta e moderna para escrever expresses de funo, introduzida no ES6. Elas so amplamente utilizadas hoje.\r
\r
\`\`\`javascript\r
// Expresso de funo tradicional\r
const multiplicar = function(a, b) {\r
  return a * b;\r
};\r
\r
// Arrow Function equivalente\r
const multiplicarArrow = (a, b) => {\r
  return a * b;\r
};\r
\`\`\`\r
\r
**Simplificaes das Arrow Functions:**\r
\r
*   Se a funo tem apenas **uma linha de cdigo** e essa linha  um \`return\`, voc pode omitir as chaves \`{}\` e a palavra-chave \`return\`.\r
    \`\`\`javascript\r
    const multiplicarSimplificada = (a, b) => a * b;\r
    console.log(multiplicarSimplificada(5, 4)); // 20\r
    \`\`\`\r
\r
*   Se a funo tem apenas **um parmetro**, voc pode omitir os parnteses \`()\` ao redor dele.\r
    \`\`\`javascript\r
    const dobrar = numero => numero * 2;\r
    console.log(dobrar(10)); // 20\r
    \`\`\`\r
\r
*   Se a funo **no tem parmetros**, voc deve usar parnteses vazios \`()\`.\r
    \`\`\`javascript\r
    const obterAno = () => new Date().getFullYear();\r
    console.log(obterAno()); // 2025 (ou o ano atual)\r
    \`\`\`\r
\r
**Regra Geral:** Use Arrow Functions sempre que possvel pela sua conciso e legibilidade. Elas tm uma diferena importante em como lidam com o \`this\`, um conceito que veremos mais adiante em JavaScript avanado, mas para a maioria dos casos, elas so a melhor escolha.\r
`,Dtt=()=>g.jsx(qe,{content:Rtt,backRoute:"/js/arrays",backText:"Voltar: Arrays",goRoute:"/js/objetos",goText:"Prximo: Objetos"}),Ntt=`# Mdulo 3, Aula 7: Objetos Literais\r
\r
**Objetivo:** Aprender a agrupar dados e funcionalidades relacionadas usando objetos, a estrutura de dados mais importante do JavaScript.\r
\r
---\r
\r
### O que so Objetos?\r
\r
Se arrays so listas ordenadas, objetos so colees **no ordenadas** de pares **chave-valor**. Eles so usados para representar entidades do mundo real (como um usurio, um produto, um carro) que possuem propriedades e comportamentos.\r
\r
A sintaxe para um objeto literal usa chaves \`{}\`.\r
\r
\`\`\`javascript\r
const pessoa = {\r
  // chave: valor (propriedade)\r
  nome: 'Carlos',\r
  sobrenome: 'Drummond',\r
  idade: 35,\r
  cidade: 'Rio de Janeiro',\r
  hobbies: ['Leitura', 'Escrita', 'Caminhada'],\r
  ativo: true,\r
\r
  // Uma funo dentro de um objeto  chamada de "mtodo"\r
  cumprimentar: function() {\r
    // 'this' se refere ao prprio objeto (a 'pessoa')\r
    return \`Ol, meu nome  \${this.nome} \${this.sobrenome}.\`;\r
  }\r
};\r
\`\`\`\r
\r
### Acessando Propriedades\r
\r
Existem duas maneiras de acessar os valores de um objeto:\r
\r
1.  **Notao de Ponto (Dot Notation):** A forma mais comum e preferida.  mais limpa e fcil de ler.\r
    \`\`\`javascript\r
    console.log(pessoa.nome);      // 'Carlos'\r
    console.log(pessoa.idade);     // 35\r
    console.log(pessoa.hobbies); // 'Leitura'\r
    \`\`\`\r
\r
2.  **Notao de Colchetes (Bracket Notation):**  mais flexvel e necessria quando a chave  uma varivel ou contm caracteres especiais (como espaos).\r
    \`\`\`javascript\r
    console.log(pessoa['nome']); // 'Carlos'\r
\r
    const propriedadeDesejada = 'cidade';\r
    console.log(pessoa[propriedadeDesejada]); // 'Rio de Janeiro'\r
    \`\`\`\r
\r
### Modificando e Adicionando Propriedades\r
\r
Voc pode facilmente alterar o valor de uma propriedade existente ou adicionar uma nova.\r
\r
\`\`\`javascript\r
// Modificando uma propriedade\r
pessoa.idade = 36;\r
console.log(pessoa.idade); // 36\r
\r
// Adicionando uma nova propriedade\r
pessoa.profissao = 'Escritor';\r
console.log(pessoa.profissao); // 'Escritor'\r
\`\`\`\r
\r
### Mtodos de Objeto\r
\r
Um mtodo  uma funo que pertence a um objeto. Ele pode acessar outras propriedades do mesmo objeto usando a palavra-chave \`this\`.\r
\r
\`\`\`javascript\r
// Chamando o mtodo do objeto\r
const saudacao = pessoa.cumprimentar();\r
console.log(saudacao); // "Ol, meu nome  Carlos Drummond."\r
\`\`\`\r
\r
### Sintaxe de Mtodo Abreviada (ES6)\r
\r
No ES6, voc pode declarar mtodos de forma mais concisa, omitindo a palavra-chave \`function\`.\r
\r
\`\`\`javascript\r
const produto = {\r
  nome: 'Notebook',\r
  preco: 4500,\r
  estoque: 30,\r
\r
  // Sintaxe de mtodo abreviada\r
  vender(quantidade) {\r
    if (this.estoque >= quantidade) {\r
      this.estoque -= quantidade;\r
      console.log(\`\${quantidade} unidades de \${this.nome} vendidas.\`);\r
    } else {\r
      console.log('Estoque insuficiente.');\r
    }\r
  }\r
};\r
\r
produto.vender(5);\r
console.log(produto.estoque); // 25\r
\`\`\`\r
\r
### Desestruturao de Objetos (Object Destructuring - ES6)\r
\r
A desestruturao  uma maneira extremamente conveniente de extrair valores de um objeto e atribu-los a variveis com o mesmo nome.\r
\r
\`\`\`javascript\r
const filme = {\r
  titulo: 'Inception',\r
  diretor: 'Christopher Nolan',\r
  ano: 2010\r
};\r
\r
// Jeito antigo\r
// const titulo = filme.titulo;\r
// const diretor = filme.diretor;\r
\r
// Com desestruturao\r
const { titulo, diretor, ano } = filme;\r
\r
console.log(titulo);  // 'Inception'\r
console.log(diretor); // 'Christopher Nolan'\r
\`\`\`\r
Isso torna o cdigo muito mais limpo, especialmente ao lidar com objetos grandes ou ao passar propriedades para funes.\r
`,Ltt=()=>g.jsx(qe,{content:Ntt,backRoute:"/js/funcoes",backText:"Voltar: Funes",goRoute:"/js/condicionais",goText:"Prximo: Condicionais"}),jtt=`# Mdulo 3, Aula 8: Condicionais (if, else, switch)\r
\r
**Objetivo:** Aprender a controlar o fluxo de execuo do seu cdigo, permitindo que ele tome decises e execute diferentes aes com base em condies.\r
\r
---\r
\r
### A Estrutura \`if\`\r
\r
A instruo \`if\` (se) executa um bloco de cdigo somente se uma condio especificada for avaliada como \`true\`.\r
\r
\`\`\`javascript\r
const idade = 20;\r
\r
if (idade >= 18) {\r
  console.log('Voc  maior de idade. Pode entrar.');\r
}\r
\`\`\`\r
Neste caso, como \`20 >= 18\`  \`true\`, a mensagem  exibida no console.\r
\r
### A Estrutura \`else\`\r
\r
A instruo \`else\` (seno) executa um bloco de cdigo se a condio do \`if\` for \`false\`.\r
\r
\`\`\`javascript\r
const idade = 16;\r
\r
if (idade >= 18) {\r
  console.log('Voc  maior de idade.');\r
} else {\r
  console.log('Voc  menor de idade. Acesso negado.');\r
}\r
// Sada: 'Voc  menor de idade. Acesso negado.'\r
\`\`\`\r
\r
### A Estrutura \`else if\`\r
\r
Voc pode encadear mltiplas condies usando \`else if\`. O JavaScript testar cada condio em ordem e executar o bloco da primeira que for \`true\`.\r
\r
\`\`\`javascript\r
const hora = 14;\r
\r
if (hora < 12) {\r
  console.log('Bom dia!');\r
} else if (hora < 18) {\r
  console.log('Boa tarde!'); // Esta condio  true, ento este bloco  executado.\r
} else {\r
  console.log('Boa noite!');\r
}\r
\`\`\`\r
\r
### Valores "Truthy" e "Falsy"\r
\r
Em JavaScript, no apenas \`true\` e \`false\` so avaliados em condicionais. Outros valores tambm podem se comportar como \`true\` (truthy) ou \`false\` (falsy).\r
\r
*   **Valores Falsy:**\r
    *   \`false\`\r
    *   \`0\` (o nmero zero)\r
    *   \`''\` ou \`""\` (uma string vazia)\r
    *   \`null\`\r
    *   \`undefined\`\r
    *   \`NaN\` (Not a Number)\r
\r
*   **Valores Truthy:**\r
    *   Qualquer valor que no seja falsy. Isso inclui:\r
    *   Qualquer nmero diferente de zero (ex: \`1\`, \`-10\`).\r
    *   Qualquer string no vazia (ex: \`'ol'\`, \`' '\`).\r
    *   Arrays (mesmo vazios: \`[]\`).\r
    *   Objetos (mesmo vazios: \`{}\`).\r
\r
Isso  til para verificaes rpidas:\r
\`\`\`javascript\r
const nomeUsuario = '';\r
\r
if (nomeUsuario) { // Como a string  vazia (falsy), este bloco no executa.\r
  console.log(\`Bem-vindo, \${nomeUsuario}!\`);\r
} else {\r
  console.log('Por favor, faa o login.');\r
}\r
\`\`\`\r
\r
### A Estrutura \`switch\`\r
\r
A instruo \`switch\`  uma alternativa ao \`if...else if...else\` quando voc precisa comparar uma nica varivel com vrios valores possveis.\r
\r
\`\`\`javascript\r
const permissao = 'admin'; // Pode ser 'admin', 'editor', 'leitor'\r
\r
switch (permissao) {\r
  case 'admin':\r
    console.log('Acesso total concedido.');\r
    break; // A palavra-chave 'break'  crucial para sair do switch.\r
\r
  case 'editor':\r
    console.log('Acesso para editar contedo.');\r
    break;\r
\r
  case 'leitor':\r
    console.log('Acesso apenas para leitura.');\r
    break;\r
\r
  default: // O 'default' funciona como o 'else' final.\r
    console.log('Permisso desconhecida.');\r
    break;\r
}\r
\`\`\`\r
**Quando usar \`switch\`?**  ideal para um nmero limitado de opes exatas, tornando o cdigo mais limpo e organizado do que mltiplos \`else if\`. Para faixas de valores (como \`idade > 18\`), o \`if/else\`  mais apropriado.\r
`,Btt=()=>g.jsx(qe,{content:jtt,backRoute:"/js/objetos",backText:"Voltar: Objetos",goRoute:"/js/loops",goText:"Prximo: Loops"}),Ftt=`# Mdulo 3, Aula 9: Loops (for e while)\r
\r
**Objetivo:** Aprender a executar um bloco de cdigo repetidamente usando laos de repetio, uma ferramenta essencial para automatizar tarefas e percorrer colees de dados.\r
\r
---\r
\r
### O que so Loops?\r
\r
Loops (ou laos de repetio) permitem que voc execute a mesma tarefa vrias vezes sem precisar reescrever o cdigo. Eles so fundamentais para percorrer arrays, processar dados e realizar qualquer ao repetitiva.\r
\r
### 1. O Loop \`for\`\r
\r
O loop \`for\`  o mais comum e  ideal quando voc sabe de antemo quantas vezes quer que o loop seja executado.\r
\r
Sua sintaxe tem trs partes, separadas por ponto e vrgula:\r
\`for (inicializao; condio; incremento)\`\r
\r
1.  **Inicializao:** Executada uma nica vez, antes do incio do loop. Geralmente,  onde se declara uma varivel contadora (ex: \`let i = 0\`).\r
2.  **Condio:** Verificada antes de cada iterao. Se for \`true\`, o corpo do loop  executado. Se for \`false\`, o loop termina.\r
3.  **Incremento:** Executado ao final de cada iterao. Geralmente, atualiza a varivel contadora (ex: \`i++\`, que  o mesmo que \`i = i + 1\`).\r
\r
**Exemplo: Contando de 0 a 4**\r
\`\`\`javascript\r
for (let i = 0; i < 5; i++) {\r
  console.log(\`O nmero atual  \${i}\`);\r
}\r
// Sada:\r
// O nmero atual  0\r
// O nmero atual  1\r
// O nmero atual  2\r
// O nmero atual  3\r
// O nmero atual  4\r
\`\`\`\r
\r
**Exemplo: Percorrendo um Array**\r
Este  o uso mais comum do loop \`for\`.\r
\`\`\`javascript\r
const frutas = ['Ma', 'Banana', 'Laranja', 'Uva'];\r
\r
for (let i = 0; i < frutas.length; i++) {\r
  console.log(\`Eu gosto de \${frutas[i]}\`);\r
}\r
\`\`\`\r
\r
### 2. O Loop \`while\`\r
\r
O loop \`while\` (enquanto) executa um bloco de cdigo enquanto uma condio especificada for \`true\`.  ideal quando voc no sabe exatamente quantas iteraes sero necessrias, mas sabe qual  a condio de parada.\r
\r
\`\`\`javascript\r
let contador = 0;\r
\r
while (contador < 5) {\r
  console.log(\`Contador  \${contador}\`);\r
  contador++; // CUIDADO:  crucial atualizar a varivel da condio para evitar um loop infinito!\r
}\r
\`\`\`\r
\r
### 3. Loops \`for...of\` e \`for...in\` (ES6)\r
\r
O ES6 introduziu maneiras mais modernas e legveis de percorrer estruturas de dados.\r
\r
#### \`for...of\` (Para percorrer iterveis como Arrays e Strings)\r
\r
Este  o mtodo **preferido e mais moderno** para percorrer os **valores** de um array.\r
\r
\`\`\`javascript\r
const cores = ['Vermelho', 'Verde', 'Azul'];\r
\r
for (const cor of cores) {\r
  console.log(cor);\r
}\r
// Sada:\r
// Vermelho\r
// Verde\r
// Azul\r
\`\`\`\r
 muito mais limpo e menos propenso a erros do que um loop \`for\` tradicional com um contador \`i\`.\r
\r
#### \`for...in\` (Para percorrer propriedades de Objetos)\r
\r
Este loop percorre as **chaves** (propriedades) de um objeto.\r
\r
\`\`\`javascript\r
const usuario = {\r
  nome: 'Pedro',\r
  idade: 28,\r
  cidade: 'Belo Horizonte'\r
};\r
\r
for (const chave in usuario) {\r
  // 'chave' ser 'nome', depois 'idade', depois 'cidade'\r
  console.log(\`\${chave}: \${usuario[chave]}\`);\r
}\r
// Sada:\r
// nome: Pedro\r
// idade: 28\r
// cidade: Belo Horizonte\r
\`\`\`\r
**Ateno:** No use \`for...in\` para percorrer arrays. Ele pode ter comportamentos inesperados e percorrer propriedades indesejadas do prottipo do array. Para arrays, use \`for...of\` ou mtodos de array como \`forEach()\`.\r
\r
### Palavras-chave \`break\` e \`continue\`\r
\r
*   **\`break\`:** Interrompe e sai completamente do loop.\r
    \`\`\`javascript\r
    for (let i = 0; i < 10; i++) {\r
      if (i === 5) {\r
        break; // O loop para quando i chega a 5.\r
      }\r
      console.log(i); // Imprime de 0 a 4.\r
    }\r
    \`\`\`\r
*   **\`continue\`:** Pula a iterao atual e vai para a prxima.\r
    \`\`\`javascript\r
    for (let i = 0; i < 10; i++) {\r
      if (i % 2 === 0) { // Se o nmero for par...\r
        continue; // ...pula para a prxima iterao.\r
      }\r
      console.log(i); // Imprime apenas os nmeros mpares: 1, 3, 5, 7, 9.\r
    }\r
    \`\`\`\r
`,ztt=()=>g.jsx(qe,{content:Ftt,backRoute:"/js/condicionais",backText:"Voltar: Condicionais",goRoute:"/js/intro-dom",goText:"Prximo: Introduo ao DOM"}),Utt=`# Mdulo 3, Aula 10: Introduo ao DOM\r
\r
**Objetivo:** Entender o que  o DOM, como ele  estruturado e por que ele  a ponte entre o JavaScript e o contedo de uma pgina HTML.\r
\r
---\r
\r
### O que  o DOM?\r
\r
**DOM** significa **D**ocument **O**bject **M**odel (Modelo de Objeto do Documento).\r
\r
Quando um navegador carrega um documento HTML, ele no o l como um simples texto. Em vez disso, ele cria uma representao do documento em memria, estruturada como uma rvore de objetos. Essa representao  o DOM.\r
\r
Pense no DOM como uma rvore genealgica da sua pgina HTML:\r
*   O \`<html>\`  o ancestral mais antigo, a raiz da rvore.\r
*   O \`<head>\` e o \`<body>\` so seus filhos diretos.\r
*   Todos os outros elementos (\`<h1>\`, \`<p>\`, \`<div>\`, etc.) so descendentes, formando galhos e folhas na rvore.\r
\r
Cada elemento, atributo e texto no documento HTML se torna um **n** (node) nessa rvore.\r
\r
![Diagrama da rvore DOM](https://i.imgur.com/3Y11tM5.png )\r
\r
### Por que o DOM  to Importante?\r
\r
O DOM  a interface que permite que linguagens de programao, como o JavaScript, interajam com o contedo da pgina. Sem o DOM, o JavaScript no teria como "saber" o que est no HTML.\r
\r
Com o JavaScript, podemos usar o DOM para:\r
*   **Selecionar** qualquer elemento HTML.\r
*   **Alterar** o contedo de um elemento (ex: mudar um texto).\r
*   **Modificar** o estilo de um elemento (ex: mudar sua cor, tamanho, posio).\r
*   **Adicionar** novos elementos e atributos.\r
*   **Remover** elementos e atributos existentes.\r
*   **Reagir a eventos** do usurio (cliques, digitao, movimento do mouse).\r
\r
Em resumo, **tudo** o que o JavaScript faz para tornar uma pgina interativa acontece atravs da manipulao do DOM.\r
\r
### O Objeto \`document\`\r
\r
O ponto de entrada para acessar e manipular o DOM  um objeto global que o navegador nos fornece chamado \`document\`.\r
\r
Este objeto representa todo o documento HTML. A partir dele, podemos comear a navegar e selecionar os ns da rvore.\r
\r
Abra o console do seu navegador (\`F12\`) em qualquer pgina da web e digite \`document\`. Voc ver uma representao do objeto DOM daquela pgina. Se voc digitar \`console.dir(document)\`, poder explorar todas as suas propriedades e mtodos.\r
\r
**Exemplos de propriedades do objeto \`document\`:**\r
\`\`\`javascript\r
// Retorna a tag <html>\r
console.log(document.documentElement);\r
\r
// Retorna a tag <head>\r
console.log(document.head);\r
\r
// Retorna a tag <body>\r
console.log(document.body);\r
\r
// Retorna a URL da pgina\r
console.log(document.URL);\r
\r
// Retorna o ttulo da pgina\r
console.log(document.title);\r
\`\`\`\r
\r
Nas prximas aulas, vamos aprender a usar os mtodos do objeto \`document\` para selecionar elementos especficos e comear a modific-los.\r
`,qtt=()=>g.jsx(qe,{content:Utt,backRoute:"/js/loops",backText:"Voltar: Loops",goRoute:"/js/selecionando-elementos",goText:"Prximo: Selecionando Elementos"}),Htt=`# Mdulo 3, Aula 11: Selecionando Elementos do DOM\r
\r
**Objetivo:** Aprender os mtodos modernos e eficientes para selecionar elementos HTML especficos usando JavaScript, para que possamos manipul-los.\r
\r
---\r
\r
Para modificar um elemento, primeiro precisamos selecion-lo. O objeto \`document\` oferece vrios mtodos para isso. Vamos focar nos mais modernos e versteis.\r
\r
### 1. \`querySelector()\` - O Mais Verstil\r
\r
O mtodo \`querySelector()\` retorna o **primeiro** elemento dentro do documento que corresponde a um seletor CSS especificado. Se nenhum elemento for encontrado, ele retorna \`null\`.\r
\r
A grande vantagem  que ele usa a mesma sintaxe de seletores que voc j aprendeu em CSS!\r
\r
\`\`\`html\r
<!-- index.html -->\r
<div id="container">\r
    <h1 class="titulo">Ttulo Principal</h1>\r
    <p class="paragrafo">Este  o primeiro pargrafo.</p>\r
    <p class="paragrafo">Este  o segundo pargrafo.</p>\r
</div>\r
\`\`\`\r
\r
\`\`\`javascript\r
// script.js\r
\r
// Selecionando pelo ID\r
const container = document.querySelector('#container');\r
\r
// Selecionando pela classe (retorna APENAS o primeiro elemento encontrado)\r
const primeiroParagrafo = document.querySelector('.paragrafo');\r
\r
// Selecionando pela tag\r
const titulo = document.querySelector('h1');\r
\r
// Selecionando com um seletor complexo (o h1 dentro do div com id 'container')\r
const tituloComplexo = document.querySelector('#container h1');\r
\r
console.log(primeiroParagrafo);\r
\`\`\`\r
\r
### 2. \`querySelectorAll()\` - Para Mltiplos Elementos\r
\r
O mtodo \`querySelectorAll()\` retorna **todos** os elementos que correspondem a um seletor CSS, na forma de uma **NodeList**.\r
\r
Uma NodeList  semelhante a um array (mas no  um array de verdade). Voc pode percorrer seus itens usando \`forEach()\` ou um loop \`for...of\`.\r
\r
\`\`\`javascript\r
// Seleciona TODOS os elementos com a classe 'paragrafo'\r
const todosOsParagrafos = document.querySelectorAll('.paragrafo');\r
\r
console.log(todosOsParagrafos); // Retorna uma NodeList com os dois pargrafos\r
\r
// Percorrendo a NodeList com forEach para fazer algo com cada elemento\r
todosOsParagrafos.forEach(paragrafo => {\r
  console.log(paragrafo);\r
});\r
\`\`\`\r
\r
**Regra de Ouro:**\r
*   Use \`querySelector()\` quando voc precisa de **um** elemento especfico (como um elemento com um ID nico).\r
*   Use \`querySelectorAll()\` quando voc precisa de **mltiplos** elementos (como todos os itens de uma lista, todos os cards de produto, etc.).\r
\r
### Mtodos Antigos (Bom Saber, Mas Prefira os Modernos)\r
\r
Voc encontrar estes mtodos em cdigos mais antigos. Eles funcionam, mas so menos flexveis que \`querySelector\` e \`querySelectorAll\`.\r
\r
*   **\`getElementById('idDoElemento')\`:** Seleciona um elemento pelo seu \`id\`.  muito rpido, mas s funciona para IDs.\r
    \`\`\`javascript\r
    const container = document.getElementById('container');\r
    \`\`\`\r
\r
*   **\`getElementsByClassName('nomeDaClasse')\`:** Retorna uma **HTMLCollection** (parecida com uma NodeList) de elementos com a classe especificada.\r
    \`\`\`javascript\r
    const paragrafos = document.getElementsByClassName('paragrafo');\r
    \`\`\`\r
\r
*   **\`getElementsByTagName('nomeDaTag')\`:** Retorna uma **HTMLCollection** de elementos com a tag especificada.\r
    \`\`\`javascript\r
    const todosOsP = document.getElementsByTagName('p');\r
    \`\`\`\r
\r
**Por que preferir \`querySelector\`?**\r
\`querySelector\` e \`querySelectorAll\` so mais poderosos porque aceitam **qualquer seletor CSS**, permitindo selees muito mais complexas e especficas que os mtodos antigos no conseguem fazer facilmente. Alm disso, \`querySelectorAll\` retorna uma NodeList, que possui o mtodo \`forEach\`, tornando a iterao mais fcil do que com uma HTMLCollection.\r
`,$tt=()=>g.jsx(qe,{content:Htt,backRoute:"/js/intro-dom",backText:"Voltar: Introduo ao DOM",goRoute:"/js/manipulando-estilos",goText:"Prximo: Manipulando Estilos"}),Vtt=`# Mdulo 3, Aula 12: Manipulando Estilos e Classes\r
\r
**Objetivo:** Aprender a alterar a aparncia de elementos HTML dinamicamente, modificando seus estilos inline e, mais importante, manipulando suas classes CSS.\r
\r
---\r
\r
Uma vez que um elemento  selecionado, podemos alterar sua aparncia de duas maneiras principais.\r
\r
### 1. Manipulando Estilos Inline (Propriedade \`style\`)\r
\r
Todo elemento do DOM possui uma propriedade \`style\` que permite acessar e modificar seus estilos CSS inline (aqueles que seriam aplicados via atributo \`style="..."\`).\r
\r
**Importante:** As propriedades CSS que contm hfen (como \`background-color\` ou \`font-size\`) so convertidas para **camelCase** em JavaScript (ex: \`backgroundColor\`, \`fontSize\`).\r
\r
\`\`\`javascript\r
// Seleciona o ttulo\r
const titulo = document.querySelector('h1');\r
\r
// Altera a cor do texto\r
titulo.style.color = 'white';\r
\r
// Altera a cor de fundo\r
titulo.style.backgroundColor = 'steelblue';\r
\r
// Altera o tamanho da fonte\r
titulo.style.fontSize = '3rem';\r
\r
// Adiciona um preenchimento (padding)\r
titulo.style.padding = '1rem';\r
\`\`\`\r
\r
**Quando usar a propriedade \`style\`?**\r
 til para alteraes de estilo rpidas, dinmicas e muito especficas, que so calculadas via JavaScript (por exemplo, mover um elemento para uma posio baseada no cursor do mouse).\r
\r
**Por que no usar sempre?**\r
Manipular estilos inline mistura lgica (JS) com apresentao (CSS), o que pode dificultar a manuteno.  como adicionar um atributo \`style\` diretamente no HTML, o que  considerado uma m prtica para estilizao geral.\r
\r
### 2. Manipulando Classes (Propriedade \`classList\`) - A Melhor Prtica\r
\r
A maneira **preferida e mais poderosa** de alterar a aparncia de um elemento  adicionando ou removendo classes CSS. Isso mantm a separao de responsabilidades: o CSS cuida da aparncia, e o JavaScript apenas gerencia qual classe est ativa.\r
\r
Todo elemento possui a propriedade \`classList\`, que oferece mtodos para manipular suas classes.\r
\r
Vamos supor que temos esta classe em nosso \`estilos.css\`:\r
\`\`\`css\r
.ativo {\r
  background-color: #2ecc71;\r
  color: white;\r
  font-weight: bold;\r
}\r
\`\`\`\r
\r
Agora, no JavaScript:\r
\`\`\`javascript\r
const box = document.querySelector('.minha-caixa');\r
\r
// Adiciona uma classe\r
box.classList.add('ativo');\r
\r
// Remove uma classe\r
box.classList.remove('ativo');\r
\r
// Alterna (toggle) uma classe: se a classe existe, remove; se no existe, adiciona.\r
// Perfeito para menus, modais, temas escuros, etc.\r
box.classList.toggle('ativo');\r
\r
// Verifica se um elemento possui uma classe (retorna true ou false)\r
if (box.classList.contains('ativo')) {\r
  console.log('A caixa est ativa!');\r
} else {\r
  console.log('A caixa est inativa.');\r
}\r
\`\`\`\r
\r
**Vantagens de usar \`classList\`:**\r
*   **Cdigo Limpo:** Seu CSS permanece em seu arquivo \`.css\`, e seu JS apenas gerencia a lgica.\r
*   **Reutilizvel:** A mesma classe \`.ativo\` pode ser usada em muitos elementos diferentes.\r
*   **Performance:** O navegador  altamente otimizado para aplicar e remover classes CSS.\r
*   **Manuteno Fcil:** Para mudar o "estado ativo", voc s precisa editar o CSS, sem tocar no JavaScript.\r
`,Gtt=()=>g.jsx(qe,{content:Vtt,backRoute:"/js/selecionando-elementos",backText:"Voltar: Selecionando Elementos",goRoute:"/js/eventos",goText:"Prximo: Eventos"}),Ktt=`# Mdulo 3, Aula 13: Eventos - Introduo e Event Listeners\r
\r
**Objetivo:** Aprender a fazer o JavaScript "ouvir" e reagir a aes do usurio, como cliques, digitao e movimentos do mouse.\r
\r
---\r
\r
### O que so Eventos?\r
\r
Eventos so aes ou ocorrncias que acontecem na pgina web, s quais o JavaScript pode reagir. O navegador "dispara" eventos quando:\r
\r
*   O usurio clica em um elemento (\`click\`).\r
*   O mouse passa por cima de um elemento (\`mouseover\`).\r
*   O usurio pressiona uma tecla (\`keydown\`).\r
*   Um formulrio  enviado (\`submit\`).\r
*   A pgina termina de carregar (\`load\`).\r
*   O usurio rola a pgina (\`scroll\`).\r
\r
E muitos, muitos outros. A programao orientada a eventos  o corao da interatividade no front-end.\r
\r
### Event Listeners (Ouvintes de Eventos)\r
\r
Para reagir a um evento, ns "anexamos" um **Event Listener** (ouvinte de evento) a um elemento do DOM.\r
\r
O mtodo para isso  \`addEventListener()\`. Ele  a forma moderna e recomendada de trabalhar com eventos.\r
\r
A sintaxe bsica :\r
\`elemento.addEventListener('tipoDoEvento', funcaoCallback);\`\r
\r
*   **\`elemento\`:** O elemento do DOM que queremos observar (ex: um boto).\r
*   **\`tipoDoEvento\`:** O nome do evento que queremos ouvir, como uma string (ex: \`'click'\`, \`'mouseover'\`).\r
*   **\`funcaoCallback\`:** A funo que ser **executada** quando o evento ocorrer. Essa funo  chamada de "callback" porque ns a passamos como argumento para ser "chamada de volta" mais tarde pelo navegador.\r
\r
### Exemplo Prtico: O Evento de Clique\r
\r
Vamos criar um exemplo clssico: um boto que, ao ser clicado, exibe uma mensagem.\r
\r
**HTML:**\r
\`\`\`html\r
<button id="meuBotao">Clique em mim!</button>\r
<p id="mensagem"></p>\r
\`\`\`\r
\r
**JavaScript:**\r
\`\`\`javascript\r
// 1. Selecionar os elementos\r
const botao = document.querySelector('#meuBotao');\r
const paragrafoMensagem = document.querySelector('#mensagem');\r
\r
// 2. Definir a funo que ser executada no evento\r
function mostrarMensagem() {\r
  paragrafoMensagem.textContent = 'Voc clicou no boto! Parabns!';\r
}\r
\r
// 3. Adicionar o Event Listener ao boto\r
botao.addEventListener('click', mostrarMensagem);\r
\`\`\`\r
\r
**Analisando o cdigo:**\r
1.  Primeiro, selecionamos o boto e o pargrafo que queremos manipular.\r
2.  Depois, criamos uma funo chamada \`mostrarMensagem\`. Esta funo ser nossa ao de resposta.\r
3.  Finalmente, usamos \`addEventListener\` no \`botao\`. Dizemos a ele: "Ei, boto, quando um evento de \`'click'\` acontecer em voc, por favor, execute a funo \`mostrarMensagem\`."\r
\r
**Importante:** Note que passamos o nome da funo (\`mostrarMensagem\`) sem os parnteses \`()\`. Se escrevssemos \`mostrarMensagem()\`, a funo seria executada imediatamente. Queremos apenas passar a **referncia** da funo para que o navegador a chame no momento certo.\r
\r
### Usando Funes Annimas e Arrow Functions\r
\r
 muito comum definir a funo de callback diretamente dentro do \`addEventListener\`, usando uma funo annima ou uma arrow function. Isso  til quando a funo s ser usada naquele local especfico.\r
\r
**Com funo annima:**\r
\`\`\`javascript\r
botao.addEventListener('click', function() {\r
  paragrafoMensagem.textContent = 'Callback com funo annima!';\r
});\r
\`\`\`\r
\r
**Com Arrow Function (mais moderno e comum):**\r
\`\`\`javascript\r
botao.addEventListener('click', () => {\r
  paragrafoMensagem.textContent = 'Callback com Arrow Function!';\r
});\r
\`\`\`\r
Esta  a sintaxe que voc mais ver em cdigo JavaScript moderno.\r
`,Wtt=()=>g.jsx(qe,{content:Ktt,backRoute:"/js/manipulando-estilos",backText:"Voltar: Manipulando Estilos",goRoute:"/js/eventos-pratica",goText:"Prximo: Objeto de Evento"}),Ytt=`# Mdulo 3, Aula 14: Eventos na Prtica - O Objeto de Evento\r
\r
**Objetivo:** Entender o que  o objeto de evento, como acess-lo e utilizar suas propriedades e mtodos mais importantes, como \`event.target\` e \`event.preventDefault()\`.\r
\r
---\r
\r
### O Objeto de Evento (\`event\` ou \`e\`)\r
\r
Quando um evento ocorre e um \`addEventListener\` chama sua funo de callback, o navegador automaticamente passa um argumento para essa funo: o **objeto de evento**.\r
\r
Por conveno, nomeamos esse objeto como \`event\` ou, mais comumente, apenas \`e\`. Ele contm uma riqueza de informaes sobre o evento que acabou de acontecer.\r
\r
\`\`\`javascript\r
const botao = document.querySelector('#meuBotao');\r
\r
botao.addEventListener('click', (e) => {\r
  // 'e'  o objeto de evento\r
  console.log(e);\r
});\r
\`\`\`\r
Se voc executar este cdigo e clicar no boto, ver no console um objeto \`MouseEvent\` com dezenas de propriedades, como as coordenadas do clique (\`clientX\`, \`clientY\`), se a tecla \`Shift\` estava pressionada (\`shiftKey\`), e muito mais.\r
\r
Vamos focar nas propriedades e mtodos mais teis.\r
\r
### \`event.target\`: Quem Originou o Evento?\r
\r
A propriedade \`event.target\`  uma das mais importantes. Ela se refere ao **elemento exato que disparou o evento**.\r
\r
Isso  extremamente poderoso para um padro chamado **Delegao de Eventos (Event Delegation)**. Em vez de adicionar um ouvinte de evento a cada um dos 100 botes de uma lista, voc pode adicionar **um nico ouvinte** ao elemento pai (a \`<ul>\`, por exemplo). Dentro da funo de callback, voc usa \`e.target\` para descobrir em qual item especfico (\`<li>\` ou boto) o usurio clicou.\r
\r
**Exemplo de Delegao de Eventos:**\r
\r
**HTML:**\r
\`\`\`html\r
<ul id="lista-de-compras">\r
  <li>Caf <button class="remover">X</button></li>\r
  <li>Leite <button class="remover">X</button></li>\r
  <li>Po <button class="remover">X</button></li>\r
</ul>\r
\`\`\`\r
\r
**JavaScript:**\r
\`\`\`javascript\r
const lista = document.querySelector('#lista-de-compras');\r
\r
lista.addEventListener('click', (e) => {\r
  // Verificamos se o elemento clicado (e.target) tem a classe 'remover'\r
  if (e.target.classList.contains('remover')) {\r
    // e.target  o boto. e.target.parentElement  o <li>.\r
    const itemDaLista = e.target.parentElement;\r
    itemDaLista.remove(); // Remove o <li> da rvore DOM\r
  }\r
});\r
\`\`\`\r
Este padro  muito mais eficiente e funciona mesmo para itens que so adicionados  lista dinamicamente no futuro.\r
\r
### \`event.preventDefault()\`: Impedindo o Comportamento Padro\r
\r
Muitos elementos HTML tm um comportamento padro associado a certos eventos.\r
*   Clicar em um link (\`<a>\`) navega para a URL do \`href\`.\r
*   Clicar em um boto de \`type="submit"\` dentro de um \`<form>\` envia o formulrio e recarrega a pgina.\r
\r
O mtodo \`event.preventDefault()\` nos permite **cancelar** esse comportamento padro.\r
\r
**Exemplo: Validao de Formulrio**\r
\r
**HTML:**\r
\`\`\`html\r
<form id="meuForm">\r
  <input type="text" id="campoNome" placeholder="Digite seu nome">\r
  <button type="submit">Enviar</button>\r
</form>\r
\`\`\`\r
\r
**JavaScript:**\r
\`\`\`javascript\r
const form = document.querySelector('#meuForm');\r
const inputNome = document.querySelector('#campoNome');\r
\r
form.addEventListener('submit', (e) => {\r
  // O evento de 'submit'  disparado no formulrio\r
  \r
  if (inputNome.value === '') {\r
    // 1. Impede o envio do formulrio e o recarregamento da pgina\r
    e.preventDefault(); \r
    \r
    // 2. Mostra uma mensagem de erro para o usurio\r
    alert('Por favor, preencha o campo de nome!');\r
  }\r
});\r
\`\`\`\r
Este  um dos usos mais essenciais de \`preventDefault()\`, permitindo que o JavaScript valide os dados de um formulrio antes de decidir se ele deve ou no ser enviado para o servidor.\r
\r
### Outros Eventos Comuns e suas Propriedades\r
\r
*   **Eventos de Teclado (\`keydown\`, \`keyup\`):**\r
    *   \`e.key\`: Retorna o valor da tecla pressionada (ex: 'a', 'Enter', 'Shift').\r
    *   \`e.code\`: Retorna o cdigo fsico da tecla no teclado (ex: 'KeyA', 'Enter', 'ShiftLeft').\r
*   **Eventos de Mouse (\`mousemove\`):**\r
    *   \`e.clientX\`, \`e.clientY\`: Coordenadas do ponteiro do mouse relativas  janela do navegador.\r
`,Xtt=()=>g.jsx(qe,{content:Ytt,backRoute:"/js/eventos",backText:"Voltar: Eventos",goRoute:"/js/criando-removendo-elementos",goText:"Prximo: Criando e Removendo"}),Jtt=`# Mdulo 3, Aula 15: Criando e Removendo Elementos do DOM\r
\r
**Objetivo:** Aprender a criar, configurar e adicionar novos elementos HTML  pgina dinamicamente, bem como remover elementos existentes.\r
\r
---\r
\r
A manipulao do DOM no se limita a modificar elementos existentes. Uma das tarefas mais comuns em aplicaes web modernas  adicionar e remover contedo dinamicamente.\r
\r
### O Processo de Criao e Adio\r
\r
O processo geralmente segue trs passos:\r
1.  **Criar** o novo elemento.\r
2.  **Configurar** o elemento (adicionar contedo, classes, atributos).\r
3.  **Anexar** o elemento a um local existente no DOM.\r
\r
### 1. Criando Elementos: \`document.createElement()\`\r
\r
Este mtodo cria um novo n de elemento HTML com a tag especificada.\r
\r
\`\`\`javascript\r
// Cria um novo elemento <li>, mas ele ainda no est na pgina.\r
// Ele existe apenas na memria.\r
const novoItemLista = document.createElement('li');\r
\`\`\`\r
\r
### 2. Configurando o Elemento\r
\r
Agora que temos o elemento, podemos usar as mesmas propriedades que j aprendemos para configur-lo.\r
\r
\`\`\`javascript\r
// Adicionando contedo de texto\r
novoItemLista.textContent = 'Suco de Laranja';\r
\r
// Adicionando uma classe\r
novoItemLista.classList.add('item-novo');\r
\r
// Adicionando um atributo (ex: id)\r
novoItemLista.id = 'item-4';\r
\`\`\`\r
\r
### 3. Anexando o Elemento ao DOM\r
\r
Depois de criar e configurar o elemento, precisamos dizer ao navegador onde coloc-lo na pgina.\r
\r
*   **\`.appendChild(elementoFilho)\`:** Adiciona o \`elementoFilho\` como o **ltimo filho** do elemento pai.\r
*   **\`.prepend(elementoFilho)\`:** Adiciona o \`elementoFilho\` como o **primeiro filho** do elemento pai.\r
\r
**Exemplo Completo:**\r
\r
**HTML:**\r
\`\`\`html\r
<ul id="lista-de-compras">\r
  <li>Caf</li>\r
  <li>Leite</li>\r
</ul>\r
\`\`\`\r
\r
**JavaScript:**\r
\`\`\`javascript\r
// Seleciona o pai onde o novo elemento ser inserido\r
const lista = document.querySelector('#lista-de-compras');\r
\r
// --- Passo 1: Criar ---\r
const novoItem = document.createElement('li');\r
\r
// --- Passo 2: Configurar ---\r
novoItem.textContent = 'Po';\r
novoItem.classList.add('item-importante');\r
\r
// --- Passo 3: Anexar ---\r
lista.appendChild(novoItem); // Adiciona 'Po' no final da lista\r
\`\`\`\r
Aps a execuo, o HTML se parecer com:\r
\`\`\`html\r
<ul id="lista-de-compras">\r
  <li>Caf</li>\r
  <li>Leite</li>\r
  <li class="item-importante">Po</li>\r
</ul>\r
\`\`\`\r
\r
### Removendo Elementos: \`elemento.remove()\`\r
\r
Remover um elemento  ainda mais simples. Basta selecionar o elemento que voc quer remover e chamar o mtodo \`.remove()\` nele.\r
\r
\`\`\`javascript\r
// Suponha que queremos remover o item 'Leite'\r
const todosOsItens = document.querySelectorAll('#lista-de-compras li');\r
\r
// Seleciona o segundo item da lista (ndice 1)\r
const itemParaRemover = todosOsItens; \r
\r
if (itemParaRemover) {\r
  itemParaRemover.remove();\r
}\r
\`\`\`\r
O mtodo \`remove()\` remove o elemento e todos os seus descendentes da rvore DOM.\r
\r
### Uma Alternativa Moderna: \`innerHTML\`\r
\r
Existe uma maneira mais rpida, porm potencialmente mais perigosa, de adicionar HTML: a propriedade \`innerHTML\`.\r
\r
Ela permite que voc defina o contedo HTML de um elemento usando uma string.\r
\r
\`\`\`javascript\r
const lista = document.querySelector('#lista-de-compras');\r
\r
// Adiciona um novo item usando innerHTML\r
lista.innerHTML += '<li class="item-novo">Acar</li>';\r
\`\`\`\r
\r
**Vantagens do \`innerHTML\`:**\r
*   Sintaxe simples e rpida para criar HTML complexo.\r
\r
**Desvantagens e Riscos:**\r
*   **Segurana (XSS):** Se voc inserir contedo vindo de um usurio diretamente no \`innerHTML\` sem "sanitiz-lo", voc pode abrir uma brecha de segurana chamada Cross-Site Scripting (XSS). Um usurio mal-intencionado poderia injetar uma tag \`<script>\` e executar cdigo malicioso na sua pgina.\r
*   **Performance:** Ao usar \`+=\` no \`innerHTML\`, o navegador precisa re-analisar e re-renderizar todo o contedo do elemento pai, o que pode ser lento se o contedo for grande. O mtodo \`createElement/appendChild\`  geralmente mais performtico para adies.\r
\r
**Quando usar \`innerHTML\`?**  seguro para adicionar HTML esttico que voc mesmo escreveu. **Nunca** use para inserir dados que vm de um campo de input do usurio sem um tratamento de segurana adequado. Para o nosso projeto, \`createElement\`  a abordagem mais segura e didtica.\r
`,Qtt=()=>g.jsx(qe,{content:Jtt,backRoute:"/js/eventos-pratica",backText:"Voltar: Objeto de Evento",goRoute:"/js/arrow-functions",goText:"Prximo: Arrow Functions"}),Ztt=`# Mdulo 3, Aula 16: Arrow Functions (Funes de Seta)

As **Arrow Functions**, introduzidas no ES6, oferecem uma sintaxe mais curta e um comportamento mais previsvel do \`this\` em comparao com as funes tradicionais. Elas so amplamente utilizadas no JavaScript moderno.

## Sintaxe e Simplificaes

A principal vantagem das arrow functions  a conciso.

**Funo Tradicional (Expresso):**
\`\`\`javascript
const somar = function(a, b) {
  return a + b;
};
\`\`\`

**Arrow Function Equivalente:**
\`\`\`javascript
const somar = (a, b) => {
  return a + b;
};
\`\`\`

### Retorno Implcito
Se a funo possui apenas uma linha que retorna um valor, podemos omitir as chaves \`{}\` e a palavra-chave \`return\`.

\`\`\`javascript
// Retorna a soma de a e b
const somar = (a, b) => a + b;

console.log(somar(10, 5)); // Sada: 15
\`\`\`

### Parmetro nico
Se a funo aceita apenas um parmetro, os parnteses \`()\` ao redor dele so opcionais.

\`\`\`javascript
// Funo que eleva um nmero ao quadrado
const quadrado = n => n * n;

console.log(quadrado(7)); // Sada: 49
\`\`\`
> **Nota:** Com zero ou mais de um parmetro, os parnteses so obrigatrios: \`() => "Ol"\` ou \`(a, b) => a + b\`.

### Retornando Objetos
Para retornar um objeto literal diretamente, ele deve ser envolvido em parnteses \`()\` para evitar que o JavaScript interprete as chaves \`{}\` como o corpo da funo.

\`\`\`javascript
const criarUsuario = (nome, email) => ({ nome: nome, email: email });

const usuario = criarUsuario("Ana", "ana@exemplo.com");
console.log(usuario); // Sada: { nome: 'Ana', email: 'ana@exemplo.com' }
\`\`\`

## O \`this\` Lexical
Esta  a diferena funcional mais importante. Arrow functions **no tm seu prprio \`this\`**. Elas herdam o \`this\` do escopo pai (o escopo onde foram definidas). Isso resolve um problema comum em callbacks.

\`\`\`javascript
const time = {
  nome: "Guerreiros Dev",
  membros: ["Carlos", "Mariana", "Lucas"],

  listarMembros: function() {
    // 'this' aqui se refere ao objeto 'time'
    console.log(\`Membros do time \${this.nome}:\`);

    this.membros.forEach(membro => {
      // A arrow function herda o 'this' de 'listarMembros'.
      // Portanto, 'this.nome' refere-se a "Guerreiros Dev".
      console.log(\`- \${membro} (Time: \${this.nome})\`);
    });
  }
};

time.listarMembros();
\`\`\`
Com uma funo tradicional dentro do \`forEach\`, o \`this\` seria perdido, e \`this.nome\` resultaria em \`undefined\`.

`,ent=()=>g.jsx(qe,{content:Ztt,backRoute:"/js/criando-removendo-elementos",backText:"Voltar: Criando e Removendo Elementos",goRoute:"/js/desestruturacao",goText:"Prximo: Desestruturao"}),tnt=`# Mdulo 3, Aula 17: Desestruturao (Destructuring)

A desestruturao  uma sintaxe do ES6 que permite "desempacotar" valores de arrays ou propriedades de objetos em variveis distintas, tornando o cdigo mais limpo e legvel.

## Desestruturao de Objetos

Extraia propriedades de um objeto e atribua-as a variveis com o mesmo nome.

\`\`\`javascript
const produto = {
  id: 101,
  nome: "Notebook Gamer",
  preco: 5000,
  marca: "DevBrand"
};

// Extrai 'nome' e 'preco' do objeto 'produto'
const { nome, preco } = produto;

console.log(nome);  // Sada: "Notebook Gamer"
console.log(preco); // Sada: 5000
\`\`\`

### Renomeando Variveis e Valores Padro
Voc pode renomear a varivel e fornecer um valor padro caso a propriedade no exista no objeto.

\`\`\`javascript
// Renomeia 'marca' para 'fabricante' e define 'estoque' com valor padro 0
const { marca: fabricante, estoque = 0 } = produto;

console.log(fabricante); // Sada: "DevBrand"
console.log(estoque);    // Sada: 0 (pois 'estoque' no existe no objeto)
\`\`\`

## Desestruturao de Arrays

A desestruturao de arrays baseia-se na **posio** dos elementos.

\`\`\`javascript
const coordenadas = [120, 85, 200];

// Extrai os elementos com base em sua posio
const [x, y, z] = coordenadas;

console.log(x); // Sada: 120
console.log(y); // Sada: 85
\`\`\`

### Pulando Elementos
Para ignorar um elemento, use uma vrgula vazia.

\`\`\`javascript
const dados = ["alpha", "beta", "gamma", "delta"];
const [primeiro, , terceiro] = dados;

console.log(primeiro); // Sada: "alpha"
console.log(terceiro); // Sada: "gamma"
\`\`\`

## Aplicao em Funes
A desestruturao  extremamente til para extrair propriedades de objetos passados como parmetros, tornando a assinatura da funo mais clara.

\`\`\`javascript
const exibirProduto = ({ nome, preco, marca = "Genrica" }) => {
  console.log(\`Produto: \${nome}\`);
  console.log(\`Preo: R$ \${preco}\`);
  console.log(\`Marca: \${marca}\`);
};

exibirProduto(produto);
\`\`\`
Isso evita a necessidade de acessar \`produto.nome\`, \`produto.preco\`, etc., dentro da funo.

`,nnt=()=>g.jsx(qe,{content:tnt,backRoute:"/js/arrow-functions",backText:"Voltar: Arrow Functions",goRoute:"/js/rest-spread",goText:"Prximo: Rest e Spread"}),rnt=`# Mdulo 3, Aula 18: Operadores Rest e Spread

Os operadores Rest (\`...\`) e Spread (\`...\`) usam a mesma sintaxe, mas tm finalidades opostas. O Spread "espalha" elementos, enquanto o Rest "junta" elementos.

## Operador Spread (\`...\`)

O Spread  usado para "espalhar" os elementos de um itervel (como um array ou objeto) em um novo array, objeto ou em argumentos de uma funo.

### Com Arrays
 uma forma poderosa de copiar e combinar arrays.

\`\`\`javascript
const parte1 = ["HTML", "CSS"];
const parte2 = ["JavaScript", "React"];

// Combina os dois arrays em um novo
const frontend = [...parte1, ...parte2, "Vite"];

console.log(frontend); // Sada: ["HTML", "CSS", "JavaScript", "React", "Vite"]

// Copiando um array (forma imutvel)
const copiaFrontend = [...frontend];
\`\`\`

### Com Objetos
Permite copiar e mesclar propriedades de objetos.

\`\`\`javascript
const dadosPessoais = {
  nome: "Carlos",
  idade: 30
};

const dadosProfissionais = {
  empresa: "Tech Solutions",
  cargo: "Engenheiro de Software"
};

const perfilCompleto = { ...dadosPessoais, ...dadosProfissionais, status: "Ativo" };

console.log(perfilCompleto);
// Sada: { nome: 'Carlos', idade: 30, empresa: 'Tech Solutions', cargo: 'Engenheiro de Software', status: 'Ativo' }
\`\`\`
> Se houver propriedades com o mesmo nome, a ltima propriedade espalhada prevalece.

## Operador Rest (\`...\`)

O Rest  usado para "juntar" mltiplos elementos em um nico array.  mais comumente visto em parmetros de funes.

### Em Funes
Permite que uma funo aceite um nmero indefinido de argumentos como um array.

\`\`\`javascript
// A funo 'somarTudo' aceita qualquer nmero de argumentos.
// O operador Rest agrupa todos eles no array 'numeros'.
function somarTudo(...numeros) {
  return numeros.reduce((total, num) => total + num, 0);
}

console.log(somarTudo(1, 2, 3));       // Sada: 6
console.log(somarTudo(10, 20, 30, 40)); // Sada: 100
console.log(somarTudo(5));             // Sada: 5
\`\`\`

### Com Desestruturao
O Rest tambm pode ser usado na desestruturao para capturar o "resto" dos elementos de um array.

\`\`\`javascript
const ranking = ["Ouro", "Prata", "Bronze", "Participante A", "Participante B"];

const [primeiro, segundo, ...outros] = ranking;

console.log(primeiro); // Sada: "Ouro"
console.log(segundo);  // Sada: "Prata"
console.log(outros);   // Sada: ["Bronze", "Participante A", "Participante B"]
\`\`\`
O operador Rest deve ser sempre o ltimo elemento em uma desestruturao.

`,ont=()=>g.jsx(qe,{content:rnt,backRoute:"/js/desestruturacao",backText:"Voltar: Desestruturao",goRoute:"/js/map-filter-reduce",goText:"Prximo: Map, Filter, Reduce"}),ant=`# Mdulo 3, Aula 19: Mtodos de Array: map, filter, reduce

\`map\`, \`filter\` e \`reduce\` so os mtodos de iterao mais importantes e poderosos para trabalhar com arrays em JavaScript. Eles permitem a programao funcional e imutvel, pois todos retornam um **novo array** (ou valor, no caso do \`reduce\`) sem modificar o original.

## \`map()\`
O mtodo \`map()\` cria um **novo array** com os resultados da chamada de uma funo para cada elemento do array original. Ele transforma cada elemento em algo novo.

**Objetivo:** Transformar cada item de um array.

\`\`\`javascript
const numeros = [1, 2, 3, 4, 5];

// Cria um novo array com o dobro de cada nmero
const dobrados = numeros.map(num => num * 2);

console.log(dobrados); // Sada: [2, 4, 6, 8, 10]
console.log(numeros);  // Sada: [1, 2, 3, 4, 5] (o original no foi modificado)

const usuarios = [
  { nome: "Ana", idade: 25 },
  { nome: "Bruno", idade: 30 }
];

// Cria um novo array contendo apenas os nomes
const nomes = usuarios.map(user => user.nome);
console.log(nomes); // Sada: ["Ana", "Bruno"]
\`\`\`

## \`filter()\`
O mtodo \`filter()\` cria um **novo array** com todos os elementos que passaram no teste implementado pela funo fornecida.

**Objetivo:** Selecionar um subconjunto de itens de um array.

\`\`\`javascript
const idades = [15, 22, 18, 35, 12];

// Cria um novo array apenas com as idades de maiores de idade
const maioresDeIdade = idades.filter(idade => idade >= 18);

console.log(maioresDeIdade); // Sada: [22, 18, 35]

const produtos = [
  { nome: "Notebook", categoria: "Eletrnicos" },
  { nome: "Camiseta", categoria: "Vesturio" },
  { nome: "Mouse", categoria: "Eletrnicos" }
];

// Filtra apenas os produtos da categoria "Eletrnicos"
const eletronicos = produtos.filter(p => p.categoria === "Eletrnicos");
console.log(eletronicos);
\`\`\`

## \`reduce()\`
O mtodo \`reduce()\` executa uma funo "redutora" para cada elemento do array, resultando em um **nico valor de retorno**.

**Objetivo:** "Reduzir" um array a um nico valor (um nmero, uma string, um objeto, etc.).

A funo redutora recebe dois argumentos principais:
1.  \`acumulador\`: O valor acumulado retornado na iterao anterior.
2.  \`valorAtual\`: O elemento atual que est sendo processado.

\`\`\`javascript
const valores = [10, 20, 30, 40];

// Soma todos os valores do array. O '0'  o valor inicial do acumulador.
const somaTotal = valores.reduce((acumulador, valorAtual) => {
  return acumulador + valorAtual;
}, 0);

console.log(somaTotal); // Sada: 100

// Exemplo mais complexo: agrupar pessoas por idade
const pessoas = [
  { nome: "Leo", idade: 25 },
  { nome: "Bia", idade: 30 },
  { nome: "Gil", idade: 25 }
];

const pessoasPorIdade = pessoas.reduce((acc, pessoa) => {
  const idade = pessoa.idade;
  if (!acc[idade]) {
    acc[idade] = [];
  }
  acc[idade].push(pessoa);
  return acc;
}, {}); // O valor inicial  um objeto vazio

console.log(pessoasPorIdade);
// Sada: { '25': [ { nome: 'Leo', idade: 25 }, { nome: 'Gil', idade: 25 } ], '30': [ { nome: 'Bia', idade: 30 } ] }
\`\`\`

`,snt=()=>g.jsx(qe,{content:ant,backRoute:"/js/rest-spread",backText:"Voltar: Rest e Spread",goRoute:"/js/classes",goText:"Prximo: Classes"}),int=`# Mdulo 3, Aula 20: Classes

Introduzidas no ES6, as **classes** em JavaScript so uma "acar sinttico" sobre a herana baseada em prottipos j existente. Elas oferecem uma sintaxe mais clara e familiar (para quem vem de outras linguagens como Java ou C#) para criar objetos e lidar com herana.

## Sintaxe Bsica de uma Classe

Uma classe  um "molde" para criar objetos. Ela  definida usando a palavra-chave \`class\`.

\`\`\`javascript
class Produto {
  // O mtodo constructor  especial. Ele  chamado automaticamente quando
  // um novo objeto da classe  criado com a palavra-chave 'new'.
  constructor(nome, preco) {
    this.nome = nome;
    this.preco = preco;
    this.emEstoque = true;
  }

  // Mtodos da classe so funes associadas ao objeto.
  exibirPreco() {
    console.log(\`O preo de \${this.nome}  R$ \${this.preco}.\`);
  }

  vender() {
    this.emEstoque = false;
    console.log(\`\${this.nome} foi vendido!\`);
  }
}

// Criando instncias (objetos) da classe Produto
const notebook = new Produto("Notebook Inspiron", 3500);
const teclado = new Produto("Teclado Mecnico", 300);

notebook.exibirPreco(); // Sada: O preo de Notebook Inspiron  R$ 3500.
teclado.vender();      // Sada: Teclado Mecnico foi vendido!
console.log(teclado.emEstoque); // Sada: false
\`\`\`

## Herana com \`extends\`

A herana permite que uma classe (filha) herde propriedades e mtodos de outra classe (pai). Usamos a palavra-chave \`extends\`.

\`\`\`javascript
// Classe Pai
class Animal {
  constructor(nome) {
    this.nome = nome;
  }

  falar() {
    console.log(\`\${this.nome} faz um barulho.\`);
  }
}

// Classe Filha que herda de Animal
class Cachorro extends Animal {
  // O construtor da classe filha deve chamar super()
  // para executar o construtor da classe pai.
  constructor(nome, raca) {
    super(nome); // Chama o constructor de Animal(nome)
    this.raca = raca;
  }

  // Podemos sobrescrever um mtodo da classe pai
  falar() {
    console.log(\`\${this.nome} (da raa \${this.raca}) late.\`);
  }

  // E adicionar novos mtodos
  abanarRabo() {
    console.log(\`\${this.nome} est abanando o rabo!\`);
  }
}

const rex = new Cachorro("Rex", "Golden Retriever");

rex.falar();       // Sada: Rex (da raa Golden Retriever) late.
rex.abanarRabo();  // Sada: Rex est abanando o rabo!
\`\`\`

## Getters e Setters

Getters e setters permitem definir mtodos que parecem propriedades. \`get\`  usado para obter o valor de uma propriedade, e \`set\` para definir o valor.

\`\`\`javascript
class Usuario {
  constructor(primeiroNome, ultimoNome) {
    this.primeiroNome = primeiroNome;
    this.ultimoNome = ultimoNome;
  }

  // Getter: parece uma propriedade, mas  um mtodo
  get nomeCompleto() {
    return \`\${this.primeiroNome} \${this.ultimoNome}\`;
  }

  // Setter: permite atribuir um valor como se fosse uma propriedade
  set nomeCompleto(novoNome) {
    const [primeiro, ultimo] = novoNome.split(' ');
    this.primeiroNome = primeiro;
    this.ultimoNome = ultimo;
  }
}

const user = new Usuario("Joo", "Silva");

// Usando o getter
console.log(user.nomeCompleto); // Sada: Joo Silva

// Usando o setter
user.nomeCompleto = "Maria Souza";
console.log(user.primeiroNome); // Sada: Maria
console.log(user.nomeCompleto); // Sada: Maria Souza
\`\`\`

`,lnt=()=>g.jsx(qe,{content:int,backRoute:"/js/map-filter-reduce",backText:"Voltar: Map, Filter, Reduce",goRoute:"/js/hoisting",goText:"Prximo: Hoisting"}),cnt=`# Mdulo 3, Aula 21: Hoisting (Iamento)

**Hoisting**  um comportamento do JavaScript onde declaraes de variveis e funes so "movidas" para o topo de seu escopo (global ou de funo) antes da execuo do cdigo.

 importante entender que apenas a **declarao**  iada, no a **inicializao** (atribuio de valor).

## Hoisting de Variveis com \`var\`

Declaraes com \`var\` so completamente iadas, mas suas atribuies no. Isso significa que a varivel existe desde o incio do escopo, mas seu valor  \`undefined\` at a linha onde o valor  atribudo.

\`\`\`javascript
console.log(meuNome); // Sada: undefined

var meuNome = "Gabriel";

console.log(meuNome); // Sada: "Gabriel"

// O que o interpretador JavaScript "v":
// var meuNome;
// console.log(meuNome);
// meuNome = "Gabriel";
// console.log(meuNome);
\`\`\`
Este comportamento pode levar a bugs inesperados e  um dos principais motivos para evitar o uso de \`var\`.

## \`let\` e \`const\` e a "Temporal Dead Zone" (TDZ)

Variveis declaradas com \`let\` e \`const\` tambm so iadas, mas elas no so inicializadas com \`undefined\`. Em vez disso, elas entram em um estado chamado **Temporal Dead Zone (TDZ)**.

A TDZ comea no incio do escopo e termina na linha onde a varivel  declarada. Tentar acessar a varivel dentro da TDZ resulta em um \`ReferenceError\`.

\`\`\`javascript
// console.log(idade); // ReferenceError: Cannot access 'idade' before initialization

let idade = 30; // Fim da TDZ para 'idade'

console.log(idade); // Sada: 30
\`\`\`
Esse comportamento  muito mais seguro, pois previne o uso de variveis antes de sua declarao explcita, tornando o cdigo mais previsvel.

## Hoisting de Funes

A forma como as funes so iadas depende de como elas so declaradas.

### Function Declaration (Declarao de Funo)
Declaraes de funo so **completamente iadas**, incluindo seu corpo. Isso significa que voc pode chamar a funo antes mesmo de ela ser declarada no cdigo.

\`\`\`javascript
saudar(); // Sada: "Ol, mundo!"

function saudar() {
  console.log("Ol, mundo!");
}
\`\`\`

### Function Expression (Expresso de Funo)
Expresses de funo (quando uma funo  atribuda a uma varivel) seguem as regras de hoisting da varivel (\`var\`, \`let\` ou \`const\`).

\`\`\`javascript
// Se usar var, o resultado  um TypeError, pois 'dizerTchau'  undefined.
// dizerTchau(); // TypeError: dizerTchau is not a function

// Se usar let ou const, o resultado  um ReferenceError (TDZ).
// dizerTchau(); // ReferenceError: Cannot access 'dizerTchau' before initialization

const dizerTchau = function() {
  console.log("Tchau!");
};

dizerTchau(); // Sada: "Tchau!"
\`\`\`

**Boas Prticas:**
1.  Declare suas variveis (\`let\`, \`const\`) e funes no topo de seus escopos.
2.  Prefira \`let\` e \`const\` em vez de \`var\` para evitar os efeitos confusos do hoisting.
3.  Entenda o hoisting para depurar cdigo legado, mas escreva seu novo cdigo de forma que no dependa dele.

`,unt=()=>g.jsx(qe,{content:cnt,backRoute:"/js/classes",backText:"Voltar: Classes",goRoute:"/js/callbacks",goText:"Prximo: Callbacks"}),dnt=`# Mdulo 3, Aula 22: Callbacks

Um **callback** (funo de retorno)  uma funo que  passada como argumento para outra funo, com a inteno de ser executada mais tarde.

Callbacks so a base do JavaScript assncrono. Eles permitem que uma funo execute uma tarefa e, quando essa tarefa estiver concluda, chame a funo de callback para continuar a execuo.

## Exemplo Sncrono de Callback

Mesmo em cdigo sncrono, callbacks so muito comuns. Os mtodos de array como \`map\`, \`filter\` e \`forEach\` todos usam callbacks.

\`\`\`javascript
const numeros = [1, 2, 3];

// A funo (n => n * 2)  um callback passado para o mtodo map.
// O map executa esse callback para cada item do array.
const dobrados = numeros.map(n => n * 2);

console.log(dobrados); // Sada: [2, 4, 6]

function processarUsuario(nome, callback) {
  console.log(\`Processando dados para: \${nome}\`);
  // Aps o processamento, executa o callback
  callback(nome.toUpperCase());
}

processarUsuario("Carlos", (nomeEmMaiusculas) => {
  console.log(\`Nome processado: \${nomeEmMaiusculas}\`);
});
// Sada:
// Processando dados para: Carlos
// Nome processado: CARLOS
\`\`\`

## Callbacks em Cdigo Assncrono

A verdadeira fora dos callbacks aparece em operaes assncronas, como ler um arquivo, fazer uma requisio de rede ou, no exemplo mais simples, usar \`setTimeout\`.

\`setTimeout\`  uma funo que executa um callback aps um determinado perodo de tempo.

\`\`\`javascript
console.log("1. Incio do processo.");

// A funo de callback ser executada aps 2000ms (2 segundos).
setTimeout(() => {
  console.log("3. Callback executado aps 2 segundos.");
}, 2000);

console.log("2. Fim do processo sncrono.");

// Ordem de execuo no console:
// 1. Incio do processo.
// 2. Fim do processo sncrono.
// (espera 2 segundos)
// 3. Callback executado aps 2 segundos.
\`\`\`
Isso demonstra a natureza no-bloqueante do JavaScript. O cdigo no para e espera por 2 segundos; ele continua a execuo e o callback  chamado quando o tempo se esgota.

## O "Callback Hell" (Inferno de Callbacks)

Quando voc tem mltiplas operaes assncronas que dependem umas das outras, o uso de callbacks aninhados pode levar a um cdigo difcil de ler e manter, conhecido como "Callback Hell" ou "Pyramid of Doom" (Pirmide da Perdio).

\`\`\`javascript
// Exemplo de Callback Hell
primeiraFuncao(args, (resultado1) => {
  segundaFuncao(resultado1, (resultado2) => {
    terceiraFuncao(resultado2, (resultado3) => {
      // E assim por diante...
      console.log("Finalmente, o resultado final!");
    });
  });
});
\`\`\`
Este  um dos principais problemas que as **Promises** (prxima aula) vieram para resolver. Embora os callbacks ainda sejam amplamente utilizados, para sequncias assncronas complexas, as Promises e o \`async/await\` so abordagens muito superiores.

`,pnt=()=>g.jsx(qe,{content:dnt,backRoute:"/js/hoisting",backText:"Voltar: Hoisting",goRoute:"/js/promises",goText:"Prximo: Promises"}),fnt=`# Mdulo 3, Aula 23: Promises (Promessas)

Uma **Promise**  um objeto que representa a eventual concluso (ou falha) de uma operao assncrona. Ela oferece uma maneira muito mais limpa e gerencivel de lidar com cdigo assncrono do que os callbacks aninhados.

Uma Promise pode estar em um de trs estados:
1.  **Pending (Pendente):** O estado inicial; a operao ainda no foi concluda.
2.  **Fulfilled (Realizada/Resolvida):** A operao foi concluda com sucesso, e a Promise tem um valor resultante.
3.  **Rejected (Rejeitada):** A operao falhou, e a Promise tem um motivo (um erro).

## Consumindo uma Promise

A maneira mais comum de interagir com uma Promise  usando os mtodos \`.then()\` e \`.catch()\`.

*   \`.then(onFulfilled)\`:  chamado quando a Promise  resolvida com sucesso. Ele recebe o valor resultante como argumento.
*   \`.catch(onRejected)\`:  chamado quando a Promise  rejeitada. Ele recebe o erro como argumento.
*   \`.finally(onFinally)\`:  chamado independentemente de a Promise ter sido resolvida ou rejeitada. til para limpeza de cdigo.

\`\`\`javascript
// fetch()  uma funo nativa do navegador que retorna uma Promise.
const promiseDeCep = fetch('https://viacep.com.br/ws/01001000/json/');

console.log("Iniciando a requisio...");

promiseDeCep
  .then(response => {
    // O primeiro .then recebe o objeto de resposta HTTP.
    // response.json() tambm retorna uma Promise.
    console.log("Resposta recebida, processando JSON...");
    return response.json();
  })
  .then(data => {
    // O segundo .then recebe os dados do JSON processado.
    console.log("Dados JSON processados:");
    console.log(data); // Exibe os dados do CEP
    console.log(\`Logradouro: \${data.logradouro}\`);
  })
  .catch(error => {
    // O .catch lida com qualquer erro que ocorra na cadeia de Promises.
    console.error("Ocorreu um erro na requisio:", error);
  })
  .finally(() => {
    // O .finally  sempre executado.
    console.log("Requisio finalizada.");
  });

console.log("Requisio enviada, aguardando resposta...");
\`\`\`
A grande vantagem aqui  o **encadeamento (\`chaining\`)**. Em vez de aninhar callbacks, encadeamos chamadas \`.then()\`, tornando o fluxo do cdigo linear e muito mais fcil de ler.

## Criando uma Promise

Voc tambm pode criar suas prprias Promises usando o construtor \`new Promise()\`. Ele recebe uma funo (o "executor") com dois parmetros: \`resolve\` e \`reject\`.

*   \`resolve(value)\`: Chame esta funo quando a operao assncrona for bem-sucedida.
*   \`reject(error)\`: Chame esta funo quando a operao falhar.

\`\`\`javascript
function esperarSegundos(segundos) {
  return new Promise((resolve, reject) => {
    if (segundos < 0) {
      reject(new Error("O tempo no pode ser negativo."));
    }
    
    setTimeout(() => {
      resolve(\`Esperei por \${segundos} segundo(s).\`);
    }, segundos * 1000);
  });
}

esperarSegundos(2)
  .then(mensagem => console.log(mensagem)) // Sada aps 2s: "Esperei por 2 segundo(s)."
  .catch(erro => console.error(erro));

esperarSegundos(-1)
  .then(mensagem => console.log(mensagem))
  .catch(erro => console.error(erro.message)); // Sada imediata: "O tempo no pode ser negativo."
\`\`\`
As Promises so a base para a sintaxe \`async/await\`, que torna o cdigo assncrono ainda mais simples.

`,mnt=()=>g.jsx(qe,{content:fnt,backRoute:"/js/callbacks",backText:"Voltar: Callbacks",goRoute:"/js/fetch",goText:"Prximo: Fetch API"}),hnt=`# Mdulo 3, Aula 24: Fetch API

A **Fetch API**  a interface moderna do JavaScript para fazer requisies de rede (HTTP), substituindo a antiga \`XMLHttpRequest\`. Ela  baseada em Promises, o que a torna poderosa e flexvel para lidar com respostas assncronas.

## Fazendo uma Requisio \`GET\`

A forma mais simples de usar o \`fetch\`  passar a URL do recurso que voc quer buscar. Por padro, ele faz uma requisio do tipo \`GET\`.

O \`fetch()\` retorna uma Promise que resolve para o objeto \`Response\`, representando a resposta da requisio.

\`\`\`javascript
const url = 'https://jsonplaceholder.typicode.com/posts/1';

fetch(url)
  .then(response => {
    // O objeto 'response' contm informaes sobre a resposta, como status, headers, etc.
    console.log('Status da resposta:', response.status); // Ex: 200

    // Para acessar o corpo da resposta, precisamos usar um mtodo como .json(),
    // que tambm retorna uma Promise.
    if (!response.ok) {
      // response.ok  true se o status for 2xx (sucesso).
      throw new Error(\`Erro na rede: \${response.status}\`);
    }
    return response.json();
  })
  .then(data => {
    // Agora temos os dados do corpo da resposta.
    console.log('Ttulo do post:', data.title);
  })
  .catch(error => {
    // Captura erros de rede ou erros lanados por ns (como o !response.ok).
    console.error('Houve um problema com a operao fetch:', error);
  });
\`\`\`

## Fazendo uma Requisio \`POST\`

Para fazer outros tipos de requisio (como \`POST\`, \`PUT\`, \`DELETE\`), voc precisa passar um segundo argumento para o \`fetch\`: um objeto de configurao.

\`\`\`javascript
const postUrl = 'https://jsonplaceholder.typicode.com/posts';

const novoPost = {
  title: 'Meu Novo Post',
  body: 'Este  o contedo do meu post.',
  userId: 1,
};

const config = {
  method: 'POST', // Define o mtodo HTTP
  headers: {
    // Informa ao servidor que estamos enviando dados no formato JSON
    'Content-Type': 'application/json',
  },
  // O corpo da requisio precisa ser uma string.
  // JSON.stringify() converte nosso objeto JavaScript em uma string JSON.
  body: JSON.stringify(novoPost),
};

fetch(postUrl, config)
  .then(response => response.json())
  .then(data => {
    console.log('Post criado com sucesso:');
    console.log(data); // O servidor geralmente retorna o objeto criado com um ID.
  })
  .catch(error => {
    console.error('Erro ao criar o post:', error);
  });
\`\`\`

### Principais Opes de Configurao

*   \`method\`: O mtodo HTTP (\`'GET'\`, \`'POST'\`, \`'PUT'\`, \`'DELETE'\`, etc.).
*   \`headers\`: Um objeto contendo os cabealhos da requisio.
*   \`body\`: O corpo da requisio. Deve ser uma string ou um objeto \`FormData\`, \`Blob\`, etc.
*   \`mode\`: Controla se requisies cross-origin so permitidas (\`'cors'\`, \`'no-cors'\`, \`'same-origin'\`). O padro  \`'cors'\`.
*   \`cache\`: Define como a requisio interage com o cache do navegador.

A Fetch API  a ferramenta padro para comunicao com APIs em aplicaes web modernas.

`,gnt=()=>g.jsx(qe,{content:hnt,backRoute:"/js/promises",backText:"Voltar: Promises",goRoute:"/js/async-await",goText:"Prximo: Async/Await"}),bnt=`# Mdulo 3, Aula 25: Async/Await

\`async/await\`  uma sintaxe especial introduzida no ES2017, construda em cima de Promises, que permite escrever cdigo assncrono de uma maneira que se parece e se comporta como cdigo sncrono. Isso torna o cdigo muito mais fcil de ler e depurar.

## A Sintaxe

Para usar \`async/await\`, voc precisa entender duas palavras-chave:

1.  **\`async\`**: Colocada antes de uma funo, ela transforma a funo em uma "funo assncrona". Uma funo \`async\` **sempre retorna uma Promise**. Se a funo retornar um valor, a Promise ser resolvida com esse valor. Se a funo lanar um erro, a Promise ser rejeitada com esse erro.

2.  **\`await\`**: S pode ser usada **dentro de uma funo \`async\`**. Ela "pausa" a execuo da funo e espera que uma Promise seja resolvida. Quando a Promise  resolvida, o \`await\` retorna o valor resolvido, e a execuo da funo continua.

## Exemplo: Refatorando \`fetch\` com \`async/await\`

Vamos pegar nosso exemplo anterior com \`fetch\` e \`.then()\` e reescrev-lo com \`async/await\`.

**Verso com \`.then()\`:**
\`\`\`javascript
fetch('https://api.github.com/users/gabrifgaraujo')
  .then(response => response.json())
  .then(data => {
    console.log(data.name);
  })
  .catch(error => {
    console.error(error);
  });
\`\`\`

**Verso com \`async/await\`:**
\`\`\`javascript
// Definimos uma funo assncrona para poder usar 'await'
async function buscarDadosDoGithub() {
  console.log("Buscando dados...");
  
  try {
    // 'await' espera a Promise de fetch resolver e retorna o objeto Response
    const response = await fetch('https://api.github.com/users/gabrifgaraujo');
    
    // Verifica se a resposta foi bem-sucedida
    if (!response.ok) {
      throw new Error(\`Erro HTTP! Status: \${response.status}\`);
    }

    // 'await' espera a Promise de response.json() resolver e retorna os dados
    const data = await response.json();
    
    console.log(\`Nome do usurio: \${data.name}\`);
    console.log(\`Repositrios pblicos: \${data.public_repos}\`);

  } catch (error) {
    // O bloco catch lida com erros de rede ou erros lanados dentro do try
    console.error("Ocorreu um erro ao buscar dados do GitHub:", error);
  } finally {
    console.log("Busca de dados finalizada.");
  }
}

buscarDadosDoGithub();
\`\`\`

## Vantagens do \`async/await\`

*   **Legibilidade:** O cdigo se parece mais com o sncrono, facilitando a leitura e o entendimento do fluxo.
*   **Tratamento de Erros:** O \`try...catch\` funciona de forma natural com \`async/await\`, permitindo um tratamento de erros centralizado para todas as operaes assncronas dentro da funo.
*   **Depurao:**  mais fcil depurar cdigo \`async/await\` usando ferramentas de desenvolvedor, pois o fluxo de execuo  mais linear.

Lembre-se: \`async/await\`  apenas uma sintaxe mais agradvel para trabalhar com Promises. Por baixo dos panos, ele ainda usa Promises.

`,ynt=()=>g.jsx(qe,{content:bnt,backRoute:"/js/fetch",backText:"Voltar: Fetch API",goRoute:"/js/modulos",goText:"Prximo: Mdulos"}),vnt=`# Mdulo 3, Aula 26: Mdulos (ES Modules)

Os **Mdulos JavaScript** (ES Modules ou ESM) so a forma padro de organizar e reutilizar cdigo JavaScript. Introduzidos no ES6, eles permitem dividir seu cdigo em arquivos separados, onde cada arquivo  um mdulo. Isso ajuda a evitar conflitos de nomes, melhora a organizao e facilita a manuteno do cdigo.

## \`export\` e \`import\`

As duas palavras-chave principais para trabalhar com mdulos so \`export\` e \`import\`.

### \`export\`

Use \`export\` para disponibilizar variveis, funes, classes ou constantes de um mdulo para outros mdulos.

#### Exportao Nomeada (Named Exports)

Voc pode exportar mltiplos itens de um mdulo, referenciando-os pelo nome.

**\`utils.js\`:**
\`\`\`javascript
// Exportando variveis e funes
export const PI = 3.14159;

export function somar(a, b) {
  return a + b;
}

export class Calculadora {
  multiplicar(a, b) {
    return a * b;
  }
}
\`\`\`

#### Exportao Padro (Default Export)

Cada mdulo pode ter apenas uma exportao padro. Ela  til quando o mdulo exporta uma nica entidade principal.

**\`saudacao.js\`:**
\`\`\`javascript
// Exportando uma funo como padro
export default function dizerOla(nome) {
  return \`Ol, \${nome}!\`;
}

// Ou exportando uma classe como padro
// export default class Pessoa { /* ... */ }
\`\`\`

### \`import\`

Use \`import\` para usar as entidades exportadas por outros mdulos.

#### Importao Nomeada

Para importar exportaes nomeadas, use chaves \`{}\` e o nome exato da exportao.

**\`app.js\`:**
\`\`\`javascript
import { PI, somar, Calculadora } from './utils.js';

console.log(PI);         // Sada: 3.14159
console.log(somar(2, 3));  // Sada: 5

const calc = new Calculadora();
console.log(calc.multiplicar(4, 5)); // Sada: 20
\`\`\`

#### Importao Padro

Para importar a exportao padro, voc pode dar qualquer nome a ela, sem usar chaves \`{}\`.

**\`app.js\`:**
\`\`\`javascript
import saudacaoPadrao from './saudacao.js';

console.log(saudacaoPadrao("Mundo")); // Sada: Ol, Mundo!
\`\`\`

#### Importando Tudo

Voc pode importar todas as exportaes nomeadas de um mdulo como um objeto, usando \`* as nomeDoObjeto\`.

**\`app.js\`:**
\`\`\`javascript
import * as Utils from './utils.js';

console.log(Utils.PI);
console.log(Utils.somar(10, 20));
\`\`\`

## Consideraes Importantes

*   **Caminhos Relativos:** Ao importar mdulos locais, sempre use caminhos relativos (\`./\`, \`../\`).
*   **Extenso \`.js\`:** Em ambientes de navegador,  comum (e muitas vezes necessrio) incluir a extenso \`.js\` no caminho do import.
*   **\`type="module"\`:** Para que o navegador entenda que seu script principal est usando mdulos, voc deve adicionar \`type="module"\` na tag \`<script>\` no seu HTML:
    \`\`\`html
    <script type="module" src="./app.js"><\/script>
    \`\`\`
*   **Ordem de Execuo:** Mdulos so carregados e executados apenas uma vez. As dependncias so carregadas antes do mdulo que as importa.

Os mdulos so fundamentais para construir aplicaes JavaScript modernas e escalveis, permitindo um desenvolvimento mais organizado e eficiente.

`,xnt=()=>g.jsx(qe,{content:vnt,backRoute:"/js/async-await",backText:"Voltar: Async/Await",goRoute:"/js/projeto-lista-tarefas",goText:"Projeto: Lista de Tarefas"}),Snt='# Projeto Prtico do Mdulo 3: Lista de Tarefas (To-Do List) Interativa\r\n\r\n**Objetivo:** Unir todos os conceitos de JavaScript, manipulao do DOM e eventos para criar uma aplicao web clssica e funcional: uma lista de tarefas.\r\n\r\n---\r\n\r\n### Descrio\r\n\r\nVoc construir uma aplicao de "To-Do List" do zero. O usurio poder digitar uma nova tarefa em um campo de texto, adicion-la  lista pressionando um boto ou a tecla "Enter", e marcar tarefas como concludas ou remov-las da lista.\r\n\r\n### Funcionalidades Requeridas\r\n\r\n1.  **Adicionar Tarefa:**\r\n    *   Um campo de input de texto para o usurio digitar a nova tarefa.\r\n    *   Um boto "Adicionar".\r\n    *   Quando o boto for clicado ou a tecla "Enter" for pressionada no input, a nova tarefa deve ser adicionada  lista na tela.\r\n    *   O campo de input deve ser limpo aps a adio.\r\n    *   No deve ser possvel adicionar uma tarefa vazia.\r\n\r\n2.  **Exibir Tarefas:**\r\n    *   As tarefas adicionadas devem aparecer em uma lista no ordenada (`<ul>`).\r\n    *   Cada item da lista (`<li>`) deve conter o texto da tarefa e dois botes: "Concluir" e "Remover".\r\n\r\n3.  **Concluir Tarefa:**\r\n    *   Ao clicar no boto "Concluir" de uma tarefa, o elemento `<li>` correspondente deve receber uma classe (ex: `.concluida`).\r\n    *   No seu CSS, essa classe deve aplicar um estilo visual, como riscar o texto (`text-decoration: line-through;`) e talvez mudar a cor.\r\n    *   Clicar novamente no boto deve remover a classe, "desmarcando" a tarefa. (Dica: `classList.toggle()`).\r\n\r\n4.  **Remover Tarefa:**\r\n    *   Ao clicar no boto "Remover", o elemento `<li>` inteiro correspondente quela tarefa deve ser removido do DOM.\r\n\r\n### Estrutura Sugerida\r\n\r\n**HTML (`index.html`):**\r\n*   Um `<header>` com um `<h1>` para o ttulo da aplicao.\r\n*   Um `<form>` contendo o `<input type="text">` e o `<button type="submit">`. Usar um formulrio  bom para capturar o evento "Enter".\r\n*   Uma `<ul>` vazia que servir como o continer para as tarefas.\r\n\r\n**CSS (`estilos.css`):**\r\n*   Estilos bsicos para o layout, o formulrio e os botes.\r\n*   Uma classe `.concluida` para estilizar as tarefas finalizadas.\r\n\r\n**JavaScript (`script.js`):**\r\nEste  o corao do projeto.\r\n\r\n1.  **Seleo de Elementos:** Comece selecionando os elementos principais do DOM com `querySelector`: o formulrio, o input e a lista `<ul>`.\r\n\r\n2.  **Event Listener Principal:** Adicione um `addEventListener` ao evento `submit` do formulrio.\r\n    *   Dentro do callback, no se esquea de usar `event.preventDefault()` para impedir que a pgina recarregue.\r\n    *   Pegue o valor do input (`input.value`).\r\n    *   Verifique se o valor no est vazio (`.trim()`).\r\n    *   Chame uma funo para criar e adicionar o novo item da tarefa na tela.\r\n    *   Limpe o input (`input.value = \'\';`) e coloque o foco de volta nele (`input.focus();`).\r\n\r\n3.  **Funo para Criar Tarefa:** Crie uma funo separada (ex: `adicionarTarefa(texto)`) que:\r\n    *   Cria os elementos necessrios com `document.createElement()`: `<li>`, o texto da tarefa, e os dois botes.\r\n    *   Configura os elementos: adiciona texto, classes, etc.\r\n    *   Anexa os botes ao `<li>` e, em seguida, anexa o `<li>`  `<ul>`.\r\n\r\n4.  **Delegao de Eventos:** Adicione **um nico** `addEventListener` de `click` na `<ul>`.\r\n    *   Dentro do callback, use `event.target` para verificar se o elemento clicado foi um boto de "Concluir" ou "Remover" (verificando suas classes).\r\n    *   Se for "Concluir", pegue o elemento `<li>` pai e use `classList.toggle(\'concluida\')`.\r\n    *   Se for "Remover", pegue o elemento `<li>` pai e use `.remove()`.\r\n\r\n### Desafios Adicionais (Opcional)\r\n\r\n*   **Salvar no Local Storage:** Pesquise sobre `localStorage` para que as tarefas no desapaream quando a pgina for recarregada.\r\n*   **Filtros:** Adicione botes para filtrar a visualizao entre "Todas", "Ativas" e "Concludas".\r\n*   **Edio de Tarefas:** Permita que o usurio clique no texto de uma tarefa para edit-la.\r\n\r\nEste projeto  um excelente portflio inicial, pois demonstra competncia em todas as reas fundamentais do JavaScript para o front-end.\r\n',Ent=()=>g.jsx(qe,{content:Snt,backRoute:"/js/modulos",backText:"Voltar: Mdulos",goRoute:"/algoritmos/introducao",goText:"Introduo aos Algoritmos"}),Tnt=`# Mdulo 4: Arquitetura, Estruturas de Dados e Algoritmos

## Aula 1: Introduo  Complexidade de Algoritmos

Nesta aula, vamos mergulhar no mundo dos algoritmos e entender por que a eficincia  um fator crucial no desenvolvimento de software. Voc aprender a analisar o desempenho de seus programas usando a notao Big O, uma ferramenta fundamental para qualquer engenheiro de software.

### O que  um Algoritmo? Por que a Eficincia Importa?

Um **algoritmo** pode ser definido como uma sequncia finita e bem definida de instrues ou passos para resolver um problema ou realizar uma tarefa. Pense em uma receita de bolo: ela  um algoritmo para fazer um bolo. No contexto da programao, um algoritmo  o corao de qualquer programa, ditando como os dados so processados para alcanar um resultado desejado.

Mas por que a eficincia desses algoritmos importa? Imagine que voc est construindo uma aplicao web que precisa processar uma grande quantidade de dados de usurios. Se o algoritmo que voc usa para buscar informaes for lento, a experincia do usurio ser prejudicada, resultando em frustrao e, possivelmente, na perda de usurios. A eficincia de um algoritmo  medida principalmente em termos de:

*   **Tempo:** Quanto tempo o algoritmo leva para ser executado em funo do tamanho da entrada.
*   **Espao:** Quanta memria o algoritmo consome em funo do tamanho da entrada.

Em um mundo onde os dados crescem exponencialmente e a demanda por aplicaes rpidas e responsivas  constante, a capacidade de escrever e escolher algoritmos eficientes  uma habilidade indispensvel.

### Introduo ao Big O Notation (Complexidade de Tempo e Espao)

A **Notao Big O** (ou "Big O Notation")  uma ferramenta matemtica que descreve o comportamento assinttico de uma funo, ou seja, como o tempo de execuo ou o espao de memria de um algoritmo cresce  medida que o tamanho da entrada (geralmente denotado por \`n\`) aumenta. Ela nos permite classificar algoritmos de acordo com a forma como seu tempo de execuo ou espao de memria cresce, ignorando fatores constantes e termos de menor ordem.

 importante notar que o Big O no mede o tempo exato em segundos, mas sim a **taxa de crescimento** do algoritmo. Isso nos ajuda a comparar algoritmos de forma independente do hardware ou da linguagem de programao.

#### Complexidade de Tempo

Refere-se a quanto tempo um algoritmo leva para ser executado. Quando falamos de tempo, estamos interessados em quantas operaes o algoritmo realiza. Quanto mais operaes, mais tempo ele levar.

#### Complexidade de Espao

Refere-se  quantidade de memria que um algoritmo precisa para ser executado. Isso inclui o espao ocupado pelas variveis, estruturas de dados e a pilha de chamadas de funo.

### Explicao de O(1), O(n), O(n), O(log n) com Exemplos Prticos

Vamos explorar as complexidades mais comuns com exemplos em JavaScript.

#### O(1) - Complexidade Constante

Um algoritmo tem complexidade de tempo O(1) se o tempo de execuo for **constante**, independentemente do tamanho da entrada. Isso significa que o nmero de operaes no muda, no importa quo grande seja \`n\`.

**Exemplo:** Acessar um elemento em um array pelo seu ndice.

\`\`\`javascript
function acessarElemento(arr, index) {
  return arr[index];
}

const meuArray = [1, 2, 3, 4, 5];
console.log(acessarElemento(meuArray, 2)); // Sada: 3
\`\`\`

Neste exemplo, acessar \`arr[index]\` sempre leva o mesmo tempo, seja o array de 5 elementos ou 5 milhes.

#### O(n) - Complexidade Linear

Um algoritmo tem complexidade de tempo O(n) se o tempo de execuo cresce **linearmente** com o tamanho da entrada \`n\`. Se \`n\` dobra, o tempo de execuo tambm dobra.

**Exemplo:** Percorrer um array para encontrar um elemento.

\`\`\`javascript
function buscarElemento(arr, elemento) {
  for (let i = 0; i < arr.length; i++) {
    if (arr[i] === elemento) {
      return true;
    }
  }
  return false;
}

const meuArray = [10, 20, 30, 40, 50];
console.log(buscarElemento(meuArray, 30)); // Sada: true
console.log(buscarElemento(meuArray, 100)); // Sada: false
\`\`\`

No pior caso, precisamos verificar cada elemento do array, ento o nmero de operaes  proporcional a \`n\`.

#### O(n) - Complexidade Quadrtica

Um algoritmo tem complexidade de tempo O(n) se o tempo de execuo cresce **quadraticamente** com o tamanho da entrada \`n\`. Se \`n\` dobra, o tempo de execuo quadruplica.

**Exemplo:** Comparar cada elemento de um array com todos os outros elementos (loops aninhados).

\`\`\`javascript
function temDuplicatas(arr) {
  for (let i = 0; i < arr.length; i++) {
    for (let j = i + 1; j < arr.length; j++) {
      if (arr[i] === arr[j]) {
        return true;
      }
    }
  }
  return false;
}

const meuArray1 = [1, 2, 3, 4, 5];
console.log(temDuplicatas(meuArray1)); // Sada: false

const meuArray2 = [1, 2, 3, 2, 5];
console.log(temDuplicatas(meuArray2)); // Sada: true
\`\`\`

Para cada elemento \`i\`, percorremos \`n-1\` elementos \`j\`. Isso resulta em aproximadamente \`n * n\` operaes.

#### O(log n) - Complexidade Logartmica

Um algoritmo tem complexidade de tempo O(log n) se o tempo de execuo diminui pela metade a cada passo, ou seja, o nmero de operaes cresce muito lentamente com o tamanho da entrada.  comum em algoritmos que dividem o problema em subproblemas menores.

**Exemplo:** Busca Binria em um array ordenado.

\`\`\`javascript
function buscaBinaria(arr, alvo) {
  let inicio = 0;
  let fim = arr.length - 1;

  while (inicio <= fim) {
    let meio = Math.floor((inicio + fim) / 2);
    if (arr[meio] === alvo) {
      return meio; // Elemento encontrado
    } else if (arr[meio] < alvo) {
      inicio = meio + 1; // Busca na metade direita
    } else {
      fim = meio - 1; // Busca na metade esquerda
    }
  }
  return -1; // Elemento no encontrado
}

const arrayOrdenado = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100];
console.log(buscaBinaria(arrayOrdenado, 70)); // Sada: 6 (ndice)
console.log(buscaBinaria(arrayOrdenado, 35)); // Sada: -1
\`\`\`

A cada iterao, o espao de busca  reduzido pela metade. Isso significa que, para um array de 1024 elementos, levaria no mximo 10 passos (\`log2(1024) = 10\`) para encontrar o elemento.

### Grficos Simples em Texto/ASCII para Big O Notation

Para visualizar como essas complexidades crescem, podemos usar grficos simples.

\`\`\`
Tempo de Execuo (T)
^
|
|  O(n^2)
|    /|
|   / |
|  /  |
| /   |
|/    |
|     |
|   O(n)
|    /|
|   / |
|  /  |
| /   |
|/    |
|     |
|   O(log n)
|    /|
|   / |
|  /  |
| /   |
|/    |
|-----O(1)-----------------> Tamanho da Entrada (n)
\`\`\`

Este grfico ilustra a taxa de crescimento:

*   **O(1)**: Linha horizontal, tempo constante.
*   **O(log n)**: Cresce muito lentamente, quase plano.
*   **O(n)**: Linha reta inclinada, crescimento linear.
*   **O(n)**: Curva acentuada, crescimento rpido.

### Como Analisar a Complexidade de um Loop \`for\` Simples e Aninhado

Analisar a complexidade de loops  um dos primeiros passos para entender o desempenho de um algoritmo.

#### Loop \`for\` Simples

Quando voc tem um nico loop \`for\` que itera \`n\` vezes, a complexidade  geralmente **O(n)**.

**Exemplo:**

\`\`\`javascript
function somarArray(arr) {
  let soma = 0;
  for (let i = 0; i < arr.length; i++) { // Executa 'n' vezes
    soma += arr[i];
  }
  return soma;
}

const numeros = [1, 2, 3, 4, 5];
console.log(somarArray(numeros));
\`\`\`

Se \`arr.length\`  \`n\`, o loop executa \`n\` vezes. Cada operao dentro do loop (acesso ao array, adio)  O(1). Portanto, \`n * O(1) = O(n)\`.

#### Loop \`for\` Aninhado

Quando voc tem loops \`for\` aninhados, a complexidade  o produto das complexidades dos loops individuais. Se voc tem dois loops aninhados, onde cada um itera \`n\` vezes, a complexidade  **O(n)**.

**Exemplo:**

\`\`\`javascript
function imprimirPares(arr) {
  for (let i = 0; i < arr.length; i++) { // Executa 'n' vezes
    for (let j = 0; j < arr.length; j++) { // Executa 'n' vezes para cada 'i'
      console.log(arr[i], arr[j]);
    }
  }
}

const letras = ['a', 'b', 'c'];
imprimirPares(letras);
\`\`\`

O loop externo executa \`n\` vezes. Para cada execuo do loop externo, o loop interno tambm executa \`n\` vezes. Isso resulta em \`n * n = n\` operaes. Portanto, a complexidade  O(n).

Se os loops aninhados tiverem diferentes tamanhos de iterao, por exemplo, um loop \`n\` e outro \`m\`, a complexidade seria O(n*m). Se \`n\` e \`m\` so do mesmo tipo de entrada, geralmente simplificamos para O(n).

### Concluso

Compreender a complexidade de algoritmos  uma habilidade vital para desenvolver software eficiente e escalvel. A Notao Big O oferece uma linguagem padronizada para discutir e comparar o desempenho de diferentes abordagens. Ao dominar esses conceitos, voc estar mais preparado para tomar decises de design que impactam diretamente a performance de suas aplicaes. Na prxima aula, exploraremos as estruturas de dados lineares e como elas podem ser implementadas e utilizadas de forma eficiente.))

No pior caso, precisamos verificar cada elemento do array, ento o nmero de operaes  proporcional a \`n\`.

#### O(n) - Complexidade Quadrtica

Um algoritmo tem complexidade de tempo O(n) se o tempo de execuo cresce **quadraticamente** com o tamanho da entrada \`n\`. Se \`n\` dobra, o tempo de execuo quadruplica.

**Exemplo:** Comparar cada elemento de um array com todos os outros elementos (loops aninhados).

\`\`\`javascript
function temDuplicatas(arr) {
  for (let i = 0; i < arr.length; i++) {
    for (let j = i + 1; j < arr.length; j++) {
      if (arr[i] === arr[j]) {
        return true;
      }
    }
  }
  return false;
}

const meuArray1 = [1, 2, 3, 4, 5];
console.log(temDuplicatas(meuArray1)); // Sada: false

const meuArray2 = [1, 2, 3, 2, 5];
console.log(temDuplicatas(meuArray2)); // Sada: true
\`\`\`

Para cada elemento \`i\`, percorremos \`n-1\` elementos \`j\`. Isso resulta em aproximadamente \`n * n\` operaes.

#### O(log n) - Complexidade Logartmica

Um algoritmo tem complexidade de tempo O(log n) se o tempo de execuo diminui pela metade a cada passo, ou seja, o nmero de operaes cresce muito lentamente com o tamanho da entrada.  comum em algoritmos que dividem o problema em subproblemas menores.

**Exemplo:** Busca Binria em um array ordenado.

\`\`\`javascript
function buscaBinaria(arr, alvo) {
  let inicio = 0;
  let fim = arr.length - 1;

  while (inicio <= fim) {
    let meio = Math.floor((inicio + fim) / 2);
    if (arr[meio] === alvo) {
      return meio; // Elemento encontrado
    } else if (arr[meio] < alvo) {
      inicio = meio + 1; // Busca na metade direita
    } else {
      fim = meio - 1; // Busca na metade esquerda
    }
  }
  return -1; // Elemento no encontrado
}

const arrayOrdenado = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100];
console.log(buscaBinaria(arrayOrdenado, 70)); // Sada: 6 (ndice)
console.log(buscaBinaria(arrayOrdenado, 35)); // Sada: -1
\`\`\`

A cada iterao, o espao de busca  reduzido pela metade. Isso significa que, para um array de 1024 elementos, levaria no mximo 10 passos (\`log2(1024) = 10\`) para encontrar o elemento.

### Grficos Simples em Texto/ASCII para Big O Notation

Para visualizar como essas complexidades crescem, podemos usar grficos simples.

\`\`\`
Tempo de Execuo (T)
^
|
|  O(n^2)
|    /|
|   / |
|  /  |
| /   |
|/    |
|     |
|   O(n)
|    /|
|   / |
|  /  |
| /   |
|/    |
|     |
|   O(log n)
|    /|
|   / |
|  /  |
| /   |
|/    |
|-----O(1)-----------------> Tamanho da Entrada (n)
\`\`\`

Este grfico ilustra a taxa de crescimento:

*   **O(1)**: Linha horizontal, tempo constante.
*   **O(log n)**: Cresce muito lentamente, quase plano.
*   **O(n)**: Linha reta inclinada, crescimento linear.
*   **O(n)**: Curva acentuada, crescimento rpido.

### Como Analisar a Complexidade de um Loop \`for\` Simples e Aninhado

Analisar a complexidade de loops  um dos primeiros passos para entender o desempenho de um algoritmo.

#### Loop \`for\` Simples

Quando voc tem um nico loop \`for\` que itera \`n\` vezes, a complexidade  geralmente **O(n)**.

**Exemplo:**

\`\`\`javascript
function somarArray(arr) {
  let soma = 0;
  for (let i = 0; i < arr.length; i++) { // Executa 'n' vezes
    soma += arr[i];
  }
  return soma;
}

const numeros = [1, 2, 3, 4, 5];
console.log(somarArray(numeros));
\`\`\`

Se \`arr.length\`  \`n\`, o loop executa \`n\` vezes. Cada operao dentro do loop (acesso ao array, adio)  O(1). Portanto, \`n * O(1) = O(n)\`.

#### Loop \`for\` Aninhado

Quando voc tem loops \`for\` aninhados, a complexidade  o produto das complexidades dos loops individuais. Se voc tem dois loops aninhados, onde cada um itera \`n\` vezes, a complexidade  **O(n)**.

**Exemplo:**

\`\`\`javascript
function imprimirPares(arr) {
  for (let i = 0; i < arr.length; i++) { // Executa 'n' vezes
    for (let j = 0; j < arr.length; j++) { // Executa 'n' vezes para cada 'i'
      console.log(arr[i], arr[j]);
    }
  }
}

const letras = ['a', 'b', 'c'];
imprimirPares(letras);
\`\`\`

O loop externo executa \`n\` vezes. Para cada execuo do loop externo, o loop interno tambm executa \`n\` vezes. Isso resulta em \`n * n = n\` operaes. Portanto, a complexidade  O(n).

Se os loops aninhados tiverem diferentes tamanhos de iterao, por exemplo, um loop \`n\` e outro \`m\`, a complexidade seria O(n*m). Se \`n\` e \`m\` so do mesmo tipo de entrada, geralmente simplificamos para O(n).

### Concluso

Compreender a complexidade de algoritmos  uma habilidade vital para desenvolver software eficiente e escalvel. A Notao Big O oferece uma linguagem padronizada para discutir e comparar o desempenho de diferentes abordagens. Ao dominar esses conceitos, voc estar mais preparado para tomar decises de design que impactam diretamente a performance de suas aplicaes. Na prxima aula, exploraremos as estruturas de dados lineares e como elas podem ser implementadas e utilizadas de forma eficiente.
`,wnt=()=>g.jsx(qe,{content:Tnt,backRoute:"/js/projeto-lista-tarefas",backText:"Voltar: Projeto: Lista de Tarefas",goRoute:"/algoritmos/estruturas-lineares",goText:"Prximo: Estruturas Lineares"}),Cnt=`## Aula 2: Estruturas de Dados Lineares

Nesta aula, vamos explorar as **estruturas de dados lineares**, que so formas de organizar dados de maneira sequencial. Comearemos com uma reviso aprofundada dos arrays em JavaScript e, em seguida, mergulharemos em duas estruturas de dados fundamentais: Pilhas (Stacks) e Filas (Queues), entendendo seus conceitos, implementaes e casos de uso prticos.

### Reviso de Arrays em JavaScript

Os **arrays** so, provavelmente, a estrutura de dados mais comum e fundamental em JavaScript. Eles so colees ordenadas de valores, onde cada valor  acessado por um ndice numrico.

#### Vantagens dos Arrays:

*   **Acesso Rpido por ndice (O(1)):** A principal vantagem dos arrays  a capacidade de acessar qualquer elemento diretamente pelo seu ndice em tempo constante. Isso ocorre porque os elementos so armazenados em posies de memria contguas.
    \`\`\`javascript
    const frutas = ['ma', 'banana', 'laranja'];
    console.log(frutas[1]); // Acesso direto: 'banana' (O(1))
    \`\`\`
*   **Iterao Simples:** Percorrer arrays  direto e eficiente com loops \`for\`, \`forEach\`, \`map\`, \`filter\`, etc.
*   **Flexibilidade:** Em JavaScript, arrays podem armazenar diferentes tipos de dados e seu tamanho pode ser dinamicamente alterado.

#### Desvantagens dos Arrays:

*   **Insero e Deleo no Incio/Meio (O(n)):** Quando voc insere ou remove um elemento no incio ou no meio de um array, todos os elementos subsequentes precisam ser deslocados. Isso pode ser uma operao custosa, com complexidade de tempo linear (O(n)), especialmente para arrays grandes.
    \`\`\`javascript
    const numeros = [1, 2, 3, 4, 5];

    // Insero no incio
    numeros.unshift(0); // [0, 1, 2, 3, 4, 5] - O(n)

    // Deleo no incio
    numeros.shift();    // [1, 2, 3, 4, 5] - O(n)

    // Insero no meio
    numeros.splice(2, 0, 2.5); // [1, 2, 2.5, 3, 4, 5] - O(n)

    // Deleo no meio
    numeros.splice(2, 1); // [1, 2, 3, 4, 5] - O(n)
    \`\`\`
*   **Insero e Deleo no Final (O(1) na maioria dos casos):** Inserir (\`push\`) ou remover (\`pop\`) no final de um array  geralmente uma operao de tempo constante (O(1)), pois no exige o deslocamento de outros elementos. No entanto, em algumas implementaes, se o array precisar ser redimensionado, pode ocasionalmente ser O(n).
    \`\`\`javascript
    const letras = ['a', 'b'];
    letras.push('c'); // ['a', 'b', 'c'] - O(1)
    letras.pop();    // ['a', 'b'] - O(1)
    \`\`\`

### Pilhas (Stacks): Conceito LIFO (Last-In, First-Out)

Uma **Pilha**  uma estrutura de dados linear que segue o princpio **LIFO** (Last-In, First-Out), ou seja, o ltimo elemento a ser inserido  o primeiro a ser removido. Pense em uma pilha de pratos: voc sempre adiciona um prato no topo e remove o prato que est no topo.

As operaes bsicas de uma pilha so:

*   **Push:** Adiciona um elemento ao topo da pilha.
*   **Pop:** Remove o elemento do topo da pilha e o retorna.
*   **Peek (ou Top):** Retorna o elemento do topo da pilha sem remov-lo.
*   **isEmpty:** Verifica se a pilha est vazia.

#### Implementao de uma Pilha com um Array em JS

Podemos facilmente implementar uma pilha usando um array em JavaScript, aproveitando os mtodos \`push()\` e \`pop()\` que operam no final do array, garantindo eficincia O(1) para essas operaes.

\`\`\`javascript
class Stack {
  constructor() {
    this.items = [];
  }

  // Adiciona um elemento ao topo da pilha
  push(element) {
    this.items.push(element); // O(1)
  }

  // Remove e retorna o elemento do topo da pilha
  pop() {
    if (this.isEmpty()) {
      return 'Underflow'; // Pilha vazia
    }
    return this.items.pop(); // O(1)
  }

  // Retorna o elemento do topo da pilha sem remov-lo
  peek() {
    if (this.isEmpty()) {
      return 'No elements in Stack';
    }
    return this.items[this.items.length - 1]; // O(1)
  }

  // Verifica se a pilha est vazia
  isEmpty() {
    return this.items.length === 0;
  }

  // Retorna o tamanho da pilha
  size() {
    return this.items.length;
  }

  // Imprime os elementos da pilha
  printStack() {
    let str = '';
    for (let i = 0; i < this.items.length; i++) {
      str += this.items[i] + ' ';
    }
    return str.trim();
  }
}

// Exemplo de uso:
const minhaPilha = new Stack();
console.log('Pilha vazia?', minhaPilha.isEmpty()); // true

minhaPilha.push(10);
minhaPilha.push(20);
minhaPilha.push(30);
console.log('Pilha:', minhaPilha.printStack()); // 10 20 30

console.log('Elemento no topo:', minhaPilha.peek()); // 30

console.log('Removido:', minhaPilha.pop()); // 30
console.log('Pilha:', minhaPilha.printStack()); // 10 20

console.log('Pilha vazia?', minhaPilha.isEmpty()); // false
\`\`\`

#### Exemplo de Uso: Histrico de Navegao

Um exemplo clssico de uso de pilhas  o histrico de navegao de um navegador web. Quando voc visita uma nova pgina, ela  "empilhada" (push). Quando voc clica no boto "Voltar", a pgina atual  "desempilhada" (pop) e voc retorna  pgina anterior.

\`\`\`javascript
class NavegadorWeb {
  constructor() {
    this.historico = new Stack();
    this.paginaAtual = null;
  }

  visitar(url) {
    if (this.paginaAtual) {
      this.historico.push(this.paginaAtual);
    }
    this.paginaAtual = url;
    console.log(\`Visitando: \${this.paginaAtual}\`);
  }

  voltar() {
    if (!this.historico.isEmpty()) {
      this.paginaAtual = this.historico.pop();
      console.log(\`Voltando para: \${this.paginaAtual}\`);
    } else {
      console.log('No h pginas anteriores no histrico.');
    }
  }

  paginaAtualUrl() {
    return this.paginaAtual;
  }
}

const navegador = new NavegadorWeb();
navegador.visitar('google.com');
navegador.visitar('youtube.com');
navegador.visitar('gemini.google.com');

console.log('Pgina atual:', navegador.paginaAtualUrl()); // gemini.google.com

navegador.voltar(); // Voltando para: youtube.com
console.log('Pgina atual:', navegador.paginaAtualUrl()); // youtube.com

navegador.voltar(); // Voltando para: google.com
console.log('Pgina atual:', navegador.paginaAtualUrl()); // google.com

navegador.voltar(); // No h pginas anteriores no histrico.
\`\`\`

### Filas (Queues): Conceito FIFO (First-In, First-Out)

Uma **Fila**  uma estrutura de dados linear que segue o princpio **FIFO** (First-In, First-Out), ou seja, o primeiro elemento a ser inserido  o primeiro a ser removido. Pense em uma fila de banco: a primeira pessoa a chegar  a primeira a ser atendida.

As operaes bsicas de uma fila so:

*   **Enqueue:** Adiciona um elemento ao final da fila.
*   **Dequeue:** Remove o elemento do incio da fila e o retorna.
*   **Front (ou Peek):** Retorna o elemento do incio da fila sem remov-lo.
*   **isEmpty:** Verifica se a fila est vazia.

#### Implementao de uma Fila com um Array em JS

Podemos implementar uma fila usando um array em JavaScript. Para \`enqueue\`, usamos \`push()\` (O(1)). Para \`dequeue\`, usamos \`shift()\` (O(n)), o que pode ser ineficiente para filas muito grandes. Para otimizar, em cenrios de alta performance, poderamos usar uma lista encadeada ou um array com controle de ponteiros de incio e fim.

\`\`\`javascript
class Queue {
  constructor() {
    this.items = [];
  }

  // Adiciona um elemento ao final da fila
  enqueue(element) {
    this.items.push(element); // O(1)
  }

  // Remove e retorna o elemento do incio da fila
  dequeue() {
    if (this.isEmpty()) {
      return 'Underflow'; // Fila vazia
    }
    return this.items.shift(); // O(n) - Cuidado com a performance em grandes filas
  }

  // Retorna o elemento do incio da fila sem remov-lo
  front() {
    if (this.isEmpty()) {
      return 'No elements in Queue';
    }
    return this.items[0]; // O(1)
  }

  // Verifica se a fila est vazia
  isEmpty() {
    return this.items.length === 0;
  }

  // Retorna o tamanho da fila
  size() {
    return this.items.length;
  }

  // Imprime os elementos da fila
  printQueue() {
    let str = '';
    for (let i = 0; i < this.items.length; i++) {
      str += this.items[i] + ' ';
    }
    return str.trim();
  }
}

// Exemplo de uso:
const minhaFila = new Queue();
console.log('Fila vazia?', minhaFila.isEmpty()); // true

minhaFila.enqueue('Tarefa 1');
minhaFila.enqueue('Tarefa 2');
minhaFila.enqueue('Tarefa 3');
console.log('Fila:', minhaFila.printQueue()); // Tarefa 1 Tarefa 2 Tarefa 3

console.log('Elemento na frente:', minhaFila.front()); // Tarefa 1

console.log('Removido:', minhaFila.dequeue()); // Tarefa 1
console.log('Fila:', minhaFila.printQueue()); // Tarefa 2 Tarefa 3

console.log('Fila vazia?', minhaFila.isEmpty()); // false
\`\`\`

#### Exemplo de Uso: Gerenciamento de Tarefas

Filas so ideais para gerenciar tarefas que precisam ser processadas em uma ordem especfica, como em um sistema de impresso, processamento de uploads ou gerenciamento de eventos em um jogo.

\`\`\`javascript
class GerenciadorDeTarefas {
  constructor() {
    this.filaDeTarefas = new Queue();
  }

  adicionarTarefa(tarefa) {
    console.log(\`Adicionando tarefa: \${tarefa}\`);
    this.filaDeTarefas.enqueue(tarefa);
  }

  processarProximaTarefa() {
    if (!this.filaDeTarefas.isEmpty()) {
      const tarefa = this.filaDeTarefas.dequeue();
      console.log(\`Processando tarefa: \${tarefa}\`);
      // Lgica para processar a tarefa
      return tarefa;
    } else {
      console.log('Nenhuma tarefa na fila para processar.');
      return null;
    }
  }

  verProximaTarefa() {
    if (!this.filaDeTarefas.isEmpty()) {
      console.log(\`Prxima tarefa: \${this.filaDeTarefas.front()}\`);
      return this.filaDeTarefas.front();
    } else {
      console.log('Nenhuma tarefa na fila.');
      return null;
    }
  }
}

const gerenciador = new GerenciadorDeTarefas();
gerenciador.adicionarTarefa('Fazer caf');
gerenciador.adicionarTarefa('Responder e-mails');
gerenciador.adicionarTarefa('Revisar cdigo');

gerenciador.verProximaTarefa(); // Prxima tarefa: Fazer caf

gerenciador.processarProximaTarefa(); // Processando tarefa: Fazer caf
gerenciador.processarProximaTarefa(); // Processando tarefa: Responder e-mails

gerenciador.verProximaTarefa(); // Prxima tarefa: Revisar cdigo

gerenciador.processarProximaTarefa(); // Processando tarefa: Revisar cdigo
gerenciador.processarProximaTarefa(); // Nenhuma tarefa na fila para processar.
\`\`\`

### Concluso

Arrays, pilhas e filas so estruturas de dados fundamentais que todo desenvolvedor deve dominar. Compreender suas caractersticas, vantagens e desvantagens, bem como suas implementaes e casos de uso,  crucial para escrever cdigo eficiente e robusto. Na prxima aula, exploraremos as estruturas de dados no lineares, que oferecem formas mais complexas e poderosas de organizar informaes.
`,Ant=()=>g.jsx(qe,{content:Cnt,backRoute:"/algoritmos/introducao",backText:"Voltar: Introduo aos Algoritmos",goRoute:"/algoritmos/estruturas-nao-lineares",goText:"Prximo: Estruturas No-Lineares"}),_nt=`## Aula 3: Estruturas de Dados No Lineares

Nesta aula, vamos explorar as **estruturas de dados no lineares**, que organizam os elementos de forma hierrquica ou em rede, e no de maneira sequencial como nas estruturas lineares (ex: arrays, filas e pilhas).
Nelas, um nico elemento pode se conectar a mltiplos outros, formando relaes mais complexas  ideais para representar sistemas como rvores genealgicas, mapas, caminhos em jogos e bancos de dados.

### Termos Fundamentais das rvores

*   **Filho (Child):** Um n diretamente conectado abaixo de outro n. Um n pode ter zero ou mais filhos.
*   **Pai (Parent):** O n diretamente conectado acima de um ou mais filhos.
*   **Irmo (Sibling):** Ns que compartilham o mesmo pai.
*   **Folha (Leaf):** Um n que no tem filhos.
*   **Aresta (Edge):** A conexo entre dois ns.
*   **Subrvore (Subtree):** Uma poro de uma rvore que pode ser considerada uma rvore por si s, consistindo de um n e todos os seus descendentes.

\`\`\`
        (A) <-- Raiz
       /   \\
      (B)   (C) <-- Filhos de A, Irmos
     / \\     \\
    (D) (E)   (F) <-- D e E so filhos de B, F  filho de C
             / \\ 
            (G) (H) <-- G e H so filhos de F, Folhas
\`\`\`

#### Foco em rvores Binrias de Busca (BST - Binary Search Tree)

Uma **rvore Binria de Busca (BST)**  um tipo especial de rvore binria (onde cada n tem no mximo dois filhos) que mantm seus elementos em uma ordem especfica, facilitando a busca, insero e remoo de dados.

**Regras de uma BST:**

1.  Para qualquer n, todos os valores na sua subrvore esquerda so **menores** que o valor do n.
2.  Para qualquer n, todos os valores na sua subrvore direita so **maiores** que o valor do n.
3.  Ambas as subrvores esquerda e direita tambm devem ser BSTs.

#### Exemplo de Estrutura de N para BST em JavaScript

\`\`\`javascript
class Node {
  constructor(data) {
    this.data = data; // O valor armazenado no n
    this.left = null; // Referncia para o filho esquerdo
    this.right = null; // Referncia para o filho direito
  }
}

// Exemplo de como seria uma BST simples
//         10
//        /  \\
//       5    15
//      / \\  /  \\
//     2   7 12  18

const root = new Node(10);
root.left = new Node(5);
root.right = new Node(15);
root.left.left = new Node(2);
root.left.right = new Node(7);
root.right.left = new Node(12);
root.right.right = new Node(18);

console.log(root); // Objeto Node representando a raiz da BST
\`\`\`

#### Operaes Comuns em BSTs (Conceito)

*   **Insero:** Para inserir um novo valor, voc comea na raiz e compara o valor com o n atual. Se for menor, vai para a esquerda; se for maior, vai para a direita. Repete at encontrar um lugar vazio.
*   **Busca:** Similar  insero, voc compara o valor a ser buscado com o n atual e decide ir para a esquerda ou direita at encontrar o valor ou chegar a um n nulo.
*   **Remoo:**  a operao mais complexa, pois precisa garantir que a estrutura da BST seja mantida aps a remoo de um n.

Em uma BST balanceada, as operaes de busca, insero e remoo tm complexidade de tempo **O(log n)**, o que  muito eficiente para grandes conjuntos de dados. No entanto, em uma BST desbalanceada (onde os elementos so inseridos em ordem crescente ou decrescente), a rvore pode degenerar em uma lista encadeada, e a complexidade pode se tornar **O(n)**.

### Concluso

Estruturas de dados no lineares como Hash Maps (Objetos/Maps em JS), Conjuntos (Sets) e rvores (especialmente BSTs) so ferramentas poderosas para resolver problemas de forma eficiente. Compreender como elas funcionam e quando us-las  fundamental para otimizar o desempenho e a organizao do seu cdigo. Na prxima aula, exploraremos algoritmos de busca e ordenao, que frequentemente utilizam essas estruturas para alcanar alta performance.
`,knt=()=>g.jsx(qe,{content:_nt,backRoute:"/algoritmos/estruturas-lineares",backText:"Voltar: Estruturas Lineares",goRoute:"/algoritmos/busca-e-ordenacao",goText:"Prximo: Algoritmos de Busca e Ordenao"}),Int=`## Aula 4: Algoritmos de Busca e Ordenao

Nesta aula, vamos explorar dois tipos fundamentais de algoritmos: os de **busca** e os de **ordenao**. A capacidade de encontrar informaes rapidamente e organizar dados de forma eficiente  crucial em qualquer aplicao de software. Abordaremos as implementaes em JavaScript e analisaremos a complexidade de tempo de cada um.

### Busca Linear (Linear Search)

A **Busca Linear**, tambm conhecida como busca sequencial,  o mtodo mais simples para encontrar um elemento em uma lista ou array. Ela funciona verificando cada elemento da lista, um por um, at que o elemento desejado seja encontrado ou at que todos os elementos tenham sido verificados.

#### Implementao em um Array em JavaScript

\`\`\`javascript
function buscaLinear(arr, alvo) {
  for (let i = 0; i < arr.length; i++) {
    if (arr[i] === alvo) {
      return i; // Retorna o ndice do elemento encontrado
    }
  }
  return -1; // Retorna -1 se o elemento no for encontrado
}

const numeros = [5, 2, 8, 1, 9, 4];
console.log("Busca Linear (elemento 8):", buscaLinear(numeros, 8)); // Sada: 2
console.log("Busca Linear (elemento 7):", buscaLinear(numeros, 7)); // Sada: -1
\`\`\`

#### Anlise de Complexidade (O(n))

A complexidade de tempo da Busca Linear  **O(n)**. No pior caso, o algoritmo precisa percorrer todos os \`n\` elementos do array para encontrar o alvo (se ele for o ltimo elemento ou no estiver presente). No melhor caso, o elemento  o primeiro e a complexidade  O(1). Em mdia, a complexidade  O(n).

### Busca Binria (Binary Search)

A **Busca Binria**  um algoritmo de busca muito mais eficiente que a busca linear, mas com um requisito importante: o array deve estar **ordenado**. Ela funciona dividindo repetidamente a parte da lista onde o elemento pode estar pela metade.

#### Requisito: Array Ordenado

Para que a busca binria funcione, os elementos do array devem estar em ordem crescente ou decrescente.

#### Implementao em JavaScript

\`\`\`javascript
function buscaBinaria(arr, alvo) {
  let inicio = 0;
  let fim = arr.length - 1;

  while (inicio <= fim) {
    let meio = Math.floor((inicio + fim) / 2);

    if (arr[meio] === alvo) {
      return meio; // Elemento encontrado
    } else if (arr[meio] < alvo) {
      inicio = meio + 1; // Busca na metade direita
    } else {
      fim = meio - 1; // Busca na metade esquerda
    }
  }
  return -1; // Elemento no encontrado
}

const arrayOrdenado = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100];
console.log("Busca Binria (elemento 70):", buscaBinaria(arrayOrdenado, 70)); // Sada: 6
console.log("Busca Binria (elemento 35):", buscaBinaria(arrayOrdenado, 35)); // Sada: -1
\`\`\`

#### Anlise de Complexidade (O(log n))

A complexidade de tempo da Busca Binria  **O(log n)**. A cada passo, o espao de busca  reduzido pela metade. Isso a torna extremamente eficiente para arrays grandes. Por exemplo, para um array com um milho de elementos, a busca binria levaria no mximo cerca de 20 comparaes (\`log2(1.000.000)  19.9\`), enquanto a busca linear poderia levar um milho de comparaes.

#### Comparao com a Busca Linear

| Caracterstica        | Busca Linear (O(n))                                | Busca Binria (O(log n))                               |
| :-------------------- | :------------------------------------------------- | :----------------------------------------------------- |
| **Requisito**         | No exige array ordenado                           | Exige array ordenado                                   |
| **Complexidade**      | Lenta para grandes conjuntos de dados              | Rpida para grandes conjuntos de dados                 |
| **Melhor Caso**       | O(1) (elemento no incio)                          | O(1) (elemento no meio)                                |
| **Pior Caso**         | O(n) (elemento no final ou no presente)           | O(log n)                                               |
| **Uso Comum**         | Listas pequenas, listas no ordenadas              | Listas grandes e ordenadas (ex: dicionrios, ndices) |

### Algoritmos de Ordenao (Sorting)

Algoritmos de ordenao so usados para organizar elementos de uma lista em uma determinada ordem (crescente ou decrescente). A ordenao  uma operao fundamental em cincia da computao, pois muitos outros algoritmos (como a busca binria) dependem de dados ordenados.

#### Bubble Sort

O **Bubble Sort**  um algoritmo de ordenao simples que funciona repetidamente percorrendo a lista, comparando pares de elementos adjacentes e trocando-os se estiverem na ordem errada. O processo  repetido at que nenhuma troca seja necessria, indicando que a lista est ordenada.

**Explicao:** Ele "borbulha" os elementos maiores para o final da lista a cada passagem.

#### Implementao em JavaScript

\`\`\`javascript
function bubbleSort(arr) {
  let n = arr.length;
  let trocado;
  do {
    trocado = false;
    for (let i = 0; i < n - 1; i++) {
      if (arr[i] > arr[i + 1]) {
        // Troca os elementos
        let temp = arr[i];
        arr[i] = arr[i + 1];
        arr[i + 1] = temp;
        trocado = true;
      }
    }
    n--; // O maior elemento j est na posio correta
  } while (trocado);
  return arr;
}

const arrBubble = [64, 34, 25, 12, 22, 11, 90];
console.log("Array original (Bubble Sort):", arrBubble);
console.log("Array ordenado (Bubble Sort):", bubbleSort(arrBubble)); // Sada: [11, 12, 22, 25, 34, 64, 90]
\`\`\`

#### Anlise de por que  Ineficiente (O(n))

A complexidade de tempo do Bubble Sort  **O(n)** no pior e no caso mdio. Isso ocorre porque, para cada elemento, ele pode ter que fazer \`n\` comparaes e \`n\` trocas. Com dois loops aninhados (implcitos ou explcitos), o nmero de operaes cresce quadraticamente com o tamanho da entrada. Para grandes conjuntos de dados, o Bubble Sort se torna impraticvel.

#### Selection Sort

O **Selection Sort**  outro algoritmo de ordenao simples. Ele funciona dividindo a lista em duas partes: uma sublista de elementos j ordenados (inicialmente vazia) e uma sublista de elementos no ordenados (inicialmente toda a lista). O algoritmo encontra repetidamente o menor (ou maior) elemento da sublista no ordenada e o move para o final da sublista ordenada.

**Explicao:** Ele "seleciona" o menor elemento e o coloca na posio correta.

#### Implementao em JavaScript

\`\`\`javascript
function selectionSort(arr) {
  let n = arr.length;

  for (let i = 0; i < n - 1; i++) {
    let minIndex = i;
    for (let j = i + 1; j < n; j++) {
      if (arr[j] < arr[minIndex]) {
        minIndex = j;
      }
    }
    // Troca o elemento mnimo encontrado com o primeiro elemento no ordenado
    if (minIndex !== i) {
      let temp = arr[i];
      arr[i] = arr[minIndex];
      arr[minIndex] = temp;
    }
  }
  return arr;
}

const arrSelection = [64, 25, 12, 22, 11];
console.log("Array original (Selection Sort):", arrSelection);
console.log("Array ordenado (Selection Sort):", selectionSort(arrSelection)); // Sada: [11, 12, 22, 25, 64]
\`\`\`

#### Anlise de Complexidade (O(n))

A complexidade de tempo do Selection Sort tambm  **O(n)** no pior, mdio e melhor caso. Ele sempre realiza \`n-1\` passagens, e em cada passagem, ele compara \`n-i\` elementos para encontrar o mnimo. Embora o nmero de trocas seja menor que no Bubble Sort, o nmero de comparaes permanece quadrtico, tornando-o ineficiente para grandes conjuntos de dados.

### Meno ao mtodo \`.sort()\` do JavaScript

 importante notar que JavaScript possui um mtodo \`Array.prototype.sort()\` nativo. Embora seja conveniente,  crucial entender que sua implementao pode variar entre os navegadores e engines JavaScript (V8, SpiderMonkey, etc.). Historicamente, \`.sort()\` usava algoritmos como QuickSort ou MergeSort, que geralmente tm complexidade de tempo **O(n log n)**, muito mais eficientes que O(n).

\`\`\`javascript
const frutas = ["Banana", "Laranja", "Ma", "Manga"];
frutas.sort();
console.log("Array ordenado com .sort():", frutas); // Sada: ["Banana", "Laranja", "Manga", "Ma"]

const pontos = [40, 100, 1, 5, 25, 10];
// Para ordenar nmeros corretamente,  preciso passar uma funo de comparao
pontos.sort(function(a, b){return a - b});
console.log("Array de nmeros ordenado com .sort():", pontos); // Sada: [1, 5, 10, 25, 40, 100]
\`\`\`

#### A Importncia de Entender os Algoritmos por Trs Dele

Mesmo usando mtodos nativos, entender os algoritmos de ordenao subjacentes  vital por vrias razes:

1.  **Escolha Certa:** Saber qual algoritmo  mais adequado para um problema especfico (ex: quando a memria  limitada, ou quando a estabilidade da ordenao  importante).
2.  **Otimizao:** Em cenrios de alta performance, voc pode precisar implementar uma verso otimizada ou um algoritmo diferente do padro.
3.  **Entrevistas Tcnicas:** Perguntas sobre algoritmos de busca e ordenao so comuns em entrevistas para desenvolvedores.
4.  **Depurao:** Compreender como os dados so manipulados ajuda a depurar problemas de ordenao.
5.  **Fundamentos:** Fortalece sua base em cincia da computao, tornando-o um engenheiro de software mais completo.

### Concluso

Algoritmos de busca e ordenao so a espinha dorsal de muitas operaes de software. A escolha do algoritmo certo pode ter um impacto significativo no desempenho de uma aplicao. Enquanto a busca linear e algoritmos de ordenao como Bubble Sort e Selection Sort so teis para fins didticos e para conjuntos de dados muito pequenos, a busca binria e algoritmos de ordenao mais avanados (como os usados no \`.sort()\` do JavaScript) so essenciais para lidar com grandes volumes de dados de forma eficiente. Na prxima aula, exploraremos os princpios de arquitetura de software, que nos ajudaro a construir sistemas mais robustos e manutenveis.
`,Pnt=()=>g.jsx(qe,{content:Int,backRoute:"/algoritmos/estruturas-nao-lineares",backText:"Voltar: Estruturas No-Lineares",goRoute:"/algoritmos/arquitetura",goText:"Prximo: Noes da Arquitetura de Software"}),Ont=`## Aula 5: Princpios de Arquitetura de Software

Nesta aula, vamos explorar princpios fundamentais de arquitetura de software que so essenciais para construir aplicaes robustas, escalveis e de fcil manuteno. Embora muitos desses princpios tenham sido formulados em contextos de backend, sua aplicao no desenvolvimento front-end, especialmente com frameworks modernos como React,  extremamente valiosa. Abordaremos os princpios **SOLID**, **DRY** e **KISS**.

### Princpios SOLID (em um contexto de front-end)

Os princpios SOLID so um conjunto de cinco princpios de design de software que visam tornar os designs de software mais compreensveis, flexveis e manutenveis. Eles foram popularizados por Robert C. Martin (Uncle Bob).

#### S - Single Responsibility Principle (Princpio da Responsabilidade nica)

**Definio:** Uma classe (ou mdulo, componente) deve ter apenas uma razo para mudar, ou seja, deve ter apenas uma responsabilidade.

**Contexto Front-end (React):** Um componente React deve ter uma nica responsabilidade bem definida. Isso significa que um componente deve fazer uma coisa e faz-la bem. Evite componentes "faz-tudo" que gerenciam estado, buscam dados, renderizam UI complexa e manipulam eventos.

**Exemplo Ruim:**

\`\`\`javascript
// Componente que busca dados, gerencia estado e renderiza uma lista de usurios
function UserList() {
  const [users, setUsers] = React.useState([]);
  const [loading, setLoading] = React.useState(true);

  React.useEffect(() => {
    fetch(
      "https://jsonplaceholder.typicode.com/users"
    )
      .then((response) => response.json())
      .then((data) => {
        setUsers(data);
        setLoading(false);
      });
  }, []);

  if (loading) {
    return <p>Carregando usurios...</p>;
  }

  return (
    <div>
      <h1>Lista de Usurios</h1>
      <ul>
        {users.map((user) => (
          <li key={user.id}>{user.name}</li>
        ))}
      </ul>
    </div>
  );
}
\`\`\`

**Exemplo Bom (aplicando SRP):**

\`\`\`javascript
// Componente responsvel por buscar dados
function useFetchUsers() {
  const [users, setUsers] = React.useState([]);
  const [loading, setLoading] = React.useState(true);

  React.useEffect(() => {
    fetch(
      "https://jsonplaceholder.typicode.com/users"
    )
      .then((response) => response.json())
      .then((data) => {
        setUsers(data);
        setLoading(false);
      });
  }, []);

  return { users, loading };
}

// Componente responsvel por renderizar a lista
function UserListView({ users }) {
  return (
    <ul>
      {users.map((user) => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}

// Componente orquestrador
function UserList() {
  const { users, loading } = useFetchUsers();

  if (loading) {
    return <p>Carregando usurios...</p>;
  }

  return (
    <div>
      <h1>Lista de Usurios</h1>
      <UserListView users={users} />
    </div>
  );
}
\`\`\`

#### O - Open/Closed Principle (Princpio Aberto/Fechado)

**Definio:** Entidades de software (classes, mdulos, funes, etc.) devem ser abertas para extenso, mas fechadas para modificao.

**Contexto Front-end (React):** Componentes devem ser projetados de forma que novas funcionalidades possam ser adicionadas sem alterar o cdigo existente do componente. Isso  frequentemente alcanado atravs do uso de props, slots, HOCs (Higher-Order Components) ou Render Props.

**Exemplo:** Um componente \`Button\` que pode ter diferentes estilos sem modificar seu cdigo interno.

\`\`\`javascript
// Componente Button genrico
function Button({ children, variant = 'primary', onClick }) {
  const baseStyle = "px-4 py-2 rounded";
  let variantStyle = "";

  switch (variant) {
    case 'primary':
      variantStyle = "bg-blue-500 text-white";
      break;
    case 'secondary':
      variantStyle = "bg-gray-300 text-gray-800";
      break;
    case 'danger':
      variantStyle = "bg-red-500 text-white";
      break;
    default:
      variantStyle = "bg-blue-500 text-white";
  }

  return (
    <button className={\`\${baseStyle} \${variantStyle}\`} onClick={onClick}>
      {children}
    </button>
  );
}

// Uso:
// <Button variant="primary">Salvar</Button>
// <Button variant="danger">Excluir</Button>
// Para adicionar um novo estilo, basta estender o componente com uma nova prop ou um novo componente que o encapsule, sem modificar o Button original.
\`\`\`

#### L - Liskov Substitution Principle (Princpio da Substituio de Liskov)

**Definio:** Objetos em um programa devem ser substituveis por instncias de seus subtipos sem alterar a correo do programa.

**Contexto Front-end (React):** Componentes filhos (ou componentes que implementam uma interface comum) devem ser substituveis por seus pais sem quebrar a aplicao. Isso se aplica a como os componentes interagem via props. Se um componente espera um tipo especfico de prop, qualquer componente que o substitua deve ser capaz de lidar com essa prop da mesma maneira.

**Exemplo:** Um componente \`DisplayItem\` que pode renderizar diferentes tipos de itens, desde que eles sigam uma estrutura de dados comum.

\`\`\`javascript
// Componente base que espera um objeto com 'id' e 'name'
function DisplayItem({ item }) {
  return (
    <div className="item">
      <p>ID: {item.id}</p>
      <p>Nome: {item.name}</p>
    </div>
  );
}

// Uso com diferentes tipos de dados que seguem a mesma 

estrutura:

\`\`\`javascript
// Dados de um usurio
const user = { id: 1, name: "Alice" };
// Dados de um produto
const product = { id: 101, name: "Teclado Mecnico" };

// Ambos podem ser passados para DisplayItem sem problemas
// <DisplayItem item={user} />
// <DisplayItem item={product} />
\`\`\`

#### I - Interface Segregation Principle (Princpio da Segregao de Interfaces)

**Definio:** Clientes no devem ser forados a depender de interfaces que no utilizam. Interfaces grandes devem ser divididas em interfaces menores e mais especficas.

**Contexto Front-end (React):** Props de componentes devem ser especficas e relevantes para a funcionalidade do componente. Evite passar um objeto gigante de props para um componente que s usa uma pequena parte dele. Isso torna o componente mais flexvel e menos acoplado a dados desnecessrios.

**Exemplo Ruim:**

\`\`\`javascript
// Componente que recebe um objeto de usurio completo, mas s usa o nome
function UserGreeting({ user }) {
  return <p>Ol, {user.name}!</p>;
}

// Uso:
// const currentUser = { id: 1, name: "Alice", email: "alice@example.com", address: "..." };
// <UserGreeting user={currentUser} /> // Passando mais dados do que o necessrio
\`\`\`

**Exemplo Bom (aplicando ISP):**

\`\`\`javascript
// Componente que recebe apenas o que precisa
function UserGreeting({ userName }) {
  return <p>Ol, {userName}!</p>;
}

// Uso:
// const currentUser = { id: 1, name: "Alice", email: "alice@example.com", address: "..." };
// <UserGreeting userName={currentUser.name} /> // Passando apenas o nome
\`\`\`

#### D - Dependency Inversion Principle (Princpio da Inverso de Dependncia)

**Definio:** Mdulos de alto nvel no devem depender de mdulos de baixo nvel. Ambos devem depender de abstraes. Abstraes no devem depender de detalhes. Detalhes devem depender de abstraes.

**Contexto Front-end (React):** Componentes devem depender de abstraes (como interfaces ou funes utilitrias genricas) em vez de implementaes concretas. Isso  frequentemente visto no uso de **hooks customizados** para abstrair a lgica de negcios ou acesso a dados, permitindo que os componentes de UI sejam agnsticos  forma como esses dados so obtidos ou manipulados.

**Exemplo Ruim:**

\`\`\`javascript
// Componente que depende diretamente de uma implementao especfica de API
function ProductDisplay() {
  const [product, setProduct] = React.useState(null);

  React.useEffect(() => {
    // Dependncia direta da funo fetchProductFromAPI
    fetchProductFromAPI(123).then(data => setProduct(data));
  }, []);

  if (!product) return <p>Carregando produto...</p>;
  return <h1>{product.name}</h1>;
}

// Funo de baixo nvel
function fetchProductFromAPI(id) {
  return fetch(\`/api/products/\${id}\`).then(res => res.json());
}
\`\`\`

**Exemplo Bom (aplicando DIP com Custom Hook):**

\`\`\`javascript
// Abstrao: Custom Hook para buscar produtos
function useProduct(productId) {
  const [product, setProduct] = React.useState(null);
  const [loading, setLoading] = React.useState(true);

  React.useEffect(() => {
    setLoading(true);
    // A dependncia  de uma funo abstrata (ou injetada)
    // Aqui, estamos simulando uma injeo de dependncia ou um servio abstrato
    const productService = { // Isso poderia vir de um contexto ou ser injetado
      getProduct: (id) => fetch(\`/api/products/\${id}\`).then(res => res.json())
    };
    productService.getProduct(productId)
      .then(data => setProduct(data))
      .finally(() => setLoading(false));
  }, [productId]);

  return { product, loading };
}

// Componente de alto nvel que depende da abstrao (useProduct)
function ProductDisplay({ productId }) {
  const { product, loading } = useProduct(productId);

  if (loading) return <p>Carregando produto...</p>;
  if (!product) return <p>Produto no encontrado.</p>;

  return (
    <div>
      <h1>{product.name}</h1>
      <p>{product.description}</p>
    </div>
  );
}
\`\`\`

### DRY (Don't Repeat Yourself)

**Definio:** O princpio **DRY** afirma que "Cada pedao de conhecimento deve ter uma representao nica, inequvoca e autoritria dentro de um sistema". Em outras palavras, evite duplicao de cdigo e lgica.

**Contexto Front-end:** A importncia de criar componentes reutilizveis e funes utilitrias. Se voc se encontra escrevendo o mesmo bloco de cdigo vrias vezes,  um sinal de que voc pode abstra-lo em uma funo, um componente ou um hook customizado.

**Exemplo:**

\`\`\`javascript
// Ruim: Lgica de formatao de data duplicada
function ComponentA({ date }) {
  const formattedDate = new Date(date).toLocaleDateString("pt-BR");
  return <p>Data: {formattedDate}</p>;
}

function ComponentB({ date }) {
  const formattedDate = new Date(date).toLocaleDateString("pt-BR");
  return <p>Criado em: {formattedDate}</p>;
}

// Bom: Abstraindo a lgica em uma funo utilitria
function formatarData(dateString) {
  return new Date(dateString).toLocaleDateString("pt-BR");
}

function ComponentA_DRY({ date }) {
  return <p>Data: {formatarData(date)}</p>;
}

function ComponentB_DRY({ date }) {
  return <p>Criado em: {formatarData(date)}</p>;
}
\`\`\`

### KISS (Keep It Simple, Stupid)

**Definio:** O princpio **KISS** sugere que a maioria dos sistemas funciona melhor se forem mantidos simples, em vez de tornados complexos. A simplicidade deve ser um objetivo chave no design, e a complexidade desnecessria deve ser evitada.

**Contexto Front-end:** A preferncia por solues mais simples e legveis. Evite engenharia excessiva (over-engineering). Se uma soluo simples resolve o problema de forma eficaz, no introduza complexidade desnecessria com padres de design complexos ou bibliotecas adicionais.

**Exemplo:**

\`\`\`javascript
// Ruim: Lgica desnecessariamente complexa para alternar um booleano
function ToggleButtonComplex() {
  const [isOn, setIsOn] = React.useState(false);

  const handleToggle = () => {
    // Lgica complexa para algo simples
    const newState = !isOn;
    setIsOn(newState);
    if (newState) {
      console.log("Ligado!");
    } else {
      console.log("Desligado!");
    }
  };

  return <button onClick={handleToggle}>{isOn ? "ON" : "OFF"}</button>;
}

// Bom: Soluo simples e direta
function ToggleButtonSimple() {
  const [isOn, setIsOn] = React.useState(false);

  const handleToggle = () => {
    setIsOn(!isOn);
  };

  return <button onClick={handleToggle}>{isOn ? "ON" : "OFF"}</button>;
}
\`\`\`

### Concluso

Os princpios de arquitetura de software, como SOLID, DRY e KISS, so guias valiosos para qualquer desenvolvedor que busca construir aplicaes de alta qualidade. Ao aplic-los, mesmo em um contexto de front-end com JavaScript e React, voc pode criar cdigo mais limpo, mais fcil de entender, testar e manter. Eles promovem a modularidade, a flexibilidade e a resilincia do seu software, transformando voc de um "construtor de pginas" em um verdadeiro "engenheiro de software".
`,Mnt=()=>g.jsx(qe,{content:Ont,backRoute:"/algoritmos/busca-e-ordenacao",backText:"Voltar: Algoritmos de Busca e Ordenao",goRoute:"/algoritmos/projeto-algoritmos",goText:"Prximo: Projeto de Algoritmos"}),Rnt=`# Mdulo 4: Arquitetura, Estruturas de Dados e Algoritmos

## PROJETO: Refatorando a Lista de Tarefas

Este projeto prtico tem como objetivo consolidar os conhecimentos adquiridos sobre estruturas de dados, algoritmos e princpios de arquitetura de software, aplicando-os na refatorao de um projeto existente. Voc pegar o projeto "Lista de Tarefas" desenvolvido no Mdulo 3 e o transformar em uma aplicao mais robusta, manutenvel e eficiente.

### Descrio do Projeto Base

Voc deve ter um projeto de "Lista de Tarefas" funcional do Mdulo 3, que provavelmente manipula o DOM diretamente para adicionar, remover e marcar tarefas como concludas. O objetivo agora  evoluir essa aplicao, aplicando os conceitos de estado, funes puras e algoritmos de busca.

### Tarefas a Serem Realizadas

#### Tarefa 1: Estrutura de Dados - Gerenciamento de Estado

**Objetivo:** Modificar a lgica da aplicao para que o estado da lista de tarefas seja mantido em um array de objetos em JavaScript, em vez de manipular o DOM diretamente a cada evento. A interface do usurio deve ser uma renderizao desse estado.

**Detalhes:**

1.  **Estado Centralizado:** Crie um array de objetos JavaScript que representar todas as suas tarefas. Cada objeto de tarefa deve ter, no mnimo, as seguintes propriedades:
    *   \`id\`: Um identificador nico para a tarefa (voc pode usar \`Date.now()\` ou um contador simples para gerar IDs).
    *   \`texto\`: A descrio da tarefa.
    *   \`concluida\`: Um booleano indicando se a tarefa foi concluda (\`true\` ou \`false\`).
2.  **Renderizao Baseada no Estado:** A interface do usurio (a lista de tarefas exibida na tela) deve ser gerada **inteiramente** a partir deste array de estado. Sempre que o estado for alterado (uma tarefa  adicionada, removida ou marcada como concluda), voc deve "renderizar" novamente a lista de tarefas no DOM, refletindo o estado atual.
3.  **Evitar Manipulao Direta do DOM:** As funes que modificam as tarefas no devem mais interagir diretamente com os elementos HTML. Elas devem apenas modificar o array de estado. A atualizao visual ser uma consequncia da renderizao baseada no estado.

**Exemplo de Estrutura de Estado:**

\`\`\`javascript
let tarefas = [
  { id: 1, texto: "Aprender Estruturas de Dados", concluida: false },
  { id: 2, texto: "Refatorar Projeto Lista de Tarefas", concluida: true },
  { id: 3, texto: "Estudar Princpios SOLID", concluida: false },
];

// Funo de renderizao (exemplo simplificado)
function renderizarTarefas() {
  const listaUl = document.getElementById("lista-de-tarefas");
  listaUl.innerHTML = ""; // Limpa a lista atual
  tarefas.forEach(tarefa => {
    const li = document.createElement("li");
    li.textContent = tarefa.texto;
    if (tarefa.concluida) {
      li.style.textDecoration = "line-through";
    }
    // Adicionar botes de ao e eventos aqui
    listaUl.appendChild(li);
  });
}

// Chamar renderizarTarefas() sempre que o array 'tarefas' for modificado.
\`\`\`

#### Tarefa 2: Arquitetura - Funes Puras e Princpios DRY/SRP

**Objetivo:** Separar a lgica de manipulao das tarefas em funes puras e bem definidas, seguindo os princpios DRY (Don't Repeat Yourself) e SRP (Single Responsibility Principle).

**Detalhes:**

1.  **Funes Puras:** Crie funes que recebem o estado atual (o array de tarefas) e os dados necessrios para a operao, e retornam um **novo** estado modificado, sem causar efeitos colaterais (ou seja, sem modificar o array original diretamente). Isso torna o cdigo mais previsvel e fcil de testar.
2.  **Responsabilidade nica:** Cada funo deve ter uma nica responsabilidade. Por exemplo, uma funo \`adicionarTarefa\` deve apenas adicionar uma tarefa, no deve renderizar a UI ou buscar dados.
3.  **Exemplos de Funes:**
    *   \`adicionarTarefa(estadoAtual, textoTarefa)\`: Recebe o array de tarefas e o texto da nova tarefa. Retorna um novo array com a tarefa adicionada.
    *   \`removerTarefa(estadoAtual, idTarefa)\`: Recebe o array de tarefas e o ID da tarefa a ser removida. Retorna um novo array sem a tarefa.
    *   \`toggleTarefa(estadoAtual, idTarefa)\`: Recebe o array de tarefas e o ID da tarefa a ser alternada (concluda/no concluda). Retorna um novo array com o status da tarefa atualizado.

**Exemplo de Funo Pura:**

\`\`\`javascript
function adicionarTarefa(estadoAtual, textoTarefa) {
  const novaTarefa = {
    id: Date.now(), // ID nico
    texto: textoTarefa,
    concluida: false,
  };
  return [...estadoAtual, novaTarefa]; // Retorna um novo array com a nova tarefa
}

// Como usar:
// tarefas = adicionarTarefa(tarefas, "Comprar po");
// renderizarTarefas();
\`\`\`

#### Tarefa 3: Algoritmos - Funcionalidade de Busca

**Objetivo:** Adicionar uma funcionalidade de busca que permita ao usurio filtrar as tarefas exibidas. O aluno deve implementar uma busca simples e explicar sua complexidade.

**Detalhes:**

1.  **Campo de Busca:** Adicione um campo de input (texto) na interface do usurio para que o usurio possa digitar termos de busca.
2.  **Filtragem Dinmica:**  medida que o usurio digita, a lista de tarefas exibida deve ser filtrada para mostrar apenas as tarefas cujo texto contenha o termo de busca (case-insensitive).
3.  **Implementao:** Utilize o mtodo \`Array.prototype.filter()\` do JavaScript para implementar a lgica de busca. Esta  uma forma prtica de aplicar um algoritmo de busca linear.
4.  **Anlise de Complexidade:** No arquivo \`PROJETO-refatorando-a-lista-de-tarefas.md\` (este arquivo), adicione uma seo explicando a complexidade de tempo da sua implementao de busca. Mencione que \`filter()\` percorre o array, resultando em uma complexidade O(n) para cada operao de filtragem.

**Exemplo de Lgica de Busca:**

\`\`\`javascript
function filtrarTarefas(estadoAtual, termoBusca) {
  if (!termoBusca) {
    return estadoAtual; // Se no houver termo, retorna todas as tarefas
  }
  const termoLower = termoBusca.toLowerCase();
  return estadoAtual.filter(tarefa =>
    tarefa.texto.toLowerCase().includes(termoLower)
  );
}

// Como usar:
// const tarefasFiltradas = filtrarTarefas(tarefas, "estudar");
// renderizarTarefas(tarefasFiltradas); // Renderiza a lista filtrada
\`\`\`

**Anlise de Complexidade da Busca:**

A funcionalidade de busca implementada utilizando \`Array.prototype.filter()\` possui uma complexidade de tempo de **O(n)**, onde \`n\`  o nmero total de tarefas no array de estado. Isso ocorre porque o mtodo \`filter()\` precisa iterar sobre cada elemento do array para verificar se ele corresponde ao critrio de busca (\`includes(termoLower)\`). No pior caso, se o termo de busca no for encontrado ou se todos os elementos corresponderem, o \`filter()\` percorrer o array inteiro. Para cada caractere digitado no campo de busca, essa operao O(n)  executada novamente para atualizar a lista filtrada.

### Instrues Finais

Ao final deste projeto, voc ter uma aplicao de lista de tarefas que demonstra um entendimento slido de:

*   **Gerenciamento de Estado:** Como manter o estado da aplicao de forma centralizada e reativa.
*   **Programao Funcional:** Uso de funes puras para manipular o estado, promovendo imutabilidade.
*   **Princpios de Arquitetura:** Aplicao dos princpios DRY e SRP para um cdigo mais modular e manutenvel.
*   **Algoritmos de Busca:** Implementao e compreenso da complexidade de um algoritmo de busca linear.

Certifique-se de que seu cdigo esteja bem comentado e que a estrutura de arquivos do projeto final reflita a organizao proposta no curso. Boa sorte!
`,Dnt=()=>g.jsx(qe,{content:Rnt,backRoute:"/algoritmos/arquitetura",backText:"Voltar: Algoritmos de Busca e Ordenao",goRoute:"/ts/introducao",goText:"Prximo: Introduo ao Typescript"}),Nnt='# Captulo 1: Introduo ao TypeScript\n\n## O que  TypeScript e por que us-lo?\n\n**TypeScript**  um "superset" (ou superconjunto) de JavaScript desenvolvido e mantido pela Microsoft. Isso significa que todo cdigo JavaScript vlido tambm  um cdigo TypeScript vlido. A principal adio que o TypeScript traz ao JavaScript  a **tipagem esttica opcional**.\n\nEm JavaScript puro, os tipos de variveis so dinmicos. Uma varivel pode comear como um nmero e depois receber uma string, sem nenhum erro.\n\n```javascript\n// JavaScript\nlet minhaVariavel = 10;       //  um nmero\nminhaVariavel = "agora sou uma string"; // Totalmente vlido!\n```\n\nEmbora flexvel, essa caracterstica pode causar bugs difceis de rastrear em aplicaes grandes. O TypeScript resolve isso permitindo que voc defina tipos para suas variveis, parmetros de funo e objetos.\n\n```typescript\n// TypeScript\nlet minhaVariavel: number = 10;\nminhaVariavel = "agora sou uma string"; // Erro! O tipo \'string\' no pode ser atribudo ao tipo \'number\'.\n```\n\nEste erro  detectado **antes mesmo de voc rodar o cdigo**, diretamente no seu editor, o que economiza um tempo imenso de depurao.\n\n## Principais Vantagens\n\n1.  **Segurana de Tipo (Type Safety)**: Reduz drasticamente a ocorrncia de erros comuns, como `undefined is not a function` ou passar o tipo errado de dado para uma funo.\n2.  **Autocompletar e IntelliSense Aprimorados**: Como o editor de cdigo (VS Code, por exemplo) conhece os tipos, ele oferece sugestes muito mais inteligentes e precisas enquanto voc digita.\n3.  **Escalabilidade e Manutenibilidade**: Em projetos grandes e com equipes de mltiplos desenvolvedores, o TypeScript funciona como uma documentao viva, tornando o cdigo mais fcil de entender, refatorar e manter.\n4.  **Acesso a Recursos Modernos do JavaScript**: O TypeScript permite que voc use as funcionalidades mais recentes do ECMAScript (o padro do JavaScript) e as compila para uma verso de JavaScript que os navegadores mais antigos entendem.\n\n## Configurando o Ambiente\n\nPara comear, voc precisa de duas coisas:\n1.  **Node.js e npm**: O Node.js  o ambiente que executa JavaScript fora do navegador, e o `npm`  seu gerenciador de pacotes. Se voc no os tem, baixe-os em [nodejs.org](https://nodejs.org/).\n2.  **Compilador TypeScript (`tsc`)**: Voc pode instal-lo globalmente em sua mquina com o seguinte comando:\n\n    ```bash\n    npm install -g typescript\n    ```\n\n## Seu Primeiro Cdigo TypeScript: `hello-world.ts`\n\nCrie um arquivo chamado `hello-world.ts` e adicione o seguinte cdigo:\n\n```typescript\nfunction saudar(nome: string) {\n  console.log(`Ol, ${nome}! Bem-vindo ao mundo do TypeScript.`);\n}\n\nconst meuNome = "Mundo";\nsaudar(meuNome);\n```\n\nNote a anotao `: string` no parmetro `nome`. Estamos dizendo  funo `saudar` que ela s deve aceitar um argumento do tipo `string`.\n\n## Compilando TypeScript para JavaScript\n\nNavegadores no entendem TypeScript diretamente. Precisamos compilar nosso arquivo `.ts` para um arquivo `.js` que eles possam executar. Para isso, usamos o compilador `tsc`:\n\n```bash\ntsc hello-world.ts\n```\n\nEste comando criar um novo arquivo, `hello-world.js`, com o cdigo JavaScript correspondente.\n\n## Viso Geral do `tsconfig.json`\n\nGerenciar um projeto com muitos arquivos `.ts` compilando um por um  invivel. Para isso, usamos o arquivo `tsconfig.json`. Ele diz ao compilador TypeScript como tratar um projeto inteiro.\n\nPara criar um, rode o comando na raiz do seu projeto:\n\n```bash\ntsc --init\n```\n\nEste arquivo vem com muitas opes. As mais importantes para comear so:\n*   `"target"`: Define para qual verso do JavaScript o cdigo ser compilado (ex: `"ES2016"`).\n*   `"outDir"`: Especifica a pasta onde os arquivos `.js` compilados sero salvos (ex: `"./dist"`).\n*   `"rootDir"`: Especifica a pasta que contm os arquivos `.ts` de origem (ex: `"./src"`).\n*   `"strict"`: Habilita um conjunto de regras estritas de verificao de tipo. ** altamente recomendado mant-lo como `true`**.\n\nCom o `tsconfig.json` no lugar, voc pode compilar todo o projeto simplesmente executando `tsc` no terminal.\n\n',Lnt=()=>g.jsx(qe,{content:Nnt,backRoute:"/algoritmos/projeto-algoritmos",backText:"Voltar: Projeto de Algoritmos",goRoute:"/ts/tipos-basicos",goText:"Prximo: Tipos Bsicos"}),jnt='# Captulo 2: Tipos Primitivos e Inferncia de Tipo\n\n## Tipos Bsicos\n\nO TypeScript expande os tipos primitivos do JavaScript com anotaes de tipo explcitas.\n\n- **`string`**: Para textos.\n  ```typescript\n  let nome: string = "Alice";\n  ```\n- **`number`**: Para todos os tipos de nmeros (inteiros e de ponto flutuante).\n  ```typescript\n  let idade: number = 30;\n  let preco: number = 19.99;\n  ```\n- **`boolean`**: Para valores verdadeiros ou falsos.\n  ```typescript\n  let ativo: boolean = true;\n  ```\n- **`null` e `undefined`**: Representam a ausncia de valor. Podem ser atribudos a outros tipos se a opo `"strictNullChecks"` estiver desativada no `tsconfig.json` (no recomendado).\n  ```typescript\n  let nulo: null = null;\n  let indefinido: undefined = undefined;\n  ```\n\n## Arrays e Tuplas\n\n- **Arrays**: Para listas de valores de um mesmo tipo. A sintaxe pode ser `tipo[]` ou `Array<tipo>`.\n  ```typescript\n  let numeros: number[] = [1, 2, 3];\n  let nomes: Array<string> = ["Carlos", "Diana"];\n  ```\n\n- **Tuplas (Tuples)**: Para arrays com um nmero fixo de elementos, onde cada elemento pode ter um tipo diferente. A ordem dos tipos  importante.\n  ```typescript\n  let pessoa: [string, number];\n  pessoa = ["Joo", 35]; // OK\n  // pessoa = [35, "Joo"]; // Erro!\n  ```\n\n## Os Tipos `any` e `unknown`\n\n- **`any`**:  o "escape" do sistema de tipos. Uma varivel do tipo `any` pode receber qualquer valor, e voc pode realizar qualquer operao nela sem verificao de tipo. Use com extrema cautela, pois anula a segurana do TypeScript.\n  ```typescript\n  let variavelQualquer: any = 4;\n  variavelQualquer = "agora sou string";\n  variavelQualquer.metodoQueNaoExiste(); // Nenhum erro em tempo de compilao, mas falhar em execuo.\n  ```\n\n- **`unknown`**: Uma alternativa mais segura ao `any`. Voc pode atribuir qualquer valor a uma varivel `unknown`, mas no pode realizar operaes nela sem antes verificar seu tipo (usando `typeof`, `instanceof`, etc.).\n  ```typescript\n  let variavelDesconhecida: unknown = "Isso pode ser qualquer coisa";\n  \n  // console.log(variavelDesconhecida.toUpperCase()); // Erro! O objeto  do tipo \'unknown\'.\n\n  if (typeof variavelDesconhecida === \'string\') {\n    console.log(variavelDesconhecida.toUpperCase()); // OK, agora o TS sabe que  uma string.\n  }\n  ```\n\n## Inferncia de Tipo\n\nNa maioria das vezes, voc no precisa anotar os tipos explicitamente. O TypeScript  inteligente o suficiente para **inferir** o tipo com base no valor que voc atribui  varivel na sua inicializao.\n\n```typescript\nlet framework = "React"; // O TypeScript infere que \'framework\'  do tipo string.\n// framework = 123; // Erro! O tipo \'number\' no pode ser atribudo ao tipo \'string\'.\n\nlet ano = 2024; // O TypeScript infere que \'ano\'  do tipo number.\n```\n\nA inferncia de tipo torna o cdigo mais limpo e legvel, mantendo a segurana. A regra geral : **se o TypeScript consegue inferir o tipo, deixe-o fazer o trabalho.**\n\n',Bnt=()=>g.jsx(qe,{content:jnt,backRoute:"/ts/introducao",backText:"Voltar: Introduo",goRoute:"/ts/objetos-e-funcoes",goText:"Prximo: Objetos e Funes"}),Fnt=`# Captulo 3: Funes e Objetos

## Tipando Funes

A segurana de tipo em funes  um dos recursos mais poderosos do TypeScript. Podemos tipar tanto os parmetros de entrada quanto o valor de retorno.

### Parmetros e Retorno

A sintaxe  simples: \`: tipo\` aps cada parmetro e aps a lista de parnteses para o retorno.

\`\`\`typescript
// Esta funo aceita dois nmeros e retorna um nmero.
function somar(a: number, b: number): number {
  return a + b;
}

const resultado = somar(10, 5); // OK

// const erro = somar("10", 5); // Erro! Argumento do tipo 'string' no  atribuvel ao parmetro do tipo 'number'.
\`\`\`

Se uma funo no retorna nada (por exemplo, apenas imprime algo no console), seu tipo de retorno  \`void\`.

\`\`\`typescript
function logMensagem(mensagem: string): void {
  console.log(mensagem);
}
\`\`\`

### Tipos de Funo

Podemos definir um "molde" para uma funo usando um alias de tipo (\`type\`).

\`\`\`typescript
type FuncaoMatematica = (x: number, y: number) => number;

const subtrair: FuncaoMatematica = (x, y) => {
  return x - y;
};

const multiplicar: FuncaoMatematica = (x, y) => {
  return x * y;
};
\`\`\`

### Parmetros Opcionais e Padro

- **Opcionais**: Adicione um \`?\` aps o nome do parmetro para torn-lo opcional. Parmetros opcionais devem vir depois dos obrigatrios.
  \`\`\`typescript
  function cumprimentar(nome: string, saudacao?: string) {
    if (saudacao) {
      console.log(\`\${saudacao}, \${nome}!\`);
    } else {
      console.log(\`Ol, \${nome}!\`);
    }
  }

  cumprimentar("Ana"); // Ol, Ana!
  cumprimentar("Beto", "Bom dia"); // Bom dia, Beto!
  \`\`\`

- **Padro**: Atribua um valor padro a um parmetro. Ele ser usado se nenhum argumento for fornecido.
  \`\`\`typescript
  function criarBotao(texto: string, cor: string = "blue") {
    console.log(\`Criando boto com texto "\${texto}" e cor "\${cor}".\`);
  }

  criarBotao("Enviar"); // Usa a cor padro "blue"
  criarBotao("Cancelar", "red"); // Usa a cor "red"
  \`\`\`

## Tipando Objetos

Podemos definir a estrutura de um objeto diretamente na anotao de tipo.

\`\`\`typescript
function exibirCoordenadas(ponto: { x: number; y: number }) {
  console.log(\`As coordenadas so X: \${ponto.x} e Y: \${ponto.y}\`);
}

exibirCoordenadas({ x: 3, y: 7 });
// exibirCoordenadas({ x: 3 }); // Erro! Falta a propriedade 'y'.
\`\`\`

Essa abordagem  til para objetos simples, mas para estruturas mais complexas e reutilizveis, usamos \`Interfaces\` e \`Types\`, que veremos no prximo captulo.

`,znt=()=>g.jsx(qe,{content:Fnt,backRoute:"/ts/tipos-basicos",backText:"Voltar: Tipos Bsicos",goRoute:"/ts/interfaces",goText:"Prximo: Interfaces"}),Unt=`# Captulo 4: Interfaces e Tipos (Type Aliases)

Para definir formas de objetos ou outras estruturas de dados complexas, o TypeScript nos oferece duas ferramentas principais: \`interface\` e \`type\`.

## Interfaces

Uma \`interface\`  uma forma poderosa de definir um "contrato" para a estrutura de um objeto. Se um objeto pretende implementar uma interface, ele deve ter todas as propriedades e mtodos definidos nela.

\`\`\`typescript
interface Usuario {
  id: number;
  nome: string;
  email: string;
}

function exibirUsuario(usuario: Usuario) {
  console.log(\`Nome: \${usuario.nome}, Email: \${usuario.email}\`);
}

const meuUsuario: Usuario = {
  id: 1,
  nome: "Carlos Silva",
  email: "carlos@exemplo.com"
};

exibirUsuario(meuUsuario);
\`\`\`

### Propriedades Opcionais e \`readonly\`

- **Opcionais (\`?\`)**: Nem todas as propriedades de um objeto precisam ser obrigatrias.
- **Somente Leitura (\`readonly\`)**: Impede que uma propriedade seja alterada aps a criao do objeto.

\`\`\`typescript
interface Produto {
  readonly id: string;
  nome: string;
  descricao?: string; // Descrio  opcional
}

let notebook: Produto = {
  id: "abc-123",
  nome: "Notebook Pro"
};

notebook.nome = "Notebook Ultra Pro"; // OK
// notebook.id = "def-456"; // Erro! 'id'  uma propriedade somente leitura.
\`\`\`

### Estendendo Interfaces (\`extends\`)

Interfaces podem herdar propriedades de outras, tornando o cdigo mais modular (DRY - Don't Repeat Yourself).

\`\`\`typescript
interface Entidade {
  readonly id: number;
}

interface Post extends Entidade {
  titulo: string;
  conteudo: string;
}

const meuPost: Post = {
  id: 101,
  titulo: "Guia de TypeScript",
  conteudo: "..."
};
\`\`\`

## Tipos (Type Aliases)

Um \`type alias\` permite criar um novo nome (um apelido) para qualquer tipo, no apenas para objetos.

\`\`\`typescript
type ID = string | number; // Um ID pode ser string ou nmero

function buscarPorId(id: ID) {
  // ...
}

type Ponto = {
  x: number;
  y: number;
};

const meuPonto: Ponto = { x: 10, y: 20 };
\`\`\`

### Tipos de Unio (\`|\`) e Interseo (\`&\`)

- **Unio (\`|\`)**: Permite que uma varivel seja de um tipo **OU** de outro.
  \`\`\`typescript
  type Status = "sucesso" | "erro" | "carregando";
  let statusAtual: Status = "carregando";
  \`\`\`

- **Interseo (\`&\`)**: Combina mltiplos tipos em um s. O novo tipo ter **TODAS** as propriedades dos tipos combinados.
  \`\`\`typescript
  type InfoBasica = { nome: string; };
  type InfoContato = { email: string; telefone: string; };

  type ClienteCompleto = InfoBasica & InfoContato;

  const cliente: ClienteCompleto = {
    nome: "Fernanda",
    email: "fe@email.com",
    telefone: "9999-8888"
  };
  \`\`\`

## \`interface\` vs \`type\`: Qual usar?

- **Use \`interface\`** quando estiver definindo a forma de um objeto ou de uma classe. A capacidade de "declaration merging" (onde mltiplas declaraes de interface com o mesmo nome so unidas)  uma vantagem chave.
- **Use \`type\`** quando precisar de tipos de unio, interseo, tuplas ou para criar apelidos para tipos primitivos.

Para consistncia, muitas equipes escolhem usar \`interface\` para objetos e \`type\` para todo o resto.

`,qnt=()=>g.jsx(qe,{content:Unt,backRoute:"/ts/objetos-e-funcoes",backText:"Voltar: Objetos e Funes",goRoute:"/ts/generics",goText:"Prximo: Generics"}),Hnt=`# Captulo 5: Generics

Generics so um dos conceitos mais poderosos do TypeScript. Eles nos permitem criar componentes, funes e classes que funcionam com uma variedade de tipos em vez de um nico, mantendo a segurana de tipo. Pense neles como "variveis de tipo".

## O que so Generics e por que so teis?

Imagine uma funo que recebe um array e retorna o primeiro elemento. Sem generics, teramos duas opes:

1.  **Usar \`any\`**: Perderamos a segurana de tipo. O TypeScript no saberia qual o tipo do elemento retornado.
    \`\`\`typescript
    function primeiroElementoAny(arr: any[]): any {
      return arr[0];
    }
    const valor = primeiroElementoAny([1, 2, 3]); // valor  do tipo 'any'
    \`\`\`

2.  **Criar mltiplas funes**: Uma para cada tipo, o que gera duplicao de cdigo.
    \`\`\`typescript
    function primeiroElementoNumero(arr: number[]): number { return arr[0]; }
    function primeiroElementoString(arr: string[]): string { return arr[0]; }
    \`\`\`

**Generics resolvem isso!** Criamos uma funo que aceita um "tipo" como parmetro.

\`\`\`typescript
function primeiroElemento<T>(arr: T[]): T | undefined {
  return arr[0];
}

// O TypeScript infere o tipo T com base no argumento
const primeiroNumero = primeiroElemento([1, 2, 3]); // T  inferido como 'number'
const primeiraString = primeiroElemento(["a", "b", "c"]); // T  inferido como 'string'

// Tambm podemos definir explicitamente
const primeiroBool = primeiroElemento<boolean>([true, false]);
\`\`\`

A letra \`T\`  uma conveno para "Type", mas qualquer nome vlido pode ser usado. A funo agora  reutilizvel e 100% segura em termos de tipo.

## Funes, Interfaces e Classes Genricas

### Funes Genricas

J vimos um exemplo acima. Elas so teis para criar utilitrios que operam em colees ou dados de forma agnstica ao tipo.

### Interfaces Genricas

Podemos criar interfaces que dependem de um tipo. Um exemplo clssico  a resposta de uma API.

\`\`\`typescript
interface RespostaAPI<T> {
  dados: T;
  status: number;
  erro?: string;
}

interface Usuario {
  id: number;
  nome: string;
}

const respostaUsuario: RespostaAPI<Usuario> = {
  dados: { id: 1, nome: "Ana" },
  status: 200
};

const respostaErro: RespostaAPI<null> = {
  dados: null,
  status: 404,
  erro: "Usurio no encontrado"
};
\`\`\`

### Classes Genricas

Classes tambm podem ser genricas, teis para estruturas de dados.

\`\`\`typescript
class Colecao<T> {
  private itens: T[] = [];

  adicionar(item: T): void {
    this.itens.push(item);
  }

  listar(): T[] {
    return this.itens;
  }
}

const colecaoDeNumeros = new Colecao<number>();
colecaoDeNumeros.adicionar(1);
colecaoDeNumeros.adicionar(2);
// colecaoDeNumeros.adicionar("3"); // Erro!

const colecaoDeStrings = new Colecao<string>();
colecaoDeStrings.adicionar("Ol");
\`\`\`

## Restries em Generics (\`extends\`)

s vezes, queremos que nosso tipo genrico \`T\` tenha certas propriedades. Podemos usar a palavra-chave \`extends\` para criar uma restrio.

\`\`\`typescript
interface Comprimento {
  length: number;
}

// Esta funo s aceita tipos que tenham a propriedade 'length'
function logComprimento<T extends Comprimento>(arg: T): void {
  console.log(arg.length);
}

logComprimento("Ol mundo"); // OK, string tem 'length'
logComprimento([1, 2, 3]);   // OK, array tem 'length'
// logComprimento(123);      // Erro! number no tem 'length'
\`\`\`

Generics so a chave para escrever cdigo TypeScript avanado, reutilizvel e robusto.

`,$nt=()=>g.jsx(qe,{content:Hnt,backRoute:"/ts/interfaces",backText:"Voltar: Interfaces",goRoute:"/ts/tipos-avancados",goText:"Prximo: Tipos Avanados"}),Vnt=`# Captulo 6: Tipos Avanados e Mapeados

O TypeScript oferece um conjunto de ferramentas avanadas para manipular tipos. Elas permitem criar tipos complexos a partir de tipos existentes, tornando seu cdigo mais flexvel e DRY (Don't Repeat Yourself).

## Tipos Utilitrios (Utility Types)

O TypeScript j vem com vrios tipos utilitrios globais para transformaes comuns.

### \`Partial<T>\`
Cria um tipo onde todas as propriedades de \`T\` so opcionais. til para objetos de atualizao, onde voc s envia os campos que mudaram.

\`\`\`typescript
interface Tarefa {
  id: number;
  titulo: string;
  concluida: boolean;
}

function atualizarTarefa(id: number, atualizacoes: Partial<Tarefa>) {
  // ...lgica para atualizar a tarefa no banco de dados
}

atualizarTarefa(1, { concluida: true }); // OK
atualizarTarefa(2, { titulo: "Novo Ttulo", concluida: false }); // OK
\`\`\`

### \`Readonly<T>\`
Cria um tipo onde todas as propriedades de \`T\` so \`readonly\`.

\`\`\`typescript
const tarefa: Readonly<Tarefa> = {
  id: 1,
  titulo: "Aprender TypeScript",
  concluida: false,
};

// tarefa.titulo = "Mudar ttulo"; // Erro!
\`\`\`

### \`Pick<T, K>\`
Cria um tipo selecionando um conjunto de propriedades \`K\` do tipo \`T\`.

\`\`\`typescript
type ResumoTarefa = Pick<Tarefa, "id" | "titulo">;

const resumo: ResumoTarefa = {
  id: 1,
  titulo: "Aprender TypeScript",
  // concluida: false // Erro! 'concluida' no existe em ResumoTarefa
};
\`\`\`

### \`Omit<T, K>\`
O oposto de \`Pick\`. Cria um tipo omitindo um conjunto de propriedades \`K\` do tipo \`T\`.

\`\`\`typescript
type InfoCriacaoTarefa = Omit<Tarefa, "id" | "concluida">;

const novaTarefa: InfoCriacaoTarefa = {
  titulo: "Praticar mais",
};
\`\`\`

## Tipos Mapeados (\`in keyof\`)

Tipos mapeados permitem criar novos tipos iterando sobre as chaves de um tipo existente.  a tecnologia por trs de \`Partial\` e \`Readonly\`.

\`\`\`typescript
type PropriedadesBooleanas<T> = {
  [P in keyof T]: boolean;
};

interface Permissoes {
  ler: boolean;
  escrever: boolean;
  deletar: boolean;
}

// O tipo Flags ter as mesmas chaves de Permissoes, mas todas sero do tipo boolean.
type Flags = PropriedadesBooleanas<Permissoes>;
// type Flags = { ler: boolean; escrever: boolean; deletar: boolean; }
\`\`\`

## Tipos Condicionais (\`extends ? TrueType : FalseType\`)

Permitem criar tipos que mudam com base em uma condio.

\`\`\`typescript
type CheckString<T> = T extends string ? " uma string" : "No  uma string";

type A = CheckString<"hello">; // O tipo A  " uma string"
type B = CheckString<123>;     // O tipo B  "No  uma string"
\`\`\`

Um exemplo prtico  o tipo utilitrio \`NonNullable<T>\`, que remove \`null\` e \`undefined\` de um tipo.

\`\`\`typescript
// Implementao simplificada
type MeuNonNullable<T> = T extends null | undefined ? never : T;

type TipoComNulo = string | number | null | undefined;
type TipoSemNulo = MeuNonNullable<TipoComNulo>; // O tipo  string | number
\`\`\`

## \`typeof\` e \`keyof\`

- **\`typeof\`**: Usado no contexto de tipos, captura o tipo de uma varivel.
  \`\`\`typescript
  const pessoa = { nome: "Leo", idade: 25 };
  type TipoPessoa = typeof pessoa; // { nome: string; idade: number; }
  \`\`\`

- **\`keyof\`**: Pega as chaves de um tipo de objeto e cria um tipo de unio de strings com elas.
  \`\`\`typescript
  type ChavesPessoa = keyof TipoPessoa; // "nome" | "idade"
  \`\`\`

Essas ferramentas avanadas so a chave para modelar dados complexos e criar abstraes seguras em TypeScript.

`,Gnt=()=>g.jsx(qe,{content:Vnt,backRoute:"/ts/generics",backText:"Voltar: Generics",goRoute:"/ts/modulos",goText:"Prximo: Mdulos"}),Knt=`# Captulo 7: Mdulos, Namespaces e Decorators

## Organizando o Cdigo com Mdulos ES6

A forma moderna e padro de organizar cdigo em TypeScript (e JavaScript)  atravs de Mdulos ES6. Cada arquivo  seu prprio mdulo.

- **\`export\`**: Torna variveis, funes, classes ou tipos disponveis para outros arquivos.
- **\`import\`**: Usa cdigo exportado de outros mdulos.

\`\`\`typescript
// arquivo: utils.ts
export const PI = 3.14159;

export function somar(a: number, b: number): number {
  return a + b;
}

// arquivo: main.ts
import { somar, PI } from './utils';

console.log(\`O valor de PI  \${PI}\`);
console.log(\`2 + 3 = \${somar(2, 3)}\`);
\`\`\`

### Exports Padro (\`export default\`)

Um mdulo pode ter um \`export default\`, que  a exportao principal do arquivo.

\`\`\`typescript
// arquivo: ClasseUsuario.ts
export default class Usuario {
  // ...
}

// arquivo: app.ts
import Usuario from './ClasseUsuario'; // Note a ausncia de chaves {}

const user = new Usuario();
\`\`\`

**Regra geral**: Prefira exports nomeados (\`export\`) para clareza e consistncia. Use \`export default\` apenas quando um arquivo tem uma nica responsabilidade clara.

## Namespaces

Antes dos Mdulos ES6, o JavaScript no tinha um sistema de mdulos nativo. Para evitar colises de nomes de variveis no escopo global, o TypeScript introduziu os \`namespaces\`.

Um namespace agrupa cdigo relacionado sob um nome nico.

\`\`\`typescript
namespace Geometria {
  export class Circulo { /* ... */ }
  export class Quadrado { /* ... */ }
}

const circ = new Geometria.Circulo();
const quad = new Geometria.Quadrado();
\`\`\`

**Quando usar namespaces hoje?**
Raramente. Mdulos ES6 (\`import\`/\`export\`) so a abordagem recomendada para 99% dos casos. Namespaces ainda podem ser teis em alguns cenrios especficos, como organizar tipos em arquivos de declarao (\`.d.ts\`) ou em projetos muito grandes que ainda no migraram para mdulos. Para novos projetos, **use mdulos**.

## Decorators

Decorators so uma proposta para futuras verses do JavaScript, mas j podem ser usados em TypeScript como um recurso experimental. Eles fornecem uma maneira de adicionar anotaes e metaprogramao a declaraes de classes e seus membros.

Para us-los, voc precisa habilitar a opo \`"experimentalDecorators": true\` no seu \`tsconfig.json\`.

Decorators so funes especiais que podem ser anexadas a:
- Classes
- Mtodos
- Propriedades
- Parmetros

### Exemplo: Decorator de Mtodo

Um decorator comum  um que mede o tempo de execuo de um mtodo.

\`\`\`typescript
function logTempoDeExecucao(target: any, propertyKey: string, descriptor: PropertyDescriptor) {
  const metodoOriginal = descriptor.value;

  descriptor.value = function(...args: any[]) {
    console.log(\`Iniciando execuo de \${propertyKey}...\`);
    const inicio = performance.now();
    const resultado = metodoOriginal.apply(this, args);
    const fim = performance.now();
    console.log(\`Execuo de \${propertyKey} levou \${(fim - inicio).toFixed(2)}ms.\`);
    return resultado;
  };

  return descriptor;
}

class Calculadora {
  @logTempoDeExecucao
  somarArray(numeros: number[]): number {
    return numeros.reduce((soma, atual) => soma + atual, 0);
  }
}

const calc = new Calculadora();
calc.somarArray(Array.from({ length: 1000000 }, (_, i) => i + 1));
// Sada:
// Iniciando execuo de somarArray...
// Execuo de somarArray levou X.XXms.
\`\`\`

Decorators so amplamente utilizados em frameworks como Angular e NestJS para funcionalidades como injeo de dependncia, definio de rotas e validao. Eles so um tpico avanado, mas muito poderoso.

`,Wnt=()=>g.jsx(qe,{content:Knt,backRoute:"/ts/tipos-avancados",backText:"Voltar: Tipos Avanados",goRoute:"/ts/typescript-com-react",goText:"Prximo: TypeScript com React"}),Ynt=`# Captulo 8: Integrando TypeScript com React

Usar TypeScript com React eleva a experincia de desenvolvimento, trazendo segurana de tipo para componentes, props e estados. Frameworks como Vite e Create React App oferecem templates prontos para essa combinao.

## Configurando um Projeto React com TypeScript

Com o Vite, o processo  direto:
\`\`\`bash
npm create vite@latest meu-app-react -- --template react-ts
\`\`\`
Isso cria um projeto React com toda a configurao de TypeScript pronta para uso.

## Tipando Componentes de Funo

A forma mais comum de criar componentes em React hoje  com funes. Para tip-los, usamos \`React.FC\` (Function Component).

\`\`\`tsx
import React from 'react';

// 1. Definir a interface para as props
interface GreetingProps {
  nome: string;
  idade?: number; // Prop opcional
}

// 2. Usar React.FC<GreetingProps> para tipar o componente
const Greeting: React.FC<GreetingProps> = ({ nome, idade }) => {
  return (
    <div>
      <h1>Ol, {nome}!</h1>
      {idade && <p>Voc tem {idade} anos.</p>}
    </div>
  );
};

export default Greeting;
\`\`\`
Usar \`React.FC\` garante que:
- As \`props\` recebidas correspondem  interface \`GreetingProps\`.
- O componente pode ter \`children\` (embora isso tenha mudado nas verses mais recentes do React e \`@types/react\`).
- O valor de retorno  um elemento JSX vlido.

## Tipando Hooks do React

### \`useState\`
O TypeScript geralmente consegue inferir o tipo do estado a partir do valor inicial.

\`\`\`tsx
// \`count\`  inferido como 'number'
const [count, setCount] = React.useState(0);

// \`user\`  inferido como 'User | null'
const [user, setUser] = React.useState<User | null>(null);
\`\`\`
Quando o estado inicial  \`null\` ou \`undefined\`,  uma boa prtica fornecer o tipo explicitamente, como no exemplo do \`user\`.

### \`useEffect\` e \`useRef\`
- **\`useEffect\`**: A funo passada para \`useEffect\` no deve retornar nada alm de uma funo de limpeza (cleanup). O TypeScript garante isso.
- **\`useRef\`**: Precisa de um tipo genrico para o valor que a ref ir conter.

\`\`\`tsx
// \`inputRef\` ir apontar para um elemento de input HTML
const inputRef = React.useRef<HTMLInputElement>(null);

React.useEffect(() => {
  // O 'current' pode ser nulo, ento  preciso verificar
  inputRef.current?.focus();
}, []);
\`\`\`

## Tipando Eventos

Eventos do DOM, como cliques e mudanas em inputs, tambm tm tipos. Isso d acesso seguro s propriedades do evento.

\`\`\`tsx
import React, { useState, ChangeEvent, MouseEvent } from 'react';

const Formulario: React.FC = () => {
  const [value, setValue] = useState('');

  // O evento  do tipo ChangeEvent e vem de um HTMLInputElement
  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {
    setValue(event.target.value);
  };

  // O evento  do tipo MouseEvent e vem de um HTMLButtonElement
  const handleClick = (event: MouseEvent<HTMLButtonElement>) => {
    event.preventDefault();
    alert(\`Valor enviado: \${value}\`);
  };

  return (
    <form>
      <input type="text" value={value} onChange={handleChange} />
      <button onClick={handleClick}>Enviar</button>
    </form>
  );
};
\`\`\`

Tipar corretamente seus componentes React com TypeScript previne uma classe inteira de bugs, melhora o autocompletar e torna o cdigo muito mais fcil de manter e refatorar.

`,Xnt=()=>g.jsx(qe,{content:Ynt,backRoute:"/ts/modulos",backText:"Voltar: Mdulos",goRoute:"/ts/consumo-de-api",goText:"Prximo: Consumo de API"}),Jnt=`# Captulo 9: Consumindo APIs com Segurana

Uma das tarefas mais comuns em aplicaes web  buscar dados de uma API. TypeScript brilha nesse cenrio, permitindo-nos modelar as respostas da API e garantir que estamos usando os dados corretamente em toda a aplicao.

## 1. Definindo os Tipos da Resposta da API

O primeiro passo  sempre criar uma \`interface\` ou \`type\` que represente a estrutura dos dados que voc espera receber.

Vamos supor que estamos buscando dados de um usurio de uma API como a do GitHub. A resposta pode parecer com isto:

\`\`\`json
{
  "login": "octocat",
  "id": 1,
  "avatar_url": "https://github.com/images/error/octocat_happy.gif",
  "name": "The Octocat",
  "company": "GitHub",
  "bio": "Theres no place like 127.0.0.1"
}
\`\`\`

Nossa interface em TypeScript seria:

\`\`\`typescript
interface GithubUser {
  login: string;
  id: number;
  avatar_url: string;
  name: string | null; // 'name' pode ser nulo
  company: string | null;
  bio: string | null;
}
\`\`\`

## 2. Criando Funes de Requisio Reutilizveis com Generics

Podemos criar uma funo genrica para buscar dados de qualquer endpoint, garantindo que o tipo de retorno seja o que esperamos.

\`\`\`typescript
async function fetchData<T>(url: string): Promise<T> {
  const response = await fetch(url);
  if (!response.ok) {
    throw new Error(\`Erro HTTP! Status: \${response.status}\`);
  }
  const data: T = await response.json();
  return data;
}

// Exemplo de uso:
async function getGithubUser(username: string): Promise<GithubUser> {
  const url = \`https://api.github.com/users/\${username}\`;
  return fetchData<GithubUser>(url);
}

// Chamando a funo e usando os dados tipados
getGithubUser("octocat")
  .then(user => {
    console.log(\`Usurio: \${user.name}, ID: \${user.id}\`);
  })
  .catch(error => {
    console.error("Falha ao buscar usurio:", error);
  });
\`\`\`

## 3. Lidando com Erros e Estados de Carregamento de Forma Tipada

Em aplicaes React,  comum gerenciar estados de carregamento e erro ao consumir APIs. Podemos usar o \`useState\` e o \`useEffect\` com TypeScript para isso.

\`\`\`tsx
import React, { useState, useEffect } from 'react';

interface Post {
  userId: number;
  id: number;
  title: string;
  body: string;
}

const PostsList: React.FC = () => {
  const [posts, setPosts] = useState<Post[]>([]);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const fetchPosts = async () => {
      try {
        const data = await fetchData<Post[]>('https://jsonplaceholder.typicode.com/posts');
        setPosts(data);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchPosts();
  }, []);

  if (loading) {
    return <div>Carregando posts...</div>;
  }

  if (error) {
    return <div>Erro: {error}</div>;
  }

  return (
    <div>
      <h1>Posts</h1>
      <ul>
        {posts.map(post => (
          <li key={post.id}>
            <h2>{post.title}</h2>
            <p>{post.body}</p>
          </li>
        ))}
      </ul>
    </div>
  );
};

export default PostsList;
\`\`\`

Ao tipar as respostas da API e usar funes genricas, voc garante que os dados que voc espera esto realmente presentes e no formato correto, reduzindo erros em tempo de execuo e melhorando a manutenibilidade do cdigo.

`,Qnt=()=>g.jsx(qe,{content:Jnt,backRoute:"/ts/typescript-com-react",backText:"Voltar: TypeScript com React",goRoute:"/ts/testes",goText:"Prximo: Testes"}),Znt=`# Captulo 10: Testes em Aplicaes TypeScript

Testar seu cdigo  crucial para garantir a qualidade e a estabilidade da sua aplicao. TypeScript adiciona uma camada extra de segurana aos seus testes, garantindo que seus mocks e asseres estejam corretos em termos de tipo.

## Configurando o Ambiente de Testes

Para projetos React, a combinao mais popular  **Jest** (como executor de testes) e **React Testing Library** (para interagir com componentes da mesma forma que um usurio faria). Em um projeto Vite, a configurao  um pouco diferente, geralmente usando **Vitest**, que  compatvel com a API do Jest.

Para instalar as dependncias necessrias:

\`\`\`bash
npm install -D vitest jsdom @testing-library/react @testing-library/jest-dom
\`\`\`

## Escrevendo Testes Unitrios e de Integrao com Tipos

Vamos testar um componente \`Counter\` simples.

\`\`\`tsx
// src/components/Counter.tsx
import React, { useState } from 'react';

const Counter: React.FC = () => {
  const [count, setCount] = useState(0);

  return (
    <div>
      <h1>Contador</h1>
      <p>Valor atual: {count}</p>
      <button onClick={() => setCount(count + 1)}>Incrementar</button>
      <button onClick={() => setCount(count - 1)}>Decrementar</button>
    </div>
  );
};

export default Counter;
\`\`\`

Agora, o teste para este componente:

\`\`\`tsx
// src/components/Counter.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import Counter from './Counter';
import { describe, it, expect } from 'vitest';

describe('Componente Counter', () => {
  it('deve renderizar o valor inicial como 0', () => {
    render(<Counter />);
    // \`screen\` fornece mtodos para encontrar elementos na tela
    // \`getByText\` procura por um elemento que contenha o texto
    expect(screen.getByText('Valor atual: 0')).toBeInTheDocument();
  });

  it('deve incrementar o valor quando o boto de incrementar  clicado', () => {
    render(<Counter />);
    const incrementButton = screen.getByText('Incrementar');
    
    // \`fireEvent\` simula eventos do usurio
    fireEvent.click(incrementButton);

    expect(screen.getByText('Valor atual: 1')).toBeInTheDocument();
  });

  it('deve decrementar o valor quando o boto de decrementar  clicado', () => {
    render(<Counter />);
    const decrementButton = screen.getByText('Decrementar');
    
    fireEvent.click(decrementButton);

    expect(screen.getByText('Valor atual: -1')).toBeInTheDocument();
  });
});
\`\`\`

## Mockando Mdulos e Funes de Forma Segura

Ao testar componentes que consomem APIs, no queremos fazer chamadas reais  rede. Para isso, usamos \`mocks\`.

Vamos imaginar um componente que busca e exibe um usurio do GitHub.

\`\`\`tsx
// src/components/GithubProfile.tsx
import React, { useState, useEffect } from 'react';

interface User {
  name: string;
  login: string;
}

const GithubProfile: React.FC = () => {
  const [user, setUser] = useState<User | null>(null);

  useEffect(() => {
    fetch('https://api.github.com/users/octocat')
      .then(res => res.json())
      .then(data => setUser(data));
  }, []);

  if (!user) {
    return <div>Carregando...</div>;
  }

  return (
    <div>
      <h1>{user.name}</h1>
      <p>@{user.login}</p>
    </div>
  );
};
\`\`\`

Para testar, vamos mockar a funo \`fetch\` globalmente usando Vitest.

\`\`\`tsx
// src/components/GithubProfile.test.tsx
import { render, screen, waitFor } from '@testing-library/react';
import GithubProfile from './GithubProfile';
import { describe, it, expect, vi } from 'vitest';

// Mock da resposta da API
const mockUser = {
  name: 'The Octocat',
  login: 'octocat',
};

// Mock da funo fetch
global.fetch = vi.fn(() =>
  Promise.resolve({
    json: () => Promise.resolve(mockUser),
  }) as Promise<Response>
);

describe('Componente GithubProfile', () => {
  it('deve buscar e exibir o nome e login do usurio', async () => {
    render(<GithubProfile />);

    // O componente comea mostrando "Carregando..."
    expect(screen.getByText('Carregando...')).toBeInTheDocument();

    // \`waitFor\` espera at que a assero dentro dele seja verdadeira
    await waitFor(() => {
      // Aps a chamada da API, o nome do usurio deve aparecer
      expect(screen.getByText('The Octocat')).toBeInTheDocument();
    });

    // O login tambm deve estar na tela
    expect(screen.getByText('@octocat')).toBeInTheDocument();
  });
});
\`\`\`

O TypeScript nos ajuda aqui garantindo que nosso \`mockUser\` tenha a mesma estrutura que a interface \`User\` e que o mock de \`fetch\` retorne uma \`Promise\` que resolva para um objeto com um mtodo \`.json()\`, assim como o \`fetch\` real.

`,ert=()=>g.jsx(qe,{content:Znt,backRoute:"/ts/consumo-de-api",backText:"Voltar: Consumo de API",goRoute:"/ts/projeto-typescript",goText:"Prximo: Projeto TypeScript"}),trt=`# Captulo 11: Projeto Prtico - Lista de Tarefas (To-Do List)

Para consolidar o aprendizado de TypeScript e React, vamos construir uma aplicao simples de lista de tarefas (To-Do List). Este projeto abordar a estruturao, definio de tipos, gerenciamento de estado e renderizao de componentes.

## Estrutura do Projeto

Assumindo que voc j criou o projeto com Vite + React + TypeScript, vamos organizar as pastas da seguinte forma:

\`\`\`
src/
 components/
    TodoForm.tsx
    TodoItem.tsx
    TodoList.tsx
 types/
    index.ts
 App.tsx
 main.tsx
\`\`\`

## Definio dos Tipos e Interfaces

Primeiro, vamos definir a interface para uma tarefa em \`src/types/index.ts\`:

\`\`\`typescript
// src/types/index.ts
export interface Todo {
  id: string;
  text: string;
  completed: boolean;
}
\`\`\`

## Desenvolvimento dos Componentes

### \`TodoItem.tsx\`

Este componente ser responsvel por exibir uma nica tarefa e permitir marc-la como concluda ou remov-la.

\`\`\`tsx
// src/components/TodoItem.tsx
import React from 'react';
import { Todo } from '../types';

interface TodoItemProps {
  todo: Todo;
  onToggleComplete: (id: string) => void;
  onRemove: (id: string) => void;
}

const TodoItem: React.FC<TodoItemProps> = ({ todo, onToggleComplete, onRemove }) => {
  return (
    <div style={{ display: 'flex', alignItems: 'center', marginBottom: '10px' }}>
      <input
        type="checkbox"
        checked={todo.completed}
        onChange={() => onToggleComplete(todo.id)}
        style={{ marginRight: '10px' }}
      />
      <span style={{ textDecoration: todo.completed ? 'line-through' : 'none', flexGrow: 1 }}>
        {todo.text}
      </span>
      <button onClick={() => onRemove(todo.id)}>Remover</button>
    </div>
  );
};

export default TodoItem;
\`\`\`

### \`TodoForm.tsx\`

Este componente ser um formulrio para adicionar novas tarefas.

\`\`\`tsx
// src/components/TodoForm.tsx
import React, { useState } from 'react';

interface TodoFormProps {
  onAddTodo: (text: string) => void;
}

const TodoForm: React.FC<TodoFormProps> = ({ onAddTodo }) => {
  const [inputText, setInputText] = useState('');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (inputText.trim()) {
      onAddTodo(inputText);
      setInputText('');
    }
  };

  return (
    <form onSubmit={handleSubmit} style={{ marginBottom: '20px' }}>
      <input
        type="text"
        value={inputText}
        onChange={(e) => setInputText(e.target.value)}
        placeholder="Adicionar nova tarefa..."
        style={{ padding: '8px', marginRight: '10px', width: '300px' }}
      />
      <button type="submit">Adicionar</button>
    </form>
  );
};

export default TodoForm;
\`\`\`

### \`TodoList.tsx\`

Este componente renderizar a lista de tarefas, usando \`TodoItem\`.

\`\`\`tsx
// src/components/TodoList.tsx
import React from 'react';
import { Todo } from '../types';
import TodoItem from './TodoItem';

interface TodoListProps {
  todos: Todo[];
  onToggleComplete: (id: string) => void;
  onRemove: (id: string) => void;
}

const TodoList: React.FC<TodoListProps> = ({ todos, onToggleComplete, onRemove }) => {
  return (
    <div>
      {todos.map((todo) => (
        <TodoItem
          key={todo.id}
          todo={todo}
          onToggleComplete={onToggleComplete}
          onRemove={onRemove}
        />
      ))}
    </div>
  );
};

export default TodoList;
\`\`\`

## Gerenciamento de Estado na \`App.tsx\`

O componente principal \`App.tsx\` ser responsvel por gerenciar o estado da lista de tarefas e passar as funes de manipulao para os componentes filhos.

\`\`\`tsx
// src/App.tsx
import React, { useState } from 'react';
import { Todo } from './types';
import TodoForm from './components/TodoForm';
import TodoList from './components/TodoList';

const App: React.FC = () => {
  const [todos, setTodos] = useState<Todo[]>([
    { id: '1', text: 'Aprender TypeScript', completed: false },
    { id: '2', text: 'Construir To-Do List', completed: true },
  ]);

  const addTodo = (text: string) => {
    const newTodo: Todo = {
      id: Date.now().toString(), // ID simples baseado no timestamp
      text,
      completed: false,
    };
    setTodos((prevTodos) => [...prevTodos, newTodo]);
  };

  const toggleComplete = (id: string) => {
    setTodos((prevTodos) =>
      prevTodos.map((todo) =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      )
    );
  };

  const removeTodo = (id: string) => {
    setTodos((prevTodos) => prevTodos.filter((todo) => todo.id !== id));
  };

  return (
    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px', maxWidth: '600px', margin: '0 auto' }}>
      <h1>Minha Lista de Tarefas</h1>
      <TodoForm onAddTodo={addTodo} />
      <TodoList todos={todos} onToggleComplete={toggleComplete} onRemove={removeTodo} />
    </div>
  );
};

export default App;
\`\`\`

Este projeto simples demonstra como usar TypeScript para definir tipos, tipar props e estados em componentes React, e gerenciar o fluxo de dados de forma segura. Voc pode expandir este projeto adicionando persistncia de dados (LocalStorage, API), filtros, etc.

`,nrt=()=>g.jsx(qe,{content:trt,backRoute:"/ts/testes",backText:"Voltar: Testes",goRoute:"/react/introducao",goText:"Prximo: React"}),rrt=`## 1. Introduo ao React com TypeScript e Vite

### O que  React?

React  uma biblioteca JavaScript (agora com suporte completo para TypeScript) para construir interfaces de usurio, desenvolvida pelo Facebook. Diferente de frameworks completos, o React foca especificamente na camada de visualizao (view layer) de aplicaes web.

#### Principais caractersticas do React:

*   **Baseado em Componentes:** Interfaces so divididas em componentes reutilizveis e independentes.
*   **Virtual DOM:** Representao em memria do DOM real para otimizar atualizaes.
*   **Fluxo de Dados Unidirecional:** Dados fluem de componentes pais para filhos, tornando o cdigo mais previsvel.
*   **JSX/TSX:** Extenso de sintaxe que permite escrever HTML dentro do TypeScript.
*   **Ecossistema Rico:** Grande comunidade e diversas bibliotecas complementares.

### Por que TypeScript com React?

TypeScript  um superset tipado de JavaScript que adiciona tipagem esttica opcional. Ao usar TypeScript com React, voc ganha:

*   **Deteco de erros em tempo de compilao:** Erros so capturados antes da execuo
*   **Melhor documentao:** Os tipos servem como documentao viva do cdigo
*   **Melhor experincia de desenvolvimento:** Autocompletar e sugestes mais precisas no editor
*   **Refatorao mais segura:** O compilador avisa sobre problemas ao modificar o cdigo
*   **Melhor manuteno:** Especialmente til em projetos grandes e equipes

### O que  Vite?

Vite (pronuncia-se "vit")  uma ferramenta de build moderna para desenvolvimento web, criada por Evan You (criador do Vue.js). Vite oferece uma experincia de desenvolvimento significativamente mais rpida que ferramentas tradicionais como Create React App.

#### Vantagens do Vite:

*   **Inicializao Instantnea:** No precisa empacotar toda a aplicao para iniciar o servidor de desenvolvimento.
*   **Hot Module Replacement (HMR) Ultrarrpido:** Atualizaes so refletidas instantaneamente no navegador.
*   **Otimizado para Produo:** Usa Rollup para builds de produo altamente otimizados.
*   **Suporte Nativo para TypeScript:** No requer configurao adicional para usar TypeScript.
*   **Configurao Simples:** Menos complexidade comparado a ferramentas como Webpack.

### Configurando o Ambiente de Desenvolvimento

Vamos configurar um ambiente de desenvolvimento React com TypeScript usando Vite no Windows 10.

#### Pr-requisitos:

1.  **Node.js:** Baixe e instale a verso LTS mais recente do [site oficial](https://nodejs.org/).
2.  **Visual Studio Code:** Baixe e instale o [VS Code](https://code.visualstudio.com/).
3.  **Extenses recomendadas para VS Code:**
    *   ESLint
    *   Prettier
    *   ES7+ React/Redux/React-Native snippets
    *   TypeScript React code snippets

#### Criando um Projeto React com TypeScript usando Vite:

Abra o terminal (PowerShell ou CMD) e execute os seguintes comandos:

\`\`\`bash
# Crie um novo projeto Vite com template React + TypeScript
npm create vite@latest meu-app-react -- --template react-ts

# Navegue at a pasta do projeto
cd meu-app-react

# Instale as dependncias
npm install

# Inicie o servidor de desenvolvimento
npm run dev
\`\`\`

Aps executar esses comandos, o Vite iniciar um servidor de desenvolvimento e voc poder acessar sua aplicao em \`http://localhost:5173\` (ou outra porta, se a 5173 estiver ocupada).

#### Estrutura Bsica do Projeto:

\`\`\`
meu-app-react/
 node_modules/
 public/
    vite.svg
 src/
    assets/
       react.svg
    App.css
    App.tsx
    index.css
    main.tsx
    vite-env.d.ts
 .eslintrc.cjs
 .gitignore
 index.html
 package.json
 package-lock.json
 tsconfig.json
 tsconfig.node.json
 vite.config.ts
\`\`\`

### Entendendo os Arquivos Principais:

*   **main.tsx:** Ponto de entrada da aplicao, onde o React  inicializado.
*   **App.tsx:** Componente principal da aplicao.
*   **vite-env.d.ts:** Arquivo de declarao de tipos para o Vite.
*   **tsconfig.json:** Configurao do TypeScript.
*   **vite.config.ts:** Configurao do Vite.

### Exemplo Bsico de Componente React com TypeScript:

\`\`\`tsx
// src/App.tsx
import { useState } from 'react';
import './App.css';

// Definindo uma interface para as props do componente
interface BemVindoProps {
  nome: string;
  idade?: number; // O '?' indica que  opcional
}

// Componente funcional com tipagem de props
function BemVindo({ nome, idade }: BemVindoProps) {
  return (
    <div>
      <h1>Ol, {nome}!</h1>
      {idade !== undefined && <p>Voc tem {idade} anos.</p>}
    </div>
  );
}

// Componente principal App
function App() {
  // useState com tipagem
  const [contador, setContador] = useState<number>(0);

  return (
    <div className="App">
      <BemVindo nome="Maria" idade={25} />
      <BemVindo nome="Joo" />
      
      <div>
        <h2>Contador: {contador}</h2>
        <button onClick={() => setContador(contador + 1)}>
          Incrementar
        </button>
      </div>
    </div>
  );
}

export default App;
\`\`\`

### Prximos Passos

Agora que voc tem seu ambiente configurado e entende os conceitos bsicos, nos prximos captulos vamos explorar:

*   Componentes funcionais e props com TypeScript
*   Hooks do React com tipagem adequada
*   Gerenciamento de estado
*   Roteamento
*   Consumo de APIs
*   E muito mais!

Lembre-se de que a documentao oficial do React e TypeScript so excelentes recursos para consulta:

*   [Documentao do React](https://reactjs.org/docs/getting-started.html)
*   [TypeScript e React](https://www.typescriptlang.org/docs/handbook/react.html)
*   [Documentao do Vite](https://vitejs.dev/guide/)
`,ort=()=>g.jsx(qe,{content:rrt,backRoute:"/ts/projeto-typescript",backText:"Voltar: Projeto TypeScript",goRoute:"/react/fundamentos",goText:"Avanar: Fundamentos"}),art=`## 2. Fundamentos do React com TypeScript

Agora que temos nosso ambiente configurado, vamos mergulhar nos conceitos fundamentais do React com TypeScript. Entender bem esses blocos de construo  crucial para se tornar um desenvolvedor React proficiente.

### TSX: A Sintaxe do React com TypeScript

TSX  a verso TypeScript do JSX - uma extenso de sintaxe para TypeScript que se parece muito com HTML. Ele permite que voc escreva estruturas semelhantes a HTML diretamente no seu cdigo TypeScript. O React no exige o uso de TSX, mas a maioria dos desenvolvedores o considera til como um auxlio visual ao trabalhar com UI dentro do cdigo TypeScript. Alm disso, o React mostra mensagens de erro e aviso mais teis quando se usa TSX.

**Exemplo Bsico de TSX:**

\`\`\`tsx
const elemento: JSX.Element = <h1>Ol, Mundo!</h1>;
\`\`\`

Neste exemplo, \`<h1>Ol, Mundo!</h1>\` no  uma string nem HTML puro.  TSX. O TypeScript (com o compilador adequado) compila o TSX para chamadas de funo \`React.createElement()\`.

O exemplo acima seria transpilado para algo como:

\`\`\`typescript
const elemento: JSX.Element = React.createElement('h1', null, 'Ol, Mundo!');
\`\`\`

**Principais Caractersticas do TSX:**

*   **Expresses TypeScript em TSX:** Voc pode embutir qualquer expresso TypeScript vlida dentro do TSX usando chaves \`{}\`.
    \`\`\`tsx
    const nome: string = 'Usurio';
    const elemento: JSX.Element = <h1>Ol, {nome}!</h1>; // Renderiza: Ol, Usurio!

    function formatarNome(usuario: { primeiroNome: string; ultimoNome: string }): string {
      return usuario.primeiroNome + ' ' + usuario.ultimoNome;
    }

    const usuario = {
      primeiroNome: 'Fulano',
      ultimoNome: 'de Tal'
    };

    const elementoCompleto: JSX.Element = (
      <h1>
        Ol, {formatarNome(usuario)}!
      </h1>
    );
    \`\`\`
*   **Atributos TSX:** Voc pode usar atributos HTML padro, mas eles so escritos em \`camelCase\` (por exemplo, \`className\` em vez de \`class\`, \`tabIndex\` em vez de \`tabindex\`).
    \`\`\`tsx
    const elementoComClasse: JSX.Element = <div className="minha-classe">Contedo</div>;
    const imagem: JSX.Element = <img src={urlDaImagem} alt="Descrio da Imagem" />;
    \`\`\`
*   **TSX Deve Ter um nico Elemento Raiz:** Se voc quiser retornar mltiplos elementos, eles devem estar envolvidos por um nico elemento pai. Pode ser uma \`div\`, ou, para evitar adicionar ns desnecessrios ao DOM, voc pode usar Fragmentos (\`<React.Fragment>...</React.Fragment>\` ou a sintaxe curta \`<>...</>\`).
    \`\`\`tsx
    // Correto
    const elementosAgrupados: JSX.Element = (
      <>
        <h1>Ttulo</h1>
        <p>Pargrafo</p>
      </>
    );

    // Incorreto (causaria erro)
    // const elementosErrados = (
    //   <h1>Ttulo</h1>
    //   <p>Pargrafo</p>
    // );
    \`\`\`
*   **Tags Vazias Devem Ser Fechadas:** Assim como em XML, tags que no tm filhos devem ser auto-fechadas com \`/>\`.
    \`\`\`tsx
    const elementoInput: JSX.Element = <input type="text" />;
    const linhaHorizontal: JSX.Element = <hr />;
    \`\`\`

### Componentes: Blocos de Construo

Componentes so o corao do React. Eles permitem que voc divida a UI em pedaos independentes e reutilizveis. Pense neles como funes TypeScript que aceitam entradas tipadas (chamadas "props") e retornam elementos React descrevendo o que deve aparecer na tela.

Existem dois tipos principais de componentes no React moderno:

1.  **Componentes Funcionais (Functional Components):** So a forma preferida e mais moderna de escrever componentes, especialmente com o advento dos Hooks. So literalmente funes TypeScript.

    \`\`\`tsx
    // Definindo o tipo das props
    interface BemVindoProps {
      nome: string;
    }

    // Componente funcional com tipagem
    function BemVindo(props: BemVindoProps): JSX.Element {
      return <h1>Ol, {props.nome}!</h1>;
    }

    // Usando o componente
    const app = <BemVindo nome="Maria" />;
    \`\`\`

2.  **Componentes de Classe (Class Components):** Era a forma padro antes dos Hooks. Ainda so suportados, mas menos comuns em cdigo novo.

    \`\`\`tsx
    import React, { Component } from 'react';

    // Definindo interfaces para props e state
    interface BemVindoProps {
      nome: string;
    }

    interface BemVindoState {
      contador: number;
    }

    class BemVindo extends Component<BemVindoProps, BemVindoState> {
      // Inicializando o state
      state: BemVindoState = {
        contador: 0
      };

      render(): JSX.Element {
        return <h1>Ol, {this.props.nome}!</h1>;
      }
    }
    \`\`\`

### Props: Passando Dados com Tipagem

Props (abreviao de "propriedades") so a maneira de passar dados de um componente pai para um componente filho. Com TypeScript, podemos definir exatamente quais props um componente aceita e de que tipo elas so.

**Definindo Props com TypeScript:**

\`\`\`tsx
// Definindo uma interface para as props
interface PerfilUsuarioProps {
  nome: string;
  idade: number;
  email?: string; // O '?' indica que esta prop  opcional
  cargo: 'desenvolvedor' | 'designer' | 'gerente'; // Union type - s aceita esses valores
  onSalvar: (id: number) => void; // Tipo de funo
}

// Componente com props tipadas
function PerfilUsuario(props: PerfilUsuarioProps): JSX.Element {
  return (
    <div>
      <h2>{props.nome}</h2>
      <p>Idade: {props.idade}</p>
      {props.email && <p>Email: {props.email}</p>}
      <p>Cargo: {props.cargo}</p>
      <button onClick={() => props.onSalvar(1)}>Salvar</button>
    </div>
  );
}

// Usando o componente
function App(): JSX.Element {
  const handleSalvar = (id: number): void => {
    console.log(\`Salvando usurio \${id}\`);
  };

  return (
    <PerfilUsuario
      nome="Joo Silva"
      idade={28}
      cargo="desenvolvedor"
      onSalvar={handleSalvar}
    />
  );
}
\`\`\`

**Desestruturao de Props:**

Uma prtica comum  desestruturar as props diretamente nos parmetros da funo, o que torna o cdigo mais limpo:

\`\`\`tsx
function PerfilUsuario({ nome, idade, email, cargo, onSalvar }: PerfilUsuarioProps): JSX.Element {
  return (
    <div>
      <h2>{nome}</h2>
      <p>Idade: {idade}</p>
      {email && <p>Email: {email}</p>}
      <p>Cargo: {cargo}</p>
      <button onClick={() => onSalvar(1)}>Salvar</button>
    </div>
  );
}
\`\`\`

**Props para Crianas (Children):**

Para componentes que aceitam elementos filhos (children), voc pode usar o tipo \`React.ReactNode\`:

\`\`\`tsx
interface CardProps {
  titulo: string;
  children: React.ReactNode;
}

function Card({ titulo, children }: CardProps): JSX.Element {
  return (
    <div className="card">
      <h3>{titulo}</h3>
      <div className="card-content">
        {children}
      </div>
    </div>
  );
}

// Uso:
function App(): JSX.Element {
  return (
    <Card titulo="Informaes Importantes">
      <p>Este  o contedo do card.</p>
      <button>Clique Aqui</button>
    </Card>
  );
}
\`\`\`

### State: Gerenciando o Estado com \`useState\`

O Hook \`useState\` permite adicionar estado local a componentes funcionais. Com TypeScript, podemos definir o tipo do estado para maior segurana.

**Exemplo Bsico:**

\`\`\`tsx
import React, { useState } from 'react';

function Contador(): JSX.Element {
  // Especificando o tipo do estado como number
  const [contador, setContador] = useState<number>(0);

  return (
    <div>
      <p>Voc clicou {contador} vezes</p>
      <button onClick={() => setContador(contador + 1)}>
        Clique aqui
      </button>
    </div>
  );
}
\`\`\`

**Estado com Tipos Complexos:**

\`\`\`tsx
interface Usuario {
  id: number;
  nome: string;
  email: string;
  ativo: boolean;
}

function PerfilGerenciador(): JSX.Element {
  // Estado com tipo complexo
  const [usuario, setUsuario] = useState<Usuario | null>(null);
  // Estado com union type
  const [status, setStatus] = useState<'carregando' | 'sucesso' | 'erro'>('carregando');

  // Simulando carregamento de usurio
  const carregarUsuario = (): void => {
    setStatus('carregando');
    
    // Simulando uma chamada API
    setTimeout(() => {
      setUsuario({
        id: 1,
        nome: 'Ana Silva',
        email: 'ana@exemplo.com',
        ativo: true
      });
      setStatus('sucesso');
    }, 1500);
  };

  return (
    <div>
      {status === 'carregando' && <p>Carregando...</p>}
      {status === 'erro' && <p>Erro ao carregar usurio.</p>}
      {status === 'sucesso' && usuario && (
        <div>
          <h2>{usuario.nome}</h2>
          <p>Email: {usuario.email}</p>
          <p>Status: {usuario.ativo ? 'Ativo' : 'Inativo'}</p>
        </div>
      )}
      <button onClick={carregarUsuario}>
        {usuario ? 'Recarregar Usurio' : 'Carregar Usurio'}
      </button>
    </div>
  );
}
\`\`\`

### Eventos: Interagindo com o Usurio

Com TypeScript, podemos tipar corretamente os eventos do React para obter autocompletar e verificao de tipo.

**Exemplo de Manipulao de Eventos:**

\`\`\`tsx
import React, { useState, ChangeEvent, FormEvent } from 'react';

function Formulario(): JSX.Element {
  const [nome, setNome] = useState<string>('');
  const [email, setEmail] = useState<string>('');
  const [erro, setErro] = useState<string | null>(null);

  // Evento de mudana em input com tipo especfico
  const handleChangeNome = (e: ChangeEvent<HTMLInputElement>): void => {
    setNome(e.target.value);
  };

  const handleChangeEmail = (e: ChangeEvent<HTMLInputElement>): void => {
    setEmail(e.target.value);
    
    // Validao simples de email
    if (!e.target.value.includes('@')) {
      setErro('Email invlido');
    } else {
      setErro(null);
    }
  };

  // Evento de submisso de formulrio
  const handleSubmit = (e: FormEvent<HTMLFormElement>): void => {
    e.preventDefault();
    
    if (erro) {
      alert('Por favor, corrija os erros antes de enviar.');
      return;
    }
    
    alert(\`Nome: \${nome}, Email: \${email}\`);
    // Aqui voc normalmente enviaria os dados para um servidor
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label htmlFor="nome">Nome:</label>
        <input
          id="nome"
          type="text"
          value={nome}
          onChange={handleChangeNome}
          required
        />
      </div>
      
      <div>
        <label htmlFor="email">Email:</label>
        <input
          id="email"
          type="email"
          value={email}
          onChange={handleChangeEmail}
          required
        />
        {erro && <p style={{ color: 'red' }}>{erro}</p>}
      </div>
      
      <button type="submit">Enviar</button>
    </form>
  );
}
\`\`\`

**Tipos Comuns de Eventos React:**

- \`React.ChangeEvent<HTMLInputElement>\` - Para eventos de mudana em inputs
- \`React.FormEvent<HTMLFormElement>\` - Para eventos de submisso de formulrio
- \`React.MouseEvent<HTMLButtonElement>\` - Para eventos de clique em botes
- \`React.KeyboardEvent<HTMLInputElement>\` - Para eventos de teclado

### Renderizao Condicional

A renderizao condicional em React com TypeScript funciona da mesma forma que em JavaScript, mas com a vantagem da verificao de tipos.

**Principais Abordagens:**

*   **Operador Ternrio (\`? :\`):** til para escolher entre duas alternativas.

    \`\`\`tsx
    interface MensagemProps {
      isLogado: boolean;
    }

    function Mensagem({ isLogado }: MensagemProps): JSX.Element {
      return (
        <div>
          {isLogado 
            ? <h1>Bem-vindo de volta!</h1> 
            : <h1>Por favor, faa login.</h1>
          }
        </div>
      );
    }
    \`\`\`

*   **Operador Lgico \`&&\` (Curto-Circuito):** til quando voc quer renderizar algo *apenas se* uma condio for verdadeira, e nada caso contrrio.

    \`\`\`tsx
    interface CaixaDeEntradaProps {
      mensagensNaoLidas: string[];
    }

    function CaixaDeEntrada({ mensagensNaoLidas }: CaixaDeEntradaProps): JSX.Element {
      return (
        <div>
          <h1>Ol!</h1>
          {mensagensNaoLidas.length > 0 &&
            <h2>
              Voc tem {mensagensNaoLidas.length} mensagens no lidas.
            </h2>
          }
        </div>
      );
    }

    // Exemplo de uso:
    // <CaixaDeEntrada mensagensNaoLidas={['msg1', 'msg2']} /> // Renderiza o h2
    // <CaixaDeEntrada mensagensNaoLidas={[]} /> // No renderiza o h2
    \`\`\`

*   **Retornar \`null\` para No Renderizar Nada:** Em alguns casos, voc pode querer que um componente no renderize nada. Voc pode fazer isso retornando \`null\`.

    \`\`\`tsx
    interface AvisoProps {
      mostrarAviso: boolean;
    }

    function Aviso({ mostrarAviso }: AvisoProps): JSX.Element | null {
      if (!mostrarAviso) {
        return null; // No renderiza nada
      }

      return (
        <div className="aviso">
          Ateno!
        </div>
      );
    }
    \`\`\`

### Listas e Chaves

Voc frequentemente precisar renderizar listas de elementos. Em TypeScript, voc pode definir tipos para os itens da lista para maior segurana.

\`\`\`tsx
interface Numero {
  id: number;
  valor: number;
}

interface ListaDeNumerosProps {
  numeros: Numero[];
}

function ListaDeNumeros({ numeros }: ListaDeNumerosProps): JSX.Element {
  const itensDaLista = numeros.map((numero) =>
    <li key={numero.id.toString()}>{numero.valor}</li>
  );

  return (
    <ul>{itensDaLista}</ul>
  );
}

// Uso:
// const numeros: Numero[] = [
//   { id: 1, valor: 1 },
//   { id: 2, valor: 2 },
//   { id: 3, valor: 3 }
// ];
// <ListaDeNumeros numeros={numeros} />
\`\`\`

**A Prop \`key\`:**

Quando voc renderiza uma lista de elementos, o React precisa de uma forma de identificar unicamente cada item da lista para poder atualizar, adicionar ou remover itens de forma eficiente. Para isso, voc deve fornecer uma prop especial chamada \`key\` para cada item da lista.

*   **O que usar como \`key\`?** A \`key\` deve ser uma string nica entre os irmos da lista. Geralmente, voc usar IDs dos seus dados como \`key\`.

    \`\`\`tsx
    interface Tarefa {
      id: string;
      texto: string;
    }

    const tarefas: Tarefa[] = [
      { id: 'a', texto: 'Aprender React' },
      { id: 'b', texto: 'Criar um projeto' },
      { id: 'c', texto: 'Conseguir um emprego' }
    ];

    const itensDeTarefa = tarefas.map((tarefa) =>
      <li key={tarefa.id}>
        {tarefa.texto}
      </li>
    );
    \`\`\`

*   **Quando no usar o ndice do array como \`key\`:** Usar o ndice do array como \`key\` (\`map((item, index) => <li key={index}>...</li>)\`)  geralmente desencorajado se a ordem dos itens pode mudar. Isso pode levar a problemas de performance e bugs com o estado dos componentes, pois o React usar a \`key\` para identificar o item, e se a ordem muda, a \`key\` (ndice) pode acabar se referindo a um item diferente do que antes.
    *    seguro usar o ndice como \`key\` se a lista for esttica e nunca for reordenada, ou se os itens no tiverem estado interno.

**Onde colocar a \`key\`?** As \`keys\` devem ser especificadas dentro do array que est sendo mapeado, no elemento que est sendo retornado diretamente pela funo \`map()\`.

\`\`\`tsx
import React from 'react';

interface Item {
  id: number;
  valor: string;
}

interface ItemDaListaProps {
  valor: string;
}

// Componente para um item individual da lista
function ItemDaLista({ valor }: ItemDaListaProps): JSX.Element {
  // A key deve ser colocada no elemento <ItemDaLista />, no aqui dentro.
  return <li>{valor}</li>;
}

interface MinhaListaProps {
  itens: Item[];
}

function MinhaLista({ itens }: MinhaListaProps): JSX.Element {
  const elementosDaLista = itens.map((item) =>
    // Correto: key no elemento retornado pelo map
    <ItemDaLista key={item.id} valor={item.valor} />
  );
  return <ul>{elementosDaLista}</ul>;
}
\`\`\`

Dominar esses fundamentos  o primeiro grande passo para se tornar um desenvolvedor React com TypeScript. Pratique cada um desses conceitos criando pequenos componentes e experimentando com eles!
`,srt=()=>g.jsx(qe,{content:art,backRoute:"/react/introducao",backText:"Voltar: Introduo",goRoute:"/react/hooks",goText:"Avanar: Hooks Essenciais"}),irt=`## 3. Hooks Essenciais do React com TypeScript

Os Hooks so uma adio relativamente nova ao React (introduzidos na verso 16.8) que permitem que voc use estado e outros recursos do React sem escrever uma classe. Eles revolucionaram a forma como os componentes funcionais so escritos, tornando-os mais poderosos e fceis de gerenciar. Com TypeScript, os Hooks ganham ainda mais poder atravs da tipagem esttica.

### \`useState\`: Gerenciando Estado com Tipagem

J introduzimos o \`useState\` na seo de Fundamentos, mas vamos revisitar e aprofundar um pouco, agora com foco na tipagem.

*   **Propsito:** Adicionar estado local a componentes funcionais.
*   **Sintaxe:** \`const [estado, setEstado] = useState<TipoDoEstado>(valorInicial);\`
    *   Retorna um array com dois elementos: o valor atual do estado e uma funo para atualiz-lo.
    *   \`valorInicial\`  o valor que o estado ter na primeira renderizao. Pode ser um valor direto ou uma funo que retorna o valor inicial (til para clculos iniciais caros).

**Exemplo Detalhado:**

\`\`\`tsx
import React, { useState } from 'react';

function FormularioSimples(): JSX.Element {
  // Estado para o valor do input de texto
  const [nome, setNome] = useState<string>('');
  // Estado para controlar se o formulrio foi submetido
  const [submetido, setSubmetido] = useState<boolean>(false);

  const handleChangeNome = (evento: React.ChangeEvent<HTMLInputElement>): void => {
    setNome(evento.target.value);
    if (submetido) {
      setSubmetido(false); 
    }
  };

  const handleSubmit = (evento: React.FormEvent<HTMLFormElement>): void => {
    evento.preventDefault();
    setSubmetido(true);
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label htmlFor="nome">Nome:</label>
        <input
          id="nome"
          type="text"
          value={nome}
          onChange={handleChangeNome}
        />
      </div>
      <button type="submit">Enviar</button>
      {submetido && <p>Obrigado por submeter, {nome}!</p>}
    </form>
  );
}

export default FormularioSimples;
\`\`\`

**Mltiplas Variveis de Estado:** Voc pode usar \`useState\` vrias vezes em um nico componente para diferentes pedaos de estado.

**Atualizando Estado Baseado no Estado Anterior:** Se o novo estado depende do valor anterior, use a forma funcional de \`setEstado\` para garantir que voc est trabalhando com o valor mais recente.

\`\`\`tsx
// Exemplo de contador, forma segura de incrementar
const [contador, setContador] = useState<number>(0);

const incrementar = (): void => {
  setContador(prevContador => prevContador + 1);
};
\`\`\`

**Tipando Estados Complexos:**

\`\`\`tsx
// Definindo uma interface para o estado
interface Usuario {
  id: number;
  nome: string;
  email: string;
  perfis: string[];
}

// Usando a interface com useState
const [usuario, setUsuario] = useState<Usuario | null>(null);

// Para objetos com propriedades opcionais
interface Formulario {
  nome: string;
  email: string;
  telefone?: string; // Propriedade opcional
  preferencias: {
    receberEmails: boolean;
    tema: 'claro' | 'escuro'; // Union type
  };
}

const [formulario, setFormulario] = useState<Formulario>({
  nome: '',
  email: '',
  preferencias: {
    receberEmails: true,
    tema: 'claro'
  }
});

// Atualizando estado complexo de forma imutvel
const atualizarNome = (novoNome: string): void => {
  setFormulario(prev => ({
    ...prev,
    nome: novoNome
  }));
};

const alternarTema = (): void => {
  setFormulario(prev => ({
    ...prev,
    preferencias: {
      ...prev.preferencias,
      tema: prev.preferencias.tema === 'claro' ? 'escuro' : 'claro'
    }
  }));
};
\`\`\`

### \`useEffect\`: Lidando com Efeitos Colaterais

O Hook \`useEffect\` permite que voc execute "efeitos colaterais" (side effects) em componentes funcionais. Efeitos colaterais so operaes que acontecem fora do fluxo normal de renderizao, como:

*   Busca de dados (data fetching) de APIs.
*   Inscries (subscriptions) a eventos.
*   Manipulao manual do DOM (embora deva ser evitada o mximo possvel em React).
*   Configurao de timers (setTimeout, setInterval).

*   **Sintaxe:** \`useEffect(() => { /* seu efeito aqui */ }, [arrayDeDependencias]);\`
    *   O primeiro argumento  uma funo que contm a lgica do efeito.
    *   O segundo argumento (opcional)  um array de dependncias. O React s re-executar o efeito se algum valor nesse array mudar entre as renderizaes.

**Comportamento do Array de Dependncias:**

1.  **Sem array de dependncias (omitido):** O efeito roda *aps cada renderizao* do componente. Use com cuidado, pois pode levar a loops infinitos se o efeito tambm causar uma re-renderizao.
    \`\`\`tsx
    useEffect(() => {
      console.log('Componente renderizou ou atualizou');
      // CUIDADO: Se este efeito mudar um estado que causa re-renderizao, pode criar um loop.
    });
    \`\`\`

2.  **Array de dependncias vazio (\`[]\`):** O efeito roda *apenas uma vez*, aps a primeira renderizao (montagem do componente).  ideal para buscar dados iniciais ou configurar inscries que no dependem de props ou estado.
    \`\`\`tsx
    useEffect(() => {
      console.log('Componente montou! Buscando dados...');
      // fetch('/api/dados').then(...);
    }, []); // Array vazio significa: rodar apenas na montagem
    \`\`\`

3.  **Array com dependncias (\`[prop1, estado1]\`):** O efeito roda aps a primeira renderizao e sempre que *qualquer uma* das dependncias listadas mudar de valor.
    \`\`\`tsx
    const [userId, setUserId] = useState<number>(1);

    useEffect(() => {
      console.log(\`Buscando dados para o usurio \${userId}\`);
      // fetch(\`/api/usuarios/\${userId}\`).then(...);
    }, [userId]); // Roda quando userId muda
    \`\`\`

**Funo de Limpeza (Cleanup Function):**

Alguns efeitos precisam ser "limpos" quando o componente  desmontado ou antes que o efeito seja re-executado. Por exemplo, remover event listeners, cancelar timers ou fechar conexes de websocket.

Para isso, a funo passada para \`useEffect\` pode retornar outra funo. Essa funo de retorno ser executada pelo React antes de desmontar o componente ou antes de re-executar o efeito devido a uma mudana nas dependncias.

\`\`\`tsx
useEffect(() => {
  const timerId = setInterval(() => {
    console.log('Tick');
  }, 1000);

  // Funo de limpeza
  return () => {
    console.log('Limpando o intervalo...');
    clearInterval(timerId);
  };
}, []); // Roda na montagem, limpa na desmontagem
\`\`\`

**Exemplo: Buscando Dados com \`useEffect\` e TypeScript**

\`\`\`tsx
import React, { useState, useEffect } from 'react';

// Definindo a interface para os dados do usurio
interface Usuario {
  id: number;
  name: string;
  email: string;
  phone: string;
}

interface PerfilUsuarioProps {
  idUsuario: number;
}

function PerfilUsuario({ idUsuario }: PerfilUsuarioProps): JSX.Element {
  const [usuario, setUsuario] = useState<Usuario | null>(null);
  const [carregando, setCarregando] = useState<boolean>(true);
  const [erro, setErro] = useState<string | null>(null);

  useEffect(() => {
    // Funo assncrona para buscar dados
    const buscarDados = async (): Promise<void> => {
      try {
        setCarregando(true);
        setErro(null);
        
        const response = await fetch(\`https://jsonplaceholder.typicode.com/users/\${idUsuario}\`);
        
        if (!response.ok) {
          throw new Error('Falha ao buscar dados do usurio');
        }
        
        const dados: Usuario = await response.json();
        setUsuario(dados);
      } catch (error) {
        setErro(error instanceof Error ? error.message : 'Erro desconhecido');
      } finally {
        setCarregando(false);
      }
    };

    buscarDados();

    // Se idUsuario pudesse mudar e quisssemos cancelar a requisio anterior,
    // poderamos usar AbortController
    return () => {
      // Limpeza se necessrio
    };
  }, [idUsuario]); // Re-executa se idUsuario mudar

  if (carregando) return <p>Carregando perfil...</p>;
  if (erro) return <p>Erro: {erro}</p>;
  if (!usuario) return <p>Nenhum usurio encontrado.</p>;

  return (
    <div>
      <h1>{usuario.name}</h1>
      <p>Email: {usuario.email}</p>
      <p>Telefone: {usuario.phone}</p>
    </div>
  );
}

export default PerfilUsuario;
\`\`\`

### \`useContext\`: Compartilhando Estado Globalmente

O Hook \`useContext\` permite que voc acesse o valor de um Contexto React. Contexto fornece uma maneira de passar dados atravs da rvore de componentes sem ter que passar props manualmente em cada nvel (evitando o "prop drilling").

 til para dados que podem ser considerados "globais" para uma rvore de componentes React, como o usurio autenticado atual, tema (claro/escuro) ou configuraes de idioma.

**Como Usar \`useContext\` com TypeScript:**

1.  **Criar um Contexto com Tipo:**
    \`\`\`tsx
    // temaContext.ts
    import React, { createContext } from 'react';

    // Definindo a interface para o valor do contexto
    export interface TemaContextType {
      tema: 'claro' | 'escuro';
      alternarTema: () => void;
    }

    // Valor padro com tipagem
    const valorPadrao: TemaContextType = {
      tema: 'claro',
      alternarTema: () => {} // Funo vazia como padro
    };

    // Cria um contexto com o valor padro tipado
    const TemaContext = createContext<TemaContextType>(valorPadrao);

    export default TemaContext;
    \`\`\`

2.  **Prover o Contexto:**
    \`\`\`tsx
    // App.tsx
    import React, { useState } from 'react';
    import TemaContext, { TemaContextType } from './temaContext';
    import Painel from './Painel';

    function App(): JSX.Element {
      const [tema, setTema] = useState<'claro' | 'escuro'>('claro');

      const alternarTema = (): void => {
        setTema(temaAtual => (temaAtual === 'claro' ? 'escuro' : 'claro'));
      };

      // Criando o valor do contexto
      const valorContexto: TemaContextType = {
        tema,
        alternarTema
      };

      return (
        <TemaContext.Provider value={valorContexto}>
          <div>
            <h1>App com Contexto de Tema</h1>
            <Painel />
            <button onClick={alternarTema}>Alternar Tema</button>
          </div>
        </TemaContext.Provider>
      );
    }

    export default App;
    \`\`\`

3.  **Consumir o Contexto:**
    \`\`\`tsx
    // Painel.tsx
    import React, { useContext } from 'react';
    import TemaContext, { TemaContextType } from './temaContext';

    function Painel(): JSX.Element {
      // useContext com o tipo correto
      const { tema, alternarTema } = useContext<TemaContextType>(TemaContext);

      const estiloPainel: React.CSSProperties = {
        backgroundColor: tema === 'claro' ? '#eee' : '#333',
        color: tema === 'claro' ? '#333' : '#eee',
        padding: '20px',
        margin: '20px 0'
      };

      return (
        <div style={estiloPainel}>
          <p>O tema atual : {tema}</p>
          <p>Este painel usa o tema do contexto.</p>
          <button onClick={alternarTema}>Alternar Tema (do Painel)</button>
        </div>
      );
    }

    export default Painel;
    \`\`\`

**Quando Usar Contexto:**

*   Para dados que precisam ser acessados por muitos componentes em diferentes nveis de aninhamento.
*   Evite us-lo para tudo. Para estados que so locais a um componente ou a uma pequena subrvore, \`useState\` ou passagem de props ainda so mais apropriados.
*   Contexto no  otimizado para atualizaes de alta frequncia. Se o valor do contexto muda frequentemente, todos os componentes que consomem esse contexto sero re-renderizados. Para gerenciamento de estado global mais complexo e otimizado, bibliotecas como Redux ou Zustand podem ser mais adequadas (veremos uma viso geral delas mais tarde).

### Outros Hooks teis (\`useRef\`, \`useMemo\`, \`useCallback\`)

Alm de \`useState\`, \`useEffect\` e \`useContext\`, existem outros Hooks embutidos que so muito teis em cenrios especficos:

*   **\`useRef\`:**
    *   **Propsito Principal 1: Acessar Elementos DOM Diretamente.** Permite criar uma referncia a um elemento DOM ou a um componente React.
        \`\`\`tsx
        import React, { useRef, useEffect } from 'react';

        function CampoDeFoco(): JSX.Element {
          // Tipando a referncia para um elemento input
          const inputRef = useRef<HTMLInputElement>(null);

          useEffect(() => {
            // Foca o input quando o componente monta
            // O operador '?' garante que s acessamos .focus() se inputRef.current no for null
            inputRef.current?.focus();
          }, []);

          return <input ref={inputRef} type="text" />;
        }
        \`\`\`
    *   **Propsito Principal 2: Manter Valores Mutveis que No Causam Re-renderizao.** \`useRef\` retorna um objeto mutvel com uma propriedade \`.current\`. Alterar \`.current\` no dispara uma nova renderizao. Isso  til para armazenar valores que voc quer persistir entre renderizaes sem causar o ciclo de vida de atualizao (ex: IDs de timers, conexes de socket).
        \`\`\`tsx
        import React, { useRef, useState, useEffect } from 'react';

        function Cronometro(): JSX.Element {
          const [segundos, setSegundos] = useState<number>(0);
          // Tipando a referncia para um NodeJS.Timeout
          const intervalRef = useRef<NodeJS.Timeout | null>(null);

          useEffect(() => {
            intervalRef.current = setInterval(() => {
              setSegundos(s => s + 1);
            }, 1000);

            return () => {
              // Verificao de segurana antes de limpar
              if (intervalRef.current) {
                clearInterval(intervalRef.current);
              }
            };
          }, []);

          const pararCronometro = (): void => {
            if (intervalRef.current) {
              clearInterval(intervalRef.current);
              intervalRef.current = null;
            }
          };

          return (
            <div>
              <p>Segundos: {segundos}</p>
              <button onClick={pararCronometro}>Parar</button>
            </div>
          );
        }
        \`\`\`

*   **\`useMemo\`:**
    *   **Propsito:** Memorizar (cachear) o resultado de um clculo caro para que ele no seja re-executado em cada renderizao, a menos que suas dependncias mudem.
    *   **Sintaxe:** \`const valorMemorizado = useMemo<TipoRetorno>(() => calcularValor(a, b), [a, b]);\`
    *   A funo \`calcularValor(a, b)\` s ser re-executada se \`a\` ou \`b\` mudarem.
    *   til para otimizar performance quando voc tem clculos que consomem muito processamento dentro de um componente que renderiza frequentemente.

    \`\`\`tsx
    import React, { useState, useMemo } from 'react';

    function CalculoPesadoComponente({ numero }: { numero: number }): JSX.Element {
      const calcularFatorial = (n: number): number => {
        console.log('Calculando fatorial de', n);
        if (n <= 1) return 1;
        let resultado = 1;
        for (let i = 2; i <= n; i++) {
          resultado *= i;
        }
        return resultado;
      };

      // Memoriza o resultado do fatorial com tipo explcito
      // S recalcula se 'numero' mudar
      const fatorial = useMemo<number>(() => calcularFatorial(numero), [numero]);

      const [contador, setContador] = useState<number>(0);

      return (
        <div>
          <p>Fatorial de {numero}  {fatorial}</p>
          <p>Contador (apenas para forar re-render): {contador}</p>
          <button onClick={() => setContador(c => c + 1)}>Incrementar Contador</button>
        </div>
      );
    }
    // Se voc clicar em "Incrementar Contador", o fatorial no ser recalculado
    // a menos que a prop 'numero' tambm mude.
    \`\`\`

*   **\`useCallback\`:**
    *   **Propsito:** Memorizar uma *funo* para que ela no seja recriada em cada renderizao, a menos que suas dependncias mudem.
    *   **Sintaxe:** \`const funcaoMemorizada = useCallback<(arg: TipoArg) => TipoRetorno>((arg) => { fazerAlgo(arg); }, [dependencias]);\`
    *    particularmente til quando voc passa callbacks para componentes filhos otimizados (que usam \`React.memo\` ou \`shouldComponentUpdate\`) que dependem da igualdade referencial para evitar re-renderizaes desnecessrias.

    \`\`\`tsx
    import React, { useState, useCallback } from 'react';

    // Definindo o tipo das props do boto
    interface BotaoProps {
      onClick: () => void;
      texto: string;
    }

    // Suponha que Botao seja um componente otimizado com React.memo
    const Botao = React.memo(({ onClick, texto }: BotaoProps): JSX.Element => {
      console.log('Boto renderizou:', texto);
      return <button onClick={onClick}>{texto}</button>;
    });

    function ContadorComCallback(): JSX.Element {
      const [contador1, setContador1] = useState<number>(0);
      const [contador2, setContador2] = useState<number>(0);

      // Sem useCallback, esta funo seria recriada em cada renderizao,
      // fazendo com que o Botao para contador1 re-renderizasse desnecessariamente
      // quando apenas contador2 mudasse.
      const incrementarContador1 = useCallback((): void => {
        setContador1(c => c + 1);
      }, []); // Dependncia vazia, a funo nunca muda

      const incrementarContador2 = useCallback((): void => {
        setContador2(c => c + 1);
      }, []);

      return (
        <div>
          <p>Contador 1: {contador1}</p>
          <Botao onClick={incrementarContador1} texto="Incrementar Contador 1" />
          <p>Contador 2: {contador2}</p>
          <Botao onClick={incrementarContador2} texto="Incrementar Contador 2" />
        </div>
      );
    }
    \`\`\`
    **\`useMemo\` vs \`useCallback\`:**
    *   \`useMemo\` retorna um *valor* memorizado.
    *   \`useCallback\` retorna uma *funo* memorizada. \`useCallback(fn, deps)\`  equivalente a \`useMemo(() => fn, deps)\`.

### Criando Seus Prprios Hooks (Custom Hooks)

Custom Hooks so uma conveno poderosa que permite extrair lgica de componentes reutilizvel em funes TypeScript.

*   **Conveno de Nomenclatura:** Nomes de Custom Hooks devem comear com \`use\` (ex: \`useFormInput\`, \`useFetchData\`).
*   **O que eles so:** So funes TypeScript que podem chamar outros Hooks (como \`useState\`, \`useEffect\`, etc.).
*   **Por que us-los?**
    *   **Reutilizao de Lgica:** Evita duplicao de cdigo entre componentes.
    *   **Abstrao:** Esconde a complexidade da lgica de estado ou efeitos colaterais.
    *   **Organizao:** Mantm os componentes mais limpos e focados na UI.

**Exemplo: Um Custom Hook \`useFormInput\` com TypeScript**

\`\`\`tsx
import { useState, ChangeEvent } from 'react';

// Definindo o tipo de retorno do hook
interface UseFormInputReturn {
  valor: string;
  onChange: (e: ChangeEvent<HTMLInputElement>) => void;
  reset: () => void;
}

function useFormInput(valorInicial: string): UseFormInputReturn {
  const [valor, setValor] = useState<string>(valorInicial);

  function handleChange(evento: ChangeEvent<HTMLInputElement>): void {
    setValor(evento.target.value);
  }

  function reset(): void {
    setValor(valorInicial);
  }

  return {
    valor,
    onChange: handleChange,
    reset
  };
}

// Como usar no componente:
function MeuFormularioCustomHook(): JSX.Element {
  const nomeInput = useFormInput('');
  const emailInput = useFormInput('');

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>): void => {
    e.preventDefault();
    alert(\`Nome: \${nomeInput.valor}, Email: \${emailInput.valor}\`);
    
    // Resetando os campos aps o envio
    nomeInput.reset();
    emailInput.reset();
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label htmlFor="nome">Nome: </label>
        <input id="nome" type="text" {...nomeInput} />
      </div>
      <div>
        <label htmlFor="email">Email: </label>
        <input id="email" type="email" {...emailInput} />
      </div>
      <button type="submit">Enviar</button>
    </form>
  );
}
\`\`\`

**Exemplo: Custom Hook para Buscar Dados**

\`\`\`tsx
import { useState, useEffect } from 'react';

// Definindo tipos genricos para o hook
interface UseFetchState<T> {
  data: T | null;
  loading: boolean;
  error: Error | null;
}

// Hook genrico que pode buscar qualquer tipo de dados
function useFetch<T>(url: string): UseFetchState<T> {
  const [state, setState] = useState<UseFetchState<T>>({
    data: null,
    loading: true,
    error: null
  });

  useEffect(() => {
    const abortController = new AbortController();
    const signal = abortController.signal;

    const fetchData = async (): Promise<void> => {
      setState(prev => ({ ...prev, loading: true }));
      
      try {
        const response = await fetch(url, { signal });
        if (!response.ok) {
          throw new Error(\`HTTP error! status: \${response.status}\`);
        }
        
        const data = await response.json();
        setState({ data, loading: false, error: null });
      } catch (error) {
        if (error.name === 'AbortError') {
          console.log('Fetch abortado');
        } else {
          setState({ data: null, loading: false, error: error instanceof Error ? error : new Error(String(error)) });
        }
      }
    };

    fetchData();

    return () => {
      abortController.abort();
    };
  }, [url]);

  return state;
}

// Uso do hook com interface especfica
interface Post {
  id: number;
  title: string;
  body: string;
  userId: number;
}

function PostComponent(): JSX.Element {
  const { data, loading, error } = useFetch<Post[]>('https://jsonplaceholder.typicode.com/posts');

  if (loading) return <p>Carregando posts...</p>;
  if (error) return <p>Erro: {error.message}</p>;
  if (!data) return <p>Nenhum dado encontrado</p>;

  return (
    <div>
      <h1>Posts</h1>
      <ul>
        {data.map(post => (
          <li key={post.id}>
            <h3>{post.title}</h3>
            <p>{post.body}</p>
          </li>
        ))}
      </ul>
    </div>
  );
}
\`\`\`

Dominar esses Hooks essenciais e entender como criar seus prprios Custom Hooks com TypeScript  fundamental para escrever cdigo React moderno, eficiente, reutilizvel e com segurana de tipos.
`,lrt=()=>g.jsx(qe,{content:irt,backRoute:"/react/fundamentos",backText:"Voltar: Fundamentos",goRoute:"/react/roteamento",goText:"Avanar: Roteamento"}),crt=`## 4. Roteamento com React Router e TypeScript

O roteamento  uma parte essencial de aplicaes web modernas, permitindo a navegao entre diferentes "pginas" sem recarregar o navegador. No ecossistema React, a biblioteca mais popular para gerenciar rotas  o React Router.

### Introduo ao React Router

React Router  uma biblioteca de roteamento completa para React que permite "renderizao condicional" baseada na URL atual do navegador. Ela fornece componentes para navegar entre diferentes partes da sua aplicao, mantendo a interface sincronizada com a URL.

### Instalao

Para comear a usar o React Router com TypeScript em um projeto Vite, instale o pacote:

\`\`\`bash
npm install react-router-dom @types/react-router-dom
\`\`\`

### Configurao Bsica

Vamos configurar um roteamento bsico para uma aplicao:

\`\`\`tsx
// src/main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>
);
\`\`\`

\`\`\`tsx
// src/App.tsx
import { Routes, Route } from 'react-router-dom';
import Home from './pages/Home';
import Sobre from './pages/Sobre';
import Contato from './pages/Contato';
import NotFound from './pages/NotFound';
import Layout from './components/Layout';

function App(): JSX.Element {
  return (
    <Routes>
      <Route path="/" element={<Layout />}>
        <Route index element={<Home />} />
        <Route path="sobre" element={<Sobre />} />
        <Route path="contato" element={<Contato />} />
        <Route path="*" element={<NotFound />} />
      </Route>
    </Routes>
  );
}

export default App;
\`\`\`

\`\`\`tsx
// src/components/Layout.tsx
import { Outlet, Link } from 'react-router-dom';

function Layout(): JSX.Element {
  return (
    <div>
      <header>
        <nav>
          <ul>
            <li><Link to="/">Home</Link></li>
            <li><Link to="/sobre">Sobre</Link></li>
            <li><Link to="/contato">Contato</Link></li>
          </ul>
        </nav>
      </header>
      
      <main>
        <Outlet />
      </main>
      
      <footer>
        <p> 2025 Minha Aplicao React</p>
      </footer>
    </div>
  );
}

export default Layout;
\`\`\`

\`\`\`tsx
// src/pages/Home.tsx
function Home(): JSX.Element {
  return (
    <div>
      <h1>Pgina Inicial</h1>
      <p>Bem-vindo  nossa aplicao React!</p>
    </div>
  );
}

export default Home;
\`\`\`

\`\`\`tsx
// src/pages/Sobre.tsx
function Sobre(): JSX.Element {
  return (
    <div>
      <h1>Sobre Ns</h1>
      <p>Esta  uma aplicao de exemplo usando React Router com TypeScript.</p>
    </div>
  );
}

export default Sobre;
\`\`\`

\`\`\`tsx
// src/pages/Contato.tsx
function Contato(): JSX.Element {
  return (
    <div>
      <h1>Contato</h1>
      <p>Entre em contato conosco pelo email: exemplo@email.com</p>
    </div>
  );
}

export default Contato;
\`\`\`

\`\`\`tsx
// src/pages/NotFound.tsx
function NotFound(): JSX.Element {
  return (
    <div>
      <h1>404 - Pgina No Encontrada</h1>
      <p>A pgina que voc est procurando no existe.</p>
    </div>
  );
}

export default NotFound;
\`\`\`

### Componentes Principais do React Router

#### \`BrowserRouter\`

Envolve sua aplicao e cria um roteador que usa a API de histrico do navegador para manter a UI sincronizada com a URL.

\`\`\`tsx
import { BrowserRouter } from 'react-router-dom';

// No seu arquivo de entrada (main.tsx)
<BrowserRouter>
  <App />
</BrowserRouter>
\`\`\`

#### \`Routes\` e \`Route\`

\`Routes\`  um container para todas as suas rotas, e \`Route\` define uma rota individual.

\`\`\`tsx
import { Routes, Route } from 'react-router-dom';

<Routes>
  <Route path="/" element={<Home />} />
  <Route path="/sobre" element={<Sobre />} />
</Routes>
\`\`\`

#### \`Link\` e \`NavLink\`

Componentes para criar links de navegao.

\`\`\`tsx
import { Link, NavLink } from 'react-router-dom';

// Link bsico
<Link to="/sobre">Sobre</Link>

// NavLink - adiciona classe 'active' quando a rota est ativa
<NavLink 
  to="/sobre"
  className={({ isActive }) => isActive ? 'link-ativo' : ''}
>
  Sobre
</NavLink>
\`\`\`

#### \`Outlet\`

Renderiza o componente filho da rota atual.

\`\`\`tsx
import { Outlet } from 'react-router-dom';

// No seu componente de layout
function Layout(): JSX.Element {
  return (
    <div>
      <nav>{/* ... */}</nav>
      <main>
        <Outlet /> {/* Aqui ser renderizado o componente da rota atual */}
      </main>
      <footer>{/* ... */}</footer>
    </div>
  );
}
\`\`\`

### Rotas com Parmetros

Voc pode definir rotas com parmetros dinmicos:

\`\`\`tsx
// src/App.tsx
<Routes>
  {/* ... outras rotas ... */}
  <Route path="/produtos/:id" element={<DetalhesProduto />} />
</Routes>
\`\`\`

\`\`\`tsx
// src/pages/DetalhesProduto.tsx
import { useParams } from 'react-router-dom';

// Definindo o tipo dos parmetros
interface ProdutoParams {
  id: string;
}

function DetalhesProduto(): JSX.Element {
  // useParams com tipagem
  const { id } = useParams<keyof ProdutoParams>() as ProdutoParams;
  
  return (
    <div>
      <h1>Detalhes do Produto</h1>
      <p>Voc est visualizando o produto com ID: {id}</p>
    </div>
  );
}

export default DetalhesProduto;
\`\`\`

### Navegao Programtica

Para navegar programaticamente (por exemplo, aps um envio de formulrio), use o hook \`useNavigate\`:

\`\`\`tsx
// src/pages/Login.tsx
import { useState, FormEvent } from 'react';
import { useNavigate } from 'react-router-dom';

function Login(): JSX.Element {
  const [username, setUsername] = useState<string>('');
  const [password, setPassword] = useState<string>('');
  const navigate = useNavigate();

  const handleSubmit = (e: FormEvent<HTMLFormElement>): void => {
    e.preventDefault();
    
    // Lgica de autenticao aqui...
    // Se autenticao bem-sucedida:
    navigate('/dashboard'); // Redireciona para o dashboard
  };

  return (
    <div>
      <h1>Login</h1>
      <form onSubmit={handleSubmit}>
        <div>
          <label htmlFor="username">Usurio:</label>
          <input
            id="username"
            type="text"
            value={username}
            onChange={(e) => setUsername(e.target.value)}
            required
          />
        </div>
        <div>
          <label htmlFor="password">Senha:</label>
          <input
            id="password"
            type="password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            required
          />
        </div>
        <button type="submit">Entrar</button>
      </form>
    </div>
  );
}

export default Login;
\`\`\`

### Rotas Protegidas

Para criar rotas que s so acessveis a usurios autenticados:

\`\`\`tsx
// src/components/RotaProtegida.tsx
import { Navigate, Outlet, useLocation } from 'react-router-dom';

interface RotaProtegidaProps {
  isAuthenticated: boolean;
  redirectPath?: string;
}

function RotaProtegida({ 
  isAuthenticated, 
  redirectPath = '/login' 
}: RotaProtegidaProps): JSX.Element {
  const location = useLocation();

  if (!isAuthenticated) {
    // Redireciona para o login, mas salva a localizao atual
    // para poder voltar depois de autenticar
    return <Navigate to={redirectPath} state={{ from: location }} replace />;
  }

  return <Outlet />;
}

export default RotaProtegida;
\`\`\`

\`\`\`tsx
// src/App.tsx
import { useState } from 'react';
import { Routes, Route } from 'react-router-dom';
import Home from './pages/Home';
import Login from './pages/Login';
import Dashboard from './pages/Dashboard';
import Perfil from './pages/Perfil';
import NotFound from './pages/NotFound';
import Layout from './components/Layout';
import RotaProtegida from './components/RotaProtegida';

function App(): JSX.Element {
  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);

  // Funo para autenticar o usurio (seria chamada no componente Login)
  const login = (): void => {
    setIsAuthenticated(true);
  };

  return (
    <Routes>
      <Route path="/" element={<Layout />}>
        <Route index element={<Home />} />
        <Route path="login" element={<Login onLogin={login} />} />
        
        {/* Rotas protegidas */}
        <Route 
          element={<RotaProtegida isAuthenticated={isAuthenticated} />}
        >
          <Route path="dashboard" element={<Dashboard />} />
          <Route path="perfil" element={<Perfil />} />
        </Route>
        
        <Route path="*" element={<NotFound />} />
      </Route>
    </Routes>
  );
}

export default App;
\`\`\`

### Carregamento Lazy (Code Splitting)

Para melhorar a performance, voc pode carregar componentes de forma lazy, dividindo seu cdigo em chunks menores:

\`\`\`tsx
// src/App.tsx
import { lazy, Suspense } from 'react';
import { Routes, Route } from 'react-router-dom';
import Layout from './components/Layout';

// Componentes carregados normalmente
import Home from './pages/Home';

// Componentes carregados de forma lazy
const Sobre = lazy(() => import('./pages/Sobre'));
const Contato = lazy(() => import('./pages/Contato'));
const NotFound = lazy(() => import('./pages/NotFound'));

function App(): JSX.Element {
  return (
    <Routes>
      <Route path="/" element={<Layout />}>
        <Route index element={<Home />} />
        
        {/* Componentes lazy precisam ser envolvidos em Suspense */}
        <Route path="sobre" element={
          <Suspense fallback={<div>Carregando...</div>}>
            <Sobre />
          </Suspense>
        } />
        
        <Route path="contato" element={
          <Suspense fallback={<div>Carregando...</div>}>
            <Contato />
          </Suspense>
        } />
        
        <Route path="*" element={
          <Suspense fallback={<div>Carregando...</div>}>
            <NotFound />
          </Suspense>
        } />
      </Route>
    </Routes>
  );
}

export default App;
\`\`\`

### Acessando Parmetros de Query

Para acessar parmetros de query string (ex: \`?search=termo\`):

\`\`\`tsx
// src/pages/Pesquisa.tsx
import { useSearchParams } from 'react-router-dom';

function Pesquisa(): JSX.Element {
  const [searchParams, setSearchParams] = useSearchParams();
  const termo = searchParams.get('search') || '';

  const handleSearch = (e: React.FormEvent<HTMLFormElement>): void => {
    e.preventDefault();
    const formData = new FormData(e.currentTarget);
    const novoTermo = formData.get('termo') as string;
    
    // Atualiza a query string
    setSearchParams({ search: novoTermo });
  };

  return (
    <div>
      <h1>Pesquisa</h1>
      <form onSubmit={handleSearch}>
        <input 
          type="text" 
          name="termo" 
          defaultValue={termo} 
          placeholder="Digite sua pesquisa" 
        />
        <button type="submit">Pesquisar</button>
      </form>
      
      {termo && (
        <div>
          <h2>Resultados para: {termo}</h2>
          {/* Aqui voc renderizaria os resultados da pesquisa */}
        </div>
      )}
    </div>
  );
}

export default Pesquisa;
\`\`\`

### Melhores Prticas

1. **Organizao de Rotas:**
   - Mantenha suas rotas organizadas em arquivos separados para aplicaes maiores.
   - Use rotas aninhadas para representar hierarquias de UI.

2. **Tipagem:**
   - Sempre defina interfaces para seus parmetros de rota e estados.
   - Use tipagem estrita com \`useParams\` e outros hooks do React Router.

3. **Lazy Loading:**
   - Use carregamento lazy para componentes de pginas grandes ou raramente acessadas.
   - Sempre fornea um fallback adequado em \`Suspense\`.

4. **Navegao:**
   - Prefira \`Link\` e \`NavLink\` para navegao declarativa.
   - Use \`useNavigate\` apenas para navegao programtica (aps submisses, autenticao, etc.).

5. **Rotas Protegidas:**
   - Implemente um sistema robusto de rotas protegidas para contedo que requer autenticao.
   - Salve a localizao original para redirecionar o usurio aps o login.

O React Router com TypeScript fornece uma maneira poderosa e tipada de gerenciar a navegao em suas aplicaes React. Dominar esses conceitos  essencial para criar aplicaes web modernas e responsivas.
`,urt=()=>g.jsx(qe,{content:crt,backRoute:"/react/hooks",backText:"Voltar: Hooks Essenciais",goRoute:"/react/gerenciamento-estado",goText:"Avanar: Gerenciamento de Estado"}),drt=`## 5. Gerenciamento de Estado Avanado com TypeScript (Viso Geral)

 medida que suas aplicaes React crescem em complexidade, gerenciar o estado pode se tornar um desafio. O \`useState\`  timo para estado local de componentes, e o \`useContext\` ajuda a evitar "prop drilling" para dados globais. No entanto, para estados globais mais complexos, com muitas atualizaes ou lgica de negcios intrincada, essas ferramentas podem no ser suficientes ou podem levar a problemas de performance e organizao.

 aqui que entram as bibliotecas de gerenciamento de estado dedicadas.

### Quando o Context API Pode No Ser Suficiente

O Context API  uma ferramenta poderosa, mas tem algumas limitaes em cenrios de alta complexidade:

*   **Performance:** Quando um valor no Contexto muda, todos os componentes que consomem esse Contexto so re-renderizados, mesmo que no estejam interessados na parte especfica do estado que mudou. Para estados que mudam com muita frequncia ou so muito grandes, isso pode levar a gargalos de performance.
*   **Organizao da Lgica de Atualizao:** Para lgica de atualizao de estado mais complexa (mltiplas aes que modificam o estado de maneiras diferentes), o Context API por si s no oferece uma estrutura robusta. Voc acaba implementando seus prprios reducers e dispatchers, o que pode se tornar difcil de manter.
*   **Ferramentas de Debugging:** Bibliotecas dedicadas geralmente vm com ferramentas de desenvolvimento (DevTools) que facilitam o debugging do estado da aplicao.

### Redux com TypeScript

Redux  uma das bibliotecas de gerenciamento de estado mais populares para aplicaes JavaScript. Ela implementa o padro Flux, onde o estado  armazenado em uma "store" centralizada, e as mudanas so feitas atravs de "actions" que so processadas por "reducers".

#### Conceitos Bsicos do Redux

*   **Store:** Um objeto JavaScript que contm o estado global da aplicao.
*   **Actions:** Objetos JavaScript que descrevem o que aconteceu (ex: \`{ type: 'ADD_TODO', payload: { text: 'Comprar leite' } }\`).
*   **Reducers:** Funes puras que recebem o estado atual e uma action, e retornam um novo estado.
*   **Dispatch:** Mtodo para enviar actions para o store, iniciando o processo de atualizao do estado.

#### Configurando Redux com TypeScript

Primeiro, instale as dependncias necessrias:

\`\`\`bash
npm install redux react-redux @reduxjs/toolkit @types/react-redux
\`\`\`

O Redux Toolkit (\`@reduxjs/toolkit\`)  a abordagem recomendada para escrever cdigo Redux. Ele simplifica a configurao e reduz o boilerplate.

**Definindo Tipos:**

\`\`\`tsx
// src/types/todo.ts
export interface Todo {
  id: number;
  text: string;
  completed: boolean;
}

export interface TodoState {
  todos: Todo[];
  loading: boolean;
  error: string | null;
}

// Definindo o estado inicial
export const initialState: TodoState = {
  todos: [],
  loading: false,
  error: null
};
\`\`\`

**Criando Slices com Redux Toolkit:**

\`\`\`tsx
// src/features/todos/todosSlice.ts
import { createSlice, PayloadAction } from '@reduxjs/toolkit';
import { Todo, TodoState, initialState } from '../../types/todo';

const todosSlice = createSlice({
  name: 'todos',
  initialState,
  reducers: {
    // Adicionar uma nova tarefa
    addTodo: (state, action: PayloadAction<string>) => {
      const newTodo: Todo = {
        id: Date.now(),
        text: action.payload,
        completed: false
      };
      state.todos.push(newTodo);
    },
    // Alternar o status de uma tarefa
    toggleTodo: (state, action: PayloadAction<number>) => {
      const todo = state.todos.find(todo => todo.id === action.payload);
      if (todo) {
        todo.completed = !todo.completed;
      }
    },
    // Remover uma tarefa
    removeTodo: (state, action: PayloadAction<number>) => {
      state.todos = state.todos.filter(todo => todo.id !== action.payload);
    }
  }
});

// Exportando actions e reducer
export const { addTodo, toggleTodo, removeTodo } = todosSlice.actions;
export default todosSlice.reducer;
\`\`\`

**Configurando a Store:**

\`\`\`tsx
// src/app/store.ts
import { configureStore } from '@reduxjs/toolkit';
import todosReducer from '../features/todos/todosSlice';

export const store = configureStore({
  reducer: {
    todos: todosReducer
  }
});

// Inferindo os tipos \`RootState\` e \`AppDispatch\` da prpria store
export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
\`\`\`

**Criando Hooks Tipados:**

\`\`\`tsx
// src/app/hooks.ts
import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';
import type { RootState, AppDispatch } from './store';

// Use em toda a aplicao em vez de \`useDispatch\` e \`useSelector\` padro
export const useAppDispatch = () => useDispatch<AppDispatch>();
export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;
\`\`\`

**Provendo a Store para a Aplicao:**

\`\`\`tsx
// src/main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { Provider } from 'react-redux';
import { store } from './app/store';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>
);
\`\`\`

**Usando Redux em Componentes:**

\`\`\`tsx
// src/components/TodoList.tsx
import React, { useState } from 'react';
import { useAppSelector, useAppDispatch } from '../app/hooks';
import { addTodo, toggleTodo, removeTodo } from '../features/todos/todosSlice';

const TodoList: React.FC = () => {
  const [text, setText] = useState<string>('');
  const dispatch = useAppDispatch();
  const { todos } = useAppSelector(state => state.todos);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (text.trim()) {
      dispatch(addTodo(text));
      setText('');
    }
  };

  return (
    <div>
      <h1>Lista de Tarefas</h1>
      
      <form onSubmit={handleSubmit}>
        <input
          type="text"
          value={text}
          onChange={(e) => setText(e.target.value)}
          placeholder="Adicionar nova tarefa"
        />
        <button type="submit">Adicionar</button>
      </form>
      
      <ul>
        {todos.map(todo => (
          <li key={todo.id}>
            <span
              style={{ textDecoration: todo.completed ? 'line-through' : 'none' }}
              onClick={() => dispatch(toggleTodo(todo.id))}
            >
              {todo.text}
            </span>
            <button onClick={() => dispatch(removeTodo(todo.id))}>
              Remover
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
};

export default TodoList;
\`\`\`

### Zustand com TypeScript

Zustand  uma biblioteca de gerenciamento de estado minimalista que tem ganhado popularidade por sua simplicidade e facilidade de uso. Ela oferece uma API simples baseada em hooks, sem boilerplate, e  otimizada para TypeScript.

#### Instalao:

\`\`\`bash
npm install zustand
\`\`\`

#### Criando uma Store com Zustand:

\`\`\`tsx
// src/stores/useTodoStore.ts
import create from 'zustand';

// Definindo a interface da store
interface Todo {
  id: number;
  text: string;
  completed: boolean;
}

interface TodoStore {
  todos: Todo[];
  addTodo: (text: string) => void;
  toggleTodo: (id: number) => void;
  removeTodo: (id: number) => void;
}

// Criando a store
const useTodoStore = create<TodoStore>((set) => ({
  todos: [],
  
  addTodo: (text) => set((state) => ({
    todos: [...state.todos, {
      id: Date.now(),
      text,
      completed: false
    }]
  })),
  
  toggleTodo: (id) => set((state) => ({
    todos: state.todos.map(todo =>
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    )
  })),
  
  removeTodo: (id) => set((state) => ({
    todos: state.todos.filter(todo => todo.id !== id)
  }))
}));

export default useTodoStore;
\`\`\`

#### Usando Zustand em Componentes:

\`\`\`tsx
// src/components/TodoListZustand.tsx
import React, { useState } from 'react';
import useTodoStore from '../stores/useTodoStore';

const TodoListZustand: React.FC = () => {
  const [text, setText] = useState<string>('');
  const { todos, addTodo, toggleTodo, removeTodo } = useTodoStore();

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (text.trim()) {
      addTodo(text);
      setText('');
    }
  };

  return (
    <div>
      <h1>Lista de Tarefas (Zustand)</h1>
      
      <form onSubmit={handleSubmit}>
        <input
          type="text"
          value={text}
          onChange={(e) => setText(e.target.value)}
          placeholder="Adicionar nova tarefa"
        />
        <button type="submit">Adicionar</button>
      </form>
      
      <ul>
        {todos.map(todo => (
          <li key={todo.id}>
            <span
              style={{ textDecoration: todo.completed ? 'line-through' : 'none' }}
              onClick={() => toggleTodo(todo.id)}
            >
              {todo.text}
            </span>
            <button onClick={() => removeTodo(todo.id)}>
              Remover
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
};

export default TodoListZustand;
\`\`\`

### Jotai com TypeScript

Jotai  uma biblioteca de gerenciamento de estado atmica para React, inspirada pelo Recoil. Ela permite que voc defina pequenos pedaos de estado (tomos) e os combine para formar estados mais complexos.

#### Instalao:

\`\`\`bash
npm install jotai
\`\`\`

#### Criando tomos com Jotai:

\`\`\`tsx
// src/atoms/todoAtoms.ts
import { atom } from 'jotai';

// Definindo a interface para uma tarefa
export interface Todo {
  id: number;
  text: string;
  completed: boolean;
}

// tomo para a lista de tarefas
export const todosAtom = atom<Todo[]>([]);

// tomo derivado para tarefas ativas (no concludas)
export const activeTodosAtom = atom<Todo[]>(
  (get) => get(todosAtom).filter(todo => !todo.completed)
);

// tomo derivado para tarefas concludas
export const completedTodosAtom = atom<Todo[]>(
  (get) => get(todosAtom).filter(todo => todo.completed)
);

// tomo para adicionar uma nova tarefa
export const addTodoAtom = atom(
  null, // null porque este tomo  apenas para escrita
  (get, set, text: string) => {
    const newTodo: Todo = {
      id: Date.now(),
      text,
      completed: false
    };
    set(todosAtom, [...get(todosAtom), newTodo]);
  }
);

// tomo para alternar o status de uma tarefa
export const toggleTodoAtom = atom(
  null,
  (get, set, id: number) => {
    set(todosAtom, 
      get(todosAtom).map(todo =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      )
    );
  }
);

// tomo para remover uma tarefa
export const removeTodoAtom = atom(
  null,
  (get, set, id: number) => {
    set(todosAtom, get(todosAtom).filter(todo => todo.id !== id));
  }
);
\`\`\`

#### Usando Jotai em Componentes:

\`\`\`tsx
// src/components/TodoListJotai.tsx
import React, { useState } from 'react';
import { useAtom } from 'jotai';
import { 
  todosAtom, 
  addTodoAtom, 
  toggleTodoAtom, 
  removeTodoAtom,
  activeTodosAtom,
  completedTodosAtom
} from '../atoms/todoAtoms';

const TodoListJotai: React.FC = () => {
  const [text, setText] = useState<string>('');
  const [todos] = useAtom(todosAtom);
  const [activeTodos] = useAtom(activeTodosAtom);
  const [completedTodos] = useAtom(completedTodosAtom);
  const [, addTodo] = useAtom(addTodoAtom);
  const [, toggleTodo] = useAtom(toggleTodoAtom);
  const [, removeTodo] = useAtom(removeTodoAtom);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (text.trim()) {
      addTodo(text);
      setText('');
    }
  };

  return (
    <div>
      <h1>Lista de Tarefas (Jotai)</h1>
      
      <form onSubmit={handleSubmit}>
        <input
          type="text"
          value={text}
          onChange={(e) => setText(e.target.value)}
          placeholder="Adicionar nova tarefa"
        />
        <button type="submit">Adicionar</button>
      </form>
      
      <div>
        <p>Total: {todos.length}, Ativas: {activeTodos.length}, Concludas: {completedTodos.length}</p>
      </div>
      
      <ul>
        {todos.map(todo => (
          <li key={todo.id}>
            <span
              style={{ textDecoration: todo.completed ? 'line-through' : 'none' }}
              onClick={() => toggleTodo(todo.id)}
            >
              {todo.text}
            </span>
            <button onClick={() => removeTodo(todo.id)}>
              Remover
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
};

export default TodoListJotai;
\`\`\`

### Comparao e Quando Usar Cada Um

**Redux:**
- **Prs:** Ecossistema maduro, DevTools excelentes, middleware para efeitos colaterais (Redux Saga, Redux Thunk), grande comunidade.
- **Contras:** Mais verboso, curva de aprendizado mais ngreme.
- **Quando usar:** Aplicaes grandes com estado complexo, equipes grandes que precisam de convenes rgidas, quando voc precisa de ferramentas de debugging avanadas.

**Zustand:**
- **Prs:** API simples e minimalista, pouco boilerplate, boa integrao com TypeScript, performance slida.
- **Contras:** Menos ferramentas de debugging em comparao com Redux, ecossistema menor.
- **Quando usar:** Aplicaes pequenas a mdias, quando voc quer algo simples e direto ao ponto, quando Redux parece excessivo.

**Jotai:**
- **Prs:** Abordagem atmica que evita re-renderizaes desnecessrias, boa integrao com TypeScript, API simples.
- **Contras:** Abordagem diferente que pode exigir uma mudana de mentalidade, ecossistema em crescimento.
- **Quando usar:** Quando voc precisa de granularidade fina no gerenciamento de estado, quando a performance de renderizao  crtica.

### Consideraes Finais

No existe uma soluo nica para todos os casos. A escolha da biblioteca de gerenciamento de estado depende das necessidades especficas do seu projeto, do tamanho da equipe, da complexidade do estado e das preferncias pessoais.

Para projetos menores ou quando voc est comeando, o Context API com \`useReducer\` pode ser suficiente.  medida que seu projeto cresce, considere adotar uma das bibliotecas mencionadas acima.

Independentemente da biblioteca escolhida, o TypeScript adiciona uma camada valiosa de segurana de tipos que ajuda a evitar bugs comuns relacionados ao estado e torna o cdigo mais fcil de entender e manter.
`,prt=()=>g.jsx(qe,{content:drt,backRoute:"/react/roteamento",backText:"Voltar: Roteamento",goRoute:"/react/consumo-api",goText:"Avanar: Consumo de APIs"}),frt=`## 6. Consumindo APIs com React e TypeScript

Consumir dados de APIs  uma parte fundamental de muitas aplicaes React modernas. Com TypeScript, podemos adicionar tipagem esttica s nossas chamadas de API, tornando o cdigo mais seguro e fornecendo melhor autocompletar e documentao.

### Mtodos para Consumir APIs

Existem vrias maneiras de fazer requisies HTTP em aplicaes React:

1. **Fetch API**: API nativa do navegador para fazer requisies HTTP
2. **Axios**: Biblioteca popular baseada em Promises para requisies HTTP
3. **React Query**: Biblioteca para gerenciamento de estado de dados remotos
4. **SWR**: Biblioteca para busca de dados com estratgias de cache e revalidao

Vamos explorar cada uma delas com TypeScript.

### Fetch API com TypeScript

A Fetch API  nativa do navegador e no requer instalao de pacotes adicionais.

**Exemplo Bsico:**

\`\`\`tsx
// Definindo a interface para os dados que esperamos receber
interface Post {
  userId: number;
  id: number;
  title: string;
  body: string;
}

// Componente que busca e exibe um post
function PostComponent(): JSX.Element {
  const [post, setPost] = useState<Post | null>(null);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    // Funo assncrona para buscar dados
    const fetchPost = async (): Promise<void> => {
      try {
        setLoading(true);
        const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
        
        // Verificando se a resposta foi bem-sucedida
        if (!response.ok) {
          throw new Error(\`Erro HTTP: \${response.status}\`);
        }
        
        // Convertendo a resposta para JSON com tipagem
        const data: Post = await response.json();
        setPost(data);
        setError(null);
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Ocorreu um erro desconhecido');
        setPost(null);
      } finally {
        setLoading(false);
      }
    };

    fetchPost();
  }, []);

  if (loading) return <p>Carregando...</p>;
  if (error) return <p>Erro: {error}</p>;
  if (!post) return <p>Nenhum post encontrado</p>;

  return (
    <div>
      <h1>{post.title}</h1>
      <p>{post.body}</p>
    </div>
  );
}
\`\`\`

**Enviando Dados com POST:**

\`\`\`tsx
// Interface para os dados que vamos enviar
interface NewPost {
  title: string;
  body: string;
  userId: number;
}

// Interface para a resposta esperada
interface PostResponse extends NewPost {
  id: number;
}

// Funo para criar um novo post
async function createPost(postData: NewPost): Promise<PostResponse> {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(postData)
  });

  if (!response.ok) {
    throw new Error(\`Erro HTTP: \${response.status}\`);
  }

  return response.json() as Promise<PostResponse>;
}

// Uso em um componente
function CreatePostForm(): JSX.Element {
  const [title, setTitle] = useState<string>('');
  const [body, setBody] = useState<string>('');
  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);
  const [error, setError] = useState<string | null>(null);
  const [createdPost, setCreatedPost] = useState<PostResponse | null>(null);

  const handleSubmit = async (e: React.FormEvent): Promise<void> => {
    e.preventDefault();
    
    const newPost: NewPost = {
      title,
      body,
      userId: 1 // Valor fixo para exemplo
    };

    try {
      setIsSubmitting(true);
      setError(null);
      
      const result = await createPost(newPost);
      setCreatedPost(result);
      
      // Limpar o formulrio
      setTitle('');
      setBody('');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Ocorreu um erro desconhecido');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div>
      <h2>Criar Novo Post</h2>
      
      <form onSubmit={handleSubmit}>
        <div>
          <label htmlFor="title">Ttulo:</label>
          <input
            id="title"
            type="text"
            value={title}
            onChange={(e) => setTitle(e.target.value)}
            required
          />
        </div>
        
        <div>
          <label htmlFor="body">Contedo:</label>
          <textarea
            id="body"
            value={body}
            onChange={(e) => setBody(e.target.value)}
            required
          />
        </div>
        
        <button type="submit" disabled={isSubmitting}>
          {isSubmitting ? 'Enviando...' : 'Criar Post'}
        </button>
      </form>
      
      {error && <p style={{ color: 'red' }}>Erro: {error}</p>}
      
      {createdPost && (
        <div>
          <h3>Post criado com sucesso!</h3>
          <p>ID: {createdPost.id}</p>
          <p>Ttulo: {createdPost.title}</p>
        </div>
      )}
    </div>
  );
}
\`\`\`

### Axios com TypeScript

Axios  uma biblioteca popular para fazer requisies HTTP. Ela oferece uma API mais amigvel que a Fetch API e funciona tanto no navegador quanto no Node.js.

**Instalao:**

\`\`\`bash
npm install axios
\`\`\`

**Exemplo Bsico:**

\`\`\`tsx
import axios from 'axios';
import { useState, useEffect } from 'react';

// Definindo a interface para os dados
interface User {
  id: number;
  name: string;
  email: string;
  phone: string;
  website: string;
}

function UserProfile({ userId }: { userId: number }): JSX.Element {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    // Funo para buscar dados do usurio
    const fetchUser = async (): Promise<void> => {
      try {
        setLoading(true);
        // Axios j converte automaticamente a resposta para JSON
        const response = await axios.get<User>(
          \`https://jsonplaceholder.typicode.com/users/\${userId}\`
        );
        
        setUser(response.data);
        setError(null);
      } catch (err) {
        if (axios.isAxiosError(err)) {
          // Erro especfico do Axios
          setError(err.response?.data?.message || err.message);
        } else {
          // Erro genrico
          setError('Ocorreu um erro desconhecido');
        }
        setUser(null);
      } finally {
        setLoading(false);
      }
    };

    fetchUser();
  }, [userId]);

  if (loading) return <p>Carregando...</p>;
  if (error) return <p>Erro: {error}</p>;
  if (!user) return <p>Usurio no encontrado</p>;

  return (
    <div>
      <h1>{user.name}</h1>
      <p>Email: {user.email}</p>
      <p>Telefone: {user.phone}</p>
      <p>Website: {user.website}</p>
    </div>
  );
}
\`\`\`

**Criando uma Instncia do Axios:**

\`\`\`tsx
// src/services/api.ts
import axios, { AxiosInstance } from 'axios';

// Criando uma instncia do Axios com configurao personalizada
const api: AxiosInstance = axios.create({
  baseURL: 'https://jsonplaceholder.typicode.com',
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
    // Voc pode adicionar headers padro aqui, como tokens de autenticao
    // 'Authorization': \`Bearer \${token}\`
  }
});

// Interceptor para requisies
api.interceptors.request.use(
  (config) => {
    // Voc pode modificar a configurao da requisio aqui
    // Por exemplo, adicionar um token de autenticao
    // if (token) {
    //   config.headers.Authorization = \`Bearer \${token}\`;
    // }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

// Interceptor para respostas
api.interceptors.response.use(
  (response) => {
    // Voc pode processar a resposta aqui antes de retorn-la
    return response;
  },
  (error) => {
    // Tratamento global de erros
    if (error.response) {
      // O servidor respondeu com um status de erro
      console.error('Erro de resposta:', error.response.status, error.response.data);
      
      // Exemplo: redirecionar para login se o status for 401 (no autorizado)
      // if (error.response.status === 401) {
      //   // Redirecionar para a pgina de login
      // }
    } else if (error.request) {
      // A requisio foi feita mas no houve resposta
      console.error('Erro de requisio:', error.request);
    } else {
      // Algo aconteceu na configurao da requisio que gerou um erro
      console.error('Erro:', error.message);
    }
    
    return Promise.reject(error);
  }
);

export default api;
\`\`\`

**Usando a Instncia do Axios:**

\`\`\`tsx
// src/services/userService.ts
import api from './api';

// Interfaces
export interface User {
  id: number;
  name: string;
  email: string;
  phone: string;
  website: string;
}

export interface CreateUserData {
  name: string;
  email: string;
  phone: string;
  website: string;
}

// Funes para operaes relacionadas a usurios
export const userService = {
  // Buscar todos os usurios
  getAll: async (): Promise<User[]> => {
    const response = await api.get<User[]>('/users');
    return response.data;
  },
  
  // Buscar um usurio pelo ID
  getById: async (id: number): Promise<User> => {
    const response = await api.get<User>(\`/users/\${id}\`);
    return response.data;
  },
  
  // Criar um novo usurio
  create: async (userData: CreateUserData): Promise<User> => {
    const response = await api.post<User>('/users', userData);
    return response.data;
  },
  
  // Atualizar um usurio
  update: async (id: number, userData: Partial<CreateUserData>): Promise<User> => {
    const response = await api.put<User>(\`/users/\${id}\`, userData);
    return response.data;
  },
  
  // Excluir um usurio
  delete: async (id: number): Promise<void> => {
    await api.delete(\`/users/\${id}\`);
  }
};
\`\`\`

**Usando o Servio em um Componente:**

\`\`\`tsx
// src/components/UserList.tsx
import { useState, useEffect } from 'react';
import { userService, User } from '../services/userService';

function UserList(): JSX.Element {
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const loadUsers = async (): Promise<void> => {
      try {
        setLoading(true);
        const data = await userService.getAll();
        setUsers(data);
        setError(null);
      } catch (err) {
        setError('Falha ao carregar usurios');
        console.error(err);
      } finally {
        setLoading(false);
      }
    };

    loadUsers();
  }, []);

  const handleDeleteUser = async (id: number): Promise<void> => {
    try {
      await userService.delete(id);
      // Atualiza a lista removendo o usurio excludo
      setUsers(users.filter(user => user.id !== id));
    } catch (err) {
      setError('Falha ao excluir usurio');
      console.error(err);
    }
  };

  if (loading) return <p>Carregando usurios...</p>;
  if (error) return <p>Erro: {error}</p>;
  if (users.length === 0) return <p>Nenhum usurio encontrado</p>;

  return (
    <div>
      <h1>Lista de Usurios</h1>
      <ul>
        {users.map(user => (
          <li key={user.id}>
            <strong>{user.name}</strong> ({user.email})
            <button onClick={() => handleDeleteUser(user.id)}>Excluir</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default UserList;
\`\`\`

### React Query com TypeScript

React Query  uma biblioteca para gerenciamento de estado de dados remotos. Ela facilita o fetching, caching, sincronizao e atualizao de dados do servidor.

**Instalao:**

\`\`\`bash
npm install @tanstack/react-query
\`\`\`

**Configurao:**

\`\`\`tsx
// src/main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';
import App from './App';
import './index.css';

// Cria um cliente do React Query
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      refetchOnWindowFocus: false, // Desativa o refetch automtico quando a janela ganha foco
      retry: 1, // Nmero de tentativas em caso de falha
    },
  },
});

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <QueryClientProvider client={queryClient}>
      <App />
      <ReactQueryDevtools initialIsOpen={false} /> {/* Ferramenta de desenvolvimento */}
    </QueryClientProvider>
  </React.StrictMode>
);
\`\`\`

**Hooks Personalizados com React Query:**

\`\`\`tsx
// src/hooks/useUsers.ts
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { userService, User, CreateUserData } from '../services/userService';

// Hook para buscar todos os usurios
export function useUsers() {
  return useQuery<User[], Error>({
    queryKey: ['users'],
    queryFn: userService.getAll,
  });
}

// Hook para buscar um usurio especfico
export function useUser(id: number) {
  return useQuery<User, Error>({
    queryKey: ['users', id],
    queryFn: () => userService.getById(id),
    enabled: !!id, // S executa se o ID for vlido
  });
}

// Hook para criar um usurio
export function useCreateUser() {
  const queryClient = useQueryClient();
  
  return useMutation<User, Error, CreateUserData>({
    mutationFn: userService.create,
    onSuccess: () => {
      // Invalida a query 'users' para forar um refetch
      queryClient.invalidateQueries({ queryKey: ['users'] });
    },
  });
}

// Hook para atualizar um usurio
export function useUpdateUser() {
  const queryClient = useQueryClient();
  
  return useMutation<User, Error, { id: number; data: Partial<CreateUserData> }>({
    mutationFn: ({ id, data }) => userService.update(id, data),
    onSuccess: (data) => {
      // Atualiza o cache para o usurio especfico
      queryClient.setQueryData(['users', data.id], data);
      // Invalida a query 'users' para forar um refetch
      queryClient.invalidateQueries({ queryKey: ['users'] });
    },
  });
}

// Hook para excluir um usurio
export function useDeleteUser() {
  const queryClient = useQueryClient();
  
  return useMutation<void, Error, number>({
    mutationFn: userService.delete,
    onSuccess: (_, id) => {
      // Remove o usurio do cache
      queryClient.removeQueries({ queryKey: ['users', id] });
      // Atualiza a lista de usurios
      queryClient.setQueryData<User[] | undefined>(['users'], (oldData) => {
        return oldData ? oldData.filter(user => user.id !== id) : undefined;
      });
    },
  });
}
\`\`\`

**Usando os Hooks em Componentes:**

\`\`\`tsx
// src/components/UserListWithReactQuery.tsx
import { useUsers, useDeleteUser } from '../hooks/useUsers';

function UserListWithReactQuery(): JSX.Element {
  const { data: users, isLoading, error } = useUsers();
  const deleteUser = useDeleteUser();

  const handleDeleteUser = (id: number): void => {
    deleteUser.mutate(id);
  };

  if (isLoading) return <p>Carregando usurios...</p>;
  if (error) return <p>Erro: {error.message}</p>;
  if (!users || users.length === 0) return <p>Nenhum usurio encontrado</p>;

  return (
    <div>
      <h1>Lista de Usurios</h1>
      {deleteUser.isLoading && <p>Excluindo usurio...</p>}
      {deleteUser.isError && <p>Erro ao excluir: {deleteUser.error.message}</p>}
      
      <ul>
        {users.map(user => (
          <li key={user.id}>
            <strong>{user.name}</strong> ({user.email})
            <button 
              onClick={() => handleDeleteUser(user.id)}
              disabled={deleteUser.isLoading}
            >
              Excluir
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default UserListWithReactQuery;
\`\`\`

\`\`\`tsx
// src/components/UserForm.tsx
import { useState } from 'react';
import { useCreateUser } from '../hooks/useUsers';
import { CreateUserData } from '../services/userService';

function UserForm(): JSX.Element {
  const [userData, setUserData] = useState<CreateUserData>({
    name: '',
    email: '',
    phone: '',
    website: ''
  });

  const createUser = useCreateUser();

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {
    const { name, value } = e.target;
    setUserData(prev => ({ ...prev, [name]: value }));
  };

  const handleSubmit = (e: React.FormEvent): void => {
    e.preventDefault();
    createUser.mutate(userData, {
      onSuccess: () => {
        // Limpar o formulrio aps sucesso
        setUserData({
          name: '',
          email: '',
          phone: '',
          website: ''
        });
      }
    });
  };

  return (
    <div>
      <h2>Adicionar Usurio</h2>
      
      {createUser.isLoading && <p>Enviando...</p>}
      {createUser.isError && <p>Erro: {createUser.error.message}</p>}
      {createUser.isSuccess && <p>Usurio criado com sucesso!</p>}
      
      <form onSubmit={handleSubmit}>
        <div>
          <label htmlFor="name">Nome:</label>
          <input
            id="name"
            name="name"
            type="text"
            value={userData.name}
            onChange={handleChange}
            required
          />
        </div>
        
        <div>
          <label htmlFor="email">Email:</label>
          <input
            id="email"
            name="email"
            type="email"
            value={userData.email}
            onChange={handleChange}
            required
          />
        </div>
        
        <div>
          <label htmlFor="phone">Telefone:</label>
          <input
            id="phone"
            name="phone"
            type="text"
            value={userData.phone}
            onChange={handleChange}
            required
          />
        </div>
        
        <div>
          <label htmlFor="website">Website:</label>
          <input
            id="website"
            name="website"
            type="text"
            value={userData.website}
            onChange={handleChange}
          />
        </div>
        
        <button 
          type="submit" 
          disabled={createUser.isLoading}
        >
          Adicionar Usurio
        </button>
      </form>
    </div>
  );
}

export default UserForm;
\`\`\`

### SWR com TypeScript

SWR (stale-while-revalidate)  uma biblioteca para busca de dados desenvolvida pela Vercel. Ela implementa estratgias de cache e revalidao para manter os dados sempre atualizados.

**Instalao:**

\`\`\`bash
npm install swr
\`\`\`

**Configurao:**

\`\`\`tsx
// src/main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { SWRConfig } from 'swr';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <SWRConfig 
      value={{
        fetcher: (url: string) => fetch(url).then(res => {
          if (!res.ok) {
            throw new Error('Falha na requisio');
          }
          return res.json();
        }),
        revalidateOnFocus: false,
        shouldRetryOnError: false
      }}
    >
      <App />
    </SWRConfig>
  </React.StrictMode>
);
\`\`\`

**Hooks Personalizados com SWR:**

\`\`\`tsx
// src/hooks/useSWRUsers.ts
import useSWR, { mutate } from 'swr';
import { User, CreateUserData } from '../services/userService';
import api from '../services/api';

const API_URL = 'https://jsonplaceholder.typicode.com';

// Hook para buscar todos os usurios
export function useUsers() {
  return useSWR<User[], Error>(\`\${API_URL}/users\`);
}

// Hook para buscar um usurio especfico
export function useUser(id: number | null) {
  return useSWR<User, Error>(id ? \`\${API_URL}/users/\${id}\` : null);
}

// Funo para criar um usurio
export async function createUser(userData: CreateUserData): Promise<User> {
  const response = await api.post<User>('/users', userData);
  
  // Atualiza o cache
  await mutate(\`\${API_URL}/users\`);
  
  return response.data;
}

// Funo para atualizar um usurio
export async function updateUser(id: number, userData: Partial<CreateUserData>): Promise<User> {
  const response = await api.put<User>(\`/users/\${id}\`, userData);
  
  // Atualiza o cache
  await mutate(\`\${API_URL}/users/\${id}\`);
  await mutate(\`\${API_URL}/users\`);
  
  return response.data;
}

// Funo para excluir um usurio
export async function deleteUser(id: number): Promise<void> {
  await api.delete(\`/users/\${id}\`);
  
  // Atualiza o cache
  await mutate(\`\${API_URL}/users\`, (users: User[] | undefined) => {
    return users ? users.filter(user => user.id !== id) : undefined;
  }, false);
}
\`\`\`

**Usando os Hooks em Componentes:**

\`\`\`tsx
// src/components/UserListWithSWR.tsx
import { useState } from 'react';
import { useUsers, deleteUser } from '../hooks/useSWRUsers';

function UserListWithSWR(): JSX.Element {
  const { data: users, error, isLoading } = useUsers();
  const [isDeleting, setIsDeleting] = useState<boolean>(false);
  const [deleteError, setDeleteError] = useState<string | null>(null);

  const handleDeleteUser = async (id: number): Promise<void> => {
    try {
      setIsDeleting(true);
      setDeleteError(null);
      await deleteUser(id);
    } catch (err) {
      setDeleteError('Falha ao excluir usurio');
      console.error(err);
    } finally {
      setIsDeleting(false);
    }
  };

  if (isLoading) return <p>Carregando usurios...</p>;
  if (error) return <p>Erro: {error.message}</p>;
  if (!users || users.length === 0) return <p>Nenhum usurio encontrado</p>;

  return (
    <div>
      <h1>Lista de Usurios</h1>
      {isDeleting && <p>Excluindo usurio...</p>}
      {deleteError && <p>{deleteError}</p>}
      
      <ul>
        {users.map(user => (
          <li key={user.id}>
            <strong>{user.name}</strong> ({user.email})
            <button 
              onClick={() => handleDeleteUser(user.id)}
              disabled={isDeleting}
            >
              Excluir
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default UserListWithSWR;
\`\`\`

### Tratamento de Erros e Loading States

Independentemente da biblioteca que voc escolher,  importante tratar adequadamente os estados de carregamento e erro:

\`\`\`tsx
// Componente genrico para estados de carregamento/erro
interface AsyncContentProps<T> {
  isLoading: boolean;
  error: Error | null;
  data: T | null | undefined;
  loadingComponent?: React.ReactNode;
  errorComponent?: React.ReactNode;
  emptyComponent?: React.ReactNode;
  children: (data: T) => React.ReactNode;
}

function AsyncContent<T>({
  isLoading,
  error,
  data,
  loadingComponent = <p>Carregando...</p>,
  errorComponent,
  emptyComponent = <p>Nenhum dado encontrado</p>,
  children
}: AsyncContentProps<T>): JSX.Element {
  if (isLoading) {
    return <>{loadingComponent}</>;
  }

  if (error) {
    return <>{errorComponent || <p>Erro: {error.message}</p>}</>;
  }

  if (!data) {
    return <>{emptyComponent}</>;
  }

  return <>{children(data)}</>;
}

// Uso:
function UserDetails({ userId }: { userId: number }): JSX.Element {
  const { data, isLoading, error } = useUser(userId);

  return (
    <AsyncContent
      isLoading={isLoading}
      error={error}
      data={data}
      loadingComponent={<p>Carregando detalhes do usurio...</p>}
      emptyComponent={<p>Usurio no encontrado</p>}
    >
      {(user) => (
        <div>
          <h1>{user.name}</h1>
          <p>Email: {user.email}</p>
          <p>Telefone: {user.phone}</p>
        </div>
      )}
    </AsyncContent>
  );
}
\`\`\`

### Consideraes Finais

Ao consumir APIs com React e TypeScript, considere:

1. **Tipagem:** Defina interfaces claras para seus dados e respostas de API.
2. **Tratamento de Erros:** Implemente tratamento de erros robusto para diferentes cenrios.
3. **Estados de Carregamento:** Fornea feedback visual durante operaes assncronas.
4. **Caching:** Use bibliotecas como React Query ou SWR para gerenciar cache e revalidao.
5. **Abstrao:** Crie servios e hooks personalizados para encapsular a lgica de API.

A escolha entre Fetch API, Axios, React Query ou SWR depende das necessidades especficas do seu projeto. Para aplicaes simples, Fetch ou Axios podem ser suficientes. Para aplicaes mais complexas com necessidades avanadas de gerenciamento de estado e cache, React Query ou SWR so excelentes opes.

Independentemente da escolha, TypeScript adiciona uma camada valiosa de segurana de tipos que ajuda a evitar bugs comuns relacionados a dados e torna o cdigo mais fcil de entender e manter.
`,mrt=()=>g.jsx(qe,{content:frt,backRoute:"/react/gerenciamento-estado",backText:"Voltar: Gerenciamento de Estado",goRoute:"/react/estilizacao",goText:"Avanar: Estilizao"}),hrt=`## 7. Estilizao em React com TypeScript

A estilizao  uma parte fundamental do desenvolvimento de interfaces de usurio. Com React e TypeScript, existem vrias abordagens para estilizar seus componentes, cada uma com suas vantagens e casos de uso especficos.

### Abordagens de Estilizao em React

1. **CSS Tradicional**: Arquivos CSS separados importados nos componentes
2. **CSS Modules**: Arquivos CSS com escopo local para componentes
3. **Styled Components**: CSS-in-JS com componentes estilizados
4. **Emotion**: Outra biblioteca CSS-in-JS com API flexvel
5. **Tailwind CSS**: Utilitrios CSS de baixo nvel
6. **SASS/SCSS**: Pr-processador CSS com recursos avanados

Vamos explorar cada uma dessas abordagens com TypeScript.

### CSS Tradicional

A abordagem mais simples  usar arquivos CSS tradicionais e import-los nos seus componentes React.

\`\`\`tsx
// src/styles/Button.css
.button {
  padding: 10px 15px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.button:hover {
  background-color: #45a049;
}

.button.secondary {
  background-color: #008CBA;
}

.button.secondary:hover {
  background-color: #007B9A;
}
\`\`\`

\`\`\`tsx
// src/components/Button.tsx
import React from 'react';
import '../styles/Button.css';

interface ButtonProps {
  children: React.ReactNode;
  variant?: 'primary' | 'secondary';
  onClick?: () => void;
  type?: 'button' | 'submit' | 'reset';
}

function Button({ 
  children, 
  variant = 'primary', 
  onClick, 
  type = 'button' 
}: ButtonProps): JSX.Element {
  const className = \`button \${variant === 'secondary' ? 'secondary' : ''}\`;
  
  return (
    <button 
      className={className}
      onClick={onClick}
      type={type}
    >
      {children}
    </button>
  );
}

export default Button;
\`\`\`

**Prs:**
- Familiar para quem j conhece CSS
- Fcil de implementar
- Bom para projetos pequenos

**Contras:**
- Sem escopo local (classes podem colidir)
- Sem verificao de tipos para classes CSS
- Difcil de manter em projetos grandes

### CSS Modules

CSS Modules resolve o problema de escopo global do CSS tradicional, criando nomes de classe nicos para cada componente.

\`\`\`tsx
// src/components/Button.module.css
.button {
  padding: 10px 15px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.button:hover {
  background-color: #45a049;
}

.secondary {
  background-color: #008CBA;
}

.secondary:hover {
  background-color: #007B9A;
}
\`\`\`

\`\`\`tsx
// src/components/Button.tsx
import React from 'react';
import styles from './Button.module.css';

interface ButtonProps {
  children: React.ReactNode;
  variant?: 'primary' | 'secondary';
  onClick?: () => void;
  type?: 'button' | 'submit' | 'reset';
}

function Button({ 
  children, 
  variant = 'primary', 
  onClick, 
  type = 'button' 
}: ButtonProps): JSX.Element {
  const className = \`\${styles.button} \${variant === 'secondary' ? styles.secondary : ''}\`;
  
  return (
    <button 
      className={className}
      onClick={onClick}
      type={type}
    >
      {children}
    </button>
  );
}

export default Button;
\`\`\`

**Tipagem para CSS Modules:**

Para obter tipagem para seus mdulos CSS, voc pode criar um arquivo de declarao:

\`\`\`typescript
// src/types/css.d.ts
declare module '*.module.css' {
  const classes: { [key: string]: string };
  export default classes;
}
\`\`\`

**Prs:**
- Escopo local (evita colises de nomes de classe)
- Sintaxe CSS familiar
- Bom para projetos de tamanho mdio

**Contras:**
- Tipagem limitada para classes CSS
- No permite lgica dinmica dentro do CSS

### Styled Components

Styled Components  uma biblioteca popular de CSS-in-JS que permite escrever CSS real dentro dos seus componentes JavaScript/TypeScript.

**Instalao:**

\`\`\`bash
npm install styled-components @types/styled-components
\`\`\`

**Exemplo:**

\`\`\`tsx
// src/components/Button.tsx
import styled from 'styled-components';

// Definindo tipos para as props do componente estilizado
interface StyledButtonProps {
  variant?: 'primary' | 'secondary';
  size?: 'small' | 'medium' | 'large';
}

// Criando um componente estilizado com TypeScript
const StyledButton = styled.button<StyledButtonProps>\`
  padding: \${props => {
    switch (props.size) {
      case 'small': return '5px 10px';
      case 'large': return '15px 20px';
      default: return '10px 15px';
    }
  }};
  background-color: \${props => 
    props.variant === 'secondary' ? '#008CBA' : '#4CAF50'};
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: \${props => {
    switch (props.size) {
      case 'small': return '0.8rem';
      case 'large': return '1.2rem';
      default: return '1rem';
    }
  }};

  &:hover {
    background-color: \${props => 
      props.variant === 'secondary' ? '#007B9A' : '#45a049'};
  }

  &:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
  }
\`;

// Interface para as props do componente React
interface ButtonProps extends StyledButtonProps {
  children: React.ReactNode;
  onClick?: () => void;
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
}

function Button({ 
  children, 
  variant = 'primary',
  size = 'medium',
  onClick, 
  type = 'button',
  disabled = false
}: ButtonProps): JSX.Element {
  return (
    <StyledButton 
      variant={variant}
      size={size}
      onClick={onClick}
      type={type}
      disabled={disabled}
    >
      {children}
    </StyledButton>
  );
}

export default Button;
\`\`\`

**Tema com Styled Components:**

\`\`\`tsx
// src/styles/theme.ts
export const lightTheme = {
  colors: {
    primary: '#4CAF50',
    secondary: '#008CBA',
    text: '#333333',
    background: '#ffffff',
    error: '#f44336',
    success: '#4caf50',
    warning: '#ff9800',
  },
  fontSizes: {
    small: '0.8rem',
    medium: '1rem',
    large: '1.2rem',
    xlarge: '1.5rem',
  },
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px',
  },
  borderRadius: {
    small: '4px',
    medium: '8px',
    large: '16px',
    round: '50%',
  },
};

export const darkTheme = {
  colors: {
    primary: '#66BB6A',
    secondary: '#29B6F6',
    text: '#f5f5f5',
    background: '#333333',
    error: '#e57373',
    success: '#81c784',
    warning: '#ffb74d',
  },
  fontSizes: lightTheme.fontSizes,
  spacing: lightTheme.spacing,
  borderRadius: lightTheme.borderRadius,
};

// Tipo para o tema
export type Theme = typeof lightTheme;
\`\`\`

**Provedor de Tema:**

\`\`\`tsx
// src/App.tsx
import React, { useState } from 'react';
import { ThemeProvider } from 'styled-components';
import { lightTheme, darkTheme } from './styles/theme';
import GlobalStyle from './styles/GlobalStyle';
import Button from './components/Button';

function App(): JSX.Element {
  const [isDarkTheme, setIsDarkTheme] = useState<boolean>(false);
  const theme = isDarkTheme ? darkTheme : lightTheme;

  const toggleTheme = (): void => {
    setIsDarkTheme(!isDarkTheme);
  };

  return (
    <ThemeProvider theme={theme}>
      <GlobalStyle />
      <div>
        <h1>Styled Components com TypeScript</h1>
        <Button onClick={toggleTheme}>
          Alternar para tema {isDarkTheme ? 'claro' : 'escuro'}
        </Button>
        <Button variant="secondary" size="large">
          Boto Secundrio Grande
        </Button>
      </div>
    </ThemeProvider>
  );
}

export default App;
\`\`\`

**Estilos Globais:**

\`\`\`tsx
// src/styles/GlobalStyle.ts
import { createGlobalStyle } from 'styled-components';
import { Theme } from './theme';

const GlobalStyle = createGlobalStyle<{ theme: Theme }>\`
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: \${({ theme }) => theme.colors.background};
    color: \${({ theme }) => theme.colors.text};
    line-height: 1.6;
    padding: \${({ theme }) => theme.spacing.lg};
  }

  h1, h2, h3, h4, h5, h6 {
    margin-bottom: \${({ theme }) => theme.spacing.md};
  }

  p {
    margin-bottom: \${({ theme }) => theme.spacing.md};
  }
\`;

export default GlobalStyle;
\`\`\`

**Tipagem para Tema:**

\`\`\`tsx
// src/styled.d.ts
import 'styled-components';
import { Theme } from './styles/theme';

// Estendendo a definio de tipos do styled-components
declare module 'styled-components' {
  export interface DefaultTheme extends Theme {}
}
\`\`\`

**Prs:**
- Escopo local garantido
- Estilos dinmicos baseados em props
- Tipagem forte com TypeScript
- Temas e estilos globais
- Sem necessidade de arquivos CSS separados

**Contras:**
- Curva de aprendizado para quem est acostumado com CSS tradicional
- Aumenta o tamanho do bundle JavaScript
- Pode ter impacto na performance em aplicaes muito grandes

### Emotion

Emotion  outra biblioteca CSS-in-JS popular, com uma API flexvel e boa integrao com TypeScript.

**Instalao:**

\`\`\`bash
npm install @emotion/react @emotion/styled
\`\`\`

**Exemplo:**

\`\`\`tsx
// src/components/ButtonEmotion.tsx
/** @jsxImportSource @emotion/react */
import { css } from '@emotion/react';
import styled from '@emotion/styled';

// Definindo tipos para as props
interface ButtonProps {
  variant?: 'primary' | 'secondary';
  size?: 'small' | 'medium' | 'large';
  children: React.ReactNode;
  onClick?: () => void;
  disabled?: boolean;
}

// Estilos base usando a API css
const buttonBaseStyles = css\`
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-family: inherit;
  transition: background-color 0.2s;

  &:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
  }
\`;

// Componente estilizado com Emotion
const StyledButton = styled.button<ButtonProps>\`
  \${buttonBaseStyles}
  
  background-color: \${props => 
    props.variant === 'secondary' ? '#008CBA' : '#4CAF50'};
  color: white;
  
  padding: \${props => {
    switch (props.size) {
      case 'small': return '5px 10px';
      case 'large': return '15px 20px';
      default: return '10px 15px';
    }
  }};
  
  font-size: \${props => {
    switch (props.size) {
      case 'small': return '0.8rem';
      case 'large': return '1.2rem';
      default: return '1rem';
    }
  }};

  &:hover:not(:disabled) {
    background-color: \${props => 
      props.variant === 'secondary' ? '#007B9A' : '#45a049'};
  }
\`;

function ButtonEmotion({ 
  children, 
  variant = 'primary',
  size = 'medium',
  onClick, 
  disabled = false
}: ButtonProps): JSX.Element {
  return (
    <StyledButton 
      variant={variant}
      size={size}
      onClick={onClick}
      disabled={disabled}
    >
      {children}
    </StyledButton>
  );
}

export default ButtonEmotion;
\`\`\`

**Prs:**
- API flexvel (suporta tanto styled quanto css prop)
- Boa integrao com TypeScript
- Performance ligeiramente melhor que Styled Components em alguns casos
- Suporte a temas e estilos globais

**Contras:**
- Semelhantes aos do Styled Components
- Configurao adicional para JSX pragma ou plugin Babel

### Tailwind CSS

Tailwind CSS  uma abordagem de "utility-first" para estilizao, onde voc aplica classes utilitrias diretamente aos elementos HTML.

**Instalao:**

\`\`\`bash
npm install tailwindcss postcss autoprefixer
npx tailwindcss init -p
\`\`\`

**Configurao (tailwind.config.js):**

\`\`\`javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
\`\`\`

**Configurao (src/index.css):**

\`\`\`css
@tailwind base;
@tailwind components;
@tailwind utilities;
\`\`\`

**Exemplo:**

\`\`\`tsx
// src/components/ButtonTailwind.tsx
import React from 'react';

interface ButtonProps {
  children: React.ReactNode;
  variant?: 'primary' | 'secondary';
  size?: 'small' | 'medium' | 'large';
  onClick?: () => void;
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
}

function ButtonTailwind({ 
  children, 
  variant = 'primary', 
  size = 'medium',
  onClick, 
  type = 'button',
  disabled = false
}: ButtonProps): JSX.Element {
  // Mapeando variantes para classes Tailwind
  const variantClasses = {
    primary: 'bg-green-500 hover:bg-green-600',
    secondary: 'bg-blue-500 hover:bg-blue-600'
  };
  
  // Mapeando tamanhos para classes Tailwind
  const sizeClasses = {
    small: 'py-1 px-2 text-sm',
    medium: 'py-2 px-4 text-base',
    large: 'py-3 px-6 text-lg'
  };
  
  // Combinando todas as classes
  const classes = \`
    \${variantClasses[variant]}
    \${sizeClasses[size]}
    text-white font-medium rounded
    focus:outline-none focus:ring-2 focus:ring-opacity-50
    \${variant === 'primary' ? 'focus:ring-green-400' : 'focus:ring-blue-400'}
    transition-colors
    \${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}
  \`;
  
  return (
    <button 
      className={classes}
      onClick={onClick}
      type={type}
      disabled={disabled}
    >
      {children}
    </button>
  );
}

export default ButtonTailwind;
\`\`\`

**Tipagem para Classes Tailwind:**

Para obter autocompletar e verificao de tipos para classes Tailwind, voc pode usar o pacote \`tailwind-merge\` e criar um helper tipado:

\`\`\`bash
npm install tailwind-merge clsx
\`\`\`

\`\`\`tsx
// src/utils/tailwind.ts
import { clsx, type ClassValue } from 'clsx';
import { twMerge } from 'tailwind-merge';

// Helper para combinar classes Tailwind de forma segura
export function cn(...inputs: ClassValue[]): string {
  return twMerge(clsx(inputs));
}
\`\`\`

\`\`\`tsx
// src/components/ButtonTailwindImproved.tsx
import React from 'react';
import { cn } from '../utils/tailwind';

interface ButtonProps {
  children: React.ReactNode;
  variant?: 'primary' | 'secondary';
  size?: 'small' | 'medium' | 'large';
  onClick?: () => void;
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
  className?: string; // Para classes adicionais
}

function ButtonTailwindImproved({ 
  children, 
  variant = 'primary', 
  size = 'medium',
  onClick, 
  type = 'button',
  disabled = false,
  className
}: ButtonProps): JSX.Element {
  return (
    <button 
      className={cn(
        // Classes base
        "font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-opacity-50",
        
        // Variantes
        variant === 'primary' && "bg-green-500 hover:bg-green-600 focus:ring-green-400",
        variant === 'secondary' && "bg-blue-500 hover:bg-blue-600 focus:ring-blue-400",
        
        // Tamanhos
        size === 'small' && "py-1 px-2 text-sm",
        size === 'medium' && "py-2 px-4 text-base",
        size === 'large' && "py-3 px-6 text-lg",
        
        // Estado desabilitado
        disabled && "opacity-50 cursor-not-allowed",
        
        // Classes personalizadas
        className
      )}
      onClick={onClick}
      type={type}
      disabled={disabled}
    >
      {children}
    </button>
  );
}

export default ButtonTailwindImproved;
\`\`\`

**Prs:**
- Desenvolvimento rpido sem escrever CSS
- Responsivo por padro
- Altamente customizvel
- Bom para prototipagem rpida

**Contras:**
- Classes podem tornar o JSX verboso
- Curva de aprendizado para memorizar as classes
- Pode ser difcil de manter em projetos muito grandes sem organizao adequada

### SASS/SCSS

SASS/SCSS  um pr-processador CSS que adiciona recursos como variveis, mixins, funes e aninhamento.

**Instalao:**

\`\`\`bash
npm install sass
\`\`\`

**Exemplo:**

\`\`\`scss
// src/styles/variables.scss
$primary-color: #4CAF50;
$secondary-color: #008CBA;
$border-radius: 4px;

// Mixins
@mixin button-base {
  border: none;
  border-radius: $border-radius;
  cursor: pointer;
  font-family: inherit;
  transition: background-color 0.2s;
  
  &:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
  }
}

@mixin button-size($padding-y, $padding-x, $font-size) {
  padding: $padding-y $padding-x;
  font-size: $font-size;
}
\`\`\`

\`\`\`scss
// src/components/Button.module.scss
@import '../styles/variables.scss';

.button {
  @include button-base;
  color: white;
  
  &.primary {
    background-color: $primary-color;
    
    &:hover:not(:disabled) {
      background-color: darken($primary-color, 5%);
    }
  }
  
  &.secondary {
    background-color: $secondary-color;
    
    &:hover:not(:disabled) {
      background-color: darken($secondary-color, 5%);
    }
  }
  
  &.small {
    @include button-size(5px, 10px, 0.8rem);
  }
  
  &.medium {
    @include button-size(10px, 15px, 1rem);
  }
  
  &.large {
    @include button-size(15px, 20px, 1.2rem);
  }
}
\`\`\`

\`\`\`tsx
// src/components/ButtonSass.tsx
import React from 'react';
import styles from './Button.module.scss';

interface ButtonProps {
  children: React.ReactNode;
  variant?: 'primary' | 'secondary';
  size?: 'small' | 'medium' | 'large';
  onClick?: () => void;
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
}

function ButtonSass({ 
  children, 
  variant = 'primary', 
  size = 'medium',
  onClick, 
  type = 'button',
  disabled = false
}: ButtonProps): JSX.Element {
  const className = \`\${styles.button} \${styles[variant]} \${styles[size]}\`;
  
  return (
    <button 
      className={className}
      onClick={onClick}
      type={type}
      disabled={disabled}
    >
      {children}
    </button>
  );
}

export default ButtonSass;
\`\`\`

**Tipagem para SCSS Modules:**

\`\`\`typescript
// src/types/scss.d.ts
declare module '*.module.scss' {
  const classes: { [key: string]: string };
  export default classes;
}
\`\`\`

**Prs:**
- Recursos avanados como variveis, mixins, funes
- Sintaxe familiar para quem conhece CSS
- Bom para projetos de mdio a grande porte
- Pode ser usado com CSS Modules para escopo local

**Contras:**
- Requer um pr-processador
- Pode levar a CSS excessivamente aninhado se no for bem gerenciado
- Tipagem limitada para classes SCSS

### Escolhendo a Abordagem Certa

A escolha da abordagem de estilizao depende de vrios fatores:

1. **Tamanho do Projeto:**
   - Projetos pequenos: CSS tradicional ou CSS Modules
   - Projetos mdios: CSS Modules, Styled Components, ou Tailwind CSS
   - Projetos grandes: Styled Components, Emotion, ou uma combinao de abordagens

2. **Preferncias da Equipe:**
   - Equipes familiarizadas com CSS tradicional podem preferir CSS Modules ou SASS
   - Equipes com foco em JavaScript podem preferir Styled Components ou Emotion
   - Equipes que valorizam velocidade de desenvolvimento podem preferir Tailwind CSS

3. **Requisitos de Performance:**
   - CSS tradicional e CSS Modules tm melhor performance inicial
   - CSS-in-JS pode ter impacto na performance de renderizao inicial, mas oferece mais recursos dinmicos

4. **Integrao com TypeScript:**
   - Styled Components e Emotion tm excelente integrao com TypeScript
   - CSS Modules e SCSS requerem arquivos de declarao adicionais
   - Tailwind CSS pode ser tipado com utilitrios como tailwind-merge e clsx

### Concluso

No existe uma abordagem "correta" para estilizao em React com TypeScript. Cada mtodo tem seus prs e contras, e a escolha depende das necessidades especficas do seu projeto e das preferncias da sua equipe.

Uma estratgia comum  usar uma combinao de abordagens:
- CSS Modules ou SCSS para componentes estticos
- Styled Components ou Emotion para componentes dinmicos baseados em props
- Tailwind CSS para prototipagem rpida ou componentes simples

Independentemente da abordagem escolhida, TypeScript adiciona uma camada valiosa de segurana de tipos que ajuda a evitar bugs relacionados a estilos e torna o cdigo mais fcil de entender e manter.
`,grt=()=>g.jsx(qe,{content:hrt,backRoute:"/react/consumo-api",backText:"Voltar: Consumo de APIs",goRoute:"/react/testes",goText:"Avanar: Testes"}),brt=`## 8. Testando Aplicaes React com TypeScript

Testes so uma parte essencial do desenvolvimento de software moderno. Com TypeScript, podemos adicionar uma camada extra de segurana aos nossos testes, garantindo que os componentes e funes sejam testados de acordo com seus tipos definidos.

### Ferramentas de Teste para React com TypeScript

Existem vrias ferramentas populares para testar aplicaes React com TypeScript:

1. **Jest**: Framework de teste com suporte a mocking, snapshots e cobertura de cdigo
2. **React Testing Library**: Biblioteca para testar componentes React de forma centrada no usurio
3. **Vitest**: Alternativa moderna ao Jest, otimizada para Vite
4. **Cypress**: Ferramenta para testes end-to-end
5. **Testing Library/User Event**: Biblioteca para simular interaes do usurio

Vamos explorar como usar essas ferramentas com TypeScript.

### Configurando Jest com TypeScript

Para configurar Jest com TypeScript em um projeto Vite:

\`\`\`bash
npm install -D jest @types/jest ts-jest jest-environment-jsdom @testing-library/react @testing-library/jest-dom @testing-library/user-event
\`\`\`

**Configurao do Jest (jest.config.js):**

\`\`\`typescript
/** @type {import('ts-jest').JestConfigWithTsJest} */
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: ['<rootDir>/src/setupTests.ts'],
  moduleNameMapper: {
    '\\\\.(css|less|scss|sass)$': 'identity-obj-proxy',
    '^@/(.*)$': '<rootDir>/src/$1'
  },
  transform: {
    '^.+\\\\.tsx?$': ['ts-jest', {
      tsconfig: 'tsconfig.test.json'
    }]
  }
};
\`\`\`

**Arquivo de configurao de testes (src/setupTests.ts):**

\`\`\`typescript
// src/setupTests.ts
import '@testing-library/jest-dom';
\`\`\`

**Adicionar scripts no package.json:**

\`\`\`json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage"
  }
}
\`\`\`

### Configurando Vitest com TypeScript

Se voc estiver usando Vite, Vitest  uma alternativa moderna ao Jest que se integra perfeitamente:

\`\`\`bash
npm install -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom
\`\`\`

**Configurao do Vitest (vite.config.ts):**

\`\`\`typescript
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/setupTests.ts',
    css: true
  }
});
\`\`\`

**Arquivo de configurao de testes (src/setupTests.ts):**

\`\`\`typescript
// src/setupTests.ts
import '@testing-library/jest-dom';
import { expect, afterEach } from 'vitest';
import { cleanup } from '@testing-library/react';
import matchers from '@testing-library/jest-dom/matchers';

// Estende os matchers do Vitest com os do testing-library
expect.extend(matchers);

// Limpa aps cada teste
afterEach(() => {
  cleanup();
});
\`\`\`

**Adicionar scripts no package.json:**

\`\`\`json
{
  "scripts": {
    "test": "vitest run",
    "test:watch": "vitest",
    "test:coverage": "vitest run --coverage"
  }
}
\`\`\`

### Testando Componentes React com TypeScript

Vamos ver como testar componentes React com TypeScript usando React Testing Library:

**Componente a ser testado:**

\`\`\`tsx
// src/components/Counter.tsx
import { useState } from 'react';

interface CounterProps {
  initialValue?: number;
  step?: number;
  onCountChange?: (count: number) => void;
}

function Counter({ 
  initialValue = 0, 
  step = 1,
  onCountChange
}: CounterProps): JSX.Element {
  const [count, setCount] = useState<number>(initialValue);

  const increment = (): void => {
    const newCount = count + step;
    setCount(newCount);
    onCountChange?.(newCount);
  };

  const decrement = (): void => {
    const newCount = count - step;
    setCount(newCount);
    onCountChange?.(newCount);
  };

  return (
    <div>
      <h2>Counter: {count}</h2>
      <button onClick={decrement} aria-label="Decrement">-</button>
      <button onClick={increment} aria-label="Increment">+</button>
    </div>
  );
}

export default Counter;
\`\`\`

**Teste do componente com Jest e React Testing Library:**

\`\`\`tsx
// src/components/Counter.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import Counter from './Counter';

describe('Counter Component', () => {
  test('renders with default initial value', () => {
    render(<Counter />);
    expect(screen.getByText(/counter: 0/i)).toBeInTheDocument();
  });

  test('renders with custom initial value', () => {
    render(<Counter initialValue={10} />);
    expect(screen.getByText(/counter: 10/i)).toBeInTheDocument();
  });

  test('increments counter when increment button is clicked', async () => {
    render(<Counter />);
    
    const incrementButton = screen.getByRole('button', { name: /increment/i });
    await userEvent.click(incrementButton);
    
    expect(screen.getByText(/counter: 1/i)).toBeInTheDocument();
  });

  test('decrements counter when decrement button is clicked', async () => {
    render(<Counter initialValue={5} />);
    
    const decrementButton = screen.getByRole('button', { name: /decrement/i });
    await userEvent.click(decrementButton);
    
    expect(screen.getByText(/counter: 4/i)).toBeInTheDocument();
  });

  test('uses custom step value', async () => {
    render(<Counter step={5} />);
    
    const incrementButton = screen.getByRole('button', { name: /increment/i });
    await userEvent.click(incrementButton);
    
    expect(screen.getByText(/counter: 5/i)).toBeInTheDocument();
  });

  test('calls onCountChange callback when count changes', async () => {
    const handleCountChange = jest.fn();
    render(<Counter onCountChange={handleCountChange} />);
    
    const incrementButton = screen.getByRole('button', { name: /increment/i });
    await userEvent.click(incrementButton);
    
    expect(handleCountChange).toHaveBeenCalledWith(1);
  });
});
\`\`\`

**Teste do componente com Vitest:**

\`\`\`tsx
// src/components/Counter.test.tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { describe, it, expect, vi } from 'vitest';
import Counter from './Counter';

describe('Counter Component', () => {
  it('renders with default initial value', () => {
    render(<Counter />);
    expect(screen.getByText(/counter: 0/i)).toBeInTheDocument();
  });

  it('renders with custom initial value', () => {
    render(<Counter initialValue={10} />);
    expect(screen.getByText(/counter: 10/i)).toBeInTheDocument();
  });

  it('increments counter when increment button is clicked', async () => {
    render(<Counter />);
    
    const incrementButton = screen.getByRole('button', { name: /increment/i });
    await userEvent.click(incrementButton);
    
    expect(screen.getByText(/counter: 1/i)).toBeInTheDocument();
  });

  it('decrements counter when decrement button is clicked', async () => {
    render(<Counter initialValue={5} />);
    
    const decrementButton = screen.getByRole('button', { name: /decrement/i });
    await userEvent.click(decrementButton);
    
    expect(screen.getByText(/counter: 4/i)).toBeInTheDocument();
  });

  it('uses custom step value', async () => {
    render(<Counter step={5} />);
    
    const incrementButton = screen.getByRole('button', { name: /increment/i });
    await userEvent.click(incrementButton);
    
    expect(screen.getByText(/counter: 5/i)).toBeInTheDocument();
  });

  it('calls onCountChange callback when count changes', async () => {
    const handleCountChange = vi.fn();
    render(<Counter onCountChange={handleCountChange} />);
    
    const incrementButton = screen.getByRole('button', { name: /increment/i });
    await userEvent.click(incrementButton);
    
    expect(handleCountChange).toHaveBeenCalledWith(1);
  });
});
\`\`\`

### Testando Hooks Personalizados

Testar hooks personalizados  uma parte importante do desenvolvimento React. Com TypeScript, podemos garantir que nossos hooks sejam testados de acordo com seus tipos definidos.

**Hook personalizado:**

\`\`\`tsx
// src/hooks/useCounter.ts
import { useState, useCallback } from 'react';

interface UseCounterOptions {
  initialValue?: number;
  step?: number;
  min?: number;
  max?: number;
}

interface UseCounterReturn {
  count: number;
  increment: () => void;
  decrement: () => void;
  reset: () => void;
  setCount: (value: number) => void;
}

function useCounter({
  initialValue = 0,
  step = 1,
  min = Number.MIN_SAFE_INTEGER,
  max = Number.MAX_SAFE_INTEGER
}: UseCounterOptions = {}): UseCounterReturn {
  const [count, setCount] = useState<number>(initialValue);

  const increment = useCallback((): void => {
    setCount((prevCount) => {
      const nextCount = prevCount + step;
      return nextCount <= max ? nextCount : prevCount;
    });
  }, [step, max]);

  const decrement = useCallback((): void => {
    setCount((prevCount) => {
      const nextCount = prevCount - step;
      return nextCount >= min ? nextCount : prevCount;
    });
  }, [step, min]);

  const reset = useCallback((): void => {
    setCount(initialValue);
  }, [initialValue]);

  const setCountSafe = useCallback((value: number): void => {
    setCount(Math.min(Math.max(value, min), max));
  }, [min, max]);

  return {
    count,
    increment,
    decrement,
    reset,
    setCount: setCountSafe
  };
}

export default useCounter;
\`\`\`

**Teste do hook personalizado:**

\`\`\`tsx
// src/hooks/useCounter.test.tsx
import { renderHook, act } from '@testing-library/react';
import useCounter from './useCounter';

describe('useCounter Hook', () => {
  test('should initialize with default values', () => {
    const { result } = renderHook(() => useCounter());
    expect(result.current.count).toBe(0);
  });

  test('should initialize with custom initial value', () => {
    const { result } = renderHook(() => useCounter({ initialValue: 10 }));
    expect(result.current.count).toBe(10);
  });

  test('should increment counter', () => {
    const { result } = renderHook(() => useCounter());
    
    act(() => {
      result.current.increment();
    });
    
    expect(result.current.count).toBe(1);
  });

  test('should decrement counter', () => {
    const { result } = renderHook(() => useCounter({ initialValue: 5 }));
    
    act(() => {
      result.current.decrement();
    });
    
    expect(result.current.count).toBe(4);
  });

  test('should use custom step value', () => {
    const { result } = renderHook(() => useCounter({ step: 5 }));
    
    act(() => {
      result.current.increment();
    });
    
    expect(result.current.count).toBe(5);
  });

  test('should reset counter', () => {
    const { result } = renderHook(() => useCounter({ initialValue: 10 }));
    
    act(() => {
      result.current.increment();
      result.current.reset();
    });
    
    expect(result.current.count).toBe(10);
  });

  test('should respect min value', () => {
    const { result } = renderHook(() => useCounter({ initialValue: 5, min: 0 }));
    
    act(() => {
      result.current.decrement();
      result.current.decrement();
      result.current.decrement();
      result.current.decrement();
      result.current.decrement();
      result.current.decrement(); // Tenta ir abaixo de 0
    });
    
    expect(result.current.count).toBe(0);
  });

  test('should respect max value', () => {
    const { result } = renderHook(() => useCounter({ initialValue: 8, max: 10 }));
    
    act(() => {
      result.current.increment();
      result.current.increment();
      result.current.increment(); // Tenta ir acima de 10
    });
    
    expect(result.current.count).toBe(10);
  });

  test('should set count directly', () => {
    const { result } = renderHook(() => useCounter());
    
    act(() => {
      result.current.setCount(15);
    });
    
    expect(result.current.count).toBe(15);
  });

  test('should respect min/max when setting count directly', () => {
    const { result } = renderHook(() => useCounter({ min: 0, max: 10 }));
    
    act(() => {
      result.current.setCount(-5); // Tenta definir abaixo do mnimo
    });
    expect(result.current.count).toBe(0);
    
    act(() => {
      result.current.setCount(15); // Tenta definir acima do mximo
    });
    expect(result.current.count).toBe(10);
  });
});
\`\`\`

### Testando Funes de Utilidade

Funes de utilidade so fceis de testar porque geralmente so funes puras que no dependem do estado do React.

**Funo de utilidade:**

\`\`\`tsx
// src/utils/formatters.ts

/**
 * Formata um nmero como moeda brasileira (BRL)
 */
export function formatCurrency(value: number): string {
  return new Intl.NumberFormat('pt-BR', {
    style: 'currency',
    currency: 'BRL'
  }).format(value);
}

/**
 * Formata uma data no padro brasileiro (DD/MM/YYYY)
 */
export function formatDate(date: Date): string {
  return new Intl.DateTimeFormat('pt-BR').format(date);
}

/**
 * Trunca um texto para o tamanho mximo especificado
 */
export function truncateText(text: string, maxLength: number): string {
  if (text.length <= maxLength) return text;
  return \`\${text.slice(0, maxLength)}...\`;
}

/**
 * Converte uma string para slug (URL amigvel)
 */
export function slugify(text: string): string {
  return text
    .toLowerCase()
    .normalize('NFD')
    .replace(/[\\u0300-\\u036f]/g, '')
    .replace(/[^\\w\\s-]/g, '')
    .replace(/\\s+/g, '-')
    .replace(/--+/g, '-')
    .trim();
}
\`\`\`

**Teste da funo de utilidade:**

\`\`\`tsx
// src/utils/formatters.test.ts
import { formatCurrency, formatDate, truncateText, slugify } from './formatters';

describe('Formatters', () => {
  describe('formatCurrency', () => {
    test('formats number as Brazilian currency', () => {
      expect(formatCurrency(1000)).toBe('R$ 1.000,00');
      expect(formatCurrency(1234.56)).toBe('R$ 1.234,56');
      expect(formatCurrency(0)).toBe('R$ 0,00');
    });
  });

  describe('formatDate', () => {
    test('formats date in Brazilian format', () => {
      const date = new Date(2023, 0, 15); // 15/01/2023
      expect(formatDate(date)).toBe('15/01/2023');
    });
  });

  describe('truncateText', () => {
    test('returns original text if shorter than maxLength', () => {
      expect(truncateText('Hello', 10)).toBe('Hello');
    });

    test('truncates text and adds ellipsis if longer than maxLength', () => {
      expect(truncateText('Hello World', 5)).toBe('Hello...');
    });

    test('handles empty string', () => {
      expect(truncateText('', 5)).toBe('');
    });
  });

  describe('slugify', () => {
    test('converts text to URL-friendly slug', () => {
      expect(slugify('Hello World')).toBe('hello-world');
      expect(slugify('Ol Mundo!')).toBe('ola-mundo');
      expect(slugify('React & TypeScript')).toBe('react-typescript');
      expect(slugify('  Espaos  Extras  ')).toBe('espacos-extras');
    });

    test('handles special characters and accents', () => {
      expect(slugify('Caf com acar')).toBe('cafe-com-acucar');
      expect(slugify('Ma & Pra')).toBe('maca-pera');
    });
  });
});
\`\`\`

### Testando Componentes com Props Complexas

Quando temos componentes com props complexas, TypeScript nos ajuda a garantir que estamos testando todos os casos corretamente.

**Componente com props complexas:**

\`\`\`tsx
// src/components/UserProfile.tsx
import React from 'react';

export interface Address {
  street: string;
  city: string;
  state: string;
  zipCode: string;
}

export interface User {
  id: number;
  name: string;
  email: string;
  role: 'admin' | 'user' | 'guest';
  status: 'active' | 'inactive' | 'pending';
  address?: Address;
  avatarUrl?: string;
}

interface UserProfileProps {
  user: User;
  showAddress?: boolean;
  onStatusChange?: (userId: number, newStatus: User['status']) => void;
}

function UserProfile({ 
  user, 
  showAddress = false,
  onStatusChange
}: UserProfileProps): JSX.Element {
  const handleStatusChange = (e: React.ChangeEvent<HTMLSelectElement>): void => {
    const newStatus = e.target.value as User['status'];
    onStatusChange?.(user.id, newStatus);
  };

  return (
    <div className="user-profile">
      <div className="user-header">
        {user.avatarUrl && (
          <img 
            src={user.avatarUrl} 
            alt={\`\${user.name}'s avatar\`} 
            className="user-avatar"
          />
        )}
        <h2>{user.name}</h2>
      </div>
      
      <div className="user-details">
        <p><strong>Email:</strong> {user.email}</p>
        <p><strong>Role:</strong> {user.role}</p>
        
        <div className="user-status">
          <label htmlFor="status">Status: </label>
          <select 
            id="status" 
            value={user.status} 
            onChange={handleStatusChange}
            disabled={!onStatusChange}
          >
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
            <option value="pending">Pending</option>
          </select>
        </div>
      </div>
      
      {showAddress && user.address && (
        <div className="user-address">
          <h3>Address</h3>
          <p>{user.address.street}</p>
          <p>{user.address.city}, {user.address.state} {user.address.zipCode}</p>
        </div>
      )}
    </div>
  );
}

export default UserProfile;
\`\`\`

**Teste do componente com props complexas:**

\`\`\`tsx
// src/components/UserProfile.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import UserProfile, { User } from './UserProfile';

// Mock de usurio para testes
const mockUser: User = {
  id: 1,
  name: 'John Doe',
  email: 'john@example.com',
  role: 'admin',
  status: 'active',
  address: {
    street: '123 Main St',
    city: 'Anytown',
    state: 'ST',
    zipCode: '12345'
  },
  avatarUrl: 'https://example.com/avatar.jpg'
};

describe('UserProfile Component', () => {
  test('renders user information correctly', () => {
    render(<UserProfile user={mockUser} />);
    
    expect(screen.getByText('John Doe')).toBeInTheDocument();
    expect(screen.getByText(/john@example\\.com/i)).toBeInTheDocument();
    expect(screen.getByText(/admin/i)).toBeInTheDocument();
    expect(screen.getByRole('combobox')).toHaveValue('active');
  });

  test('renders avatar when avatarUrl is provided', () => {
    render(<UserProfile user={mockUser} />);
    
    const avatar = screen.getByAltText(\`\${mockUser.name}'s avatar\`);
    expect(avatar).toBeInTheDocument();
    expect(avatar).toHaveAttribute('src', mockUser.avatarUrl);
  });

  test('does not render avatar when avatarUrl is not provided', () => {
    const userWithoutAvatar = { ...mockUser, avatarUrl: undefined };
    render(<UserProfile user={userWithoutAvatar} />);
    
    expect(screen.queryByAltText(\`\${mockUser.name}'s avatar\`)).not.toBeInTheDocument();
  });

  test('does not show address by default', () => {
    render(<UserProfile user={mockUser} />);
    
    expect(screen.queryByText('Address')).not.toBeInTheDocument();
    expect(screen.queryByText(mockUser.address!.street)).not.toBeInTheDocument();
  });

  test('shows address when showAddress prop is true', () => {
    render(<UserProfile user={mockUser} showAddress />);
    
    expect(screen.getByText('Address')).toBeInTheDocument();
    expect(screen.getByText(mockUser.address!.street)).toBeInTheDocument();
    expect(screen.getByText(\`\${mockUser.address!.city}, \${mockUser.address!.state} \${mockUser.address!.zipCode}\`)).toBeInTheDocument();
  });

  test('does not show address section when address is not provided', () => {
    const userWithoutAddress = { ...mockUser, address: undefined };
    render(<UserProfile user={userWithoutAddress} showAddress />);
    
    expect(screen.queryByText('Address')).not.toBeInTheDocument();
  });

  test('calls onStatusChange when status is changed', () => {
    const handleStatusChange = jest.fn();
    render(
      <UserProfile 
        user={mockUser} 
        onStatusChange={handleStatusChange} 
      />
    );
    
    const statusSelect = screen.getByRole('combobox');
    fireEvent.change(statusSelect, { target: { value: 'inactive' } });
    
    expect(handleStatusChange).toHaveBeenCalledWith(mockUser.id, 'inactive');
  });

  test('status select is disabled when onStatusChange is not provided', () => {
    render(<UserProfile user={mockUser} />);
    
    const statusSelect = screen.getByRole('combobox');
    expect(statusSelect).toBeDisabled();
  });
});
\`\`\`

### Testando Componentes com Context

Testar componentes que usam Context pode ser um pouco mais complexo, mas TypeScript nos ajuda a garantir que estamos fornecendo os valores corretos.

**Contexto:**

\`\`\`tsx
// src/contexts/ThemeContext.tsx
import React, { createContext, useContext, useState, ReactNode } from 'react';

type Theme = 'light' | 'dark';

interface ThemeContextType {
  theme: Theme;
  toggleTheme: () => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

interface ThemeProviderProps {
  children: ReactNode;
  initialTheme?: Theme;
}

export function ThemeProvider({ 
  children, 
  initialTheme = 'light' 
}: ThemeProviderProps): JSX.Element {
  const [theme, setTheme] = useState<Theme>(initialTheme);

  const toggleTheme = (): void => {
    setTheme(prevTheme => prevTheme === 'light' ? 'dark' : 'light');
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

export function useTheme(): ThemeContextType {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
}
\`\`\`

**Componente que usa o contexto:**

\`\`\`tsx
// src/components/ThemeToggle.tsx
import { useTheme } from '../contexts/ThemeContext';

function ThemeToggle(): JSX.Element {
  const { theme, toggleTheme } = useTheme();

  return (
    <button 
      onClick={toggleTheme}
      aria-label={\`Switch to \${theme === 'light' ? 'dark' : 'light'} theme\`}
      className={\`theme-toggle \${theme}\`}
    >
      Current theme: {theme}
    </button>
  );
}

export default ThemeToggle;
\`\`\`

**Teste do componente com contexto:**

\`\`\`tsx
// src/components/ThemeToggle.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import ThemeToggle from './ThemeToggle';
import { ThemeProvider } from '../contexts/ThemeContext';

describe('ThemeToggle Component', () => {
  test('renders with default light theme', () => {
    render(
      <ThemeProvider>
        <ThemeToggle />
      </ThemeProvider>
    );
    
    expect(screen.getByText(/current theme: light/i)).toBeInTheDocument();
  });

  test('renders with initial dark theme when provided', () => {
    render(
      <ThemeProvider initialTheme="dark">
        <ThemeToggle />
      </ThemeProvider>
    );
    
    expect(screen.getByText(/current theme: dark/i)).toBeInTheDocument();
  });

  test('toggles theme when clicked', () => {
    render(
      <ThemeProvider>
        <ThemeToggle />
      </ThemeProvider>
    );
    
    // Inicialmente  light
    expect(screen.getByText(/current theme: light/i)).toBeInTheDocument();
    
    // Clica no boto para alternar
    fireEvent.click(screen.getByRole('button'));
    
    // Agora deve ser dark
    expect(screen.getByText(/current theme: dark/i)).toBeInTheDocument();
    
    // Clica novamente
    fireEvent.click(screen.getByRole('button'));
    
    // Volta para light
    expect(screen.getByText(/current theme: light/i)).toBeInTheDocument();
  });

  test('has correct aria-label based on current theme', () => {
    render(
      <ThemeProvider>
        <ThemeToggle />
      </ThemeProvider>
    );
    
    // Inicialmente  light, ento o aria-label deve indicar mudana para dark
    expect(screen.getByRole('button')).toHaveAttribute('aria-label', 'Switch to dark theme');
    
    // Clica no boto para alternar
    fireEvent.click(screen.getByRole('button'));
    
    // Agora  dark, ento o aria-label deve indicar mudana para light
    expect(screen.getByRole('button')).toHaveAttribute('aria-label', 'Switch to light theme');
  });

  test('applies theme class to button', () => {
    render(
      <ThemeProvider>
        <ThemeToggle />
      </ThemeProvider>
    );
    
    const button = screen.getByRole('button');
    
    // Inicialmente tem a classe light
    expect(button).toHaveClass('light');
    
    // Clica no boto para alternar
    fireEvent.click(button);
    
    // Agora deve ter a classe dark
    expect(button).toHaveClass('dark');
  });
});
\`\`\`

### Testando Componentes Assncronos

Testar componentes que fazem requisies assncronas  uma parte importante do desenvolvimento React.

**Componente assncrono:**

\`\`\`tsx
// src/components/UserList.tsx
import { useState, useEffect } from 'react';

interface User {
  id: number;
  name: string;
  email: string;
}

function UserList(): JSX.Element {
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const fetchUsers = async (): Promise<void> => {
      try {
        setLoading(true);
        const response = await fetch('https://jsonplaceholder.typicode.com/users');
        
        if (!response.ok) {
          throw new Error(\`HTTP error! Status: \${response.status}\`);
        }
        
        const data: User[] = await response.json();
        setUsers(data);
        setError(null);
      } catch (err) {
        setError('Failed to fetch users');
        console.error(err);
      } finally {
        setLoading(false);
      }
    };

    fetchUsers();
  }, []);

  if (loading) return <p data-testid="loading">Loading users...</p>;
  if (error) return <p data-testid="error">Error: {error}</p>;
  if (users.length === 0) return <p data-testid="no-users">No users found</p>;

  return (
    <div>
      <h2>Users</h2>
      <ul data-testid="user-list">
        {users.map(user => (
          <li key={user.id}>
            <strong>{user.name}</strong> ({user.email})
          </li>
        ))}
      </ul>
    </div>
  );
}

export default UserList;
\`\`\`

**Teste do componente assncrono:**

\`\`\`tsx
// src/components/UserList.test.tsx
import { render, screen, waitFor } from '@testing-library/react';
import UserList from './UserList';

// Mock do fetch global
global.fetch = jest.fn();

describe('UserList Component', () => {
  // Resetar mocks antes de cada teste
  beforeEach(() => {
    jest.resetAllMocks();
  });

  test('shows loading state initially', () => {
    // Mock da implementao do fetch
    (global.fetch as jest.Mock).mockImplementationOnce(() => 
      new Promise(resolve => setTimeout(() => resolve({
        ok: true,
        json: () => Promise.resolve([])
      }), 100))
    );

    render(<UserList />);
    
    expect(screen.getByTestId('loading')).toBeInTheDocument();
  });

  test('renders users when fetch is successful', async () => {
    const mockUsers = [
      { id: 1, name: 'John Doe', email: 'john@example.com' },
      { id: 2, name: 'Jane Smith', email: 'jane@example.com' }
    ];

    // Mock da implementao do fetch
    (global.fetch as jest.Mock).mockImplementationOnce(() => 
      Promise.resolve({
        ok: true,
        json: () => Promise.resolve(mockUsers)
      })
    );

    render(<UserList />);
    
    // Espera o componente terminar de carregar
    await waitFor(() => {
      expect(screen.queryByTestId('loading')).not.toBeInTheDocument();
    });
    
    // Verifica se a lista de usurios foi renderizada
    expect(screen.getByTestId('user-list')).toBeInTheDocument();
    expect(screen.getByText('John Doe')).toBeInTheDocument();
    expect(screen.getByText('jane@example.com')).toBeInTheDocument();
  });

  test('shows error message when fetch fails', async () => {
    // Mock da implementao do fetch com erro
    (global.fetch as jest.Mock).mockImplementationOnce(() => 
      Promise.resolve({
        ok: false,
        status: 500
      })
    );

    render(<UserList />);
    
    // Espera o componente terminar de carregar
    await waitFor(() => {
      expect(screen.queryByTestId('loading')).not.toBeInTheDocument();
    });
    
    // Verifica se a mensagem de erro foi renderizada
    expect(screen.getByTestId('error')).toBeInTheDocument();
    expect(screen.getByText(/failed to fetch users/i)).toBeInTheDocument();
  });

  test('shows "No users found" when fetch returns empty array', async () => {
    // Mock da implementao do fetch com array vazio
    (global.fetch as jest.Mock).mockImplementationOnce(() => 
      Promise.resolve({
        ok: true,
        json: () => Promise.resolve([])
      })
    );

    render(<UserList />);
    
    // Espera o componente terminar de carregar
    await waitFor(() => {
      expect(screen.queryByTestId('loading')).not.toBeInTheDocument();
    });
    
    // Verifica se a mensagem de "nenhum usurio" foi renderizada
    expect(screen.getByTestId('no-users')).toBeInTheDocument();
    expect(screen.getByText(/no users found/i)).toBeInTheDocument();
  });
});
\`\`\`

### Melhores Prticas para Testes com TypeScript

1. **Use Tipos Explcitos:**
   - Defina interfaces claras para props, estados e retornos de funes
   - Use tipos genricos para componentes e hooks reutilizveis

2. **Teste Casos de Borda:**
   - Teste valores nulos, indefinidos e casos extremos
   - Verifique se a tipagem est correta em todos os cenrios

3. **Mock Inteligente:**
   - Use tipos para garantir que seus mocks correspondam s interfaces reais
   - Crie factories tipadas para gerar dados de teste

4. **Teste Acessibilidade:**
   - Use \`getByRole\` e outros queries baseados em acessibilidade
   - Verifique atributos ARIA e comportamento do teclado

5. **Organize Testes por Comportamento:**
   - Agrupe testes relacionados com \`describe\`
   - Use nomes descritivos que explicam o comportamento esperado

6. **Evite Testes Frgeis:**
   - No teste detalhes de implementao
   - Foque em testar o comportamento do componente do ponto de vista do usurio

7. **Mantenha Cobertura de Cdigo:**
   - Use ferramentas de cobertura para identificar cdigo no testado
   - Mire em alta cobertura, mas priorize qualidade sobre quantidade

### Concluso

Testar aplicaes React com TypeScript adiciona uma camada extra de segurana ao seu cdigo. A combinao de testes bem escritos e tipagem esttica ajuda a pegar erros mais cedo no ciclo de desenvolvimento e torna seu cdigo mais robusto e fcil de manter.

Lembre-se de que o objetivo dos testes no  apenas verificar se o cdigo funciona, mas tambm documentar o comportamento esperado e facilitar refatoraes futuras. Com TypeScript, voc pode ter ainda mais confiana de que suas mudanas no quebraro funcionalidades existentes.
`,yrt=()=>g.jsx(qe,{content:brt,backRoute:"/react/estilizacao",backText:"Voltar: Estilizao",goRoute:"/react/build-vite",goText:"Avanar: Build com Vite"}),vrt=`## 9. Desenvolvendo e Fazendo Build com Vite e TypeScript

O Vite  uma ferramenta de build moderna que oferece uma experincia de desenvolvimento extremamente rpida para projetos web. Combinado com TypeScript, ele proporciona um ambiente de desenvolvimento poderoso e eficiente para aplicaes React.

### Por que usar Vite com TypeScript?

1. **Desenvolvimento extremamente rpido**: O Vite utiliza ESM nativo do navegador durante o desenvolvimento, o que significa que no h bundling durante o desenvolvimento, resultando em tempos de inicializao e hot module replacement (HMR) muito mais rpidos.

2. **Configurao mnima**: O Vite vem com suporte integrado para TypeScript, React, e outras tecnologias modernas, exigindo configurao mnima para comear.

3. **Build otimizado**: Para produo, o Vite utiliza Rollup para criar builds altamente otimizados.

4. **Experincia de desenvolvedor aprimorada**: A combinao de TypeScript com Vite proporciona feedback de tipo em tempo real, autocompletar, e deteco de erros durante o desenvolvimento.

### Criando um Projeto React com Vite e TypeScript

Para criar um novo projeto React com Vite e TypeScript:

\`\`\`bash
# Usando npm
npm create vite@latest my-react-app -- --template react-ts

# Usando yarn
yarn create vite my-react-app --template react-ts

# Usando pnpm
pnpm create vite my-react-app --template react-ts
\`\`\`

Este comando cria um novo projeto com a seguinte estrutura bsica:

\`\`\`
my-react-app/
 node_modules/
 public/
    vite.svg
 src/
    assets/
       react.svg
    App.css
    App.tsx
    index.css
    main.tsx
    vite-env.d.ts
 .eslintrc.cjs
 .gitignore
 index.html
 package.json
 tsconfig.json
 tsconfig.node.json
 vite.config.ts
\`\`\`

### Entendendo os Arquivos de Configurao

#### tsconfig.json

O arquivo \`tsconfig.json\` contm as configuraes do TypeScript para o projeto:

\`\`\`json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
\`\`\`

Algumas configuraes importantes:

- \`target\`: Define a verso do ECMAScript para a qual o TypeScript deve compilar.
- \`lib\`: Especifica quais bibliotecas de definio de tipo devem ser includas.
- \`jsx\`: Define como o JSX deve ser transformado (\`react-jsx\`  o modo moderno que no requer importar React).
- \`strict\`: Habilita todas as verificaes de tipo estritas.
- \`noUnusedLocals\` e \`noUnusedParameters\`: Ajudam a manter o cdigo limpo, alertando sobre variveis e parmetros no utilizados.

#### vite.config.ts

O arquivo \`vite.config.ts\` contm as configuraes do Vite:

\`\`\`typescript
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
});
\`\`\`

Este  um arquivo de configurao bsico que inclui o plugin React. Voc pode estender esta configurao para adicionar mais plugins ou personalizar o comportamento do Vite.

### Comandos do Vite

Os comandos principais do Vite so:

\`\`\`bash
# Iniciar o servidor de desenvolvimento
npm run dev

# Construir para produo
npm run build

# Visualizar a build de produo localmente
npm run preview
\`\`\`

### Configuraes Avanadas do Vite

#### Aliases de Importao

Voc pode configurar aliases para facilitar a importao de mdulos:

\`\`\`typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
      '@components': path.resolve(__dirname, './src/components'),
      '@hooks': path.resolve(__dirname, './src/hooks'),
      '@utils': path.resolve(__dirname, './src/utils'),
    },
  },
});
\`\`\`

Tambm  necessrio atualizar o \`tsconfig.json\` para que o TypeScript reconhea esses aliases:

\`\`\`json
{
  "compilerOptions": {
    // ... outras configuraes
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@hooks/*": ["src/hooks/*"],
      "@utils/*": ["src/utils/*"]
    }
  }
}
\`\`\`

Agora voc pode importar mdulos usando os aliases:

\`\`\`typescript
// Antes
import Button from '../../components/Button';

// Depois
import Button from '@components/Button';
\`\`\`

#### Variveis de Ambiente

O Vite tem suporte integrado para variveis de ambiente:

\`\`\`typescript
// .env
VITE_API_URL=https://api.example.com

// .env.development
VITE_API_URL=https://dev-api.example.com

// .env.production
VITE_API_URL=https://prod-api.example.com
\`\`\`

Para usar as variveis de ambiente em seu cdigo:

\`\`\`typescript
// src/api/client.ts
const apiUrl = import.meta.env.VITE_API_URL;

export async function fetchData<T>(endpoint: string): Promise<T> {
  const response = await fetch(\`\${apiUrl}/\${endpoint}\`);
  
  if (!response.ok) {
    throw new Error(\`API error: \${response.status}\`);
  }
  
  return response.json() as Promise<T>;
}
\`\`\`

Para ter tipagem para as variveis de ambiente, crie um arquivo de declarao:

\`\`\`typescript
// src/vite-env.d.ts
/// <reference types="vite/client" />

interface ImportMetaEnv {
  readonly VITE_API_URL: string;
  // adicione outras variveis de ambiente aqui
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
\`\`\`

#### Configurando Proxy para Desenvolvimento

Para evitar problemas de CORS durante o desenvolvimento, voc pode configurar um proxy:

\`\`\`typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\\/api/, ''),
      },
    },
  },
});
\`\`\`

### Otimizando a Build para Produo

#### Code Splitting

O Vite faz code splitting automaticamente, mas voc pode otimizar ainda mais usando importaes dinmicas:

\`\`\`typescript
// src/App.tsx
import React, { lazy, Suspense } from 'react';
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import Loading from './components/Loading';

// Importaes estticas para componentes crticos
import Header from './components/Header';
import Footer from './components/Footer';

// Importaes dinmicas para componentes de rota
const Home = lazy(() => import('./pages/Home'));
const About = lazy(() => import('./pages/About'));
const Products = lazy(() => import('./pages/Products'));
const ProductDetail = lazy(() => import('./pages/ProductDetail'));
const NotFound = lazy(() => import('./pages/NotFound'));

function App(): JSX.Element {
  return (
    <BrowserRouter>
      <Header />
      <main>
        <Suspense fallback={<Loading />}>
          <Routes>
            <Route path="/" element={<Home />} />
            <Route path="/about" element={<About />} />
            <Route path="/products" element={<Products />} />
            <Route path="/products/:id" element={<ProductDetail />} />
            <Route path="*" element={<NotFound />} />
          </Routes>
        </Suspense>
      </main>
      <Footer />
    </BrowserRouter>
  );
}

export default App;
\`\`\`

#### Compresso de Arquivos

Voc pode adicionar plugins para comprimir os arquivos de sada:

\`\`\`bash
npm install vite-plugin-compression --save-dev
\`\`\`

\`\`\`typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import compression from 'vite-plugin-compression';

export default defineConfig({
  plugins: [
    react(),
    compression({
      algorithm: 'gzip', // ou 'brotliCompress'
      ext: '.gz', // extenso do arquivo comprimido
    }),
  ],
});
\`\`\`

#### Anlise de Bundle

Para analisar o tamanho do seu bundle:

\`\`\`bash
npm install rollup-plugin-visualizer --save-dev
\`\`\`

\`\`\`typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { visualizer } from 'rollup-plugin-visualizer';

export default defineConfig({
  plugins: [
    react(),
    visualizer({
      open: true, // abre automaticamente o relatrio aps a build
      filename: 'dist/stats.html', // caminho para o arquivo de relatrio
      gzipSize: true, // mostra o tamanho gzipped
      brotliSize: true, // mostra o tamanho brotli
    }),
  ],
});
\`\`\`

### Configurando ESLint e Prettier com TypeScript

Para garantir a qualidade do cdigo,  recomendvel configurar ESLint e Prettier:

\`\`\`bash
npm install eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-react eslint-plugin-react-hooks prettier eslint-plugin-prettier eslint-config-prettier --save-dev
\`\`\`

Crie um arquivo \`.eslintrc.js\`:

\`\`\`javascript
module.exports = {
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaVersion: 2020,
    sourceType: 'module',
    ecmaFeatures: {
      jsx: true,
    },
  },
  settings: {
    react: {
      version: 'detect',
    },
  },
  extends: [
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:prettier/recommended',
  ],
  rules: {
    // Suas regras personalizadas aqui
    'react/react-in-jsx-scope': 'off', // No  necessrio importar React com o novo JSX Transform
  },
};
\`\`\`

Crie um arquivo \`.prettierrc\`:

\`\`\`json
{
  "semi": true,
  "trailingComma": "all",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
\`\`\`

Adicione scripts ao \`package.json\`:

\`\`\`json
{
  "scripts": {
    "lint": "eslint src --ext .ts,.tsx",
    "lint:fix": "eslint src --ext .ts,.tsx --fix",
    "format": "prettier --write \\"src/**/*.{ts,tsx,css,scss}\\""
  }
}
\`\`\`

### Configurando Testes com Vitest

O Vitest  uma ferramenta de teste moderna que funciona muito bem com Vite:

\`\`\`bash
npm install vitest @testing-library/react @testing-library/jest-dom jsdom --save-dev
\`\`\`

Configure o Vitest no \`vite.config.ts\`:

\`\`\`typescript
/// <reference types="vitest" />
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/setupTests.ts',
  },
});
\`\`\`

Crie um arquivo \`src/setupTests.ts\`:

\`\`\`typescript
import '@testing-library/jest-dom';
\`\`\`

Adicione scripts ao \`package.json\`:

\`\`\`json
{
  "scripts": {
    "test": "vitest run",
    "test:watch": "vitest",
    "test:coverage": "vitest run --coverage"
  }
}
\`\`\`

### Configurando PWA com Vite

Para transformar sua aplicao em um Progressive Web App (PWA):

\`\`\`bash
npm install vite-plugin-pwa --save-dev
\`\`\`

\`\`\`typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { VitePWA } from 'vite-plugin-pwa';

export default defineConfig({
  plugins: [
    react(),
    VitePWA({
      registerType: 'autoUpdate',
      includeAssets: ['favicon.ico', 'robots.txt', 'apple-touch-icon.png'],
      manifest: {
        name: 'My React App',
        short_name: 'React App',
        description: 'My Awesome React App',
        theme_color: '#ffffff',
        icons: [
          {
            src: 'pwa-192x192.png',
            sizes: '192x192',
            type: 'image/png',
          },
          {
            src: 'pwa-512x512.png',
            sizes: '512x512',
            type: 'image/png',
          },
          {
            src: 'pwa-512x512.png',
            sizes: '512x512',
            type: 'image/png',
            purpose: 'any maskable',
          },
        ],
      },
    }),
  ],
});
\`\`\`

### Configurando Internacionalizao (i18n)

Para adicionar suporte a mltiplos idiomas:

\`\`\`bash
npm install i18next react-i18next i18next-browser-languagedetector --save
\`\`\`

\`\`\`typescript
// src/i18n/index.ts
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// Importando arquivos de traduo
import translationEN from './locales/en/translation.json';
import translationPT from './locales/pt/translation.json';

// Tipos para as tradues
declare module 'i18next' {
  interface CustomTypeOptions {
    resources: {
      translation: typeof translationEN;
    };
  }
}

const resources = {
  en: {
    translation: translationEN,
  },
  pt: {
    translation: translationPT,
  },
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false, // no  necessrio para React
    },
  });

export default i18n;
\`\`\`

\`\`\`typescript
// src/main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css';
import './i18n';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
);
\`\`\`

\`\`\`typescript
// src/components/LanguageSwitcher.tsx
import { useTranslation } from 'react-i18next';

function LanguageSwitcher(): JSX.Element {
  const { i18n } = useTranslation();

  const changeLanguage = (lng: string): void => {
    i18n.changeLanguage(lng);
  };

  return (
    <div>
      <button onClick={() => changeLanguage('en')}>English</button>
      <button onClick={() => changeLanguage('pt')}>Portugus</button>
    </div>
  );
}

export default LanguageSwitcher;
\`\`\`

\`\`\`typescript
// src/components/Welcome.tsx
import { useTranslation } from 'react-i18next';

function Welcome(): JSX.Element {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t('welcome.title')}</h1>
      <p>{t('welcome.description')}</p>
    </div>
  );
}

export default Welcome;
\`\`\`

### Melhores Prticas para Projetos Vite com TypeScript

1. **Estrutura de Diretrios Organizada**:
   \`\`\`
   src/
    assets/        # Imagens, fontes, etc.
    components/    # Componentes reutilizveis
       ui/        # Componentes de UI bsicos
       layout/    # Componentes de layout
    hooks/         # Hooks personalizados
    pages/         # Componentes de pgina
    services/      # Servios de API, etc.
    store/         # Gerenciamento de estado global
    types/         # Definies de tipos
    utils/         # Funes utilitrias
    App.tsx        # Componente raiz
    main.tsx       # Ponto de entrada
   \`\`\`

2. **Tipagem Estrita**:
   - Habilite \`strict: true\` no \`tsconfig.json\`
   - Evite usar \`any\` sempre que possvel
   - Use tipos genricos para componentes e funes reutilizveis

3. **Importaes Absolutas**:
   - Configure aliases para evitar importaes relativas profundas
   - Mantenha as importaes organizadas e agrupadas por tipo

4. **Code Splitting**:
   - Use importaes dinmicas para componentes de rota
   - Divida seu cdigo em chunks lgicos

5. **Otimizao de Performance**:
   - Use \`React.memo\` para componentes que renderizam frequentemente
   - Utilize \`useMemo\` e \`useCallback\` para valores e funes computacionalmente intensivas
   - Implemente virtualizao para listas longas

6. **Acessibilidade**:
   - Use elementos semnticos HTML
   - Adicione atributos ARIA quando necessrio
   - Teste com leitores de tela

7. **Testes**:
   - Escreva testes para componentes e hooks crticos
   - Use mocks para servios externos
   - Mantenha uma boa cobertura de cdigo

### Concluso

O Vite combinado com TypeScript oferece uma experincia de desenvolvimento moderna e eficiente para projetos React. Com tempos de inicializao rpidos, hot module replacement instantneo e builds otimizadas para produo, voc pode focar no que realmente importa: construir uma aplicao incrvel.

A tipagem esttica do TypeScript adiciona uma camada extra de segurana ao seu cdigo, ajudando a pegar erros mais cedo no ciclo de desenvolvimento e tornando seu cdigo mais robusto e fcil de manter.

Ao seguir as melhores prticas e aproveitar as ferramentas disponveis no ecossistema Vite e TypeScript, voc pode criar aplicaes React de alta qualidade, performticas e escalveis.
`,xrt=()=>g.jsx(qe,{content:vrt,backRoute:"/react/testes",backText:"Voltar: Testes",goRoute:"/react/projeto-pratico",goText:"Avanar: Projeto Prtico"}),Srt=`## 10. Projeto Prtico: TodoList com TypeScript

Neste captulo, vamos desenvolver um projeto prtico completo: uma aplicao TodoList usando React com TypeScript e Vite. Este projeto ir consolidar os conceitos que aprendemos at agora e demonstrar como aplic-los em um cenrio real.

### Configurao Inicial do Projeto

Primeiro, vamos criar um novo projeto React com TypeScript usando Vite:

\`\`\`bash
npm create vite@latest todo-list-ts -- --template react-ts
cd todo-list-ts
npm install
\`\`\`

### Estrutura de Diretrios

Vamos organizar nosso projeto com a seguinte estrutura:

\`\`\`
src/
 components/       # Componentes reutilizveis
    TodoForm.tsx
    TodoItem.tsx
    TodoList.tsx
 contexts/         # Contextos para gerenciamento de estado
    TodoContext.tsx
 hooks/            # Hooks personalizados
    useTodos.ts
 types/            # Definies de tipos
    todo.ts
 utils/            # Funes utilitrias
    storage.ts
 App.tsx           # Componente principal
 main.tsx          # Ponto de entrada
\`\`\`

### Definindo os Tipos

Vamos comear definindo os tipos para nossas tarefas:

\`\`\`typescript
// src/types/todo.ts
export interface Todo {
  id: string;
  text: string;
  completed: boolean;
  createdAt: Date;
}

export type TodoStatus = 'all' | 'active' | 'completed';

export interface TodoContextType {
  todos: Todo[];
  addTodo: (text: string) => void;
  toggleTodo: (id: string) => void;
  deleteTodo: (id: string) => void;
  clearCompleted: () => void;
  filter: TodoStatus;
  setFilter: (filter: TodoStatus) => void;
  remainingCount: number;
  completedCount: number;
}
\`\`\`

### Implementando o Armazenamento Local

Vamos criar um utilitrio para persistir as tarefas no localStorage:

\`\`\`typescript
// src/utils/storage.ts
import { Todo } from '../types/todo';

// Chave para armazenamento no localStorage
const STORAGE_KEY = 'todos-react-ts';

// Funo para carregar tarefas do localStorage
export function loadTodos(): Todo[] {
  const todosJson = localStorage.getItem(STORAGE_KEY);
  
  if (!todosJson) {
    return [];
  }
  
  try {
    // Precisamos converter as strings de data de volta para objetos Date
    return JSON.parse(todosJson, (key, value) => {
      if (key === 'createdAt') {
        return new Date(value);
      }
      return value;
    });
  } catch (e) {
    console.error('Erro ao carregar tarefas do localStorage:', e);
    return [];
  }
}

// Funo para salvar tarefas no localStorage
export function saveTodos(todos: Todo[]): void {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(todos));
}
\`\`\`

### Criando o Contexto para Gerenciamento de Estado

Vamos criar um contexto para gerenciar o estado das tarefas:

\`\`\`typescript
// src/contexts/TodoContext.tsx
import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import { v4 as uuidv4 } from 'uuid';
import { Todo, TodoStatus, TodoContextType } from '../types/todo';
import { loadTodos, saveTodos } from '../utils/storage';

// Criando o contexto com um valor inicial undefined
const TodoContext = createContext<TodoContextType | undefined>(undefined);

// Props para o provedor de contexto
interface TodoProviderProps {
  children: ReactNode;
}

// Provedor de contexto
export function TodoProvider({ children }: TodoProviderProps): JSX.Element {
  const [todos, setTodos] = useState<Todo[]>([]);
  const [filter, setFilter] = useState<TodoStatus>('all');

  // Carregar tarefas do localStorage ao iniciar
  useEffect(() => {
    setTodos(loadTodos());
  }, []);

  // Salvar tarefas no localStorage quando mudam
  useEffect(() => {
    saveTodos(todos);
  }, [todos]);

  // Adicionar uma nova tarefa
  const addTodo = (text: string): void => {
    if (text.trim()) {
      setTodos([
        ...todos,
        {
          id: uuidv4(),
          text: text.trim(),
          completed: false,
          createdAt: new Date()
        }
      ]);
    }
  };

  // Alternar o status de uma tarefa
  const toggleTodo = (id: string): void => {
    setTodos(
      todos.map(todo =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      )
    );
  };

  // Excluir uma tarefa
  const deleteTodo = (id: string): void => {
    setTodos(todos.filter(todo => todo.id !== id));
  };

  // Limpar todas as tarefas concludas
  const clearCompleted = (): void => {
    setTodos(todos.filter(todo => !todo.completed));
  };

  // Contadores
  const remainingCount = todos.filter(todo => !todo.completed).length;
  const completedCount = todos.length - remainingCount;

  // Valor do contexto
  const value: TodoContextType = {
    todos,
    addTodo,
    toggleTodo,
    deleteTodo,
    clearCompleted,
    filter,
    setFilter,
    remainingCount,
    completedCount
  };

  return <TodoContext.Provider value={value}>{children}</TodoContext.Provider>;
}

// Hook personalizado para usar o contexto
export function useTodoContext(): TodoContextType {
  const context = useContext(TodoContext);
  
  if (context === undefined) {
    throw new Error('useTodoContext deve ser usado dentro de um TodoProvider');
  }
  
  return context;
}
\`\`\`

### Criando o Hook Personalizado para Filtrar Tarefas

\`\`\`typescript
// src/hooks/useTodos.ts
import { useMemo } from 'react';
import { Todo, TodoStatus } from '../types/todo';
import { useTodoContext } from '../contexts/TodoContext';

export function useTodos() {
  const { todos, filter } = useTodoContext();
  
  // Filtra as tarefas com base no filtro atual
  const filteredTodos = useMemo(() => {
    switch (filter) {
      case 'active':
        return todos.filter(todo => !todo.completed);
      case 'completed':
        return todos.filter(todo => todo.completed);
      default:
        return todos;
    }
  }, [todos, filter]);
  
  // Ordena as tarefas por data de criao (mais recentes primeiro)
  const sortedTodos = useMemo(() => {
    return [...filteredTodos].sort(
      (a, b) => b.createdAt.getTime() - a.createdAt.getTime()
    );
  }, [filteredTodos]);
  
  return sortedTodos;
}
\`\`\`

### Implementando os Componentes

Agora, vamos implementar os componentes da nossa aplicao:

\`\`\`typescript
// src/components/TodoForm.tsx
import React, { useState, FormEvent } from 'react';
import { useTodoContext } from '../contexts/TodoContext';

function TodoForm(): JSX.Element {
  const [text, setText] = useState<string>('');
  const { addTodo } = useTodoContext();

  const handleSubmit = (e: FormEvent<HTMLFormElement>): void => {
    e.preventDefault();
    if (text.trim()) {
      addTodo(text);
      setText('');
    }
  };

  return (
    <form onSubmit={handleSubmit} className="todo-form">
      <input
        type="text"
        value={text}
        onChange={(e) => setText(e.target.value)}
        placeholder="O que precisa ser feito?"
        className="todo-input"
      />
      <button type="submit" className="todo-button">
        Adicionar
      </button>
    </form>
  );
}

export default TodoForm;
\`\`\`

\`\`\`typescript
// src/components/TodoItem.tsx
import React from 'react';
import { Todo } from '../types/todo';
import { useTodoContext } from '../contexts/TodoContext';

interface TodoItemProps {
  todo: Todo;
}

function TodoItem({ todo }: TodoItemProps): JSX.Element {
  const { toggleTodo, deleteTodo } = useTodoContext();

  // Formata a data de criao
  const formattedDate = new Intl.DateTimeFormat('pt-BR', {
    day: '2-digit',
    month: '2-digit',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  }).format(todo.createdAt);

  return (
    <li className={\`todo-item \${todo.completed ? 'completed' : ''}\`}>
      <div className="todo-content">
        <input
          type="checkbox"
          checked={todo.completed}
          onChange={() => toggleTodo(todo.id)}
          className="todo-checkbox"
        />
        <span className="todo-text">{todo.text}</span>
        <small className="todo-date">{formattedDate}</small>
      </div>
      <button
        onClick={() => deleteTodo(todo.id)}
        className="todo-delete"
        aria-label="Excluir tarefa"
      >
        
      </button>
    </li>
  );
}

export default TodoItem;
\`\`\`

\`\`\`typescript
// src/components/TodoList.tsx
import React from 'react';
import TodoItem from './TodoItem';
import { useTodos } from '../hooks/useTodos';
import { useTodoContext } from '../contexts/TodoContext';
import { TodoStatus } from '../types/todo';

function TodoList(): JSX.Element {
  const todos = useTodos();
  const {
    filter,
    setFilter,
    remainingCount,
    completedCount,
    clearCompleted
  } = useTodoContext();

  // Funo para alternar o filtro
  const handleFilterChange = (newFilter: TodoStatus): void => {
    setFilter(newFilter);
  };

  return (
    <div className="todo-list-container">
      {todos.length > 0 ? (
        <ul className="todo-list">
          {todos.map(todo => (
            <TodoItem key={todo.id} todo={todo} />
          ))}
        </ul>
      ) : (
        <p className="empty-message">
          {filter === 'all'
            ? 'Nenhuma tarefa adicionada.'
            : filter === 'active'
            ? 'Nenhuma tarefa ativa.'
            : 'Nenhuma tarefa concluda.'}
        </p>
      )}

      <div className="todo-footer">
        <span className="todo-count">
          {remainingCount} {remainingCount === 1 ? 'tarefa' : 'tarefas'} restante
          {remainingCount !== 1 ? 's' : ''}
        </span>

        <div className="todo-filters">
          <button
            className={filter === 'all' ? 'active' : ''}
            onClick={() => handleFilterChange('all')}
          >
            Todas
          </button>
          <button
            className={filter === 'active' ? 'active' : ''}
            onClick={() => handleFilterChange('active')}
          >
            Ativas
          </button>
          <button
            className={filter === 'completed' ? 'active' : ''}
            onClick={() => handleFilterChange('completed')}
          >
            Concludas
          </button>
        </div>

        {completedCount > 0 && (
          <button className="clear-completed" onClick={clearCompleted}>
            Limpar concludas
          </button>
        )}
      </div>
    </div>
  );
}

export default TodoList;
\`\`\`

### Implementando o Componente Principal

\`\`\`typescript
// src/App.tsx
import React from 'react';
import TodoForm from './components/TodoForm';
import TodoList from './components/TodoList';
import { TodoProvider } from './contexts/TodoContext';
import './App.css';

function App(): JSX.Element {
  return (
    <TodoProvider>
      <div className="todo-app">
        <h1>Lista de Tarefas</h1>
        <TodoForm />
        <TodoList />
      </div>
    </TodoProvider>
  );
}

export default App;
\`\`\`

### Estilizando a Aplicao

Vamos adicionar alguns estilos para nossa aplicao:

\`\`\`css
/* src/App.css */
:root {
  --primary-color: #4caf50;
  --secondary-color: #f44336;
  --text-color: #333;
  --bg-color: #f9f9f9;
  --item-bg: #fff;
  --border-color: #ddd;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  color: var(--text-color);
  background-color: var(--bg-color);
  padding: 20px;
}

.todo-app {
  max-width: 600px;
  margin: 0 auto;
  background-color: var(--item-bg);
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  padding: 20px;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
  color: var(--primary-color);
}

.todo-form {
  display: flex;
  margin-bottom: 20px;
}

.todo-input {
  flex: 1;
  padding: 10px;
  border: 1px solid var(--border-color);
  border-radius: 4px 0 0 4px;
  font-size: 16px;
}

.todo-button {
  padding: 10px 15px;
  background-color: var(--primary-color);
  color: white;
  border: none;
  border-radius: 0 4px 4px 0;
  cursor: pointer;
  font-size: 16px;
}

.todo-button:hover {
  background-color: #45a049;
}

.todo-list {
  list-style: none;
}

.todo-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  border-bottom: 1px solid var(--border-color);
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.todo-item.completed .todo-text {
  text-decoration: line-through;
  color: #888;
}

.todo-content {
  display: flex;
  align-items: center;
  flex: 1;
}

.todo-checkbox {
  margin-right: 10px;
  width: 18px;
  height: 18px;
}

.todo-text {
  flex: 1;
}

.todo-date {
  margin-left: 10px;
  color: #888;
  font-size: 12px;
}

.todo-delete {
  background-color: transparent;
  border: none;
  color: var(--secondary-color);
  font-size: 20px;
  cursor: pointer;
  padding: 0 5px;
}

.todo-delete:hover {
  color: #d32f2f;
}

.todo-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 15px;
  font-size: 14px;
  flex-wrap: wrap;
}

.todo-count {
  color: #777;
}

.todo-filters {
  display: flex;
}

.todo-filters button {
  background-color: transparent;
  border: 1px solid transparent;
  color: #777;
  margin: 0 5px;
  padding: 3px 7px;
  border-radius: 3px;
  cursor: pointer;
}

.todo-filters button.active {
  border-color: var(--primary-color);
  color: var(--primary-color);
}

.clear-completed {
  background-color: transparent;
  border: none;
  color: #888;
  cursor: pointer;
}

.clear-completed:hover {
  text-decoration: underline;
  color: var(--secondary-color);
}

.empty-message {
  text-align: center;
  color: #888;
  padding: 20px 0;
}

@media (max-width: 600px) {
  .todo-footer {
    flex-direction: column;
    gap: 10px;
  }
  
  .todo-filters {
    order: -1;
    margin-bottom: 10px;
  }
}
\`\`\`

### Configurando o Ponto de Entrada

\`\`\`typescript
// src/main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
\`\`\`

### Instalando Dependncias Adicionais

Precisamos instalar a biblioteca uuid para gerar IDs nicos:

\`\`\`bash
npm install uuid
npm install --save-dev @types/uuid
\`\`\`

### Executando a Aplicao

Para executar a aplicao:

\`\`\`bash
npm run dev
\`\`\`

### Adicionando Funcionalidades Avanadas

Vamos adicionar algumas funcionalidades avanadas  nossa aplicao:

#### 1. Edio de Tarefas

Vamos modificar o componente \`TodoItem\` para permitir a edio de tarefas:

\`\`\`typescript
// src/contexts/TodoContext.tsx (adicionar funo)
// ...
// Atualizar o texto de uma tarefa
const updateTodoText = (id: string, text: string): void => {
  if (text.trim()) {
    setTodos(
      todos.map(todo =>
        todo.id === id ? { ...todo, text: text.trim() } : todo
      )
    );
  }
};

// Adicionar ao valor do contexto
const value: TodoContextType = {
  // ...
  updateTodoText,
  // ...
};
// ...
\`\`\`

\`\`\`typescript
// src/types/todo.ts (atualizar interface)
export interface TodoContextType {
  // ...
  updateTodoText: (id: string, text: string) => void;
  // ...
}
\`\`\`

\`\`\`typescript
// src/components/TodoItem.tsx (modificar)
import React, { useState, useRef, useEffect } from 'react';
import { Todo } from '../types/todo';
import { useTodoContext } from '../contexts/TodoContext';

interface TodoItemProps {
  todo: Todo;
}

function TodoItem({ todo }: TodoItemProps): JSX.Element {
  const { toggleTodo, deleteTodo, updateTodoText } = useTodoContext();
  const [isEditing, setIsEditing] = useState<boolean>(false);
  const [editText, setEditText] = useState<string>(todo.text);
  const editInputRef = useRef<HTMLInputElement>(null);

  // Formata a data de criao
  const formattedDate = new Intl.DateTimeFormat('pt-BR', {
    day: '2-digit',
    month: '2-digit',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  }).format(todo.createdAt);

  // Focar no input quando entrar no modo de edio
  useEffect(() => {
    if (isEditing && editInputRef.current) {
      editInputRef.current.focus();
    }
  }, [isEditing]);

  const handleEdit = (): void => {
    setIsEditing(true);
  };

  const handleSave = (): void => {
    if (editText.trim() !== todo.text) {
      updateTodoText(todo.id, editText);
    }
    setIsEditing(false);
  };

  const handleKeyDown = (e: React.KeyboardEvent): void => {
    if (e.key === 'Enter') {
      handleSave();
    } else if (e.key === 'Escape') {
      setEditText(todo.text);
      setIsEditing(false);
    }
  };

  return (
    <li className={\`todo-item \${todo.completed ? 'completed' : ''}\`}>
      <div className="todo-content">
        <input
          type="checkbox"
          checked={todo.completed}
          onChange={() => toggleTodo(todo.id)}
          className="todo-checkbox"
        />
        
        {isEditing ? (
          <input
            ref={editInputRef}
            type="text"
            value={editText}
            onChange={(e) => setEditText(e.target.value)}
            onBlur={handleSave}
            onKeyDown={handleKeyDown}
            className="todo-edit-input"
          />
        ) : (
          <span className="todo-text" onDoubleClick={handleEdit}>
            {todo.text}
          </span>
        )}
        
        <small className="todo-date">{formattedDate}</small>
      </div>
      
      <button
        onClick={() => deleteTodo(todo.id)}
        className="todo-delete"
        aria-label="Excluir tarefa"
      >
        
      </button>
    </li>
  );
}

export default TodoItem;
\`\`\`

Adicione os estilos para o input de edio:

\`\`\`css
/* src/App.css (adicionar) */
.todo-edit-input {
  flex: 1;
  padding: 5px;
  border: 1px solid var(--primary-color);
  border-radius: 4px;
  font-size: 16px;
}
\`\`\`

#### 2. Drag and Drop para Reordenar Tarefas

Vamos adicionar a funcionalidade de arrastar e soltar para reordenar as tarefas:

\`\`\`bash
npm install react-beautiful-dnd
npm install --save-dev @types/react-beautiful-dnd
\`\`\`

\`\`\`typescript
// src/contexts/TodoContext.tsx (adicionar funo)
// ...
// Reordenar tarefas
const reorderTodos = (startIndex: number, endIndex: number): void => {
  const result = Array.from(todos);
  const [removed] = result.splice(startIndex, 1);
  result.splice(endIndex, 0, removed);
  setTodos(result);
};

// Adicionar ao valor do contexto
const value: TodoContextType = {
  // ...
  reorderTodos,
  // ...
};
// ...
\`\`\`

\`\`\`typescript
// src/types/todo.ts (atualizar interface)
export interface TodoContextType {
  // ...
  reorderTodos: (startIndex: number, endIndex: number) => void;
  // ...
}
\`\`\`

\`\`\`typescript
// src/components/TodoList.tsx (modificar)
import React from 'react';
import { DragDropContext, Droppable, Draggable, DropResult } from 'react-beautiful-dnd';
import TodoItem from './TodoItem';
import { useTodos } from '../hooks/useTodos';
import { useTodoContext } from '../contexts/TodoContext';
import { TodoStatus } from '../types/todo';

function TodoList(): JSX.Element {
  const todos = useTodos();
  const {
    filter,
    setFilter,
    remainingCount,
    completedCount,
    clearCompleted,
    reorderTodos
  } = useTodoContext();

  // Funo para alternar o filtro
  const handleFilterChange = (newFilter: TodoStatus): void => {
    setFilter(newFilter);
  };

  // Funo para lidar com o fim do arrasto
  const handleDragEnd = (result: DropResult): void => {
    // Ignorar se no foi solto em uma rea vlida
    if (!result.destination) {
      return;
    }

    // Ignorar se a posio no mudou
    if (
      result.destination.index === result.source.index
    ) {
      return;
    }

    // Reordenar as tarefas
    reorderTodos(result.source.index, result.destination.index);
  };

  return (
    <div className="todo-list-container">
      {todos.length > 0 ? (
        <DragDropContext onDragEnd={handleDragEnd}>
          <Droppable droppableId="todo-list">
            {(provided) => (
              <ul
                className="todo-list"
                {...provided.droppableProps}
                ref={provided.innerRef}
              >
                {todos.map((todo, index) => (
                  <Draggable
                    key={todo.id}
                    draggableId={todo.id}
                    index={index}
                  >
                    {(provided) => (
                      <div
                        ref={provided.innerRef}
                        {...provided.draggableProps}
                        {...provided.dragHandleProps}
                      >
                        <TodoItem todo={todo} />
                      </div>
                    )}
                  </Draggable>
                ))}
                {provided.placeholder}
              </ul>
            )}
          </Droppable>
        </DragDropContext>
      ) : (
        <p className="empty-message">
          {filter === 'all'
            ? 'Nenhuma tarefa adicionada.'
            : filter === 'active'
            ? 'Nenhuma tarefa ativa.'
            : 'Nenhuma tarefa concluda.'}
        </p>
      )}

      <div className="todo-footer">
        <span className="todo-count">
          {remainingCount} {remainingCount === 1 ? 'tarefa' : 'tarefas'} restante
          {remainingCount !== 1 ? 's' : ''}
        </span>

        <div className="todo-filters">
          <button
            className={filter === 'all' ? 'active' : ''}
            onClick={() => handleFilterChange('all')}
          >
            Todas
          </button>
          <button
            className={filter === 'active' ? 'active' : ''}
            onClick={() => handleFilterChange('active')}
          >
            Ativas
          </button>
          <button
            className={filter === 'completed' ? 'active' : ''}
            onClick={() => handleFilterChange('completed')}
          >
            Concludas
          </button>
        </div>

        {completedCount > 0 && (
          <button className="clear-completed" onClick={clearCompleted}>
            Limpar concludas
          </button>
        )}
      </div>
    </div>
  );
}

export default TodoList;
\`\`\`

Adicione estilos para melhorar a experincia de arrastar e soltar:

\`\`\`css
/* src/App.css (adicionar) */
.todo-item {
  /* ... estilos existentes ... */
  cursor: grab;
  transition: background-color 0.2s;
}

.todo-item:active {
  cursor: grabbing;
}
\`\`\`

#### 3. Tema Escuro

Vamos adicionar um tema escuro  nossa aplicao:

\`\`\`typescript
// src/contexts/ThemeContext.tsx
import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

type Theme = 'light' | 'dark';

interface ThemeContextType {
  theme: Theme;
  toggleTheme: () => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

interface ThemeProviderProps {
  children: ReactNode;
}

export function ThemeProvider({ children }: ThemeProviderProps): JSX.Element {
  // Tenta obter o tema do localStorage ou usa 'light' como padro
  const [theme, setTheme] = useState<Theme>(() => {
    const savedTheme = localStorage.getItem('theme');
    return (savedTheme === 'dark' ? 'dark' : 'light') as Theme;
  });

  // Atualiza o localStorage e o atributo data-theme no documento quando o tema muda
  useEffect(() => {
    localStorage.setItem('theme', theme);
    document.documentElement.setAttribute('data-theme', theme);
  }, [theme]);

  const toggleTheme = (): void => {
    setTheme(prevTheme => (prevTheme === 'light' ? 'dark' : 'light'));
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

export function useTheme(): ThemeContextType {
  const context = useContext(ThemeContext);
  
  if (context === undefined) {
    throw new Error('useTheme deve ser usado dentro de um ThemeProvider');
  }
  
  return context;
}
\`\`\`

\`\`\`typescript
// src/components/ThemeToggle.tsx
import React from 'react';
import { useTheme } from '../contexts/ThemeContext';

function ThemeToggle(): JSX.Element {
  const { theme, toggleTheme } = useTheme();

  return (
    <button
      onClick={toggleTheme}
      className="theme-toggle"
      aria-label={\`Alternar para tema \${theme === 'light' ? 'escuro' : 'claro'}\`}
    >
      {theme === 'light' ? '' : ''}
    </button>
  );
}

export default ThemeToggle;
\`\`\`

\`\`\`typescript
// src/App.tsx (modificar)
import React from 'react';
import TodoForm from './components/TodoForm';
import TodoList from './components/TodoList';
import ThemeToggle from './components/ThemeToggle';
import { TodoProvider } from './contexts/TodoContext';
import { ThemeProvider } from './contexts/ThemeContext';
import './App.css';

function App(): JSX.Element {
  return (
    <ThemeProvider>
      <TodoProvider>
        <div className="todo-app">
          <div className="app-header">
            <h1>Lista de Tarefas</h1>
            <ThemeToggle />
          </div>
          <TodoForm />
          <TodoList />
        </div>
      </TodoProvider>
    </ThemeProvider>
  );
}

export default App;
\`\`\`

Adicione os estilos para o tema escuro:

\`\`\`css
/* src/App.css (modificar) */
:root {
  --primary-color: #4caf50;
  --secondary-color: #f44336;
  --text-color: #333;
  --bg-color: #f9f9f9;
  --item-bg: #fff;
  --border-color: #ddd;
}

[data-theme='dark'] {
  --primary-color: #66bb6a;
  --secondary-color: #ff5252;
  --text-color: #f5f5f5;
  --bg-color: #121212;
  --item-bg: #1e1e1e;
  --border-color: #333;
}

/* ... estilos existentes ... */

.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.theme-toggle {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  transition: background-color 0.3s;
}

.theme-toggle:hover {
  background-color: rgba(0, 0, 0, 0.1);
}

[data-theme='dark'] .theme-toggle:hover {
  background-color: rgba(255, 255, 255, 0.1);
}
\`\`\`

### Concluso

Neste projeto prtico, criamos uma aplicao TodoList completa usando React com TypeScript e Vite. Implementamos vrias funcionalidades:

1. Gerenciamento de estado com Context API
2. Persistncia de dados com localStorage
3. Filtragem de tarefas
4. Edio de tarefas
5. Drag and Drop para reordenar tarefas
6. Tema claro/escuro

Este projeto demonstra como TypeScript pode ser usado para criar aplicaes React robustas e bem tipadas. A tipagem esttica nos ajuda a evitar erros comuns e torna o cdigo mais fcil de entender e manter.

Voc pode expandir este projeto adicionando mais funcionalidades, como:

- Categorias ou tags para tarefas
- Datas de vencimento
- Notificaes
- Sincronizao com um backend
- Testes automatizados

O cdigo completo deste projeto est disponvel no repositrio do curso. Sinta-se  vontade para us-lo como base para seus prprios projetos!
`,Ert=()=>g.jsx(qe,{content:Srt,backRoute:"/react/build-vite",backText:"Voltar: Build com Vite",goRoute:"/react/dicas-vaga",goText:"Avanar: Dicas para Vaga"}),Trt=`## 11. Dicas para Conseguir uma Vaga de Desenvolvedor React com TypeScript

Agora que voc j domina os fundamentos do React com TypeScript, vamos abordar algumas dicas importantes para ajud-lo a conquistar uma vaga como desenvolvedor React jnior. O mercado de trabalho para desenvolvedores React est aquecido, e o conhecimento de TypeScript  cada vez mais valorizado pelas empresas.

### Construa um Portflio Slido

Um portflio bem estruturado  essencial para demonstrar suas habilidades aos recrutadores:

1. **Projetos Pessoais com TypeScript:**
   - Desenvolva pelo menos 3-5 projetos usando React e TypeScript
   - Inclua projetos que demonstrem diferentes habilidades (UI/UX, gerenciamento de estado, consumo de APIs, etc.)
   - Documente bem seus projetos com READMEs detalhados

2. **Projeto TodoList:**
   - Expanda o projeto TodoList que desenvolvemos neste curso
   - Adicione funcionalidades como autenticao, backend, testes, etc.
   - Use-o como demonstrao de suas habilidades com TypeScript

3. **Clone de Aplicaes Populares:**
   - Recrie verses simplificadas de aplicaes populares (Twitter, Instagram, etc.)
   - Foque em implementar as principais funcionalidades com TypeScript
   - Demonstre boas prticas de tipagem e organizao de cdigo

4. **Contribuies Open Source:**
   - Contribua para projetos React/TypeScript de cdigo aberto
   - Mesmo correes pequenas ou melhorias na documentao so valiosas
   - Isso demonstra sua capacidade de trabalhar em cdigo existente

### Otimize seu GitHub

Seu perfil no GitHub  seu carto de visitas para recrutadores tcnicos:

1. **Organize seus Repositrios:**
   - Use nomes descritivos e claros
   - Adicione descries detalhadas
   - Inclua tpicos relevantes (react, typescript, etc.)

2. **READMEs Completos:**
   - Inclua capturas de tela ou GIFs demonstrando a aplicao
   - Liste as tecnologias utilizadas
   - Fornea instrues claras de instalao e uso
   - Explique as decises tcnicas importantes

3. **Cdigo Limpo e Bem Tipado:**
   - Mantenha um estilo de cdigo consistente
   - Use tipagem adequada em TypeScript (evite \`any\`)
   - Adicione comentrios em partes complexas
   - Organize seu cdigo em componentes reutilizveis

4. **Commits Significativos:**
   - Faa commits frequentes com mensagens claras
   - Siga convenes como Conventional Commits
   - Demonstre um fluxo de trabalho organizado

### Prepare-se para Entrevistas Tcnicas

As entrevistas para vagas de React com TypeScript geralmente incluem:

1. **Questes Conceituais:**

   - **React Bsico:**
     \`\`\`typescript
     // Como voc criaria um componente funcional com TypeScript?
     interface GreetingProps {
       name: string;
       age?: number;
     }
     
     const Greeting: React.FC<GreetingProps> = ({ name, age }) => {
       return (
         <div>
           <h1>Ol, {name}!</h1>
           {age !== undefined && <p>Voc tem {age} anos.</p>}
         </div>
       );
     };
     \`\`\`

   - **Ciclo de Vida e Hooks:**
     \`\`\`typescript
     // Como voc implementaria um efeito que s executa na montagem do componente?
     useEffect(() => {
       console.log('Componente montado');
       
       return () => {
         console.log('Componente desmontado');
       };
     }, []); // Array de dependncias vazio
     \`\`\`

   - **Tipagem de Props:**
     \`\`\`typescript
     // Como voc tiparia props que incluem children?
     interface CardProps {
       title: string;
       children: React.ReactNode;
     }
     
     const Card = ({ title, children }: CardProps): JSX.Element => {
       return (
         <div className="card">
           <h2>{title}</h2>
           <div className="card-content">{children}</div>
         </div>
       );
     };
     \`\`\`

   - **Tipagem de Eventos:**
     \`\`\`typescript
     // Como voc tiparia um manipulador de eventos?
     const handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {
       console.log(e.target.value);
     };
     
     const handleSubmit = (e: React.FormEvent<HTMLFormElement>): void => {
       e.preventDefault();
       // lgica de submisso
     };
     \`\`\`

2. **Exerccios Prticos:**

   - **Implementao de Componentes:**
     \`\`\`typescript
     // Implemente um contador com TypeScript
     import { useState } from 'react';
     
     interface CounterProps {
       initialValue?: number;
       step?: number;
     }
     
     const Counter = ({ 
       initialValue = 0, 
       step = 1 
     }: CounterProps): JSX.Element => {
       const [count, setCount] = useState<number>(initialValue);
       
       const increment = (): void => {
         setCount(prev => prev + step);
       };
       
       const decrement = (): void => {
         setCount(prev => prev - step);
       };
       
       return (
         <div>
           <h2>Count: {count}</h2>
           <button onClick={decrement}>-</button>
           <button onClick={increment}>+</button>
         </div>
       );
     };
     \`\`\`

   - **Consumo de API:**
     \`\`\`typescript
     // Implemente um componente que busca dados de uma API
     import { useState, useEffect } from 'react';
     
     interface User {
       id: number;
       name: string;
       email: string;
     }
     
     const UserList = (): JSX.Element => {
       const [users, setUsers] = useState<User[]>([]);
       const [loading, setLoading] = useState<boolean>(true);
       const [error, setError] = useState<string | null>(null);
       
       useEffect(() => {
         const fetchUsers = async (): Promise<void> => {
           try {
             const response = await fetch('https://jsonplaceholder.typicode.com/users');
             if (!response.ok) {
               throw new Error('Failed to fetch');
             }
             const data: User[] = await response.json();
             setUsers(data);
           } catch (err) {
             setError(err instanceof Error ? err.message : 'An error occurred');
           } finally {
             setLoading(false);
           }
         };
         
         fetchUsers();
       }, []);
       
       if (loading) return <p>Loading...</p>;
       if (error) return <p>Error: {error}</p>;
       
       return (
         <ul>
           {users.map(user => (
             <li key={user.id}>{user.name} ({user.email})</li>
           ))}
         </ul>
       );
     };
     \`\`\`

3. **Perguntas sobre TypeScript:**

   - **Tipos vs. Interfaces:**
     \`\`\`typescript
     // Quando usar type vs. interface?
     
     // Use interface para definir contratos de objetos que podem ser estendidos
     interface User {
       id: number;
       name: string;
     }
     
     interface AdminUser extends User {
       permissions: string[];
     }
     
     // Use type para unies, intersees e tipos mais complexos
     type UserRole = 'admin' | 'editor' | 'viewer';
     
     type UserWithRole = User & {
       role: UserRole;
     };
     \`\`\`

   - **Generics:**
     \`\`\`typescript
     // Como voc implementaria uma funo genrica?
     function getFirstItem<T>(array: T[]): T | undefined {
       return array.length > 0 ? array[0] : undefined;
     }
     
     // Uso:
     const numbers = [1, 2, 3];
     const firstNumber = getFirstItem<number>(numbers); // tipo: number | undefined
     
     const users: User[] = [{ id: 1, name: 'John' }];
     const firstUser = getFirstItem<User>(users); // tipo: User | undefined
     \`\`\`

   - **Utility Types:**
     \`\`\`typescript
     // Como voc usaria Partial, Pick, Omit?
     interface Product {
       id: number;
       name: string;
       price: number;
       description: string;
       inStock: boolean;
     }
     
     // Partial - todos os campos so opcionais
     type ProductUpdate = Partial<Product>;
     
     // Pick - seleciona campos especficos
     type ProductSummary = Pick<Product, 'id' | 'name' | 'price'>;
     
     // Omit - exclui campos especficos
     type ProductWithoutDescription = Omit<Product, 'description'>;
     \`\`\`

### Prepare seu Currculo

Um currculo bem estruturado  essencial para passar pela triagem inicial:

1. **Destaque suas Habilidades Tcnicas:**
   - React e TypeScript em destaque
   - Outras tecnologias relevantes (HTML, CSS, JavaScript, Redux, etc.)
   - Ferramentas e bibliotecas (Vite, Jest, React Testing Library, etc.)

2. **Projetos Relevantes:**
   - Liste seus melhores projetos com links para o GitHub
   - Descreva brevemente o que voc construiu e quais tecnologias usou
   - Destaque o uso de TypeScript e boas prticas

3. **Formao e Cursos:**
   - Inclua sua formao acadmica
   - Liste cursos relevantes (como este curso de React com TypeScript)
   - Mencione certificaes, se tiver

4. **Experincia Profissional:**
   - Mesmo que no seja em desenvolvimento, destaque habilidades transferveis
   - Se tiver experincia em desenvolvimento, detalhe os projetos e tecnologias
   - Inclua estgios, trabalhos freelance ou projetos voluntrios

### Prepare-se para Perguntas Comportamentais

Alm das questes tcnicas, esteja preparado para perguntas comportamentais:

1. **Por que voc escolheu React e TypeScript?**
   - Fale sobre a popularidade e demanda do mercado
   - Mencione a produtividade e a experincia do desenvolvedor
   - Destaque como TypeScript ajuda a evitar erros comuns

2. **Como voc lida com problemas difceis?**
   - Descreva seu processo de resoluo de problemas
   - Mencione recursos que voc utiliza (documentao, Stack Overflow, etc.)
   - D um exemplo concreto de um problema que voc resolveu

3. **Como voc se mantm atualizado?**
   - Mencione blogs, canais do YouTube, podcasts que voc acompanha
   - Fale sobre comunidades online das quais participa
   - Destaque sua prtica constante e aprendizado contnuo

### Crie um Plano de Estudos Contnuo

O aprendizado no para aps este curso. Crie um plano para continuar evoluindo:

1. **Aprofunde-se em TypeScript:**
   - Estude padres avanados de tipagem
   - Aprenda a criar tipos utilitrios personalizados
   - Pratique a tipagem de bibliotecas externas

2. **Explore Bibliotecas Complementares:**
   - Redux Toolkit com TypeScript
   - React Query para gerenciamento de estado do servidor
   - Styled Components ou Emotion com TypeScript

3. **Aprenda Testes:**
   - Jest e React Testing Library
   - Cypress para testes end-to-end
   - Testes de tipos com tsd

4. **Estude Padres de Projeto:**
   - Compound Components
   - Render Props
   - Custom Hooks
   - Context API

### Networking e Comunidade

Participar da comunidade pode abrir portas:

1. **Participe de Eventos:**
   - Meetups locais de React/TypeScript
   - Conferncias (mesmo que online)
   - Hackathons

2. **Seja Ativo Online:**
   - Compartilhe seu conhecimento no Twitter/X, LinkedIn
   - Escreva artigos sobre o que est aprendendo
   - Responda perguntas no Stack Overflow ou fruns

3. **Conecte-se com Outros Desenvolvedores:**
   - Siga desenvolvedores influentes
   - Participe de comunidades no Discord ou Slack
   - Oferea-se para revisar cdigo de outros iniciantes

### Prepare-se para o Processo Seletivo

O processo seletivo para vagas de desenvolvedor React jnior geralmente inclui:

1. **Triagem de Currculo:**
   - Certifique-se de que seu currculo destaque suas habilidades em React e TypeScript
   - Inclua links para seu GitHub e projetos

2. **Teste Tcnico:**
   - Geralmente um projeto pequeno para fazer em casa
   - Foque em cdigo limpo, bem tipado e testado
   - Siga as instrues  risca e entregue no prazo

3. **Entrevista Tcnica:**
   - Prepare-se para responder perguntas sobre React e TypeScript
   - Esteja pronto para fazer live coding
   - Revise os conceitos fundamentais antes da entrevista

4. **Entrevista Comportamental:**
   - Prepare histrias sobre seus projetos e desafios
   - Mostre entusiasmo e vontade de aprender
   - Pesquise sobre a empresa e faa perguntas relevantes

### Exemplos de Perguntas Comuns em Entrevistas

Aqui esto algumas perguntas frequentes em entrevistas para desenvolvedores React com TypeScript:

1. **React e TypeScript:**
   - "Qual a diferena entre \`interface\` e \`type\` em TypeScript?"
   - "Como voc tiparia um componente de ordem superior (HOC) em TypeScript?"
   - "Explique o conceito de 'discriminated unions' em TypeScript e como voc usaria em um componente React."
   - "Como voc lidaria com a tipagem de um estado complexo em um componente React?"

2. **Hooks:**
   - "Como voc tiparia um hook personalizado que retorna mltiplos valores?"
   - "Explique como funciona o \`useReducer\` com TypeScript."
   - "Como voc garantiria a tipagem correta ao usar \`useContext\`?"

3. **Performance:**
   - "Como voc identificaria e resolveria problemas de performance em uma aplicao React?"
   - "Explique como o TypeScript pode ajudar a melhorar a performance de uma aplicao React."
   - "Quando voc usaria \`useMemo\` e \`useCallback\`, e como tip-los corretamente?"

4. **Gerenciamento de Estado:**
   - "Compare diferentes abordagens de gerenciamento de estado em React e como TypeScript se integra a elas."
   - "Como voc tiparia uma store Redux?"
   - "Explique como implementar um contexto global tipado em React."

### Exemplo de Projeto para Portflio

Alm do projeto TodoList que desenvolvemos, aqui est uma ideia para um projeto de portflio que demonstraria suas habilidades com React e TypeScript:

**Dashboard de Finanas Pessoais:**

\`\`\`typescript
// src/types/finance.ts
export interface Transaction {
  id: string;
  description: string;
  amount: number;
  date: Date;
  category: Category;
  type: 'income' | 'expense';
}

export interface Category {
  id: string;
  name: string;
  color: string;
  icon?: string;
}

export interface Budget {
  id: string;
  categoryId: string;
  amount: number;
  period: 'daily' | 'weekly' | 'monthly' | 'yearly';
}

export interface FinancialSummary {
  totalIncome: number;
  totalExpenses: number;
  balance: number;
  categorySummary: Record<string, number>;
}
\`\`\`

\`\`\`typescript
// src/hooks/useFinances.ts
import { useState, useEffect, useMemo } from 'react';
import { Transaction, FinancialSummary } from '../types/finance';

export function useFinances(transactions: Transaction[]): {
  summary: FinancialSummary;
  filterByMonth: (month: number, year: number) => Transaction[];
  addTransaction: (transaction: Omit<Transaction, 'id'>) => void;
  removeTransaction: (id: string) => void;
} {
  const [filteredTransactions, setFilteredTransactions] = useState<Transaction[]>(transactions);

  // Calcular resumo financeiro
  const summary = useMemo<FinancialSummary>(() => {
    const totalIncome = filteredTransactions
      .filter(t => t.type === 'income')
      .reduce((acc, transaction) => acc + transaction.amount, 0);
      
    const totalExpenses = filteredTransactions
      .filter(t => t.type === 'expense')
      .reduce((acc, transaction) => acc + transaction.amount, 0);
      
    const categorySummary = filteredTransactions.reduce((acc, transaction) => {
      const categoryId = transaction.category.id;
      const amount = transaction.type === 'expense' ? -transaction.amount : transaction.amount;
      
      acc[categoryId] = (acc[categoryId] || 0) + amount;
      return acc;
    }, {} as Record<string, number>);
    
    return {
      totalIncome,
      totalExpenses,
      balance: totalIncome - totalExpenses,
      categorySummary
    };
  }, [filteredTransactions]);

  // Filtrar transaes por ms
  const filterByMonth = (month: number, year: number): Transaction[] => {
    const filtered = transactions.filter(transaction => {
      const date = new Date(transaction.date);
      return date.getMonth() === month && date.getFullYear() === year;
    });
    
    setFilteredTransactions(filtered);
    return filtered;
  };

  // Adicionar transao
  const addTransaction = (transaction: Omit<Transaction, 'id'>): void => {
    const newTransaction: Transaction = {
      ...transaction,
      id: crypto.randomUUID()
    };
    
    setFilteredTransactions(prev => [...prev, newTransaction]);
  };

  // Remover transao
  const removeTransaction = (id: string): void => {
    setFilteredTransactions(prev => prev.filter(t => t.id !== id));
  };

  return {
    summary,
    filterByMonth,
    addTransaction,
    removeTransaction
  };
}
\`\`\`

Este projeto demonstraria:
- Uso avanado de tipos e interfaces
- Hooks personalizados com TypeScript
- Manipulao de dados complexos
- Clculos e transformaes tipadas

### Concluso

Conseguir uma vaga como desenvolvedor React com TypeScript requer uma combinao de habilidades tcnicas, portflio slido e preparao para o processo seletivo. Lembre-se:

1. **Pratique Constantemente:**
   - Construa projetos reais
   - Resolva desafios de cdigo
   - Contribua para projetos open source

2. **Demonstre seu Conhecimento:**
   - Mantenha seu GitHub ativo
   - Escreva sobre o que est aprendendo
   - Compartilhe seu conhecimento

3. **Prepare-se para Entrevistas:**
   - Revise conceitos fundamentais
   - Pratique live coding
   - Estude perguntas comuns

4. **Mantenha-se Atualizado:**
   - Acompanhe as novidades do React e TypeScript
   - Experimente novas bibliotecas e ferramentas
   - Participe de comunidades e eventos

Com dedicao, prtica constante e o conhecimento adquirido neste curso, voc estar bem posicionado para conquistar sua vaga como desenvolvedor React com TypeScript. Boa sorte em sua jornada!
`,wrt=()=>g.jsx(qe,{content:Trt,backRoute:"/react/projeto-pratico",backText:"Voltar: Projeto Prtico",goRoute:"/ux/introducao",goText:"Prximo: Introduo ao UX"}),Crt=`# Aula 1: Introduo  Experincia do Usurio

## Objetivo
Objetivo: Aprender/Entender a diferena fundamental entre UX e UI e por que desenvolvedores devem se importar com a Experincia do Usurio.

## O que  UX e UI?

Imagine que voc est em um restaurante. A **Experincia do Usurio (UX)**  tudo o que envolve a sua visita: desde o momento em que voc decide ir, a facilidade de fazer a reserva, a forma como  recebido, o ambiente, a rapidez do servio, a qualidade da comida, e at mesmo a sensao que voc tem ao sair.  a **jornada completa e o sentimento** que essa jornada provoca.

J a **Interface do Usurio (UI)**  a apresentao visual e interativa do restaurante. So os talheres, os pratos, o cardpio, a decorao das mesas, a iluminao.  o **meio pelo qual voc interage** com o servio, a **aparncia** e os **controles** que voc usa para consumir a experincia.

Em termos de software, a **UX** foca em como o usurio se sente ao interagir com um produto, se ele  fcil de usar, eficiente, agradvel e til. A **UI**  o conjunto de elementos visuais e interativos (botes, menus, campos de texto, cores, tipografia) que o usurio v e com os quais ele interage.

## Como funciona? A Relao entre UX e UI

UX e UI so interdependentes, mas no so a mesma coisa. Uma boa UI sem uma boa UX  como um restaurante lindo, mas com comida ruim e servio pssimo. Uma boa UX com uma UI ruim  como um restaurante com comida excelente e servio impecvel, mas com uma decorao feia e um cardpio ilegvel. Ambos so importantes para o sucesso de um produto digital.

*   **UX (Experincia do Usurio):**  a **estratgia**, a **pesquisa**, o **planejamento** e a **arquitetura** por trs do produto. Ela define *o que* o produto faz, *por que* ele faz e *como* ele se encaixa na vida do usurio. Envolve entender as necessidades, comportamentos e motivaes dos usurios.
*   **UI (Interface do Usurio):**  a **execuo visual** e a **interao** do produto. Ela define *como* o produto se parece e *como* o usurio interage com ele. Envolve design visual, layout, cores, tipografia e elementos interativos.

## Na prtica: Por que Desenvolvedores Devem se Importar?

Desenvolvedores so os arquitetos e construtores do mundo digital. Entender UX no  apenas uma 

habilidade "nice-to-have", mas uma **necessidade fundamental** por vrias razes:

1.  **Construir Produtos Melhores:** Um desenvolvedor com conhecimento em UX pode antecipar problemas de usabilidade, tomar decises de implementao que favoream a experincia do usurio e colaborar de forma mais eficaz com designers.
2.  **Reduzir Refatoraes e Custos:** Entender o usurio desde o incio evita que funcionalidades sejam construdas de forma inadequada, o que demandaria retrabalho e custos adicionais.
3.  **Aumentar o Engajamento e a Satisfao:** Produtos com boa UX so mais agradveis de usar, o que leva a maior reteno de usurios e satisfao.
4.  **Diferenciao no Mercado:** Desenvolvedores que entregam no apenas cdigo funcional, mas tambm experincias excepcionais, so mais valorizados.
5.  **Comunicao Eficaz:** Facilita a comunicao com equipes de design, produto e stakeholders, pois todos falam uma linguagem mais comum sobre o usurio.

Em resumo, a UX  a alma do produto, e a UI  o corpo. Como desenvolvedor, voc  o corao que faz tudo funcionar, e entender a alma e o corpo  crucial para criar algo verdadeiramente vivo e bem-sucedido.
`,Art=()=>g.jsx(qe,{content:Crt,backRoute:"/react/dicas-vaga",backText:"Voltar: Dicas de Vagas",goRoute:"/ux/principios",goText:"Prximo: Princpios do UX"}),_rt=`# Aula 2: Princpios de Design e Usabilidade

## Objetivo
Objetivo: Aprender/Entender os princpios fundamentais de design e usabilidade e como aplic-los em interfaces web.

## O que  Usabilidade?

**Usabilidade** refere-se  facilidade com que os usurios podem aprender a operar, usar, e se sentir satisfeitos ao interagir com um produto ou sistema. Um produto com boa usabilidade  eficiente, eficaz e agradvel de usar. Em outras palavras,  sobre tornar a vida do usurio mais fcil e a interao com o sistema, intuitiva.

## Como funciona? Princpios Fundamentais de Usabilidade

Existem vrios princpios que guiam a criao de interfaces mais utilizveis. Vamos explorar alguns dos mais importantes:

### Feedback

**O que :** O sistema deve sempre manter os usurios informados sobre o que est acontecendo, atravs de feedback apropriado e em tempo razovel. Isso significa que o usurio deve saber se sua ao foi bem-sucedida, se h um erro, ou se o sistema est processando algo.

**Exemplo Prtico:** Ao clicar em um boto de envio de formulrio, o boto pode mudar para "Enviando..." e exibir um spinner de carregamento. Aps o envio, uma mensagem de sucesso ou erro  exibida.

### Consistncia

**O que :** Os usurios no deveriam ter que se perguntar se diferentes palavras, situaes ou aes significam a mesma coisa. Padres devem ser seguidos em toda a plataforma. Isso reduz a carga cognitiva e torna o sistema mais previsvel.

**Exemplo Prtico:** Botes de ao primria sempre tm a mesma cor e estilo em todo o site. cones de "salvar" ou "excluir" so sempre os mesmos e aparecem em locais esperados.

### Preveno de Erros

**O que :** Melhor do que boas mensagens de erro  um design cuidadoso que previne a ocorrncia de erros em primeiro lugar. Se um erro for inevitvel, o sistema deve ajudar o usurio a corrigi-lo facilmente.

**Exemplo Prtico:** Um formulrio de cadastro de senha exige que a senha tenha no mnimo 8 caracteres, uma letra maiscula e um nmero. O sistema valida isso em tempo real e informa o usurio antes que ele tente enviar o formulrio. Campos obrigatrios so claramente marcados.

### Reconhecimento em vez de Memorizao

**O que :** Minimize a carga de memria do usurio tornando objetos, aes e opes visveis. O usurio no deve ter que se lembrar de informaes de uma parte para outra do dilogo. Instrues de uso devem ser visveis ou facilmente recuperveis quando apropriado.

**Exemplo Prtico:** Em vez de exigir que o usurio digite um cdigo de produto, fornea uma lista suspensa com os produtos disponveis. Em um carrinho de compras, os itens adicionados permanecem visveis.

### Flexibilidade e Eficincia de Uso

**O que :** O sistema deve ser flexvel o suficiente para atender tanto usurios novatos quanto experientes. Isso pode ser alcanado atravs de aceleradores (atalhos de teclado, gestos) para usurios avanados, sem prejudicar a clareza para os iniciantes.

**Exemplo Prtico:** Um editor de texto oferece atalhos de teclado para copiar e colar (Ctrl+C/Ctrl+V) alm dos botes visveis na barra de ferramentas. Um sistema de gerenciamento de tarefas permite arrastar e soltar itens, mas tambm oferece um menu de contexto para aes rpidas.

### Design Minimalista e Esttico

**O que :** Dilogos no devem conter informaes irrelevantes ou raramente necessrias. Toda informao extra em um dilogo compete com as unidades de informao relevantes e diminui sua visibilidade relativa. O design deve ser esteticamente agradvel e no sobrecarregar o usurio com elementos desnecessrios.

**Exemplo Prtico:** Uma pgina de login contm apenas os campos de e-mail/usurio e senha, e um boto de login. Informaes de recuperao de senha ou registro so links discretos. A interface utiliza um esquema de cores limpo e tipografia legvel, sem elementos grficos que distraiam.
`,krt=()=>g.jsx(qe,{content:_rt,backRoute:"/ux/introducao",backText:"Voltar: Introduo ao UX",goRoute:"/ux/arquitetura",goText:"Prximo: Arquitetura de Informao"}),Irt=`# Aula 3: Arquitetura de Informao

## Objetivo
Objetivo: Aprender/Entender o que  Arquitetura de Informao (AI) e como ela se conecta com o trabalho do desenvolvedor.

## O que  Arquitetura de Informao (AI)?

Imagine que voc entra em um supermercado pela primeira vez. Se ele for bem organizado, com sees claras (frutas, laticnios, limpeza), corredores bem sinalizados e produtos agrupados de forma lgica, voc encontrar o que precisa rapidamente e ter uma experincia de compra agradvel. Se for um caos, com produtos espalhados e sem sinalizao, sua experincia ser frustrante.

A **Arquitetura de Informao (AI)**  exatamente isso para o mundo digital: a arte e a cincia de organizar e rotular websites, intranets, comunidades online e software para apoiar a usabilidade e a encontrabilidade.  a estrutura invisvel que torna a informao compreensvel e acessvel. A AI garante que os usurios possam encontrar o que procuram e entender onde esto em um sistema.

## Como funciona? Os Pilares da AI

A Arquitetura de Informao  construda sobre quatro pilares principais:

### 1. Organizao

**O que :** Como agrupamos e categorizamos as informaes. Isso pode ser feito por:
*   **Hierarquia:** Organizar de forma mais geral para mais especfica (ex: Categoria > Subcategoria > Produto).
*   **Sequncia:** Organizar em um fluxo linear (ex: passos de um processo).
*   **Tpico:** Agrupar por assunto (ex: Notcias, Esportes, Finanas).
*   **Audincia:** Organizar para diferentes tipos de usurios (ex: rea do Cliente, rea do Parceiro).

**Exemplo Prtico:** Em um e-commerce, a organizao dos produtos em categorias como "Eletrnicos", "Roupas", "Livros" e, dentro delas, subcategorias como "Smartphones", "Notebooks" para "Eletrnicos".

### 2. Rotulagem

**O que :** Como representamos as informaes. So os nomes que damos aos links, ttulos de sees, botes e outros elementos de navegao. Rtulos devem ser claros, concisos e consistentes para que os usurios entendam o que esperar ao clicar ou interagir.

**Exemplo Prtico:** Usar rtulos como "Meu Carrinho" em vez de "Cesta de Compras", ou "Contato" em vez de "Fale Conosco". A consistncia  chave.

### 3. Navegao

**O que :** Como os usurios se movem atravs das informaes. Inclui menus, barras de navegao, links internos, breadcrumbs e mapas do site. Uma boa navegao permite que os usurios explorem o contedo de forma intuitiva e saibam sempre onde esto.

**Exemplo Prtico:** Um menu principal no topo da pgina com links para as sees principais, um menu lateral para subsees, e breadcrumbs ("Home > Produtos > Eletrnicos") para mostrar o caminho percorrido.

### 4. Busca

**O que :** Como os usurios procuram informaes especficas. Inclui caixas de busca, filtros e resultados de busca. Um bom sistema de busca  essencial para usurios que sabem exatamente o que querem ou que preferem uma abordagem direta.

**Exemplo Prtico:** Uma barra de busca proeminente no cabealho do site, com filtros para refinar os resultados por preo, marca, cor, etc.

## Na prtica: AI e o Trabalho do Desenvolvedor

Como desenvolvedor, voc implementa a estrutura definida pela Arquitetura de Informao. Suas decises de cdigo impactam diretamente a usabilidade e a encontrabilidade do contedo:

*   **Criao de Menus (\`<nav>\`):** Voc  responsvel por estruturar os elementos de navegao usando HTML semntico, garantindo que os links levem aos lugares certos e que a estrutura seja acessvel.
*   **Hierarquia de Ttulos (\`<h1>\` a \`<h6>\`):** A correta aplicao dos cabealhos HTML no  apenas uma questo de SEO, mas de AI. Ela define a estrutura lgica do contedo, ajudando usurios (e leitores de tela) a entender a importncia e a relao entre as sees.
*   **Estrutura de URLs:** URLs amigveis e lgicas (\`/produtos/eletronicos/smartphones\`) so um reflexo de uma boa AI e facilitam a memorizao e o compartilhamento.
*   **Implementao de Busca e Filtros:** Voc constri a funcionalidade de busca, garantindo que ela seja eficiente, que os filtros funcionem corretamente e que os resultados sejam relevantes.
*   **Componentes Reutilizveis:** Ao criar componentes de UI (como um card de produto ou um item de menu), voc est implementando decises de rotulagem e organizao que afetam a AI de todo o sistema.

Entender AI permite que voc construa sistemas mais robustos, intuitivos e fceis de manter, pois a estrutura subjacente  slida e lgica.
`,Prt=()=>g.jsx(qe,{content:Irt,backRoute:"/ux/principios",backText:"Voltar: Princpios do UX",goRoute:"/ux/lei-de-gestalt",goText:"Prximo: Lei de Gestalt"}),Ort=`# Aula 4: Leis da Gestalt

## Objetivo
Objetivo: Aprender/Entender as Leis da Gestalt e como aplic-las no design de interfaces de usurio.

## O que so as Leis da Gestalt?

A **Gestalt**  uma teoria da psicologia que estuda como os seres humanos percebem o mundo. A palavra "Gestalt" significa "forma", "configurao" ou "todo" em alemo. A ideia central  que **o todo  diferente da soma das partes**. Nosso crebro no processa elementos visuais isoladamente, mas sim os organiza em padres e formas coerentes para dar sentido ao que vemos.

No design de interfaces, as Leis da Gestalt so princpios que nos ajudam a entender como os usurios agrupam elementos visuais, percebem relaes e interpretam a informao na tela. Aplicar esses princpios permite criar interfaces mais intuitivas, organizadas e fceis de usar.

## Como funciona? Leis Principais da Gestalt

Vamos explorar as leis mais relevantes para o design de UI:

### 1. Proximidade

**O que :** Elementos que esto prximos uns dos outros tendem a ser percebidos como um grupo ou uma unidade. A distncia entre os elementos  um forte indicador de relacionamento.

**Exemplo Prtico em UI:** Em um formulrio, os campos de entrada e seus respectivos rtulos (labels) so colocados prximos um do outro para que o usurio os associe. Um grupo de botes relacionados (ex: "Salvar", "Cancelar")  posicionado junto, enquanto um boto de "Excluir" pode ser colocado mais distante para evitar cliques acidentais.

### 2. Similaridade

**O que :** Elementos que so semelhantes em cor, forma, tamanho, textura ou orientao tendem a ser percebidos como pertencentes ao mesmo grupo ou categoria. A similaridade cria uma sensao de unidade e ajuda a identificar padres.

**Exemplo Prtico em UI:** Todos os links clicveis em um site podem ter a mesma cor e sublinhado. Ttulos de sees podem ter a mesma fonte e tamanho para indicar que so do mesmo nvel hierrquico. cones de navegao podem ter o mesmo estilo visual.

### 3. Fechamento

**O que :** Nosso crebro tende a preencher lacunas e completar formas incompletas para formar um todo reconhecvel. Mesmo que um objeto no esteja totalmente desenhado, conseguimos perceb-lo como completo.

**Exemplo Prtico em UI:** Um cone de "play" pode ser representado por um tringulo incompleto, mas o usurio ainda o reconhece. Em um design minimalista, bordas de cards podem ser omitidas, mas a proximidade e o alinhamento dos elementos internos do a sensao de um card completo.

### 4. Continuidade

**O que :** Elementos que esto alinhados ou seguem uma direo tendem a ser percebidos como uma nica unidade ou um caminho contnuo, em vez de elementos separados. Nossos olhos seguem o caminho mais suave.

**Exemplo Prtico em UI:** Uma lista de itens em um menu de navegao  percebida como um grupo contnuo. Uma linha do tempo ou um processo de mltiplos passos  visualmente conectado para indicar a progresso. Carrossis de imagens que mostram uma parte da prxima imagem para indicar que h mais contedo.

### 5. Figura-Fundo

**O que :** Nossa percepo visual tende a separar um objeto principal (figura) de seu entorno (fundo). A figura  o foco da ateno, enquanto o fundo  menos proeminente. O contraste  crucial para diferenciar figura e fundo.

**Exemplo Prtico em UI:** Um modal (pop-up) que aparece sobre o contedo principal da pgina. O modal  a figura, e o contedo da pgina, geralmente escurecido ou borrado,  o fundo. Isso direciona a ateno do usurio para a informao mais importante no modal.
`,Mrt=()=>g.jsx(qe,{content:Ort,backRoute:"/ux/arquitetura",backText:"Voltar: Arquitetura de Informao",goRoute:"/ux/tipografia",goText:"Prximo: Tipografia no UX"}),Rrt=`# Aula 5: Tipografia e Componentes da UI

## Objetivo
Objetivo: Aprender/Entender a importncia da tipografia para legibilidade e hierarquia, e o papel dos componentes de UI e Design Systems na consistncia.

## O que  Tipografia e Componentes da UI?

A **Tipografia**  a arte e a tcnica de organizar o tipo para tornar a linguagem escrita legvel, legvel e atraente quando exibida.  muito mais do que apenas escolher uma fonte; envolve o tamanho, o espaamento entre letras e linhas, a cor e o contraste. Uma boa tipografia guia o olho do usurio atravs do contedo, estabelece hierarquia visual e transmite a personalidade da marca.

Os **Componentes da UI** so os blocos de construo reutilizveis de uma interface de usurio. Pense neles como as peas de LEGO de um software: botes, campos de entrada, caixas de seleo, cards, modais, barras de navegao, etc. Eles so elementos padronizados que os usurios reconhecem e sabem como interagir, facilitando a construo e a manuteno de interfaces consistentes.

## Como funciona? Detalhes sobre Tipografia e Componentes

### Tipografia: Mais do que Apenas Fontes

A tipografia eficaz  crucial para a usabilidade e a esttica de qualquer interface. Aqui esto alguns conceitos importantes:

*   **\`font-family\` (Serifa vs. Sem Serifa):**
    *   **Fontes com Serifa:** Possuem pequenos "ps" ou "floreios" nas extremidades das letras (ex: Times New Roman, Georgia). Tradicionalmente usadas em textos impressos longos por sua legibilidade. No digital, podem ser usadas para ttulos ou para transmitir uma sensao mais clssica.
    *   **Fontes sem Serifa:** No possuem esses "ps" (ex: Arial, Helvetica, Roboto). So geralmente preferidas para telas digitais devido  sua clareza e legibilidade em tamanhos menores e em diferentes resolues.
*   **\`font-weight\` (Peso da Fonte):** Refere-se  espessura dos caracteres (ex: light, regular, bold). Usado para criar contraste e hierarquia, destacando informaes importantes.
*   **\`line-height\` (Altura da Linha):** O espaamento vertical entre as linhas de texto. Um \`line-height\` adequado melhora a legibilidade, evitando que as linhas se misturem.
*   **Escala Tipogrfica Consistente:** A definio de um conjunto limitado de tamanhos de fonte e pesos para diferentes elementos (ttulos H1, H2, pargrafos, legendas). Isso garante consistncia visual e hierarquia clara em toda a aplicao.

### Componentes da UI e Design Systems

Um **Design System**  um conjunto completo de padres, princpios e componentes reutilizveis que guiam o design e o desenvolvimento de um produto. Ele serve como uma "biblioteca" de elementos de UI e diretrizes que garantem consistncia, eficincia e escalabilidade.

**Benefcios de um Design System:**

*   **Consistncia:** Todos os elementos visuais e interativos se comportam e se parecem da mesma forma em toda a aplicao, independentemente de quem os construiu.
*   **Eficincia:** Desenvolvedores e designers podem reutilizar componentes existentes em vez de criar novos do zero, acelerando o processo de desenvolvimento.
*   **Qualidade:** Componentes bem testados e documentados reduzem erros e melhoram a qualidade geral da interface.
*   **Colaborao:** Facilita a comunicao e a colaborao entre equipes de design e desenvolvimento.

## Na prtica: Implementando Tipografia e Componentes

Como desenvolvedor, voc  fundamental na implementao desses conceitos:

*   **CSS para Tipografia:** Voc usar CSS para definir \`font-family\`, \`font-size\`, \`font-weight\`, \`line-height\` e \`color\` para garantir que a tipografia siga as diretrizes de design.  comum usar variveis CSS ou pr-processadores (Sass, Less) para gerenciar a escala tipogrfica.
*   **Construo de Componentes Reutilizveis:** Em frameworks como React, Vue ou Angular, voc criar componentes de UI (ex: \`<Button>\`, \`<Input>\`, \`<Card>\`) que encapsulam a lgica e o estilo. Esses componentes so ento reutilizados em diferentes partes da aplicao.
*   **Integrao com Design Systems:** Voc trabalhar com Design Systems existentes (ex: Material-UI, Ant Design, Chakra UI) ou construir um Design System interno, garantindo que os componentes desenvolvidos estejam alinhados com as especificaes de design.
*   **Acessibilidade:** Ao implementar componentes, voc deve garantir que eles sejam acessveis, usando atributos ARIA, semntica HTML correta e garantindo que a tipografia tenha contraste suficiente para usurios com deficincia visual.
`,Drt=()=>g.jsx(qe,{content:Rrt,backRoute:"/ux/lei-de-gestalt",backText:"Voltar: Lei de Gestalt",goRoute:"/ux/prototipagem",goText:"Prximo: Prototipagem no UX"}),Nrt=`# Aula 6: Prototipao e Testes de Usabilidade

## Objetivo
Objetivo: Aprender/Entender os diferentes nveis de prototipao, as ferramentas comuns e a importncia dos testes de usabilidade para validar ideias antes da codificao.

## O que  Prototipao e Testes de Usabilidade?

A **Prototipao**  o processo de criar verses preliminares de um produto ou funcionalidade para simular a interao do usurio e coletar feedback.  uma forma de "dar vida" a uma ideia antes de investir tempo e recursos significativos no desenvolvimento completo. Pense em um prottipo como um rascunho interativo do seu produto.

Os **Testes de Usabilidade** so mtodos para avaliar a facilidade de uso de um produto, observando usurios reais interagindo com ele. O objetivo  identificar problemas de usabilidade, coletar dados qualitativos e quantitativos, e entender como os usurios realmente utilizam o sistema, em vez de como os designers ou desenvolvedores imaginam que eles usaro.

## Como funciona? Detalhes sobre Prototipao e Testes

### Prototipao: Nveis e Ferramentas

Os prottipos podem variar em fidelidade, ou seja, o quo prximos eles esto do produto final em termos de aparncia e funcionalidade:

*   **Baixa Fidelidade (Wireframes):** So rascunhos simples, muitas vezes feitos  mo ou com ferramentas bsicas, focando na estrutura e no layout bsico. So rpidos de criar e ideais para testar conceitos iniciais e fluxos de usurio.
    *   **Ferramentas Comuns:** Papel e caneta, Balsamiq, Figma (com kits de wireframe).
*   **Mdia Fidelidade (Mockups):** Mais detalhados que os wireframes, incluem elementos visuais como cores, tipografia e cones, mas ainda no so totalmente interativos. Comeam a se parecer mais com o produto final.
    *   **Ferramentas Comuns:** Figma, Sketch, Adobe XD.
*   **Alta Fidelidade (Prottipos Interativos):** So muito prximos do produto final, com interaes, animaes e elementos visuais bem definidos. Permitem simular a experincia do usurio de forma quase real.
    *   **Ferramentas Comuns:** Figma, Sketch, Adobe XD (com funcionalidades de prototipagem).

**Objetivo da Prototipao:** O principal objetivo  **validar ideias e conceitos de design antes de escrever cdigo**.  muito mais barato e rpido modificar um prottipo do que refatorar um cdigo j desenvolvido.

### Testes de Usabilidade: O Processo Bsico

Os testes de usabilidade so cruciais para garantir que o produto atenda s necessidades e expectativas dos usurios. O processo bsico geralmente envolve:

1.  **Definir Objetivos e Tarefas:** O que voc quer aprender com o teste? Quais tarefas os usurios devem tentar realizar no prottipo ou produto?
2.  **Recrutar Participantes:** Encontrar usurios que representem o pblico-alvo do produto.
3.  **Conduzir o Teste:** Observar os participantes enquanto eles tentam completar as tarefas.  importante que o observador no interfira, apenas anote o que acontece, o que o usurio diz e onde ele encontra dificuldades.
4.  **Coletar Feedback:** Alm da observao, pode-se pedir aos usurios para "pensar em voz alta" ou fazer perguntas aps as tarefas.
5.  **Analisar Resultados e Iterar:** Identificar padres de problemas, prioriz-los e usar o feedback para refinar o design do prottipo.

## Na prtica: O Papel do Desenvolvedor

Embora a prototipao e os testes sejam frequentemente liderados por designers de UX, o desenvolvedor tem um papel importante:

*   **Entender os Prottipos:** Compreender como os prottipos funcionam e quais interaes eles simulam ajuda a traduzir o design em cdigo de forma mais precisa.
*   **Participar de Testes (como observador):** Observar usurios reais interagindo com o produto (mesmo que seja um prottipo) pode fornecer insights valiosos sobre como o cdigo ser usado e onde podem surgir problemas de implementao.
*   **Implementar Feedback:** Aps os testes, os desenvolvedores so responsveis por implementar as melhorias e correes identificadas, transformando o feedback em um produto mais utilizvel.
*   **Construir Componentes Flexveis:** Desenvolver componentes de UI que sejam flexveis e configurveis o suficiente para se adaptar a futuras iteraes de design, que podem surgir de testes de usabilidade.
*   **Ferramentas de Prototipao:** Em algumas equipes, desenvolvedores podem at mesmo criar prottipos de alta fidelidade usando cdigo, especialmente para testar interaes complexas ou funcionalidades especficas.
`,Lrt=()=>g.jsx(qe,{content:Nrt,backRoute:"/ux/tipografia",backText:"Voltar: Tipografia no UX",goRoute:"/ux/nielsen",goText:"Prximo: Heursticas de Nielsen"}),jrt=`# Aula 7: Heursticas de Nielsen

## Objetivo
Objetivo: Aprender/Entender as 10 Heursticas de Usabilidade de Jakob Nielsen e como utiliz-las como um "checklist" para avaliar interfaces.

## O que so as Heursticas de Nielsen?

As **Heursticas de Usabilidade de Jakob Nielsen** so um conjunto de 10 princpios gerais para o design de interface de usurio. Elas foram desenvolvidas por Jakob Nielsen em 1990 e so amplamente utilizadas como um "checklist" para a avaliao heurstica de interfaces, ajudando a identificar problemas de usabilidade em um sistema. Pense nelas como regras de ouro que, se seguidas, aumentam significativamente a probabilidade de criar uma interface fcil de usar e eficiente.

## Como funciona? As 10 Heursticas e Aplicaes Prticas

Vamos explorar cada uma das 10 heursticas, com exemplos de violao e boa prtica:

### 1. Visibilidade do Status do Sistema

**Explicao:** O sistema deve sempre manter os usurios informados sobre o que est acontecendo, atravs de feedback apropriado e em tempo razovel.

*   **Violao:** Clicar em um boto de envio e no ter nenhuma indicao de que a ao est sendo processada, deixando o usurio em dvida se o clique funcionou.
*   **Boa Prtica:** Exibir um spinner de carregamento, uma barra de progresso ou uma mensagem "Enviando..." enquanto a ao est em andamento.

### 2. Correspondncia entre o Sistema e o Mundo Real

**Explicao:** O sistema deve falar a linguagem do usurio, com palavras, frases e conceitos familiares, em vez de termos tcnicos. Seguir convenes do mundo real, tornando as informaes em uma ordem natural e lgica.

*   **Violao:** Usar termos como "Erro 403" para indicar acesso negado, sem uma explicao clara para o usurio comum.
*   **Boa Prtica:** Usar cones que representam objetos do mundo real (ex: um cone de lixeira para excluso) e mensagens como "Acesso Negado: Voc no tem permisso para visualizar esta pgina."

### 3. Controle e Liberdade do Usurio

**Explicao:** Os usurios frequentemente escolhem funes por engano e precisaro de uma "sada de emergncia" claramente marcada para deixar o estado indesejado sem ter que passar por um dilogo estendido. Suporte para desfazer e refazer.

*   **Violao:** No permitir que o usurio cancele uma operao longa ou feche um modal sem concluir uma ao obrigatria.
*   **Boa Prtica:** Oferecer botes "Cancelar" ou "Voltar" visveis, e funcionalidades de "Desfazer" (Ctrl+Z) em editores de texto.

### 4. Consistncia e Padres

**Explicao:** Os usurios no deveriam ter que se perguntar se diferentes palavras, situaes ou aes significam a mesma coisa. Seguir convenes de plataforma.

*   **Violao:** Usar cores diferentes para botes de ao primria em diferentes partes do aplicativo, ou ter o menu de navegao em locais distintos em pginas diferentes.
*   **Boa Prtica:** Manter a mesma iconografia, terminologia e layout para elementos semelhantes em todo o sistema (ex: todos os botes de "Confirmar" so verdes).

### 5. Preveno de Erros

**Explicao:** Melhor do que boas mensagens de erro  um design cuidadoso que previne a ocorrncia de erros em primeiro lugar.

*   **Violao:** Permitir que o usurio envie um formulrio com campos obrigatrios vazios e s ento exibir uma mensagem de erro genrica.
*   **Boa Prtica:** Validar campos de formulrio em tempo real, desabilitar botes de envio at que todos os campos obrigatrios sejam preenchidos corretamente, ou pedir confirmao antes de uma ao destrutiva (ex: "Tem certeza que deseja excluir?").

### 6. Reconhecimento em vez de Memorizao

**Explicao:** Minimize a carga de memria do usurio tornando objetos, aes e opes visveis. O usurio no deve ter que se lembrar de informaes de uma parte para outra do dilogo.

*   **Violao:** Exigir que o usurio digite um nome de usurio complexo toda vez que faz login, sem a opo de "Lembrar-me".
*   **Boa Prtica:** Fornecer listas suspensas com opes pr-definidas, exibir histrico de buscas recentes, ou manter itens no carrinho de compras mesmo aps o usurio sair do site.

### 7. Flexibilidade e Eficincia de Uso

**Explicao:** Aceleradores (que no so vistos por usurios novatos) podem frequentemente acelerar a interao para o usurio experiente, de modo que o sistema possa atender a usurios inexperientes e experientes. Permitir que os usurios personalizem aes frequentes.

*   **Violao:** Um sistema que s pode ser operado por cliques do mouse, sem atalhos de teclado para aes comuns.
*   **Boa Prtica:** Oferecer atalhos de teclado para copiar/colar, desfazer/refazer, ou permitir que usurios experientes personalizem a barra de ferramentas.

### 8. Esttica e Design Minimalista

**Explicao:** Dilogos no devem conter informaes irrelevantes ou raramente necessrias. Toda informao extra em um dilogo compete com as unidades de informao relevantes e diminui sua visibilidade relativa.

*   **Violao:** Uma pgina de produto com dezenas de informaes e links irrelevantes que distraem o usurio do boto de compra.
*   **Boa Prtica:** Interfaces limpas e focadas, onde cada elemento tem um propsito claro. Ocultar funcionalidades avanadas em menus secundrios ou configuraes.

### 9. Ajuda e Documentao

**Explicao:** Embora seja melhor que o sistema possa ser usado sem documentao, pode ser necessrio fornecer ajuda e documentao. Tal informao deve ser fcil de pesquisar, focada na tarefa do usurio, listar passos concretos a serem executados e no ser muito grande.

*   **Violao:** Um sistema sem qualquer seo de ajuda, ou com uma documentao extensa e difcil de navegar.
*   **Boa Prtica:** Oferecer tooltips contextuais, uma seo de FAQ bem organizada, um chatbot de suporte ou um link para um manual de usurio conciso e pesquisvel.

### 10. Ajude os Usurios a Reconhecer, Diagnosticar e Recuperar-se de Erros

**Explicao:** Mensagens de erro devem ser expressas em linguagem clara (sem cdigos), indicar precisamente o problema e sugerir construtivamente uma soluo.

*   **Violao:** Uma mensagem de erro genrica como "Ocorreu um erro. Tente novamente mais tarde."
*   **Boa Prtica:** Uma mensagem como "O e-mail inserido j est em uso. Por favor, tente outro e-mail ou recupere sua senha."
`,Brt=()=>g.jsx(qe,{content:jrt,backRoute:"/ux/prototipagem",backText:"Voltar: Prototipagem no UX",goRoute:"/ux/design-thinking",goText:"Prximo: Design Thinking no UX"}),Frt=`# Aula 8: Design Thinking

## Objetivo
Objetivo: Aprender/Entender o Design Thinking como um processo iterativo para resolver problemas complexos, focado no ser humano.

## O que  Design Thinking?

**Design Thinking**  uma abordagem centrada no ser humano para a inovao que integra as necessidades das pessoas, as possibilidades da tecnologia e os requisitos para o sucesso dos negcios.  um processo iterativo e no linear que busca resolver problemas complexos de forma criativa, colocando o usurio no centro de todas as decises. No  exclusivo para designers;  uma mentalidade e um conjunto de ferramentas que qualquer equipe pode usar para inovar.

## Como funciona? As 5 Fases do Design Thinking

Embora seja um processo no linear e flexvel, o Design Thinking  frequentemente descrito em cinco fases:

### 1. Empatia

**O que :** O primeiro passo  entender profundamente os usurios para quem voc est projetando. Isso envolve pesquisa, observao e imerso em suas experincias para compreender suas necessidades, desejos, dores e motivaes. O objetivo  se colocar no lugar do usurio.

**Exemplo Prtico:** Realizar entrevistas com usurios, criar personas, observar usurios em seu ambiente natural, fazer mapas de jornada do usurio.

### 2. Definio

**O que :** Com base nos insights coletados na fase de Empatia, esta fase consiste em sintetizar as informaes para definir claramente o problema que precisa ser resolvido. O problema  reformulado de uma perspectiva centrada no usurio, geralmente na forma de uma "Declarao de Ponto de Vista" (Point of View - POV).

**Exemplo Prtico:** Aps entrevistar usurios, voc pode definir o problema como: "Usurios de transporte pblico precisam de uma maneira fcil de verificar os horrios dos nibus em tempo real porque perdem muito tempo esperando e se sentem frustrados com a incerteza."

### 3. Ideao

**O que :** Nesta fase, o objetivo  gerar o maior nmero possvel de ideias para resolver o problema definido, sem julgamento. A quantidade  mais importante que a qualidade inicial. Tcnicas como brainstorming so amplamente utilizadas.

**Exemplo Prtico:** Sesses de brainstorming para pensar em diferentes solues para o problema do transporte pblico: um aplicativo, um painel de LED nos pontos, um servio de SMS, integrao com assistentes de voz, etc.

### 4. Prototipao

**O que :** Selecionar as melhores ideias da fase de Ideao e transform-las em prottipos tangveis. Estes prottipos podem ser de baixa, mdia ou alta fidelidade, dependendo do que se deseja testar. O objetivo  criar algo que possa ser testado com usurios reais.

**Exemplo Prtico:** Criar um wireframe de um aplicativo de horrios de nibus, ou um mockup de um painel informativo para testar a clareza das informaes.

### 5. Teste

**O que :** Colocar os prottipos nas mos dos usurios reais para coletar feedback. Esta fase no  apenas para validar a soluo, mas tambm para obter novos insights sobre o problema e as necessidades do usurio. Os resultados dos testes podem levar a refinamentos do prottipo, a novas ideias, ou at mesmo a uma redefinio do problema.

**Exemplo Prtico:** Observar usurios interagindo com o prottipo do aplicativo de horrios de nibus, coletando feedback sobre a usabilidade, a clareza das informaes e a eficcia da soluo.

## Na prtica: Design Thinking para Desenvolvedores

Como desenvolvedor, voc pode se beneficiar do Design Thinking de vrias maneiras:

*   **Compreenso do Problema:** Participar das fases de Empatia e Definio ajuda a entender o *porqu* de voc estar construindo algo, no apenas *o qu*. Isso leva a solues mais alinhadas com as necessidades reais.
*   **Colaborao Interdisciplinar:** O Design Thinking promove a colaborao entre designers, desenvolvedores, gerentes de produto e outros stakeholders, resultando em solues mais holsticas.
*   **Iterao e Feedback:** A mentalidade iterativa do Design Thinking se alinha bem com metodologias geis de desenvolvimento, onde o feedback contnuo e a adaptao so valorizados.
*   **Inovao:** Ao focar na gerao de ideias e na prototipao rpida, os desenvolvedores podem contribuir ativamente para a inovao do produto, explorando diferentes abordagens tecnolgicas para resolver os problemas dos usurios.
*   **Validao Antecipada:** Ao testar prottipos antes de escrever muito cdigo, voc reduz o risco de construir algo que ningum quer ou que  difcil de usar, economizando tempo e recursos.
`,zrt=()=>g.jsx(qe,{content:Frt,backRoute:"/ux/nielsen",backText:"Voltar: Heursticas de Nielsen",goRoute:"/ux/acessibilidade",goText:"Prximo: Acessibilidade no UX"}),Urt=`# Aula 9: Acessibilidade Web (a11y)

## Objetivo
Objetivo: Aprender/Entender o que  Acessibilidade Web (a11y), sua importncia e como implement-la na prtica como desenvolvedor.

## O que  Acessibilidade Web (a11y)?

A **Acessibilidade Web (a11y)** refere-se  prtica de tornar websites e aplicaes web utilizveis por pessoas com a mais ampla gama de habilidades e deficincias. O termo "a11y"  uma numernimo, onde 'a'  a primeira letra, 'y'  a ltima, e '11' representa o nmero de letras omitidas entre elas.

 fundamental entender que a acessibilidade no  um "extra" ou um "luxo", mas sim um **direito humano** e uma **necessidade legal e tica**. Pessoas com deficincia (visuais, auditivas, motoras, cognitivas, etc.) devem ter o mesmo acesso  informao e aos servios online que qualquer outra pessoa. Alm disso, um design acessvel beneficia a todos, incluindo idosos, pessoas com limitaes temporrias (como um brao quebrado) ou aqueles em ambientes com restries (como pouca luz ou conexo lenta).

## Como funciona? Diretrizes e Ferramentas

### WCAG (Web Content Accessibility Guidelines)

As **Diretrizes de Acessibilidade para Contedo Web (WCAG)** so um conjunto de recomendaes internacionais publicadas pelo World Wide Web Consortium (W3C) que explicam como tornar o contedo da web mais acessvel para pessoas com deficincia. Elas so organizadas em quatro princpios fundamentais, conhecidos como **POUR**:

*   **Perceptvel:** A informao e os componentes da interface do usurio devem ser apresentados aos usurios de formas que eles possam perceber. Isso significa que o contedo no pode ser invisvel para todos os seus sentidos (ex: fornecer alternativas textuais para contedo no textual).
*   **Opervel:** Os componentes da interface do usurio e a navegao devem ser operveis. Isso significa que os usurios devem ser capazes de interagir com o sistema, independentemente do dispositivo de entrada que utilizem (ex: teclado, mouse, voz).
*   **Compreensvel:** A informao e a operao da interface do usurio devem ser compreensveis. Isso significa que o contedo e a funcionalidade devem ser claros e previsveis.
*   **Robusto:** O contedo deve ser robusto o suficiente para ser interpretado por uma ampla variedade de agentes de usurio, incluindo tecnologias assistivas. Isso significa que o contedo deve ser compatvel com as ferramentas atuais e futuras.

As WCAG definem trs nveis de conformidade: A (mnimo), AA (aceitvel) e AAA (ideal).

### Na prtica: Exemplos para Desenvolvedores

Como desenvolvedor, suas decises de cdigo tm um impacto direto na acessibilidade. Aqui esto exemplos prticos de como voc pode implementar a11y:

1.  **Uso Correto de HTML Semntico:**
    *   Utilize tags HTML com significado apropriado (ex: \`<header>\`, \`<nav>\`, \`<main>\`, \`<article>\`, \`<section>\`, \`<footer>\`). Isso ajuda tecnologias assistivas (como leitores de tela) a entender a estrutura e o propsito do contedo.
    *   Em vez de \`div\`s genricas para tudo, use \`<button>\` para botes, \`<input>\` para campos de formulrio, \`<a href="...">\` para links, etc. Esses elementos j vm com comportamentos de acessibilidade embutidos.

2.  **Importncia do Atributo \`alt\` em Imagens:**
    *   Toda imagem que transmite informao deve ter um atributo \`alt\` descritivo (\`<img src="foto.jpg" alt="Descrio concisa da imagem">\`). Leitores de tela leem esse texto para usurios com deficincia visual. Imagens puramente decorativas podem ter \`alt=""\`.

3.  **Contraste de Cores:**
    *   Garanta que haja contraste suficiente entre o texto e o fundo. As WCAG especificam propores mnimas de contraste para garantir legibilidade para pessoas com baixa viso ou daltonismo. Ferramentas online podem ajudar a verificar isso.

4.  **Navegao por Teclado:**
    *   Todos os elementos interativos (links, botes, campos de formulrio) devem ser acessveis e operveis usando apenas o teclado. Verifique se a ordem de tabulao (\`tabindex\`)  lgica e se o foco visual (\`:focus\`)  claro.
    *   Evite usar \`outline: none;\` em CSS, pois isso remove o indicador visual de foco para usurios de teclado.

5.  **Papel do ARIA (Accessible Rich Internet Applications):**
    *   **ARIA**  um conjunto de atributos HTML que podem ser adicionados a elementos para melhorar a acessibilidade de contedo dinmico e componentes de interface de usurio avanados (como sliders, abas, menus complexos) que no so nativamente acessveis.
    *   Exemplos: \`aria-label\` (fornece um rtulo acessvel quando o texto visvel no  suficiente), \`aria-labelledby\` (associa um elemento a um rtulo existente), \`aria-describedby\` (fornece uma descrio mais longa), \`role\` (define o tipo de widget ou estrutura, ex: \`role="button"\`, \`role="alert"\`).
    *   **Regra de Ouro do ARIA:** "Se voc pode usar um elemento HTML nativo com a semntica e o comportamento desejados, use-o em vez de redefinir um elemento genrico com ARIA." (Don't use ARIA if you can use native HTML).

Implementar acessibilidade  um processo contnuo que beneficia a todos e reflete um compromisso com a incluso digital. Como desenvolvedor, voc tem o poder de construir uma web mais acessvel para todos.
`,qrt=()=>g.jsx(qe,{content:Urt,backRoute:"/ux/prototipagem",backText:"Voltar: Prototipagem no UX",goRoute:"/ux/design-emocional",goText:"Prximo: Design Emocional no UX"}),Hrt=`# Aula 10: Design Emocional (Don Norman)

## Objetivo
Objetivo: Aprender/Entender o conceito de Design Emocional de Don Norman e como o design evoca emoes que impactam a usabilidade.

## O que  Design Emocional?

Tradicionalmente, o design de produtos digitais focava muito na funcionalidade e usabilidade: "Ele funciona?  fcil de usar?". No entanto, **Don Norman**, um renomado especialista em usabilidade e autor do livro "Design Emocional: Por que Amamos (ou Odiamos) os Objetos do Dia a Dia", argumenta que as emoes desempenham um papel crucial na forma como interagimos e percebemos os produtos. O **Design Emocional** reconhece que o design no  apenas sobre lgica e eficincia, mas tambm sobre como um produto nos faz sentir.

Um produto que evoca emoes positivas (alegria, satisfao, confiana) tende a ser percebido como mais fcil de usar, mais eficaz e mais agradvel, mesmo que sua usabilidade objetiva no seja perfeita. Por outro lado, um produto que gera frustrao ou tdio pode ser abandonado, independentemente de sua funcionalidade.

## Como funciona? Os Trs Nveis do Design de Norman

Don Norman prope que o design opera em trs nveis cognitivos, cada um influenciando nossa experincia emocional:

### 1. Nvel Visceral (Aparncia)

**O que :** Este  o nvel mais bsico e imediato da emoo. Refere-se  **primeira impresso** que temos de um produto, baseada puramente em sua esttica, cores, formas e texturas.  uma resposta subconsciente e instintiva. Um design visualmente atraente pode gerar uma sensao imediata de prazer e confiana.

**Exemplo:** A beleza de um smartphone de ltima gerao, a paleta de cores vibrantes de um aplicativo, a suavidade de uma animao de transio. Um design limpo e elegante pode evocar uma sensao de sofisticao e modernidade.

### 2. Nvel Comportamental (Uso)

**O que :** Este nvel est relacionado  **experincia de uso** do produto. Envolve a usabilidade, a funcionalidade, a eficincia e a eficcia. Um produto que  fcil de usar, intuitivo e que permite ao usurio realizar suas tarefas sem esforo gera satisfao e uma sensao de controle.  a emoo que surge da interao.

**Exemplo:** A fluidez ao navegar por um site, a facilidade de encontrar uma funcionalidade especfica, a rapidez com que um aplicativo responde aos comandos. Um sistema de busca que retorna resultados precisos e rpidos gera uma sensao de competncia e eficincia.

### 3. Nvel Reflexivo (Significado, Experincia Pessoal)

**O que :** Este  o nvel mais elevado e consciente da emoo. Refere-se  **reflexo** que fazemos sobre o produto, sua mensagem, seu significado cultural, seu impacto em nossa vida e como ele nos faz sentir sobre ns mesmos. Envolve memria, cultura e a imagem que o produto projeta.

**Exemplo:** O status social associado a ter um determinado carro ou marca de roupa. A sensao de realizao ao completar uma tarefa complexa com a ajuda de um software. A nostalgia que um aplicativo de fotos antigas pode evocar. Um aplicativo de fitness que nos ajuda a alcanar metas de sade pode gerar orgulho e um senso de propsito.

## Na prtica: Criando Experincias Positivas com Micro-interaes

Como desenvolvedores, podemos aplicar os princpios do Design Emocional, especialmente o nvel visceral e comportamental, atravs de detalhes como as **micro-interaes**.

**Micro-interaes** so pequenos momentos de interao que acontecem dentro de um produto. Elas podem ser to simples quanto o feedback visual ao clicar em um boto, uma animao de carregamento, ou o som de uma notificao. Quando bem projetadas, as micro-interaes podem:

*   **Fornecer Feedback:** Informar o usurio sobre o status de uma ao (ex: um cone de "check" verde aps o envio de um formulrio).
*   **Comunicar Status:** Mostrar que algo est acontecendo (ex: um spinner animado).
*   **Prevenir Erros:** Guiar o usurio para a ao correta (ex: um campo de formulrio que treme quando o input  invlido).
*   **Criar Momentos de Prazer:** Adicionar um toque de personalidade e encanto ao produto.

**Exemplo Prtico:** Uma animao de "sucesso" aps o usurio concluir uma compra. Em vez de apenas uma mensagem de texto, um pequeno confete virtual ou um cone animado de "pedido enviado" pode transformar uma interao funcional em uma experincia mais positiva e memorvel. Isso toca o nvel visceral (agradvel de ver) e o comportamental (confirmao da ao), contribuindo para uma emoo reflexiva de satisfao com o produto e a marca.

Ao considerar esses trs nveis e prestar ateno aos pequenos detalhes, os desenvolvedores podem contribuir significativamente para a criao de produtos que no apenas funcionam bem, mas que tambm so amados pelos usurios.
`,$rt=()=>g.jsx(qe,{content:Hrt,backRoute:"/ux/acessibilidade",backText:"Voltar: Acessibilidade no UX",goRoute:"/ws/introducao",goText:"Prximo: Web Services"}),Vrt=`# Aula 1: Arquitetura Web e Conceitos de APIs

## Objetivo
Objetivo: Aprender/Entender a arquitetura web cliente-servidor e os conceitos fundamentais de APIs e Web Services.

## O que  Arquitetura Web e APIs?

Imagine que voc est em um restaurante. Voc (o **Cliente**) faz um pedido ao garom (a **API**). O garom leva seu pedido para a cozinha (o **Servidor**), onde a comida  preparada. Depois, o garom traz a comida de volta para voc. Voc no precisa saber como a comida  preparada na cozinha, apenas como fazer o pedido ao garom e o que esperar de volta.

No mundo da programao, a **Arquitetura Web** mais comum  o modelo **Cliente-Servidor**. O **Cliente** (seu navegador, um aplicativo mvel, etc.) faz requisies por informaes ou servios. O **Servidor** (um computador remoto) processa essas requisies e envia as respostas de volta.

Uma **API (Application Programming Interface)**  um conjunto de definies e protocolos que permite que diferentes softwares se comuniquem entre si. Ela define os mtodos que os clientes podem usar para se comunicar com o servidor, os tipos de dados que podem ser trocados e os formatos esperados. Assim como o garom, a API  o intermedirio que facilita a comunicao entre o cliente e o servidor.

Um **Web Service**  um tipo especfico de API que opera sobre a rede (geralmente a internet) usando protocolos web padro, como HTTP. Eles permitem que sistemas diferentes, construdos em diferentes linguagens de programao e rodando em diferentes plataformas, troquem dados e funcionem juntos. Todo Web Service  uma API, mas nem toda API  um Web Service (existem APIs para sistemas operacionais, bibliotecas de software, etc., que no usam a web).

## Como funciona? Detalhes da Comunicao Cliente-Servidor e o Papel da API

### Modelo Cliente-Servidor

Neste modelo, as responsabilidades so claramente divididas:

*   **Cliente:** Inicia a comunicao, solicita recursos ou servios. Pode ser um navegador web (Chrome, Firefox), um aplicativo mobile (iOS, Android), ou at mesmo outro servidor.
*   **Servidor:** Aguarda as requisies do cliente, processa-as e envia uma resposta. O servidor armazena dados, executa lgica de negcio e fornece os recursos solicitados.

Quando voc digita um endereo em seu navegador, seu navegador (cliente) envia uma requisio para o servidor que hospeda aquele site. O servidor encontra a pgina solicitada e a envia de volta para o seu navegador, que a exibe.

### O Papel da API

A API atua como uma ponte entre o cliente e o servidor. Ela define:

*   **Endpoints:** URLs especficas que o cliente pode acessar para interagir com diferentes recursos do servidor (ex: \`/users\`, \`/products\`).
*   **Mtodos (Verbos HTTP):** As aes que o cliente pode realizar sobre esses recursos (ex: GET para obter dados, POST para criar, PUT para atualizar, DELETE para remover).
*   **Formato de Dados:** Como os dados so enviados e recebidos (geralmente JSON ou XML).
*   **Autenticao/Autorizao:** Como o cliente prova sua identidade e permisses para acessar certos recursos.

### Web Services

Web Services so APIs que utilizam padres web para a comunicao. Os mais comuns so:

*   **SOAP (Simple Object Access Protocol):** Um protocolo mais antigo, baseado em XML, com regras mais rgidas e complexas. Geralmente usado em ambientes corporativos legados.
*   **REST (Representational State Transfer):** Uma arquitetura mais flexvel e popular, que utiliza HTTP e geralmente JSON para troca de dados.  o padro de fato para a maioria das APIs web modernas.

## Na prtica: A Importncia para o Desenvolvedor Client-Side

Como desenvolvedor client-side (front-end), voc passar a maior parte do seu tempo interagindo com APIs e Web Services. Entender esses conceitos  crucial para:

*   **Consumir Dados:** Obter informaes de bancos de dados ou outros servios para exibir na interface do usurio.
*   **Enviar Dados:** Salvar informaes inseridas pelo usurio (formulrios, configuraes) de volta para o servidor.
*   **Integrar Funcionalidades:** Conectar seu aplicativo a servios externos, como pagamentos, mapas, redes sociais, etc.
*   **Depurao:** Entender a comunicao entre cliente e servidor  essencial para diagnosticar problemas quando algo no funciona como esperado.

Dominar a interao com APIs  uma das habilidades mais importantes para qualquer desenvolvedor web moderno, pois  a base para construir aplicaes dinmicas e conectadas.
`,Grt=()=>g.jsx(qe,{content:Vrt,backRoute:"/ux/design-emocional",backText:"Voltar: Design Emocional no UX",goRoute:"/ws/rest",goText:"Prximo: REST API"}),Krt=`# Aula 2: Arquitetura REST

## Objetivo
Objetivo: Aprender/Entender o que  REST (Representational State Transfer) e seus princpios arquiteturais para a criao de web services.

## O que  Arquitetura REST?

**REST (Representational State Transfer)** no  um protocolo, mas sim um **estilo arquitetural** para sistemas distribudos, como a World Wide Web. Foi definido por Roy Fielding em sua tese de doutorado em 2000. O objetivo principal do REST  permitir que sistemas se comuniquem de forma leve e escalvel, utilizando os princpios e protocolos j existentes da web, principalmente o HTTP.

Uma API que segue os princpios REST  chamada de **API RESTful**. Ela trata cada pedao de informao (como um usurio, um produto, um pedido) como um **recurso** que pode ser acessado e manipulado atravs de URLs (Uniform Resource Locators) e mtodos HTTP padro.

## Como funciona? Princpios Chave do REST

As APIs RESTful so construdas com base em um conjunto de princpios que as tornam eficientes e escalveis:

### 1. Comunicao Cliente-Servidor

**Explicao:** H uma clara separao de responsabilidades entre o cliente e o servidor. O cliente  responsvel pela interface do usurio e pela lgica de apresentao, enquanto o servidor  responsvel pelo armazenamento de dados e pela lgica de negcio. Essa separao melhora a portabilidade da interface do usurio em vrias plataformas e a escalabilidade do servidor.

### 2. Stateless (Sem Estado)

**Explicao:** Cada requisio do cliente para o servidor deve conter todas as informaes necessrias para que o servidor entenda e processe a requisio. O servidor no deve armazenar nenhum "estado" da sesso do cliente entre as requisies. Isso significa que cada requisio  independente e pode ser tratada por qualquer servidor disponvel, o que melhora a escalabilidade e a confiabilidade.

### 3. Cacheable (Cachevel)

**Explicao:** As respostas do servidor devem ser explicitamente marcadas como cacheveis ou no cacheveis. Isso permite que os clientes (e intermedirios como proxies) armazenem em cache as respostas para requisies futuras, reduzindo a latncia e a carga no servidor.

### 4. Interface Uniforme

**Explicao:** Este  o princpio central do REST. Ele simplifica a arquitetura do sistema, tornando-o mais fcil de entender e interagir. A interface uniforme  alcanada atravs de quatro restries:

*   **Identificao de Recursos:** Cada recurso deve ser identificvel por uma URI (Uniform Resource Identifier) nica (ex: \`/users/123\`, \`/products\`).
*   **Manipulao de Recursos Atravs de Representaes:** O cliente interage com o recurso atravs de uma representao (ex: um documento JSON ou XML). O cliente recebe uma representao do estado do recurso e, se tiver as permisses necessrias, pode modific-lo e envi-lo de volta ao servidor.
*   **Mensagens Auto-descritivas:** Cada mensagem (requisio ou resposta) deve conter informaes suficientes para que o receptor possa entender como process-la. Isso inclui o tipo de mdia (Content-Type), links para outros recursos (HATEOAS), etc.
*   **HATEOAS (Hypermedia as the Engine of Application State):** O servidor deve fornecer, nas suas respostas, links para outros recursos relacionados que o cliente pode acessar. Isso permite que o cliente navegue pela API sem ter conhecimento prvio de todas as URIs disponveis.

### 5. Sistema em Camadas

**Explicao:** A arquitetura REST permite que um sistema seja composto por camadas hierrquicas. Cada camada no pode "ver" alm da camada imediatamente adjacente. Isso melhora a escalabilidade, a segurana e a flexibilidade, pois as camadas podem ser modificadas ou adicionadas independentemente.

## Na prtica: O Conceito de "Recurso"

Em uma API RESTful, tudo  um **recurso**. Um recurso  qualquer informao que pode ser nomeada, abstrada e manipulada. Exemplos de recursos:

*   **Usurios:** \`/users\`, \`/users/123\`
*   **Produtos:** \`/products\`, \`/products/456\`
*   **Pedidos:** \`/orders\`, \`/orders/789\`

Cada recurso tem uma URI nica e pode ser acessado usando os mtodos HTTP padro (GET, POST, PUT, DELETE) para realizar operaes CRUD (Create, Read, Update, Delete) sobre ele. Por exemplo:

*   \`GET /users\`: Obter a lista de todos os usurios.
*   \`GET /users/123\`: Obter os detalhes do usurio com ID 123.
*   \`POST /users\`: Criar um novo usurio.
*   \`PUT /users/123\`: Atualizar o usurio com ID 123.
*   \`DELETE /users/123\`: Excluir o usurio com ID 123.

Entender esses princpios  fundamental para construir e consumir APIs de forma eficaz, aproveitando ao mximo o poder da web.
`,Wrt=()=>g.jsx(qe,{content:Krt,backRoute:"/ws/introducao",backText:"Voltar: Introduo a Web Services",goRoute:"/ws/requisicoes",goText:"Prximo: Requisies HTTP"}),Yrt=`# Aula 3: Requisies HTTP (Verbos e Estrutura)

## Objetivo
Objetivo: Aprender/Entender a estrutura de uma requisio HTTP e os principais verbos (mtodos) e sua relao com operaes CRUD.

## O que  uma Requisio HTTP?

**HTTP (Hypertext Transfer Protocol)**  o protocolo de comunicao que fundamenta a troca de dados na World Wide Web. Toda vez que voc acessa um site, seu navegador envia uma **requisio HTTP** para o servidor, e o servidor responde com uma **resposta HTTP**.  a linguagem que clientes e servidores usam para conversar.

Uma requisio HTTP  uma mensagem de texto com uma estrutura bem definida, que informa ao servidor qual recurso o cliente deseja e qual ao ele quer realizar sobre esse recurso.

## Como funciona? A Estrutura de uma Requisio HTTP

Uma requisio HTTP  composta por quatro partes principais:

### 1. Verbo (Mtodo)

**O que :** Uma palavra-chave que indica a ao que o cliente deseja realizar.  o primeiro componente da requisio.

**Exemplo:** \`GET\`, \`POST\`, \`PUT\`, \`DELETE\`.

### 2. URL (Uniform Resource Locator)

**O que :** O endereo do recurso que o cliente est solicitando. Inclui o caminho para o recurso no servidor.

**Exemplo:** \`/users/123\`

### 3. Cabealhos (Headers)

**O que :** Um conjunto de pares chave-valor que fornecem informaes adicionais sobre a requisio, como o tipo de contedo esperado na resposta, informaes de autenticao, etc.

**Exemplos:**
*   \`Host: api.example.com\` (o domnio do servidor)
*   \`Accept: application/json\` (o cliente espera receber dados em formato JSON)
*   \`Authorization: Bearer <token>\` (informaes de autenticao)

### 4. Corpo (Body)

**O que :** O corpo da requisio contm os dados que o cliente est enviando para o servidor.  opcional e geralmente usado em requisies que criam ou atualizam dados, como \`POST\` e \`PUT\`.

**Exemplo (em formato JSON):**
\`\`\`json
{
  "name": "Fulano de Tal",
  "email": "fulano@example.com"
}
\`\`\`

## Na prtica: Verbos HTTP e Operaes CRUD

Os verbos HTTP so a base para a interao com APIs RESTful e esto diretamente relacionados s operaes **CRUD (Create, Read, Update, Delete)**:

### GET (Read - Leitura)

*   **Propsito:** Solicitar a representao de um recurso especfico ou uma coleo de recursos.
*   **Caractersticas:**  um mtodo seguro (no altera o estado do servidor) e idempotente (mltiplas requisies idnticas tm o mesmo efeito que uma nica).
*   **Exemplos:**
    *   \`GET /users\`: Obter a lista de todos os usurios.
    *   \`GET /users/123\`: Obter os detalhes do usurio com ID 123.

### POST (Create - Criao)

*   **Propsito:** Enviar dados para o servidor para criar um novo recurso.
*   **Caractersticas:** No  seguro (altera o estado do servidor) e no  idempotente (mltiplas requisies idnticas criaro mltiplos recursos).
*   **Exemplo:**
    *   \`POST /users\` (com dados do novo usurio no corpo da requisio): Criar um novo usurio.

### PUT / PATCH (Update - Atualizao)

*   **PUT:**
    *   **Propsito:** Atualizar um recurso existente, substituindo-o completamente com os dados fornecidos no corpo da requisio.
    *   **Caractersticas:**  idempotente (mltiplas requisies idnticas tm o mesmo efeito que uma nica).
    *   **Exemplo:** \`PUT /users/123\` (com todos os dados do usurio no corpo): Atualizar o usurio 123.
*   **PATCH:**
    *   **Propsito:** Aplicar uma atualizao parcial a um recurso existente, modificando apenas os campos fornecidos no corpo da requisio.
    *   **Caractersticas:** No  necessariamente idempotente.
    *   **Exemplo:** \`PATCH /users/123\` (com apenas o campo "email" no corpo): Atualizar apenas o email do usurio 123.

### DELETE (Delete - Excluso)

*   **Propsito:** Excluir um recurso especfico.
*   **Caractersticas:**  idempotente (mltiplas requisies idnticas tm o mesmo efeito que uma nica, pois o recurso j foi excludo na primeira).
*   **Exemplo:**
    *   \`DELETE /users/123\`: Excluir o usurio com ID 123.

Entender a estrutura das requisies HTTP e o papel de cada verbo  fundamental para qualquer desenvolvedor que precise consumir ou construir APIs, pois  a base da comunicao na web moderna._
`,Xrt=()=>g.jsx(qe,{content:Yrt,backRoute:"/ws/rest",backText:"Voltar: REST API",goRoute:"/ws/consumo-de-api",goText:"Prximo: Consumo de API"}),Jrt=`# Aula 4: Consumo de APIs com JavaScript (Fetch API)

## Objetivo
Objetivo: Aprender/Entender como fazer requisies HTTP em JavaScript usando a Fetch API e processar as respostas, incluindo o uso de Promises e Async/Await.

## O que  a Fetch API?

A **Fetch API**  uma interface moderna e poderosa para fazer requisies de rede (como requisies HTTP para APIs) em navegadores web. Ela oferece uma alternativa mais flexvel e robusta ao \`XMLHttpRequest\` (XHR) tradicional, utilizando **Promises** para lidar com a assincronicidade das operaes de rede. Isso torna o cdigo mais limpo e fcil de entender, especialmente quando combinado com \`async/await\`.

Com a Fetch API, voc pode enviar requisies \`GET\`, \`POST\`, \`PUT\`, \`DELETE\` e outras, alm de configurar cabealhos, corpos de requisio e lidar com respostas de forma eficiente.

## Como funciona? Fazendo Requisies GET e Lidando com Assincronicidade

### Exemplo Prtico GET: Consumindo uma API Pblica

Vamos ver como fazer uma requisio \`GET\` para uma API pblica, como a [JSONPlaceholder API](https://jsonplaceholder.typicode.com/), que oferece dados de teste. Nosso objetivo ser buscar uma lista de posts.

\`\`\`javascript
// Exemplo 1: Usando .then() para processar a resposta
fetch('https://jsonplaceholder.typicode.com/posts')
  .then(response => {
    // A primeira .then() recebe o objeto Response da requisio.
    // Precisamos chamar .json() nele para parsear o corpo da resposta como JSON.
    // .json() tambm retorna uma Promise.
    if (!response.ok) {
      throw new Error(\`HTTP error! status: \${response.status}\`);
    }
    return response.json();
  })
  .then(data => {
    // A segunda .then() recebe os dados JSON parseados.
    console.log('Posts obtidos (usando .then()):', data);
    // Aqui voc faria algo com os dados, como exibi-los na UI
  })
  .catch(error => {
    // O .catch() lida com erros que ocorrem durante o fetch ou o processamento da Promise.
    console.error('Erro ao buscar posts (usando .then()):', error);
  });
\`\`\`

**Explicao:**
1.  \`fetch('URL')\`: Inicia a requisio para a URL especificada. Retorna uma \`Promise\` que resolve para o objeto \`Response\`.
2.  \`.then(response => { ... })\`: O primeiro \`.then()\`  executado quando a \`Promise\` do \`fetch\`  resolvida. O \`response\`  um objeto que contm informaes sobre a resposta da rede (status, cabealhos, etc.).
3.  \`if (!response.ok) { ... }\`:  uma boa prtica verificar a propriedade \`response.ok\`, que  \`true\` se o status da resposta HTTP estiver no intervalo \`200-299\` (sucesso).
4.  \`response.json()\`: Este mtodo l o corpo da resposta e o parseia como JSON. Ele tambm retorna uma \`Promise\`.
5.  \`.then(data => { ... })\`: O segundo \`.then()\`  executado quando a \`Promise\` de \`response.json()\`  resolvida, entregando os dados JSON j parseados.
6.  \`.catch(error => { ... })\`: Captura quaisquer erros que possam ocorrer durante a requisio ou o processamento das Promises.

### Promises e Async/Await: Lidando com a Assincronicidade de Forma Moderna

Trabalhar com mltiplas Promises encadeadas pode se tornar complexo. O JavaScript moderno oferece \`async/await\` como uma sintaxe mais limpa e sncrona para lidar com Promises, tornando o cdigo assncrono mais fcil de ler e escrever.

*   Uma funo marcada com \`async\` sempre retorna uma \`Promise\`.
*   A palavra-chave \`await\` s pode ser usada dentro de uma funo \`async\`. Ela "pausa" a execuo da funo \`async\` at que a \`Promise\` seja resolvida, e ento retorna o valor resolvido da \`Promise\`.

\`\`\`javascript
// Exemplo 2: Usando async/await para buscar posts
async function getPosts() {
  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/posts');
    
    if (!response.ok) {
      throw new Error(\`HTTP error! status: \${response.status}\`);
    }

    const data = await response.json();
    console.log('Posts obtidos (usando async/await):', data);
    return data;
  } catch (error) {
    console.error('Erro ao buscar posts (usando async/await):', error);
    // Voc pode relanar o erro ou retornar um valor padro
    throw error; 
  }
}

// Chamando a funo assncrona
getPosts();
\`\`\`

**Explicao:**
1.  \`async function getPosts() { ... }\`: Declara uma funo assncrona.
2.  \`const response = await fetch(...)\`: A execuo da funo \`getPosts\`  pausada aqui at que a \`Promise\` retornada por \`fetch\` seja resolvida. O valor resolvido (o objeto \`Response\`)  atribudo a \`response\`.
3.  \`const data = await response.json()\`: Novamente, a execuo  pausada at que o corpo da resposta seja parseado como JSON. Os dados parseados so atribudos a \`data\`.
4.  \`try...catch\`: Permite lidar com erros de forma semelhante aos blocos \`try...catch\` sncronos, tornando o tratamento de erros mais intuitivo.

### Integrao em um Componente React (Exemplo Bsico)

Em um componente React, voc geralmente faria requisies de API dentro de um \`useEffect\` (para efeitos colaterais) e armazenaria os dados no estado do componente.

\`\`\`javascript
import React, { useEffect, useState } from 'react';

function PostsList() {
  const [posts, setPosts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    async function fetchPosts() {
      try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts');
        if (!response.ok) {
          throw new Error(\`HTTP error! status: \${response.status}\`);
        }
        const data = await response.json();
        setPosts(data);
      } catch (err) {
        setError(err);
      } finally {
        setLoading(false);
      }
    }

    fetchPosts();
  }, []); // O array vazio [] garante que o useEffect rode apenas uma vez, como componentDidMount

  if (loading) return <p>Carregando posts...</p>;
  if (error) return <p>Erro ao carregar posts: {error.message}</p>;

  return (
    <div>
      <h1>Posts</h1>
      <ul>
        {posts.map(post => (
          <li key={post.id}>
            <h2>{post.title}</h2>
            <p>{post.body}</p>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default PostsList;
\`\`\`

**Explicao:**
*   \`useState\`: Usado para gerenciar o estado dos posts, do carregamento e de possveis erros.
*   \`useEffect\`: Garante que a funo \`fetchPosts\` seja executada apenas uma vez aps a montagem inicial do componente.
*   A funo \`fetchPosts\`  \`async\` e usa \`await\` para buscar e processar os dados.
*   O estado \`loading\` e \`error\` so usados para exibir mensagens apropriadas ao usurio enquanto os dados esto sendo carregados ou em caso de falha.

Dominar a Fetch API e \`async/await\`  essencial para qualquer desenvolvedor JavaScript que trabalhe com aplicaes web modernas e APIs.
`,Qrt=()=>g.jsx(qe,{content:Jrt,backRoute:"/ws/requisicoes",backText:"Voltar: Requisies HTTP",goRoute:"/ws/enviando-dados",goText:"Prximo: Enviando Dados"}),Zrt=`# Aula 5: Enviando Dados (POST, PUT, DELETE)

## Objetivo
Objetivo: Aprender/Entender como enviar dados para uma API usando os mtodos HTTP POST, PUT e DELETE com a Fetch API em JavaScript.

## O que  Envio de Dados para APIs?

Alm de apenas buscar informaes (com \`GET\`), a maioria das aplicaes web precisa enviar dados para o servidor. Isso  fundamental para criar novos recursos (como um novo usurio ou post), atualizar recursos existentes ou exclu-los. A Fetch API nos permite fazer isso configurando o objeto de opes da requisio, especificando o mtodo HTTP, os cabealhos e o corpo da requisio.

## Como funciona? Configurando Requisies POST, PUT e DELETE

Para enviar dados, precisamos configurar o segundo argumento da funo \`fetch()\`, que  um objeto de opes. As propriedades mais importantes para envio de dados so:

*   \`method\`: O verbo HTTP (ex: \`'POST'\`, \`'PUT'\`, \`'DELETE'\`).
*   \`headers\`: Um objeto contendo os cabealhos da requisio. O mais comum  \`'Content-Type': 'application/json'\` para indicar que estamos enviando dados JSON.
*   \`body\`: Os dados que sero enviados. Para JSON,  necessrio usar \`JSON.stringify()\` para converter o objeto JavaScript em uma string JSON.

### Exemplo Prtico POST: Criando um Novo Recurso

Vamos criar um novo post na [JSONPlaceholder API](https://jsonplaceholder.typicode.com/).

\`\`\`javascript
async function createPost() {
  const newPost = {
    title: 'Meu Novo Post Incrvel',
    body: 'Este  o contedo do meu primeiro post usando a Fetch API.',
    userId: 1,
  };

  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json; charset=UTF-8',
      },
      body: JSON.stringify(newPost),
    });

    if (!response.ok) {
      throw new Error(\`HTTP error! status: \${response.status}\`);
    }

    const data = await response.json();
    console.log('Post criado com sucesso:', data);
    // A API JSONPlaceholder retorna o novo recurso com um ID gerado
  } catch (error) {
    console.error('Erro ao criar post:', error);
  }
}

createPost();
\`\`\`

**Explicao:**
*   \`method: 'POST'\`: Indica que queremos criar um novo recurso.
*   \`'Content-Type': 'application/json; charset=UTF-8'\`: Informa ao servidor que o corpo da requisio  uma string JSON codificada em UTF-8.
*   \`body: JSON.stringify(newPost)\`: Converte o objeto JavaScript \`newPost\` em uma string JSON para ser enviada no corpo da requisio.

### Exemplo Prtico PUT: Atualizando um Recurso Existente

Para atualizar um post existente (digamos, o post com ID 1), usamos o mtodo \`PUT\`. Geralmente, \`PUT\` espera a representao completa do recurso a ser atualizado.

\`\`\`javascript
async function updatePost() {
  const postId = 1;
  const updatedPost = {
    id: postId, //  uma boa prtica incluir o ID no corpo para PUT
    title: 'Ttulo do Post Atualizado',
    body: 'Contedo do post foi completamente modificado.',
    userId: 1,
  };

  try {
    const response = await fetch(\`https://jsonplaceholder.typicode.com/posts/\${postId}\`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json; charset=UTF-8',
      },
      body: JSON.stringify(updatedPost),
    });

    if (!response.ok) {
      throw new Error(\`HTTP error! status: \${response.status}\`);
    }

    const data = await response.json();
    console.log('Post atualizado com sucesso:', data);
  } catch (error) {
    console.error('Erro ao atualizar post:', error);
  }
}

updatePost();
\`\`\`

**Explicao:**
*   \`method: 'PUT'\`: Indica que queremos substituir um recurso existente.
*   A URL inclui o ID do recurso a ser atualizado (\`/posts/\${postId}\`).
*   O \`body\` contm a representao completa e atualizada do recurso.

### Exemplo Prtico DELETE: Excluindo um Recurso

Para excluir um post, usamos o mtodo \`DELETE\`. Requisies \`DELETE\` geralmente no precisam de um corpo.

\`\`\`javascript
async function deletePost() {
  const postId = 1;

  try {
    const response = await fetch(\`https://jsonplaceholder.typicode.com/posts/\${postId}\`, {
      method: 'DELETE',
    });

    // DELETE geralmente retorna um status 200 OK ou 204 No Content se bem-sucedido
    if (!response.ok) {
      throw new Error(\`HTTP error! status: \${response.status}\`);
    }

    console.log(\`Post \${postId} excludo com sucesso.\`);
    // Para DELETE, response.json() pode falhar se no houver corpo na resposta (204 No Content)
    // Portanto,  mais seguro no tentar parsear JSON se o status for 204.
    if (response.status !== 204) {
        const data = await response.json();
        console.log('Resposta do DELETE (se houver):', data);
    }

  } catch (error) {
    console.error('Erro ao excluir post:', error);
  }
}

deletePost();
\`\`\`

**Explicao:**
*   \`method: 'DELETE'\`: Indica que queremos remover um recurso.
*   A URL inclui o ID do recurso a ser excludo.
*   No h \`body\` na requisio \`DELETE\`.
*   Verificamos \`response.status !== 204\` antes de tentar \`response.json()\` para evitar erros se o servidor no retornar contedo.

Dominar esses mtodos HTTP e a configurao da Fetch API  fundamental para construir aplicaes web interativas que se comunicam de forma eficaz com APIs.
`,eot=()=>g.jsx(qe,{content:Zrt,backRoute:"/ws/consumo-de-api",backText:"Voltar: Consumo de API",goRoute:"/ws/tratamento-de-erros",goText:"Prximo: Tratamento de Erros"}),tot=`# Aula 6: Tratamento de Respostas e Erros

## Objetivo
Objetivo: Aprender/Entender como tratar as respostas de uma API, incluindo os Status Codes HTTP, e como lidar com erros de forma eficaz em JavaScript usando a Fetch API.

## O que  Tratamento de Respostas e Erros?

Ao interagir com APIs, nem todas as requisies sero bem-sucedidas.  crucial que sua aplicao saiba como interpretar as respostas do servidor e como reagir a diferentes cenrios, sejam eles de sucesso, de falha na validao, de recursos no encontrados ou de erros internos do servidor. O **tratamento de respostas** envolve a leitura dos dados retornados e a verificao do status da operao, enquanto o **tratamento de erros**  a estratgia para lidar com situaes inesperadas ou problemticas, garantindo que a aplicao permanea robusta e fornea feedback til ao usurio.

## Como funciona? Status Codes HTTP e Tratamento de Erros com Fetch

### Status Codes HTTP

Os **Status Codes HTTP** so cdigos numricos de trs dgitos retornados pelo servidor em cada resposta HTTP. Eles indicam o resultado da requisio e so categorizados em cinco classes:

*   **\`1xx\` (Informacional):** A requisio foi recebida e o processo continua.
*   **\`2xx\` (Sucesso):** A requisio foi recebida, entendida e aceita com sucesso.
    *   \`200 OK\`: A requisio foi bem-sucedida. O recurso foi encontrado e retornado.
    *   \`201 Created\`: A requisio foi bem-sucedida e um novo recurso foi criado como resultado (comum aps um \`POST\`).
    *   \`204 No Content\`: A requisio foi bem-sucedida, mas no h contedo para enviar na resposta (comum aps um \`DELETE\` ou \`PUT\` que no retorna dados).
*   **\`3xx\` (Redirecionamento):**  preciso tomar aes adicionais para completar a requisio.
    *   \`301 Moved Permanently\`: O recurso foi movido permanentemente para uma nova URL.
*   **\`4xx\` (Erro do Cliente):** A requisio contm sintaxe incorreta ou no pode ser cumprida.
    *   \`400 Bad Request\`: O servidor no conseguiu entender a requisio devido a sintaxe invlida.
    *   \`401 Unauthorized\`: A requisio requer autenticao. O cliente no est autenticado.
    *   \`403 Forbidden\`: O cliente no tem permisso para acessar o recurso, mesmo que esteja autenticado.
    *   \`404 Not Found\`: O servidor no conseguiu encontrar o recurso solicitado.
    *   \`429 Too Many Requests\`: O cliente enviou muitas requisies em um determinado perodo de tempo (rate limiting).
*   **\`5xx\` (Erro do Servidor):** O servidor falhou em cumprir uma requisio aparentemente vlida.
    *   \`500 Internal Server Error\`: O servidor encontrou uma condio inesperada que o impediu de cumprir a requisio.
    *   \`503 Service Unavailable\`: O servidor est temporariamente incapaz de lidar com a requisio devido a sobrecarga ou manuteno.

### Tratamento de Erros com Fetch API

A Fetch API no considera respostas \`4xx\` ou \`5xx\` como erros de rede. A \`Promise\` retornada por \`fetch\` s ser rejeitada em caso de problemas de rede (como falta de conexo) ou se a requisio for abortada. Para tratar erros HTTP, voc deve verificar a propriedade \`response.ok\` ou \`response.status\`.

\`\`\`javascript
async function fetchData() {
  try {
    const response = await fetch("https://api.example.com/data");

    // 1. Verificar se a resposta foi bem-sucedida (status 2xx)
    if (!response.ok) {
      // Se o status no for 2xx, lanar um erro com o status e a mensagem do servidor
      const errorData = await response.json(); // Tentar ler o corpo do erro, se houver
      throw new Error(\`Erro HTTP: \${response.status} - \${errorData.message || response.statusText}\`);
    }

    // 2. Processar a resposta JSON
    const data = await response.json();
    console.log("Dados recebidos:", data);
    return data;

  } catch (error) {
    // 3. Capturar erros de rede ou erros lanados manualmente
    console.error("Ocorreu um erro na requisio:", error.message);
    // Aqui voc pode exibir uma mensagem de erro para o usurio
    // ou tentar novamente a requisio, dependendo da natureza do erro.
  }
}

fetchData();
\`\`\`

**Explicao Detalhada:**

1.  **Verificao \`response.ok\`:** A propriedade \`response.ok\`  um booleano que indica se a resposta HTTP foi bem-sucedida (status code entre 200 e 299). Se for \`false\`, significa que houve um erro no lado do cliente ou do servidor, e devemos tratar isso como um erro.
2.  **Lanando Erros Personalizados:** Dentro do bloco \`if (!response.ok)\`, lanamos um novo \`Error\`.  uma boa prtica tentar extrair uma mensagem de erro mais detalhada do corpo da resposta (se a API fornecer uma, geralmente em JSON) ou usar \`response.statusText\`.
3.  **Bloco \`try...catch\`:**
    *   O \`try\` envolve o cdigo que pode gerar erros (a chamada \`fetch\` e o processamento da resposta).
    *   O \`catch(error)\` captura qualquer erro que seja lanado dentro do bloco \`try\`, seja um erro de rede (rejeio da Promise do \`fetch\`) ou um erro que lanamos manualmente (como no passo 2).

### Exemplo com Diferentes Status Codes

\`\`\`javascript
async function createUser(userData) {
  try {
    const response = await fetch("https://api.example.com/users", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(userData),
    });

    if (response.status === 201) {
      const newUser = await response.json();
      console.log("Usurio criado com sucesso:", newUser);
      return newUser;
    } else if (response.status === 400) {
      const errorDetails = await response.json();
      console.error("Erro de validao:", errorDetails.errors);
      // Exibir erros de validao especficos para o usurio
      throw new Error("Dados invlidos: " + errorDetails.errors.join(", "));
    } else if (response.status === 409) { // Exemplo: Conflito, usurio j existe
      console.error("Usurio j existe.");
      throw new Error("Este e-mail j est em uso.");
    } else {
      // Para outros erros 4xx/5xx no tratados especificamente
      throw new Error(\`Erro inesperado: \${response.status} - \${response.statusText}\`);
    }

  } catch (error) {
    console.error("Falha ao criar usurio:", error.message);
    // Lgica para exibir mensagem de erro genrica ou especfica
  }
}

// Exemplo de uso:
// createUser({ name: "Alice", email: "alice@example.com" });
// createUser({ name: "Bob", email: "invalid-email" }); // Simular erro 400
\`\`\`

**Pontos Chave para o Tratamento de Erros:**

*   **Seja Especfico:** Tente tratar os \`Status Codes\` mais comuns para sua API de forma especfica (ex: \`400\` para validao, \`404\` para no encontrado).
*   **Mensagens Claras:** As mensagens de erro para o usurio final devem ser claras, concisas e, se possvel, sugerir uma soluo.
*   **Logs:** Registre os erros no console ou em um sistema de monitoramento para depurao.
*   **Feedback ao Usurio:** Sempre fornea feedback visual ao usurio sobre o status da requisio (carregando, sucesso, erro).

Dominar o tratamento de respostas e erros  fundamental para construir aplicaes robustas e com uma boa experincia de usurio, pois permite que sua aplicao reaja de forma inteligente a qualquer situao que possa surgir na comunicao com APIs.
`,not=()=>g.jsx(qe,{content:tot,backRoute:"/ws/enviando-dados",backText:"Voltar: Enviando Dados",goRoute:"/ws/autenticacao",goText:"Prximo: Autenticao e Autorizao"}),rot=`# Aula 7: Autenticao e Autorizao

## Objetivo
Objetivo: Aprender/Entender a diferena entre Autenticao e Autorizao e os mtodos comuns de autenticao em APIs REST, com exemplos prticos em JavaScript.

## O que  Autenticao e Autorizao?

Ao interagir com APIs que contm dados sensveis ou funcionalidades restritas,  fundamental garantir que apenas usurios permitidos possam acess-los. Para isso, utilizamos dois conceitos distintos, mas complementares:

*   **Autenticao ("Quem voc ?"):**  o processo de verificar a identidade de um usurio ou sistema.  como apresentar um documento de identidade para provar quem voc . Em APIs, isso geralmente envolve o envio de credenciais (como nome de usurio e senha, ou uma chave secreta) que o servidor verifica para confirmar sua identidade.

*   **Autorizao ("O que voc pode fazer?"):**  o processo de determinar quais permisses um usurio ou sistema autenticado possui. Uma vez que sua identidade  confirmada (autenticao), a autorizao define quais recursos voc pode acessar e quais aes voc pode realizar.  como ter um crach que, alm de identificar voc, tambm indica as reas do prdio onde voc tem permisso para entrar.

Em resumo, a **autenticao** estabelece a identidade, enquanto a **autorizao** define o nvel de acesso e as permisses associadas a essa identidade.

## Como funciona? Mtodos Comuns de Autenticao em APIs REST

Existem diversos mtodos para autenticar requisies em APIs REST. Vamos explorar os mais comuns:

### 1. API Keys (Chaves de API)

**O que :** Uma API Key  uma string nica e secreta que  usada para identificar o aplicativo ou usurio que est fazendo a requisio.  uma forma simples de autenticao, geralmente usada para controlar o acesso a APIs pblicas ou para monitorar o uso.

**Como funciona:** A chave de API  enviada em cada requisio, geralmente em um cabealho HTTP (\`X-API-Key\`, \`Authorization\`) ou como um parmetro de consulta (query parameter) na URL.

**Exemplo Prtico (em JavaScript com Fetch):**

\`\`\`javascript
async function fetchDataWithApiKey() {
  const apiKey = 'SUA_API_KEY_SECRETA'; // Substitua pela sua chave de API
  const url = \`https://api.example.com/data?apiKey=\${apiKey}\`; // Como query parameter
  // Ou como cabealho:
  // const url = 'https://api.example.com/data';

  try {
    const response = await fetch(url, {
      method: 'GET',
      headers: {
        // 'X-API-Key': apiKey, // Exemplo de envio via cabealho
        'Content-Type': 'application/json',
      },
    });

    if (!response.ok) {
      throw new Error(\`Erro HTTP: \${response.status}\`);
    }

    const data = await response.json();
    console.log('Dados obtidos com API Key:', data);
  } catch (error) {
    console.error('Erro ao buscar dados com API Key:', error);
  }
}

fetchDataWithApiKey();
\`\`\`

**Consideraes:** API Keys so fceis de implementar, mas menos seguras para autenticao de usurios individuais, pois se a chave for comprometida, qualquer um pode us-la. So mais adequadas para identificar aplicaes ou para APIs com baixo nvel de sensibilidade.

### 2. Bearer Token (JSON Web Tokens - JWT)

**O que :** Bearer Token  um tipo de token de segurana que concede acesso ao portador (bearer) do token. O tipo mais comum de Bearer Token em APIs REST modernas  o **JSON Web Token (JWT)**. Um JWT  um token compacto e auto-contido que  usado para transmitir informaes de forma segura entre as partes como um objeto JSON.

**Fluxo Bsico de Autenticao com JWT:**

1.  **Login:** O cliente envia as credenciais do usurio (ex: e-mail e senha) para um endpoint de login na API.
2.  **Gerao do Token:** Se as credenciais forem vlidas, o servidor gera um JWT e o envia de volta ao cliente.
3.  **Armazenamento do Token:** O cliente armazena este JWT (geralmente em \`localStorage\` ou \`sessionStorage\` no navegador).
4.  **Requisies Protegidas:** Para acessar recursos protegidos, o cliente inclui o JWT em cada requisio subsequente, no cabealho \`Authorization\` com o prefixo \`Bearer\`.
5.  **Verificao:** O servidor recebe a requisio, verifica a validade do JWT (assinatura, expirao) e, se vlido, concede acesso ao recurso solicitado.

**Exemplo Prtico (em JavaScript com Fetch):**

\`\`\`javascript
// Simulao de um processo de login para obter um token
async function loginUser(email, password) {
  try {
    const response = await fetch('https://api.example.com/login', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ email, password }),
    });

    if (!response.ok) {
      throw new Error(\`Erro de login: \${response.status}\`);
    }

    const data = await response.json();
    const token = data.token; // Supondo que a API retorna um objeto com a propriedade 'token'
    localStorage.setItem('authToken', token); // Armazena o token no localStorage
    console.log('Login bem-sucedido. Token:', token);
    return token;
  } catch (error) {
    console.error('Falha no login:', error);
    throw error;
  }
}

// Funo para fazer uma requisio autenticada com o Bearer Token
async function fetchProtectedData() {
  const token = localStorage.getItem('authToken'); // Recupera o token armazenado

  if (!token) {
    console.error('Nenhum token de autenticao encontrado. Faa login primeiro.');
    return;
  }

  try {
    const response = await fetch('https://api.example.com/protected-data', {
      method: 'GET',
      headers: {
        'Authorization': \`Bearer \${token}\`, // Envia o token no cabealho Authorization
        'Content-Type': 'application/json',
      },
    });

    if (!response.ok) {
      throw new Error(\`Erro HTTP: \${response.status}\`);
    }

    const data = await response.json();
    console.log('Dados protegidos obtidos:', data);
  } catch (error) {
    console.error('Erro ao buscar dados protegidos:', error);
  }
}

// Exemplo de uso:
// (async () => {
//   try {
//     await loginUser('user@example.com', 'password123');
//     await fetchProtectedData();
//   } catch (e) {
//     console.log('Processo de autenticao falhou.');
//   }
// })();
\`\`\`

**Integrao em um Componente React (Exemplo Bsico):**

Em um componente React, voc gerenciaria o estado de autenticao (se o usurio est logado e o token) e usaria um \`useEffect\` para buscar dados protegidos aps o login ou quando o token estiver disponvel.

\`\`\`javascript
import React, { useEffect, useState } from 'react';

function ProtectedContent() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [token, setToken] = useState(localStorage.getItem('authToken'));

  // Funo de login (simplificada para o exemplo)
  const handleLogin = async () => {
    try {
      const response = await fetch('https://api.example.com/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email: 'user@example.com', password: 'password123' }),
      });
      const result = await response.json();
      if (response.ok) {
        localStorage.setItem('authToken', result.token);
        setToken(result.token);
      } else {
        throw new Error(result.message || 'Falha no login');
      }
    } catch (err) {
      setError(err);
    }
  };

  useEffect(() => {
    async function fetchProtectedData() {
      if (!token) {
        setLoading(false);
        return; // No tenta buscar se no h token
      }

      try {
        const response = await fetch('https://api.example.com/protected-data', {
          method: 'GET',
          headers: {
            'Authorization': \`Bearer \${token}\`,
            'Content-Type': 'application/json',
          },
        });

        if (!response.ok) {
          throw new Error(\`Erro HTTP: \${response.status}\`);
        }

        const result = await response.json();
        setData(result);
      } catch (err) {
        setError(err);
      } finally {
        setLoading(false);
      }
    }

    fetchProtectedData();
  }, [token]); // Dependncia do token: refaz a requisio se o token mudar

  if (loading) return <p>Carregando contedo protegido...</p>;
  if (error) return <p>Erro: {error.message}. Por favor, {token ? 'tente novamente' : <button onClick={handleLogin}>faa login</button>}.</p>;
  if (!token) return <p>Por favor, <button onClick={handleLogin}>faa login</button> para ver o contedo protegido.</p>;

  return (
    <div>
      <h1>Contedo Protegido</h1>
      <pre>{JSON.stringify(data, null, 2)}</pre>
    </div>
  );
}

export default ProtectedContent;
\`\`\`

**Consideraes:** JWTs so amplamente utilizados por sua flexibilidade e por serem stateless (o servidor no precisa armazenar o estado da sesso). No entanto,  crucial gerenciar a expirao do token e o processo de refresh para manter a segurana e a experincia do usurio. O armazenamento em \`localStorage\`  conveniente, mas pode ser vulnervel a ataques XSS (Cross-Site Scripting); para aplicaes de alta segurana, outras estratgias (como \`HttpOnly cookies\`) podem ser preferveis.

Dominar esses mtodos de autenticao  essencial para construir aplicaes web seguras e que interagem de forma responsvel com APIs que exigem controle de acesso.
`,oot=()=>g.jsx(qe,{content:rot,backRoute:"/ws/enviando-dados",backText:"Voltar: Enviando Dados",goRoute:"/node/introducao",goText:"Prximo: Introduo ao Node.js"}),aot=`# Curso: NodeJS - Do Bsico ao Avanado

Este curso foi desenhado para transformar iniciantes em desenvolvedores backend proficientes, capazes de construir aplicaes escalveis, seguras e de alta performance utilizando NodeJS. O contedo abrange desde os fundamentos do JavaScript e do ambiente NodeJS at tpicos avanados como segurana, performance, testes e deploy, sempre com foco nas melhores prticas e tecnologias mais recentes do mercado.

## Estrutura do Curso

O curso est dividido em 5 mdulos principais:

1.  **Mdulo 1: Fundamentos do NodeJS e JavaScript Moderno**
2.  **Mdulo 2: Frameworks e Construo de APIs RESTful**
3.  **Mdulo 3: Persistncia de Dados com Bancos de Dados**
4.  **Mdulo 4: Tpicos Avanados e Boas Prticas**
5.  **Mdulo 5: Deploy e Ecossistema**

Cada mdulo contm tpicos detalhados que sero explorados com exemplos prticos e explicaes aprofundadas.

## Pr-requisitos

*   Conhecimento bsico de lgica de programao.
*   Familiaridade com JavaScript (variveis, funes, estruturas de controle).
*   Noes bsicas de linha de comando.

## O que voc vai aprender

*   Dominar os conceitos fundamentais do NodeJS e seu ecossistema.
*   Construir APIs RESTful robustas e escalveis com Express.js.
*   Integrar aplicaes NodeJS com bancos de dados SQL (PostgreSQL) e NoSQL (MongoDB).
*   Implementar autenticao e autorizao seguras com JWT.
*   Escrever cdigo mais seguro e manutenvel com TypeScript.
*   Otimizar a performance de aplicaes NodeJS.
*   Realizar testes unitrios, de integrao e E2E.
*   Containerizar aplicaes com Docker.
*   Automatizar o deploy com CI/CD.

---

`,sot=()=>g.jsx(qe,{content:aot,backRoute:"/react/dicas-vaga",backText:"Voltar: Dicas para Vagas",goRoute:"/node/fundamentos",goText:"Prximo: Fundamentos ao NodeJS"}),iot=`# Mdulo 1: Fundamentos do NodeJS e JavaScript Moderno

## Tpico 1.2: Configurao do Ambiente

Para comear a desenvolver com Node.js,  essencial configurar corretamente o ambiente de desenvolvimento. Isso envolve a instalao do Node.js e do seu gerenciador de pacotes padro, o npm (Node Package Manager), alm de entender as alternativas disponveis.

### Instalando NodeJS e NPM (Node Package Manager)

O Node.js e o npm so distribudos juntos, o que significa que ao instalar o Node.js, o npm tambm  instalado automaticamente. Existem vrias maneiras de instalar o Node.js, dependendo do seu sistema operacional e das suas preferncias.

#### 1. Usando o Instalador Oficial (Recomendado para Iniciantes)

A maneira mais simples e recomendada para a maioria dos usurios  baixar o instalador diretamente do site oficial do Node.js.

*   **Passo 1: Acessar o Site Oficial**
    V para [nodejs.org](https://nodejs.org/).

*   **Passo 2: Escolher a Verso**
    Voc ver duas opes principais:
    *   **LTS (Long Term Support):** Esta  a verso recomendada para a maioria dos usurios, pois  mais estvel e recebe suporte por um perodo mais longo. Ideal para ambientes de produo.
    *   **Current (ltimos Recursos):** Esta verso contm os recursos mais recentes, mas pode ser menos estvel. Recomendada para quem quer experimentar as ltimas novidades ou para desenvolvimento no crtico.

    Escolha a verso LTS para este curso.

*   **Passo 3: Baixar e Executar o Instalador**
    Clique no boto da verso LTS para baixar o instalador adequado ao seu sistema operacional (Windows, macOS). Para Linux, o site geralmente fornece instrues para usar o gerenciador de pacotes da sua distribuio.

*   **Passo 4: Seguir as Instrues de Instalao**
    Execute o instalador e siga os passos. Geralmente, voc pode aceitar as configuraes padro. O instalador cuidar de adicionar o Node.js e o npm ao seu PATH do sistema, tornando-os acessveis a partir do terminal.

#### 2. Verificando a Instalao

Aps a instalao, abra um novo terminal ou prompt de comando e execute os seguintes comandos para verificar se o Node.js e o npm foram instalados corretamente:

\`\`\`bash
node -v
npm -v
\`\`\`

Voc dever ver os nmeros das verses instaladas. Se voc receber um erro como "comando no encontrado", pode ser necessrio reiniciar o terminal ou verificar se o Node.js foi adicionado corretamente ao seu PATH.

#### 3. Usando Gerenciadores de Verso (Recomendado para Desenvolvedores Experientes)

Para desenvolvedores que trabalham com mltiplos projetos que podem exigir diferentes verses do Node.js, o uso de um gerenciador de verso  altamente recomendado. Isso evita conflitos e facilita a alternncia entre verses.

*   **nvm (Node Version Manager):** Popular para sistemas baseados em Unix (macOS, Linux).
    *   **Instalao (exemplo para Linux/macOS):**
        \`\`\`bash
        curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
        # Ou via wget
        wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
        \`\`\`
        Aps a instalao, feche e reabra o terminal ou execute \`source ~/.bashrc\` (ou \`~/.zshrc\`, \`~/.profile\`).

    *   **Comandos Bsicos do nvm:**
        \`\`\`bash
        nvm install <verso>   # Ex: nvm install 18.17.1
        nvm use <verso>      # Ex: nvm use 18.17.1
        nvm alias default <verso> # Define a verso padro
        nvm ls                # Lista as verses instaladas
        nvm current           # Mostra a verso em uso
        \`\`\`

*   **nvs (Node Version Switcher):** Multiplataforma (Windows, macOS, Linux).
    *   **Instalao (exemplo para Windows com PowerShell):**
        \`\`\`powershell
        Invoke-WebRequest https://raw.githubusercontent.com/jasongin/nvs/master/install.ps1 -OutFile install.ps1
        .\\install.ps1
        \`\`\`

    *   **Comandos Bsicos do nvs:**
        \`\`\`bash
        nvs add <verso>      # Ex: nvs add lts
        nvs use <verso>      # Ex: nvs use lts
        nvs link <verso>     # Define a verso padro
        nvs ls                # Lista as verses instaladas
        \`\`\`

### Viso Geral sobre Gerenciadores de Pacotes (NPM, Yarn, PNPM)

Gerenciadores de pacotes so ferramentas essenciais no ecossistema Node.js. Eles permitem que voc instale, gerencie e compartilhe bibliotecas e mdulos de cdigo (pacotes) em seus projetos. O npm  o gerenciador padro, mas Yarn e pnpm surgiram como alternativas com diferentes otimizaes.

#### 1. npm (Node Package Manager)

*   **Padro:** Vem instalado com o Node.js.
*   **Funcionalidades:** Instalao de pacotes, gerenciamento de dependncias, execuo de scripts, publicao de pacotes.
*   **\`package.json\`:** Arquivo central que descreve o projeto, suas dependncias e scripts.
*   **\`node_modules\`:** Pasta onde os pacotes instalados so armazenados.
*   **\`package-lock.json\`:** Garante que as dependncias sejam instaladas com as mesmas verses em diferentes ambientes, travando a rvore de dependncias.

    **Comandos Comuns:**
    \`\`\`bash
    npm init -y          # Inicializa um novo projeto com package.json padro
    npm install          # Instala todas as dependncias listadas em package.json
    npm install <pacote> # Instala um pacote e o adiciona como dependncia
    npm install <pacote> --save-dev # Instala como dependncia de desenvolvimento
    npm uninstall <pacote> # Desinstala um pacote
    npm update           # Atualiza pacotes
    npm run <script>     # Executa um script definido em package.json
    \`\`\`

#### 2. Yarn

*   **Criado pelo Facebook:** Lanado para resolver problemas de performance e segurana do npm na poca.
*   **Vantagens (histricas):** Instalaes mais rpidas (cache, paralelizao), \`yarn.lock\` para instalaes determinsticas.
*   **Compatibilidade:** Usa o mesmo \`package.json\` do npm.

    **Comandos Comuns (similares ao npm):**
    \`\`\`bash
    yarn init -y
    yarn install
    yarn add <pacote>
    yarn add <pacote> --dev
    yarn remove <pacote>
    yarn upgrade
    yarn <script>
    \`\`\`

#### 3. pnpm

*   **Foco:** Eficincia de espao em disco e velocidade.
*   **Como funciona:** Utiliza um armazenamento de contedo enderevel para pacotes, criando links simblicos para \`node_modules\`. Isso significa que um pacote  armazenado apenas uma vez no sistema, mesmo que seja usado em vrios projetos.
*   **Vantagens:** Economia de espao, instalaes mais rpidas, estrutura de \`node_modules\` mais estrita que ajuda a evitar dependncias fantasmas.

    **Comandos Comuns (similares ao npm/yarn):**
    \`\`\`bash
    pnpm init -y
    pnpm install
    pnpm add <pacote>
    pnpm add <pacote> --save-dev
    pnpm remove <pacote>
    pnpm update
    pnpm <script>
    \`\`\`

### Qual Gerenciador de Pacotes Usar?

Para este curso, o **npm** ser o gerenciador de pacotes padro, pois  universalmente disponvel com a instalao do Node.js e suas verses mais recentes (npm v7+) incorporaram muitas das melhorias de performance e segurana que antes eram exclusivas do Yarn e pnpm. No entanto,  bom estar ciente das alternativas e suas vantagens, pois voc pode encontr-las em outros projetos.

### Concluso

Com o Node.js e o npm instalados e funcionando, voc est pronto para comear a escrever e executar seu cdigo JavaScript no servidor. A escolha de um gerenciador de verso como \`nvm\` ou \`nvs\`  uma boa prtica para gerenciar mltiplos projetos, e entender as diferenas entre npm, Yarn e pnpm o ajudar a navegar no ecossistema Node.js de forma mais eficaz.

---

`,lot=()=>g.jsx(qe,{content:iot,backRoute:"/node/introducao",backText:"Voltar: Introduo",goRoute:"/node/frameworks",goText:"Prximo: Frameworks e API"}),cot=`# Mdulo 2: Frameworks e Construo de APIs RESTful

## Tpico 2.3: Construindo uma API RESTful Completa

Aps entender os fundamentos do Express.js e os padres de arquitetura,  hora de aplicar esse conhecimento na construo de uma API RESTful completa. Uma API RESTful (Representational State Transfer)  um conjunto de princpios arquitetnicos para projetar servios web. Ela se baseia em recursos (resources) e utiliza mtodos HTTP padro para realizar operaes sobre esses recursos.

### Princpios RESTful

*   **Recursos (Resources):** Tudo  um recurso (ex: usurios, produtos, pedidos). Cada recurso  identificado por uma URI nica (Uniform Resource Identifier).
*   **Mtodos HTTP:** Utiliza os mtodos HTTP padro (GET, POST, PUT, DELETE, PATCH) para realizar operaes CRUD (Create, Read, Update, Delete) nos recursos.
    *   \`GET /recursos\`: Recupera uma lista de recursos.
    *   \`GET /recursos/{id}\`: Recupera um recurso especfico.
    *   \`POST /recursos\`: Cria um novo recurso.
    *   \`PUT /recursos/{id}\`: Atualiza completamente um recurso existente.
    *   \`PATCH /recursos/{id}\`: Atualiza parcialmente um recurso existente.
    *   \`DELETE /recursos/{id}\`: Remove um recurso especfico.
*   **Stateless (Sem Estado):** Cada requisio do cliente para o servidor deve conter todas as informaes necessrias para entender a requisio. O servidor no deve armazenar nenhum estado do cliente entre as requisies.
*   **Uniform Interface (Interface Uniforme):** A forma como os clientes interagem com a API deve ser consistente, facilitando a compreenso e o uso.
*   **HATEOAS (Hypermedia as the Engine of Application State):** Opcional, mas recomendado. Os recursos devem conter links para outros recursos relacionados, guiando o cliente atravs da aplicao.

### Exemplo Prtico: API de Produtos

Vamos construir uma API simples para gerenciar produtos. Para simplificar, inicialmente usaremos um array em memria para armazenar os produtos, e depois veremos como integrar com um banco de dados no prximo mdulo.

#### Estrutura do Projeto (Reviso)

\`\`\`
meu-projeto-api/
 src/
    controllers/
       productController.js
    routes/
       productRoutes.js
    app.js
    server.js
 package.json
 ...
\`\`\`

#### 1. \`server.js\` (Ponto de Entrada)

\`\`\`javascript
const app = require("./src/app");

const PORT = process.env.PORT || 3000;

app.listen(PORT, () => {
  console.log(\`Servidor rodando em http://localhost:\${PORT}\`);
});
\`\`\`

#### 2. \`app.js\` (Configurao do Express)

\`\`\`javascript
const express = require("express");
const productRoutes = require("./routes/productRoutes");

const app = express();

// Middleware para parsear JSON no corpo das requisies
app.use(express.json());

// Rotas da API de produtos
app.use("/api/products", productRoutes);

// Rota padro para 404
app.use((req, res, next) => {
  res.status(404).json({ message: "Rota no encontrada" });
});

// Middleware de tratamento de erros (exemplo bsico)
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({ message: "Erro interno do servidor" });
});

module.exports = app;
\`\`\`

#### 3. \`productController.js\` (Lgica de Negcios e Manipulao de Dados)

\`\`\`javascript
let products = [
  { id: "1", name: "Laptop", price: 1200, description: "Powerful laptop for work and gaming" },
  { id: "2", name: "Mouse", price: 25, description: "Ergonomic wireless mouse" },
  { id: "3", name: "Keyboard", price: 75, description: "Mechanical keyboard with RGB lighting" },
];

// Funo utilitria para gerar IDs simples (para o exemplo em memria)
const generateId = () => {
  return String(products.length > 0 ? Math.max(...products.map(p => parseInt(p.id))) + 1 : 1);
};

// GET /api/products - Listar todos os produtos
exports.getAllProducts = (req, res) => {
  res.status(200).json(products);
};

// GET /api/products/:id - Obter um produto por ID
exports.getProductById = (req, res) => {
  const { id } = req.params;
  const product = products.find(p => p.id === id);

  if (!product) {
    return res.status(404).json({ message: "Produto no encontrado" });
  }
  res.status(200).json(product);
};

// POST /api/products - Criar um novo produto
exports.createProduct = (req, res) => {
  const { name, price, description } = req.body;

  // Validao bsica
  if (!name || !price || !description) {
    return res.status(400).json({ message: "Nome, preo e descrio so obrigatrios" });
  }

  const newProduct = { id: generateId(), name, price, description };
  products.push(newProduct);
  res.status(201).json(newProduct);
};

// PUT /api/products/:id - Atualizar um produto existente (completo)
exports.updateProduct = (req, res) => {
  const { id } = req.params;
  const { name, price, description } = req.body;

  const productIndex = products.findIndex(p => p.id === id);

  if (productIndex === -1) {
    return res.status(404).json({ message: "Produto no encontrado" });
  }

  // Validao bsica
  if (!name || !price || !description) {
    return res.status(400).json({ message: "Nome, preo e descrio so obrigatrios para atualizao completa" });
  }

  products[productIndex] = { id, name, price, description };
  res.status(200).json(products[productIndex]);
};

// DELETE /api/products/:id - Deletar um produto
exports.deleteProduct = (req, res) => {
  const { id } = req.params;
  const initialLength = products.length;
  products = products.filter(p => p.id !== id);

  if (products.length === initialLength) {
    return res.status(404).json({ message: "Produto no encontrado" });
  }
  res.status(204).send(); // 204 No Content para deleo bem-sucedida
};
\`\`\`

#### 4. \`productRoutes.js\` (Definio das Rotas)

\`\`\`javascript
const express = require("express");
const productController = require("../controllers/productController");

const router = express.Router();

router.get("/", productController.getAllProducts);
router.get("/:id", productController.getProductById);
router.post("/", productController.createProduct);
router.put("/:id", productController.updateProduct);
router.delete("/:id", productController.deleteProduct);

module.exports = router;
\`\`\`

### Recebendo e Validando Dados

#### \`req.body\`

Para receber dados enviados no corpo da requisio (geralmente em requisies POST, PUT, PATCH), o Express.js precisa de um middleware para parsear esse corpo. \`express.json()\`  o middleware mais comum para JSON.

\`\`\`javascript
// Em app.js
app.use(express.json());

// Em um controller (ex: createProduct)
const { name, price, description } = req.body;
\`\`\`

#### \`req.params\`

Usado para capturar valores de segmentos dinmicos na URL (parmetros de rota).

\`\`\`javascript
// Rota: /api/products/:id
// URL: /api/products/123
const { id } = req.params; // id ser "123"
\`\`\`

#### \`req.query\`

Usado para capturar parmetros de consulta na URL (aps o \`?\`).

\`\`\`javascript
// URL: /api/products?category=electronics&limit=10
const { category, limit } = req.query; // category ser "electronics", limit ser "10"
\`\`\`

#### Validao de Dados

 crucial validar os dados recebidos do cliente para garantir a integridade da aplicao e prevenir ataques. No exemplo acima, fizemos uma validao bsica. Em aplicaes reais, voc usaria bibliotecas como \`Joi\`, \`Yup\` ou \`express-validator\`.

\`\`\`javascript
// Exemplo de validao com express-validator (requer instalao: npm install express-validator)
const { body, validationResult } = require("express-validator");

// Middleware de validao para criao de produto
const validateProduct = [
  body("name").notEmpty().withMessage("Nome  obrigatrio"),
  body("price").isFloat({ gt: 0 }).withMessage("Preo deve ser um nmero positivo"),
  body("description").isLength({ min: 10 }).withMessage("Descrio deve ter no mnimo 10 caracteres"),
  (req, res, next) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }
    next();
  },
];

// No productRoutes.js
router.post("/", validateProduct, productController.createProduct);
\`\`\`

### Retornando Dados e Cdigos de Status HTTP Corretos

Uma API RESTful deve sempre retornar cdigos de status HTTP apropriados para indicar o resultado de uma operao. Isso ajuda os clientes a entenderem o que aconteceu com a requisio.

#### Cdigos de Status HTTP Comuns:

*   **\`200 OK\`**: Requisio bem-sucedida (GET, PUT, PATCH).
*   **\`201 Created\`**: Recurso criado com sucesso (POST).
*   **\`204 No Content\`**: Requisio bem-sucedida, mas sem contedo para retornar (DELETE).
*   **\`400 Bad Request\`**: Requisio malformada ou invlida (erros de validao).
*   **\`401 Unauthorized\`**: Autenticao necessria ou falhou.
*   **\`403 Forbidden\`**: Cliente autenticado, mas no tem permisso para acessar o recurso.
*   **\`404 Not Found\`**: Recurso no encontrado.
*   **\`409 Conflict\`**: Conflito com o estado atual do recurso (ex: tentar criar um recurso que j existe).
*   **\`500 Internal Server Error\`**: Erro genrico no servidor.

\`\`\`javascript
// Exemplos no productController.js
res.status(200).json(products); // OK
res.status(201).json(newProduct); // Created
res.status(204).send(); // No Content
res.status(400).json({ message: "Erro de validao" }); // Bad Request
res.status(404).json({ message: "Produto no encontrado" }); // Not Found
res.status(500).json({ message: "Erro interno do servidor" }); // Internal Server Error
\`\`\`

### Boas Prticas para o Design de APIs

*   **Nomes de Recursos no Plural:** Use nomes de recursos no plural (ex: \`/products\`, \`/users\`) para representar colees.
*   **URIs Descritivas:** As URIs devem ser claras e refletir a hierarquia dos recursos (ex: \`/users/{userId}/orders\`).
*   **Versionamento da API:** Para permitir mudanas futuras sem quebrar clientes existentes, considere versionar sua API (ex: \`/v1/products\`, \`/v2/products\`).
*   **Paginao, Filtragem e Ordenao:** Para APIs que retornam grandes colees, implemente parmetros de query para paginao (\`?page=1&limit=10\`), filtragem (\`?status=active\`) e ordenao (\`?sort=name:asc\`).
*   **Documentao:** Documente sua API usando ferramentas como Swagger/OpenAPI para facilitar o consumo por outros desenvolvedores.
*   **Segurana:** Implemente autenticao, autorizao e valide todas as entradas do usurio.

### Concluso

Construir uma API RESTful completa envolve mais do que apenas definir rotas. Requer uma compreenso dos princpios REST, uma estrutura de projeto organizada, validao robusta de dados e o uso correto dos cdigos de status HTTP. Ao seguir essas diretrizes e boas prticas, voc pode criar APIs que so eficientes, seguras, fceis de usar e manutenveis, formando a base slida para qualquer aplicao web moderna.

---

`,uot=()=>g.jsx(qe,{content:cot,backRoute:"/node/fundamentos",backText:"Voltar: Fundamentos",goRoute:"/node/banco-de-dados",goText:"Prximo: Banco de Dados"}),dot=`# Mdulo 3: Persistncia de Dados com Bancos de Dados

## Tpico 3.1: Bancos de Dados SQL vs. NoSQL

No desenvolvimento de aplicaes, a persistncia de dados  um componente fundamental. A escolha do tipo de banco de dados impacta diretamente a arquitetura, escalabilidade e performance da sua aplicao. Existem duas categorias principais de bancos de dados: SQL (relacionais) e NoSQL (no relacionais). Compreender as diferenas, prs e contras de cada um  crucial para tomar a deciso certa para o seu projeto Node.js.

### Bancos de Dados SQL (Relacionais)

Os bancos de dados SQL so baseados no modelo relacional, onde os dados so organizados em tabelas com linhas e colunas. As tabelas so relacionadas entre si atravs de chaves primrias e estrangeiras, garantindo a integridade referencial. A linguagem SQL (Structured Query Language)  usada para definir, manipular e consultar os dados.

**Exemplos:** MySQL, PostgreSQL, Oracle, SQL Server, SQLite.

#### Caractersticas Principais:

*   **Estrutura Rgida (Schema Fixo):** Os dados so armazenados em tabelas predefinidas com colunas e tipos de dados especficos. O schema deve ser definido antes da insero dos dados.
*   **Integridade de Dados:** Fortemente garantida atravs de chaves primrias, chaves estrangeiras, restries (constraints) e transaes ACID (Atomicidade, Consistncia, Isolamento, Durabilidade).
*   **Relacionamentos:** Suporte robusto a relacionamentos complexos entre tabelas (um-para-um, um-para-muitos, muitos-para-muitos).
*   **Linguagem SQL:** Linguagem padro e poderosa para consultas complexas, junes (JOINs) e agregaes.
*   **Escalabilidade Vertical:** Tradicionalmente escalam verticalmente (aumentando os recursos de um nico servidor, como CPU, RAM, disco). A escalabilidade horizontal (distribuir a carga entre mltiplos servidores)  mais complexa de implementar.

#### Prs:

*   **Consistncia Forte:** Ideal para aplicaes que exigem alta consistncia e integridade de dados (ex: sistemas financeiros, e-commerce).
*   **Consultas Complexas:** A linguagem SQL  extremamente poderosa para realizar consultas complexas e anlises de dados.
*   **Maturidade:** Tecnologia madura, com vasta documentao, ferramentas e comunidades de suporte.
*   **Modelagem Clara:** O modelo relacional  bem compreendido e facilita a modelagem de dados com relacionamentos bem definidos.

#### Contras:

*   **Rigidez do Schema:** Alterar o schema em um banco de dados em produo pode ser complexo e demorado, especialmente com grandes volumes de dados.
*   **Escalabilidade:** A escalabilidade horizontal pode ser um desafio, levando a solues mais complexas como sharding ou replicao.
*   **Performance em Grandes Volumes de Dados No Estruturados:** Pode no ser a melhor opo para lidar com grandes volumes de dados no estruturados ou semi-estruturados.

### Bancos de Dados NoSQL (No Relacionais)

NoSQL (Not Only SQL)  uma categoria ampla de bancos de dados que no seguem o modelo relacional tradicional. Eles foram desenvolvidos para lidar com as limitaes dos bancos de dados SQL em termos de escalabilidade, flexibilidade e performance para certos tipos de dados e cargas de trabalho. Existem vrios tipos de bancos de dados NoSQL, cada um otimizado para diferentes cenrios:

*   **Documento:** Armazenam dados em documentos flexveis, geralmente em formato JSON ou BSON (ex: MongoDB, Couchbase).
*   **Chave-Valor:** Armazenam dados como um dicionrio de pares chave-valor (ex: Redis, DynamoDB).
*   **Coluna Larga:** Armazenam dados em famlias de colunas (ex: Cassandra, HBase).
*   **Grafo:** Armazenam dados em ns e arestas, ideais para representar relacionamentos complexos (ex: Neo4j, Amazon Neptune).

**Exemplos:** MongoDB, Redis, Cassandra, DynamoDB, Neo4j.

#### Caractersticas Principais:

*   **Schema Flexvel (Schema-less):** No exigem um schema predefinido. Os documentos ou registros podem ter estruturas diferentes, facilitando a evoluo da aplicao e o armazenamento de dados semi-estruturados ou no estruturados.
*   **Escalabilidade Horizontal:** Projetados para escalar horizontalmente, distribuindo os dados e a carga de trabalho entre mltiplos servidores (sharding).
*   **Performance:** Frequentemente oferecem alta performance para operaes de leitura/escrita em grandes volumes de dados, especialmente quando a estrutura dos dados  simples ou quando a consistncia forte no  a prioridade mxima.
*   **Modelos de Dados Diversos:** Cada tipo de NoSQL  otimizado para um modelo de dados especfico, permitindo escolher a ferramenta certa para o problema certo.
*   **Consistncia Eventual:** Muitos bancos de dados NoSQL priorizam a disponibilidade e a tolerncia a parties em detrimento da consistncia forte (modelo BASE - Basically Available, Soft state, Eventually consistent).

#### Prs:

*   **Flexibilidade:** Facilidade para evoluir o schema e lidar com dados semi-estruturados ou no estruturados.
*   **Escalabilidade:** Excelente escalabilidade horizontal, ideal para aplicaes com grandes volumes de dados e trfego.
*   **Performance:** Alta performance para operaes especficas, dependendo do tipo de banco de dados NoSQL.
*   **Desenvolvimento gil:** A flexibilidade do schema acelera o ciclo de desenvolvimento, especialmente em estgios iniciais.

#### Contras:

*   **Consistncia:** A consistncia eventual pode ser um desafio para aplicaes que exigem transaes ACID rigorosas.
*   **Consultas Complexas:** Consultas complexas e junes entre diferentes 


colees podem ser mais difceis ou menos eficientes do que em bancos de dados SQL.
*   **Maturidade:** Alguns bancos de dados NoSQL so mais recentes e podem ter ecossistemas menos maduros em comparao com os SQL.
*   **Curva de Aprendizagem:** A diversidade de modelos de dados e abordagens pode exigir uma curva de aprendizagem maior para novos desenvolvedores.

### Tabela Comparativa: SQL vs. NoSQL

| Caracterstica         | Bancos de Dados SQL (Relacionais)                                  | Bancos de Dados NoSQL (No Relacionais)                                |
| :--------------------- | :----------------------------------------------------------------- | :--------------------------------------------------------------------- |
| **Modelo de Dados**    | Tabelas com linhas e colunas, relaes predefinidas                | Documento, Chave-Valor, Coluna Larga, Grafo (variados)                 |
| **Schema**             | Rgido, predefinido (Schema-on-write)                              | Flexvel, dinmico (Schema-on-read)                                    |
| **Linguagem de Query** | SQL (Structured Query Language)                                    | Varia (APIs especficas, linguagens de query prprias)                 |
| **Escalabilidade**     | Principalmente vertical (adicionar mais recursos ao servidor)      | Principalmente horizontal (distribuir entre mltiplos servidores)      |
| **Transaes**         | Suporte ACID (Atomicidade, Consistncia, Isolamento, Durabilidade) | Geralmente BASE (Basically Available, Soft state, Eventually consistent) |
| **Integridade Dados**  | Alta integridade, chaves primrias/estrangeiras, constraints       | Menor nfase na integridade referencial, gerenciada pela aplicao      |
| **Melhor para**        | Aplicaes com dados estruturados, transaes complexas, integridade crtica | Aplicaes com grandes volumes de dados, dados no estruturados, alta escalabilidade, agilidade no desenvolvimento |
| **Exemplos**           | MySQL, PostgreSQL, Oracle, SQL Server                              | MongoDB, Redis, Cassandra, DynamoDB, Neo4j                              |

### Qual Escolher para Node.js?

A escolha entre SQL e NoSQL depende dos requisitos especficos do seu projeto:

*   **Use SQL se:**
    *   Seus dados so altamente estruturados e relacionais.
    *   Voc precisa de transaes ACID e forte consistncia de dados.
    *   A integridade referencial  crucial.
    *   Voc prev consultas complexas e relatrios que se beneficiam do SQL.

*   **Use NoSQL se:**
    *   Voc precisa de alta escalabilidade horizontal e flexibilidade para lidar com grandes volumes de dados.
    *   Seus dados so semi-estruturados ou no estruturados e o schema pode mudar frequentemente.
    *   A velocidade de desenvolvimento e a agilidade so prioridades.
    *   Voc pode tolerar consistncia eventual em algumas partes da sua aplicao.

Node.js, com sua natureza assncrona e orientada a eventos, se integra bem com ambos os tipos de bancos de dados. A flexibilidade do JavaScript e a popularidade de ODMs como Mongoose (para MongoDB) e ORMs como Sequelize ou Prisma (para SQL) tornam a interao com qualquer um deles bastante eficiente.

### Concluso

A deciso entre bancos de dados SQL e NoSQL no  uma questo de qual  "melhor", mas sim de qual  "mais adequado" para o problema em questo. Ambos tm seus pontos fortes e fracos. Um desenvolvedor Node.js moderno deve estar familiarizado com as caractersticas de ambos para poder fazer escolhas arquitetnicas informadas que garantam a robustez, escalabilidade e performance de suas aplicaes.

---

`,pot=()=>g.jsx(qe,{content:dot,backRoute:"/node/frameworks",backText:"Voltar: Frameworks",goRoute:"/node/boas-praticas",goText:"Prximo: Boas Prticas"}),fot=`# Mdulo 4: Tpicos Avanados e Boas Prticas

## Tpico 4.5: Prticas Modernas para 2025

O ecossistema Node.js est em constante evoluo, com novas funcionalidades e melhores prticas surgindo regularmente. Para manter suas aplicaes atualizadas, seguras e eficientes,  fundamental adotar as prticas mais modernas. Este tpico aborda o uso de APIs nativas da Web, tratamento de erros robusto e monitoramento de vulnerabilidades.

### Uso de APIs Nativas da Web, como \`fetch\`

Historicamente, para fazer requisies HTTP em Node.js, era comum usar mdulos como \`http\` (nativo, mas de baixo nvel) ou bibliotecas de terceiros como \`axios\` ou \`node-fetch\`. No entanto, com a evoluo do Node.js, muitas APIs que antes eram exclusivas do navegador esto sendo implementadas nativamente no ambiente de tempo de execuo do servidor. Uma das mais notveis  a \`Fetch API\`.

#### \`Fetch API\` em Node.js

A \`Fetch API\` oferece uma interface moderna e baseada em Promises para fazer requisies de rede. Ela  familiar para desenvolvedores frontend e agora est disponvel nativamente no Node.js (a partir da verso 18, sem a necessidade de instalar pacotes adicionais).

**Vantagens:**
*   **Padronizao:** Mesma API usada no navegador, facilitando o desenvolvimento full-stack.
*   **Baseado em Promises:** Integra-se naturalmente com \`async/await\`, tornando o cdigo assncrono mais limpo.
*   **Streaming:** Suporte a streams para lidar com grandes volumes de dados de forma eficiente.

**Exemplo de Uso:**

\`\`\`javascript
// src/services/apiService.js
async function fetchData(url, options = {}) {
  try {
    const response = await fetch(url, options);

    if (!response.ok) {
      // Lidar com erros HTTP (4xx, 5xx)
      const errorData = await response.json();
      throw new Error(\`Erro HTTP: \${response.status} - \${errorData.message || response.statusText}\`);
    }

    // Verifica o tipo de contedo para parsear corretamente
    const contentType = response.headers.get("content-type");
    if (contentType && contentType.includes("application/json")) {
      return await response.json();
    } else {
      return await response.text(); // Ou response.blob(), response.arrayBuffer()
    }
  } catch (error) {
    console.error("Erro na requisio fetch:", error.message);
    throw error; // Re-lana o erro para ser tratado pelo chamador
  }
}

// Exemplo de uso em um controlador
// src/controllers/externalDataController.js
async function getExternalUsers(req, res) {
  try {
    const users = await fetchData("https://jsonplaceholder.typicode.com/users");
    res.status(200).json(users);
  } catch (error) {
    res.status(500).json({ message: "Falha ao buscar usurios externos", error: error.message });
  }
}

// Exemplo de POST
async function postNewData(req, res) {
  try {
    const newData = { title: "foo", body: "bar", userId: 1 };
    const result = await fetchData("https://jsonplaceholder.typicode.com/posts", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(newData),
    });
    res.status(201).json(result);
  } catch (error) {
    res.status(500).json({ message: "Falha ao enviar dados", error: error.message });
  }
}

module.exports = { fetchData, getExternalUsers, postNewData };
\`\`\`

### Tratamento de Erros e \`Graceful Shutdown\`

Um tratamento de erros robusto e um \`graceful shutdown\` (desligamento gracioso) so essenciais para a estabilidade e confiabilidade de aplicaes em produo. Erros no tratados podem derrubar sua aplicao, e um desligamento abrupto pode levar  perda de dados ou estados inconsistentes.

#### Tratamento de Erros

1.  **\`try...catch\` para Cdigo Sncrono e \`async/await\`:** Use \`try...catch\` para capturar excees em blocos de cdigo sncrono e dentro de funes \`async\` que usam \`await\`.

    \`\`\`javascript
    // Exemplo em um controlador
    exports.createProduct = async (req, res) => {
      try {
        // ... lgica de criao de produto ...
      } catch (error) {
        console.error("Erro ao criar produto:", error);
        res.status(500).json({ message: "Erro interno do servidor" });
      }
    };
    \`\`\`

2.  **Middlewares de Erro no Express:** Para erros que ocorrem em middlewares ou rotas, o Express.js pode encaminh-los para um middleware de tratamento de erros especial (com 4 argumentos: \`(err, req, res, next)\`).

    \`\`\`javascript
    // src/middlewares/errorHandler.js
    const errorHandler = (err, req, res, next) => {
      console.error(err.stack); // Loga o stack trace do erro

      const statusCode = res.statusCode === 200 ? 500 : res.statusCode;
      res.status(statusCode).json({
        message: err.message,
        // Em produo, no envie o stack trace para o cliente
        stack: process.env.NODE_ENV === "production" ? null : err.stack,
      });
    };

    module.exports = errorHandler;

    // Em app.js, adicione no final, aps todas as rotas e outros middlewares
    const errorHandler = require("./middlewares/errorHandler");
    app.use(errorHandler);
    \`\`\`

3.  **Captura de Excees No Tratadas:** Para erros que no so capturados por \`try...catch\` ou middlewares, Node.js fornece eventos globais.

    *   \`process.on('uncaughtException')\`: Captura excees sncronas no tratadas.
    *   \`process.on('unhandledRejection')\`: Captura Promises rejeitadas que no foram tratadas com \`.catch()\`.

    \`\`\`javascript
    // Em server.js ou um arquivo de configurao de erro
    process.on("uncaughtException", (err) => {
      console.error("Erro sncrono no tratado! Desligando...");
      console.error(err.name, err.message, err.stack);
      // Opcional: Enviar log para um servio de monitoramento
      process.exit(1); // Encerra o processo
    });

    process.on("unhandledRejection", (err, promise) => {
      console.error("Rejeio de Promise no tratada! Desligando...");
      console.error(err.name, err.message, err.stack);
      // Opcional: Enviar log para um servio de monitoramento
      process.exit(1); // Encerra o processo
    });
    \`\`\`

#### \`Graceful Shutdown\`

Um \`graceful shutdown\` permite que sua aplicao termine as requisies em andamento e feche conexes com bancos de dados ou outros servios antes de ser encerrada. Isso evita perda de dados e estados inconsistentes.

\`\`\`javascript
// Em server.js
const app = require("./src/app");
const connectDB = require("./src/config/db"); // Se estiver usando DB

// Conecta ao banco de dados (se aplicvel)
connectDB();

const PORT = process.env.PORT || 3000;

const server = app.listen(PORT, () => {
  console.log(\`Servidor rodando em http://localhost:\${PORT}\`);
});

// Lidar com desligamento do processo (Ctrl+C, SIGTERM, etc.)
process.on("SIGTERM", () => {
  console.log("SIGTERM recebido. Iniciando desligamento gracioso...");
  server.close(() => {
    console.log("Servidor HTTP fechado.");
    // Fechar conexo com o banco de dados
    if (connectDB.connection) {
      connectDB.connection.close(false, () => {
        console.log("Conexo com o banco de dados fechada.");
        process.exit(0);
      });
    } else {
      process.exit(0);
    }
  });
});

process.on("SIGINT", () => {
  console.log("SIGINT recebido. Iniciando desligamento gracioso...");
  server.close(() => {
    console.log("Servidor HTTP fechado.");
    if (connectDB.connection) {
      connectDB.connection.close(false, () => {
        console.log("Conexo com o banco de dados fechada.");
        process.exit(0);
      });
    } else {
      process.exit(0);
    }
  });
});

// Para MongoDB com Mongoose, voc pode usar:
// mongoose.connection.close(() => { console.log('Mongoose connection disconnected'); process.exit(0); });
\`\`\`

### Monitoramento de Vulnerabilidades com \`npm audit\`

Manter as dependncias do seu projeto atualizadas e livres de vulnerabilidades  uma prtica de segurana crucial. O \`npm audit\`  uma ferramenta integrada ao npm que verifica seu projeto em busca de vulnerabilidades de segurana conhecidas nas suas dependncias.

#### Como Usar \`npm audit\`

Execute o comando no diretrio raiz do seu projeto:

\`\`\`bash
npm audit
\`\`\`

O \`npm audit\` ir:
*   Analisar seu \`package-lock.json\`.
*   Comparar as dependncias com um banco de dados de vulnerabilidades conhecido.
*   Gerar um relatrio detalhado sobre quaisquer vulnerabilidades encontradas, incluindo a severidade, o pacote afetado e a soluo proposta.

#### Solucionando Vulnerabilidades

*   **\`npm audit fix\`:** Tenta corrigir automaticamente as vulnerabilidades instalando verses compatveis das dependncias que no possuem as falhas. Isso geralmente funciona para vulnerabilidades de baixa e mdia severidade.

    \`\`\`bash
    npm audit fix
    \`\`\`

*   **\`npm audit fix --force\`:** Se \`npm audit fix\` no conseguir resolver todas as vulnerabilidades devido a conflitos de dependncia, voc pode tentar \`--force\`. No entanto, isso pode instalar verses que quebram a compatibilidade com seu cdigo, ento use com cautela e teste exaustivamente.

*   **Atualizao Manual:** Para vulnerabilidades mais complexas ou quando \`npm audit fix\` no funciona, voc pode precisar atualizar manualmente as dependncias para verses que corrigem a vulnerabilidade. Isso pode envolver a atualizao de dependncias diretas ou transitivas.

*   **Ignorar (com cautela):** Em casos raros, se uma vulnerabilidade no for aplicvel ao seu caso de uso ou se no houver uma correo disponvel, voc pode optar por ignor-la. No entanto, isso deve ser feito com extrema cautela e aps uma anlise de risco completa.

#### Boas Prticas de Segurana de Dependncias

*   **Execute \`npm audit\` regularmente:** Integre-o ao seu pipeline de CI/CD.
*   **Mantenha as dependncias atualizadas:** Use \`npm outdated\` para verificar dependncias desatualizadas e atualize-as regularmente.
*   **Revise as dependncias:** Antes de adicionar uma nova dependncia, verifique sua reputao, nmero de downloads, problemas abertos e histrico de segurana.
*   **Use ferramentas de segurana:** Considere ferramentas de segurana de terceiros que oferecem monitoramento contnuo de vulnerabilidades e alertas.

### Concluso

Adotar prticas modernas no desenvolvimento Node.js  fundamental para construir aplicaes robustas, seguras e eficientes. O uso de APIs nativas como \`fetch\` simplifica o cdigo e padroniza a experincia. Um tratamento de erros abrangente e um \`graceful shutdown\` garantem a resilincia da aplicao. Por fim, o monitoramento contnuo de vulnerabilidades com \`npm audit\` e a manuteno de dependncias atualizadas so essenciais para proteger sua aplicao contra ameaas de segurana. Ao incorporar essas prticas, voc estar construindo aplicaes Node.js prontas para os desafios de 2025 e alm.

---

`,mot=()=>g.jsx(qe,{content:fot,backRoute:"/node/banco-de-dados",backText:"Voltar: Banco de Dados",goRoute:"/node/deploy",goText:"Prximo: Deploy"}),hot=`# Mdulo 5: Deploy e Ecossistema

## Tpico 5.3: CI/CD (Integrao e Entrega Contnua)

CI/CD, que significa Integrao Contnua (Continuous Integration) e Entrega Contnua (Continuous Delivery) ou Implantao Contnua (Continuous Deployment),  um conjunto de prticas que automatizam o ciclo de vida de desenvolvimento de software. O objetivo principal  tornar o processo de construo, teste e deploy de aplicaes mais rpido, confivel e menos propenso a erros. Para aplicaes Node.js, a implementao de um pipeline CI/CD  fundamental para manter a agilidade e a qualidade do cdigo.

### O que  CI/CD?

#### Integrao Contnua (CI)

Integrao Contnua  a prtica de desenvolvedores integrarem suas alteraes de cdigo em um repositrio central (como Git) com frequncia, geralmente vrias vezes ao dia. Cada integrao  ento verificada por uma construo automatizada (build) e testes automatizados para detectar erros de integrao o mais rpido possvel.

**Benefcios da CI:**
*   **Deteco Rpida de Bugs:** Problemas de integrao so identificados e corrigidos cedo, reduzindo o custo e o esforo.
*   **Qualidade do Cdigo:** Garante que o cdigo base esteja sempre em um estado funcional e testado.
*   **Colaborao Aprimorada:** Facilita a colaborao entre desenvolvedores, pois as integraes so pequenas e frequentes.
*   **Feedback Rpido:** Desenvolvedores recebem feedback imediato sobre a qualidade e funcionalidade de suas alteraes.

**Etapas Tpicas de um Pipeline de CI:**
1.  **Commit de Cdigo:** Desenvolvedores fazem commit de suas alteraes para o repositrio.
2.  **Gatilho (Trigger):** O sistema de CI detecta o novo commit e inicia o pipeline.
3.  **Build:** O cdigo  compilado (se necessrio) e as dependncias so instaladas.
4.  **Testes:** Testes unitrios, de integrao e de segurana so executados.
5.  **Relatrio:** Os resultados dos testes so reportados. Se houver falhas, o build  marcado como falho e os desenvolvedores so notificados.

#### Entrega Contnua (CD - Continuous Delivery)

Entrega Contnua  uma extenso da Integrao Contnua. Aps a fase de CI, onde o cdigo  construdo e testado, a Entrega Contnua garante que o cdigo esteja sempre em um estado implantvel (deployable). Isso significa que, a qualquer momento, o cdigo pode ser liberado para produo com um clique, mas a deciso de implantar  manual.

**Benefcios da Continuous Delivery:**
*   **Prontido para Deploy:** A aplicao est sempre pronta para ser implantada em produo.
*   **Menos Riscos no Deploy:** Como os deploys so pequenos e frequentes, o risco de introduzir bugs  reduzido.
*   **Feedback de Negcios:** Permite que as partes interessadas de negcios testem as novas funcionalidades mais cedo.

#### Implantao Contnua (CD - Continuous Deployment)

Implantao Contnua vai um passo alm da Entrega Contnua. Cada alterao de cdigo que passa com sucesso por todas as etapas do pipeline de CI/CD  automaticamente implantada em produo, sem interveno humana. Isso requer um alto nvel de confiana nos testes automatizados e na infraestrutura.

**Benefcios da Continuous Deployment:**
*   **Lanamentos Rpidos:** Novas funcionalidades e correes de bugs chegam aos usurios finais muito mais rapidamente.
*   **Reduo de Overhead:** Elimina a necessidade de agendar e gerenciar deploys manuais.
*   **Ciclo de Feedback Curto:** Permite aprender rapidamente com o uso real da aplicao.

### Automatizando Testes e o Processo de Deploy com GitHub Actions

GitHub Actions  uma plataforma de CI/CD que permite automatizar, personalizar e executar fluxos de trabalho de desenvolvimento de software diretamente no seu repositrio GitHub. Voc pode criar fluxos de trabalho (workflows) que constroem, testam e implantam seu cdigo em qualquer plataforma.

#### Conceitos Chave do GitHub Actions:

*   **Workflow:** Um processo automatizado configurado em um arquivo YAML (\`.github/workflows/main.yml\`).
*   **Event:** Um evento especfico que dispara o workflow (ex: \`push\` para o branch \`main\`, \`pull_request\`).
*   **Job:** Um conjunto de passos que so executados em um runner. Um workflow pode ter um ou mais jobs, que podem ser executados em paralelo ou sequencialmente.
*   **Step:** Uma tarefa individual dentro de um job. Pode ser um comando shell ou uma ao (action).
*   **Action:** Uma aplicao customizada que executa uma tarefa complexa, como configurar um ambiente Node.js, fazer login em um provedor de nuvem ou implantar cdigo.
*   **Runner:** Um servidor que executa o workflow. Pode ser hospedado pelo GitHub ou auto-hospedado.

#### Exemplo de Workflow CI/CD para uma Aplicao Node.js

Vamos criar um workflow que:
1.  Dispara em \`push\` e \`pull_request\` para o branch \`main\`.
2.  Instala as dependncias do Node.js.
3.  Executa os testes.
4.  Constri a aplicao (se houver um passo de build, como para TypeScript).
5.  Implanta a aplicao em um provedor de nuvem (ex: Heroku, Vercel, AWS).

Crie um arquivo \`.github/workflows/main.yml\` na raiz do seu projeto:

\`\`\`yaml
# .github/workflows/main.yml

name: Node.js CI/CD

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-test:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout do Cdigo
      uses: actions/checkout@v4

    - name: Configurar Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm' # Habilita cache para npm install

    - name: Instalar Dependncias
      run: npm install

    - name: Executar Testes
      run: npm test

    - name: Construir Aplicao (se TypeScript ou outro build)
      run: npm run build # Se voc tiver um script 'build' no package.json
      if: always() # Executa mesmo se os testes falharem, para ver o log do build

  deploy:
    needs: build-and-test # Este job s roda se 'build-and-test' for bem-sucedido
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main' # S faz deploy se for um push para o branch main

    steps:
    - name: Checkout do Cdigo
      uses: actions/checkout@v4

    - name: Configurar Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'

    - name: Instalar Dependncias
      run: npm install

    - name: Construir Aplicao
      run: npm run build

    # Exemplo de Deploy para Heroku
    - name: Deploy para Heroku
      uses: akhileshns/heroku-deploy@v3.12.12
      with:
        heroku_api_key: \${{ secrets.HEROKU_API_KEY }}
        heroku_app_name: "nome-da-sua-app-heroku"
        heroku_email: "seu-email@example.com"
        # branch: "main" # Opcional, padro  o branch atual

    # Exemplo de Deploy para Vercel (requer Vercel CLI e projeto configurado)
    # - name: Deploy para Vercel
    #   run: vercel --prod --token \${{ secrets.VERCEL_TOKEN }}
    #   env:
    #     VERCEL_ORG_ID: \${{ secrets.VERCEL_ORG_ID }}
    #     VERCEL_PROJECT_ID: \${{ secrets.VERCEL_PROJECT_ID }}

    # Exemplo de Deploy para AWS S3 (para assets estticos ou frontends)
    # - name: Deploy para AWS S3
    #   uses: jakejarvis/s3-sync-action@master
    #   with:
    #     args: --acl public-read --delete
    #   env:
    #     AWS_S3_BUCKET: \${{ secrets.AWS_S3_BUCKET }}
    #     AWS_ACCESS_KEY_ID: \${{ secrets.AWS_ACCESS_KEY_ID }}
    #     AWS_SECRET_ACCESS_KEY: \${{ secrets.AWS_SECRET_ACCESS_KEY }}
    #     AWS_REGION: 'us-east-1'
    #     SOURCE_DIR: 'dist' # Onde seus arquivos de build esto
\`\`\`

#### Configurando Segredos (Secrets)

Para o deploy, voc precisar de chaves de API ou tokens que no devem ser expostos publicamente. O GitHub Actions permite armazenar esses valores como "Secrets" no seu repositrio.

1.  No seu repositrio GitHub, v para \`Settings > Secrets and variables > Actions\`.
2.  Clique em \`New repository secret\`.
3.  Adicione o nome do segredo (ex: \`HEROKU_API_KEY\`, \`VERCEL_TOKEN\`, \`AWS_ACCESS_KEY_ID\`) e seu valor.

Esses segredos sero injetados no ambiente de execuo do seu workflow, mas no sero visveis nos logs.

### Concluso

CI/CD  uma prtica essencial para o desenvolvimento de software moderno, especialmente em projetos Node.js. Ao automatizar a construo, teste e deploy, voc pode acelerar o ciclo de desenvolvimento, melhorar a qualidade do cdigo e reduzir o risco de erros em produo. Ferramentas como GitHub Actions fornecem uma plataforma poderosa e flexvel para implementar pipelines CI/CD robustos, permitindo que voc entregue valor aos seus usurios de forma contnua e confivel.

---

`,got=()=>g.jsx(qe,{content:hot,backRoute:"/node/boas-praticas",backText:"Voltar: Boas Prticas",goRoute:"/ma/introducao",goText:"Prximo: Introduo a Mtodos geis"}),bot=`# Aula 01: O Manifesto gil

## Objetivo da Aula
Objetivo: Entender o **Manifesto gil** e como seus valores e princpios transformaram o desenvolvimento de software.

## Introduo Terica ("O que ?")

Imagine que voc est construindo uma casa. No modelo tradicional, conhecido como **Cascata (Waterfall)**, voc planeja absolutamente tudo no incio: o projeto arquitetnico completo, a lista de materiais, o cronograma detalhado. S depois de todo o planejamento pronto  que a construo comea. O problema  que, se o cliente mudar de ideia sobre a cor da parede ou o tamanho da janela no meio do processo, a mudana  cara, demorada e pode atrasar toda a entrega.

O **Manifesto gil** surgiu como uma resposta a essa rigidez. Ele no  uma metodologia, mas sim uma **declarao de valores e princpios** que guiam uma nova forma de pensar e trabalhar.  um *mindset* que prioriza a **adaptao  mudana** e a **entrega contnua de valor** ao cliente, em vez de seguir um plano rgido.

## Explicao Detalhada ("Pontos-Chave")

O Manifesto gil foi escrito em 2001 por 17 desenvolvedores de software que buscavam alternativas aos processos pesados e documentados da poca. Ele  composto por 4 valores e 12 princpios.

### Os 4 Valores do Manifesto gil

Estes valores so declaraes de preferncia, ou seja, os itens  esquerda so mais valorizados do que os itens  direita, embora os itens  direita ainda sejam importantes.

| Valorizamos Mais... | Do que... |
| :--- | :--- |
| **Indivduos e interaes** | Processos e ferramentas |
| **Software em funcionamento** | Documentao abrangente |
| **Colaborao com o cliente** | Negociao de contratos |
| **Responder a mudanas** | Seguir um plano |

1.  **Indivduos e interaes mais que processos e ferramentas:** O sucesso de um projeto depende da comunicao eficaz e da colaborao entre as pessoas, e no apenas das ferramentas ou da burocracia.
2.  **Software em funcionamento mais que documentao abrangente:** O objetivo final  entregar um produto que funcione e gere valor, e no apenas criar pilhas de documentos que podem se tornar obsoletos rapidamente.
3.  **Colaborao com o cliente mais que negociao de contratos:** Trabalhar lado a lado com o cliente, recebendo feedback constante,  mais eficaz do que tentar prever todas as necessidades em um contrato fechado no incio.
4.  **Responder a mudanas mais que seguir um plano:** Em um ambiente de desenvolvimento complexo, a mudana  inevitvel. A capacidade de se adaptar rapidamente  mais valiosa do que a aderncia cega a um plano inicial.

### Os 12 Princpios do Manifesto gil

Os 12 princpios detalham como os 4 valores devem ser aplicados na prtica:

1.  Nossa maior prioridade  satisfazer o cliente atravs da entrega contnua e adiantada de software com valor.
2.  Aceitar mudanas de requisitos, mesmo no fim do desenvolvimento. Processos geis tiram vantagem das mudanas para dar vantagem competitiva ao cliente.
3.  Entregar software funcionando frequentemente, na escala de semanas at meses, com preferncia  menor escala de tempo.
4.  Pessoas de negcio e desenvolvedores devem trabalhar juntos diariamente durante todo o projeto.
5.  Construa projetos em torno de indivduos motivados. D a eles o ambiente e o suporte de que precisam e confie neles para fazer o trabalho.
6.  O mtodo mais eficiente e eficaz de transmitir informaes para e entre uma equipe de desenvolvimento  a conversa face a face.
7.  Software funcionando  a medida primria de progresso.
8.  Os processos geis promovem o desenvolvimento sustentvel. Os patrocinadores, desenvolvedores e usurios devem ser capazes de manter um ritmo constante indefinidamente.
9.  A ateno contnua  excelncia tcnica e ao bom design aumenta a agilidade.
10. Simplicidade  a arte de maximizar a quantidade de trabalho no realizado   essencial.
11. As melhores arquiteturas, requisitos e designs emergem de equipes auto-organizveis.
12. Em intervalos regulares, a equipe reflete sobre como se tornar mais eficaz e, ento, sintoniza e ajusta seu comportamento de acordo.

## Aplicao Prtica ("Para o Desenvolvedor")

Para o desenvolvedor Full-Stack, o *mindset* gil muda o foco de **"entregar um plano"** para **"entregar valor contnuo"**.

*   **Foco no Valor:** Em vez de passar meses desenvolvendo um recurso completo, voc se concentra em entregar a **menor parte funcional** desse recurso (o Mnimo Produto Vivel - MVP) o mais rpido possvel. Isso permite que o cliente comece a usar e dar feedback imediatamente.
*   **Feedback Constante:** Voc no espera o final do projeto para mostrar seu trabalho. Em ciclos curtos (como as Sprints no Scrum), voc demonstra o software funcionando, o que significa que o seu cdigo est sendo validado e ajustado constantemente.
*   **Excelncia Tcnica:** Princpios como a ateno contnua  excelncia tcnica (Princpio 9) incentivam prticas como **Test-Driven Development (TDD)**, **Refatorao Contnua** e **Integrao Contnua (CI)**. O cdigo deve ser de alta qualidade para que a equipe possa responder a mudanas sem quebrar o sistema.
*   **Colaborao:** O desenvolvedor gil no  um "codificador isolado". Ele interage diariamente com o Product Owner, o Scrum Master e outros membros da equipe, entendendo o *porqu* de cada funcionalidade e contribuindo ativamente para a soluo de problemas.

Em resumo, o Manifesto gil transforma o desenvolvedor de um executor de tarefas em um **solucionador de problemas** que est ativamente engajado na entrega de valor ao cliente.
`,yot=()=>g.jsx(qe,{content:bot,backRoute:"/node/deploy",backText:"Voltar: Deploy de Aplicaes",goRoute:"/ma/metodos-ageis",goText:"Avanar: Metodologias geis"}),vot=`# Aula 02: Mtodos geis: LEAN, KANBAN e XP

## Objetivo da Aula
Objetivo: Aprender sobre diferentes **mtodos geis** que aplicam os princpios do Manifesto gil, focando em **LEAN**, **KANBAN** e **Extreme Programming (XP)**.

## Introduo Terica ("O que ?")

Se o Manifesto gil  a **filosofia** (o *porqu*), os mtodos geis so as **ferramentas** (o *como*). Eles so frameworks ou conjuntos de prticas que ajudam as equipes a implementar os valores e princpios geis no dia a dia. Embora cada um tenha seu foco, todos compartilham o objetivo de entregar software de alta qualidade de forma rpida e adaptvel.

## Explicao Detalhada ("Pontos-Chave")

### Caractersticas Comuns dos Mtodos geis

Apesar das diferenas, a maioria dos mtodos geis compartilha caractersticas fundamentais:

*   **Ciclos Curtos de Desenvolvimento (Iteraes):** O trabalho  dividido em pequenos perodos de tempo (semanas ou at dias), permitindo entregas frequentes.
*   **Feedback Contnuo:** O produto  demonstrado e validado com o cliente ou usurios finais ao final de cada ciclo, garantindo que o que est sendo construdo  o que realmente gera valor.
*   **Equipes Auto-organizveis:** As equipes tm autonomia para decidir a melhor forma de realizar o trabalho, promovendo a responsabilidade e a motivao.
*   **Foco na Qualidade:** A excelncia tcnica  priorizada para que a base de cdigo seja slida e permita a rpida adaptao a mudanas.

### LEAN Software Development

O LEAN (Enxuto) tem suas razes no sistema de produo da Toyota. Seu foco principal  **maximizar o valor para o cliente, minimizando o desperdcio**.

*   **Foco:** Eliminar desperdcio (*Muda*).
*   **Princpios Chave:**
    1.  **Eliminar Desperdcio:** Tudo que no adiciona valor ao produto final (espera, funcionalidades desnecessrias, defeitos, troca de contexto).
    2.  **Amplificar o Aprendizado:** Usar ciclos curtos de feedback para aprender e ajustar rapidamente.
    3.  **Decidir o Mais Tarde Possvel:** Manter as opes abertas at o ltimo momento responsvel, evitando decises prematuras.
    4.  **Entregar o Mais Rpido Possvel:** O tempo de ciclo (do conceito  entrega) deve ser o menor possvel.

### KANBAN

KANBAN, que significa "carto visual" em japons,  um mtodo focado na **gesto visual do fluxo de trabalho**. Ele no prescreve papis ou eventos, mas sim prticas para otimizar o fluxo.

*   **Foco:** Gesto do fluxo de trabalho e otimizao da entrega.
*   **Prticas Chave:**
    1.  **Visualizar o Fluxo de Trabalho:** Usar um quadro (fsico ou digital) com colunas (To Do, Doing, Done, etc.) para que todos vejam o status do trabalho.
    2.  **Limitar o Trabalho em Progresso (WIP):** Definir um nmero mximo de tarefas que podem estar em andamento em cada coluna. Isso fora a equipe a **terminar** o que comeou antes de iniciar algo novo, melhorando o *throughput* (vazo).
    3.  **Gerenciar o Fluxo:** Medir o tempo de ciclo (tempo que uma tarefa leva para ir do incio ao fim) e buscar a melhoria contnua.
    4.  **Tornar as Polticas Explcitas:** Definir claramente o que significa "Pronto" para cada coluna (Definition of Done).

### Extreme Programming (XP)

O XP  um mtodo gil que se concentra em **prticas de engenharia de software** para garantir a excelncia tcnica.  o mais prescritivo em termos de como o cdigo deve ser escrito.

*   **Foco:** Excelncia tcnica e qualidade do cdigo.
*   **Prticas Chave:**
    1.  **Test-Driven Development (TDD):** Escrever o teste automatizado **antes** de escrever o cdigo de produo.
    2.  **Programao em Par (Pair Programming):** Dois desenvolvedores trabalham juntos em uma nica estao de trabalho, um escrevendo o cdigo e o outro revisando e pensando na estratgia.
    3.  **Refatorao Contnua:** Melhorar constantemente a estrutura interna do cdigo sem alterar seu comportamento externo.
    4.  **Integrao Contnua:** Integrar e testar o cdigo vrias vezes ao dia.

## Aplicao Prtica ("Para o Desenvolvedor")

O desenvolvedor Full-Stack se beneficia diretamente desses mtodos:

*   **LEAN:** Ajuda a questionar a necessidade de cada linha de cdigo ou funcionalidade. *Isso realmente adiciona valor?*
*   **KANBAN:** O quadro KANBAN se torna sua principal ferramenta de organizao. Voc v claramente o que precisa ser feito, o que est em andamento e, crucialmente, **o limite de WIP** te impede de comear trs tarefas ao mesmo tempo, forando o foco e a concluso.
*   **XP:** As prticas de XP so a base da **qualidade tcnica**. TDD e Programao em Par garantem que o cdigo seja robusto, testado e de fcil manuteno, o que  essencial para a agilidade a longo prazo.

| Mtodo | Foco Principal | Prtica Chave para o Desenvolvedor |
| :--- | :--- | :--- |
| **LEAN** | Eliminao de Desperdcio | Questionar a necessidade de funcionalidades e otimizar o tempo de ciclo. |
| **KANBAN** | Gesto Visual do Fluxo | Usar o quadro para limitar o WIP e focar na concluso das tarefas. |
| **XP** | Excelncia Tcnica | TDD, Programao em Par e Refatorao Contnua. |
`,xot=()=>g.jsx(qe,{content:vot,backRoute:"/ma/introducao",backText:"Voltar: Introduo a Mtodos geis",goRoute:"/ma/scrum",goText:"Avanar: SCRUM para Devs"}),Sot=`# Aula 03: Guia Scrum para Desenvolvedores

## Objetivo da Aula
Objetivo: Entender o **Scrum** como o framework gil mais popular, focando em seus **Papis**, **Eventos** e **Artefatos**, e como o desenvolvedor se encaixa nesse ciclo.

## Introduo Terica ("O que ?")

Se o Manifesto gil  a filosofia, o **Scrum**  o framework mais utilizado para colocar essa filosofia em prtica. Pense no Scrum como um conjunto de regras e estruturas simples que ajudam equipes a entregar produtos complexos de forma adaptativa e eficaz.

O Scrum  um framework para **desenvolvimento, entrega e manuteno de produtos complexos**. Ele  **leve**, **simples de entender**, mas **extremamente difcil de dominar**. Ele se baseia em trs pilares: **Transparncia**, **Inspeo** e **Adaptao**.

## Explicao Detalhada ("Pontos-Chave")

O Scrum define trs Papis, cinco Eventos e trs Artefatos.

### Os Papis (The Scrum Team)

A equipe Scrum  composta por trs papis especficos, que trabalham juntos para entregar o Incremento do produto.

| Papel | Responsabilidade Principal | Detalhe para o Desenvolvedor |
| :--- | :--- | :--- |
| **Product Owner (PO)** | Maximizar o valor do produto resultante do trabalho da Equipe de Desenvolvimento. |  a **voz do cliente**. Define o *o qu* deve ser construdo, priorizando o Product Backlog. |
| **Scrum Master (SM)** | Garantir que o Scrum seja entendido e aplicado.  um **lder-servidor**. | Remove impedimentos, facilita os eventos Scrum e treina a equipe na auto-organizao. |
| **The Developers** | Entregar um Incremento de produto potencialmente utilizvel a cada Sprint. |  quem **constri o produto**. So auto-organizveis e responsveis pela qualidade tcnica. |

**The Developers:** No contexto do nosso curso, voc  um **Developer**. Sua responsabilidade no  apenas codificar, mas tambm estimar o trabalho, planejar a Sprint, garantir a qualidade (Definition of Done) e colaborar ativamente com o PO e o SM.

### Os Eventos (O Ciclo de Vida da Sprint)

O corao do Scrum  a **Sprint**, um perodo de tempo fixo (geralmente de 1 a 4 semanas) durante o qual um Incremento de produto  criado. Todos os outros eventos ocorrem dentro da Sprint.

| Evento | Propsito | Durao Mxima (Time-Box) | Participantes Chave |
| :--- | :--- | :--- | :--- |
| **Sprint** | Entregar um Incremento de valor. | 1 a 4 semanas (fixo) | Toda a Equipe Scrum |
| **Sprint Planning** | Definir o **Objetivo da Sprint** e selecionar os itens do Product Backlog que sero trabalhados (Sprint Backlog). | 8 horas para uma Sprint de 4 semanas (proporcionalmente menor) | Toda a Equipe Scrum |
| **Daily Scrum (Reunio Diria)** | Inspecionar o progresso em direo ao Objetivo da Sprint e adaptar o plano de trabalho. | 15 minutos | The Developers (SM e PO podem participar) |
| **Sprint Review (Reviso da Sprint)** | Inspecionar o Incremento e adaptar o Product Backlog, se necessrio.  uma demonstrao do que foi concludo. | 4 horas para uma Sprint de 4 semanas | Toda a Equipe Scrum + Stakeholders |
| **Sprint Retrospective (Retrospectiva)** | Inspecionar a forma como a equipe trabalhou e planejar melhorias para a prxima Sprint. | 3 horas para uma Sprint de 4 semanas | Toda a Equipe Scrum |

### Os Artefatos

Os Artefatos representam o trabalho ou o valor. Eles so projetados para maximizar a transparncia das informaes chave.

1.  **Product Backlog:** Uma lista ordenada e emergente de tudo o que  conhecido como necessrio no produto.  a **fonte nica** de trabalho para a Equipe Scrum. O **Product Owner**  o responsvel por sua gesto e priorizao.
2.  **Sprint Backlog:** O conjunto de itens do Product Backlog selecionados para a Sprint, mais o plano para entregar o Incremento e atingir o Objetivo da Sprint.  de responsabilidade dos **Developers**.
3.  **Incremento:** A soma de todos os itens do Sprint Backlog concludos durante uma Sprint e o valor dos Incrementos de todas as Sprints anteriores. Deve estar em um estado **utilizvel** e aderir  **Definition of Done (DoD)**.

## Aplicao Prtica ("Para o Desenvolvedor")

O desenvolvedor Full-Stack  o motor do Scrum. Seu envolvimento  crucial em todos os eventos:

*   **Sprint Planning:** Voc ajuda a definir o *como* o trabalho ser feito e a estimar o esforo, garantindo que o Objetivo da Sprint seja realista.
*   **Daily Scrum:**  o seu momento de sincronizao. Voc no reporta ao Scrum Master, mas sim inspeciona o progresso com seus colegas Developers e identifica impedimentos.
*   **Definition of Done (DoD):** A DoD  o seu padro de qualidade. Um item s est "Pronto" se atender a todos os critrios da DoD (ex: cdigo revisado, testes automatizados passando, documentao atualizada).
*   **Auto-organizao:** Voc e seus colegas Developers decidem a melhor forma de transformar os itens do Sprint Backlog em um Incremento. Isso inclui a escolha de tecnologias, padres de cdigo e a diviso do trabalho.

O Scrum fornece a estrutura, mas  a **disciplina tcnica** e a **colaborao** dos Developers que garantem o sucesso da entrega. Dominar o Scrum significa entender o ciclo de feedback e us-lo para melhorar continuamente o produto e o processo de trabalho.
`,Eot=()=>g.jsx(qe,{content:Sot,backRoute:"/ma/metodos-ageis",backText:"Voltar: Metodologias geis",goRoute:"/ia/introducao",goText:"Avanar: Introduo a IA"}),Tot=`# Aula 01: O que  Inteligncia Artificial (IA)

## Objetivo da Aula
Objetivo: Entender os conceitos fundamentais de **Inteligncia Artificial (IA)**, **Machine Learning (ML)** e **IA Generativa**, e como eles se aplicam ao ambiente de desenvolvimento.

## Introduo Terica ("O que ?")

A **Inteligncia Artificial (IA)**  um campo da cincia da computao dedicado a criar sistemas capazes de simular a inteligncia humana. Isso inclui tarefas como aprendizado, raciocnio, percepo e tomada de deciso.

Imagine um beb aprendendo a reconhecer um gato. Ele v vrios exemplos, e seu crebro aprende a identificar padres (orelhas pontudas, bigodes, cauda). A IA funciona de forma semelhante: em vez de ser explicitamente programada com regras ("SE tem bigodes E tem orelhas pontudas, ENTO  um gato"), ela **aprende com os dados**.

### Machine Learning (ML)

O **Machine Learning (ML)**  um subcampo da IA.  a tcnica que permite que os sistemas de IA aprendam a partir dos dados sem serem explicitamente programados. Em vez de escrever milhes de linhas de cdigo para cobrir todas as possibilidades, voc fornece um algoritmo e uma grande quantidade de dados, e o algoritmo "aprende" a realizar a tarefa.

### IA Generativa

A **IA Generativa**  um tipo de Machine Learning que se tornou popular recentemente. Em vez de apenas classificar ou prever (como um ML tradicional), a IA Generativa  capaz de **criar novos contedos** (texto, cdigo, imagens, udio) que so originais, mas parecem ter sido criados por um humano.  o motor por trs de ferramentas como ChatGPT, Copilot e Midjourney.

## Explicao Detalhada ("Pontos-Chave")

| Conceito | Definio Simples | Exemplo no Desenvolvimento |
| :--- | :--- | :--- |
| **Inteligncia Artificial (IA)** | A capacidade de uma mquina simular o comportamento inteligente humano. | Um sistema que automatiza a priorizao de bugs no *bug tracker*. |
| **Machine Learning (ML)** | Algoritmos que aprendem padres a partir de dados para fazer previses ou tomar decises. | Um modelo que prev a probabilidade de um usurio cancelar a assinatura (churn). |
| **IA Generativa** | Modelos que criam novos dados (texto, cdigo, imagem) a partir de padres aprendidos. | Um assistente de cdigo que completa automaticamente a prxima linha de cdigo ou gera uma funo inteira. |

A IA Generativa, em particular, utiliza modelos de linguagem grandes (LLMs - Large Language Models) que so treinados em vastas quantidades de texto e cdigo. Eles no "entendem" no sentido humano, mas so extremamente eficazes em prever a prxima palavra ou linha de cdigo mais provvel em uma sequncia.

## Aplicao Prtica ("Para o Desenvolvedor")

Para o desenvolvedor Full-Stack, a IA se manifesta de duas formas principais:

1.  **Ferramenta de Produtividade Integrada (IDE):**
    *   Assistentes de cdigo como **GitHub Copilot** ou **CodeWhisperer** so IAs Generativas que se integram diretamente ao seu ambiente de desenvolvimento (IDE). Eles usam o contexto do seu cdigo para sugerir autocompletar, gerar testes unitrios ou at mesmo criar funes inteiras a partir de um comentrio.

2.  **Consumo via API:**
    *   Muitas funcionalidades de IA so disponibilizadas como **Web Services** que voc pode consumir em seu cdigo. Por exemplo, voc pode integrar a API de um LLM em seu backend Node.js para:
        *   Gerar resumos automticos de artigos.
        *   Traduzir textos em tempo real.
        *   Criar um chatbot de suporte ao cliente.

A IA, portanto, no  apenas uma tecnologia que voc usa, mas tambm uma **funcionalidade** que voc pode integrar em seus prprios projetos, abrindo novas possibilidades para a criao de software. O desenvolvedor moderno precisa saber como interagir com esses modelos, seja como usurio ou como integrador.
`,wot=()=>g.jsx(qe,{content:Tot,backRoute:"/ma/scrum",backText:"Voltar: SCRUM para Devs",goRoute:"/ia/produtividade",goText:"Avanar: Produtividade com IA"}),Cot=`# Aula 02: IA para Produtividade

## Objetivo da Aula
Objetivo: Aprender a utilizar a **Inteligncia Artificial Generativa** como uma ferramenta de **produtividade** para automatizar tarefas repetitivas e acelerar o ciclo de desenvolvimento.

## Introduo Terica ("O que ?")

A IA Generativa, especialmente os assistentes de cdigo e os modelos de linguagem, atua como um "parceiro de programao" sempre disponvel. Ela no substitui o desenvolvedor, mas sim **amplifica** sua capacidade, permitindo que ele se concentre em problemas de maior valor, como a arquitetura do sistema e a lgica de negcio complexa.

O segredo  ver a IA como um **atalho inteligente** para tarefas que consomem tempo, mas que so previsveis.

## Explicao Detalhada ("Pontos-Chave")

A IA pode ser aplicada em diversas reas do dia a dia do desenvolvedor Full-Stack:

### 1. Gerao de Cdigo (Boilerplate)

*   **O que :** Cdigo repetitivo e padronizado que precisa ser escrito para iniciar um projeto ou funcionalidade (ex: *templates* de componentes React, rotas bsicas de API em Node.js, configuraes de banco de dados).
*   **Como a IA ajuda:** A IA pode gerar esse cdigo em segundos, bastando um comentrio ou uma descrio em linguagem natural.
*   **Exemplo:** Um prompt como \`// Funo Node.js que conecta ao MongoDB e retorna todos os usurios\` pode gerar a funo completa, incluindo \`try...catch\` e tratamento de conexo.

### 2. Refatorao e Otimizao

*   **O que :** Melhorar a estrutura interna de um cdigo existente sem alterar seu comportamento externo, tornando-o mais limpo, legvel e eficiente.
*   **Como a IA ajuda:** A IA pode analisar um bloco de cdigo e sugerir melhorias de performance, padres de design mais adequados ou simplificao de lgica complexa.
*   **Exemplo:** Pedir  IA para \`Refatorar esta funo para usar async/await em vez de .then().catch()\` ou \`Otimizar este loop for para usar .map() em JavaScript\`.

### 3. Explicao de Cdigo

*   **O que :** Entender um cdigo legado, complexo ou escrito por outro colega.
*   **Como a IA ajuda:** A IA pode atuar como um tradutor, explicando linha por linha ou em um resumo conciso o que um bloco de cdigo faz, qual sua inteno e como ele se encaixa no contexto do projeto.
*   **Exemplo:** Selecionar uma funo desconhecida e pedir \`Explique o propsito e o fluxo de execuo desta funo\`.

### 4. Gerao de Testes Unitrios

*   **O que :** Criar testes automatizados que verificam se pequenas unidades de cdigo (funes, classes) se comportam como esperado.
*   **Como a IA ajuda:** A IA pode analisar uma funo e gerar automaticamente casos de teste (testes de sucesso, testes de erro, testes de *edge case*), economizando um tempo significativo.
*   **Exemplo:** Pedir \`Gerar testes unitrios Jest para esta funo de validao de e-mail\`.

### 5. Auxlio no Debugging

*   **O que :** Encontrar e corrigir erros (bugs) no cdigo.
*   **Como a IA ajuda:** Ao fornecer uma mensagem de erro (stack trace) e o cdigo relacionado, a IA pode analisar o contexto e sugerir a causa provvel do erro e a correo.
*   **Exemplo:** Colar o *stack trace* de um erro 500 no servidor e perguntar \`Qual a causa mais provvel deste erro e como posso corrigi-lo?\`.

## Aplicao Prtica ("Para o Desenvolvedor")

A chave para usar a IA como ferramenta de produtividade  a **reviso crtica**. O cdigo gerado pela IA  um excelente ponto de partida, mas **nunca deve ser aceito sem inspeo**.

| Tarefa | Benefcio da IA | Foco do Desenvolvedor |
| :--- | :--- | :--- |
| **Boilerplate** | Velocidade na criao de estruturas. | Arquitetura e integrao do cdigo gerado. |
| **Refatorao** | Sugestes de padres e otimizaes. | Garantir que a lgica de negcio no foi alterada. |
| **Testes** | Cobertura rpida de casos de teste. | Validar a qualidade e a relevncia dos testes gerados. |
| **Debugging** | Diagnstico rpido de erros comuns. | Correo final e preveno de erros futuros. |

Ao delegar tarefas repetitivas  IA, o desenvolvedor Full-Stack ganha tempo para se dedicar  **resoluo de problemas complexos**, **design de sistemas** e **interao com o cliente**, que so as atividades de maior valor e que a IA ainda no consegue replicar.
`,Aot=()=>g.jsx(qe,{content:Cot,backRoute:"/ia/introducao",backText:"Voltar: Introduo a IA",goRoute:"/ia/engenharia-de-prompt",goText:"Avanar: Engenharia de Prompt"}),_ot=`# Aula 03: Engenharia de Prompt

## Objetivo da Aula
Objetivo: Aprender os princpios da **Engenharia de Prompt**, a arte de se comunicar com modelos de IA Generativa para obter resultados precisos e teis.

## Introduo Terica ("O que ?")

A **Engenharia de Prompt**  a disciplina de estruturar o texto de entrada (o *prompt*) para que um modelo de linguagem grande (LLM) gere uma resposta desejada.  a diferena entre pedir a um assistente: "Me ajude com meu cdigo" e "Atue como um especialista em segurana de Node.js. Revise o cdigo abaixo e me diga se h alguma vulnerabilidade de injeo SQL, explicando o porqu e sugerindo a correo usando *prepared statements*."

A qualidade da sada da IA  diretamente proporcional  qualidade do *prompt* de entrada.

## Explicao Detalhada ("Pontos-Chave")

Um bom *prompt* para um desenvolvedor deve ser construdo com os seguintes princpios:

### 1. Contexto (Onde Estamos?)
O modelo precisa saber o ambiente em que est trabalhando.
*   **O que incluir:** Linguagem de programao, framework, verso, trechos de cdigo relevantes, bibliotecas utilizadas.
*   **Exemplo:** "Estou usando React com TypeScript e a biblioteca \`axios\` para chamadas de API."

### 2. Persona (Quem Voc ?)
Definir um papel para a IA direciona o estilo e o foco da resposta.
*   **O que incluir:** "Atue como um...", "Voc  um...", "Imagine que voc  um..."
*   **Exemplo:** "Atue como um engenheiro de software snior com 10 anos de experincia em Python."

### 3. Objetivo Claro (O Que Eu Quero?)
O resultado esperado deve ser inequvoco.
*   **O que incluir:** O formato da sada (cdigo, explicao, lista, tabela), a tarefa especfica a ser realizada.
*   **Exemplo:** "Gere uma funo que valide o formato de um CPF, retornando \`true\` ou \`false\`."

### 4. Exemplos (Few-Shot Learning)
Mostrar  IA o que voc espera pode ser mais eficaz do que descrever.
*   **O que incluir:** Pares de entrada/sada que demonstrem o padro desejado.
*   **Exemplo:** "Se a entrada for \`[1, 2, 3]\`, a sada deve ser \`[2, 4, 6]\`. Se a entrada for \`[10, 20]\`, a sada deve ser \`[20, 40]\`."

### 5. Restries (O Que No Fazer?)
Limitar o escopo da resposta evita "alucinaes" ou sadas irrelevantes.
*   **O que incluir:** Limites de tamanho, excluso de bibliotecas especficas, requisitos de estilo de cdigo (ex: "no use \`var\`", "comente cada linha").
*   **Exemplo:** "A resposta deve ser apenas o cdigo, sem explicaes adicionais. O cdigo deve ser compatvel com ES6."

## Aplicao Prtica ("Para o Desenvolvedor")

A diferena entre um *prompt* ruim e um bom  a diferena entre um resultado intil e um cdigo que voc pode copiar e colar (com a devida reviso).

| Tarefa | Prompt Ruim | Prompt Bom (Com Princpios) |
| :--- | :--- | :--- |
| **Gerao de Cdigo** | "Me d um cdigo para fazer login." | **[Persona]** Atue como um desenvolvedor Full-Stack. **[Contexto]** Estou usando Express.js e MongoDB. **[Objetivo]** Gere o cdigo de uma rota POST \`/login\` que use \`bcrypt\` para verificar a senha e retorne um JWT. **[Restrio]** No inclua a lgica de *frontend*. |
| **Debugging** | "Meu cdigo no funciona." | **[Contexto]** O erro \`TypeError: Cannot read properties of undefined (reading 'map')\` est ocorrendo na linha 42 do meu componente React. **[Objetivo]** Analise o trecho de cdigo que estou colando e me diga o que est \`undefined\` e como corrigir. **[Restrio]** Sugira a correo usando *optional chaining* (\`?.\`). |

Dominar a Engenharia de Prompt  uma **habilidade essencial** para o desenvolvedor moderno.  a forma de transformar uma ferramenta poderosa, mas genrica, em um assistente pessoal altamente especializado. Voc est aprendendo a **programar a IA** com linguagem natural.
`,kot=()=>g.jsx(qe,{content:_ot,backRoute:"/ia/produtividade",backText:"Voltar: Produtividade com IA",goRoute:"/ia/uso-etico",goText:"Avanar: Uso tico da IA"}),Iot=`# Aula 04: Uso Crtico e tico da IA

## Objetivo da Aula
Objetivo: Entender os **riscos** e as **responsabilidades ticas** ao usar ferramentas de IA no desenvolvimento de software, garantindo um uso crtico, seguro e profissional.

## Introduo Terica ("O que ?")

A IA  uma ferramenta de imenso poder, mas como toda ferramenta, exige responsabilidade. O uso acrtico e desatento pode levar a falhas de segurana, introduo de *bugs* sutis e at mesmo problemas legais ou ticos. O desenvolvedor Full-Stack deve ser o **guardio da qualidade e da tica** em seu trabalho, mesmo ao usar a IA.

## Explicao Detalhada ("Pontos-Chave")

### 1. Verificao: A IA Pode "Alucinar"

*   **O Problema:** Modelos de IA Generativa, especialmente LLMs, so projetados para gerar texto que *parece* plausvel, mas no necessariamente *verdadeiro*. Isso  conhecido como **alucinao**. A IA pode inventar funes, bibliotecas, argumentos de API ou at mesmo fatos.
*   **O Ponto de Ateno:** A **responsabilidade final** pelo cdigo e pelo produto  **sempre do desenvolvedor**. O cdigo gerado pela IA  uma sugesto, no uma verdade absoluta.
*   **Prtica Crtica:** Sempre **teste** o cdigo gerado, **leia** a documentao das APIs sugeridas e **valide** a lgica de negcio.

### 2. Segurana: O Risco de Colar Cdigo Sensvel

*   **O Problema:** Ao usar ferramentas de IA baseadas em nuvem (como o ChatGPT ou a verso online do Copilot), o cdigo que voc insere no *prompt*  enviado para os servidores da empresa de IA. Se esse cdigo contiver informaes sensveis (chaves de API, segredos, lgica de negcio proprietria, dados de clientes), voc pode estar violando a poltica de segurana da sua empresa ou acordos de confidencialidade (NDAs).
*   **O Ponto de Ateno:** **Nunca cole cdigo que contenha segredos** ou informaes que no podem ser compartilhadas publicamente.
*   **Prtica Segura:** Use verses de IA que garantam a **privacidade do cdigo** (como as verses empresariais ou as que rodam localmente) ou **anonimize** o cdigo antes de envi-lo.

### 3. Vis (Bias): Como a IA Pode Perpetuar Preconceitos

*   **O Problema:** Os modelos de IA so treinados em dados massivos da internet. Se esses dados contm preconceitos sociais, a IA pode aprender e replicar esses **vieses** em suas sadas. Por exemplo, um modelo pode sugerir um cdigo que assume um gnero especfico para um papel profissional.
*   **O Ponto de Ateno:** O cdigo e as decises de design geradas pela IA devem ser inspecionados para garantir que sejam **neutros, justos e inclusivos**.
*   **Prtica tica:** Ao usar a IA para gerar textos ou interfaces de usurio, revise a linguagem e as representaes para evitar a perpetuao de esteretipos.

## O Futuro do Desenvolvedor

A IA no est aqui para substituir o desenvolvedor, mas sim para **potencializar** sua capacidade de resolver problemas.

*   **A IA automatiza o *como* (a escrita do cdigo).**
*   **O desenvolvedor foca no *o qu* e no *porqu* (a arquitetura, a lgica de negcio, a experincia do usurio).**

O desenvolvedor do futuro ser aquele que souber **integrar a IA de forma crtica e tica** em seu fluxo de trabalho. A capacidade de **engenharia de prompt**, de **reviso crtica** e de **tomada de deciso tica** se tornar mais valiosa do que a mera habilidade de escrever cdigo. A IA cuida do repetitivo; voc cuida do complexo e do humano.
`,Pot=()=>g.jsx(qe,{content:Iot,backRoute:"/ia/engenharia-de-prompt",backText:"Voltar: Engenharia de Prompt",goRoute:"/summary",goText:"Voltar ao Sumrio"});function Oot(){return g.jsx(Xpe,{children:g.jsxs(dfe,{children:[g.jsx(Zfe,{position:"bottom-right",toastOptions:{style:{background:"#333",color:"#fff",border:"1px solid #555"}}}),g.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-300 font-sans",children:[g.jsx(vme,{}),g.jsx("main",{className:"container mx-auto px-4 pt-28 pb-16",children:g.jsxs(Ape,{children:[g.jsx(je,{path:"/",element:g.jsx(Het,{})}),g.jsx(je,{path:"/login",element:g.jsx($et,{})}),g.jsx(je,{path:"/register",element:g.jsx(Vet,{})}),g.jsx(je,{path:"/ranking",element:g.jsx(Get,{})}),g.jsx(je,{path:"/sobre",element:g.jsx(Uet,{})}),g.jsx(je,{path:"/summary",element:g.jsx(Ue,{children:g.jsx(zet,{})})}),g.jsx(je,{path:"/html/introducao",element:g.jsx(Ue,{children:g.jsx(Wet,{})})}),g.jsx(je,{path:"/html/primeiro-documento",element:g.jsx(Ue,{children:g.jsx(Xet,{})})}),g.jsx(je,{path:"/html/estruturando-conteudo",element:g.jsx(Ue,{children:g.jsx(Qet,{})})}),g.jsx(je,{path:"/html/links-e-imagens",element:g.jsx(Ue,{children:g.jsx(ett,{})})}),g.jsx(je,{path:"/html/semantico",element:g.jsx(Ue,{children:g.jsx(ntt,{})})}),g.jsx(je,{path:"/html/projeto-blog",element:g.jsx(Ue,{children:g.jsx(ott,{})})}),g.jsx(je,{path:"/css/introducao",element:g.jsx(Ue,{children:g.jsx(stt,{})})}),g.jsx(je,{path:"/css/seletores",element:g.jsx(Ue,{children:g.jsx(ltt,{})})}),g.jsx(je,{path:"/css/box-model",element:g.jsx(Ue,{children:g.jsx(utt,{})})}),g.jsx(je,{path:"/css/cores-e-unidades",element:g.jsx(Ue,{children:g.jsx(ptt,{})})}),g.jsx(je,{path:"/css/textos",element:g.jsx(Ue,{children:g.jsx(mtt,{})})}),g.jsx(je,{path:"/css/intro-flexbox",element:g.jsx(Ue,{children:g.jsx(gtt,{})})}),g.jsx(je,{path:"/css/flexbox-container",element:g.jsx(Ue,{children:g.jsx(ytt,{})})}),g.jsx(je,{path:"/css/flexbox-items",element:g.jsx(Ue,{children:g.jsx(xtt,{})})}),g.jsx(je,{path:"/css/projeto-blog",element:g.jsx(Ue,{children:g.jsx(Ett,{})})}),g.jsx(je,{path:"/js/introducao",element:g.jsx(Ue,{children:g.jsx(wtt,{})})}),g.jsx(je,{path:"/js/variaveis",element:g.jsx(Ue,{children:g.jsx(Att,{})})}),g.jsx(je,{path:"/js/operadores",element:g.jsx(Ue,{children:g.jsx(ktt,{})})}),g.jsx(je,{path:"/js/strings",element:g.jsx(Ue,{children:g.jsx(Ptt,{})})}),g.jsx(je,{path:"/js/arrays",element:g.jsx(Ue,{children:g.jsx(Mtt,{})})}),g.jsx(je,{path:"/js/funcoes",element:g.jsx(Ue,{children:g.jsx(Dtt,{})})}),g.jsx(je,{path:"/js/objetos",element:g.jsx(Ue,{children:g.jsx(Ltt,{})})}),g.jsx(je,{path:"/js/condicionais",element:g.jsx(Ue,{children:g.jsx(Btt,{})})}),g.jsx(je,{path:"/js/loops",element:g.jsx(Ue,{children:g.jsx(ztt,{})})}),g.jsx(je,{path:"/js/intro-dom",element:g.jsx(Ue,{children:g.jsx(qtt,{})})}),g.jsx(je,{path:"/js/selecionando-elementos",element:g.jsx(Ue,{children:g.jsx($tt,{})})}),g.jsx(je,{path:"/js/manipulando-estilos",element:g.jsx(Ue,{children:g.jsx(Gtt,{})})}),g.jsx(je,{path:"/js/eventos",element:g.jsx(Ue,{children:g.jsx(Wtt,{})})}),g.jsx(je,{path:"/js/eventos-pratica",element:g.jsx(Ue,{children:g.jsx(Xtt,{})})}),g.jsx(je,{path:"/js/criando-removendo-elementos",element:g.jsx(Ue,{children:g.jsx(Qtt,{})})}),g.jsx(je,{path:"/js/arrow-functions",element:g.jsx(Ue,{children:g.jsx(ent,{})})}),g.jsx(je,{path:"/js/desestruturacao",element:g.jsx(Ue,{children:g.jsx(nnt,{})})}),g.jsx(je,{path:"/js/rest-spread",element:g.jsx(Ue,{children:g.jsx(ont,{})})}),g.jsx(je,{path:"/js/map-filter-reduce",element:g.jsx(Ue,{children:g.jsx(snt,{})})}),g.jsx(je,{path:"/js/classes",element:g.jsx(Ue,{children:g.jsx(lnt,{})})}),g.jsx(je,{path:"/js/hoisting",element:g.jsx(Ue,{children:g.jsx(unt,{})})}),g.jsx(je,{path:"/js/callbacks",element:g.jsx(Ue,{children:g.jsx(pnt,{})})}),g.jsx(je,{path:"/js/promises",element:g.jsx(Ue,{children:g.jsx(mnt,{})})}),g.jsx(je,{path:"/js/fetch",element:g.jsx(Ue,{children:g.jsx(gnt,{})})}),g.jsx(je,{path:"/js/async-await",element:g.jsx(Ue,{children:g.jsx(ynt,{})})}),g.jsx(je,{path:"/js/modulos",element:g.jsx(Ue,{children:g.jsx(xnt,{})})}),g.jsx(je,{path:"/js/projeto-lista-tarefas",element:g.jsx(Ue,{children:g.jsx(Ent,{})})}),g.jsx(je,{path:"/algoritmos/introducao",element:g.jsx(Ue,{children:g.jsx(wnt,{})})}),g.jsx(je,{path:"/algoritmos/estruturas-lineares",element:g.jsx(Ue,{children:g.jsx(Ant,{})})}),g.jsx(je,{path:"/algoritmos/estruturas-nao-lineares",element:g.jsx(Ue,{children:g.jsx(knt,{})})}),g.jsx(je,{path:"/algoritmos/busca-e-ordenacao",element:g.jsx(Ue,{children:g.jsx(Pnt,{})})}),g.jsx(je,{path:"/algoritmos/arquitetura",element:g.jsx(Ue,{children:g.jsx(Mnt,{})})}),g.jsx(je,{path:"/algoritmos/projeto-algoritmos",element:g.jsx(Ue,{children:g.jsx(Dnt,{})})}),g.jsx(je,{path:"/ts/introducao",element:g.jsx(Ue,{children:g.jsx(Lnt,{})})}),g.jsx(je,{path:"/ts/tipos-basicos",element:g.jsx(Ue,{children:g.jsx(Bnt,{})})}),g.jsx(je,{path:"/ts/objetos-e-funcoes",element:g.jsx(Ue,{children:g.jsx(znt,{})})}),g.jsx(je,{path:"/ts/interfaces",element:g.jsx(Ue,{children:g.jsx(qnt,{})})}),g.jsx(je,{path:"/ts/generics",element:g.jsx(Ue,{children:g.jsx($nt,{})})}),g.jsx(je,{path:"/ts/tipos-avancados",element:g.jsx(Ue,{children:g.jsx(Gnt,{})})}),g.jsx(je,{path:"/ts/modulos",element:g.jsx(Ue,{children:g.jsx(Wnt,{})})}),g.jsx(je,{path:"/ts/typescript-com-react",element:g.jsx(Ue,{children:g.jsx(Xnt,{})})}),g.jsx(je,{path:"/ts/consumo-de-api",element:g.jsx(Ue,{children:g.jsx(Qnt,{})})}),g.jsx(je,{path:"/ts/testes",element:g.jsx(Ue,{children:g.jsx(ert,{})})}),g.jsx(je,{path:"/ts/projeto-typescript",element:g.jsx(Ue,{children:g.jsx(nrt,{})})}),g.jsx(je,{path:"/react/introducao",element:g.jsx(Ue,{children:g.jsx(ort,{})})}),g.jsx(je,{path:"/react/fundamentos",element:g.jsx(Ue,{children:g.jsx(srt,{})})}),g.jsx(je,{path:"/react/hooks",element:g.jsx(Ue,{children:g.jsx(lrt,{})})}),g.jsx(je,{path:"/react/roteamento",element:g.jsx(Ue,{children:g.jsx(urt,{})})}),g.jsx(je,{path:"/react/gerenciamento-estado",element:g.jsx(Ue,{children:g.jsx(prt,{})})}),g.jsx(je,{path:"/react/consumo-api",element:g.jsx(Ue,{children:g.jsx(mrt,{})})}),g.jsx(je,{path:"/react/estilizacao",element:g.jsx(Ue,{children:g.jsx(grt,{})})}),g.jsx(je,{path:"/react/testes",element:g.jsx(Ue,{children:g.jsx(yrt,{})})}),g.jsx(je,{path:"/react/build-vite",element:g.jsx(Ue,{children:g.jsx(xrt,{})})}),g.jsx(je,{path:"/react/projeto-pratico",element:g.jsx(Ue,{children:g.jsx(Ert,{})})}),g.jsx(je,{path:"/react/dicas-vaga",element:g.jsx(Ue,{children:g.jsx(wrt,{})})}),g.jsx(je,{path:"/ux/introducao",element:g.jsx(Ue,{children:g.jsx(Art,{})})}),g.jsx(je,{path:"/ux/principios",element:g.jsx(Ue,{children:g.jsx(krt,{})})}),g.jsx(je,{path:"/ux/arquitetura",element:g.jsx(Ue,{children:g.jsx(Prt,{})})}),g.jsx(je,{path:"/ux/lei-de-gestalt",element:g.jsx(Ue,{children:g.jsx(Mrt,{})})}),g.jsx(je,{path:"/ux/tipografia",element:g.jsx(Ue,{children:g.jsx(Drt,{})})}),g.jsx(je,{path:"/ux/prototipagem",element:g.jsx(Ue,{children:g.jsx(Lrt,{})})}),g.jsx(je,{path:"/ux/nielsen",element:g.jsx(Ue,{children:g.jsx(Brt,{})})}),g.jsx(je,{path:"/ux/design-thinking",element:g.jsx(Ue,{children:g.jsx(zrt,{})})}),g.jsx(je,{path:"/ux/acessibilidade",element:g.jsx(Ue,{children:g.jsx(qrt,{})})}),g.jsx(je,{path:"/ux/design-emocional",element:g.jsx(Ue,{children:g.jsx($rt,{})})}),g.jsx(je,{path:"/ws/introducao",element:g.jsx(Ue,{children:g.jsx(Grt,{})})}),g.jsx(je,{path:"/ws/rest",element:g.jsx(Ue,{children:g.jsx(Wrt,{})})}),g.jsx(je,{path:"/ws/requisicoes",element:g.jsx(Ue,{children:g.jsx(Xrt,{})})}),g.jsx(je,{path:"/ws/consumo-de-api",element:g.jsx(Ue,{children:g.jsx(Qrt,{})})}),g.jsx(je,{path:"/ws/enviando-dados",element:g.jsx(Ue,{children:g.jsx(eot,{})})}),g.jsx(je,{path:"/ws/tratamento-de-erros",element:g.jsx(Ue,{children:g.jsx(not,{})})}),g.jsx(je,{path:"/ws/autenticacao",element:g.jsx(Ue,{children:g.jsx(oot,{})})}),g.jsx(je,{path:"/node/introducao",element:g.jsx(Ue,{children:g.jsx(sot,{})})}),g.jsx(je,{path:"/node/fundamentos",element:g.jsx(Ue,{children:g.jsx(lot,{})})}),g.jsx(je,{path:"/node/frameworks",element:g.jsx(Ue,{children:g.jsx(uot,{})})}),g.jsx(je,{path:"/node/banco-de-dados",element:g.jsx(Ue,{children:g.jsx(pot,{})})}),g.jsx(je,{path:"/node/boas-praticas",element:g.jsx(Ue,{children:g.jsx(mot,{})})}),g.jsx(je,{path:"/node/deploy",element:g.jsx(Ue,{children:g.jsx(got,{})})}),g.jsx(je,{path:"/ma/introducao",element:g.jsx(Ue,{children:g.jsx(yot,{})})}),g.jsx(je,{path:"/ma/metodos-ageis",element:g.jsx(Ue,{children:g.jsx(xot,{})})}),g.jsx(je,{path:"/ma/scrum",element:g.jsx(Ue,{children:g.jsx(Eot,{})})}),g.jsx(je,{path:"/ia/introducao",element:g.jsx(Ue,{children:g.jsx(wot,{})})}),g.jsx(je,{path:"/ia/produtividade",element:g.jsx(Ue,{children:g.jsx(Aot,{})})}),g.jsx(je,{path:"/ia/engenharia-de-prompt",element:g.jsx(Ue,{children:g.jsx(kot,{})})}),g.jsx(je,{path:"/ia/uso-etico",element:g.jsx(Ue,{children:g.jsx(Pot,{})})}),g.jsx(je,{path:"*",element:g.jsxs("div",{className:"text-center text-red-500 text-2xl py-20",children:[g.jsx("h2",{children:"404 - Pgina No Encontrada"}),g.jsx("p",{className:"text-lg text-gray-400 mt-2",children:"A rota que voc tentou acessar no existe."})]})})]})})]})]})})}Dde.createRoot(document.getElementById("root")).render(g.jsx(bt.StrictMode,{children:g.jsx(Oot,{})}));
